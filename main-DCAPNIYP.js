var n4=Object.defineProperty,r4=Object.defineProperties;var i4=Object.getOwnPropertyDescriptors;var fg=Object.getOwnPropertySymbols,o4=Object.getPrototypeOf,NM=Object.prototype.hasOwnProperty,OM=Object.prototype.propertyIsEnumerable,s4=Reflect.get;var kM=(n,e,t)=>e in n?n4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||={})NM.call(e,t)&&kM(n,t,e[t]);if(fg)for(var t of fg(e))OM.call(e,t)&&kM(n,t,e[t]);return n},ae=(n,e)=>r4(n,i4(e));var rh=(n,e)=>{var t={};for(var r in n)NM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fg)for(var r of fg(n))e.indexOf(r)<0&&OM.call(n,r)&&(t[r]=n[r]);return t};var gi=(n,e,t)=>s4(o4(n),t,e);var S=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(d){i(d)}},s=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function wE(n,e){return Object.is(n,e)}var Jt=null,pg=!1,EE=1,_r=Symbol("SIGNAL");function Be(n){let e=Jt;return Jt=n,e}function IE(){return Jt}var oh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sh(n){if(pg)throw new Error("");if(Jt===null)return;Jt.consumerOnSignalRead(n);let e=Jt.nextProducerIndex++;if(_g(Jt),e<Jt.producerNode.length&&Jt.producerNode[e]!==n&&ih(Jt)){let t=Jt.producerNode[e];yg(t,Jt.producerIndexOfThis[e])}Jt.producerNode[e]!==n&&(Jt.producerNode[e]=n,Jt.producerIndexOfThis[e]=ih(Jt)?FM(n,Jt,e):0),Jt.producerLastReadVersion[e]=n.version}function LM(){EE++}function bE(n){if(!(ih(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===EE)){if(!n.producerMustRecompute(n)&&!DE(n)){vE(n);return}n.producerRecomputeValue(n),vE(n)}}function TE(n){if(n.liveConsumerNode===void 0)return;let e=pg;pg=!0;try{for(let t of n.liveConsumerNode)t.dirty||a4(t)}finally{pg=e}}function CE(){return Jt?.consumerAllowSignalWrites!==!1}function a4(n){n.dirty=!0,TE(n),n.consumerMarkedDirty?.(n)}function vE(n){n.dirty=!1,n.lastCleanEpoch=EE}function mg(n){return n&&(n.nextProducerIndex=0),Be(n)}function SE(n,e){if(Be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ih(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function DE(n){_g(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(bE(t),r!==t.version))return!0}return!1}function AE(n){if(_g(n),ih(n))for(let e=0;e<n.producerNode.length;e++)yg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function FM(n,e,t){if(VM(n),n.liveConsumerNode.length===0&&UM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=FM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yg(n,e){if(VM(n),n.liveConsumerNode.length===1&&UM(n))for(let r=0;r<n.producerNode.length;r++)yg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_g(i),i.producerIndexOfThis[r]=e}}function ih(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _g(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function VM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function UM(n){return n.producerNode!==void 0}function RE(n,e){let t=Object.create(c4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(bE(t),sh(t),t.value===gg)throw t.error;return t.value};return r[_r]=t,r}var yE=Symbol("UNSET"),_E=Symbol("COMPUTING"),gg=Symbol("ERRORED"),c4=ae(z({},oh),{value:yE,dirty:!0,error:null,equal:wE,kind:"computed",producerMustRecompute(n){return n.value===yE||n.value===_E},producerRecomputeValue(n){if(n.value===_E)throw new Error("Detected cycle in computations.");let e=n.value;n.value=_E;let t=mg(n),r,i=!1;try{r=n.computation(),Be(null),i=e!==yE&&e!==gg&&r!==gg&&n.equal(e,r)}catch(o){r=gg,n.error=o}finally{SE(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function l4(){throw new Error}var BM=l4;function jM(n){BM(n)}function ME(n){BM=n}var u4=null;function xE(n,e){let t=Object.create(vg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(sh(t),t.value);return r[_r]=t,r}function ah(n,e){CE()||jM(n),n.equal(n.value,e)||(n.value=e,d4(n))}function PE(n,e){CE()||jM(n),ah(n,e(n.value))}var vg=ae(z({},oh),{equal:wE,value:void 0,kind:"signal"});function d4(n){n.version++,LM(),TE(n),u4?.()}function kE(n){let e=Be(null);try{return n()}finally{Be(e)}}var NE;function ch(){return NE}function no(n){let e=NE;return NE=n,e}var wg=Symbol("NotFound");function Re(n){return typeof n=="function"}function fl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Eg=fl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function lh(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Nt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(o){e=o instanceof Eg?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zM(o)}catch(s){e=e??[],s instanceof Eg?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Eg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)zM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&lh(t,e)}remove(e){let{_finalizers:t}=this;t&&lh(t,e),e instanceof n&&e._removeParent(this)}};Nt.EMPTY=(()=>{let n=new Nt;return n.closed=!0,n})();var OE=Nt.EMPTY;function Ig(n){return n instanceof Nt||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function zM(n){Re(n)?n():n.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pl={setTimeout(n,e,...t){let{delegate:r}=pl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bg(n){pl.setTimeout(()=>{let{onUnhandledError:e}=Lr;if(e)e(n);else throw n})}function uh(){}var $M=LE("C",void 0,void 0);function qM(n){return LE("E",void 0,n)}function HM(n){return LE("N",n,void 0)}function LE(n,e,t){return{kind:n,value:e,error:t}}var Ra=null;function gl(n){if(Lr.useDeprecatedSynchronousErrorHandling){let e=!Ra;if(e&&(Ra={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ra;if(Ra=null,t)throw r}}else n()}function GM(n){Lr.useDeprecatedSynchronousErrorHandling&&Ra&&(Ra.errorThrown=!0,Ra.error=n)}var Ma=class extends Nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ig(e)&&e.add(this)):this.destination=y4}static create(e,t,r){return new ml(e,t,r)}next(e){this.isStopped?VE(HM(e),this):this._next(e)}error(e){this.isStopped?VE(qM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?VE($M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},g4=Function.prototype.bind;function FE(n,e){return g4.call(n,e)}var UE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Tg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Tg(r)}else Tg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Tg(t)}}},ml=class extends Ma{constructor(e,t,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Lr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&FE(e.next,o),error:e.error&&FE(e.error,o),complete:e.complete&&FE(e.complete,o)}):i=e}this.destination=new UE(i)}};function Tg(n){Lr.useDeprecatedSynchronousErrorHandling?GM(n):bg(n)}function m4(n){throw n}function VE(n,e){let{onStoppedNotification:t}=Lr;t&&pl.setTimeout(()=>t(n,e))}var y4={closed:!0,next:uh,error:m4,complete:uh};var yl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ir(n){return n}function Cg(...n){return BE(n)}function BE(n){return n.length===0?ir:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=v4(t)?t:new ml(t,r,i);return gl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=WM(r),new r((i,o)=>{let s=new ml({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yl](){return this}pipe(...t){return BE(t)(this)}toPromise(t){return t=WM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function WM(n){var e;return(e=n??Lr.Promise)!==null&&e!==void 0?e:Promise}function _4(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}function v4(n){return n&&n instanceof Ma||_4(n)&&Ig(n)}function jE(n){return Re(n?.lift)}function Ge(n){return e=>{if(jE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function je(n,e,t,r,i){return new zE(n,e,t,r,i)}var zE=class extends Ma{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _l(){return Ge((n,e)=>{let t=null;n._refCount++;let r=je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var vl=class extends Le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,jE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nt;let t=this.getSubject();e.add(this.source.subscribe(je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nt.EMPTY)}return e}refCount(){return _l()(this)}};var KM=fl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class n extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Sg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new KM}next(t){gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?OE:(this.currentObservers=null,o.push(t),new Nt(()=>{this.currentObservers=null,lh(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Le;return t.source=this,t}}return n.create=(e,t)=>new Sg(e,t),n})(),Sg=class extends St{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:OE}};var Ot=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Un=new Le(n=>n.complete());function QM(n){return n&&Re(n.schedule)}function YM(n){return n[n.length-1]}function Dg(n){return Re(YM(n))?n.pop():void 0}function fs(n){return QM(YM(n))?n.pop():void 0}function Ag(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ZM(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(r.next(h))}catch(g){s(g)}}function c(h){try{d(r.throw(h))}catch(g){s(g)}}function d(h){h.done?o(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function JM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xa(n){return this instanceof xa?(this.v=n,this):new xa(n)}function XM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(C){return function(k){return Promise.resolve(k).then(C,g)}}function a(C,k){r[C]&&(i[C]=function(F){return new Promise(function(N,q){o.push([C,F,N,q])>1||c(C,F)})},k&&(i[C]=k(i[C])))}function c(C,k){try{d(r[C](k))}catch(F){T(o[0][3],F)}}function d(C){C.value instanceof xa?Promise.resolve(C.value.v).then(h,g):T(o[0][2],C)}function h(C){c("next",C)}function g(C){c("throw",C)}function T(C,k){C(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ex(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof JM=="function"?JM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var Rg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Mg(n){return Re(n?.then)}function xg(n){return Re(n[yl])}function Pg(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function kg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function w4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ng=w4();function Og(n){return Re(n?.[Ng])}function Lg(n){return XM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xa(t.read());if(i)return yield xa(void 0);yield yield xa(r)}}finally{t.releaseLock()}})}function Fg(n){return Re(n?.getReader)}function Ut(n){if(n instanceof Le)return n;if(n!=null){if(xg(n))return E4(n);if(Rg(n))return I4(n);if(Mg(n))return b4(n);if(Pg(n))return tx(n);if(Og(n))return T4(n);if(Fg(n))return C4(n)}throw kg(n)}function E4(n){return new Le(e=>{let t=n[yl]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function I4(n){return new Le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function b4(n){return new Le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bg)})}function T4(n){return new Le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tx(n){return new Le(e=>{S4(n,e).catch(t=>e.error(t))})}function C4(n){return tx(Lg(n))}function S4(n,e){var t,r,i,o;return ZM(this,void 0,void 0,function*(){try{for(t=ex(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vg(n,e=0){return Ge((t,r)=>{t.subscribe(je(r,i=>Bn(r,n,()=>r.next(i),e),()=>Bn(r,n,()=>r.complete(),e),i=>Bn(r,n,()=>r.error(i),e)))})}function Ug(n,e=0){return Ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nx(n,e){return Ut(n).pipe(Ug(e),Vg(e))}function rx(n,e){return Ut(n).pipe(Ug(e),Vg(e))}function ix(n,e){return new Le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ox(n,e){return new Le(t=>{let r;return Bn(t,e,()=>{r=n[Ng](),Bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function Bg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Le(t=>{Bn(t,e,()=>{let r=n[Symbol.asyncIterator]();Bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function sx(n,e){return Bg(Lg(n),e)}function ax(n,e){if(n!=null){if(xg(n))return nx(n,e);if(Rg(n))return ix(n,e);if(Mg(n))return rx(n,e);if(Pg(n))return Bg(n,e);if(Og(n))return ox(n,e);if(Fg(n))return sx(n,e)}throw kg(n)}function lt(n,e){return e?ax(n,e):Ut(n)}function me(...n){let e=fs(n);return lt(n,e)}function wl(n,e){let t=Re(n)?n:()=>n,r=i=>i.error(t());return new Le(e?i=>e.schedule(r,0,i):r)}function $E(n){return!!n&&(n instanceof Le||Re(n.lift)&&Re(n.subscribe))}var ro=fl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(n,e){return Ge((t,r)=>{let i=0;t.subscribe(je(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:D4}=Array;function A4(n,e){return D4(e)?n(...e):n(e)}function jg(n){return Ie(e=>A4(n,e))}var{isArray:R4}=Array,{getPrototypeOf:M4,prototype:x4,keys:P4}=Object;function zg(n){if(n.length===1){let e=n[0];if(R4(e))return{args:e,keys:null};if(k4(e)){let t=P4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function k4(n){return n&&typeof n=="object"&&M4(n)===x4}function $g(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pa(...n){let e=fs(n),t=Dg(n),{args:r,keys:i}=zg(n);if(r.length===0)return lt([],e);let o=new Le(N4(r,e,i?s=>$g(i,s):ir));return t?o.pipe(jg(t)):o}function N4(n,e,t=ir){return r=>{cx(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)cx(e,()=>{let d=lt(n[c],e),h=!1;d.subscribe(je(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cx(n,e,t){n?Bn(t,n,e):e()}function lx(n,e,t,r,i,o,s,a){let c=[],d=0,h=0,g=!1,T=()=>{g&&!c.length&&!d&&e.complete()},C=F=>d<r?k(F):c.push(F),k=F=>{o&&e.next(F),d++;let N=!1;Ut(t(F,h++)).subscribe(je(e,q=>{i?.(q),o?C(q):e.next(q)},()=>{N=!0},void 0,()=>{if(N)try{for(d--;c.length&&d<r;){let q=c.shift();s?Bn(e,s,()=>k(q)):k(q)}T()}catch(q){e.error(q)}}))};return n.subscribe(je(e,C,()=>{g=!0,T()})),()=>{a?.()}}function Lt(n,e,t=1/0){return Re(e)?Lt((r,i)=>Ie((o,s)=>e(r,o,i,s))(Ut(n(r,i))),t):(typeof e=="number"&&(t=e),Ge((r,i)=>lx(r,i,n,t)))}function El(n=1/0){return Lt(ir,n)}function ux(){return El(1)}function Il(...n){return ux()(lt(n,fs(n)))}function qg(n){return new Le(e=>{Ut(n()).subscribe(e)})}function qE(...n){let e=Dg(n),{args:t,keys:r}=zg(n),i=new Le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let h=0;h<s;h++){let g=!1;Ut(t[h]).subscribe(je(o,T=>{g||(g=!0,d--),a[h]=T},()=>c--,void 0,()=>{(!c||!g)&&(d||o.next(r?$g(r,a):a),o.complete())}))}});return e?i.pipe(jg(e)):i}function jn(n,e){return Ge((t,r)=>{let i=0;t.subscribe(je(r,o=>n.call(e,o,i++)&&r.next(o)))})}function io(n){return Ge((e,t)=>{let r=null,i=!1,o;r=e.subscribe(je(t,void 0,void 0,s=>{o=Ut(n(s,io(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function dx(n,e,t,r,i){return(o,s)=>{let a=t,c=e,d=0;o.subscribe(je(s,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ps(n,e){return Re(e)?Lt(n,e,1):Lt(n,1)}function gs(n){return Ge((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vn(n){return n<=0?()=>Un:Ge((e,t)=>{let r=0;e.subscribe(je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hg(n=O4){return Ge((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function O4(){return new ro}function dh(n){return Ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function oo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,o)=>n(i,o,r)):ir,vn(1),t?gs(e):Hg(()=>new ro))}function bl(n){return n<=0?()=>Un:Ge((e,t)=>{let r=[];e.subscribe(je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function HE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,o)=>n(i,o,r)):ir,bl(1),t?gs(e):Hg(()=>new ro))}function Gg(n,e){return Ge(dx(n,e,arguments.length>=2,!0))}function Wg(...n){let e=fs(n);return Ge((t,r)=>{(e?Il(n,t,e):Il(n,t)).subscribe(r)})}function zn(n,e){return Ge((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(je(r,c=>{i?.unsubscribe();let d=0,h=o++;Ut(n(c,h)).subscribe(i=je(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Tl(n){return Ge((e,t)=>{Ut(n).subscribe(je(t,()=>t.complete(),uh)),!t.closed&&e.subscribe(t)})}function Zt(n,e,t){let r=Re(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(je(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ir}var YE={JSACTION:"jsaction"},JE={JSACTION:"__jsaction",OWNER:"__owner"},gx={};function L4(n){return n[JE.JSACTION]}function hx(n,e){n[JE.JSACTION]=e}function F4(n){return gx[n]}function V4(n,e){gx[n]=e}var pe={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},U4=[pe.MOUSEENTER,pe.MOUSELEAVE,"pointerenter","pointerleave"],Xue=[pe.CLICK,pe.DBLCLICK,pe.FOCUSIN,pe.FOCUSOUT,pe.KEYDOWN,pe.KEYUP,pe.KEYPRESS,pe.MOUSEOVER,pe.MOUSEOUT,pe.SUBMIT,pe.TOUCHSTART,pe.TOUCHEND,pe.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],B4=[pe.FOCUS,pe.BLUR,pe.ERROR,pe.LOAD,pe.TOGGLE],ZE=n=>B4.indexOf(n)>=0;function j4(n){return n===pe.MOUSEENTER?pe.MOUSEOVER:n===pe.MOUSELEAVE?pe.MOUSEOUT:n===pe.POINTERENTER?pe.POINTEROVER:n===pe.POINTERLEAVE?pe.POINTEROUT:n}function z4(n,e,t,r){let i=!1;ZE(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function $4(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function q4(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var fx=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function H4(n){return n.which===2||n.which==null&&n.button===4}function G4(n){return fx&&n.metaKey||!fx&&n.ctrlKey||H4(n)||n.shiftKey}function W4(n,e,t){let r=n.relatedTarget;return(n.type===pe.MOUSEOVER&&e===pe.MOUSEENTER||n.type===pe.MOUSEOUT&&e===pe.MOUSELEAVE||n.type===pe.POINTEROVER&&e===pe.POINTERENTER||n.type===pe.POINTEROUT&&e===pe.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function K4(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===pe.MOUSEOVER?t.type=pe.MOUSEENTER:n.type===pe.MOUSEOUT?t.type=pe.MOUSELEAVE:n.type===pe.POINTEROVER?t.type=pe.POINTERENTER:t.type=pe.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Q4=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Jg=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Q4&&(this.element.style.cursor="pointer"),this.handlerInfos.push(z4(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)$4(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Y4={EVENT_ACTION_SEPARATOR:":"};function ms(n){return n.eventType}function XE(n,e){n.eventType=e}function Qg(n){return n.event}function mx(n,e){n.event=e}function yx(n){return n.targetElement}function _x(n,e){n.targetElement=e}function vx(n){return n.eic}function J4(n,e){n.eic=e}function Z4(n){return n.timeStamp}function X4(n,e){n.timeStamp=e}function Yg(n){return n.eia}function wx(n,e,t){n.eia=[e,t]}function GE(n){n.eia=void 0}function Kg(n){return n[1]}function e3(n){return n.eirp}function Ex(n,e){n.eirp=e}function Ix(n){return n.eir}function bx(n,e){n.eir=e}function Tx(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function t3(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var WE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return ms(this.eventInfo)}setEventType(e){XE(this.eventInfo,e)}getEvent(){return Qg(this.eventInfo)}setEvent(e){mx(this.eventInfo,e)}getTargetElement(){return yx(this.eventInfo)}setTargetElement(e){_x(this.eventInfo,e)}getContainer(){return vx(this.eventInfo)}setContainer(e){J4(this.eventInfo,e)}getTimestamp(){return Z4(this.eventInfo)}setTimestamp(e){X4(this.eventInfo,e)}getAction(){let e=Yg(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){GE(this.eventInfo);return}wx(this.eventInfo,e.name,e.element)}getIsReplay(){return e3(this.eventInfo)}setIsReplay(e){Ex(this.eventInfo,e)}getResolved(){return Ix(this.eventInfo)}setResolved(e){bx(this.eventInfo,e)}clone(){return new n(Tx(this.eventInfo))}},n3={},r3=/\s*;\s*/,i3=pe.CLICK,KE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&ms(e)===pe.CLICK&&G4(Qg(e))?XE(e,pe.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Ix(e)||(this.populateAction(e,yx(e)),bx(e,!0))}resolveParentAction(e){let t=Yg(e),r=t&&Kg(t);GE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==vx(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Yg(e));)r=this.getParentNode(r);let i=Yg(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(ms(e)===pe.MOUSEENTER||ms(e)===pe.MOUSELEAVE||ms(e)===pe.POINTERENTER||ms(e)===pe.POINTERLEAVE)))if(W4(Qg(e),ms(e),Kg(i))){let o=K4(Qg(e),Kg(i));mx(e,o),_x(e,Kg(i))}else GE(e)}getParentNode(e){let t=e[JE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[ms(t)];i!==void 0&&wx(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=L4(e);if(!t){let r=e.getAttribute(YE.JSACTION);if(!r)t=n3,hx(e,t);else{if(t=F4(r),!t){t={};let i=r.split(r3);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(Y4.EVENT_ACTION_SEPARATOR),c=a!==-1,d=c?s.substr(0,a).trim():i3,h=c?s.substr(a+1).trim():s;t[d]=h}V4(r,t)}hx(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},Cx=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(Cx||{}),QE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new WE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&o3(r.element,t)&&q4(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function o3(n,e){return n.tagName==="A"&&(e.getEventType()===pe.CLICK||e.getEventType()===pe.CLICKMOD)}var Sx=Symbol.for("propagationStopped"),e0={REPLAY:101};var s3="`preventDefault` called during event replay.";var a3="`composedPath` called during event replay.",Zg=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new KE({clickModSupport:t}),this.dispatcher=new QE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&u3(e),c3(e);e.getAction();){if(d3(e),ZE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),l3(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function c3(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[Sx]=!0,t()};ka(e,"stopPropagation",r),ka(e,"stopImmediatePropagation",r)}function l3(n){return!!n.getEvent()[Sx]}function u3(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);ka(e,"target",t),ka(e,"eventPhase",e0.REPLAY),ka(e,"preventDefault",()=>{throw r(),new Error(s3+"")}),ka(e,"composedPath",()=>{throw new Error(a3+"")})}function d3(n){let e=n.getEvent(),t=n.getAction()?.element;t&&ka(e,"currentTarget",t,{configurable:!0})}function ka(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function Dx(n,e){n.ecrd(t=>{e.dispatch(t)},Cx.I_AM_THE_JSACTION_FRAMEWORK)}function h3(n){return n?.q??[]}function f3(n){n&&(px(n.c,n.et,n.h),px(n.c,n.etc,n.h,!0))}function px(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var p3=!1,Ax=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=p3;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=t3(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){Ex(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&U4.indexOf(t)>=0)return;let o=(a,c,d)=>{this.handleEvent(a,c,d)};this.eventHandlers[t]=o;let s=j4(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),f3(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=Tx(i);XE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function Rx(n,e=window){return h3(e._ejsas?.[n])}function t0(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var DP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(zm(e,t)),this.code=e}};function g3(n){return`NG0${Math.abs(n)}`}function zm(n,e){return`${g3(n)}${e?": "+e:""}`}var AP=Symbol("InputSignalNode#UNSET"),m3=ae(z({},vg),{transformFn:void 0,applyValueToInputSignal(n,e){ah(n,e)}});function RP(n,e){let t=Object.create(m3);t.value=n,t.transformFn=e?.transform;function r(){if(sh(t),t.value===AP){let i=null;throw new re(-950,i)}return t.value}return r[_r]=t,r}function Ih(n){return{toString:n}.toString()}var Xg="__parameters__";function y3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function MP(n,e,t){return Ih(()=>{let r=y3(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,d,h){let g=c.hasOwnProperty(Xg)?c[Xg]:Object.defineProperty(c,Xg,{value:[]})[Xg];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var dm=globalThis;function pt(n){for(let e in n)if(n[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function _3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function v0(n,e){return n?e?`${n} ${e}`:n:e||""}var v3=pt({__forward_ref__:pt});function Ii(n){return n.__forward_ref__=Ii,n.toString=function(){return Hn(this())},n}function xn(n){return xP(n)?n():n}function xP(n){return typeof n=="function"&&n.hasOwnProperty(v3)&&n.__forward_ref__===Ii}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $r(n){return{providers:n.providers||[],imports:n.imports||[]}}function $m(n){return Mx(n,kP)||Mx(n,NP)}function PP(n){return $m(n)!==null}function Mx(n,e){return n.hasOwnProperty(e)?n[e]:null}function w3(n){let e=n&&(n[kP]||n[NP]);return e||null}function xx(n){return n&&(n.hasOwnProperty(Px)||n.hasOwnProperty(E3))?n[Px]:null}var kP=pt({\u0275prov:pt}),Px=pt({\u0275inj:pt}),NP=pt({ngInjectableDef:pt}),E3=pt({ngInjectorDef:pt}),Y=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function OP(n){return n&&!!n.\u0275providers}var I3=pt({\u0275cmp:pt}),b3=pt({\u0275dir:pt}),T3=pt({\u0275pipe:pt}),C3=pt({\u0275mod:pt}),hm=pt({\u0275fac:pt}),gh=pt({__NG_ELEMENT_ID__:pt}),kx=pt({__NG_ENV_ID__:pt});function Nl(n){return typeof n=="string"?n:n==null?"":String(n)}function S3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nl(n)}function LP(n,e){throw new re(-200,n)}function lI(n,e){throw new re(-201,!1)}var Oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Oe||{}),w0;function FP(){return w0}function $n(n){let e=w0;return w0=n,e}function VP(n,e,t){let r=$m(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Oe.Optional)return null;if(e!==void 0)return e;lI(n,"Injector")}var D3={},Na=D3,E0="__NG_DI_FLAG__",fm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?wg:Na,r)}},pm="ngTempTokenPath",A3="ngTokenPath",R3=/\n/gm,M3="\u0275",Nx="__source";function x3(n,e=Oe.Default){if(ch()===void 0)throw new re(-203,!1);if(ch()===null)return VP(n,void 0,e);{let t=ch(),r;return t instanceof fm?r=t.injector:r=t,r.get(n,e&Oe.Optional?null:void 0,e)}}function de(n,e=Oe.Default){return(FP()||x3)(xn(n),e)}function j(n,e=Oe.Default){return de(n,qm(e))}function qm(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function I0(n){let e=[];for(let t=0;t<n.length;t++){let r=xn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=Oe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=P3(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function UP(n,e){return n[E0]=e,n.prototype[E0]=e,n}function P3(n){return n[E0]}function k3(n,e,t,r){let i=n[pm];throw e[Nx]&&i.unshift(e[Nx]),n.message=N3(`
`+n.message,i,t,r),n[A3]=i,n[pm]=null,n}function N3(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==M3?n.slice(2):n;let i=Hn(e);if(Array.isArray(e))i=e.map(Hn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Hn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(R3,`
  `)}`}var en=UP(MP("Optional"),8);var O3=UP(MP("SkipSelf"),4);function La(n,e){let t=n.hasOwnProperty(hm);return t?n[hm]:null}function uI(n,e){n.forEach(t=>Array.isArray(t)?uI(t,e):e(t))}function BP(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function L3(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function F3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function dI(n,e,t){let r=bh(n,e);return r>=0?n[r|1]=t:(r=~r,F3(n,r,e,t)),r}function n0(n,e){let t=bh(n,e);if(t>=0)return n[t|1]}function bh(n,e){return V3(n,e,1)}function V3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Fa={},qn=[],_s=new Y(""),jP=new Y("",-1),zP=new Y(""),mm=class{get(e,t=Na){if(t===Na){let r=new Error(`NullInjectorError: No provider for ${Hn(e)}!`);throw r.name="NullInjectorError",r}return t}};function $P(n,e){let t=n[C3]||null;if(!t&&e===!0)throw new Error(`Type ${Hn(n)} does not have '\u0275mod' property.`);return t}function vs(n){return n[I3]||null}function qP(n){return n[b3]||null}function HP(n){return n[T3]||null}function wn(n){return{\u0275providers:n}}function U3(...n){return{\u0275providers:hI(!0,n),\u0275fromNgModule:!0}}function hI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return uI(e,s=>{let a=s;b0(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GP(i,o),t}function GP(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];fI(i,o=>{e(o,r)})}}function b0(n,e,t,r){if(n=xn(n),!n)return!1;let i=null,o=xx(n),s=!o&&vs(n);if(!o&&!s){let c=n.ngModule;if(o=xx(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)b0(d,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{uI(o.imports,h=>{b0(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&GP(d,e)}if(!a){let d=La(i)||(()=>new i);e({provide:i,useFactory:d,deps:qn},i),e({provide:zP,useValue:i,multi:!0},i),e({provide:_s,useValue:()=>de(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=n;fI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function fI(n,e){for(let t of n)OP(t)&&(t=t.\u0275providers),Array.isArray(t)?fI(t,e):e(t)}var B3=pt({provide:String,useValue:pt});function WP(n){return n!==null&&typeof n=="object"&&B3 in n}function j3(n){return!!(n&&n.useExisting)}function z3(n){return!!(n&&n.useFactory)}function Ol(n){return typeof n=="function"}function $3(n){return!!n.useClass}var Hm=new Y(""),im={},Ox={},r0;function pI(){return r0===void 0&&(r0=new mm),r0}var Pn=class{},mh=class extends Pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,C0(e,s=>this.processProvider(s)),this.records.set(jP,Cl(void 0,this)),i.has("environment")&&this.records.set(Pn,Cl(void 0,this));let o=this.records.get(Hm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zP,qn,Oe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?wg:Na,r)}destroy(){fh(this),this._destroyed=!0;let e=Be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(e)}}onDestroy(e){return fh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fh(this);let t=no(this),r=$n(void 0),i;try{return e()}finally{no(t),$n(r)}}get(e,t=Na,r=Oe.Default){if(fh(this),e.hasOwnProperty(kx))return e[kx](this);r=qm(r);let i,o=no(this),s=$n(void 0);try{if(!(r&Oe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=K3(e)&&$m(e);d&&this.injectableDefInScope(d)?c=Cl(T0(e),im):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Oe.Self?pI():this.parent;return t=r&Oe.Optional&&t===Na?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[pm]=a[pm]||[]).unshift(Hn(e)),o)throw a;return k3(a,e,"R3InjectorError",this.source)}else throw a}finally{$n(s),no(o)}}resolveInjectorInitializers(){let e=Be(null),t=no(this),r=$n(void 0),i;try{let o=this.get(_s,qn,Oe.Self);for(let s of o)s()}finally{no(t),$n(r),Be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Hn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xn(e);let t=Ol(e)?e:xn(e&&e.provide),r=H3(e);if(!Ol(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Cl(void 0,im,!0),i.factory=()=>I0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Be(null);try{return t.value===Ox?LP(Hn(e)):t.value===im&&(t.value=Ox,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&W3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function T0(n){let e=$m(n),t=e!==null?e.factory:La(n);if(t!==null)return t;if(n instanceof Y)throw new re(204,!1);if(n instanceof Function)return q3(n);throw new re(204,!1)}function q3(n){if(n.length>0)throw new re(204,!1);let t=w3(n);return t!==null?()=>t.factory(n):()=>new n}function H3(n){if(WP(n))return Cl(void 0,n.useValue);{let e=KP(n);return Cl(e,im)}}function KP(n,e,t){let r;if(Ol(n)){let i=xn(n);return La(i)||T0(i)}else if(WP(n))r=()=>xn(n.useValue);else if(z3(n))r=()=>n.useFactory(...I0(n.deps||[]));else if(j3(n))r=(i,o)=>de(xn(n.useExisting),o!==void 0&&o&Oe.Optional?Oe.Optional:void 0);else{let i=xn(n&&(n.useClass||n.provide));if(G3(n))r=()=>new i(...I0(n.deps));else return La(i)||T0(i)}return r}function fh(n){if(n.destroyed)throw new re(205,!1)}function Cl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function G3(n){return!!n.deps}function W3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function K3(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function C0(n,e){for(let t of n)Array.isArray(t)?C0(t,e):t&&OP(t)?C0(t.\u0275providers,e):e(t)}function cr(n,e){let t;n instanceof mh?(fh(n),t=n):t=new fm(n);let r,i=no(t),o=$n(void 0);try{return e()}finally{no(i),$n(o)}}function QP(){return FP()!==void 0||ch()!=null}function YP(n){if(!QP())throw new re(-203,!1)}function Q3(n){return typeof n=="function"}var ar=0,Te=1,Me=2,an=3,Ur=4,Qn=5,jr=6,ym=7,Gn=8,yi=9,ao=10,ut=11,yh=12,Lx=13,zl=14,Wn=15,Ll=16,Sl=17,Fl=18,Gm=19,JP=20,ys=21,i0=22,_m=23,vr=24,Ml=25,Dt=26,ZP=1,co=6,lo=7,vm=8,wm=9,sr=10;function Br(n){return Array.isArray(n)&&typeof n[ZP]=="object"}function bi(n){return Array.isArray(n)&&n[ZP]===!0}function XP(n){return(n.flags&4)!==0}function $a(n){return n.componentOffset>-1}function gI(n){return(n.flags&1)===1}function _i(n){return!!n.template}function _h(n){return(n[Me]&512)!==0}function qa(n){return(n[Me]&256)===256}var S0=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function e1(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lr=(()=>{let n=()=>t1;return n.ngInherit=!0,n})();function t1(n){return n.type.prototype.ngOnChanges&&(n.setInput=J3),Y3}function Y3(){let n=r1(this),e=n?.current;if(e){let t=n.previous;if(t===Fa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function J3(n,e,t,r,i){let o=this.declaredInputs[r],s=r1(n)||Z3(n,{previous:Fa,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new S0(d&&d.currentValue,t,c===Fa),e1(n,e,i,t)}var n1="__ngSimpleChanges__";function r1(n){return n[n1]||null}function Z3(n,e){return n[n1]=e}var Fx=null;var it=function(n,e=null,t){Fx?.(n,e,t)},X3="svg",e5="math";function zr(n){for(;Array.isArray(n);)n=n[ar];return n}function i1(n,e){return zr(e[n])}function qr(n,e){return zr(e[n.index])}function Wm(n,e){return n.data[e]}function o1(n,e){return n[e]}function t5(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vi(n,e){let t=e[n];return Br(t)?t:t[ar]}function mI(n){return(n[Me]&128)===128}function n5(n){return bi(n[an])}function Em(n,e){return e==null?null:n[e]}function s1(n){n[Sl]=0}function a1(n){n[Me]&1024||(n[Me]|=1024,mI(n)&&Th(n))}function r5(n,e){for(;n>0;)e=e[zl],n--;return e}function Km(n){return!!(n[Me]&9216||n[vr]?.dirty)}function D0(n){n[ao].changeDetectionScheduler?.notify(8),n[Me]&64&&(n[Me]|=1024),Km(n)&&Th(n)}function Th(n){n[ao].changeDetectionScheduler?.notify(0);let e=Va(n);for(;e!==null&&!(e[Me]&8192||(e[Me]|=8192,!mI(e)));)e=Va(e)}function c1(n,e){if(qa(n))throw new re(911,!1);n[ys]===null&&(n[ys]=[]),n[ys].push(e)}function i5(n,e){if(n[ys]===null)return;let t=n[ys].indexOf(e);t!==-1&&n[ys].splice(t,1)}function Va(n){let e=n[an];return bi(e)?e[an]:e}function l1(n){return n[ym]??=[]}function u1(n){return n.cleanup??=[]}var Ve={lFrame:v1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var A0=!1;function o5(){return Ve.lFrame.elementDepthCount}function s5(){Ve.lFrame.elementDepthCount++}function a5(){Ve.lFrame.elementDepthCount--}function d1(){return Ve.bindingsEnabled}function $l(){return Ve.skipHydrationRootTNode!==null}function c5(n){return Ve.skipHydrationRootTNode===n}function l5(n){Ve.skipHydrationRootTNode=n}function u5(){Ve.skipHydrationRootTNode=null}function Xe(){return Ve.lFrame.lView}function fn(){return Ve.lFrame.tView}function ce(n){return Ve.lFrame.contextLView=n,n[Gn]}function le(n){return Ve.lFrame.contextLView=null,n}function Yn(){let n=h1();for(;n!==null&&n.type===64;)n=n.parent;return n}function h1(){return Ve.lFrame.currentTNode}function d5(){let n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ch(n,e){let t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function f1(){return Ve.lFrame.isParent}function p1(){Ve.lFrame.isParent=!1}function h5(){return Ve.lFrame.contextLView}function g1(){return A0}function Vx(n){let e=A0;return A0=n,e}function f5(){let n=Ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function p5(){return Ve.lFrame.bindingIndex}function g5(n){return Ve.lFrame.bindingIndex=n}function Qm(){return Ve.lFrame.bindingIndex++}function yI(n){let e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function m5(){return Ve.lFrame.inI18n}function y5(n,e){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,R0(e)}function _5(){return Ve.lFrame.currentDirectiveIndex}function R0(n){Ve.lFrame.currentDirectiveIndex=n}function v5(n){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function m1(n){Ve.lFrame.currentQueryIndex=n}function w5(n){let e=n[Te];return e.type===2?e.declTNode:e.type===1?n[Qn]:null}function y1(n,e,t){if(t&Oe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Oe.Host);)if(i=w5(o),i===null||(o=o[zl],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ve.lFrame=_1();return r.currentTNode=e,r.lView=n,!0}function _I(n){let e=_1(),t=n[Te];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _1(){let n=Ve.lFrame,e=n===null?null:n.child;return e===null?v1(n):e}function v1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function w1(){let n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var E1=w1;function vI(){let n=w1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function E5(n){return(Ve.lFrame.contextLView=r5(n,Ve.lFrame.contextLView))[Gn]}function Es(){return Ve.lFrame.selectedIndex}function Ua(n){Ve.lFrame.selectedIndex=n}function Ym(){let n=Ve.lFrame;return Wm(n.tView,n.selectedIndex)}function I1(){return Ve.lFrame.currentNamespace}var b1=!0;function wI(){return b1}function Is(n){b1=n}function I5(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=t1(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function T1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function om(n,e,t){C1(n,e,3,t)}function sm(n,e,t,r){(n[Me]&3)===t&&C1(n,e,t,r)}function o0(n,e){let t=n[Me];(t&3)===e&&(t&=16383,t+=1,n[Me]=t)}function C1(n,e,t,r){let i=r!==void 0?n[Sl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Sl]+=65536),(a<o||o==-1)&&(b5(n,t,e,c),n[Sl]=(n[Sl]&4294901760)+c+2),c++}function Ux(n,e){it(4,n,e);let t=Be(null);try{e.call(n)}finally{Be(t),it(5,n,e)}}function b5(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Me]>>14<n[Sl]>>16&&(n[Me]&3)===e&&(n[Me]+=16384,Ux(a,o)):Ux(a,o)}var xl=-1,Ba=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function T5(n){return(n.flags&8)!==0}function C5(n){return(n.flags&16)!==0}function S5(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];D5(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function S1(n){return n===3||n===4||n===6}function D5(n){return n.charCodeAt(0)===64}function vh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Bx(n,t,i,null,e[++r]):Bx(n,t,i,null,null))}}return n}function Bx(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function D1(n){return n!==xl}function Im(n){return n&32767}function A5(n){return n>>16}function bm(n,e){let t=A5(n),r=e;for(;t>0;)r=r[zl],t--;return r}var M0=!0;function Tm(n){let e=M0;return M0=n,e}var R5=256,A1=R5-1,R1=5,M5=0,mi={};function x5(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(gh)&&(r=t[gh]),r==null&&(r=t[gh]=M5++);let i=r&A1,o=1<<i;e.data[n+(i>>R1)]|=o}function Cm(n,e){let t=M1(n,e);if(t!==-1)return t;let r=e[Te];r.firstCreatePass&&(n.injectorIndex=e.length,s0(r.data,n),s0(e,null),s0(r.blueprint,null));let i=EI(n,e),o=n.injectorIndex;if(D1(i)){let s=Im(i),a=bm(i,e),c=a[Te].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=i,o}function s0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function M1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function EI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=O1(i),r===null)return xl;if(t++,i=i[zl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xl}function x0(n,e,t){x5(n,e,t)}function P5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(S1(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function x1(n,e,t){if(t&Oe.Optional||n!==void 0)return n;lI(e,"NodeInjector")}function P1(n,e,t,r){if(t&Oe.Optional&&r===void 0&&(r=null),(t&(Oe.Self|Oe.Host))===0){let i=n[yi],o=$n(void 0);try{return i?i.get(e,r,t&Oe.Optional):VP(e,r,t&Oe.Optional)}finally{$n(o)}}return x1(r,e,t)}function k1(n,e,t,r=Oe.Default,i){if(n!==null){if(e[Me]&2048&&!(r&Oe.Self)){let s=F5(n,e,t,r,mi);if(s!==mi)return s}let o=N1(n,e,t,r,mi);if(o!==mi)return o}return P1(e,t,r,i)}function N1(n,e,t,r,i){let o=O5(t);if(typeof o=="function"){if(!y1(e,n,r))return r&Oe.Host?x1(i,t,r):P1(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Oe.Optional))lI(t);else return s}finally{E1()}}else if(typeof o=="number"){let s=null,a=M1(n,e),c=xl,d=r&Oe.Host?e[Wn][Qn]:null;for((a===-1||r&Oe.SkipSelf)&&(c=a===-1?EI(n,e):e[a+8],c===xl||!zx(r,!1)?a=-1:(s=e[Te],a=Im(c),e=bm(c,e)));a!==-1;){let h=e[Te];if(jx(o,a,h.data)){let g=k5(a,e,t,s,r,d);if(g!==mi)return g}c=e[a+8],c!==xl&&zx(r,e[Te].data[a+8]===d)&&jx(o,a,e)?(s=h,a=Im(c),e=bm(c,e)):a=-1}}return i}function k5(n,e,t,r,i,o){let s=e[Te],a=s.data[n+8],c=r==null?$a(a)&&M0:r!=s&&(a.type&3)!==0,d=i&Oe.Host&&o===a,h=N5(a,s,t,c,d);return h!==null?Sm(e,s,h,a,i):mi}function N5(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?a:a+h,T=i?a+h:d;for(let C=g;C<T;C++){let k=s[C];if(C<c&&t===k||C>=c&&k.type===t)return C}if(i){let C=s[c];if(C&&_i(C)&&C.type===t)return c}return null}function Sm(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ba){let a=o;a.resolving&&LP(S3(s[t]));let c=Tm(a.canSeeViewProviders);a.resolving=!0;let d,h=a.injectImpl?$n(a.injectImpl):null,g=y1(n,r,Oe.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&I5(t,s[t],e)}finally{h!==null&&$n(h),Tm(c),a.resolving=!1,E1()}}return o}function O5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gh)?n[gh]:void 0;return typeof e=="number"?e>=0?e&A1:L5:e}function jx(n,e,t){let r=1<<n;return!!(t[e+(n>>R1)]&r)}function zx(n,e){return!(n&Oe.Self)&&!(n&Oe.Host&&e)}var Oa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return k1(this._tNode,this._lView,e,qm(r),t)}};function L5(){return new Oa(Yn(),Xe())}function fo(n){return Ih(()=>{let e=n.prototype.constructor,t=e[hm]||P0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[hm]||P0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function P0(n){return xP(n)?()=>{let e=P0(xn(n));return e&&e()}:La(n)}function F5(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Me]&2048&&!_h(s);){let a=N1(o,s,t,r|Oe.Self,mi);if(a!==mi)return a;let c=o.parent;if(!c){let d=s[JP];if(d){let h=d.get(t,mi,r);if(h!==mi)return h}c=O1(s),s=s[zl]}o=c}return i}function O1(n){let e=n[Te],t=e.type;return t===2?e.declTNode:t===1?n[Qn]:null}function II(n){return P5(Yn(),n)}function $x(n,e=null,t=null,r){let i=L1(n,e,t,r);return i.resolveInjectorInitializers(),i}function L1(n,e=null,t=null,r,i=new Set){let o=[t||qn,U3(n)];return r=r||(typeof n=="object"?void 0:Hn(n)),new mh(o,e||pI(),r||null,i)}var At=class n{static THROW_IF_NOT_FOUND=Na;static NULL=new mm;static create(e,t){if(Array.isArray(e))return $x({name:""},t,e,"");{let r=e.name??"";return $x({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>de(jP)});static __NG_ELEMENT_ID__=-1};var V5=new Y("");V5.__NG_ELEMENT_ID__=n=>{let e=Yn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&Oe.Optional)return null;throw new re(204,!1)};var F1=!1,ql=(()=>{class n{static __NG_ELEMENT_ID__=U5;static __NG_ENV_ID__=t=>t}return n})(),k0=class extends ql{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return qa(t)?(e(),()=>{}):(c1(t,e),()=>i5(t,e))}};function U5(){return new k0(Xe())}var ja=class{},Jm=new Y("",{providedIn:"root",factory:()=>!1});var V1=new Y(""),U1=new Y(""),po=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ot(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),B5=(()=>{class n{internalPendingTasks=j(po);scheduler=j(ja);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return S(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),N0=class extends St{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,QP()&&(this.destroyRef=j(ql,{optional:!0})??void 0,this.pendingTasks=j(po,{optional:!0})??void 0)}emit(e){let t=Be(null);try{super.next(e)}finally{Be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Nt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},gt=N0;function Dm(...n){}function B1(n){let e,t;function r(){n=Dm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qx(n){return queueMicrotask(()=>n()),()=>{n=Dm}}var bI="isAngularZone",Am=bI+"_ID",j5=0,Fe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new gt(!1);onMicrotaskEmpty=new gt(!1);onStable=new gt(!1);onError=new gt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=F1}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,q5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,z5,Dm,Dm);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},z5={};function TI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){B1(()=>{n.callbackScheduled=!1,O0(n),n.isCheckStableRunning=!0,TI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),O0(n)}function q5(n){let e=()=>{$5(n)},t=j5++;n._inner=n._inner.fork({name:"angular",properties:{[bI]:!0,[Am]:t,[Am+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(H5(c))return r.invokeTask(o,s,a,c);try{return Hx(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Gx(n)}},onInvoke:(r,i,o,s,a,c,d)=>{try{return Hx(n),r.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!G5(c)&&e(),Gx(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,O0(n),TI(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function O0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Hx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Gx(n){n._nesting--,TI(n)}var L0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new gt;onMicrotaskEmpty=new gt;onStable=new gt;onError=new gt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function H5(n){return j1(n,"__ignore_ng_zone__")}function G5(n){return j1(n,"__scheduler_tick__")}function j1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var wi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},W5=new Y("",{providedIn:"root",factory:()=>{let n=j(Fe),e=j(wi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Wx(n,e){return RP(n,e)}function K5(n){return RP(AP,n)}var z1=(Wx.required=K5,Wx);function Q5(){return Zm(Yn(),Xe())}function Zm(n,e){return new ur(qr(n,e))}var ur=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Q5}return n})();function Y5(n){return typeof n=="function"&&n[_r]!==void 0}function Hl(n,e){let t=xE(n,e?.equal),r=t[_r];return t.set=i=>ah(r,i),t.update=i=>PE(r,i),t.asReadonly=J5.bind(t),t}function J5(){let n=this[_r];if(n.readonlyFn===void 0){let e=()=>this();e[_r]=n,n.readonlyFn=e}return n.readonlyFn}function $1(n){return Y5(n)&&typeof n.set=="function"}var Z5="ngSkipHydration",X5="ngskiphydration";function q1(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===X5)return!0}return!1}function H1(n){return n.hasAttribute(Z5)}function Rm(n){return(n.flags&128)===128}function e6(n){if(Rm(n))return!0;let e=n.parent;for(;e;){if(Rm(n)||q1(e))return!0;e=e.parent}return!1}var G1=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(G1||{}),W1=new Map,t6=0;function n6(){return t6++}function r6(n){W1.set(n[Gm],n)}function F0(n){W1.delete(n[Gm])}var Kx="__ngContext__";function Sh(n,e){Br(e)?(n[Kx]=e[Gm],r6(e)):n[Kx]=e}function K1(n){return Y1(n[yh])}function Q1(n){return Y1(n[Ur])}function Y1(n){for(;n!==null&&!bi(n);)n=n[Ur];return n}var V0;function J1(n){V0=n}function Xm(){if(V0!==void 0)return V0;if(typeof document<"u")return document;throw new re(210,!1)}var so=new Y("",{providedIn:"root",factory:()=>i6}),i6="ng",CI=new Y(""),Ti=new Y("",{providedIn:"platform",factory:()=>"unknown"});var SI=new Y("",{providedIn:"root",factory:()=>Xm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function o6(){let n=new Gl;return n.store=s6(Xm(),j(so)),n}var Gl=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:o6});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function s6(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Z1="h",X1="b",a6="f",c6="n",l6="e",u6="t",DI="c",ek="x",Mm="r",d6="i",h6="n",tk="d";var f6="di",p6="s",g6="p";var em=new Y(""),nk=!1,rk=new Y("",{providedIn:"root",factory:()=>nk});var ik=new Y(""),m6=!1,y6=new Y(""),Qx=new Y("",{providedIn:"root",factory:()=>new Map}),AI=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(AI||{}),Wl=new Y(""),Yx=new Set;function Ci(n){Yx.has(n)||(Yx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ok=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=_6}return n})();function _6(){return new ok(Xe(),Yn())}var Dl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Dl||{}),sk=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),v6=[Dl.EarlyRead,Dl.Write,Dl.MixedReadWrite,Dl.Read],w6=(()=>{class n{ngZone=j(Fe);scheduler=j(ja);errorHandler=j(wi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Wl,{optional:!0})}execute(){let t=this.sequences.size>0;t&&it(16),this.executing=!0;for(let r of v6)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&it(17)}register(t){let{view:r}=t;r!==void 0?((r[Ml]??=[]).push(t),Th(r),r[Me]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(AI.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),U0=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ml];e&&(this.view[Ml]=e.filter(t=>t!==this))}};function ey(n,e){!e?.injector&&YP(ey);let t=e?.injector??j(At);return Ci("NgAfterNextRender"),I6(n,t,e,!0)}function E6(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function I6(n,e,t,r){let i=e.get(sk);i.impl??=e.get(w6);let o=e.get(Wl,null,{optional:!0}),s=t?.phase??Dl.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ql):null,c=e.get(ok,null,{optional:!0}),d=new U0(i.impl,E6(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(d),d}var or=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(or||{}),Jx=0,b6=1,Xt=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(Xt||{});var T6=0,ty=1;var C6=4,S6=5;var D6=7,Pl=8,A6=9,ak=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(ak||{});function am(n,e){let t=M6(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function R6(n){am(1,n),am(0,n),am(2,n)}function M6(n){let e=C6;return n===1?e=S6:n===2&&(e=A6),e}function ck(n){return n+1}function Dh(n,e){let t=n[Te],r=ck(e.index);return n[r]}function ny(n,e){let t=ck(e.index);return n.data[t]}function x6(n,e,t){let r=e[Te],i=ny(r,t);switch(n){case Xt.Complete:return i.primaryTmplIndex;case Xt.Loading:return i.loadingTmplIndex;case Xt.Error:return i.errorTmplIndex;case Xt.Placeholder:return i.placeholderTmplIndex;default:return null}}function Zx(n,e){return e===Xt.Placeholder?n.placeholderBlockConfig?.[Jx]??null:e===Xt.Loading?n.loadingBlockConfig?.[Jx]??null:null}function P6(n){return n.loadingBlockConfig?.[b6]??null}function Xx(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function k6(n,e){let t=e.primaryTmplIndex+Dt;return Wm(n,t)}var ry="ngb";var N6=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},O6=(n,e)=>{let t=n,r=t.getAttribute(ry)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var L6=n=>{n.removeAttribute(YE.JSACTION),n.removeAttribute(ry),n.__jsaction_fns=void 0},F6=new Y("",{providedIn:"root",factory:()=>({})});function lk(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var B0=new Map;function V6(n,e){return B0.set(n,e),()=>B0.delete(n)}var eP=!1,uk=(n,e,t,r)=>{};function U6(n,e,t,r){uk(n,e,t,r)}function B6(){eP||(uk=(n,e,t,r)=>{let i=n[yi].get(so);B0.get(i)?.(e,t,r)},eP=!0)}var RI=new Y("");var j6="__nghData__",dk=j6,z6="__nghDeferData__",$6=z6,a0="ngh",q6="nghm",hk=()=>null;function H6(n,e,t=!1){let r=n.getAttribute(a0);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Gl,null,{optional:!0});h!==null&&(c=h.get(dk,[])[Number(r)])}let d={data:c,firstChild:n.firstChild??null};return t&&(d.firstChild=n,iy(d,0,n.nextSibling)),a?n.setAttribute(a0,a):n.removeAttribute(a0),d}function G6(){hk=H6}function fk(n,e,t=!1){return hk(n,e,t)}function W6(n){let e=n._lView;return e[Te].type===2?null:(_h(e)&&(e=e[Dt]),e)}function K6(n){return n.textContent?.replace(/\s/gm,"")}function Q6(n){let e=Xm(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=K6(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function iy(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function j0(n,e){return n.segmentHeads?.[e]??null}function Y6(n){return n.get(y6,!1,{optional:!0})}function J6(n,e){let t=n.data,r=t[l6]?.[e]??null;return r===null&&t[DI]?.[e]&&(r=MI(n,e)),r}function pk(n,e){return n.data[DI]?.[e]??null}function MI(n,e){let t=pk(n,e)??[],r=0;for(let i of t)r+=i[Mm]*(i[ek]??1);return r}function Z6(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[tk];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ah(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[tk];n.disconnectedNodes=t?new Set(t):null}return!!Z6(n)?.has(e)}function X6(n,e){let t=e.get(RI),i=e.get(Gl).get($6,{}),o=!1,s=n,a=null,c=[];for(;!o&&s;){o=t.has(s);let d=t.hydrating.get(s);if(a===null&&d!=null){a=d.promise;break}c.unshift(s),s=i[s][g6]}return{parentBlockPromise:a,hydrationQueue:c}}function c0(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===q6}function tP(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function e$(n){for(let r of n.body.childNodes)if(c0(r))return;let e=tP(n.body.previousSibling);if(c0(e))return;let t=tP(n.head.lastChild);if(!c0(t))throw new re(-507,!1)}function gk(n,e){let t=n.contentQueries;if(t!==null){let r=Be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];m1(o),a.contentQueries(2,e[s],s)}}}finally{Be(r)}}}function z0(n,e,t){m1(0);let r=Be(null);try{e(n,t)}finally{Be(r)}}function mk(n,e,t){if(XP(e)){let r=Be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Be(r)}}}var Ei=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ei||{});var tm;function t$(){if(tm===void 0&&(tm=null,dm.trustedTypes))try{tm=dm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return tm}function nP(n){return t$()?.createScriptURL(n)||n}var xm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DP})`}};function Kl(n){return n instanceof xm?n.changingThisBreaksApplicationSecurity:n}function xI(n,e){let t=n$(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${DP})`)}return t===e}function n$(n){return n instanceof xm&&n.getTypeName()||null}var r$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yk(n){return n=String(n),n.match(r$)?n:"unsafe:"+n}var oy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(oy||{});function bs(n){let e=vk();return e?e.sanitize(oy.URL,n)||"":xI(n,"URL")?Kl(n):yk(Nl(n))}function i$(n){let e=vk();if(e)return nP(e.sanitize(oy.RESOURCE_URL,n)||"");if(xI(n,"ResourceURL"))return nP(Kl(n));throw new re(904,!1)}function o$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?i$:bs}function _k(n,e,t){return o$(e,t)(n)}function vk(){let n=Xe();return n&&n[ao].sanitizer}var s$=/^>|^->|<!--|-->|--!>|<!-$/g,a$=/(<|>)/g,c$="\u200B$1\u200B";function l$(n){return n.replace(s$,e=>e.replace(a$,c$))}function u$(n){return n.ownerDocument.body}function wk(n){return n instanceof Function?n():n}function d$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Ek="ng-template";function h$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&d$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(PI(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function PI(n){return n.type===4&&n.value!==Ek}function f$(n,e,t){let r=n.type===4&&!t?Ek:n.value;return e===r}function p$(n,e,t){let r=4,i=n.attrs,o=i!==null?y$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Fr(r)&&!Fr(c))return!1;if(s&&Fr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!f$(n,c,t)||c===""&&e.length===1){if(Fr(r))return!1;s=!0}}else if(r&8){if(i===null||!h$(n,i,c,t)){if(Fr(r))return!1;s=!0}}else{let d=e[++a],h=g$(c,i,PI(n),t);if(h===-1){if(Fr(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Fr(r))return!1;s=!0}}}}return Fr(r)||s}function Fr(n){return(n&1)===0}function g$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _$(e,n)}function Ik(n,e,t=!1){for(let r=0;r<e.length;r++)if(p$(n,e[r],t))return!0;return!1}function m$(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function y$(n){for(let e=0;e<n.length;e++){let t=n[e];if(S1(t))return e}return n.length}function _$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function v$(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function rP(n,e){return n?":not("+e.trim()+")":e}function w$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Fr(s)&&(e+=rP(o,i),i=""),r=s,o=o||!Fr(r);t++}return i!==""&&(e+=rP(o,i)),e}function E$(n){return n.map(w$).join(",")}function I$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Fr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wr={};function bk(n,e){return n.createText(e)}function b$(n,e,t){n.setValue(e,t)}function Tk(n,e){return n.createComment(l$(e))}function kI(n,e,t){return n.createElement(e,t)}function Pm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Ck(n,e,t){n.appendChild(e,t)}function iP(n,e,t,r,i){r!==null?Pm(n,e,t,r,i):Ck(n,e,t)}function NI(n,e,t){n.removeChild(null,e,t)}function Sk(n){n.textContent=""}function T$(n,e,t){n.setAttribute(e,"style",t)}function C$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Dk(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&S5(n,e,r),i!==null&&C$(n,e,i),o!==null&&T$(n,e,o)}function OI(n,e,t,r,i,o,s,a,c,d,h){let g=Dt+r,T=g+i,C=S$(g,T),k=typeof d=="function"?d():d;return C[Te]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function S$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function D$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=OI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function LI(n,e,t,r,i,o,s,a,c,d,h){let g=e.blueprint.slice();return g[ar]=i,g[Me]=r|4|128|8|64|1024,(d!==null||n&&n[Me]&2048)&&(g[Me]|=2048),s1(g),g[an]=g[zl]=n,g[Gn]=t,g[ao]=s||n&&n[ao],g[ut]=a||n&&n[ut],g[yi]=c||n&&n[yi]||null,g[Qn]=o,g[Gm]=n6(),g[jr]=h,g[JP]=d,g[Wn]=e.type==2?n[Wn]:g,g}function A$(n,e,t){let r=qr(e,n),i=D$(t),o=n[ao].rendererFactory,s=FI(n,LI(n,i,null,Ak(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Ak(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Rk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function FI(n,e){return n[yh]?n[Lx][Ur]=e:n[yh]=e,n[Lx]=e,e}function V(n=1){Mk(fn(),Xe(),Es()+n,!1)}function Mk(n,e,t,r){if(!r)if((e[Me]&3)===3){let o=n.preOrderCheckHooks;o!==null&&om(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sm(e,o,0,t)}Ua(t)}var sy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(sy||{});function $0(n,e,t,r){let i=Be(null);try{let[o,s,a]=n.inputs[t],c=null;(s&sy.SignalBased)!==0&&(c=e[o][_r]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):e1(e,c,o,r)}finally{Be(i)}}function xk(n,e,t,r,i){let o=Es(),s=r&2;try{Ua(-1),s&&e.length>Dt&&Mk(n,e,Dt,!1),it(s?2:0,i),t(r,i)}finally{Ua(o),it(s?3:1,i)}}function VI(n,e,t){O$(n,e,t),(t.flags&64)===64&&L$(n,e,t)}function Pk(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function R$(n,e,t,r){let o=r.get(rk,nk)||t===Ei.ShadowDom,s=n.selectRootElement(e,o);return M$(s),s}function M$(n){kk(n)}var kk=()=>null;function x$(n){H1(n)?Sk(n):Q6(n)}function P$(){kk=x$}function k$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function UI(n,e,t,r,i,o,s,a){if(!a&&jI(e,n,t,r,i)){$a(e)&&N$(t,e.index);return}if(e.type&3){let c=qr(e,t);r=k$(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function N$(n,e){let t=vi(e,n);t[Me]&16||(t[Me]|=64)}function O$(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$a(t)&&A$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Cm(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Sm(e,n,s,t);if(Sh(c,e),o!==null&&B$(e,s-r,c,a,t,o),_i(a)){let d=vi(t.index,e);d[Gn]=Sm(e,n,s,t)}}}function L$(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=_5();try{Ua(o);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];R0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&F$(c,d)}}finally{Ua(-1),R0(s)}}function F$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Nk(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Ik(e,o.selectors,!1)&&(r??=[],_i(o)?r.unshift(o):r.push(o))}return r}function V$(n,e,t,r,i,o){let s=qr(n,e);U$(e[ut],s,o,n.value,t,r,i)}function U$(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Nl(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function B$(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],d=s[a+1];$0(r,t,c,d)}}function BI(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function jI(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],h=s[c+1],g=e.data[d];$0(g,t[d],h,i),a=!0}if(o)for(let c of o){let d=t[c],h=e.data[c];$0(h,d,r,i),a=!0}return a}function j$(n,e){let t=vi(e,n),r=t[Te];z$(r,t);let i=t[ar];i!==null&&t[jr]===null&&(t[jr]=fk(i,t[yi])),it(18),zI(r,t,t[Gn]),it(19,t[Gn])}function z$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function zI(n,e,t){_I(e);try{let r=n.viewQuery;r!==null&&z0(1,r,t);let i=n.template;i!==null&&xk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fl]?.finishViewCreation(n),n.staticContentQueries&&gk(n,e),n.staticViewQueries&&z0(2,n.viewQuery,t);let o=n.components;o!==null&&$$(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Me]&=-5,vI()}}function $$(n,e){for(let t=0;t<e.length;t++)j$(n,e[t])}function $I(n,e,t,r){let i=Be(null);try{let o=e.tView,a=n[Me]&4096?4096:16,c=LI(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Ll]=d;let h=n[Fl];return h!==null&&(c[Fl]=h.createEmbeddedView(o)),zI(o,c,t),c}finally{Be(i)}}function km(n,e){return!e||e.firstChild===null||Rm(n)}var q$;function qI(n,e){return q$(n,e)}var uo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(uo||{});function Ha(n){return(n.flags&32)===32}function Al(n,e,t,r,i){if(r!=null){let o,s=!1;bi(r)?o=r:Br(r)&&(s=!0,r=r[ar]);let a=zr(r);n===0&&t!==null?i==null?Ck(e,t,a):Pm(e,t,a,i||null,!0):n===1&&t!==null?Pm(e,t,a,i||null,!0):n===2?NI(e,a,s):n===3&&e.destroyNode(a),o!=null&&e9(e,n,o,t,i)}}function H$(n,e){Ok(n,e),e[ar]=null,e[Qn]=null}function G$(n,e,t,r,i,o){r[ar]=i,r[Qn]=e,ay(n,r,t,1,i,o)}function Ok(n,e){e[ao].changeDetectionScheduler?.notify(9),ay(n,e,e[ut],2,null,null)}function W$(n){let e=n[yh];if(!e)return l0(n[Te],n);for(;e;){let t=null;if(Br(e))t=e[yh];else{let r=e[sr];r&&(t=r)}if(!t){for(;e&&!e[Ur]&&e!==n;)Br(e)&&l0(e[Te],e),e=e[an];e===null&&(e=n),Br(e)&&l0(e[Te],e),t=e&&e[Ur]}e=t}}function HI(n,e){let t=n[wm],r=t.indexOf(e);t.splice(r,1)}function GI(n,e){if(qa(e))return;let t=e[ut];t.destroyNode&&ay(n,e,t,3,null,null),W$(e)}function l0(n,e){if(qa(e))return;let t=Be(null);try{e[Me]&=-129,e[Me]|=256,e[vr]&&AE(e[vr]),Q$(n,e),K$(n,e),e[Te].type===1&&e[ut].destroy();let r=e[Ll];if(r!==null&&bi(e[an])){r!==e[an]&&HI(r,e);let i=e[Fl];i!==null&&i.detachView(n)}F0(e)}finally{Be(t)}}function K$(n,e){let t=n.cleanup,r=e[ym];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ym]=null);let i=e[ys];if(i!==null){e[ys]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[_m];if(o!==null){e[_m]=null;for(let s of o)s.destroy()}}function Q$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ba)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];it(4,a,c);try{c.call(a)}finally{it(5,a,c)}}else{it(4,i,o);try{o.call(i)}finally{it(5,i,o)}}}}}function Lk(n,e,t){return Y$(n,e.parent,t)}function Y$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];if($a(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ei.None||i===Ei.Emulated)return null}return qr(r,t)}function Fk(n,e,t){return Z$(n,e,t)}function J$(n,e,t){return n.type&40?qr(n,t):null}var Z$=J$,oP;function WI(n,e,t,r){let i=Lk(n,r,e),o=e[ut],s=r.parent||e[Qn],a=Fk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)iP(o,i,t[c],a,!1);else iP(o,i,t,a,!1);oP!==void 0&&oP(o,r,e,t,i)}function ph(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return q0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ph(n,r);{let i=n[e.index];return bi(i)?q0(-1,i):zr(i)}}else{if(t&128)return ph(n,e.next);if(t&32)return qI(e,n)()||zr(n[e.index]);{let r=Vk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Va(n[Wn]);return ph(i,r)}else return ph(n,e.next)}}}return null}function Vk(n,e){if(e!==null){let r=n[Wn][Qn],i=e.projection;return r.projection[i]}return null}function q0(n,e){let t=sr+n+1;if(t<e.length){let r=e[t],i=r[Te].firstChild;if(i!==null)return ph(r,i)}return e[lo]}function KI(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Sh(zr(a),r),t.flags|=2),!Ha(t))if(c&8)KI(n,e,t.child,r,i,o,!1),Al(e,n,i,a,o);else if(c&32){let d=qI(t,r),h;for(;h=d();)Al(e,n,i,h,o);Al(e,n,i,a,o)}else c&16?Uk(n,e,r,t,i,o):Al(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ay(n,e,t,r,i,o){KI(t,r,n.firstChild,e,i,o,!1)}function X$(n,e,t){let r=e[ut],i=Lk(n,t,e),o=t.parent||e[Qn],s=Fk(o,t,e);Uk(r,0,e,t,i,s)}function Uk(n,e,t,r,i,o){let s=t[Wn],c=s[Qn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Al(e,n,i,h,o)}else{let d=c,h=s[an];Rm(r)&&(d.flags|=128),KI(n,e,d,h,i,o,!0)}}function e9(n,e,t,r,i){let o=t[lo],s=zr(t);o!==s&&Al(e,n,r,o,i);for(let a=sr;a<t.length;a++){let c=t[a];ay(c[Te],c,n,e,r,o)}}function t9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:uo.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=uo.Important),n.setStyle(t,r,i,o))}}function Nm(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(zr(o)),bi(o)&&n9(o,r);let s=t.type;if(s&8)Nm(n,e,t.child,r);else if(s&32){let a=qI(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Vk(e,t);if(Array.isArray(a))r.push(...a);else{let c=Va(e[Wn]);Nm(c[Te],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function n9(n,e){for(let t=sr;t<n.length;t++){let r=n[t],i=r[Te].firstChild;i!==null&&Nm(r[Te],r,i,e)}n[lo]!==n[ar]&&e.push(n[lo])}function Bk(n){if(n[Ml]!==null){for(let e of n[Ml])e.impl.addSequence(e);n[Ml].length=0}}var jk=[];function r9(n){return n[vr]??i9(n)}function i9(n){let e=jk.pop()??Object.create(s9);return e.lView=n,e}function o9(n){n.lView[vr]!==n&&(n.lView=null,jk.push(n))}var s9=ae(z({},oh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Th(n.lView)},consumerOnSignalRead(){this.lView[vr]=this}});function a9(n){let e=n[vr]??Object.create(c9);return e.lView=n,e}var c9=ae(z({},oh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Va(n.lView);for(;e&&!zk(e[Te]);)e=Va(e);e&&a1(e)},consumerOnSignalRead(){this.lView[vr]=this}});function zk(n){return n.type!==2}function $k(n){if(n[_m]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[_m])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Me]&8192)}}var l9=100;function qk(n,e=!0,t=0){let i=n[ao].rendererFactory,o=!1;o||i.begin?.();try{u9(n,t)}catch(s){throw e&&BI(n,s),s}finally{o||i.end?.()}}function u9(n,e){let t=g1();try{Vx(!0),H0(n,e);let r=0;for(;Km(n);){if(r===l9)throw new re(103,!1);r++,H0(n,1)}}finally{Vx(t)}}function d9(n,e,t,r){if(qa(e))return;let i=e[Me],o=!1,s=!1;_I(e);let a=!0,c=null,d=null;o||(zk(n)?(d=r9(e),c=mg(d)):IE()===null?(a=!1,d=a9(e),c=mg(d)):e[vr]&&(AE(e[vr]),e[vr]=null));try{s1(e),g5(n.bindingStartIndex),t!==null&&xk(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let C=n.preOrderCheckHooks;C!==null&&om(e,C,null)}else{let C=n.preOrderHooks;C!==null&&sm(e,C,0,null),o0(e,0)}if(s||h9(e),$k(e),Hk(e,0),n.contentQueries!==null&&gk(n,e),!o)if(h){let C=n.contentCheckHooks;C!==null&&om(e,C)}else{let C=n.contentHooks;C!==null&&sm(e,C,1),o0(e,1)}p9(n,e);let g=n.components;g!==null&&Wk(e,g,0);let T=n.viewQuery;if(T!==null&&z0(2,T,r),!o)if(h){let C=n.viewCheckHooks;C!==null&&om(e,C)}else{let C=n.viewHooks;C!==null&&sm(e,C,2),o0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[i0]){for(let C of e[i0])C();e[i0]=null}o||(Bk(e),e[Me]&=-73)}catch(h){throw o||Th(e),h}finally{d!==null&&(SE(d,c),a&&o9(d)),vI()}}function Hk(n,e){for(let t=K1(n);t!==null;t=Q1(t))for(let r=sr;r<t.length;r++){let i=t[r];Gk(i,e)}}function h9(n){for(let e=K1(n);e!==null;e=Q1(e)){if(!(e[Me]&2))continue;let t=e[wm];for(let r=0;r<t.length;r++){let i=t[r];a1(i)}}}function f9(n,e,t){it(18);let r=vi(e,n);Gk(r,t),it(19,r[Gn])}function Gk(n,e){mI(n)&&H0(n,e)}function H0(n,e){let r=n[Te],i=n[Me],o=n[vr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&DE(o)),s||=!1,o&&(o.dirty=!1),n[Me]&=-9217,s)d9(r,n,r.template,n[Gn]);else if(i&8192){$k(n),Hk(n,1);let a=r.components;a!==null&&Wk(n,a,1),Bk(n)}}function Wk(n,e,t){for(let r=0;r<e.length;r++)f9(n,e[r],t)}function p9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ua(~i);else{let o=i,s=t[++r],a=t[++r];y5(s,o);let c=e[o];it(24,c),a(2,c),it(25,c)}}}finally{Ua(-1)}}function cy(n,e){let t=g1()?64:1088;for(n[ao].changeDetectionScheduler?.notify(e);n;){n[Me]|=t;let r=Va(n);if(_h(n)&&!r)return n;n=r}return null}function Kk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function QI(n,e,t,r=!0){let i=e[Te];if(m9(i,e,n,t),r){let s=q0(t,n),a=e[ut],c=a.parentNode(n[lo]);c!==null&&G$(i,n[Qn],a,e,c,s)}let o=e[jr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function g9(n,e){let t=Om(n,e);return t!==void 0&&GI(t[Te],t),t}function Om(n,e){if(n.length<=sr)return;let t=sr+e,r=n[t];if(r){let i=r[Ll];i!==null&&i!==n&&HI(i,r),e>0&&(n[t-1][Ur]=r[Ur]);let o=gm(n,sr+e);H$(r[Te],r);let s=o[Fl];s!==null&&s.detachView(o[Te]),r[an]=null,r[Ur]=null,r[Me]&=-129}return r}function m9(n,e,t,r){let i=sr+r,o=t.length;r>0&&(t[i-1][Ur]=e),r<o-sr?(e[Ur]=t[i],BP(t,sr+r,e)):(t.push(e),e[Ur]=null),e[an]=t;let s=e[Ll];s!==null&&t!==s&&Qk(s,e);let a=e[Fl];a!==null&&a.insertView(n),D0(e),e[Me]|=128}function Qk(n,e){let t=n[wm],r=e[an];if(Br(r))n[Me]|=2;else{let i=r[an][Wn];e[Wn]!==i&&(n[Me]|=2)}t===null?n[wm]=[e]:t.push(e)}var wh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Te];return Nm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Gn]}set context(e){this._lView[Gn]=e}get destroyed(){return qa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(bi(e)){let t=e[vm],r=t?t.indexOf(this):-1;r>-1&&(Om(e,r),gm(t,r))}this._attachedToViewContainer=!1}GI(this._lView[Te],this._lView)}onDestroy(e){c1(this._lView,e)}markForCheck(){cy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Me]&=-129}reattach(){D0(this._lView),this._lView[Me]|=128}detectChanges(){this._lView[Me]|=1024,qk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_h(this._lView),t=this._lView[Ll];t!==null&&!e&&HI(t,this._lView),Ok(this._lView[Te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=_h(this._lView),r=this._lView[Ll];r!==null&&!t&&Qk(r,this._lView),D0(this._lView)}};var ly=(()=>{class n{static __NG_ELEMENT_ID__=v9}return n})(),y9=ly,_9=class extends y9{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=$I(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wh(i)}};function v9(){return Yk(Yn(),Xe())}function Yk(n,e){return n.type&4?new _9(e,n,Zm(n,e)):null}function uy(n,e,t,r,i){let o=n.data[e];if(o===null)o=w9(n,e,t,r,i),m5()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=d5();o.injectorIndex=s===null?-1:s.injectorIndex}return Ch(o,!0),o}function w9(n,e,t,r,i){let o=h1(),s=f1(),a=s?o:o&&o.parent,c=n.data[e]=I9(n,a,t,e,r,i);return E9(n,c,o,s),c}function E9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function I9(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $l()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var b9=new RegExp(`^(\\d+)*(${X1}|${Z1})*(.*)`);function T9(n){let e=n.match(b9),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,d,h]of o.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(d,g)}return[s,...a]}function C9(n){return!n.prev&&n.parent?.type===8}function u0(n){return n.index-Dt}function S9(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function dy(n,e,t,r){let i=u0(r),o=S9(n,i);if(o===void 0){let s=n.data[h6];if(s?.[i])o=A9(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(C9(r)){let d=u0(r.parent);o=j0(n,d)}else{let d=qr(c,t);if(a)o=d.firstChild;else{let h=u0(c),g=j0(n,h);if(c.type===2&&g){let C=MI(n,h)+1;o=hy(C,g)}else o=d.nextSibling}}}}return o}function hy(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function D9(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case a6:t=t.firstChild;break;case c6:t=t.nextSibling;break}}return t}function A9(n,e){let[t,...r]=T9(n),i;if(t===Z1)i=e[Wn][ar];else if(t===X1)i=u$(e[Wn][ar]);else{let o=Number(t);i=zr(e[o+Dt])}return D9(i,r)}var R9=!1;function M9(n){R9=n}function x9(n){let e=n[jr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ut];for(let o of r.values())P9(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function P9(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Dt);i&&NI(n,i,!1)}}function Jk(n){let e=n[co]??[],r=n[an][ut],i=[];for(let o of e)o.data[f6]!==void 0?i.push(o):Zk(o,r);n[co]=i}function k9(n){let{lContainer:e}=n,t=e[co];if(t===null)return;let i=e[an][ut];for(let o of t)Zk(o,i)}function Zk(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Mm];for(;t<i;){let o=r.nextSibling;NI(e,r,!1),r=o,t++}}}function fy(n){Jk(n);let e=n[ar];Br(e)&&Lm(e);for(let t=sr;t<n.length;t++)Lm(n[t])}function Lm(n){x9(n);let e=n[Te];for(let t=Dt;t<e.bindingStartIndex;t++)if(bi(n[t])){let r=n[t];fy(r)}else Br(n[t])&&Lm(n[t])}function Xk(n){let e=n._views;for(let t of e){let r=W6(t);r!==null&&r[ar]!==null&&(Br(r)?Lm(r):fy(r))}}function N9(n,e,t,r){n!==null&&(t.cleanup(e),fy(n.lContainer),Xk(r))}function O9(n,e){let t=[];for(let r of e)for(let i=0;i<(r[ek]??1);i++){let o={data:r,firstChild:null};r[Mm]>0&&(o.firstChild=n,n=hy(r[Mm],n)),t.push(o)}return[n,t]}var eN=()=>null;function L9(n,e){let t=n[co];return!e||t===null||t.length===0?null:t[0].data[d6]===e?t.shift():(Jk(n),null)}function F9(){eN=L9}function G0(n,e){return eN(n,e)}var V9=class{},tN=class{},W0=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Hn(e)}.`)}},py=class{static NULL=new W0},Vl=class{},go=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>U9()}return n})();function U9(){let n=Xe(),e=Yn(),t=vi(e.index,n);return(Br(t)?t:n)[ut]}var B9=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var d0={},kl=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=qm(r);let i=this.injector.get(e,d0,r);return i!==d0||t===d0?i:this.parentInjector.get(e,t,r)}};function sP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=v0(i,a);else if(o==2){let c=a,d=e[++s];r=v0(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ie(n,e=Oe.Default){let t=Xe();if(t===null)return de(n,e);let r=Yn();return k1(r,t,xn(n),e)}function nN(){let n="invalid";throw new Error(n)}function rN(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,d=null,h=z9(s);h===null?a=s:[a,c,d]=h,H9(n,e,t,a,o,c,d)}o!==null&&r!==null&&j9(t,r,o)}function j9(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function z9(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&_i(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,$9(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function $9(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function q9(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function H9(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let T=0;T<a;T++){let C=r[T];!c&&_i(C)&&(c=!0,q9(n,t,T)),x0(Cm(t,e),n,C.type)}J9(t,n.data.length,a);for(let T=0;T<a;T++){let C=r[T];C.providersResolver&&C.providersResolver(C)}let d=!1,h=!1,g=Rk(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let T=0;T<a;T++){let C=r[T];if(t.mergedAttrs=vh(t.mergedAttrs,C.hostAttrs),W9(n,t,e,g,C),Y9(g,C,i),s!==null&&s.has(C)){let[F,N]=s.get(C);t.directiveToIndex.set(C.type,[g,F+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(C))&&t.directiveToIndex.set(C.type,g);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let k=C.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}G9(n,t,o)}function G9(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))aP(0,e,i,r),aP(1,e,i,r),lP(e,r,!1);else{let o=t.get(i);cP(0,e,o,r),cP(1,e,o,r),lP(e,r,!0)}}}function aP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),iN(e,o)}}function cP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),iN(e,s)}}function iN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function lP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||PI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function W9(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=La(i.type,!0)),s=new Ba(o,_i(i),ie);n.blueprint[r]=s,t[r]=s,K9(n,e,r,Rk(n,t,i.hostVars,wr),i)}function K9(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Q9(s)!=a&&s.push(a),s.push(t,r,o)}}function Q9(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Y9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function J9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oN(n,e,t,r,i,o,s,a){let c=e.consts,d=Em(c,s),h=uy(e,n,2,r,d);return o&&rN(e,t,h,Em(c,a),i),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),h.attrs!==null&&sP(h,h.attrs,!1),h.mergedAttrs!==null&&sP(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function sN(n,e){T1(n,e),XP(e)&&n.queries.elementEnd(e)}var Fm=class extends py{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vs(e);return new Ul(t,this.ngModule)}};function Z9(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&sy.SignalBased)!==0};return i&&(o.transform=i),o})}function X9(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function eq(n,e,t){let r=e instanceof Pn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new kl(t,r):t}function tq(n){let e=n.get(Vl,null);if(e===null)throw new re(407,!1);let t=n.get(B9,null),r=n.get(ja,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function nq(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return kI(e,t,t==="svg"?X3:t==="math"?e5:null)}var Ul=class extends tN{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Z9(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=X9(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=E$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){it(22);let o=Be(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:I$(this.componentDef.selectors[0]),c=OI(0,null,null,1,0,null,null,null,null,[a],null),d=eq(s,i||this.ngModule,e),h=tq(d),g=h.rendererFactory.createRenderer(null,s),T=r?R$(g,r,s.encapsulation,d):nq(s,g),C=LI(null,c,null,512|Ak(s),null,null,h,g,d,null,fk(T,d,!0));C[Dt]=T,_I(C);let k=null;try{let F=oN(Dt,c,C,"#host",()=>[this.componentDef],!0,0);T&&(Dk(g,T,F),Sh(T,C)),VI(c,C,F),mk(c,F,C),sN(c,F),t!==void 0&&rq(F,this.ngContentSelectors,t),k=vi(F.index,C),C[Gn]=k[Gn],zI(c,C,null)}catch(F){throw k!==null&&F0(k),F0(C),F}finally{it(23),vI()}return new K0(this.componentType,C)}finally{Be(o)}}},K0=class extends V9{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Wm(t[Te],Dt),this.location=Zm(this._tNode,t),this.instance=vi(this._tNode.index,t)[Gn],this.hostView=this.changeDetectorRef=new wh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=jI(r,i[Te],i,e,t);this.previousInputValues.set(e,t);let s=vi(r.index,i);cy(s,1)}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rq(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ql=(()=>{class n{static __NG_ELEMENT_ID__=iq}return n})();function iq(){let n=Yn();return sq(n,Xe())}var oq=Ql,aN=class extends oq{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zm(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){let e=EI(this._hostTNode,this._hostLView);if(D1(e)){let t=bm(e,this._hostLView),r=Im(e),i=t[Te].data[r+8];return new Oa(i,t)}else return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=uP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=G0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,km(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Q3(e),a;if(s)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef}let c=s?e:new Ul(vs(e)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let F=(s?d:this.parentInjector).get(Pn,null);F&&(o=F)}let h=vs(c.componentType??{}),g=G0(this._lContainer,h?.id??null),T=g?.firstChild??null,C=c.create(d,i,T,o);return this.insertImpl(C.hostView,a,km(this._hostTNode,g)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(n5(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],d=new aN(c,c[Qn],c[an]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return QI(s,i,o,r),e.attachToViewContainerRef(),BP(h0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=uP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Om(this._lContainer,t);r&&(gm(h0(this._lContainer),t),GI(r[Te],r))}detach(e){let t=this._adjustIndex(e,-1),r=Om(this._lContainer,t);return r&&gm(h0(this._lContainer),t)!=null?new wh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uP(n){return n[vm]}function h0(n){return n[vm]||(n[vm]=[])}function sq(n,e){let t,r=e[n.index];return bi(r)?t=r:(t=Kk(r,e,null,n),e[n.index]=t,FI(e,t)),cN(t,e,n,r),new aN(t,n,e)}function aq(n,e){let t=n[ut],r=t.createComment(""),i=qr(e,n),o=t.parentNode(i);return Pm(t,o,r,t.nextSibling(i),!1),r}var cN=lN,YI=()=>!1;function cq(n,e,t){return YI(n,e,t)}function lN(n,e,t,r){if(n[lo])return;let i;t.type&8?i=zr(r):i=aq(e,t),n[lo]=i}function lq(n,e,t){if(n[lo]&&n[co])return!0;let r=t[jr],i=e.index-Dt;if(!r||e6(e)||Ah(r,i))return!1;let s=j0(r,i),a=r.data[DI]?.[i],[c,d]=O9(s,a);return n[lo]=c,n[co]=d,!0}function uq(n,e,t,r){YI(n,t,e)||lN(n,e,t,r)}function dq(){cN=uq,YI=lq}var Bl=class{},JI=class{};var Q0=class extends Bl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=$P(e);this._bootstrapComponents=wk(o.bootstrap),this._r3Injector=L1(e,t,[{provide:Bl,useValue:this},{provide:py,useValue:this.componentFactoryResolver},...r],Hn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Y0=class extends JI{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Q0(this.moduleType,e,[])}};var Vm=class extends Bl{injector;componentFactoryResolver=new Fm(this);instance=null;constructor(e){super();let t=new mh([...e.providers,{provide:Bl,useValue:this},{provide:py,useValue:this.componentFactoryResolver}],e.parent||pI(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yl(n,e,t=null){return new Vm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var hq=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hI(!1,t.type),i=r.length>0?Yl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(de(Pn))})}return n})();function Rt(n){return Ih(()=>{let e=uN(n),t=ae(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===G1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(hq).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ei.Emulated,styles:n.styles||qn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ci("NgStandalone"),dN(t);let r=n.dependencies;return t.directiveDefs=dP(r,!1),t.pipeDefs=dP(r,!0),t.id=yq(t),t})}function fq(n){return vs(n)||qP(n)}function pq(n){return n!==null}function Hr(n){return Ih(()=>({type:n.type,bootstrap:n.bootstrap||qn,declarations:n.declarations||qn,imports:n.imports||qn,exports:n.exports||qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gq(n,e){if(n==null)return Fa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=sy.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function mq(n){if(n==null)return Fa;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function mt(n){return Ih(()=>{let e=uN(n);return dN(e),e})}function ZI(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function uN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Fa,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:gq(n.inputs,e),outputs:mq(n.outputs),debugInfo:null}}function dN(n){n.features?.forEach(e=>e(n))}function dP(n,e){if(!n)return null;let t=e?HP:fq;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(pq)}function yq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _q(n){return Object.getPrototypeOf(n.prototype).constructor}function Er(n){let e=_q(n.type),t=!0,r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=f0(n.inputs),s.declaredInputs=f0(n.declaredInputs),s.outputs=f0(n.outputs);let a=i.hostBindings;a&&bq(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&Eq(n,c),d&&Iq(n,d),vq(n,i),_3(n.outputs,i.outputs),_i(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Er&&(t=!1)}}e=Object.getPrototypeOf(e)}wq(r)}function vq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function wq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vh(i.hostAttrs,t=vh(t,i.hostAttrs))}}function f0(n){return n===Fa?{}:n===qn?[]:n}function Eq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Iq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function bq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function hN(n){return Cq(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Tq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Cq(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Sq(n,e,t){return n[e]=t}function ho(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Dq(n,e,t,r){let i=ho(n,e,t);return ho(n,e+1,r)||i}function Aq(n,e,t,r,i,o,s,a,c){let d=e.consts,h=uy(e,n,4,s||null,a||null);d1()&&rN(e,t,h,Em(d,c),Nk),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),T1(e,h);let g=h.tView=OI(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function fN(n,e,t,r,i,o,s,a,c,d){let h=t+Dt,g=e.firstCreatePass?Aq(h,e,n,r,i,o,s,a,c):e.data[h];Ch(g,!1);let T=pN(e,n,g,t);wI()&&WI(e,n,T,g),Sh(T,n);let C=Kk(T,n,T,g);return n[h]=C,FI(n,C),cq(C,g,n),gI(g)&&VI(e,n,g),c!=null&&Pk(n,g,d),g}function be(n,e,t,r,i,o,s,a){let c=Xe(),d=fn(),h=Em(d.consts,o);return fN(c,d,n,e,t,r,i,h,s,a),be}var pN=gN;function gN(n,e,t,r){return Is(!0),e[ut].createComment("")}function Rq(n,e,t,r){let i=e[jr],o=!i||$l()||Ha(t)||Ah(i,r);if(Is(o),o)return gN(n,e);let s=i.data[u6]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=dy(i,n,e,t);iy(i,r,a);let c=MI(i,r);return hy(c,a)}function Mq(){pN=Rq}var xq=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Yl(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var Pq=new Y("");function p0(n,e,t){return n.get(xq).getOrCreateInjector(e,n,t,"")}function kq(n,e,t){if(n instanceof kl){let i=n.injector,o=n.parentInjector,s=p0(o,e,t);return new kl(i,s)}let r=n.get(Pn);if(r!==n){let i=p0(r,e,t);return new kl(n,i)}return p0(n,e,t)}function Rl(n,e,t,r=!1){let i=t[an],o=i[Te];if(qa(i))return;let s=Dh(i,e),a=s[ty],c=s[D6];if(!(c!==null&&n<c)&&hP(a,n)&&hP(s[T6]??-1,n)){let d=ny(o,e),g=!r&&!0&&(P6(d)!==null||Zx(d,Xt.Loading)!==null||Zx(d,Xt.Placeholder))?Lq:Oq;try{g(n,s,t,e,i)}catch(T){BI(i,T)}}}function Nq(n,e){let t=n[co]?.findIndex(i=>i.data[p6]===e[ty])??-1;return{dehydratedView:t>-1?n[co][t]:null,dehydratedViewIx:t}}function Oq(n,e,t,r,i){it(20);let o=x6(n,i,r);if(o!==null){e[ty]=n;let s=i[Te],a=o+Dt,c=Wm(s,a),d=0;g9(t,d);let h;if(n===Xt.Complete){let k=ny(s,r),F=k.providers;F&&F.length>0&&(h=kq(i[yi],k,F))}let{dehydratedView:g,dehydratedViewIx:T}=Nq(t,e),C=$I(i,c,null,{injector:h,dehydratedView:g});if(QI(t,C,d,km(c,g)),cy(C,2),T>-1&&t[co]?.splice(T,1),(n===Xt.Complete||n===Xt.Error)&&Array.isArray(e[Pl])){for(let k of e[Pl])k();e[Pl]=null}}it(21)}function hP(n,e){return n<e}function fP(n,e,t){n.loadingPromise.then(()=>{n.loadingState===or.COMPLETE?Rl(Xt.Complete,e,t):n.loadingState===or.FAILED&&Rl(Xt.Error,e,t)})}var Lq=null;var XI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var mN=new Y("");var Fq=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new J0})}return n})(),J0=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ts(n){return!!n&&typeof n.then=="function"}function eb(n){return!!n&&typeof n.subscribe=="function"}var yN=new Y("");function tb(n){return wn([{provide:yN,multi:!0,useValue:n}])}var _N=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(yN,{optional:!0})??[];injector=j(At);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=cr(this.injector,i);if(Ts(o))t.push(o);else if(eb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cs=new Y("");function Vq(){ME(()=>{throw new re(600,!1)})}function Uq(n){return n.isBoundToModule}var Bq=10;var Kn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(W5);afterRenderManager=j(sk);zonelessEnabled=j(Jm);rootEffectScheduler=j(Fq);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new St;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=j(po).hasPendingTasks.pipe(Ie(t=>!t));constructor(){j(Wl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=At.NULL){it(10);let o=t instanceof tN;if(!this._injector.get(_N).done){let C="";throw new re(405,C)}let a;o?a=t:a=this._injector.get(py).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=Uq(a)?void 0:this._injector.get(Bl),d=r||a.selector,h=a.create(i,[],d,c),g=h.location.nativeElement,T=h.injector.get(mN,null);return T?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),cm(this.components,h),T?.unregisterApplication(g)}),this._loadComponent(h),it(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){it(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(AI.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=Be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Be(t),this.afterTick.next(),it(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vl,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Bq;)it(14),this.synchronizeOnce(),it(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)jq(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Km(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;cm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Cs,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>cm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jq(n,e,t,r){if(!t&&!Km(n))return;qk(n,e,t&&!r?0:1)}function zq(n,e,t){let r=e[yi],i=e[Te];if(n.loadingState!==or.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=Dh(e,t),s=k6(i,n);n.loadingState=or.IN_PROGRESS,am(1,o);let a=n.dependencyResolverFn,c=r.get(B5).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(d=>{let h=!1,g=[],T=[];for(let C of d)if(C.status==="fulfilled"){let k=C.value,F=vs(k)||qP(k);if(F)g.push(F);else{let N=HP(k);N&&T.push(N)}}else{h=!0;break}if(h){if(n.loadingState=or.FAILED,n.errorTmplIndex===null){let C="",k=new re(-750,!1);BI(e,k)}}else{n.loadingState=or.COMPLETE;let C=s.tView;if(g.length>0){C.directiveRegistry=Xx(C.directiveRegistry,g);let k=g.map(N=>N.type),F=hI(!1,...k);n.providers=F}T.length>0&&(C.pipeRegistry=Xx(C.pipeRegistry,T))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=or.COMPLETE,c()}),n.loadingPromise)}function $q(n,e){return e[yi].get(Pq,null,{optional:!0})?.behavior!==ak.Manual}function qq(n,e,t){let r=e[Te],i=e[t.index];if(!$q(n,e))return;let o=Dh(e,t),s=ny(r,t);switch(R6(o),s.loadingState){case or.NOT_STARTED:Rl(Xt.Loading,t,i),zq(s,e,t),s.loadingState===or.IN_PROGRESS&&fP(s,t,i);break;case or.IN_PROGRESS:Rl(Xt.Loading,t,i),fP(s,t,i);break;case or.COMPLETE:Rl(Xt.Complete,t,i);break;case or.FAILED:Rl(Xt.Error,t,i);break;default:}}function Hq(n,e,t){return S(this,null,function*(){let r=n.get(RI);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=X6(e,n);if(s.length===0)return;o!==null&&s.shift(),Kq(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield pP(n,s,t):r.awaitParentBlock(a,()=>S(null,null,function*(){return yield pP(n,s,t)}))})}function pP(n,e,t){return S(this,null,function*(){let r=n.get(RI),i=r.hydrating,o=n.get(po),s=o.add();for(let c=0;c<e.length;c++){let d=e[c],h=r.get(d);if(h!=null){if(yield Yq(h),yield Qq(n),Gq(h)){k9(h),gP(e.slice(c),r);break}i.get(d).resolve()}else{Wq(c,e,r),gP(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),t&&t(e),N9(r.get(a),e,r,n.get(Kn))})}function Gq(n){return Dh(n.lView,n.tNode)[ty]===Xt.Error}function Wq(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&fy(i.lContainer)}function gP(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function Kq(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function Qq(n){return new Promise(e=>ey(e,{injector:n}))}function Yq(n){return S(this,null,function*(){let{tNode:e,lView:t}=n,r=Dh(t,e);return new Promise(i=>{Jq(r,i),qq(2,t,e)})})}function Jq(n,e){Array.isArray(n[Pl])||(n[Pl]=[]),n[Pl].push(e)}function Rh(n,e,t,r){let i=Xe(),o=Qm();if(ho(i,o,e)){let s=fn(),a=Ym();V$(a,i,n,e,t,r)}return Rh}function vN(n,e,t,r){return ho(n,Qm(),t)?e+Nl(t)+r:wr}function Zq(n,e,t,r,i,o){let s=p5(),a=Dq(n,s,t,i);return yI(2),a?e+Nl(t)+r+Nl(i)+o:wr}function nm(n,e){return n<<17|e<<2}function za(n){return n>>17&32767}function Xq(n){return(n&2)==2}function eH(n,e){return n&131071|e<<17}function Z0(n){return n|2}function jl(n){return(n&131068)>>2}function g0(n,e){return n&-131069|e<<2}function tH(n){return(n&1)===1}function X0(n){return n|1}function nH(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=za(s),c=jl(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||bh(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let T=za(n[a+1]);n[r+1]=nm(T,a),T!==0&&(n[T+1]=g0(n[T+1],r)),n[a+1]=eH(n[a+1],r)}else n[r+1]=nm(a,0),a!==0&&(n[a+1]=g0(n[a+1],r)),a=r;else n[r+1]=nm(c,0),a===0?a=r:n[c+1]=g0(n[c+1],r),c=r;d&&(n[r+1]=Z0(n[r+1])),mP(n,h,r,!0),mP(n,h,r,!1),rH(e,h,n,r,o),s=nm(a,c),o?e.classBindings=s:e.styleBindings=s}function rH(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&bh(o,e)>=0&&(t[r+1]=X0(t[r+1]))}function mP(n,e,t,r){let i=n[t+1],o=e===null,s=r?za(i):jl(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];iH(c,e)&&(a=!0,n[s+1]=r?X0(d):Z0(d)),s=r?za(d):jl(d)}a&&(n[t+1]=r?Z0(i):X0(i))}function iH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bh(n,e)>=0:!1}var Vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oH(n){return n.substring(Vr.key,Vr.keyEnd)}function sH(n){return aH(n),wN(n,EN(n,0,Vr.textEnd))}function wN(n,e){let t=Vr.textEnd;return t===e?-1:(e=Vr.keyEnd=cH(n,Vr.key=e,t),EN(n,e,t))}function aH(n){Vr.key=0,Vr.keyEnd=0,Vr.value=0,Vr.valueEnd=0,Vr.textEnd=n.length}function EN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function cH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function K(n,e,t){let r=Xe(),i=Qm();if(ho(r,i,e)){let o=fn(),s=Ym();UI(o,s,r,n,e,r[ut],t,!1)}return K}function eI(n,e,t,r,i){jI(e,n,t,i?"class":"style",r)}function gy(n,e){return uH(n,e,null,!0),gy}function my(n){dH(yH,lH,n,!0)}function lH(n,e){for(let t=sH(e);t>=0;t=wN(e,t))dI(n,oH(e),!0)}function uH(n,e,t,r){let i=Xe(),o=fn(),s=yI(2);if(o.firstUpdatePass&&bN(o,n,s,r),e!==wr&&ho(i,s,e)){let a=o.data[Es()];TN(o,a,i,i[ut],n,i[s+1]=vH(e,t),r,s)}}function dH(n,e,t,r){let i=fn(),o=yI(2);i.firstUpdatePass&&bN(i,null,o,r);let s=Xe();if(t!==wr&&ho(s,o,t)){let a=i.data[Es()];if(CN(a,r)&&!IN(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=v0(c,t||"")),eI(i,a,s,t,r)}else _H(i,a,s,s[ut],s[o+1],s[o+1]=mH(n,e,t),r,o)}}function IN(n,e){return e>=n.expandoStartIndex}function bN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Es()],s=IN(n,t);CN(o,r)&&e===null&&!s&&(e=!1),e=hH(i,o,e,r),nH(i,o,e,t,s,r)}}function hH(n,e,t,r){let i=v5(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=m0(null,n,e,t,r),t=Eh(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=m0(i,n,e,t,r),o===null){let c=fH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=m0(null,n,e,c[1],r),c=Eh(c,e.attrs,r),pH(n,e,r,c))}else o=gH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function fH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(jl(r)!==0)return n[za(r)]}function pH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[za(i)]=r}function gH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Eh(r,s,t)}return Eh(r,e.attrs,t)}function m0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Eh(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Eh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),dI(n,s,t?!0:e[++o]))}return n===void 0?null:n}function mH(n,e,t){if(t==null||t==="")return qn;let r=[],i=Kl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function yH(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&dI(n,r,t)}function _H(n,e,t,r,i,o,s,a){i===wr&&(i=qn);let c=0,d=0,h=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;h!==null||g!==null;){let T=c<i.length?i[c+1]:void 0,C=d<o.length?o[d+1]:void 0,k=null,F;h===g?(c+=2,d+=2,T!==C&&(k=g,F=C)):g===null||h!==null&&h<g?(c+=2,k=h):(d+=2,k=g,F=C),k!==null&&TN(n,e,t,r,k,F,s,a),h=c<i.length?i[c]:null,g=d<o.length?o[d]:null}}function TN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=tH(d)?yP(c,e,t,i,jl(d),s):void 0;if(!Um(h)){Um(o)||Xq(d)&&(o=yP(c,null,t,i,a,s));let g=i1(Es(),t);t9(r,s,g,i,o)}}function yP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,T=t[i+1];T===wr&&(T=g?qn:void 0);let C=g?n0(T,r):h===r?T:void 0;if(d&&!Um(C)&&(C=n0(c,r)),Um(C)&&(a=C,s))return a;let k=n[i+1];i=s?za(k):jl(k)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=n0(c,r))}return a}function Um(n){return n!==void 0}function vH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hn(Kl(n)))),n}function CN(n,e){return(n.flags&(e?8:16))!==0}function v(n,e,t,r){let i=Xe(),o=fn(),s=Dt+n,a=i[ut],c=o.firstCreatePass?oN(s,o,i,e,Nk,d1(),t,r):o.data[s],d=SN(o,i,c,a,e,n);i[s]=d;let h=gI(c);return Ch(c,!0),Dk(a,d,c),!Ha(c)&&wI()&&WI(o,i,d,c),(o5()===0||h)&&Sh(d,i),s5(),h&&(VI(o,i,c),mk(o,c,i)),r!==null&&Pk(i,c),v}function w(){let n=Yn();f1()?p1():(n=n.parent,Ch(n,!1));let e=n;c5(e)&&u5(),a5();let t=fn();return t.firstCreatePass&&sN(t,e),e.classesWithoutHost!=null&&T5(e)&&eI(t,e,Xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&C5(e)&&eI(t,e,Xe(),e.stylesWithoutHost,!1),w}function Mt(n,e,t,r){return v(n,e,t,r),w(),Mt}var SN=(n,e,t,r,i,o)=>(Is(!0),kI(r,i,I1()));function wH(n,e,t,r,i,o){let s=e[jr],a=!s||$l()||Ha(t)||Ah(s,o);if(Is(a),a)return kI(r,i,I1());let c=dy(s,n,e,t);return pk(s,o)&&iy(s,o,c.nextSibling),s&&(q1(t)||H1(c))&&$a(t)&&(l5(t),Sk(c)),c}function EH(){SN=wH}var IH=(n,e,t,r)=>(Is(!0),Tk(e[ut],""));function bH(n,e,t,r){let i,o=e[jr],s=!o||$l()||Ah(o,r)||Ha(t);if(Is(s),s)return Tk(e[ut],"");let a=dy(o,n,e,t),c=J6(o,r);return iy(o,r,a),i=hy(c,a),i}function TH(){IH=bH}function dt(){return Xe()}var Bm="en-US";var CH=Bm;function SH(n){typeof n=="string"&&(CH=n.toLowerCase().replace(/_/g,"-"))}function _P(n,e,t){return function r(i){if(i===Function)return t;let o=$a(n)?vi(n.index,e):e;cy(o,5);let s=e[Gn],a=vP(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=vP(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function vP(n,e,t,r){let i=Be(null);try{return it(6,e,t),t(r)!==!1}catch(o){return DH(n,o),!1}finally{it(7,e,t),Be(i)}}function DH(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function wP(n,e,t,r,i,o){let s=e[t],a=e[Te],d=a.data[t].outputs[r],h=s[d],g=a.firstCreatePass?u1(a):null,T=l1(e),C=h.subscribe(o),k=T.length;T.push(o,C),g&&g.push(i,n.index,k,-(k+1))}function ye(n,e,t,r){let i=Xe(),o=fn(),s=Yn();return DN(o,i,i[ut],s,n,e,r),ye}function AH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ym],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function DN(n,e,t,r,i,o,s){let a=gI(r),d=n.firstCreatePass?u1(n):null,h=l1(e),g=!0;if(r.type&3||s){let T=qr(r,e),C=s?s(T):T,k=h.length,F=s?q=>s(zr(q[r.index])):r.index,N=null;if(!s&&a&&(N=AH(n,e,i,r.index)),N!==null){let q=N.__ngLastListenerFn__||N;q.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,g=!1}else{o=_P(r,e,o),U6(e,C,i,o);let q=t.listen(C,i,o);h.push(o,q),d&&d.push(i,F,k,k+1)}}else o=_P(r,e,o);if(g){let T=r.outputs?.[i],C=r.hostDirectiveOutputs?.[i];if(C&&C.length)for(let k=0;k<C.length;k+=2){let F=C[k],N=C[k+1];wP(r,e,F,N,i,o)}if(T&&T.length)for(let k of T)wP(r,e,k,i,i,o)}}function ee(n=1){return E5(n)}function RH(n,e){let t=null,r=m$(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?Ik(n,o,!0):v$(r,o))return i}return t}function AN(n){let e=Xe()[Wn][Qn];if(!e.projection){let t=n?n.length:1,r=e.projection=L3(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?RH(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function RN(n,e=0,t,r,i,o){let s=Xe(),a=fn(),c=r?n+1:null;c!==null&&fN(s,a,c,r,i,o,null,t);let d=uy(a,Dt+n,16,null,t||null);d.projection===null&&(d.projection=e),p1();let g=!s[jr]||$l();s[Wn][Qn].projection[d.projection]===null&&c!==null?MH(s,a,c):g&&!Ha(d)&&X$(a,s,d)}function MH(n,e,t){let r=Dt+t,i=e.data[r],o=n[r],s=G0(o,i.tView.ssrId),a=$I(n,i,void 0,{dehydratedView:s});QI(o,a,0,km(i,s))}function nb(n,e,t,r,i){let o=Xe(),s=vN(o,e,t,r);if(s!==wr){let a=fn(),c=Ym();UI(a,c,o,n,s,o[ut],i,!1)}return nb}function Mh(n){let e=h5();return o1(e,Dt+n)}function b(n,e=""){let t=Xe(),r=fn(),i=n+Dt,o=r.firstCreatePass?uy(r,i,1,e,null):r.data[i],s=MN(r,t,o,e,n);t[i]=s,wI()&&WI(r,t,s,o),Ch(o,!1)}var MN=(n,e,t,r,i)=>(Is(!0),bk(e[ut],r));function xH(n,e,t,r,i){let o=e[jr],s=!o||$l()||Ha(t)||Ah(o,i);return Is(s),s?bk(e[ut],r):dy(o,n,e,t)}function PH(){MN=xH}function tn(n){return ht("",n,""),tn}function ht(n,e,t){let r=Xe(),i=vN(r,n,e,t);return i!==wr&&xN(r,Es(),i),ht}function Jl(n,e,t,r,i){let o=Xe(),s=Zq(o,n,e,t,r,i);return s!==wr&&xN(o,Es(),s),Jl}function xN(n,e,t){let r=i1(e,n);b$(n[ut],r,t)}function Ce(n,e,t){$1(e)&&(e=e());let r=Xe(),i=Qm();if(ho(r,i,e)){let o=fn(),s=Ym();UI(o,s,r,n,e,r[ut],t,!1)}return Ce}function xe(n,e){let t=$1(n);return t&&n.set(e),t}function Se(n,e){let t=Xe(),r=fn(),i=Yn();return DN(r,t,t[ut],i,n,e),Se}function kH(n,e,t){let r=fn();if(r.firstCreatePass){let i=_i(n);tI(t,r.data,r.blueprint,i,!0),tI(e,r.data,r.blueprint,i,!1)}}function tI(n,e,t,r,i){if(n=xn(n),Array.isArray(n))for(let o=0;o<n.length;o++)tI(n[o],e,t,r,i);else{let o=fn(),s=Xe(),a=Yn(),c=Ol(n)?n:xn(n.provide),d=KP(n),h=a.providerIndexes&1048575,g=a.directiveStart,T=a.providerIndexes>>20;if(Ol(n)||!n.multi){let C=new Ba(d,i,ie),k=_0(c,e,i?h:h+T,g);k===-1?(x0(Cm(a,s),o,c),y0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),s.push(C)):(t[k]=C,s[k]=C)}else{let C=_0(c,e,h+T,g),k=_0(c,e,h,h+T),F=C>=0&&t[C],N=k>=0&&t[k];if(i&&!N||!i&&!F){x0(Cm(a,s),o,c);let q=LH(i?OH:NH,t.length,i,r,d);!i&&N&&(t[k].providerFactory=q),y0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=PN(t[i?k:C],d,!i&&r);y0(o,n,C>-1?C:k,q)}!i&&r&&N&&t[k].componentProviders++}}}function y0(n,e,t,r){let i=Ol(e),o=$3(e);if(i||o){let c=(o?xn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function PN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function NH(n,e,t,r,i){return nI(this.multi,[])}function OH(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Sm(r,r[Te],this.providerFactory.index,i);s=c.slice(0,a),nI(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],nI(o,s);return s}function nI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LH(n,e,t,r,i){let o=new Ba(n,t,ie);return o.multi=[],o.index=e,o.componentProviders=0,PN(o,i,r&&!t),o}function Si(n,e=[]){return t=>{t.providersResolver=(r,i)=>kH(r,i?i(n):n,e)}}function FH(n,e){let t=n[e];return t===wr?void 0:t}function VH(n,e,t,r,i,o){let s=e+t;return ho(n,s,i)?Sq(n,s+1,o?r.call(o,i):r(i)):FH(n,s+1)}function Gr(n,e){let t=fn(),r,i=n+Dt;t.firstCreatePass?(r=UH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=La(r.type,!0)),s,a=$n(ie);try{let c=Tm(!1),d=o();return Tm(c),t5(t,Xe(),i,d),d}finally{$n(a)}}function UH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Wr(n,e,t){let r=n+Dt,i=Xe(),o=o1(i,r);return BH(i,r)?VH(i,f5(),e,o.transform,t,o):o.transform(t)}function BH(n,e){return n[Te].data[e].pure}function kN(n,e){return Yk(n,e)}var ws=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NN=new ws("19.2.15"),rI=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ON=(()=>{class n{compileModuleSync(t){return new Y0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$P(t),o=wk(i.declarations).reduce((s,a)=>{let c=vs(a);return c&&s.push(new Ul(c)),s},[]);return new rI(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jH=(()=>{class n{zone=j(Fe);changeDetectionScheduler=j(ja);applicationRef=j(Kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zH=new Y("",{factory:()=>!1});function LN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Fe(ae(z({},VN()),{scheduleInRootZone:t})),[{provide:Fe,useFactory:n},{provide:_s,multi:!0,useFactory:()=>{let r=j(jH,{optional:!0});return()=>r.initialize()}},{provide:_s,multi:!0,useFactory:()=>{let r=j($H);return()=>{r.initialize()}}},e===!0?{provide:V1,useValue:!0}:[],{provide:U1,useValue:t??F1}]}function FN(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=LN({ngZoneFactory:()=>{let i=VN(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ci("NgZone_CoalesceEvent"),new Fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return wn([{provide:zH,useValue:!0},{provide:Jm,useValue:!1},r])}function VN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var $H=(()=>{class n{subscription=new Nt;initialized=!1;zone=j(Fe);pendingTasks=j(po);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qH=(()=>{class n{appRef=j(Kn);taskService=j(po);ngZone=j(Fe);zonelessEnabled=j(Jm);tracing=j(Wl,{optional:!0});disableScheduling=j(V1,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Nt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Am):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(U1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof L0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?qx:B1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Am+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HH(){return typeof $localize<"u"&&$localize.locale||Bm}var rb=new Y("",{providedIn:"root",factory:()=>j(rb,Oe.Optional|Oe.SkipSelf)||HH()});var iI=new Y(""),GH=new Y("");function hh(n){return!n.moduleRef}function WH(n){let e=hh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Fe);return t.run(()=>{hh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),hh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(iI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(iI);s.add(o),n.moduleRef.onDestroy(()=>{cm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return QH(r,t,()=>{let o=e.get(_N);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(rb,Bm);if(SH(s||Bm),!e.get(GH,!0))return hh(n)?e.get(Kn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(hh(n)){let c=e.get(Kn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return KH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function KH(n,e){let t=n.injector.get(Kn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}function QH(n,e,t){try{let r=t();return Ts(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var lm=null;function YH(n=[],e){return At.create({name:e,providers:[{provide:Hm,useValue:"platform"},{provide:iI,useValue:new Set([()=>lm=null])},...n]})}function JH(n=[]){if(lm)return lm;let e=YH(n);return lm=e,Vq(),ZH(e),e}function ZH(n){let e=n.get(CI,null);cr(n,()=>{e?.forEach(t=>t())})}var Ss=(()=>{class n{static __NG_ELEMENT_ID__=XH}return n})();function XH(n){return eG(Yn(),Xe(),(n&16)===16)}function eG(n,e,t){if($a(n)&&!t){let r=vi(n.index,e);return new wh(r,r)}else if(n.type&175){let r=e[Wn];return new wh(r,e)}return null}var oI=class{constructor(){}supports(e){return hN(e)}create(e){return new sI(e)}},tG=(n,e)=>e,sI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||tG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<EP(r,i,o)?t:r,a=EP(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,h=c-i;if(d!=h){for(let T=0;T<d;T++){let C=T<o.length?o[T]:o[T]=0,k=C+T;h<=k&&k<d&&(o[T]=C+1)}let g=s.previousIndex;o[g]=h-d}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hN(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,Tq(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new aI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new jm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},aI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},cI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},jm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new cI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function EP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function IP(){return new ib([new oI])}var ib=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:IP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||IP()),deps:[[n,new O3,new en]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function UN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;it(8);try{let o=i?.injector??JH(r),s=[LN({}),{provide:ja,useExisting:qH},...t||[]],a=new Vm({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return WH({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{it(9)}}var rm=new WeakSet,bP="",um=[];function TP(n){return n.get(ik,m6)}function BN(){let n=[{provide:ik,useFactory:()=>{let e=!0;{let t=j(so);e=!!window._ejsas?.[t]}return e&&Ci("NgEventReplay"),e}}];return n.push({provide:_s,useValue:()=>{let e=j(Kn),{injector:t}=e;if(!rm.has(e)){let r=j(Qx);if(TP(t)){B6();let i=t.get(so),o=V6(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(N6(s,a,c),O6(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Cs,useFactory:()=>{let e=j(Kn),{injector:t}=e;return()=>{!TP(t)||rm.has(e)||(rm.add(e),e.onDestroy(()=>{rm.delete(e);{let r=t.get(so);t0(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(F6);nG(r,t);let i=t.get(Qx);i.get(bP)?.forEach(L6),i.delete(bP);let o=r.instance;Y6(t)?e.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),n}var nG=(n,e)=>{let t=e.get(so),r=window._ejsas[t],i=n.instance=new Ax(new Jg(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=Rx(t);i.replayEarlyEventInfos(o),t0(t);let s=new Zg(a=>{rG(e,a,a.currentTarget)});Dx(i,s)};function rG(n,e,t){let r=(t&&t.getAttribute(ry))??"";/d\d+/.test(r)?iG(r,n,e,t):e.eventPhase===e0.REPLAY&&lk(e,t)}function iG(n,e,t,r){um.push({event:t,currentTarget:r}),Hq(e,n,oG)}function oG(n){let e=[...um],t=new Set(n);um=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(ry);t.has(o)?lk(r,i):um.push({event:r,currentTarget:i})}}var CP=!1;function sG(){CP||(CP=!0,G6(),EH(),PH(),TH(),Mq(),dq(),F9(),P$())}function aG(n){return n.whenStable()}function jN(){let n=[{provide:em,useFactory:()=>{let e=!0;return e=!!j(Gl,{optional:!0})?.get(dk,null),e&&Ci("NgHydration"),e}},{provide:_s,useValue:()=>{M9(!1),j(em)&&(e$(Xm()),sG())},multi:!0}];return n.push({provide:rk,useFactory:()=>j(em)},{provide:Cs,useFactory:()=>{if(j(em)){let e=j(Kn);return()=>{aG(e).then(()=>{e.destroyed||Xk(e)})}}return()=>{}},multi:!0}),wn(n)}function Ds(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Kr(n){return kE(n)}function Zl(n,e){return RE(n,e?.equal)}var SP=class{[_r];constructor(e){this[_r]=e}destroy(){this[_r].destroy()}};function zN(n){let e=vs(n);if(!e)return null;let t=new Ul(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cn=new Y("");var HN=null;function Ir(){return HN}function ob(n){HN??=n}var xh=class{},Ph=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(GN),providedIn:"platform"})}return n})(),sb=new Y(""),GN=(()=>{class n extends Ph{_location;_history;_doc=j(cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function yy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function $N(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qr(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(vy),providedIn:"root"})}return n})(),_y=new Y(""),vy=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(Ph),de(_y,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),As=(()=>{class n{_subject=new St;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=uG($N(qN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(lG(this._basePath,qN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qr;static joinWithSlash=yy;static stripTrailingSlash=$N;static \u0275fac=function(r){return new(r||n)(de(Yr))};static \u0275prov=X({token:n,factory:()=>cG(),providedIn:"root"})}return n})();function cG(){return new As(de(Yr))}function lG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qN(n){return n.replace(/\/index.html$/,"")}function uG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var lb=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=yy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(Ph),de(_y,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var wy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xl=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new wy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),WN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);WN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ie(Ql),ie(ly),ie(ib))};static \u0275dir=mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function WN(n,e){n.context.$implicit=e.item}var kn=(()=>{class n{_viewContainer;_context=new Ey;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ie(Ql),ie(ly))};static \u0275dir=mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ey=class{$implicit=null;ngIf=null};function KN(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}function QN(n,e){return new re(2100,!1)}var ab=class{createSubscription(e,t){return Kr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Kr(()=>e.unsubscribe())}},cb=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},dG=new cb,hG=new ab,kh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ts(t))return dG;if(eb(t))return hG;throw QN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ie(Ss,16))};static \u0275pipe=ZI({name:"async",type:n,pure:!1})}return n})();var fG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ga=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw QN(n,t);return t.replace(fG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=ZI({name:"titlecase",type:n,pure:!0})}return n})();var En=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function ub(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Iy="browser",YN="server";function db(n){return n===Iy}function by(n){return n===YN}var Nh=class{};var JN=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new hb(j(cn),window)})}return n})(),hb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=pG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function pG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Sy=new Y(""),mb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(Sy),de(Fe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Oh=class{_doc;constructor(e){this._doc=e}manager},Ty="ng-app-id";function ZN(n){for(let e of n)e.remove()}function XN(n,e){let t=e.createElement("style");return t.textContent=n,t}function gG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ty}="${e}"],link[${Ty}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ty),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function pb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var yb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=by(o),gG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,XN);r?.forEach(i=>this.addUsage(i,this.external,pb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ZN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ZN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,XN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,pb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ty,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(cn),de(so),de(SI,8),de(Ti))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),fb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_b=/%COMP%/g;var tO="%COMP%",mG=`_nghost-${tO}`,yG=`_ngcontent-${tO}`,_G=!0,vG=new Y("",{providedIn:"root",factory:()=>_G});function wG(n){return yG.replace(_b,n)}function EG(n){return mG.replace(_b,n)}function nO(n,e){return e.map(t=>t.replace(_b,n))}var vb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=by(a),this.defaultRenderer=new Lh(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ei.ShadowDom&&(r=ae(z({},r),{encapsulation:Ei.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Cy?i.applyToHost(t):i instanceof Fh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,T=this.tracingService;switch(r.encapsulation){case Ei.Emulated:o=new Cy(c,d,r,this.appId,h,s,a,g,T);break;case Ei.ShadowDom:return new gb(c,d,t,r,s,a,this.nonce,g,T);default:o=new Fh(c,d,r,h,s,a,g,T);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(mb),de(yb),de(so),de(vG),de(cn),de(Ti),de(Fe),de(SI),de(Wl,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Lh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(fb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=fb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=fb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(uo.DashCase|uo.Important)?e.style.setProperty(t,r,i&uo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&uo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ir().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function eO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gb=class extends Lh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=nO(i.id,h);for(let T of h){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=T,this.shadowRoot.appendChild(C)}let g=i.getExternalStyles?.();if(g)for(let T of g){let C=pb(T,o);a&&C.setAttribute("nonce",a),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fh=class extends Lh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?nO(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cy=class extends Fh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,d){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,d,h),this.contentAttr=wG(h),this.hostAttr=EG(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Dy=class n extends xh{supportsDOMEvents=!0;static makeCurrent(){ob(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IG();return t==null?null:bG(t)}resetBaseElement(){Vh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ub(document.cookie,e)}},Vh=null;function IG(){return Vh=Vh||document.head.querySelector("base"),Vh?Vh.getAttribute("href"):null}function bG(n){return new URL(n,document.baseURI).pathname}var TG=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),iO=(()=>{class n extends Oh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),rO=["alt","control","meta","shift"],CG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oO=(()=>{class n extends Oh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rO.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=CG[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rO.forEach(s=>{if(s!==i){let a=SG[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function wb(n,e,t){return UN(z({rootComponent:n,platformRef:t?.platformRef},DG(e)))}function DG(n){return{appProviders:[...PG,...n?.providers??[]],platformProviders:xG}}function AG(){Dy.makeCurrent()}function RG(){return new wi}function MG(){return J1(document),document}var xG=[{provide:Ti,useValue:Iy},{provide:CI,useValue:AG,multi:!0},{provide:cn,useFactory:MG}];var PG=[{provide:Hm,useValue:"root"},{provide:wi,useFactory:RG},{provide:Sy,useClass:iO,multi:!0,deps:[cn]},{provide:Sy,useClass:oO,multi:!0,deps:[cn]},vb,yb,mb,{provide:Vl,useExisting:vb},{provide:Nh,useClass:TG},[]];var Uh=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var kG="X-Request-URL",NG="text/plain",OG="application/json",lpe=`${OG}, ${NG}, */*`;var Ib=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ib||{}),Eb=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Uh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Bh=class n extends Eb{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ib.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var sO=new Y("");var upe=RegExp(`^${kG}:`,"m");var LG=new Y(""),FG="b",VG="h",UG="s",BG="st",jG="u",zG="rt",bb=new Y(""),$G=["GET","HEAD"];function qG(n,e){let T=j(bb),{isCacheActive:t}=T,r=rh(T,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!$G.includes(o)||!r.includeRequestsWithAuthHeaders&&HG(n)||r.filter?.(n)===!1)return e(n);let s=j(Gl);if(j(LG,{optional:!0}))throw new re(2803,!1);let c=n.url,d=GG(n,c),h=s.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[FG]:C,[zG]:k,[VG]:F,[UG]:N,[BG]:q,[jG]:ne}=h,J=C;switch(k){case"arraybuffer":J=new TextEncoder().encode(C).buffer;break;case"blob":J=new Blob([C]);break}let ue=new Uh(F);return me(new Bh({body:J,headers:ue,status:N,statusText:q,url:ne}))}return e(n).pipe(Zt(C=>{C instanceof Bh}))}function HG(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function aO(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function GG(n,e){let{params:t,method:r,responseType:i}=n,o=aO(t),s=n.serializeBody();s instanceof URLSearchParams?s=aO(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=WG(a);return c}function WG(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function cO(n){return[{provide:bb,useFactory:()=>(Ci("NgHttpTransferCache"),z({isCacheActive:!0},n))},{provide:sO,useValue:qG,multi:!0},{provide:Cs,multi:!0,useFactory:()=>{let e=j(Kn),t=j(bb);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var lO=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ay=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(Ay||{});function KG(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function uO(){return KG(Ay.EventReplay,BN())}function dO(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(Ay.HttpTransferCacheOptions);return wn([[],jN(),t.has(Ay.NoHttpTransferCache)||r?[]:cO({}),e])}var Pe="primary",Xh=Symbol("RouteTitle"),Ab=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qa(n){return new Ab(n)}function vO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Di(n[t],e[t]))return!1;return!0}function Di(n,e){let t=n?Rb(n):void 0,r=e?Rb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wO(n[i],e[i]))return!1;return!0}function Rb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function EO(n){return n.length>0?n[n.length-1]:null}function Ns(n){return $E(n)?n:Ts(n)?lt(Promise.resolve(n)):me(n)}var JG={exact:bO,subset:TO},IO={exact:ZG,subset:XG,ignored:()=>!0};function hO(n,e,t){return JG[t.paths](n.root,e.root,t.matrixParams)&&IO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function ZG(n,e){return Di(n,e)}function bO(n,e,t){if(!Wa(n.segments,e.segments)||!xy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!bO(n.children[r],e.children[r],t))return!1;return!0}function XG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wO(n[t],e[t]))}function TO(n,e,t){return CO(n,e,e.segments,t)}function CO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wa(i,t)||e.hasChildren()||!xy(i,t,r))}else if(n.segments.length===t.length){if(!Wa(n.segments,t)||!xy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!TO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Wa(n.segments,i)||!xy(n.segments,i,r)||!n.children[Pe]?!1:CO(n.children[Pe],e,o,r)}}function xy(n,e,t){return e.every((r,i)=>IO[t](n[i].parameters,r.parameters))}var Ri=class{root;queryParams;fragment;_queryParamMap;constructor(e=new nt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return n8.serialize(this)}},nt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Py(this)}},Ms=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qa(this.parameters),this._parameterMap}toString(){return DO(this)}};function e8(n,e){return Wa(n,e)&&n.every((t,r)=>Di(t.parameters,e[r].parameters))}function Wa(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function t8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var Ya=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new xs,providedIn:"root"})}return n})(),xs=class{parse(e){let t=new xb(e);return new Ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jh(e.root,!0)}`,r=o8(e.queryParams),i=typeof e.fragment=="string"?`#${r8(e.fragment)}`:"";return`${t}${r}${i}`}},n8=new xs;function Py(n){return n.segments.map(e=>DO(e)).join("/")}function jh(n,e){if(!n.hasChildren())return Py(n);if(e){let t=n.children[Pe]?jh(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Pe&&r.push(`${i}:${jh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=t8(n,(r,i)=>i===Pe?[jh(n.children[Pe],!1)]:[`${i}:${jh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${Py(n)}/${t[0]}`:`${Py(n)}/(${t.join("//")})`}}function SO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ry(n){return SO(n).replace(/%3B/gi,";")}function r8(n){return encodeURI(n)}function Mb(n){return SO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ky(n){return decodeURIComponent(n)}function fO(n){return ky(n.replace(/\+/g,"%20"))}function DO(n){return`${Mb(n.path)}${i8(n.parameters)}`}function i8(n){return Object.entries(n).map(([e,t])=>`;${Mb(e)}=${Mb(t)}`).join("")}function o8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ry(t)}=${Ry(i)}`).join("&"):`${Ry(t)}=${Ry(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var s8=/^[^\/()?;#]+/;function Tb(n){let e=n.match(s8);return e?e[0]:""}var a8=/^[^\/()?;=#]+/;function c8(n){let e=n.match(a8);return e?e[0]:""}var l8=/^[^=?&#]+/;function u8(n){let e=n.match(l8);return e?e[0]:""}var d8=/^[^&#]+/;function h8(n){let e=n.match(d8);return e?e[0]:""}var xb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new nt(e,t)),r}parseSegment(){let e=Tb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Ms(ky(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=c8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Tb(this.remaining);i&&(r=i,this.capture(r))}e[ky(t)]=ky(r)}parseQueryParam(e){let t=u8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=h8(this.remaining);s&&(r=s,this.capture(r))}let i=fO(t),o=fO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Pe]:new nt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function AO(n){return n.segments.length>0?new nt([],{[Pe]:n}):n}function RO(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=RO(i);if(r===Pe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new nt(n.segments,e);return f8(t)}function f8(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new nt(n.segments.concat(e.segments),e.children)}return n}function Ps(n){return n instanceof Ri}function MO(n,e,t=null,r=null){let i=xO(n);return PO(i,e,t,r)}function xO(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let a=new nt(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=AO(r);return e??i}function PO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Cb(i,i,i,t,r);let o=p8(e);if(o.toRoot())return Cb(i,i,new nt([],{}),t,r);let s=g8(o,i,n),a=s.processChildren?$h(s.segmentGroup,s.index,o.commands):NO(s.segmentGroup,s.index,o.commands);return Cb(i,s.segmentGroup,a,t,r)}function Oy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hh(n){return typeof n=="object"&&n!=null&&n.outlets}function Cb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let s;n===e?s=t:s=kO(n,e,t);let a=AO(RO(s));return new Ri(a,o,i)}function kO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=kO(o,e,t)}),new nt(n.segments,r)}var Ly=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oy(r[0]))throw new re(4003,!1);let i=r.find(Hh);if(i&&i!==EO(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function p8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ly(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ly(t,e,r)}var nu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function g8(n,e,t){if(n.isAbsolute)return new nu(e,!0,0);if(!t)return new nu(e,!1,NaN);if(t.parent===null)return new nu(t,!0,0);let r=Oy(n.commands[0])?0:1,i=t.segments.length-1+r;return m8(t,i,n.numberOfDoubleDots)}function m8(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new nu(r,!1,i-o)}function y8(n){return Hh(n[0])?n[0].outlets:{[Pe]:n}}function NO(n,e,t){if(n??=new nt([],{}),n.segments.length===0&&n.hasChildren())return $h(n,e,t);let r=_8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new nt(n.segments.slice(0,r.pathIndex),{});return o.children[Pe]=new nt(n.segments.slice(r.pathIndex),n.children),$h(o,0,i)}else return r.match&&i.length===0?new nt(n.segments,{}):r.match&&!n.hasChildren()?Pb(n,e,t):r.match?$h(n,0,i):Pb(n,e,t)}function $h(n,e,t){if(t.length===0)return new nt(n.segments,{});{let r=y8(t),i={};if(Object.keys(r).some(o=>o!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let o=$h(n.children[Pe],e,t);return new nt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new nt(n.segments,i)}}function _8(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Hh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!gO(c,d,s))return o;r+=2}else{if(!gO(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Hh(o)){let c=v8(o.outlets);return new nt(r,c)}if(i===0&&Oy(t[0])){let c=n.segments[e];r.push(new Ms(c.path,pO(t[0]))),i++;continue}let s=Hh(o)?o.outlets[Pe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Oy(a)?(r.push(new Ms(s,pO(a))),i+=2):(r.push(new Ms(s,{})),i++)}return new nt(r,{})}function v8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Pb(new nt([],{}),0,r))}),e}function pO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gO(n,e,t){return n==t.path&&Di(e,t.parameters)}var Ny="imperative",nn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nn||{}),hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ks=class extends hr{type=nn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends hr{urlAfterRedirects;type=nn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jn||{}),iu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(iu||{}),Ai=class extends hr{reason;code;type=nn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mi=class extends hr{reason;code;type=nn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ou=class extends hr{error;target;type=nn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gh=class extends hr{urlAfterRedirects;state;type=nn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends hr{urlAfterRedirects;state;type=nn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends hr{urlAfterRedirects;state;shouldActivate;type=nn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uy=class extends hr{urlAfterRedirects;state;type=nn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends hr{urlAfterRedirects;state;type=nn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class{route;type=nn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zy=class{route;type=nn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$y=class{snapshot;type=nn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qy=class{snapshot;type=nn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=nn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{snapshot;type=nn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},su=class{routerEvent;position;anchor;type=nn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wh=class{},au=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function w8(n,e){return n.providers&&!n._injector&&(n._injector=Yl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||Pe}function E8(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function ef(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ef(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ja(this.rootInjector)}},Ja=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(Pn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ky=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Nb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nb(e,this._root).map(t=>t.value)}};function kb(n,e){if(n===e.value)return e;for(let t of e.children){let r=kb(n,t);if(r)return r}return null}function Nb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Nb(n,t);if(r.length)return r.unshift(e),r}return[]}var dr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function tu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kh=class extends Ky{snapshot;constructor(e,t){super(e),this.snapshot=t,zb(this,e)}toString(){return this.snapshot.toString()}};function OO(n){let e=I8(n),t=new Ot([new Ms("",{})]),r=new Ot({}),i=new Ot({}),o=new Ot({}),s=new Ot(""),a=new In(t,r,o,s,i,Pe,n,e.root);return a.snapshot=e.root,new Kh(new dr(a,[]),e)}function I8(n){let e={},t={},r={},i="",o=new Ka([],e,r,i,t,Pe,n,null,{});return new Qh("",new dr(o,[]))}var In=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(d=>d[Xh]))??me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>Qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>Qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&FO(i)&&(r.resolve[Xh]=i.title),r}var Ka=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xh]}constructor(e,t,r,i,o,s,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qh=class extends Ky{url;constructor(e,t){super(t),this.url=e,zb(this,t)}toString(){return LO(this._root)}};function zb(n,e){e.value._routerState=n,e.children.forEach(t=>zb(n,t))}function LO(n){let e=n.children.length>0?` { ${n.children.map(LO).join(", ")} } `:"";return`${n.value}${e}`}function Sb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Di(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Di(e.params,t.params)||n.paramsSubject.next(t.params),YG(e.url,t.url)||n.urlSubject.next(t.url),Di(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ob(n,e){let t=Di(n.params,e.params)&&e8(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ob(n.parent,e.parent))}function FO(n){return typeof n.title=="string"||n.title===null}var VO=new Y(""),tf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=z1(void 0);parentContexts=j(Ja);location=j(Ql);changeDetector=j(Ss);inputBinder=j(nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Lb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[lr]})}return n})(),Lb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===In?this.route:e===Ja?this.childContexts:e===VO?this.outletData:this.parent.get(e,t)}},nf=new Y(""),$b=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Pa([r.queryParams,r.params,r.data]).pipe(zn(([o,s,a],c)=>(a=z(z(z({},o),s),a),c===0?me(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=zN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Rt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Mt(0,"router-outlet")},dependencies:[tf],encapsulation:2})}return n})();function Hb(n){let e=n.children&&n.children.map(Hb),t=e?ae(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=qb),t}function b8(n,e,t){let r=Yh(n,e._root,t?t._root:void 0);return new Kh(r,e)}function Yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=T8(n,e,t);return new dr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Yh(n,a)),s}}let r=C8(e.value),i=e.children.map(o=>Yh(n,o));return new dr(r,i)}}function T8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yh(n,r,i);return Yh(n,r)})}function C8(n){return new In(new Ot(n.url),new Ot(n.params),new Ot(n.queryParams),new Ot(n.fragment),new Ot(n.data),n.outlet,n.component,n)}var cu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},UO="ngNavigationCancelingError";function Yy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ps(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BO(!1,Jn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[UO]=!0,t.cancellationCode=e,t}function S8(n){return jO(n)&&Ps(n.url)}function jO(n){return!!n&&n[UO]}var D8=(n,e,t,r)=>Ie(i=>(new Fb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Fb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=tu(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=tu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=tu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=tu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Gy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Sb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Sb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Jy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ru=class{component;route;constructor(e,t){this.component=e,this.route=t}};function A8(n,e,t){let r=n._root,i=e?e._root:null;return zh(r,i,t,[r.value])}function R8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!PP(n)?n:e.get(n):r}function zh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=tu(e);return n.children.forEach(s=>{M8(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qh(a,t.getContext(s),i)),i}function M8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=x8(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Jy(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zh(n,e,a?a.children:null,r,i):zh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ru(a.outlet.component,s))}else s&&qh(e,a,i),i.canActivateChecks.push(new Jy(r)),o.component?zh(n,null,a?a.children:null,r,i):zh(n,null,t,r,i);return i}function x8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wa(n.url,e.url)||!Di(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ob(n,e)||!Di(n.queryParams,e.queryParams);case"paramsChange":default:return!Ob(n,e)}}function qh(n,e,t){let r=tu(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?qh(s,e.children.getContext(o),t):qh(s,null,t):qh(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ru(e.outlet.component,i)):t.canDeactivateChecks.push(new ru(null,i)):t.canDeactivateChecks.push(new ru(null,i))}function rf(n){return typeof n=="function"}function P8(n){return typeof n=="boolean"}function k8(n){return n&&rf(n.canLoad)}function N8(n){return n&&rf(n.canActivate)}function O8(n){return n&&rf(n.canActivateChild)}function L8(n){return n&&rf(n.canDeactivate)}function F8(n){return n&&rf(n.canMatch)}function zO(n){return n instanceof ro||n?.name==="EmptyError"}var My=Symbol("INITIAL_VALUE");function lu(){return zn(n=>Pa(n.map(e=>e.pipe(vn(1),Wg(My)))).pipe(Ie(e=>{for(let t of e)if(t!==!0){if(t===My)return My;if(t===!1||V8(t))return t}return!0}),jn(e=>e!==My),vn(1)))}function V8(n){return Ps(n)||n instanceof cu}function U8(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?me(ae(z({},t),{guardsResult:!0})):B8(s,r,i,n).pipe(Lt(a=>a&&P8(a)?j8(r,o,n,e):me(a)),Ie(a=>ae(z({},t),{guardsResult:a})))})}function B8(n,e,t,r){return lt(n).pipe(Lt(i=>G8(i.component,i.route,t,e,r)),oo(i=>i!==!0,!0))}function j8(n,e,t,r){return lt(e).pipe(ps(i=>Il($8(i.route.parent,r),z8(i.route,r),H8(n,i.path,t),q8(n,i.route,t))),oo(i=>i!==!0,!0))}function z8(n,e){return n!==null&&e&&e(new Hy(n)),me(!0)}function $8(n,e){return n!==null&&e&&e(new $y(n)),me(!0)}function q8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(o=>qg(()=>{let s=ef(e)??t,a=uu(o,s),c=N8(a)?a.canActivate(e,n):cr(s,()=>a(e,n));return Ns(c).pipe(oo())}));return me(i).pipe(lu())}function H8(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>R8(s)).filter(s=>s!==null).map(s=>qg(()=>{let a=s.guards.map(c=>{let d=ef(s.node)??t,h=uu(c,d),g=O8(h)?h.canActivateChild(r,n):cr(d,()=>h(r,n));return Ns(g).pipe(oo())});return me(a).pipe(lu())}));return me(o).pipe(lu())}function G8(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return me(!0);let s=o.map(a=>{let c=ef(e)??i,d=uu(a,c),h=L8(d)?d.canDeactivate(n,e,t,r):cr(c,()=>d(n,e,t,r));return Ns(h).pipe(oo())});return me(s).pipe(lu())}function W8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return me(!0);let o=i.map(s=>{let a=uu(s,n),c=k8(a)?a.canLoad(e,t):cr(n,()=>a(e,t));return Ns(c)});return me(o).pipe(lu(),$O(r))}function $O(n){return Cg(Zt(e=>{if(typeof e!="boolean")throw Yy(n,e)}),Ie(e=>e===!0))}function K8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return me(!0);let o=i.map(s=>{let a=uu(s,n),c=F8(a)?a.canMatch(e,t):cr(n,()=>a(e,t));return Ns(c)});return me(o).pipe(lu(),$O(r))}var Jh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Zh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function eu(n){return wl(new Jh(n))}function Q8(n){return wl(new re(4e3,!1))}function Y8(n){return wl(BO(!1,Jn.GuardRejected))}var Vb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[Pe])return Q8(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:h,url:g,outlet:T,params:C,data:k,title:F}=i,N=cr(o,()=>a({params:C,data:k,queryParams:c,fragment:d,routeConfig:h,url:g,outlet:T,title:F}));if(N instanceof Ri)throw new Zh(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Zh(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ri(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new nt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ub={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J8(n,e,t,r,i){let o=qO(n,e,t);return o.matched?(r=w8(e,r),K8(r,e,t,i).pipe(Ie(s=>s===!0?o:z({},Ub)))):me(o)}function qO(n,e,t){if(e.path==="**")return Z8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},Ub):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vO)(t,n,e);if(!i)return z({},Ub);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?z(z({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Z8(n){return{matched:!0,parameters:n.length>0?EO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mO(n,e,t,r){return t.length>0&&tW(n,t,r)?{segmentGroup:new nt(e,eW(r,new nt(t,n.children))),slicedSegments:[]}:t.length===0&&nW(n,t,r)?{segmentGroup:new nt(n.segments,X8(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:t}}function X8(n,e,t,r){let i={};for(let o of t)if(Xy(n,e,o)&&!r[Jr(o)]){let s=new nt([],{});i[Jr(o)]=s}return z(z({},r),i)}function eW(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&Jr(r)!==Pe){let i=new nt([],{});t[Jr(r)]=i}return t}function tW(n,e,t){return t.some(r=>Xy(n,e,r)&&Jr(r)!==Pe)}function nW(n,e,t){return t.some(r=>Xy(n,e,r))}function Xy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rW(n,e,t){return e.length===0&&!n.children[t]}var Bb=class{};function iW(n,e,t,r,i,o,s="emptyOnly"){return new jb(n,e,t,r,i,s,o).recognize()}var oW=31,jb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Vb(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=mO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:t,rootSnapshot:r})=>{let i=new dr(r,t),o=new Qh("",i),s=MO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ka([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,t).pipe(Ie(r=>({children:r,rootSnapshot:t})),io(r=>{if(r instanceof Zh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof dr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return lt(o).pipe(ps(s=>{let a=r.children[s],c=E8(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Gg((s,a)=>(s.push(...a),s)),gs(null),HE(),Lt(s=>{if(s===null)return eu(r);let a=HO(s);return sW(a),me(a)}))}processSegment(e,t,r,i,o,s,a){return lt(t).pipe(ps(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(io(d=>{if(d instanceof Jh)return me(null);throw d}))),oo(c=>!!c),io(c=>{if(zO(c))return rW(r,i,o)?me(new Bb):eu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Jr(r)!==s&&(s===Pe||!Xy(i,o,r))?eu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):eu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:T}=qO(t,i,o);if(!c)return eu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oW&&(this.allowRedirects=!1));let C=new Ka(o,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,yO(i),Jr(i),i.component??i._loadedComponent??null,i,_O(i)),k=Qy(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(k.params),C.data=Object.freeze(k.data);let F=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,C,e);return this.applyRedirects.lineralizeSegments(i,F).pipe(Lt(N=>this.processSegment(e,r,t,N.concat(T),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=J8(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(zn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zn(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:T,remainingSegments:C}=c,k=new Ka(T,g,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,yO(r),Jr(r),r.component??r._loadedComponent??null,r,_O(r)),F=Qy(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(F.params),k.data=Object.freeze(F.data);let{segmentGroup:N,slicedSegments:q}=mO(t,T,C,d);if(q.length===0&&N.hasChildren())return this.processChildren(h,d,N,k).pipe(Ie(J=>new dr(k,J)));if(d.length===0&&q.length===0)return me(new dr(k,[]));let ne=Jr(r)===o;return this.processSegment(h,d,N,q,ne?Pe:o,!0,k).pipe(Ie(J=>new dr(k,J instanceof dr?[J]:[])))}))):eu(t)))}getChildConfig(e,t,r){return t.children?me({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?me({routes:t._loadedRoutes,injector:t._loadedInjector}):W8(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(Zt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Y8(t))):me({routes:[],injector:e})}};function sW(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function aW(n){let e=n.value.routeConfig;return e&&e.path===""}function HO(n){let e=[],t=new Set;for(let r of n){if(!aW(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=HO(r.children);e.push(new dr(r.value,i))}return e.filter(r=>!t.has(r))}function yO(n){return n.data||{}}function _O(n){return n.resolve||{}}function cW(n,e,t,r,i,o){return Lt(s=>iW(n,e,t,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>ae(z({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function lW(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return me(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of GO(c))s.add(d);let a=0;return lt(s).pipe(ps(c=>o.has(c)?uW(c,r,n,e):(c.data=Qy(c,c.parent,n).resolve,me(void 0))),Zt(()=>a++),bl(1),Lt(c=>a===s.size?me(t):Un))})}function GO(n){let e=n.children.map(t=>GO(t)).flat();return[n,...e]}function uW(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!FO(i)&&(o[Xh]=i.title),dW(o,n,e,r).pipe(Ie(s=>(n._resolvedData=s,n.data=Qy(n,n.parent,t).resolve,null)))}function dW(n,e,t,r){let i=Rb(n);if(i.length===0)return me({});let o={};return lt(i).pipe(Lt(s=>hW(n[s],e,t,r).pipe(oo(),Zt(a=>{if(a instanceof cu)throw Yy(new xs,a);o[s]=a}))),bl(1),Ie(()=>o),io(s=>zO(s)?Un:wl(s)))}function hW(n,e,t,r){let i=ef(e)??r,o=uu(n,i),s=o.resolve?o.resolve(e,t):cr(i,()=>o(e,t));return Ns(s)}function Db(n){return zn(e=>{let t=n(e);return t?lt(t).pipe(Ie(()=>e)):me(e)})}var Gb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[Xh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(WO),providedIn:"root"})}return n})(),WO=(()=>{class n extends Gb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(lO))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Za=new Y("",{providedIn:"root",factory:()=>({})}),Xa=new Y(""),e_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(ON);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ns(t.loadComponent()).pipe(Ie(QO),Zt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),dh(()=>{this.componentLoaders.delete(t)})),i=new vl(r,()=>new St).pipe(_l());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=KO(r,this.compiler,t,this.onLoadEndListener).pipe(dh(()=>{this.childrenLoaders.delete(r)})),s=new vl(o,()=>new St).pipe(_l());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KO(n,e,t,r){return Ns(n.loadChildren()).pipe(Ie(QO),Lt(i=>i instanceof JI||Array.isArray(i)?me(i):lt(e.compileModuleAsync(i))),Ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Xa,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hb),injector:o}}))}function fW(n){return n&&typeof n=="object"&&"default"in n}function QO(n){return fW(n)?n.default:n}var t_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(pW),providedIn:"root"})}return n})(),pW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wb=new Y(""),Kb=new Y("");function YO(n,e,t){let r=n.get(Kb),i=n.get(cn);return n.get(Fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),gW(n))),{onViewTransitionCreated:c}=r;return c&&cr(n,()=>c({transition:a,from:e,to:t})),s})}function gW(n){return new Promise(e=>{ey({read:()=>setTimeout(e)},{injector:n})})}var Qb=new Y(""),n_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new St;transitionAbortSubject=new St;configLoader=j(e_);environmentInjector=j(Pn);destroyRef=j(ql);urlSerializer=j(Ya);rootContexts=j(Ja);location=j(As);inputBindingEnabled=j(nf,{optional:!0})!==null;titleStrategy=j(Gb);options=j(Za,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(t_);createViewTransition=j(Wb,{optional:!0});navigationErrorHandler=j(Qb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>me(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new jy(i)),r=i=>this.events.next(new zy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Ot(null),this.transitions.pipe(jn(r=>r!==null),zn(r=>{let i=!1,o=!1;return me(r).pipe(zn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),Un;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ae(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let d="";return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.rawUrl),d,iu.IgnoredSameUrlNavigation)),s.resolve(!1),Un}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return me(s).pipe(zn(d=>(this.events.next(new ks(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Un:Promise.resolve(d))),cW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Zt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=ae(z({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Gh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:T,extras:C}=s,k=new ks(d,this.urlSerializer.serialize(h),g,T);this.events.next(k);let F=OO(this.rootComponentType).snapshot;return this.currentTransition=r=ae(z({},s),{targetSnapshot:F,urlAfterRedirects:h,extras:ae(z({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,me(r)}else{let d="";return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),d,iu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Un}}),Zt(s=>{let a=new Fy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ie(s=>(this.currentTransition=r=ae(z({},s),{guards:A8(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),U8(this.environmentInjector,s=>this.events.next(s)),Zt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Yy(this.urlSerializer,s.guardsResult);let a=new Vy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),jn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Jn.GuardRejected),!1)),Db(s=>{if(s.guards.canActivateChecks.length!==0)return me(s).pipe(Zt(a=>{let c=new Uy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),zn(a=>{let c=!1;return me(a).pipe(lW(this.paramsInheritanceStrategy,this.environmentInjector),Zt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Jn.NoDataFromResolver)}}))}),Zt(a=>{let c=new By(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Db(s=>{let a=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Zt(h=>{c.component=h}),Ie(()=>{})));for(let h of c.children)d.push(...a(h));return d};return Pa(a(s.targetSnapshot.root)).pipe(gs(null),vn(1))}),Db(()=>this.afterPreactivation()),zn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?lt(c).pipe(Ie(()=>r)):me(r)}),Ie(s=>{let a=b8(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ae(z({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Zt(()=>{this.events.next(new Wh)}),D8(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),vn(1),Zt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Tl(this.transitionAbortSubject.pipe(Zt(s=>{throw s}))),dh(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),io(s=>{if(this.destroyed)return r.resolve(!1),Un;if(o=!0,jO(s))this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),S8(s)?this.events.next(new au(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ou(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=cr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof cu){let{message:d,cancellationCode:h}=Yy(this.urlSerializer,c);this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new au(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Un}))}))}cancelNavigationTransition(t,r,i){let o=new Ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mW(n){return n!==Ny}var JO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(yW),providedIn:"root"})}return n})(),Zy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},yW=(()=>{class n extends Zy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZO=(()=>{class n{urlSerializer=j(Ya);options=j(Za,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(As);urlHandlingStrategy=j(t_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ri;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ri?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=OO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(_W),providedIn:"root"})}return n})(),_W=(()=>{class n extends ZO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ks?this.updateStateMemento():t instanceof Mi?this.commitTransition(r):t instanceof Gh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ai&&(t.code===Jn.GuardRejected||t.code===Jn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ou?this.restoreHistory(r,!0):t instanceof br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=z(z({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function r_(n,e){n.events.pipe(jn(t=>t instanceof br||t instanceof Ai||t instanceof ou||t instanceof Mi),Ie(t=>t instanceof br||t instanceof Mi?0:(t instanceof Ai?t.code===Jn.Redirect||t.code===Jn.SupersededByNewNavigation:!1)?2:1),jn(t=>t!==2),vn(1)).subscribe(()=>{e()})}var vW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(XI);stateManager=j(ZO);options=j(Za,{optional:!0})||{};pendingTasks=j(po);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(n_);urlSerializer=j(Ya);location=j(As);urlHandlingStrategy=j(t_);_events=new St;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(JO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Xa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(nf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Nt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ai&&r.code!==Jn.Redirect&&r.code!==Jn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof br)this.navigated=!0;else if(r instanceof au){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mW(i.source)},s);this.scheduleNavigation(a,Ny,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ny,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let T=i?i.snapshot:this.routerState.snapshot.root;g=xO(T)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return PO(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ps(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ny,null,r)}navigate(t,r={skipLocationChange:!1}){return EW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},vW):r===!1?i=z({},wW):i=r,Ps(t))return hO(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hO(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((g,T)=>{a=g,c=T});let h=this.pendingTasks.add();return r_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function IW(n){return!(n instanceof Wh)&&!(n instanceof au)}var Os=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new St;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof br&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ps(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:_k(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ps(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ie(wt),ie(In),II("tabindex"),ie(go),ie(ur),ie(Yr))};static \u0275dir=mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ye("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Rh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ds],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ds],replaceUrl:[2,"replaceUrl","replaceUrl",Ds],routerLink:"routerLink"},features:[lr]})}return n})();var of=class{};var XO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(jn(t=>t instanceof br),ps(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Yl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return lt(i).pipe(El())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=me(null);let o=i.pipe(Lt(s=>s===null?me(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return lt([o,s]).pipe(El())}else return o})}static \u0275fac=function(r){return new(r||n)(de(wt),de(Pn),de(of),de(e_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eL=new Y(""),SW=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof br?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Mi&&t.code===iu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof su&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new su(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){nN()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function Jb(n,...e){return wn([{provide:Xa,multi:!0,useValue:n},[],{provide:In,useFactory:tL,deps:[wt]},{provide:Cs,multi:!0,useFactory:nL},e.map(t=>t.\u0275providers)])}function tL(n){return n.routerState.root}function sf(n,e){return{\u0275kind:n,\u0275providers:e}}function nL(){let n=j(At);return e=>{let t=n.get(Kn);if(e!==t.components[0])return;let r=n.get(wt),i=n.get(rL);n.get(Zb)===1&&r.initialNavigation(),n.get(sL,null,Oe.Optional)?.setUpPreloading(),n.get(eL,null,Oe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rL=new Y("",{factory:()=>new St}),Zb=new Y("",{providedIn:"root",factory:()=>1});function iL(){let n=[{provide:Zb,useValue:0},tb(()=>{let e=j(At);return e.get(sb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(wt),o=e.get(rL);r_(i,()=>{r(!0)}),e.get(n_).afterPreactivation=()=>(r(!0),o.closed?me(void 0):o),i.initialNavigation()}))})];return sf(2,n)}function oL(){let n=[tb(()=>{j(wt).setUpLocationChangeListener()}),{provide:Zb,useValue:2}];return sf(3,n)}var sL=new Y("");function aL(n){return sf(0,[{provide:sL,useExisting:XO},{provide:of,useExisting:n}])}function cL(){return sf(8,[$b,{provide:nf,useExisting:$b}])}function lL(n){Ci("NgRouterViewTransitions");let e=[{provide:Wb,useValue:YO},{provide:Kb,useValue:z({skipNextTransition:!!n?.skipInitialTransition},n)}];return sf(9,e)}var uL=[As,{provide:Ya,useClass:xs},wt,Ja,{provide:In,useFactory:tL,deps:[wt]},e_,[]],ec=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[uL,[],{provide:Xa,multi:!0,useValue:t},[],r?.errorHandler?{provide:Qb,useValue:r.errorHandler}:[],{provide:Za,useValue:r||{}},r?.useHash?AW():RW(),DW(),r?.preloadingStrategy?aL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?MW(r):[],r?.bindToComponentInputs?cL().\u0275providers:[],r?.enableViewTransitions?lL().\u0275providers:[],xW()]}}static forChild(t){return{ngModule:n,providers:[{provide:Xa,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function DW(){return{provide:eL,useFactory:()=>{let n=j(JN),e=j(Fe),t=j(Za),r=j(n_),i=j(Ya);return t.scrollOffset&&n.setOffset(t.scrollOffset),new SW(i,r,n,e,t)}}}function AW(){return{provide:Yr,useClass:lb}}function RW(){return{provide:Yr,useClass:vy}}function MW(n){return[n.initialNavigation==="disabled"?oL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?iL().\u0275providers:[]]}var Yb=new Y("");function xW(){return[{provide:Yb,useFactory:nL},{provide:Cs,multi:!0,useExisting:Yb}]}var hL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},fL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,T=(a&15)<<2|d>>6,C=d&63;c||(C=64,s||(T=64)),r.push(t[h],t[g],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||d==null||g==null)throw new eT;let T=o<<2|a>>4;if(r.push(T),d!==64){let C=a<<4&240|d>>2;if(r.push(C),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},eT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kW=function(n){let e=hL(n);return fL.encodeByteArray(e,!0)},af=function(n){return kW(n).replace(/\./g,"")},nT=function(n){try{return fL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OW=()=>NW().__FIREBASE_DEFAULTS__,LW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&nT(n[1]);return e&&JSON.parse(e)},o_=()=>{try{return OW()||LW()||FW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rT=n=>{var e,t;return(t=(e=o_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},s_=n=>{let e=rT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iT=()=>{var n;return(n=o_())===null||n===void 0?void 0:n.config},oT=n=>{var e;return(e=o_())===null||e===void 0?void 0:e[`_${n}`]};var i_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function a_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[af(JSON.stringify(t)),af(JSON.stringify(s)),""].join(".")}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function VW(){var n;let e=(n=o_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _L(){let n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vL(){return!VW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sT(){try{return typeof indexedDB=="object"}catch{return!1}}function wL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var UW="FirebaseError",Nn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=UW,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}},mo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?BW(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Nn(i,a,r)}};function BW(n,e){return n.replace(jW,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jW=/\{\$([^}]+)}/g;function EL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nc(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(dL(o)&&dL(s)){if(!nc(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function dL(n){return n!==null&&typeof n=="object"}function du(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function fu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function IL(n,e){let t=new tT(n,e);return t.subscribe.bind(t)}var tT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zW(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Xb),i.error===void 0&&(i.error=Xb),i.complete===void 0&&(i.complete=Xb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zW(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xb(){}var Uge=4*60*60*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var Zn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rc="[DEFAULT]";var aT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new i_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qW(e))try{this.getOrInitializeService({instanceIdentifier:rc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rc){return this.instances.has(e)}getOptions(e=rc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$W(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rc){return this.component?this.component.multipleInstances?e:rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $W(n){return n===rc?void 0:n}function qW(n){return n.instantiationMode==="EAGER"}var c_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var HW=[],ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ze||{}),GW={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},WW=ze.INFO,KW={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},QW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=KW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ls=class{constructor(e){this.name=e,this._logLevel=WW,this._logHandler=QW,this._userLogHandler=null,HW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var YW=(n,e)=>e.some(t=>n instanceof t),bL,TL;function JW(){return bL||(bL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZW(){return TL||(TL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CL=new WeakMap,lT=new WeakMap,SL=new WeakMap,cT=new WeakMap,dT=new WeakMap;function XW(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(xi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&CL.set(t,n)}).catch(()=>{}),dT.set(e,n),e}function e7(n){if(lT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});lT.set(n,e)}var uT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DL(n){uT=n(uT)}function t7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(l_(this),e,...t);return SL.set(r,e.sort?e.sort():[e]),xi(r)}:ZW().includes(n)?function(...e){return n.apply(l_(this),e),xi(CL.get(this))}:function(...e){return xi(n.apply(l_(this),e))}}function n7(n){return typeof n=="function"?t7(n):(n instanceof IDBTransaction&&e7(n),YW(n,JW())?new Proxy(n,uT):n)}function xi(n){if(n instanceof IDBRequest)return XW(n);if(cT.has(n))return cT.get(n);let e=n7(n);return e!==n&&(cT.set(n,e),dT.set(e,n)),e}var l_=n=>dT.get(n);function u_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=xi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(xi(s.result),c.oldVersion,c.newVersion,xi(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var r7=["get","getKey","getAll","getAllKeys","count"],i7=["put","add","delete","clear"],hT=new Map;function AL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hT.get(e))return hT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=i7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r7.includes(t)))return;let o=function(s,...a){return S(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return hT.set(e,o),o}DL(n=>ae(z({},n),{get:(e,t,r)=>AL(e,t)||n.get(e,t,r),has:(e,t)=>!!AL(e,t)||n.has(e,t)}));var pT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(o7(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function o7(n){let e=n.getComponent();return e?.type==="VERSION"}var gT="@firebase/app",RL="0.10.13";var yo=new Ls("@firebase/app"),s7="@firebase/app-compat",a7="@firebase/analytics-compat",c7="@firebase/analytics",l7="@firebase/app-check-compat",u7="@firebase/app-check",d7="@firebase/auth",h7="@firebase/auth-compat",f7="@firebase/database",p7="@firebase/data-connect",g7="@firebase/database-compat",m7="@firebase/functions",y7="@firebase/functions-compat",_7="@firebase/installations",v7="@firebase/installations-compat",w7="@firebase/messaging",E7="@firebase/messaging-compat",I7="@firebase/performance",b7="@firebase/performance-compat",T7="@firebase/remote-config",C7="@firebase/remote-config-compat",S7="@firebase/storage",D7="@firebase/storage-compat",A7="@firebase/firestore",R7="@firebase/vertexai-preview",M7="@firebase/firestore-compat",x7="firebase",P7="10.14.1";var mT="[DEFAULT]",k7={[gT]:"fire-core",[s7]:"fire-core-compat",[c7]:"fire-analytics",[a7]:"fire-analytics-compat",[u7]:"fire-app-check",[l7]:"fire-app-check-compat",[d7]:"fire-auth",[h7]:"fire-auth-compat",[f7]:"fire-rtdb",[p7]:"fire-data-connect",[g7]:"fire-rtdb-compat",[m7]:"fire-fn",[y7]:"fire-fn-compat",[_7]:"fire-iid",[v7]:"fire-iid-compat",[w7]:"fire-fcm",[E7]:"fire-fcm-compat",[I7]:"fire-perf",[b7]:"fire-perf-compat",[T7]:"fire-rc",[C7]:"fire-rc-compat",[S7]:"fire-gcs",[D7]:"fire-gcs-compat",[A7]:"fire-fst",[M7]:"fire-fst-compat",[R7]:"fire-vertex","fire-js":"fire-js",[x7]:"fire-js-all"};var cf=new Map,N7=new Map,yT=new Map;function ML(n,e){try{n.container.addComponent(e)}catch(t){yo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pi(n){let e=n.name;if(yT.has(e))return yo.debug(`There were multiple attempts to register component ${e}.`),!1;yT.set(e,n);for(let t of cf.values())ML(t,n);for(let t of N7.values())ML(t,n);return!0}function ic(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tr(n){return n.settings!==void 0}var O7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new mo("app","Firebase",O7);var _T=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}};var ki=P7;function ET(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(t||(t=iT()),!t)throw Fs.create("no-options");let o=cf.get(i);if(o){if(nc(t,o.options)&&nc(r,o.config))return o;throw Fs.create("duplicate-app",{appName:i})}let s=new c_(i);for(let c of yT.values())s.addComponent(c);let a=new _T(t,r,s);return cf.set(i,a),a}function Vs(n=mT){let e=cf.get(n);if(!e&&n===mT&&iT())return ET();if(!e)throw Fs.create("no-app",{appName:n});return e}function d_(){return Array.from(cf.values())}function Et(n,e,t){var r;let i=(r=k7[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yo.warn(a.join(" "));return}Pi(new Zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var L7="firebase-heartbeat-database",F7=1,lf="firebase-heartbeat-store",fT=null;function NL(){return fT||(fT=u_(L7,F7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fs.create("idb-open",{originalErrorMessage:n.message})})),fT}function V7(n){return S(this,null,function*(){try{let t=(yield NL()).transaction(lf),r=yield t.objectStore(lf).get(OL(n));return yield t.done,r}catch(e){if(e instanceof Nn)yo.warn(e.message);else{let t=Fs.create("idb-get",{originalErrorMessage:e?.message});yo.warn(t.message)}}})}function xL(n,e){return S(this,null,function*(){try{let r=(yield NL()).transaction(lf,"readwrite");yield r.objectStore(lf).put(e,OL(n)),yield r.done}catch(t){if(t instanceof Nn)yo.warn(t.message);else{let r=Fs.create("idb-set",{originalErrorMessage:t?.message});yo.warn(r.message)}}})}function OL(n){return`${n.name}!${n.options.appId}`}var U7=1024,B7=30*24*60*60*1e3,vT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=PL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=B7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yo.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=PL(),{heartbeatsToSend:r,unsentEntries:i}=j7(this._heartbeatsCache.heartbeats),o=af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return yo.warn(t),""}})}};function PL(){return new Date().toISOString().substring(0,10)}function j7(n,e=U7){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kL(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return sT()?wL().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield V7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kL(n){return af(JSON.stringify({version:2,heartbeats:n})).length}function z7(n){Pi(new Zn("platform-logger",e=>new pT(e),"PRIVATE")),Pi(new Zn("heartbeat",e=>new vT(e),"PRIVATE")),Et(gT,RL,n),Et(gT,RL,"esm2017"),Et("fire-js","")}z7("");var $7="firebase",q7="10.14.1";Et($7,q7,"app");function bn(n){return typeof n=="function"}function LL(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var h_=LL(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ni=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(bn(r))try{r()}catch(o){e=o instanceof h_?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FL(o)}catch(s){e=e??[],s instanceof h_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new h_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FL(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uf(t,e)}remove(e){let{_finalizers:t}=this;t&&uf(t,e),e instanceof n&&e._removeParent(this)}};Ni.EMPTY=(()=>{let n=new Ni;return n.closed=!0,n})();var _me=Ni.EMPTY;function f_(n){return n instanceof Ni||n&&"closed"in n&&bn(n.remove)&&bn(n.add)&&bn(n.unsubscribe)}function FL(n){bn(n)?n():n.unsubscribe()}var Zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pu={setTimeout(n,e,...t){let{delegate:r}=pu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function VL(n){pu.setTimeout(()=>{let{onUnhandledError:e}=Zr;if(e)e(n);else throw n})}function IT(){}var UL=bT("C",void 0,void 0);function BL(n){return bT("E",void 0,n)}function jL(n){return bT("N",n,void 0)}function bT(n,e,t){return{kind:n,value:e,error:t}}var oc=null;function zL(n){if(Zr.useDeprecatedSynchronousErrorHandling){let e=!oc;if(e&&(oc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oc;if(oc=null,t)throw r}}else n()}function $L(n){Zr.useDeprecatedSynchronousErrorHandling&&oc&&(oc.errorThrown=!0,oc.error=n)}var sc=class extends Ni{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,f_(e)&&e.add(this)):this.destination=W7}static create(e,t,r){return new gu(e,t,r)}next(e){this.isStopped?CT(jL(e),this):this._next(e)}error(e){this.isStopped?CT(BL(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?CT(UL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},H7=Function.prototype.bind;function TT(n,e){return H7.call(n,e)}var ST=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){p_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){p_(r)}else p_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){p_(t)}}},gu=class extends sc{constructor(e,t,r){super();let i;if(bn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Zr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&TT(e.next,o),error:e.error&&TT(e.error,o),complete:e.complete&&TT(e.complete,o)}):i=e}this.destination=new ST(i)}};function p_(n){Zr.useDeprecatedSynchronousErrorHandling?$L(n):VL(n)}function G7(n){throw n}function CT(n,e){let{onStoppedNotification:t}=Zr;t&&pu.setTimeout(()=>t(n,e))}var W7={closed:!0,next:IT,error:G7,complete:IT};var qL=typeof Symbol=="function"&&Symbol.observable||"@@observable";function g_(n){return n}function HL(n){return n.length===0?g_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var m_=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Q7(t)?t:new gu(t,r,i);return zL(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GL(r),new r((i,o)=>{let s=new gu({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[qL](){return this}pipe(...t){return HL(t)(this)}toPromise(t){return t=GL(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function GL(n){var e;return(e=n??Zr.Promise)!==null&&e!==void 0?e:Promise}function K7(n){return n&&bn(n.next)&&bn(n.error)&&bn(n.complete)}function Q7(n){return n&&n instanceof sc||K7(n)&&f_(n)}function Y7(n){return bn(n?.lift)}function mu(n){return e=>{if(Y7(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function y_(n,e,t,r,i){return new DT(n,e,t,r,i)}var DT=class extends sc{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var AT={now(){return(AT.delegate||Date).now()},delegate:void 0};var __=class extends Ni{constructor(e,t){super()}schedule(e,t=0){return this}};var df={setInterval(n,e,...t){let{delegate:r}=df;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=df;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var yu=class extends __{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return df.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&df.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,uf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _u=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_u.now=AT.now;var vu=class extends _u{constructor(e,t=_u.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var RT=new vu(yu);var v_=class extends yu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var w_=class extends vu{};var MT=new w_(v_);function E_(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function I_(n,e=0){return mu((t,r)=>{t.subscribe(y_(r,i=>E_(r,n,()=>r.next(i),e),()=>E_(r,n,()=>r.complete(),e),i=>E_(r,n,()=>r.error(i),e)))})}function b_(n,e=0){return mu((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xT(n,e,t){let r=bn(n)||e||t?{next:n,error:e,complete:t}:n;return r?mu((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(y_(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):g_}var _o=new ws("ANGULARFIRE2_VERSION");function Eu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var cc=(n,e)=>{let t=e?[e]:d_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Us=class{constructor(){return cc(J7)}},J7="app-check";function wu(){}var T_=class{zone;delegate;constructor(e,t=MT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},PT=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wu,{},wu,wu)),t.pipe(xT({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new T_(Zone.current)),this.insideAngular=t.run(()=>new T_(Zone.current,RT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(de(Fe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C_(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Z7(n){return C_().ngZone.runOutsideAngular(()=>n())}function ac(n){return C_().ngZone.run(()=>n())}function X7(n){return eK(C_())(n)}function eK(n){return function(t){return t=t.lift(new PT(n.ngZone)),t.pipe(b_(n.outsideAngular),I_(n.insideAngular))}}var tK=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ac(()=>n.apply(void 0,r))},ot=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=ac(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wu,{},wu,wu))),r[o]=tK(r[o],t));let i=Z7(()=>n.apply(this,r));if(!e)if(i instanceof m_){let o=C_();return i.pipe(b_(o.outsideAngular),I_(o.insideAngular))}else return ac(()=>i);return i instanceof m_?i.pipe(X7):i instanceof Promise?ac(()=>new Promise((o,s)=>i.then(a=>ac(()=>o(a)),a=>ac(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ac(()=>i)};var Xr=class{constructor(e){return e}},vo=class{constructor(){return d_()}};function nK(n){return n&&n.length===1?n[0]:new Xr(Vs())}var kT=new Y("angularfire2._apps"),rK={provide:Xr,useFactory:nK,deps:[[new en,kT]]},iK={provide:vo,deps:[[new en,kT]]};function oK(n){return(e,t)=>{let r=t.get(Ti);Et("angularfire",_o.full,"core"),Et("angularfire",_o.full,"app"),Et("angular",NN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function WL(n,...e){return wn([rK,iK,{provide:kT,useFactory:oK(n),multi:!0,deps:[Fe,At,Bs,...e]}])}var KL=ot(ET,!0);var QL=()=>{};var YL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},sK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},JL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,T=(a&15)<<2|d>>6,C=d&63;c||(C=64,s||(T=64)),r.push(t[h],t[g],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||d==null||g==null)throw new OT;let T=o<<2|a>>4;if(r.push(T),d!==64){let C=a<<4&240|d>>2;if(r.push(C),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},OT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},aK=function(n){let e=YL(n);return JL.encodeByteArray(e,!0)},FT=function(n){return aK(n).replace(/\./g,"")},S_=function(n){try{return JL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cK=()=>ZL().__FIREBASE_DEFAULTS__,lK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&S_(n[1]);return e&&JSON.parse(e)},XL=()=>{try{return QL()||cK()||lK()||uK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var eF=n=>XL()?.[`_${n}`];function hf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function dK(){let n=XL()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oF(){return!dK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function sF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var hK="FirebaseError",Cr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wo.prototype.create)}},wo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?fK(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Cr(i,a,r)}};function fK(n,e){return n.replace(pK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pK=/\{\$([^}]+)}/g;function UT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aF(n,e){let t=new LT(n,e);return t.subscribe.bind(t)}var LT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=NT),i.error===void 0&&(i.error=NT),i.complete===void 0&&(i.complete=NT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function NT(){}var u_e=4*60*60*1e3;function js(n){return n&&n._delegate?n._delegate:n}var ei=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var mK=[],Ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ue||{}),yK={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},_K=Ue.INFO,vK={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},wK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=vK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zs=class{constructor(e){this.name=e,this._logLevel=_K,this._logHandler=wK,this._userLogHandler=null,mK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var jT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EK(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function EK(n){return n.getComponent()?.type==="VERSION"}var zT="@firebase/app",cF="0.14.4";var Io=new zs("@firebase/app"),IK="@firebase/app-compat",bK="@firebase/analytics-compat",TK="@firebase/analytics",CK="@firebase/app-check-compat",SK="@firebase/app-check",DK="@firebase/auth",AK="@firebase/auth-compat",RK="@firebase/database",MK="@firebase/data-connect",xK="@firebase/database-compat",PK="@firebase/functions",kK="@firebase/functions-compat",NK="@firebase/installations",OK="@firebase/installations-compat",LK="@firebase/messaging",FK="@firebase/messaging-compat",VK="@firebase/performance",UK="@firebase/performance-compat",BK="@firebase/remote-config",jK="@firebase/remote-config-compat",zK="@firebase/storage",$K="@firebase/storage-compat",qK="@firebase/firestore",HK="@firebase/ai",GK="@firebase/firestore-compat",WK="firebase",KK="12.4.0";var QK={[zT]:"fire-core",[IK]:"fire-core-compat",[TK]:"fire-analytics",[bK]:"fire-analytics-compat",[SK]:"fire-app-check",[CK]:"fire-app-check-compat",[DK]:"fire-auth",[AK]:"fire-auth-compat",[RK]:"fire-rtdb",[MK]:"fire-data-connect",[xK]:"fire-rtdb-compat",[PK]:"fire-fn",[kK]:"fire-fn-compat",[NK]:"fire-iid",[OK]:"fire-iid-compat",[LK]:"fire-fcm",[FK]:"fire-fcm-compat",[VK]:"fire-perf",[UK]:"fire-perf-compat",[BK]:"fire-rc",[jK]:"fire-rc-compat",[zK]:"fire-gcs",[$K]:"fire-gcs-compat",[qK]:"fire-fst",[GK]:"fire-fst-compat",[HK]:"fire-vertex","fire-js":"fire-js",[WK]:"fire-js-all"};var YK=new Map,JK=new Map,lF=new Map;function uF(n,e){try{n.container.addComponent(e)}catch(t){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $s(n){let e=n.name;if(lF.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;lF.set(e,n);for(let t of YK.values())uF(t,n);for(let t of JK.values())uF(t,n);return!0}function bo(n){return n==null?!1:n.settings!==void 0}var ZK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},HT=new wo("app","Firebase",ZK);var Iu=KK;function Eo(n,e,t){let r=QK[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(s.join(" "));return}$s(new ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var XK="firebase-heartbeat-database",eQ=1,ff="firebase-heartbeat-store",BT=null;function gF(){return BT||(BT=u_(XK,eQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(n=>{throw HT.create("idb-open",{originalErrorMessage:n.message})})),BT}function tQ(n){return S(this,null,function*(){try{let t=(yield gF()).transaction(ff),r=yield t.objectStore(ff).get(mF(n));return yield t.done,r}catch(e){if(e instanceof Cr)Io.warn(e.message);else{let t=HT.create("idb-get",{originalErrorMessage:e?.message});Io.warn(t.message)}}})}function dF(n,e){return S(this,null,function*(){try{let r=(yield gF()).transaction(ff,"readwrite");yield r.objectStore(ff).put(e,mF(n)),yield r.done}catch(t){if(t instanceof Cr)Io.warn(t.message);else{let r=HT.create("idb-set",{originalErrorMessage:t?.message});Io.warn(r.message)}}})}function mF(n){return`${n.name}!${n.options.appId}`}var nQ=1024,rQ=30,$T=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rQ){let i=oQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Io.warn(e)}})}getHeartbeatsHeader(){return S(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=hF(),{heartbeatsToSend:t,unsentEntries:r}=iQ(this._heartbeatsCache.heartbeats),i=FT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Io.warn(e),""}})}};function hF(){return new Date().toISOString().substring(0,10)}function iQ(n,e=nQ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),fF(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return VT()?sF().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield tQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return dF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return dF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function fF(n){return FT(JSON.stringify({version:2,heartbeats:n})).length}function oQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function sQ(n){$s(new ei("platform-logger",e=>new jT(e),"PRIVATE")),$s(new ei("heartbeat",e=>new $T(e),"PRIVATE")),Eo(zT,cF,n),Eo(zT,cF,"esm2020"),Eo("fire-js","")}sQ("");function TF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CF=TF,SF=new wo("auth","Firebase",TF());var M_=new zs("@firebase/auth");function dQ(n,...e){M_.logLevel<=Ue.WARN&&M_.warn(`Auth (${Iu}): ${n}`,...e)}function A_(n,...e){M_.logLevel<=Ue.ERROR&&M_.error(`Auth (${Iu}): ${n}`,...e)}function yF(n,...e){throw rC(n,...e)}function nC(n,...e){return rC(n,...e)}function DF(n,e,t){let r=ae(z({},CF()),{[e]:t});return new wo("auth","Firebase",r).create(e,{appName:n.name})}function R_(n){return DF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SF.create(n,...e)}function rt(n,e,...t){if(!n)throw rC(e,...t)}function pf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw A_(e),new Error(e)}function x_(n,e){n||pf(e)}function hQ(){return _F()==="http:"||_F()==="https:"}function _F(){return typeof self<"u"&&self.location?.protocol||null}function fQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hQ()||rF()||"connection"in navigator)?navigator.onLine:!0}function pQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,x_(t>e,"Short delay should be less than long delay!"),this.isMobile=tF()||iF()}get(){return fQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gQ(n,e){x_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var P_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_Q=new dc(3e4,6e4);function AF(n,e){return n.tenantId&&!e.tenantId?ae(z({},e),{tenantId:n.tenantId}):e}function F_(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return RF(n,i,()=>S(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=UT(z({key:n.config.apiKey},h)).slice(1),T=yield n._getAdditionalHeaders();T["Content-Type"]="application/json",n.languageCode&&(T["X-Firebase-Locale"]=n.languageCode);let C=z({method:e,headers:T},d);return nF()||(C.referrerPolicy="no-referrer"),n.emulatorConfig&&hf(n.emulatorConfig.host)&&(C.credentials="include"),P_.fetch()(yield MF(n,n.config.apiHost,t,g),C)}))})}function RF(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=z(z({},mQ),e);try{let i=new KT(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw D_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw D_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw D_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw D_(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw DF(n,h,d);yF(n,h)}}catch(i){if(i instanceof Cr)throw i;yF(n,"network-request-failed",{message:String(i)})}})}function MF(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?gQ(n.config,i):`${n.config.apiScheme}://${i}`;return yQ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var KT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nC(this.auth,"network-request-failed")),_Q.get())})}};function D_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=nC(n,e,r);return i.customData._tokenResponse=t,i}function vQ(n,e){return S(this,null,function*(){return F_(n,"POST","/v1/accounts:delete",e)})}function k_(n,e){return S(this,null,function*(){return F_(n,"POST","/v1/accounts:lookup",e)})}function gf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xF(n,e=!1){return S(this,null,function*(){let t=js(n),r=yield t.getIdToken(e),i=PF(r);rt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:gf(GT(i.auth_time)),issuedAtTime:gf(GT(i.iat)),expirationTime:gf(GT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function GT(n){return Number(n)*1e3}function PF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return A_("JWT malformed, contained fewer than 3 sections"),null;try{let i=S_(t);return i?JSON.parse(i):(A_("Failed to decode base64 JWT payload"),null)}catch(i){return A_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vF(n){let e=PF(n);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function QT(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Cr&&wQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function wQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var YT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gf(this.lastLoginAt),this.creationTime=gf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function N_(n){return S(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield QT(n,k_(e,{idToken:t}));rt(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?NF(i.providerUserInfo):[],s=EQ(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function kF(n){return S(this,null,function*(){let e=js(n);yield N_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function EQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=rh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function IQ(n,e){return S(this,null,function*(){let t=yield RF(n,{},()=>S(null,null,function*(){let r=UT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield MF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&hf(n.emulatorConfig.host)&&(c.credentials="include"),P_.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function bQ(n,e){return S(this,null,function*(){return F_(n,"POST","/v2/accounts:revokeToken",AF(n,e))})}var mf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){rt(e.length!==0,"internal-error");let t=vF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield IQ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(rt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(rt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(rt(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return pf("not implemented")}};function qs(n,e){rt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var lc=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=rh(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield QT(this,this.stsTokenManager.getToken(this.auth,e));return rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return xF(this,e)}reload(){return kF(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>z({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ae(z({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield N_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(bo(this.auth.app))return Promise.reject(R_(this.auth));let e=yield this.getIdToken();return yield QT(this,vQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return ae(z({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>z({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:T,isAnonymous:C,providerData:k,stsTokenManager:F}=t;rt(g&&F,e,"internal-error");let N=mf.fromJSON(this.name,F);rt(typeof g=="string",e,"internal-error"),qs(r,e.name),qs(i,e.name),rt(typeof T=="boolean",e,"internal-error"),rt(typeof C=="boolean",e,"internal-error"),qs(o,e.name),qs(s,e.name),qs(a,e.name),qs(c,e.name),qs(d,e.name),qs(h,e.name);let q=new n({uid:g,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:C,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:d,lastLoginAt:h});return k&&Array.isArray(k)&&(q.providerData=k.map(ne=>z({},ne))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new mf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield N_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];rt(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?NF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new mf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,d),c})}};var wF=new Map;function uc(n){x_(n instanceof Function,"Expected a class definition");let e=wF.get(n);return e?(x_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wF.set(n,e),e)}var TQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),JT=TQ;function WT(n,e,t){return`firebase:${n}:${e}:${t}`}var O_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=WT(this.userKey,i.apiKey,o),this.fullPersistenceKey=WT("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield k_(this.auth,{idToken:e}).catch(()=>{});return t?lc._fromGetAccountInfoResponse(this.auth,t,e):null}return lc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(uc(JT),e,r);let i=(yield Promise.all(t.map(d=>S(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||uc(JT),s=WT(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(s);if(h){let g;if(typeof h=="string"){let T=yield k_(e,{idToken:h}).catch(()=>{});if(!T)break;g=yield lc._fromGetAccountInfoResponse(e,T,h)}else g=lc._fromJSON(e,h);d!==o&&(a=g),o=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(d=>S(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function EF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MQ(e))return"Blackberry";if(xQ(e))return"Webos";if(SQ(e))return"Safari";if((e.includes("chrome/")||DQ(e))&&!e.includes("edge/"))return"Chrome";if(RQ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function CQ(n=fr()){return/firefox\//i.test(n)}function SQ(n=fr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DQ(n=fr()){return/crios\//i.test(n)}function AQ(n=fr()){return/iemobile/i.test(n)}function RQ(n=fr()){return/android/i.test(n)}function MQ(n=fr()){return/blackberry/i.test(n)}function xQ(n=fr()){return/webos/i.test(n)}function OF(n,e=[]){let t;switch(n){case"Browser":t=EF(fr());break;case"Worker":t=`${EF(fr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Iu}/${r}`}var ZT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function PQ(t){return S(this,arguments,function*(n,e={}){return F_(n,"GET","/v2/passwordPolicy",AF(n,e))})}var kQ=6,XT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var eC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new ZT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uc(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield O_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield k_(this,{idToken:e}),r=yield lc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){if(bo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield N_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=pQ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(bo(this.app))return Promise.reject(R_(this));let t=e?js(e):null;return t&&rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return bo(this.app)?Promise.reject(R_(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bo(this.app)?Promise.reject(R_(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(uc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield PQ(this),t=new XT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bQ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&uc(e)||this._popupRedirectResolver;rt(t,this,"argument-error"),this.redirectPersistenceManager=yield O_.create(this,[uc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return S(this,null,function*(){if(bo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dQ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function NQ(n){return js(n)}var L_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aF(t=>this.observer=t)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var OQ={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LQ(n){OQ=n}function FQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function VQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(uc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function iC(n,e,t,r){return js(n).onAuthStateChanged(e,t,r)}var B_e=FQ("rcb"),j_e=new dc(3e4,6e4);var z_e=new dc(2e3,1e4);var $_e=10*60*1e3;var q_e=new dc(3e4,6e4);var H_e=new dc(5e3,15e3);var G_e=encodeURIComponent("fac");var IF="@firebase/auth",bF="1.11.0";var tC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function UQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BQ(n){$s(new ei("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;rt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OF(n)},d=new eC(r,i,o,c);return VQ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$s(new ei("auth-internal",e=>{let t=NQ(e.getProvider("auth").getImmediate());return(r=>new tC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Eo(IF,bF,UQ(n)),Eo(IF,bF,"esm2020")}var jQ=5*60,W_e=eF("authIdTokenMaxAge")||jQ;function zQ(){return document.getElementsByTagName("head")?.[0]??document}LQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=nC("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",zQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BQ("Browser");function LF(n){return new Le(function(e){var t=iC(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function XF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eV=XF,tV=new mo("auth","Firebase",XF());var $_=new Ls("@firebase/auth");function HQ(n,...e){$_.logLevel<=ze.WARN&&$_.warn(`Auth (${ki}): ${n}`,...e)}function U_(n,...e){$_.logLevel<=ze.ERROR&&$_.error(`Auth (${ki}): ${n}`,...e)}function Sr(n,...e){throw CC(n,...e)}function ti(n,...e){return CC(n,...e)}function TC(n,e,t){let r=Object.assign(Object.assign({},eV()),{[e]:t});return new mo("auth","Firebase",r).create(e,{appName:n.name})}function So(n){return TC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GQ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sr(n,"argument-error"),TC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function CC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tV.create(n,...e)}function _e(n,e,...t){if(!n)throw CC(e,...t)}function To(n){let e="INTERNAL ASSERTION FAILED: "+n;throw U_(e),new Error(e)}function Do(n,e){n||To(e)}function aC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WQ(){return FF()==="http:"||FF()==="https:"}function FF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function KQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WQ()||mL()||"connection"in navigator)?navigator.onLine:!0}function QQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var hc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Do(t>e,"Short delay should be less than long delay!"),this.isMobile=pL()||yL()}get(){return KQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function SC(n,e){Do(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var q_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var YQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var JQ=new hc(3e4,6e4);function Gs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ao(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return nV(n,i,()=>S(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=du(Object.assign({key:n.config.apiKey},h)).slice(1),T=yield n._getAdditionalHeaders();T["Content-Type"]="application/json",n.languageCode&&(T["X-Firebase-Locale"]=n.languageCode);let C=Object.assign({method:e,headers:T},d);return gL()||(C.referrerPolicy="no-referrer"),q_.fetch()(rV(n,n.config.apiHost,t,g),C)}))})}function nV(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},YQ),e);try{let i=new cC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw V_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw V_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw V_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw V_(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw TC(n,h,d);Sr(n,h)}}catch(i){if(i instanceof Nn)throw i;Sr(n,"network-request-failed",{message:String(i)})}})}function Tf(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){let d=yield Ao(n,e,t,r,i);return"mfaPendingCredential"in d&&Sr(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function rV(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?SC(n.config,i):`${n.config.apiScheme}://${i}`}function ZQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var cC=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),JQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function V_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ti(n,e,r);return i.customData._tokenResponse=t,i}function VF(n){return n!==void 0&&n.enterprise!==void 0}var lC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ZQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function XQ(n,e){return S(this,null,function*(){return Ao(n,"GET","/v2/recaptchaConfig",Gs(n,e))})}function eY(n,e){return S(this,null,function*(){return Ao(n,"POST","/v1/accounts:delete",e)})}function iV(n,e){return S(this,null,function*(){return Ao(n,"POST","/v1/accounts:lookup",e)})}function _f(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function DC(n,e=!1){return S(this,null,function*(){let t=yt(n),r=yield t.getIdToken(e),i=AC(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:_f(oC(i.auth_time)),issuedAtTime:_f(oC(i.iat)),expirationTime:_f(oC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function oC(n){return Number(n)*1e3}function AC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return U_("JWT malformed, contained fewer than 3 sections"),null;try{let i=nT(t);return i?JSON.parse(i):(U_("Failed to decode base64 JWT payload"),null)}catch(i){return U_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function UF(n){let e=AC(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Tu(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nn&&tY(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function tY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var uC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_f(this.lastLoginAt),this.creationTime=_f(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function H_(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Tu(n,iV(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?oV(o.providerUserInfo):[],a=nY(n.providerData,s),c=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!a?.length,h=c?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new wf(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function RC(n){return S(this,null,function*(){let e=yt(n);yield H_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function nY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oV(n){return n.map(e=>{var{providerId:t}=e,r=Ag(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function rY(n,e){return S(this,null,function*(){let t=yield nV(n,{},()=>S(null,null,function*(){let r=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=rV(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",q_.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function iY(n,e){return S(this,null,function*(){return Ao(n,"POST","/v2/accounts:revokeToken",Gs(n,e))})}var vf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=UF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield rY(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return To("not implemented")}};function Hs(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cu=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wf(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield Tu(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return DC(this,e)}reload(){return RC(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield H_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Tr(this.auth.app))return Promise.reject(So(this.auth));let e=yield this.getIdToken();return yield Tu(this,eY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(i=t.email)!==null&&i!==void 0?i:void 0,C=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,F=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ne=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:J,emailVerified:ue,isAnonymous:qe,providerData:fe,stsTokenManager:R}=t;_e(J&&R,e,"internal-error");let _=vf.fromJSON(this.name,R);_e(typeof J=="string",e,"internal-error"),Hs(g,e.name),Hs(T,e.name),_e(typeof ue=="boolean",e,"internal-error"),_e(typeof qe=="boolean",e,"internal-error"),Hs(C,e.name),Hs(k,e.name),Hs(F,e.name),Hs(N,e.name),Hs(q,e.name),Hs(ne,e.name);let I=new n({uid:J,auth:e,email:T,emailVerified:ue,displayName:g,isAnonymous:qe,photoURL:k,phoneNumber:C,tenantId:F,stsTokenManager:_,createdAt:q,lastLoginAt:ne});return fe&&Array.isArray(fe)&&(I.providerData=fe.map(A=>Object.assign({},A))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new vf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield H_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?oV(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new vf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,d),c})}};var BF=new Map;function Co(n){Do(n instanceof Function,"Expected a class definition");let e=BF.get(n);return e?(Do(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BF.set(n,e),e)}var oY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),dC=oY;function B_(n,e,t){return`firebase:${n}:${e}:${t}`}var G_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=B_(this.userKey,i.apiKey,o),this.fullPersistenceKey=B_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Cu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(Co(dC),e,r);let i=(yield Promise.all(t.map(d=>S(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||Co(dC),s=B_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(s);if(h){let g=Cu._fromJSON(e,h);d!==o&&(a=g),o=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(d=>S(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function jF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dV(e))return"Blackberry";if(hV(e))return"Webos";if(aV(e))return"Safari";if((e.includes("chrome/")||cV(e))&&!e.includes("edge/"))return"Chrome";if(uV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sV(n=ln()){return/firefox\//i.test(n)}function aV(n=ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cV(n=ln()){return/crios\//i.test(n)}function lV(n=ln()){return/iemobile/i.test(n)}function uV(n=ln()){return/android/i.test(n)}function dV(n=ln()){return/blackberry/i.test(n)}function hV(n=ln()){return/webos/i.test(n)}function MC(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sY(n=ln()){var e;return MC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aY(){return _L()&&document.documentMode===10}function fV(n=ln()){return MC(n)||uV(n)||hV(n)||dV(n)||/windows phone/i.test(n)||lV(n)}function pV(n,e=[]){let t;switch(n){case"Browser":t=jF(ln());break;case"Worker":t=`${jF(ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ki}/${r}`}var hC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function cY(t){return S(this,arguments,function*(n,e={}){return Ao(n,"GET","/v2/passwordPolicy",Gs(n,e))})}var lY=6,fC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:lY,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var pC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new hC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Co(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield G_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield iV(this,{idToken:e}),r=yield Cu._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Tr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield H_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=QQ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Tr(this.app))return Promise.reject(So(this));let t=e?yt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Tr(this.app)?Promise.reject(So(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tr(this.app)?Promise.reject(So(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Co(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield cY(this),t=new fC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield iY(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Co(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield G_.create(this,[Co(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&HQ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ws(n){return yt(n)}var W_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IL(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uY(n){nv=n}function gV(n){return nv.loadJS(n)}function dY(){return nv.recaptchaEnterpriseScript}function hY(){return nv.gapiScript}function mV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var fY="recaptcha-enterprise",pY="NO_RECAPTCHA",gC=class{constructor(e){this.type=fY,this.auth=Ws(e)}verify(e="verify",t=!1){return S(this,null,function*(){function r(o){return S(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>S(null,null,function*(){XQ(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new lC(c);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;VF(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(pY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&VF(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=dY();c.length!==0&&(c+=a),gV(c).then(()=>{i(a,o,s)}).catch(d=>{s(d)})}}).catch(a=>{s(a)})})})}};function zF(n,e,t,r=!1){return S(this,null,function*(){let i=new gC(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function mC(n,e,t,r){return S(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield zF(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>S(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield zF(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function xC(n,e){let t=ic(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(nc(o,e??{}))return i;Sr(i,"already-initialized")}return t.initialize({options:e})}function gY(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Co);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function PC(n,e,t){let r=Ws(n);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=yV(e),{host:s,port:a}=mY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||yY()}function yV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mY(n){let e=yV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:$F(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:$F(s)}}}function $F(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function yY(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Su=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,t){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}};function _Y(n,e){return S(this,null,function*(){return Ao(n,"POST","/v1/accounts:signUp",e)})}function vY(n,e){return S(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithPassword",Gs(n,e))})}function wY(n,e){return S(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))})}function EY(n,e){return S(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))})}var Ef=class n extends Su{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mC(e,t,"signInWithPassword",vY);case"emailLink":return wY(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mC(e,r,"signUpPassword",_Y);case"emailLink":return EY(e,{idToken:t,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function bu(n,e){return S(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithIdp",Gs(n,e))})}var IY="http://localhost",K_=class n extends Su{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Ag(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return bu(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,bu(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,bu(e,t)}buildRequest(){let e={requestUri:IY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=du(t)}return e}};function bY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TY(n){let e=hu(fu(n)).link,t=e?hu(fu(e)).deep_link_id:null,r=hu(fu(n)).deep_link_id;return(r?hu(fu(r)).link:null)||r||t||e||n}var Q_=class n{constructor(e){var t,r,i,o,s,a;let c=hu(fu(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=bY((i=c.mode)!==null&&i!==void 0?i:null);_e(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=TY(e);try{return new n(t)}catch{return null}}};var _V=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ef._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Q_.parseLink(r);return _e(i,"argument-error"),Ef._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),If=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Y_=class extends If{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var kC=(()=>{class n extends Y_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return K_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function CY(n,e){return S(this,null,function*(){return Tf(n,"POST","/v1/accounts:signUp",Gs(n,e))})}var Du=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return S(this,null,function*(){let o=yield Cu._fromIdTokenResponse(e,r,i),s=qF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return S(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function qF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var yC=class n extends Nn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function vV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yC._fromErrorAndOperation(n,o,e,r):o})}function SY(n,e,t=!1){return S(this,null,function*(){let r=yield Tu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Du._forOperation(n,"link",r)})}function DY(n,e,t=!1){return S(this,null,function*(){let{auth:r}=n;if(Tr(r.app))return Promise.reject(So(r));let i="reauthenticate";try{let o=yield Tu(n,vV(r,i,e,n),t);_e(o.idToken,r,"internal-error");let s=AC(o.idToken);_e(s,r,"internal-error");let{sub:a}=s;return _e(n.uid===a,r,"user-mismatch"),Du._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sr(r,"user-mismatch"),o}})}function wV(n,e,t=!1){return S(this,null,function*(){if(Tr(n.app))return Promise.reject(So(n));let r="signIn",i=yield vV(n,r,e),o=yield Du._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function NC(n,e){return S(this,null,function*(){return wV(Ws(n),e)})}function EV(n){return S(this,null,function*(){let e=Ws(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function OC(n,e,t){return S(this,null,function*(){if(Tr(n.app))return Promise.reject(So(n));let r=Ws(n),s=yield mC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&EV(n),c}),a=yield Du._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function LC(n,e,t){return Tr(n.app)?Promise.reject(So(n)):NC(yt(n),_V.credential(e,t)).catch(r=>S(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&EV(n),r}))}function AY(n,e){return S(this,null,function*(){return Ao(n,"POST","/v1/accounts:update",e)})}function FC(r,i){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=yt(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Tu(o,AY(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let d=o.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=o.displayName,d.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function VC(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function UC(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function BC(n){return yt(n).signOut()}var J_="__sak";var Z_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(J_,"1"),this.storage.removeItem(J_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RY=1e3,MY=10,xY=(()=>{class n extends Z_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);aY()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,MY):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},RY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return S(this,null,function*(){yield gi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return S(this,null,function*(){let r=yield gi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return S(this,null,function*(){yield gi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),IV=xY;var PY=(()=>{class n extends Z_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jC=PY;function kY(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var NY=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>S(this,null,function*(){return h(r.origin,s)})),d=yield kY(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var _C=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return S(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let d=zC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let T=g;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(T.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Oi(){return window}function OY(n){Oi().location.href=n}function bV(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}function LY(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function FY(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VY(){return bV()?self:null}var TV="firebaseLocalStorageDb",UY=1,X_="firebaseLocalStorage",CV="fbase_key",fc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function rv(n,e){return n.transaction([X_],e?"readwrite":"readonly").objectStore(X_)}function BY(){let n=indexedDB.deleteDatabase(TV);return new fc(n).toPromise()}function vC(){let n=indexedDB.open(TV,UY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(X_,{keyPath:CV})}catch(i){t(i)}}),n.addEventListener("success",()=>S(null,null,function*(){let r=n.result;r.objectStoreNames.contains(X_)?e(r):(r.close(),yield BY(),e(yield vC()))}))})}function HF(n,e,t){return S(this,null,function*(){let r=rv(n,!0).put({[CV]:e,value:t});return new fc(r).toPromise()})}function jY(n,e){return S(this,null,function*(){let t=rv(n,!1).get(e),r=yield new fc(t).toPromise();return r===void 0?null:r.value})}function GF(n,e){let t=rv(n,!0).delete(e);return new fc(t).toPromise()}var zY=800,$Y=3,qY=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield vC(),this.db)})}_withRetries(t){return S(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>$Y)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return bV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=NY._getInstance(VY()),this.receiver._subscribe("keyChanged",(t,r)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,r;if(this.activeServiceWorker=yield LY(),!this.activeServiceWorker)return;this.sender=new _C(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||FY()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield vC();return yield HF(t,J_,"1"),yield GF(t,J_),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>HF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let r=yield this._withRetries(i=>jY(i,t));return this.localCache[t]=r,r})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>GF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(o=>{let s=rv(o,!1).getAll();return new fc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),zY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SV=qY;var Lwe=mV("rcb"),Fwe=new hc(3e4,6e4);function DV(n,e){return e?Co(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var bf=class extends Su{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function HY(n){return wV(n.auth,new bf(n),n.bypassAuthState)}function GY(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),DY(t,new bf(n),n.bypassAuthState)}function WY(n){return S(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),SY(t,new bf(n),n.bypassAuthState)})}var ev=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HY;case"linkViaPopup":case"linkViaRedirect":return WY;case"reauthViaPopup":case"reauthViaRedirect":return GY;default:Sr(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var KY=new hc(2e3,1e4);function $C(n,e,t){return S(this,null,function*(){if(Tr(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));let r=Ws(n);GQ(n,e,If);let i=DV(r,t);return new QY(r,"signInViaPopup",e,i).executeNotNull()})}var QY=(()=>{class n extends ev{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return _e(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){Do(this.filter.length===1,"Popup operations only handle one event");let t=zC();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,KY.get())};t()}}n.currentPopupAction=null;return n})(),YY="pendingRedirect",j_=new Map,wC=class n extends ev{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return S(this,null,function*(){let e=j_.get(this.auth._key());if(!e){try{let r=(yield JY(this.resolver,this.auth))?yield gi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}j_.set(this.auth._key(),e)}return this.bypassAuthState||j_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return gi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function JY(n,e){return S(this,null,function*(){let t=eJ(e),r=XY(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ZY(n,e){j_.set(n._key(),e)}function XY(n){return Co(n._redirectPersistence)}function eJ(n){return B_(YY,n.config.apiKey,n.name)}function tJ(n,e,t=!1){return S(this,null,function*(){if(Tr(n.app))return Promise.reject(So(n));let r=Ws(n),i=DV(r,e),s=yield new wC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var nJ=10*60*1e3,EC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!AV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(WF(e))}saveEventToCache(e){this.cachedEventUids.add(WF(e)),this.lastProcessedEventTime=Date.now()}};function WF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AV(n);default:return!1}}function iJ(t){return S(this,arguments,function*(n,e={}){return Ao(n,"GET","/v1/projects",e)})}var oJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sJ=/^https?/;function aJ(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield iJ(n);for(let t of e)try{if(cJ(t))return}catch{}Sr(n,"unauthorized-domain")})}function cJ(n){let e=aC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!sJ.test(t))return!1;if(oJ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var lJ=new hc(3e4,6e4);function KF(){let n=Oi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uJ(n){return new Promise((e,t)=>{var r,i,o;function s(){KF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KF(),t(ti(n,"network-request-failed"))},timeout:lJ.get()})}if(!((i=(r=Oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Oi().gapi)===null||o===void 0)&&o.load)s();else{let a=mV("iframefcb");return Oi()[a]=()=>{gapi.load?s():t(ti(n,"network-request-failed"))},gV(`${hY()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw z_=null,e})}var z_=null;function dJ(n){return z_=z_||uJ(n),z_}var hJ=new hc(5e3,15e3),fJ="__/auth/iframe",pJ="emulator/auth/iframe",gJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yJ(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?SC(e,pJ):`https://${n.config.authDomain}/${fJ}`,r={apiKey:e.apiKey,appName:n.name,v:ki},i=mJ.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${du(r).slice(1)}`}function _J(n){return S(this,null,function*(){let e=yield dJ(n),t=Oi().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:yJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gJ,dontclear:!0},r=>new Promise((i,o)=>S(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ti(n,"network-request-failed"),a=Oi().setTimeout(()=>{o(s)},hJ.get());function c(){Oi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var vJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wJ=500,EJ=600,IJ="_blank",bJ="http://localhost",tv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function TJ(n,e,t,r=wJ,i=EJ){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},vJ),{width:r.toString(),height:i.toString(),top:o,left:s}),d=ln().toLowerCase();t&&(a=cV(d)?IJ:t),sV(d)&&(e=e||bJ,c.scrollbars="yes");let h=Object.entries(c).reduce((T,[C,k])=>`${T}${C}=${k},`,"");if(sY(d)&&a!=="_self")return CJ(e||"",a),new tv(null);let g=window.open(e||"",a,h);_e(g,n,"popup-blocked");try{g.focus()}catch{}return new tv(g)}function CJ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var SJ="__/auth/handler",DJ="emulator/auth/handler",AJ=encodeURIComponent("fac");function QF(n,e,t,r,i,o){return S(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ki,eventId:i};if(e instanceof If){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",EL(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof Y_){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${AJ}=${encodeURIComponent(c)}`:"";return`${RJ(n)}?${du(a).slice(1)}${d}`})}function RJ({config:n}){return n.emulator?SC(n,DJ):`https://${n.authDomain}/${SJ}`}var sC="webStorageSupport",IC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jC,this._completeRedirectFn=tJ,this._overrideRedirectResult=ZY}_openPopup(e,t,r,i){return S(this,null,function*(){var o;Do((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield QF(e,t,r,aC(),i);return TJ(e,s,zC())})}_openRedirect(e,t,r,i){return S(this,null,function*(){yield this._originValidation(e);let o=yield QF(e,t,r,aC(),i);return OY(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Do(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return S(this,null,function*(){let t=yield _J(e),r=new EC(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sC,{type:sC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[sC];s!==void 0&&t(!!s),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fV()||aV()||MC()}},RV=IC;var YF="@firebase/auth",JF="1.7.9";var bC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function MJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xJ(n){Pi(new Zn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;_e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pV(n)},d=new pC(r,i,o,c);return gY(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new Zn("auth-internal",e=>{let t=Ws(e.getProvider("auth").getImmediate());return(r=>new bC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Et(YF,JF,MJ(n)),Et(YF,JF,"esm2017")}var PJ=5*60,kJ=oT("authIdTokenMaxAge")||PJ,ZF=null,NJ=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>kJ)return;let i=t?.token;ZF!==i&&(ZF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qC(n=Vs()){let e=ic(n,"auth");if(e.isInitialized())return e.getImmediate();let t=xC(n,{popupRedirectResolver:RV,persistence:[SV,IV,jC]}),r=oT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=NJ(o.toString());UC(t,s,()=>s(t.currentUser)),VC(t,a=>s(a))}}let i=rT("auth");return i&&PC(t,`http://${i}`),t}function OJ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uY({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ti("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",OJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xJ("Browser");var MV="auth",pc=class{constructor(e){return e}},gc=class{constructor(){return cc(MV)}};var HC=new Y("angularfire2.auth-instances");function bZ(n,e){let t=Eu(MV,n,e);return t&&new pc(t)}function TZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pc(r)}}var CZ={provide:gc,deps:[[new en,HC]]},SZ={provide:pc,useFactory:bZ,deps:[[new en,HC],Xr]};function xV(n,...e){return Et("angularfire",_o.full,"auth"),wn([SZ,CZ,{provide:HC,useFactory:TZ(n),multi:!0,deps:[Fe,At,Bs,vo,[new en,Us],...e]}])}var PV=ot(LF,!0);var kV=ot(OC,!0);var NV=ot(qC,!0);var OV=ot(LC,!0);var LV=ot($C,!0);var FV=ot(BC,!0);var VV=ot(FC,!0);var UV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BV={};var Ro,GC;(function(){var n;function e(R,_){function I(){}I.prototype=_.prototype,R.F=_.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(A,D,P){for(var E=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)E[_t-2]=arguments[_t];return _.prototype[D].apply(A,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,_,I){I||(I=0);let A=Array(16);if(typeof _=="string")for(var D=0;D<16;++D)A[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;D<16;++D)A[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=R.g[0],I=R.g[1],D=R.g[2];let P=R.g[3],E;E=_+(P^I&(D^P))+A[0]+3614090360&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[1]+3905402710&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[2]+606105819&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[5]+1200080426&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[6]+2821735955&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[9]+2336552879&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[10]+4294925233&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[13]+4254626195&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[14]+2792965006&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^P&(I^D))+A[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[6]+3225465664&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[11]+643717713&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[10]+38016083&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[15]+3634488961&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[14]+3275163606&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[3]+4107603335&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[2]+4243563512&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[7]+1735328473&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^P)+A[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[8]+2272392833&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[11]+1839030562&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[4]+1272893353&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[7]+4139469664&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[0]+3936430074&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[3]+3572445317&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[12]+3873151461&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[15]+530742520&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~P))+A[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[7]+1126891415&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[14]+2878612391&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[3]+2399980690&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[10]+4293915773&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[15]+4264355552&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[6]+2734768916&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[11]+3174756917&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[2]+718787259&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+P&4294967295}r.prototype.v=function(R,_){_===void 0&&(_=R.length);let I=_-this.blockSize,A=this.C,D=this.h,P=0;for(;P<_;){if(D==0)for(;P<=I;)i(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<_;)if(A[D++]=R.charCodeAt(P++),D==this.blockSize){i(this,A),D=0;break}}else for(;P<_;)if(A[D++]=R[P++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=_},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;_=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=_&255,_/=256;for(this.v(R),R=Array(16),_=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)R[_++]=this.g[I]>>>A&255;return R};function o(R,_){var I=a;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=_(R)}function s(R,_){this.h=_;let I=[],A=!0;for(let D=R.length-1;D>=0;D--){let P=R[D]|0;A&&P==_||(I[D]=P,A=!1)}this.g=I}var a={};function c(R){return-128<=R&&R<128?o(R,function(_){return new s([_|0],_<0?-1:0)}):new s([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return N(d(-R));let _=[],I=1;for(let A=0;R>=I;A++)_[A]=R/I|0,I*=4294967296;return new s(_,0)}function h(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return N(h(R.substring(1),_));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),A=g;for(let P=0;P<R.length;P+=8){var D=Math.min(8,R.length-P);let E=parseInt(R.substring(P,P+D),_);D<8?(D=d(Math.pow(_,D)),A=A.j(D).add(d(E))):(A=A.j(I),A=A.add(d(E)))}return A}var g=c(0),T=c(1),C=c(16777216);n=s.prototype,n.m=function(){if(F(this))return-N(this).m();let R=0,_=1;for(let I=0;I<this.g.length;I++){let A=this.i(I);R+=(A>=0?A:4294967296+A)*_,_*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(F(this))return"-"+N(this).toString(R);let _=d(Math.pow(R,6));var I=this;let A="";for(;;){let D=ue(I,_).g;I=q(I,D.j(_));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=D,k(I))return P+A;for(;P.length<6;)P="0"+P;A=P+A}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function F(R){return R.h==-1}n.l=function(R){return R=q(this,R),F(R)?-1:k(R)?0:1};function N(R){let _=R.g.length,I=[];for(let A=0;A<_;A++)I[A]=~R.g[A];return new s(I,~R.h).add(T)}n.abs=function(){return F(this)?N(this):this},n.add=function(R){let _=Math.max(this.g.length,R.g.length),I=[],A=0;for(let D=0;D<=_;D++){let P=A+(this.i(D)&65535)+(R.i(D)&65535),E=(P>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);A=E>>>16,P&=65535,E&=65535,I[D]=E<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function q(R,_){return R.add(N(_))}n.j=function(R){if(k(this)||k(R))return g;if(F(this))return F(R)?N(this).j(N(R)):N(N(this).j(R));if(F(R))return N(this.j(N(R)));if(this.l(C)<0&&R.l(C)<0)return d(this.m()*R.m());let _=this.g.length+R.g.length,I=[];for(var A=0;A<2*_;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let D=0;D<R.g.length;D++){let P=this.i(A)>>>16,E=this.i(A)&65535,_t=R.i(D)>>>16,Ln=R.i(D)&65535;I[2*A+2*D]+=E*Ln,ne(I,2*A+2*D),I[2*A+2*D+1]+=P*Ln,ne(I,2*A+2*D+1),I[2*A+2*D+1]+=E*_t,ne(I,2*A+2*D+1),I[2*A+2*D+2]+=P*_t,ne(I,2*A+2*D+2)}for(R=0;R<_;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=_;R<2*_;R++)I[R]=0;return new s(I,0)};function ne(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function J(R,_){this.g=R,this.h=_}function ue(R,_){if(k(_))throw Error("division by zero");if(k(R))return new J(g,g);if(F(R))return _=ue(N(R),_),new J(N(_.g),N(_.h));if(F(_))return _=ue(R,N(_)),new J(N(_.g),_.h);if(R.g.length>30){if(F(R)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var I=T,A=_;A.l(R)<=0;)I=qe(I),A=qe(A);var D=fe(I,1),P=fe(A,1);for(A=fe(A,2),I=fe(I,2);!k(A);){var E=P.add(A);E.l(R)<=0&&(D=D.add(I),P=E),A=fe(A,1),I=fe(I,1)}return _=q(R,D.j(_)),new J(D,_)}for(D=g;R.l(_)>=0;){for(I=Math.max(1,Math.floor(R.m()/_.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),P=d(I),E=P.j(_);F(E)||E.l(R)>0;)I-=A,P=d(I),E=P.j(_);k(P)&&(P=T),D=D.add(P),R=q(R,E)}return new J(D,R)}n.B=function(R){return ue(this,R).h},n.and=function(R){let _=Math.max(this.g.length,R.g.length),I=[];for(let A=0;A<_;A++)I[A]=this.i(A)&R.i(A);return new s(I,this.h&R.h)},n.or=function(R){let _=Math.max(this.g.length,R.g.length),I=[];for(let A=0;A<_;A++)I[A]=this.i(A)|R.i(A);return new s(I,this.h|R.h)},n.xor=function(R){let _=Math.max(this.g.length,R.g.length),I=[];for(let A=0;A<_;A++)I[A]=this.i(A)^R.i(A);return new s(I,this.h^R.h)};function qe(R){let _=R.g.length+1,I=[];for(let A=0;A<_;A++)I[A]=R.i(A)<<1|R.i(A-1)>>>31;return new s(I,R.h)}function fe(R,_){let I=_>>5;_%=32;let A=R.g.length-I,D=[];for(let P=0;P<A;P++)D[P]=_>0?R.i(P+I)>>>_|R.i(P+I+1)<<32-_:R.i(P+I);return new s(D,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,GC=BV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Ro=BV.Integer=s}).apply(typeof UV<"u"?UV:typeof self<"u"?self:typeof window<"u"?window:{});var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mo={};var WC,AZ,Au,KC,Cf,ov,QC,YC,JC;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof iv=="object"&&iv];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(u,p){if(p)e:{var y=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var O=u[x];if(!(O in y))break e;y=y[O]}u=u[u.length-1],x=y[u],p=p(x),p!=x&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var y=[],x;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&y.push([x,p[x]]);return y}});var o=o||{},s=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,y){return u.call.apply(u.bind,arguments)}function d(u,p,y){return d=c,d.apply(null,arguments)}function h(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var x=y.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function g(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(x,O,U){for(var Q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)Q[ve-2]=arguments[ve];return p.prototype[O].apply(x,Q)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function C(u){let p=u.length;if(p>0){let y=Array(p);for(let x=0;x<p;x++)y[x]=u[x];return y}return[]}function k(u,p){for(let x=1;x<arguments.length;x++){let O=arguments[x];var y=typeof O;if(y=y!="object"?y:O?Array.isArray(O)?"array":y:"null",y=="array"||y=="object"&&typeof O.length=="number"){y=u.length||0;let U=O.length||0;u.length=y+U;for(let Q=0;Q<U;Q++)u[y+Q]=O[Q]}else u.push(O)}}class F{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function N(u){s.setTimeout(()=>{throw u},0)}function q(){var u=R;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,y){let x=J.get();x.set(p,y),this.h?this.h.next=x:this.g=x,this.h=x}}var J=new F(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,fe=!1,R=new ne,_=()=>{let u=Promise.resolve(void 0);qe=()=>{u.then(I)}};function I(){for(var u;u=q();){try{u.h.call(u.g)}catch(y){N(y)}var p=J;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}fe=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let y=()=>{};s.addEventListener("test",y,p),s.removeEventListener("test",y,p)}catch{}return u}();function E(u){return/^[\s\xa0]*$/.test(u)}function _t(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}g(_t,D),_t.prototype.init=function(u,p){let y=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&_t.Z.h.call(this)},_t.prototype.h=function(){_t.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ln="closure_listenable_"+(Math.random()*1e6|0),fE=0;function da(u,p,y,x,O){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!x,this.ha=O,this.key=++fE,this.da=this.fa=!1}function ci(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qo(u,p,y){for(let x in u)p.call(y,u[x],x,u)}function Bp(u,p){for(let y in u)p.call(void 0,u[y],y,u)}function jp(u){let p={};for(let y in u)p[y]=u[y];return p}let Rr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(u,p){let y,x;for(let O=1;O<arguments.length;O++){x=arguments[O];for(y in x)u[y]=x[y];for(let U=0;U<Rr.length;U++)y=Rr[U],Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])}}function jc(u){this.src=u,this.g={},this.h=0}jc.prototype.add=function(u,p,y,x,O){let U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);let Q=Nd(u,p,x,O);return Q>-1?(p=u[Q],y||(p.fa=!1)):(p=new da(p,this.src,U,!!x,O),p.fa=y,u.push(p)),p};function Ki(u,p){let y=p.type;if(y in u.g){var x=u.g[y],O=Array.prototype.indexOf.call(x,p,void 0),U;(U=O>=0)&&Array.prototype.splice.call(x,O,1),U&&(ci(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Nd(u,p,y,x){for(let O=0;O<u.length;++O){let U=u[O];if(!U.da&&U.listener==p&&U.capture==!!y&&U.ha==x)return O}return-1}var Qi="closure_lm_"+(Math.random()*1e6|0),Od={};function zp(u,p,y,x,O){if(x&&x.once)return $c(u,p,y,x,O);if(Array.isArray(p)){for(let U=0;U<p.length;U++)zp(u,p[U],y,x,O);return null}return y=Wc(y),u&&u[Ln]?u.J(p,y,a(x)?!!x.capture:!!x,O):ha(u,p,y,!1,x,O)}function ha(u,p,y,x,O,U){if(!p)throw Error("Invalid event type");let Q=a(O)?!!O.capture:!!O,ve=Gc(u);if(ve||(u[Qi]=ve=new jc(u)),y=ve.add(p,y,x,Q,U),y.proxy)return y;if(x=zc(),y.proxy=x,x.src=u,x.listener=y,u.addEventListener)P||(O=Q),O===void 0&&(O=!1),u.addEventListener(p.toString(),x,O);else if(u.attachEvent)u.attachEvent(Hc(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return y}function zc(){function u(y){return p.call(u.src,u.listener,y)}let p=$p;return u}function $c(u,p,y,x,O){if(Array.isArray(p)){for(let U=0;U<p.length;U++)$c(u,p[U],y,x,O);return null}return y=Wc(y),u&&u[Ln]?u.K(p,y,a(x)?!!x.capture:!!x,O):ha(u,p,y,!0,x,O)}function qc(u,p,y,x,O){if(Array.isArray(p))for(var U=0;U<p.length;U++)qc(u,p[U],y,x,O);else x=a(x)?!!x.capture:!!x,y=Wc(y),u&&u[Ln]?(u=u.i,U=String(p).toString(),U in u.g&&(p=u.g[U],y=Nd(p,y,x,O),y>-1&&(ci(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[U],u.h--)))):u&&(u=Gc(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Nd(p,y,x,O)),(y=u>-1?p[u]:null)&&fa(y))}function fa(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ln])Ki(p.i,u);else{var y=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(y,x,u.capture):p.detachEvent?p.detachEvent(Hc(y),x):p.addListener&&p.removeListener&&p.removeListener(x),(y=Gc(p))?(Ki(y,u),y.h==0&&(y.src=null,p[Qi]=null)):ci(u)}}}function Hc(u){return u in Od?Od[u]:Od[u]="on"+u}function $p(u,p){if(u.da)u=!0;else{p=new _t(p,this);let y=u.listener,x=u.ha||u.src;u.fa&&fa(u),u=y.call(x,p)}return u}function Gc(u){return u=u[Qi],u instanceof jc?u:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wc(u){return typeof u=="function"?u:(u[Ld]||(u[Ld]=function(p){return u.handleEvent(p)}),u[Ld])}function Wt(){A.call(this),this.i=new jc(this),this.M=this,this.G=null}g(Wt,A),Wt.prototype[Ln]=!0,Wt.prototype.removeEventListener=function(u,p,y,x){qc(this,u,p,y,x)};function Kt(u,p){var y,x=u.G;if(x)for(y=[];x;x=x.G)y.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var O=p;p=new D(x,u),Gt(p,O)}O=!0;let U,Q;if(y)for(Q=y.length-1;Q>=0;Q--)U=p.g=y[Q],O=pa(U,x,!0,p)&&O;if(U=p.g=u,O=pa(U,x,!0,p)&&O,O=pa(U,x,!1,p)&&O,y)for(Q=0;Q<y.length;Q++)U=p.g=y[Q],O=pa(U,x,!1,p)&&O}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var u=this.i;for(let p in u.g){let y=u.g[p];for(let x=0;x<y.length;x++)ci(y[x]);delete u.g[p],u.h--}}this.G=null},Wt.prototype.J=function(u,p,y,x){return this.i.add(String(u),p,!1,y,x)},Wt.prototype.K=function(u,p,y,x){return this.i.add(String(u),p,!0,y,x)};function pa(u,p,y,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let U=0;U<p.length;++U){let Q=p[U];if(Q&&!Q.da&&Q.capture==y){let ve=Q.listener,l=Q.ha||Q.src;Q.fa&&Ki(u.i,Q),O=ve.call(l,x)!==!1&&O}}return O&&!x.defaultPrevented}function pE(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:s.setTimeout(u,p||0)}function Kc(u){u.g=pE(()=>{u.g=null,u.i&&(u.i=!1,Kc(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Fd extends A{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(u){A.call(this),this.h=u,this.g={}}g(Yi,A);var Qt=[];function sn(u){qo(u.g,function(p,y){this.g.hasOwnProperty(y)&&fa(p)},u),u.g={}}Yi.prototype.N=function(){Yi.Z.N.call(this),sn(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=s.JSON.stringify,qp=s.JSON.parse,Hp=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function Gp(){}function Go(){}var Wo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qc(){D.call(this,"d")}g(Qc,D);function ga(){D.call(this,"c")}g(ga,D);var Ji={},Wp=null;function Ko(){return Wp=Wp||new Wt}Ji.Ia="serverreachability";function Vd(u){D.call(this,Ji.Ia,u)}g(Vd,D);function Qo(u){let p=Ko();Kt(p,new Vd(p))}Ji.STAT_EVENT="statevent";function Yo(u,p){D.call(this,Ji.STAT_EVENT,u),this.stat=p}g(Yo,D);function Yt(u){let p=Ko();Kt(p,new Yo(p,u))}Ji.Ja="timingevent";function Yc(u,p){D.call(this,Ji.Ja,u),this.size=p}g(Yc,D);function er(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},p)}function Jo(){this.g=!0}Jo.prototype.ua=function(){this.g=!1};function Jc(u,p,y,x,O,U){u.info(function(){if(u.g)if(U){var Q="",ve=U.split("&");for(let f=0;f<ve.length;f++){var l=ve[f].split("=");if(l.length>1){let m=l[0];l=l[1];let M=m.split("_");Q=M.length>=2&&M[1]=="type"?Q+(m+"="+l+"&"):Q+(m+"=redacted&")}}}else Q=null;else Q=U;return"XMLHTTP REQ ("+x+") [attempt "+O+"]: "+p+`
`+y+`
`+Q})}function Kp(u,p,y,x,O,U,Q){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+O+"]: "+p+`
`+y+`
`+U+" "+Q})}function mr(u,p,y,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+hn(u,y)+(x?" "+x:"")})}function Qp(u,p){u.info(function(){return"TIMEOUT: "+p})}Jo.prototype.info=function(){};function hn(u,p){if(!u.g)return p;if(!p)return null;try{let U=JSON.parse(p);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var y=U[u];if(!(y.length<2)){var x=y[1];if(Array.isArray(x)&&!(x.length<1)){var O=x[0];if(O!="noop"&&O!="stop"&&O!="close")for(let Q=1;Q<x.length;Q++)x[Q]=""}}}}return Ho(U)}catch{return p}}var ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xo;function Ud(){}g(Ud,Gp),Ud.prototype.g=function(){return new XMLHttpRequest},Xo=new Ud;function ya(u){return encodeURIComponent(String(u))}function es(u){var p=1;u=u.split(":");let y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function li(u,p,y,x){this.j=u,this.i=p,this.l=y,this.S=x||1,this.V=new Yi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yp}function Yp(){this.i=null,this.g="",this.h=!1}var _a={},Zc={};function va(u,p,y){u.M=1,u.A=ba(tr(p)),u.u=y,u.R=!0,wa(u,null)}function wa(u,p){u.F=Date.now(),ts(u),u.B=tr(u.A);var y=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),ng(y.i,"t",x),u.C=0,y=u.j.L,u.h=new Yp,u.g=dl(u.j,y?p:null,!u.u),u.P>0&&(u.O=new Fd(d(u.Y,u,u.g),u.P)),p=u.V,y=u.g,x=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(Qt[0]=O.toString()),O=Qt);for(let U=0;U<O.length;U++){let Q=zp(y,O[U],x||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.J?jp(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Qo(),Jc(u.i,u.v,u.B,u.l,u.S,u.u)}li.prototype.ba=function(u){u=u.target;let p=this.O;p&&tt(u)==3?p.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{let ve=tt(this.g),l=this.g.ya(),f=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||lg(this.g)))){this.K||ve!=4||l==7||(l==8||f<=0?Qo(3):Qo(2)),el(this);var p=this.g.ca();this.X=p;var y=ui(this);if(this.o=p==200,Kp(this.i,this.v,this.B,this.l,this.S,ve,p),this.o){if(this.U&&!this.L){t:{if(this.g){var x,O=this.g;if((x=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(x)){var U=x;break t}}U=null}if(u=U)mr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rs(this,u);else{this.o=!1,this.m=3,Yt(12),Zi(this),ns(this);break e}}if(this.R){u=!0;let m;for(;!this.K&&this.C<y.length;)if(m=Jp(this,y),m==Zc){ve==4&&(this.m=4,Yt(14),u=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==_a){this.m=4,Yt(15),mr(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else mr(this.i,this.l,m,null),rs(this,m);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||y.length!=0||this.h.h||(this.m=1,Yt(16),u=!1),this.o=this.o&&u,!u)mr(this.i,this.l,y,"[Invalid Chunked Response]"),Zi(this),ns(this);else if(y.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),cl(Q),Q.P=!0,Yt(11))}}else mr(this.i,this.l,y,null),rs(this,y);ve==4&&Zi(this),this.o&&!this.K&&(ve==4?Xd(this.j,this):(this.o=!1,ts(this)))}else gE(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Zi(this),ns(this)}}}catch{}finally{}};function ui(u){if(!Bd(u))return u.g.la();let p=lg(u.g);if(p==="")return"";let y="",x=p.length,O=tt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Zi(u),ns(u),"";u.h.i=new s.TextDecoder}for(let U=0;U<x;U++)u.h.h=!0,y+=u.h.i.decode(p[U],{stream:!(O&&U==x-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Bd(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Jp(u,p){var y=u.C,x=p.indexOf(`
`,y);return x==-1?Zc:(y=Number(p.substring(y,x)),isNaN(y)?_a:(x+=1,x+y>p.length?Zc:(p=p.slice(x,x+y),u.C=x+y,p)))}li.prototype.cancel=function(){this.K=!0,Zi(this)};function ts(u){u.T=Date.now()+u.H,Xc(u,u.H)}function Xc(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=er(d(u.aa,u),p)}function el(u){u.D&&(s.clearTimeout(u.D),u.D=null)}li.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(Qp(this.i,this.B),this.M!=2&&(Qo(),Yt(17)),Zi(this),this.m=2,ns(this)):Xc(this,this.T-u)};function ns(u){u.j.I==0||u.K||Xd(u.j,u)}function Zi(u){el(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,sn(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function rs(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||Ea(y.h,u))){if(!u.L&&Ea(y.h,u)&&y.I==3){try{var x=y.Ba.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var O=x;if(O[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)ll(y),Xi(y);else break e;ds(y),Yt(18)}}else y.xa=O[1],0<y.xa-y.K&&O[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=er(d(y.Va,y),6e3));di(y.h)<=1&&y.ta&&(y.ta=void 0)}else fi(y,11)}else if((u.L||y.g==u)&&ll(y),!E(p))for(O=y.Ba.g.parse(p),p=0;p<O.length;p++){let f=O[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let M=f[3];M!=null&&(y.ka=M,y.j.info("VER="+y.ka));let L=f[4];L!=null&&(y.za=L,y.j.info("SVER="+y.za));let B=f[5];B!=null&&typeof B=="number"&&B>0&&(x=1.5*B,y.O=x,y.j.info("backChannelRequestTimeoutMs_="+x)),x=y;let G=u.g;if(G){let Je=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Je){var U=x.h;U.g||Je.indexOf("spdy")==-1&&Je.indexOf("quic")==-1&&Je.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(jd(U,U.h),U.h=null))}if(x.G){let kt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;kt&&(x.wa=kt,at(x.J,x.G,kt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),x=y;var Q=u;if(x.na=ul(x,x.L?x.ba:null,x.W),Q.L){zd(x.h,Q);var ve=Q,l=x.O;l&&(ve.H=l),ve.D&&(el(ve),ts(ve)),x.g=Q}else al(x);y.i.length>0&&Vn(y)}else f[0]!="stop"&&f[0]!="close"||fi(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?fi(y,7):sl(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}Qo(4)}catch{}}var Zp=class{constructor(u,p){this.g=u,this.map=p}};function tl(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function is(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function di(u){return u.h?1:u.g?u.g.size:0}function Ea(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function jd(u,p){u.g?u.g.add(p):u.h=p}function zd(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}tl.prototype.cancel=function(){if(this.i=$d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function $d(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let y of u.g.values())p=p.concat(y.G);return p}return C(u.i)}var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hd(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){let x=u[y].indexOf("="),O,U=null;x>=0?(O=u[y].substring(0,x),U=u[y].substring(x+1)):O=u[y],p(O,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function yr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof yr?(this.l=u.l,os(this,u.j),this.o=u.o,this.g=u.g,Ia(this,u.u),this.h=u.h,Gd(this,rg(u.i)),this.m=u.m):u&&(p=String(u).match(qd))?(this.l=!1,os(this,p[1]||"",!0),this.o=Ta(p[2]||""),this.g=Ta(p[3]||"",!0),Ia(this,p[4]),this.h=Ta(p[5]||"",!0),Gd(this,p[6]||"",!0),this.m=Ta(p[7]||"")):(this.l=!1,this.i=new xr(null,this.l))}yr.prototype.toString=function(){let u=[];var p=this.j;p&&u.push(nr(p,Ca,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(nr(p,Ca,!0),"@"),u.push(ya(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(nr(y,y.charAt(0)=="/"?Xp:nl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",nr(y,rl)),u.join("")},yr.prototype.resolve=function(u){let p=tr(this),y=!!u.j;y?os(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var x=u.h;if(y)Ia(p,u.u);else if(y=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var O=p.h.lastIndexOf("/");O!=-1&&(x=p.h.slice(0,O+1)+x)}if(O=x,O==".."||O==".")x="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){x=O.lastIndexOf("/",0)==0,O=O.split("/");let U=[];for(let Q=0;Q<O.length;){let ve=O[Q++];ve=="."?x&&Q==O.length&&U.push(""):ve==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),x&&Q==O.length&&U.push("")):(U.push(ve),x=!0)}x=U.join("/")}else x=O}return y?p.h=x:y=u.i.toString()!=="",y?Gd(p,rg(u.i)):y=!!u.m,y&&(p.m=u.m),p};function tr(u){return new yr(u)}function os(u,p,y){u.j=y?Ta(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ia(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Gd(u,p,y){p instanceof xr?(u.i=p,Sa(u.i,u.l)):(y||(p=nr(p,ft)),u.i=new xr(p,u.l))}function at(u,p,y){u.i.set(p,y)}function ba(u){return at(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ta(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nr(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Mr),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Mr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ca=/[#\/\?@]/g,nl=/[#\?:]/g,Xp=/[#\?]/g,ft=/[#\?@]/g,rl=/#/g;function xr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&Hd(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=xr.prototype,n.add=function(u,p){rr(this),this.i=null,u=ss(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function eg(u,p){rr(u),p=ss(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Wd(u,p){return rr(u),p=ss(u,p),u.g.has(p)}n.forEach=function(u,p){rr(this),this.g.forEach(function(y,x){y.forEach(function(O){u.call(p,O,x,this)},this)},this)};function tg(u,p){rr(u);let y=[];if(typeof p=="string")Wd(u,p)&&(y=y.concat(u.g.get(ss(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}n.set=function(u,p){return rr(this),this.i=null,u=ss(this,u),Wd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=tg(this,u),u.length>0?String(u[0]):p):p};function ng(u,p,y){eg(u,p),y.length>0&&(u.i=null,u.g.set(ss(u,p),C(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(let x=0;x<p.length;x++){var y=p[x];let O=ya(y);y=tg(this,y);for(let U=0;U<y.length;U++){let Q=O;y[U]!==""&&(Q+="="+ya(y[U])),u.push(Q)}}return this.i=u.join("&")};function rg(u){let p=new xr;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function ss(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Sa(u,p){p&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(y,x){let O=x.toLowerCase();x!=O&&(eg(this,x),ng(this,O,y))},u)),u.j=p}function hi(u,p){let y=new Jo;if(s.Image){let x=new Image;x.onload=h(Pr,y,"TestLoadImage: loaded",!0,p,x),x.onerror=h(Pr,y,"TestLoadImage: error",!1,p,x),x.onabort=h(Pr,y,"TestLoadImage: abort",!1,p,x),x.ontimeout=h(Pr,y,"TestLoadImage: timeout",!1,p,x),s.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function ig(u,p){let y=new Jo,x=new AbortController,O=setTimeout(()=>{x.abort(),Pr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(U=>{clearTimeout(O),U.ok?Pr(y,"TestPingServer: ok",!0,p):Pr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Pr(y,"TestPingServer: error",!1,p)})}function Pr(u,p,y,x,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),x(y)}catch{}}function og(){this.g=new Hp}function kr(u){this.i=u.Sb||null,this.h=u.ab||!1}g(kr,Gp),kr.prototype.g=function(){return new il(this.i,this.h)};function il(u,p){Wt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(il,Wt),n=il.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Fn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||s).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function sg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Da(this):Fn(this),this.readyState==3&&sg(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Da(this))},n.Na=function(u){this.g&&(this.response=u,Da(this))},n.ga=function(){this.g&&Da(this)};function Da(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}n.setRequestHeader=function(u,p){this.A.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ag(u){let p="";return qo(u,function(y,x){p+=x,p+=":",p+=y,p+=`\r
`}),p}function Kd(u,p,y){e:{for(x in y){var x=!1;break e}x=!0}x||(y=ag(y),typeof u=="string"?y!=null&&ya(y):at(u,p,y))}function ct(u){Wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ct,Wt);var ol=/^https?$/i,cg=["POST","PUT"];n=ct.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,p,y,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xo.g(),this.g.onreadystatechange=T(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){as(this,U);return}if(u=y||"",y=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var O in x)y.set(O,x[O]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let U of x.keys())y.set(U,x.get(U));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),O=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(cg,p,void 0)>=0)||x||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Q]of y)this.g.setRequestHeader(U,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){as(this,U)}};function as(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,cs(u),ls(u)}function cs(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Kt(this,"complete"),Kt(this,"abort"),ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qd(this):this.Xa())},n.Xa=function(){Qd(this)};function Qd(u){if(u.h&&typeof o<"u"){if(u.v&&tt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Kt(u,"readystatechange"),tt(u)==4){u.h=!1;try{let U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var x;if(x=U===0){let Q=String(u.D).match(qd)[1]||null;!Q&&s.self&&s.self.location&&(Q=s.self.location.protocol.slice(0,-1)),x=!ol.test(Q?Q.toLowerCase():"")}y=x}if(y)Kt(u,"complete"),Kt(u,"success");else{u.o=6;try{var O=tt(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",cs(u)}}finally{ls(u)}}}}function ls(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let y=u.g;u.g=null,p||Kt(u,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function tt(u){return u.g?u.g.readyState:0}n.ca=function(){try{return tt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),qp(p)}};function lg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function gE(u){let p={};u=(u.g&&tt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(E(u[x]))continue;var y=es(u[x]);let O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let U=p[O]||[];p[O]=U,U.push(y)}Bp(p,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Yd(u){this.za=0,this.i=[],this.j=new Jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=us("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=us("baseRetryDelayMs",5e3,u),this.Za=us("retryDelaySeedMs",1e4,u),this.Ta=us("forwardChannelMaxRetries",2,u),this.va=us("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new tl(u&&u.concurrentRequestLimit),this.Ba=new og,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yd.prototype,n.ka=8,n.I=1,n.connect=function(u,p,y,x){Yt(0),this.W=u,this.H=p||{},y&&x!==void 0&&(this.H.OSID=y,this.H.OAID=x),this.F=this.X,this.J=ul(this,null,this.W),Vn(this)};function sl(u){if(Jd(u),u.I==3){var p=u.V++,y=tr(u.J);if(at(y,"SID",u.M),at(y,"RID",p),at(y,"TYPE","terminate"),Nr(u,y),p=new li(u,u.j,p),p.M=2,p.A=ba(tr(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=p.A,y=!0),y||(p.g=dl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ts(p)}eh(u)}function Xi(u){u.g&&(cl(u),u.g.cancel(),u.g=null)}function Jd(u){Xi(u),u.v&&(s.clearTimeout(u.v),u.v=null),ll(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function Vn(u){if(!is(u.h)&&!u.m){u.m=!0;var p=u.Ea;qe||_(),fe||(qe(),fe=!0),R.add(p,u),u.D=0}}function ug(u,p){return di(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=er(d(u.Ea,u,p),hs(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let O=new li(this,this.j,u),U=this.o;if(this.U&&(U?(U=jp(U),Gt(U,this.U)):U=this.U),this.u!==null||this.R||(O.J=U,U=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var x=this.i[y];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Zd(this,O,p),y=tr(this.J),at(y,"RID",u),at(y,"CVER",22),this.G&&at(y,"X-HTTP-Session-Id",this.G),Nr(this,y),U&&(this.R?p="headers="+ya(ag(U))+"&"+p:this.u&&Kd(y,this.u,U)),jd(this.h,O),this.Ra&&at(y,"TYPE","init"),this.S?(at(y,"$req",p),at(y,"SID","null"),O.U=!0,va(O,y,null)):va(O,y,p),this.I=2}}else this.I==3&&(u?dg(this,u):this.i.length==0||is(this.h)||dg(this))};function dg(u,p){var y;p?y=p.l:y=u.V++;let x=tr(u.J);at(x,"SID",u.M),at(x,"RID",y),at(x,"AID",u.K),Nr(u,x),u.u&&u.o&&Kd(x,u.u,u.o),y=new li(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Zd(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),jd(u.h,y),va(y,x,p)}function Nr(u,p){u.H&&qo(u.H,function(y,x){at(p,x,y)}),u.l&&qo({},function(y,x){at(p,x,y)})}function Zd(u,p,y){y=Math.min(u.i.length,y);let x=u.l?d(u.l.Ka,u.l,u):null;e:{var O=u.i;let ve=-1;for(;;){let l=["count="+y];ve==-1?y>0?(ve=O[0].g,l.push("ofs="+ve)):ve=0:l.push("ofs="+ve);let f=!0;for(let m=0;m<y;m++){var U=O[m].g;let M=O[m].map;if(U-=ve,U<0)ve=Math.max(0,O[m].g-100),f=!1;else try{U="req"+U+"_"||"";try{var Q=M instanceof Map?M:Object.entries(M);for(let[L,B]of Q){let G=B;a(B)&&(G=Ho(B)),l.push(U+L+"="+encodeURIComponent(G))}}catch(L){throw l.push(U+"type="+encodeURIComponent("_badmap")),L}}catch{x&&x(M)}}if(f){Q=l.join("&");break e}}Q=void 0}return u=u.i.splice(0,y),p.G=u,Q}function al(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;qe||_(),fe||(qe(),fe=!0),R.add(p,u),u.A=0}}function ds(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=er(d(u.Da,u),hs(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Aa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=er(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Xi(this),Aa(this))};function cl(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function Aa(u){u.g=new li(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=tr(u.na);at(p,"RID","rpc"),at(p,"SID",u.M),at(p,"AID",u.K),at(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&at(p,"TO",u.ia),at(p,"TYPE","xmlhttp"),Nr(u,p),u.u&&u.o&&Kd(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=ba(tr(p)),y.u=null,y.R=!0,wa(y,u)}n.Va=function(){this.C!=null&&(this.C=null,Xi(this),ds(this),Yt(19))};function ll(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function Xd(u,p){var y=null;if(u.g==p){ll(u),cl(u),u.g=null;var x=2}else if(Ea(u.h,p))y=p.G,zd(u.h,p),x=1;else return;if(u.I!=0){if(p.o)if(x==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var O=u.D;x=Ko(),Kt(x,new Yc(x,y)),Vn(u)}else al(u);else if(O=p.m,O==3||O==0&&p.X>0||!(x==1&&ug(u,p)||x==2&&ds(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),O){case 1:fi(u,5);break;case 4:fi(u,10);break;case 3:fi(u,6);break;default:fi(u,2)}}}function hs(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function fi(u,p){if(u.j.info("Error code "+p),p==2){var y=d(u.bb,u),x=u.Ua;let O=!x;x=new yr(x||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||os(x,"https"),ba(x),O?hi(x.toString(),y):ig(x.toString(),y)}else Yt(2);u.I=0,u.l&&u.l.pa(p),eh(u),Jd(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function eh(u){if(u.I=0,u.ja=[],u.l){let p=$d(u.h);(p.length!=0||u.i.length!=0)&&(k(u.ja,p),k(u.ja,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.oa()}}function ul(u,p,y){var x=y instanceof yr?tr(y):new yr(y);if(x.g!="")p&&(x.g=p+"."+x.g),Ia(x,x.u);else{var O=s.location;x=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;let U=new yr(null);x&&os(U,x),p&&(U.g=p),O&&Ia(U,O),y&&(U.h=y),x=U}return y=u.G,p=u.wa,y&&p&&at(x,y,p),at(x,"VER",u.ka),Nr(u,x),x}function dl(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ct(new kr({ab:y})):new ct(u.ma),p.Fa(u.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function eo(){}eo.prototype.g=function(u,p){return new mn(u,p)};function mn(u,p){Wt.call(this),this.g=new Yd(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new to(this)}g(mn,Wt),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){sl(this.g)},mn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=Ho(u),u=y);p.i.push(new Zp(p.Ya++,u)),p.I==3&&Vn(p)},mn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,mn.Z.N.call(this)};function nh(u){Qc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}g(nh,Qc);function pi(){ga.call(this),this.status=1}g(pi,ga);function to(u){this.g=u}g(to,th),to.prototype.ra=function(){Kt(this.g,"a")},to.prototype.qa=function(u){Kt(this.g,new nh(u))},to.prototype.pa=function(u){Kt(this.g,new pi)},to.prototype.oa=function(){Kt(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,JC=Mo.createWebChannelTransport=function(){return new eo},YC=Mo.getStatEventTarget=function(){return Ko()},QC=Mo.Event=Ji,ov=Mo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,Cf=Mo.ErrorCode=ma,Zo.COMPLETE="complete",KC=Mo.EventType=Zo,Go.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,Au=Mo.WebChannel=Go,AZ=Mo.FetchXmlHttpFactory=kr,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,WC=Mo.XhrIo=ct}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var jV="@firebase/firestore",zV="4.9.2";var Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");var Xu="12.3.0";var Ec=new zs("@firebase/firestore");function Ru(){return Ec.logLevel}function oe(n,...e){if(Ec.logLevel<=Ue.DEBUG){let t=e.map(LD);Ec.debug(`Firestore (${Xu}): ${n}`,...t)}}function ko(n,...e){if(Ec.logLevel<=Ue.ERROR){let t=e.map(LD);Ec.error(`Firestore (${Xu}): ${n}`,...t)}}function Pf(n,...e){if(Ec.logLevel<=Ue.WARN){let t=e.map(LD);Ec.warn(`Firestore (${Xu}): ${n}`,...t)}}function LD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,M2(n,r,t)}function M2(n,e,t){let r=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ko(r),new Error(r)}function Tt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||M2(e,i,r)}function Ke(n,e){return n}var Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},he=class extends Cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ks=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var oS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}};var aS=class{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ks,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ks)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new oS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}},cS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},lS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);let r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var hv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=RZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function He(n,e){return n<e?-1:n>e?1:0}function dS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return ZC(i)===ZC(o)?He(i,o):ZC(i)?1:-1}return He(n.length,e.length)}var MZ=55296,xZ=57343;function ZC(n){let e=n.charCodeAt(0);return e>=MZ&&e<=xZ}function ju(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var $V="__name__",fv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return He(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):dS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ro.fromString(e.substring(4,e.length-2))}},rn=class n extends fv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},PZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=class n extends fv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return PZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$V}static keyField(){return new n([$V])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var we=class n{constructor(e){this.path=e}static fromPath(e){return new n(rn.fromString(e))}static fromName(e){return new n(rn.fromString(e).popFirst(5))}static empty(){return new n(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new rn(e.slice()))}};function kZ(n,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function OZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function XC(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=OZ(n);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Gf(n,e){if(!NZ(n))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}var qV=-62135596800,HV=1e6,On=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*HV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qV)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HV}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:zt("string",On._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new On(0,0))}static max(){return new n(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var kf=-1,hS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};hS.UNKNOWN_ID=-1;function LZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new Ic(i,we.empty(),e)}function FZ(n){return new Ic(n.readTime,n.key,kf)}var Ic=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),we.empty(),kf)}static max(){return new n(ke.max(),we.empty(),kf)}};function VZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}var UZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Uv(n){return S(this,null,function*(){if(n.code!==Z.FAILED_PRECONDITION||n.message!==UZ)throw n;oe("LocalStore","Unexpectedly lost primary lease")})}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(h=>{s[d]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function BZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ed(n){return n.name==="IndexedDbTransactionError"}var FD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),jZ=-1;function Bv(n){return n==null}function pv(n){return n===0&&1/n==-1/0}var x2="";function zZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GV(e)),e=$Z(n.get(t),e);return GV(e)}function $Z(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case x2:t+="";break;default:t+=o}}return t}function GV(n){return n+x2+""}var qZ="remoteDocuments",P2="owner";var k2="mutationQueues";var N2="mutations";var O2="documentMutations",HZ="remoteDocumentsV14";var L2="remoteDocumentGlobal";var F2="targets";var V2="targetDocuments";var U2="targetGlobal",B2="collectionParents";var j2="clientMetadata";var z2="bundles";var $2="namedQueries";var GZ="indexConfiguration";var WZ="indexState";var KZ="indexEntries";var q2="documentOverlays";var QZ="globals";var YZ=[k2,N2,O2,qZ,F2,P2,U2,V2,j2,L2,B2,z2,$2],LEe=[...YZ,q2],JZ=[k2,N2,O2,HZ,F2,P2,U2,V2,j2,L2,B2,z2,$2,q2],ZZ=JZ,XZ=[...ZZ,GZ,WZ,KZ];var FEe=[...XZ,QZ];function WV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eX(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ft=class n{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}},ku=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Li=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}};Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1;Li.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var un=class n{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(e){return new gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mc=class n{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new n([])}unionWith(e){let t=new un(ni.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ju(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var mv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Sn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mv("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Sn.EMPTY_BYTE_STRING=new Sn("");var tX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(n){if(Tt(!!n,39018),typeof n=="string"){let e=0,t=tX.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oo(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}var H2="server_timestamp",G2="__type__",W2="__previous_value__",K2="__local_write_time__";function VD(n){return(n?.mapValue?.fields||{})[G2]?.stringValue===H2}function jv(n){let e=n.mapValue.fields[W2];return VD(e)?jv(e):e}function Nf(n){let e=No(n.mapValue.fields[K2].timestampValue);return new On(e.seconds,e.nanos)}var pS=class{constructor(e,t,r,i,o,s,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},gS="(default)",yv=class n{constructor(e,t){this.projectId=e,this.database=t||gS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===gS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Q2="__type__",Y2="__max__",sv={mapValue:{fields:{__type__:{stringValue:Y2}}}},J2="__vector__",Of="value";function Qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VD(n)?4:X2(n)?9007199254740991:Z2(n)?10:11:De(28295,{value:n})}function Vi(n,e){if(n===e)return!0;let t=Qs(n);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nf(n).isEqual(Nf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=No(i.timestampValue),a=No(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Oo(i.bytesValue).isEqual(Oo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=It(i.doubleValue),a=It(o.doubleValue);return s===a?pv(s)===pv(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ju(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(WV(s)!==WV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Vi(s[c],a[c])))return!1;return!0}(n,e);default:return De(52216,{left:n})}}function Lf(n,e){return(n.values||[]).find(t=>Vi(t,e))!==void 0}function zu(n,e){if(n===e)return 0;let t=Qs(n),r=Qs(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=It(o.integerValue||o.doubleValue),c=It(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return KV(n.timestampValue,e.timestampValue);case 4:return KV(Nf(n),Nf(e));case 5:return dS(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Oo(o),c=Oo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=He(a[d],c[d]);if(h!==0)return h}return He(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=He(It(o.latitude),It(s.latitude));return a!==0?a:He(It(o.longitude),It(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return QV(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},c=s.fields||{},d=a[Of]?.arrayValue,h=c[Of]?.arrayValue,g=He(d?.values?.length||0,h?.values?.length||0);return g!==0?g:QV(d,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===sv.mapValue&&s===sv.mapValue)return 0;if(o===sv.mapValue)return 1;if(s===sv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let T=dS(c[g],h[g]);if(T!==0)return T;let C=zu(a[c[g]],d[h[g]]);if(C!==0)return C}return He(c.length,h.length)}(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function KV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);let t=No(n),r=No(e),i=He(t.seconds,r.seconds);return i!==0?i:He(t.nanos,r.nanos)}function QV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=zu(t[i],r[i]);if(o)return o}return He(t.length,r.length)}function $u(n){return mS(n)}function mS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=No(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return we.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=mS(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${mS(t.fields[s])}`;return i+"}"}(n.mapValue):De(61005,{value:n})}function lv(n){switch(Qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=jv(n);return e?16+lv(e):16;case 5:return 2*n.stringValue.length;case 6:return Oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+lv(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Wf(r.fields,(o,s)=>{i+=o.length+lv(s)}),i}(n.mapValue);default:throw De(13486,{value:n})}}function yS(n){return!!n&&"integerValue"in n}function UD(n){return!!n&&"arrayValue"in n}function YV(n){return!!n&&"nullValue"in n}function JV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eS(n){return!!n&&"mapValue"in n}function Z2(n){return(n?.mapValue?.fields||{})[Q2]?.stringValue===J2}function Df(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Df(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Df(n.arrayValue.values[t]);return e}return z({},n)}function X2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}var UEe={mapValue:{fields:{[Q2]:{stringValue:J2},[Of]:{arrayValue:{}}}}};var xo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Df(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());eS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wf(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Df(this.value))}};var ri=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),xo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qu=class{constructor(e,t){this.position=e,this.inclusive=t}};function ZV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=we.comparator(we.fromName(s.referenceValue),t.key):r=zu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function XV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}var Hu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function nX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var _v=class{},on=class n extends _v{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vS(e,t,r):t==="array-contains"?new IS(e,r):t==="in"?new bS(e,r):t==="not-in"?new TS(e,r):t==="array-contains-any"?new CS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wS(e,r):new ES(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zu(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ui=class n extends _v{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return eU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function eU(n){return n.op==="and"}function tU(n){return rX(n)&&eU(n)}function rX(n){for(let e of n.filters)if(e instanceof Ui)return!1;return!0}function _S(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+$u(n.value);if(tU(n))return n.filters.map(e=>_S(e)).join(",");{let e=n.filters.map(t=>_S(t)).join(",");return`${n.op}(${e})`}}function nU(n,e){return n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.field.isEqual(i.field)&&Vi(r.value,i.value)}(n,e):n instanceof Ui?function(r,i){return i instanceof Ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&nU(s,i.filters[a]),!0):!1}(n,e):void De(19439)}function rU(n){return n instanceof on?function(t){return`${t.field.canonicalString()} ${t.op} ${$u(t.value)}`}(n):n instanceof Ui?function(t){return t.op.toString()+" {"+t.getFilters().map(rU).join(" ,")+"}"}(n):"Filter"}var vS=class extends on{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){let t=we.comparator(e.key,this.key);return this.matchesComparison(t)}},wS=class extends on{constructor(e,t){super(e,"in",t),this.keys=iU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ES=class extends on{constructor(e,t){super(e,"not-in",t),this.keys=iU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function iU(n,e){return(e.arrayValue?.values||[]).map(t=>we.fromName(t.referenceValue))}var IS=class extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return UD(t)&&Lf(t.arrayValue,this.value)}},bS=class extends on{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Lf(this.value.arrayValue,t)}},TS=class extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lf(this.value.arrayValue,t)}},CS=class extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!UD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lf(this.value.arrayValue,r))}};var SS=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function e2(n,e=null,t=[],r=[],i=null,o=null,s=null){return new SS(n,e,t,r,i,o,s)}function BD(n){let e=Ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_S(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Bv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$u(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$u(r)).join(",")),e.Te=t}return e.Te}function jD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XV(n.startAt,e.startAt)&&XV(n.endAt,e.endAt)}function DS(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Gu=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function iX(n,e,t,r,i,o,s,a){return new Gu(n,e,t,r,i,o,s,a)}function zD(n){return new Gu(n)}function t2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oX(n){return n.collectionGroup!==null}function Af(n){let e=Ke(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new un(ni.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Hu(o,r))}),t.has(ni.keyField().canonicalString())||e.Ie.push(new Hu(ni.keyField(),r))}return e.Ie}function Fi(n){let e=Ke(n);return e.Ee||(e.Ee=sX(e,Af(n))),e.Ee}function sX(n,e){if(n.limitType==="F")return e2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Hu(i.field,o)});let t=n.endAt?new qu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qu(n.startAt.position,n.startAt.inclusive):null;return e2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function AS(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zv(n,e){return jD(Fi(n),Fi(e))&&n.limitType===e.limitType}function oU(n){return`${BD(Fi(n))}|lt:${n.limitType}`}function Mu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rU(i)).join(", ")}]`),Bv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$u(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$u(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function $v(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):we.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Af(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let d=ZV(s,a,c);return s.inclusive?d<=0:d<0}(r.startAt,Af(r),i)||r.endAt&&!function(s,a,c){let d=ZV(s,a,c);return s.inclusive?d>=0:d>0}(r.endAt,Af(r),i))}(n,e)}function aX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sU(n){return(e,t)=>{let r=!1;for(let i of Af(n)){let o=cX(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cX(n,e,t){let r=n.field.isKeyField()?we.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?zu(c,d):De(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}var Lo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wf(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return eX(this.inner)}size(){return this.innerSize}};var lX=new Ft(we.comparator);function Ys(){return lX}var aU=new Ft(we.comparator);function Sf(...n){let e=aU;for(let t of n)e=e.insert(t.key,t);return e}function uX(n){let e=aU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yc(){return Rf()}function cU(){return Rf()}function Rf(){return new Lo(n=>n.toString(),(n,e)=>n.isEqual(e))}var BEe=new Ft(we.comparator),dX=new un(we.comparator);function Ye(...n){let e=dX;for(let t of n)e=e.add(t);return e}var hX=new un(He);function fX(){return hX}function pX(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pv(e)?"-0":e}}function gX(n){return{integerValue:""+n}}var Wu=class{constructor(){this._=void 0}};function mX(n,e,t){return n instanceof Ff?function(i,o){let s={fields:{[G2]:{stringValue:H2},[K2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&VD(o)&&(o=jv(o)),o&&(s.fields[W2]=o),{mapValue:s}}(t,e):n instanceof Ku?lU(n,e):n instanceof Qu?uU(n,e):function(i,o){let s=_X(i,o),a=n2(s)+n2(i.Ae);return yS(s)&&yS(i.Ae)?gX(a):pX(i.serializer,a)}(n,e)}function yX(n,e,t){return n instanceof Ku?lU(n,e):n instanceof Qu?uU(n,e):t}function _X(n,e){return n instanceof Vf?function(r){return yS(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ff=class extends Wu{},Ku=class extends Wu{constructor(e){super(),this.elements=e}};function lU(n,e){let t=dU(e);for(let r of n.elements)t.some(i=>Vi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qu=class extends Wu{constructor(e){super(),this.elements=e}};function uU(n,e){let t=dU(e);for(let r of n.elements)t=t.filter(i=>!Vi(i,r));return{arrayValue:{values:t}}}var Vf=class extends Wu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function n2(n){return It(n.integerValue||n.doubleValue)}function dU(n){return UD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vX(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ku&&i instanceof Ku||r instanceof Qu&&i instanceof Qu?ju(r.elements,i.elements,Vi):r instanceof Vf&&i instanceof Vf?Vi(r.Ae,i.Ae):r instanceof Ff&&i instanceof Ff}(n.transform,e.transform)}var Mf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Uf=class{};function hU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RS(n.key,Mf.none()):new Bf(n.key,n.data,Mf.none());{let t=n.data,r=xo.empty(),i=new un(ni.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yu(n.key,r,new mc(i.toArray()),Mf.none())}}function wX(n,e,t){n instanceof Bf?function(i,o,s){let a=i.value.clone(),c=i2(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Yu?function(i,o,s){if(!uv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=i2(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(fU(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function xf(n,e,t,r){return n instanceof Bf?function(o,s,a,c){if(!uv(o.precondition,s))return a;let d=o.value.clone(),h=o2(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yu?function(o,s,a,c){if(!uv(o.precondition,s))return a;let d=o2(o.fieldTransforms,c,s),h=s.data;return h.setAll(fU(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return uv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function r2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ju(r,i,(o,s)=>vX(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bf=class extends Uf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yu=class extends Uf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function fU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function i2(n,e,t){let r=new Map;Tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,yX(s,a,t[i]))}return r}function o2(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,mX(o,s,e))}return r}var RS=class extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var MS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&wX(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=xf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=xf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cU();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=hU(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&ju(this.mutations,e.mutations,(t,r)=>r2(t,r))&&ju(this.baseMutations,e.baseMutations,(t,r)=>r2(t,r))}};var xS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var PS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Bt,We;function pU(n){if(n===void 0)return ko("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Bt.OK:return Z.OK;case Bt.CANCELLED:return Z.CANCELLED;case Bt.UNKNOWN:return Z.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Z.INTERNAL;case Bt.UNAVAILABLE:return Z.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Z.NOT_FOUND;case Bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Bt.ABORTED:return Z.ABORTED;case Bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Bt.DATA_LOSS:return Z.DATA_LOSS;default:return De(39323,{code:n})}}(We=Bt||(Bt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var EX=null;function IX(){return new TextEncoder}var bX=new Ro([4294967295,4294967295],0);function s2(n){let e=IX().encode(n),t=new GC;return t.update(e),new Uint8Array(t.digest())}function a2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ro([t,r],0),new Ro([i,o],0)]}var kS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ro.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ro.fromNumber(r)));return i.compare(bX)===1&&(i=new Ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=s2(e),[r,i]=a2(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=s2(e),[r,i]=a2(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_c=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new Ft(He),Ys(),Ye())}},jf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ye(),Ye(),Ye())}};var Nu=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},wv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ev=class{constructor(e,t,r=Sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Iv=class{constructor(){this.ve=0,this.Fe=c2(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:o})}}),new jf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=c2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},NS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.Je=av(),this.He=av(),this.Ye=new Ft(He)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(DS(o))if(r===0){let s=new we(o.path);this.et(t,s,ri.newNoDocument(s,ke.min()))}else Tt(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}EX?.lt(function(h,g,T,C,k){let F={localCacheCount:h,existenceFilterCount:g.count,databaseId:T.database,projectId:T.projectId},N=g.unchangedNames;return N&&(F.bloomFilter={applied:k===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:q=>C?.mightContain(q)??!1}),F}(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Oo(r).toUint8Array()}catch(c){if(c instanceof mv)return Pf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new kS(s,i,o)}catch(c){return Pf(c instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&DS(a.target)){let c=new we(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,ri.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=Ye();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new vv(e,t,this.Ye,this.je,r);return this.je=Ys(),this.Je=av(),this.He=av(),this.Ye=new Ft(He),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Iv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new un(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new un(He),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function av(){return new Ft(we.comparator)}function c2(){return new Ft(we.comparator)}var TX={asc:"ASCENDING",desc:"DESCENDING"},CX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SX={and:"AND",or:"OR"},OS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LS(n,e){return n.useProto3Json||Bv(e)?e:{value:e}}function DX(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AX(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ou(n){return Tt(!!n,49232),ke.fromTimestamp(function(t){let r=No(t);return new On(r.seconds,r.nanos)}(n))}function RX(n,e){return FS(n,e).canonicalString()}function FS(n,e){let t=function(i){return new rn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gU(n){let e=rn.fromString(n);return Tt(wU(e),10190,{key:e.toString()}),e}function tS(n,e){let t=gU(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(yU(t))}function mU(n,e){return RX(n.databaseId,e)}function MX(n){let e=gU(n);return e.length===4?rn.emptyPath():yU(e)}function l2(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yU(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xX(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:De(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(Tt(h===void 0||typeof h=="string",58123),Sn.fromBase64String(h||"")):(Tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Sn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let h=d.code===void 0?Z.UNKNOWN:pU(d.code);return new he(h,d.message||"")}(s);t=new Ev(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=tS(n,r.document.name),o=Ou(r.document.updateTime),s=r.document.createTime?Ou(r.document.createTime):ke.min(),a=new xo({mapValue:{fields:r.document.fields}}),c=ri.newFoundDocument(i,o,s,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Nu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=tS(n,r.document),o=r.readTime?Ou(r.readTime):ke.min(),s=ri.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Nu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=tS(n,r.document),o=r.removedTargetIds||[];t=new Nu([],o,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new PS(i,o),a=r.targetId;t=new wv(a,s)}}return t}function PX(n,e){return{documents:[mU(n,e.path)]}}function kX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mU(n,i);let o=function(d){if(d.length!==0)return vU(Ui.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(h=>function(T){return{field:xu(T.field),direction:LX(T.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=LS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function NX(n){let e=MX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Tt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let T=_U(g);return T instanceof Ui&&tU(T)?T.getFilters():[T]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(T=>function(k){return new Hu(Pu(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(T))}(t.orderBy));let a=null;t.limit&&(a=function(g){let T;return T=typeof g=="object"?g.value:g,Bv(T)?null:T}(t.limit));let c=null;t.startAt&&(c=function(g){let T=!!g.before,C=g.values||[];return new qu(C,T)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let T=!g.before,C=g.values||[];return new qu(C,T)}(t.endAt)),iX(e,i,s,o,a,"F",c,d)}function OX(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _U(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pu(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pu(t.unaryFilter.field);return on.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Pu(t.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Pu(t.unaryFilter.field);return on.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(n):n.fieldFilter!==void 0?function(t){return on.create(Pu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ui.create(t.compositeFilter.filters.map(r=>_U(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(t.compositeFilter.op))}(n):De(30097,{filter:n})}function LX(n){return TX[n]}function FX(n){return CX[n]}function VX(n){return SX[n]}function xu(n){return{fieldPath:n.canonicalString()}}function Pu(n){return ni.fromServerFormat(n.fieldPath)}function vU(n){return n instanceof on?function(t){if(t.op==="=="){if(JV(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NAN"}};if(YV(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JV(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NAN"}};if(YV(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(t.field),op:FX(t.op),value:t.value}}}(n):n instanceof Ui?function(t){let r=t.getFilters().map(i=>vU(i));return r.length===1?r[0]:{compositeFilter:{op:VX(t.op),filters:r}}}(n):De(54877,{filter:n})}function wU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zf=class n{constructor(e,t,r,i,o=ke.min(),s=ke.min(),a=Sn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var VS=class{constructor(e){this.yt=e}};function UX(n){let e=NX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?AS(e,e.limit,"L"):e}var bv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),pv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=No(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Oo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?X2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Z2(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):De(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Of,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};bv.Kt=new bv;var US=class{constructor(){this.Cn=new BS}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ic.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ic.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},BS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(rn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(rn.comparator)).toArray()}};var jEe=new Uint8Array(0);var u2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EU=41943040,Dr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(EU,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);var $f=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var d2="LruGarbageCollector",BX=1048576;function h2([n,e],[t,r]){let i=He(n,t);return i===0?He(e,r):i}var jS=class{constructor(e){this.Ir=e,this.buffer=new un(h2),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();h2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},zS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(d2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ed(t)?oe(d2,"Ignoring IndexedDB error during garbage collection: ",t):yield Uv(t)}yield this.Vr(3e5)}))}},$S=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(FD.ce);let r=new jS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(u2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u2):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ru()<=Ue.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function jX(n,e){return new $S(n,e)}var qS=class{constructor(){this.changes=new Lo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var HS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var GS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xf(r.mutation,i,mc.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){let i=yc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Sf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=yc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ys(),s=Rf(),a=function(){return Rf()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Yu)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),xf(h.mutation,d,h.mutation.getFieldMask(),On.now())):s.set(d.key,mc.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>a.set(d,new HS(h,s.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Rf(),i=new Ft((s,a)=>s-a),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||mc.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Ye()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=cU();h.forEach(T=>{if(!o.has(T)){let C=hU(t.get(T),r.get(T));C!==null&&g.set(T,C),o=o.add(T)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return H.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return we.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oX(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):H.resolve(yc()),a=kf,c=o;return s.next(d=>H.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(T=>{c=c.insert(h,T)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Ye())).next(h=>({batchId:a,changes:uX(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(r=>{let i=Sf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Sf();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,c=>{let d=function(g,T){return new Gu(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,T)=>{s=s.insert(g,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,ri.newInvalidDocument(h)))});let a=Sf();return s.forEach((c,d)=>{let h=o.get(c);h!==void 0&&xf(h.mutation,d,mc.empty(),On.now()),$v(t,d)&&(a=a.insert(c,d))}),a})}};var WS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ou(i.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:UX(i.bundledQuery),readTime:Ou(i.readTime)}}(t)),H.resolve()}};var KS=class{constructor(){this.overlays=new Ft(we.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=yc();return H.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=yc(),o=t.length+1,s=new we(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ft((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=yc(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=yc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return H.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xS(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var QS=class{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var qf=class{constructor(){this.Qr=new un(jt.$r),this.Ur=new un(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new jt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new we(new rn([])),r=new jt(t,e),i=new jt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new we(new rn([])),r=new jt(t,e),i=new jt(t,e+1),o=Ye();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new jt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},jt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||we.comparator(e.key,t.key)}};var YS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new un(jt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new MS(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new jt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?jZ:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new jt(t,0),i=new jt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(He);return t.forEach(i=>{let o=new jt(i,0),s=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;we.isDocumentKey(o)||(o=o.child(""));let s=new jt(new we(o),0),a=new un(He);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},s),H.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(t.mutations,i=>{let o=new jt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new jt(t,0),i=this.Zr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var JS=class{constructor(e){this.ri=e,this.docs=function(){return new Ft(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ri.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ys(),s=t.path,a=new we(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||VZ(FZ(h),r)<=0||(i.has(h.key)||$v(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZS(this)}getSize(e){return H.resolve(this.size)}},ZS=class extends qS{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var XS=class{constructor(e){this.persistence=e,this.si=new Lo(t=>BD(t),jD),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new qf,this.targetCount=0,this.ai=$f.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new $f(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}};var Tv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new FD(0),this.li=!1,this.li=!0,this.hi=new QS,this.referenceDelegate=e(this),this.Pi=new XS(this),this.indexManager=new US,this.remoteDocumentCache=function(i){return new JS(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new VS(t),this.Ii=new WS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new YS(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new eD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return H.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},eD=class extends fS{constructor(e){super(),this.currentSequenceNumber=e}},tD=class n{constructor(e){this.persistence=e,this.Ri=new qf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,r=>{let i=we.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Cv=class n{constructor(e,t){this.persistence=e,this.pi=new Lo(r=>zZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jX(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return H.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lv(e.data.value)),t}br(e,t,r){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var nD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ye(),i=Ye();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var rD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return oF()?8:BZ(fr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rD;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ru()<=Ue.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Mu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Ru()<=Ue.DEBUG&&oe("QueryEngine","Query:",Mu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ru()<=Ue.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Mu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):H.resolve())}ys(e,t){if(t2(t))return H.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=AS(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ye(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,s,c.readTime)?this.ys(e,AS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return t2(t)||i.isEqual(ke.min())?H.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?H.resolve(null):(Ru()<=Ue.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(t)),this.vs(e,s,t,LZ(i,kf)).next(a=>a))})}Ds(e,t){let r=new un(sU(e));return t.forEach((i,o)=>{$v(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ru()<=Ue.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Mu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ic.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $D="LocalStore",zX=3e8,oD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ft(He),this.xs=new Lo(o=>BD(o),jD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function $X(n,e,t,r){return new oD(n,e,t,r)}function IU(n,e){return S(this,null,function*(){let t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ye();for(let d of i){s.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of o){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:a}))})})})}function bU(n){let e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function qX(n,e){let t=Ke(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let T=i.get(g);if(!T)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,g)));let C=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(Sn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(g,C),function(F,N,q){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=zX?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,C,h)&&a.push(t.Pi.updateTargetData(o,C))});let c=Ys(),d=Ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(HX(o,s,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ke.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.Ms=i,o))}function HX(n,e,t){let r=Ye(),i=Ye();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ys();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe($D,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:s,qs:i}})}function GX(n,e){let t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,H.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new zf(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function sD(n,e,t){return S(this,null,function*(){let r=Ke(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ed(s))throw s;oe($D,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function f2(n,e,t){let r=Ke(n),i=ke.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){let g=Ke(c),T=g.xs.get(h);return T!==void 0?H.resolve(g.Ms.get(T)):g.Pi.getTargetData(d,h)}(r,s,Fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ke.min(),t?o:Ye())).next(a=>(WX(r,aX(e),a),{documents:a,Qs:o})))}function WX(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Sv=class{constructor(){this.activeTargetIds=fX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aD=class{constructor(){this.Mo=new Sv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cD=class{Oo(e){}shutdown(){}};var p2="ConnectivityMonitor",Dv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(p2,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){oe(p2,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cv=null;function lD(){return cv===null?cv=function(){return 268435456+Math.round(2147483648*Math.random())}():cv++,"0x"+cv.toString(16)}var nS="RestConnection",KX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},uD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===gS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=lD(),a=this.zo(e,t.toUriEncodedString());oe(nS,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:d}=new URL(a),h=hf(d);return this.Jo(e,a,c,r,h).then(g=>(oe(nS,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Pf(nS,`RPC '${e}' ${s} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=KX[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var dD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Tn="WebChannelConnection",hD=class extends uD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=lD();return new Promise((a,c)=>{let d=new WC;d.setWithCredentials(!0),d.listenOnce(KC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Cf.NO_ERROR:let g=d.getResponseJson();oe(Tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case Cf.TIMEOUT:oe(Tn,`RPC '${e}' ${s} timed out`),c(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:let T=d.getStatus();if(oe(Tn,`RPC '${e}' ${s} failed with status:`,T,"response text:",d.getResponseText()),T>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let k=C?.error;if(k&&k.status&&k.message){let F=function(q){let ne=q.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ne)>=0?ne:Z.UNKNOWN}(k.status);c(new he(F,k.message))}else c(new he(Z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new he(Z.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(Tn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);oe(Tn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=lD(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JC(),a=YC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");oe(Tn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c);this.I_(g);let T=!1,C=!1,k=new dD({Yo:N=>{C?oe(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(T||(oe(Tn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),T=!0),oe(Tn,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},Zo:()=>g.close()}),F=(N,q,ne)=>{N.listen(q,J=>{try{ne(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return F(g,Au.EventType.OPEN,()=>{C||(oe(Tn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),F(g,Au.EventType.CLOSE,()=>{C||(C=!0,oe(Tn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(g))}),F(g,Au.EventType.ERROR,N=>{C||(C=!0,Pf(Tn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new he(Z.UNAVAILABLE,"The operation could not be completed")))}),F(g,Au.EventType.MESSAGE,N=>{if(!C){let q=N.data[0];Tt(!!q,16349);let ne=q,J=ne?.error||ne[0]?.error;if(J){oe(Tn,`RPC '${e}' stream ${i} received error:`,J);let ue=J.status,qe=function(_){let I=Bt[_];if(I!==void 0)return pU(I)}(ue),fe=J.message;qe===void 0&&(qe=Z.INTERNAL,fe="Unknown error status: "+ue+" with message "+J.message),C=!0,k.a_(new he(qe,fe)),g.close()}else oe(Tn,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}}),F(a,QC.STAT_EVENT,N=>{N.stat===ov.PROXY?oe(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ov.NOPROXY&&oe(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function rS(){return typeof document<"u"?document:null}function TU(n){return new OS(n,!0)}var Av=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var g2="PersistentStream",fD=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Av(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return S(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return S(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>S(this,null,function*(){this.state=0,this.start()}))}z_(e){return oe(g2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oe(g2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pD=class extends fD{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=xX(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ke.min():s.readTime?Ou(s.readTime):ke.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=l2(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=DS(c)?{documents:PX(o,c)}:{query:kX(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AX(o,s.resumeToken);let d=LS(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(ke.min())>0){a.readTime=DX(o,s.snapshotVersion.toTimestamp());let d=LS(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=OX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=l2(this.serializer),t.removeTarget=e,this.q_(t)}};var gD=class{},mD=class extends gD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,FS(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Z.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,FS(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(Z.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},yD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ko(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ju="RemoteStore",_D=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){Qf(this)&&(oe(Ju,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let d=Ke(c);d.Ea.add(4),yield Kf(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield qv(d)})}(this))}))}),this.Ra=new yD(r,i)}};function qv(n){return S(this,null,function*(){if(Qf(n))for(let e of n.da)yield e(!0)})}function Kf(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function CU(n,e){let t=Ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),WD(t)?GD(t):td(t).O_()&&HD(t,e))}function qD(n,e){let t=Ke(n),r=td(t);t.Ia.delete(e),r.O_()&&SU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qf(t)&&t.Ra.set("Unknown"))}function HD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}td(n).Y_(e)}function SU(n,e){n.Va.Ue(e),td(n).Z_(e)}function GD(n){n.Va=new NS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),td(n).start(),n.Ra.ua()}function WD(n){return Qf(n)&&!td(n).x_()&&n.Ia.size>0}function Qf(n){return Ke(n).Ea.size===0}function DU(n){n.Va=void 0}function QX(n){return S(this,null,function*(){n.Ra.set("Online")})}function YX(n){return S(this,null,function*(){n.Ia.forEach((e,t)=>{HD(n,e)})})}function JX(n,e){return S(this,null,function*(){DU(n),WD(n)?(n.Ra.ha(e),GD(n)):n.Ra.set("Unknown")})}function ZX(n,e,t){return S(this,null,function*(){if(n.Ra.set("Online"),e instanceof Ev&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){oe(Ju,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield m2(n,r)}else if(e instanceof Nu?n.Va.Ze(e):e instanceof wv?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{let r=yield bU(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Sn.EMPTY_BYTE_STRING,h.snapshotVersion)),SU(o,c);let g=new zf(h.target,c,d,h.sequenceNumber);HD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){oe(Ju,"Failed to raise snapshot:",r),yield m2(n,r)}})}function m2(n,e,t){return S(this,null,function*(){if(!ed(e))throw e;n.Ea.add(1),yield Kf(n),n.Ra.set("Offline"),t||(t=()=>bU(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){oe(Ju,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield qv(n)}))})}function y2(n,e){return S(this,null,function*(){let t=Ke(n);t.asyncQueue.verifyOperationInProgress(),oe(Ju,"RemoteStore received new credentials");let r=Qf(t);t.Ea.add(3),yield Kf(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield qv(t)})}function XX(n,e){return S(this,null,function*(){let t=Ke(n);e?(t.Ea.delete(2),yield qv(t)):e||(t.Ea.add(2),yield Kf(t),t.Ra.set("Unknown"))})}function td(n){return n.ma||(n.ma=function(t,r,i){let o=Ke(t);return o.sa(),new pD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:QX.bind(null,n),t_:YX.bind(null,n),r_:JX.bind(null,n),H_:ZX.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.B_(),WD(n)?GD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),DU(n))}))),n.ma}var vD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function AU(n,e){if(ko("AsyncQueue",`${e}: ${n}`),ed(n))return new he(Z.UNAVAILABLE,`${e}: ${n}`);throw n}var Rv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Sf(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Mv=class{constructor(){this.ga=new Ft(we.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Zu=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Rv.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},ED=class{constructor(){this.queries=_2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ke(t),o=i.queries;i.queries=_2(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new he(Z.ABORTED,"Firestore shutting down"))}};function _2(){return new Lo(n=>oU(n),zv)}function eee(n,e){return S(this,null,function*(){let t=Ke(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new wD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=AU(s,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&KD(t)})}function tee(n,e){return S(this,null,function*(){let t=Ke(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function nee(n,e){let t=Ke(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&KD(t)}function ree(n,e,t){let r=Ke(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function KD(n){n.Ca.forEach(e=>{e.next()})}var ID,v2;(v2=ID||(ID={})).Ma="default",v2.Cache="cache";var bD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ID.Cache}};var xv=class{constructor(e){this.key=e}},Pv=class{constructor(e){this.key=e}},TD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=sU(e),this.tu=new Rv(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Mv,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let T=i.get(h),C=$v(this.query,g)?g:null,k=!!T&&this.mutatedKeys.has(T.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),N=!1;T&&C?T.data.isEqual(C.data)?k!==F&&(r.track({type:3,doc:C}),N=!0):this.su(T,C)||(r.track({type:2,doc:C}),N=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(a=!0)):!T&&C?(r.track({type:0,doc:C}),N=!0):T&&!C&&(r.track({type:1,doc:T}),N=!0,(c||d)&&(a=!0)),N&&(C?(s=s.add(C),o=F?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>function(C,k){let F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:N})}};return F(C)-F(k)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,s.length!==0||d?{snapshot:new Zu(this.query,e.tu,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Pv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new xv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},QD="SyncEngine",CD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},SD=class{constructor(e){this.key=e,this.hu=!1}},DD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Lo(a=>oU(a),zv),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(we.comparator),this.Au=new Map,this.Ru=new qf,this.Vu={},this.mu=new Map,this.fu=$f.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function iee(n,e,t=!0){return S(this,null,function*(){let r=kU(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield RU(r,e,t,!0),i})}function oee(n,e){return S(this,null,function*(){let t=kU(n);yield RU(t,e,!0,!1)})}function RU(n,e,t,r){return S(this,null,function*(){let i=yield GX(n.localStore,Fi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield see(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&CU(n.remoteStore,i),a})}function see(n,e,t,r,i){return S(this,null,function*(){n.pu=(g,T,C)=>function(F,N,q,ne){return S(this,null,function*(){let J=N.view.ru(q);J.Cs&&(J=yield f2(F.localStore,N.query,!1).then(({documents:R})=>N.view.ru(R,J)));let ue=ne&&ne.targetChanges.get(N.targetId),qe=ne&&ne.targetMismatches.get(N.targetId)!=null,fe=N.view.applyChanges(J,F.isPrimaryClient,ue,qe);return E2(F,N.targetId,fe.au),fe.snapshot})}(n,g,T,C);let o=yield f2(n.localStore,e,!0),s=new TD(e,o.Qs),a=s.ru(o.documents),c=jf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);E2(n,t,d.au);let h=new CD(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function aee(n,e,t){return S(this,null,function*(){let r=Ke(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!zv(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qD(r.remoteStore,i.targetId),AD(r,i.targetId)}).catch(Uv))):(AD(r,i.targetId),yield sD(r.localStore,i.targetId,!0))})}function cee(n,e){return S(this,null,function*(){let t=Ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qD(t.remoteStore,r.targetId))})}function MU(n,e){return S(this,null,function*(){let t=Ke(n);try{let r=yield qX(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Tt(s.hu,14607):i.removedDocuments.size>0&&(Tt(s.hu,42227),s.hu=!1))}),yield PU(t,r,e)}catch(r){yield Uv(r)}})}function w2(n,e,t){let r=Ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ke(s);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let T of g.Sa)T.va(a)&&(d=!0)}),d&&KD(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lee(n,e,t){return S(this,null,function*(){let r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ft(we.comparator);s=s.insert(o,ri.newNoDocument(o,ke.min()));let a=Ye().add(o),c=new vv(ke.min(),new Map,new Ft(He),s,a);yield MU(r,c),r.du=r.du.remove(o),r.Au.delete(e),YD(r)}else yield sD(r.localStore,e,!1).then(()=>AD(r,e,t)).catch(Uv)})}function AD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||xU(n,r)})}function xU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(qD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),YD(n))}function E2(n,e,t){for(let r of t)r instanceof xv?(n.Ru.addReference(r.key,e),uee(n,r)):r instanceof Pv?(oe(QD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||xU(n,r.key)):De(19791,{wu:r})}function uee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(oe(QD,"New document in limbo: "+t),n.Eu.add(r),YD(n))}function YD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new we(rn.fromString(e)),r=n.fu.next();n.Au.set(r,new SD(t)),n.du=n.du.insert(t,r),CU(n.remoteStore,new zf(Fi(zD(t.path)),r,"TargetPurposeLimboResolution",FD.ce))}}function PU(n,e,t){return S(this,null,function*(){let r=Ke(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=nD.As(c.targetId,d);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(c,d){return S(this,null,function*(){let h=Ke(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>H.forEach(d,T=>H.forEach(T.Es,C=>h.persistence.referenceDelegate.addReference(g,T.targetId,C)).next(()=>H.forEach(T.ds,C=>h.persistence.referenceDelegate.removeReference(g,T.targetId,C)))))}catch(g){if(!ed(g))throw g;oe($D,"Failed to update sequence numbers: "+g)}for(let g of d){let T=g.targetId;if(!g.fromCache){let C=h.Ms.get(T),k=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(T,F)}}})}(r.localStore,o))})}function dee(n,e){return S(this,null,function*(){let t=Ke(n);if(!t.currentUser.isEqual(e)){oe(QD,"User change. New user:",e.toKey());let r=yield IU(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new he(Z.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield PU(t,r.Ls)}})}function hee(n,e){let t=Ke(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let i=Ye(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function kU(n){let e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lee.bind(null,e),e.Pu.H_=nee.bind(null,e.eventManager),e.Pu.yu=ree.bind(null,e.eventManager),e}var NU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=TU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return $X(this.persistence,new iD,t.initialUser,this.serializer)}Cu(t){return new Tv(tD.mi,this.serializer)}Du(t){return new aD}terminate(){return S(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),RD=class extends NU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof Cv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new Tv(r=>Cv.mi(r,t),this.serializer)}};var fee=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>w2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dee.bind(null,this.syncEngine),yield XX(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ED}()}createDatastore(t){let r=TU(t.databaseInfo.databaseId),i=function(s){return new hD(s)}(t.databaseInfo);return function(s,a,c,d){return new mD(s,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new _D(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>w2(this.syncEngine,r,0),function(){return Dv.v()?new Dv:new cD}())}createSyncEngine(t,r){return function(o,s,a,c,d,h,g){let T=new DD(o,s,a,c,d,h);return g&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){yield function(r){return S(this,null,function*(){let i=Ke(r);oe(Ju,"RemoteStore shutting down."),i.Ea.add(5),yield Kf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var MD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Js="FirestoreClient",xD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){oe(Js,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(oe(Js,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=AU(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function iS(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),oe(Js,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield IU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function I2(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield pee(n);oe(Js,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>y2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>y2(e.remoteStore,i)),n._onlineComponents=e})}function pee(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Js,"Using user provided OfflineComponentProvider");try{yield iS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Pf("Error using user provided cache. Falling back to memory cache: "+t),yield iS(n,new NU)}}else oe(Js,"Using default OfflineComponentProvider"),yield iS(n,new RD(void 0));return n._offlineComponents})}function gee(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Js,"Using user provided OnlineComponentProvider"),yield I2(n,n._uninitializedComponentsProvider._online)):(oe(Js,"Using default OnlineComponentProvider"),yield I2(n,new fee))),n._onlineComponents})}function b2(n){return S(this,null,function*(){let e=yield gee(n),t=e.eventManager;return t.onListen=iee.bind(null,e.syncEngine),t.onUnlisten=aee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cee.bind(null,e.syncEngine),t})}function OU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var T2=new Map;var mee="firestore.googleapis.com",C2=!0,kv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mee,this.ssl=C2}else this.host=e.host,this.ssl=e.ssl??C2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BX)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},PD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sS;switch(r.type){case"firstParty":return new lS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=T2.get(t);r&&(oe("ComponentProvider","Removing Datastore"),T2.delete(t),r.terminate())}(this),Promise.resolve()}};var Nv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Po=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Gf(t,n._jsonSchema))return new n(e,r||null,new we(rn.fromString(t.referencePath)))}};Po._jsonSchemaVersion="firestore/documentReference/1.0",Po._jsonSchema={type:zt("string",Po._jsonSchemaVersion),referencePath:zt("string")};var kD=class n extends Nv{constructor(e,t,r){super(e,t,zD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Po(this.firestore,null,new we(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var S2="AsyncQueue",Ov=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Av(this,"async_queue_retry"),this._c=()=>{let r=rS();r&&oe(S2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=rS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=rS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return S(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ed(e))throw e;oe(S2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ko("INTERNAL UNHANDLED ERROR: ",D2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=vD.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:D2(this.nc)})}verifyOperationInProgress(){}Tc(){return S(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function D2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function A2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Hf=class extends PD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ov,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ov(e),this._firestoreClient=void 0,yield e}})}};function yee(n){if(n._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_ee(n),n._firestoreClient}function _ee(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new pS(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,OU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new xD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Lu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Sn.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Lu._jsonSchemaVersion="firestore/bytes/1.0",Lu._jsonSchema={type:zt("string",Lu._jsonSchemaVersion),bytes:zt("string")};var Lv=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fu=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Fu._jsonSchemaVersion="firestore/geoPoint/1.0",Fu._jsonSchema={type:zt("string",Fu._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};var Vu=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Vu._jsonSchemaVersion="firestore/vectorValue/1.0",Vu._jsonSchema={type:zt("string",Vu._jsonSchemaVersion),vectorValues:zt("object")};var vee=new RegExp("[~\\*/\\[\\]]");function wee(n,e,t){if(e.search(vee)>=0)throw R2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lv(...e.split("."))._internalPath}catch{throw R2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function R2(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new he(Z.INVALID_ARGUMENT,a+n+c)}var Fv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Po(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ND(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(LU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ND=class extends Fv{data(){return super.data()}};function LU(n,e){return typeof e=="string"?wee(n,e):e instanceof Lv?e._internalPath:e._delegate._internalPath}function Eee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var OD=class{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wf(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Of].arrayValue?.values?.map(r=>It(r.doubleValue));return new Vu(t)}convertGeoPoint(e){return new Fu(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nf(e));default:return null}}convertTimestamp(e){let t=No(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=rn.fromString(e);Tt(wU(r),9688,{name:e});let i=new yv(r.get(1),r.get(3)),o=new we(r.popFirst(5));return i.isEqual(t)||ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var vc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},wc=class n extends Fv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(LU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",wc._jsonSchema={type:zt("string",wc._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};var Uu=class extends wc{data(e={}){return super.data(e)}},Bu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uu(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Iee(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Iee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}Bu._jsonSchemaVersion="firestore/querySnapshot/1.0",Bu._jsonSchema={type:zt("string",Bu._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};var Vv=class extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Po(this.firestore,null,t)}};function FU(n,...e){n=js(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||A2(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(A2(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Po)s=XC(n.firestore,Hf),a=zD(n._key.path),o={next:c=>{e[r]&&e[r](bee(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=XC(n,Nv);s=XC(c.firestore,Hf),a=c._query;let d=new Vv(s);o={next:h=>{e[r]&&e[r](new Bu(s,d,c,h))},error:e[r+1],complete:e[r+2]},Eee(n._query)}return function(d,h,g,T){let C=new MD(T),k=new bD(h,C,g);return d.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return eee(yield b2(d),k)})),()=>{C.Nu(),d.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return tee(yield b2(d),k)}))}}(yee(s),a,i,o)}function bee(n,e,t){let r=t.docs.get(e._key),i=new Vv(n);return new wc(n,i,e._key,r,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Xu=i})(Iu),$s(new ei("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hf(new aS(r.getProvider("auth-internal")),new uS(s,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yv(d.options.projectId,h)}(s,i),s);return o=z({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Eo(jV,zV,e),Eo(jV,zV,"esm2020")})();var Hv=function(){return Hv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hv.apply(this,arguments)};var Tee={includeMetadataChanges:!1};function VU(n,e){return e===void 0&&(e=Tee),new Le(function(t){var r=FU(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function UU(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Hv(Hv({},r),(t={},t[e.idField]=n.id,t))}function BU(n){return VU(n,{includeMetadataChanges:!0}).pipe(Ie(function(e){return e.docs}))}function jU(n,e){return e===void 0&&(e={}),BU(n).pipe(Ie(function(t){return t.map(function(r){return UU(r,e)})}))}var zU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$U={};var Zs,JD;(function(){var n;function e(R,_){function I(){}I.prototype=_.prototype,R.D=_.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(A,D,P){for(var E=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)E[_t-2]=arguments[_t];return _.prototype[D].apply(A,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,_,I){I||(I=0);var A=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)A[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)A[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=R.g[0],I=R.g[1],D=R.g[2];var P=R.g[3],E=_+(P^I&(D^P))+A[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[1]+3905402710&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[2]+606105819&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[5]+1200080426&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[6]+2821735955&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[9]+2336552879&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[10]+4294925233&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(P^I&(D^P))+A[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=P+(D^_&(I^D))+A[13]+4254626195&4294967295,P=_+(E<<12&4294967295|E>>>20),E=D+(I^P&(_^I))+A[14]+2792965006&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(_^D&(P^_))+A[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^P&(I^D))+A[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[6]+3225465664&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[11]+643717713&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[10]+38016083&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[15]+3634488961&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[14]+3275163606&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[3]+4107603335&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^P&(I^D))+A[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(_^I))+A[2]+4243563512&4294967295,P=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(P^_))+A[7]+1735328473&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^_&(D^P))+A[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^P)+A[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[8]+2272392833&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[11]+1839030562&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[4]+1272893353&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[7]+4139469664&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[0]+3936430074&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[3]+3572445317&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^P)+A[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=P+(_^I^D)+A[12]+3873151461&4294967295,P=_+(E<<11&4294967295|E>>>21),E=D+(P^_^I)+A[15]+530742520&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^_)+A[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~P))+A[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[7]+1126891415&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[14]+2878612391&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[3]+2399980690&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[10]+4293915773&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[15]+4264355552&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[6]+2734768916&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~P))+A[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=P+(I^(_|~D))+A[11]+3174756917&4294967295,P=_+(E<<10&4294967295|E>>>22),E=D+(_^(P|~I))+A[2]+718787259&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~_))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+P&4294967295}r.prototype.u=function(R,_){_===void 0&&(_=R.length);for(var I=_-this.blockSize,A=this.B,D=this.h,P=0;P<_;){if(D==0)for(;P<=I;)i(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<_;)if(A[D++]=R.charCodeAt(P++),D==this.blockSize){i(this,A),D=0;break}}else for(;P<_;)if(A[D++]=R[P++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;var I=8*this.o;for(_=R.length-8;_<R.length;++_)R[_]=I&255,I/=256;for(this.u(R),R=Array(16),_=I=0;4>_;++_)for(var A=0;32>A;A+=8)R[I++]=this.g[_]>>>A&255;return R};function o(R,_){var I=a;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=_(R)}function s(R,_){this.h=_;for(var I=[],A=!0,D=R.length-1;0<=D;D--){var P=R[D]|0;A&&P==_||(I[D]=P,A=!1)}this.g=I}var a={};function c(R){return-128<=R&&128>R?o(R,function(_){return new s([_|0],0>_?-1:0)}):new s([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return g;if(0>R)return N(d(-R));for(var _=[],I=1,A=0;R>=I;A++)_[A]=R/I|0,I*=4294967296;return new s(_,0)}function h(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return N(h(R.substring(1),_));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),A=g,D=0;D<R.length;D+=8){var P=Math.min(8,R.length-D),E=parseInt(R.substring(D,D+P),_);8>P?(P=d(Math.pow(_,P)),A=A.j(P).add(d(E))):(A=A.j(I),A=A.add(d(E)))}return A}var g=c(0),T=c(1),C=c(16777216);n=s.prototype,n.m=function(){if(F(this))return-N(this).m();for(var R=0,_=1,I=0;I<this.g.length;I++){var A=this.i(I);R+=(0<=A?A:4294967296+A)*_,_*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(F(this))return"-"+N(this).toString(R);for(var _=d(Math.pow(R,6)),I=this,A="";;){var D=ue(I,_).g;I=q(I,D.j(_));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=D,k(I))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(var _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function F(R){return R.h==-1}n.l=function(R){return R=q(this,R),F(R)?-1:k(R)?0:1};function N(R){for(var _=R.g.length,I=[],A=0;A<_;A++)I[A]=~R.g[A];return new s(I,~R.h).add(T)}n.abs=function(){return F(this)?N(this):this},n.add=function(R){for(var _=Math.max(this.g.length,R.g.length),I=[],A=0,D=0;D<=_;D++){var P=A+(this.i(D)&65535)+(R.i(D)&65535),E=(P>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);A=E>>>16,P&=65535,E&=65535,I[D]=E<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function q(R,_){return R.add(N(_))}n.j=function(R){if(k(this)||k(R))return g;if(F(this))return F(R)?N(this).j(N(R)):N(N(this).j(R));if(F(R))return N(this.j(N(R)));if(0>this.l(C)&&0>R.l(C))return d(this.m()*R.m());for(var _=this.g.length+R.g.length,I=[],A=0;A<2*_;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<R.g.length;D++){var P=this.i(A)>>>16,E=this.i(A)&65535,_t=R.i(D)>>>16,Ln=R.i(D)&65535;I[2*A+2*D]+=E*Ln,ne(I,2*A+2*D),I[2*A+2*D+1]+=P*Ln,ne(I,2*A+2*D+1),I[2*A+2*D+1]+=E*_t,ne(I,2*A+2*D+1),I[2*A+2*D+2]+=P*_t,ne(I,2*A+2*D+2)}for(A=0;A<_;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=_;A<2*_;A++)I[A]=0;return new s(I,0)};function ne(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function J(R,_){this.g=R,this.h=_}function ue(R,_){if(k(_))throw Error("division by zero");if(k(R))return new J(g,g);if(F(R))return _=ue(N(R),_),new J(N(_.g),N(_.h));if(F(_))return _=ue(R,N(_)),new J(N(_.g),_.h);if(30<R.g.length){if(F(R)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var I=T,A=_;0>=A.l(R);)I=qe(I),A=qe(A);var D=fe(I,1),P=fe(A,1);for(A=fe(A,2),I=fe(I,2);!k(A);){var E=P.add(A);0>=E.l(R)&&(D=D.add(I),P=E),A=fe(A,1),I=fe(I,1)}return _=q(R,D.j(_)),new J(D,_)}for(D=g;0<=R.l(_);){for(I=Math.max(1,Math.floor(R.m()/_.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=d(I),E=P.j(_);F(E)||0<E.l(R);)I-=A,P=d(I),E=P.j(_);k(P)&&(P=T),D=D.add(P),R=q(R,E)}return new J(D,R)}n.A=function(R){return ue(this,R).h},n.and=function(R){for(var _=Math.max(this.g.length,R.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)&R.i(A);return new s(I,this.h&R.h)},n.or=function(R){for(var _=Math.max(this.g.length,R.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)|R.i(A);return new s(I,this.h|R.h)},n.xor=function(R){for(var _=Math.max(this.g.length,R.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)^R.i(A);return new s(I,this.h^R.h)};function qe(R){for(var _=R.g.length+1,I=[],A=0;A<_;A++)I[A]=R.i(A)<<1|R.i(A-1)>>>31;return new s(I,R.h)}function fe(R,_){var I=_>>5;_%=32;for(var A=R.g.length-I,D=[],P=0;P<A;P++)D[P]=0<_?R.i(P+I)>>>_|R.i(P+I+1)<<32-_:R.i(P+I);return new s(D,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JD=$U.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Zs=$U.Integer=s}).apply(typeof zU<"u"?zU:typeof self<"u"?self:typeof window<"u"?window:{});var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fo={};var ZD,Cee,nd,XD,Yf,Wv,eA,tA,nA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gv=="object"&&Gv];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var M=0;M<l.length-1;M++){var L=l[M];if(!(L in m))break e;m=m[L]}l=l[l.length-1],M=m[l],f=f(M),f!=M&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var m=0,M=!1,L={next:function(){if(!M&&m<l.length){var B=m++;return{value:f(B,l[B]),done:!1}}return M=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function g(l,f,m){if(!l)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,M),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function T(l,f,m){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,T.apply(null,arguments)}function C(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var M=m.slice();return M.push.apply(M,arguments),l.apply(this,M)}}function k(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(M,L,B){for(var G=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)G[Je-2]=arguments[Je];return f.prototype[L].apply(M,G)}}function F(l){let f=l.length;if(0<f){let m=Array(f);for(let M=0;M<f;M++)m[M]=l[M];return m}return[]}function N(l,f){for(let m=1;m<arguments.length;m++){let M=arguments[m];if(c(M)){let L=l.length||0,B=M.length||0;l.length=L+B;for(let G=0;G<B;G++)l[L+G]=M[G]}else l.push(M)}}class q{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ne(l){return/^[\s\xa0]*$/.test(l)}function J(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ue(l){return ue[" "](l),l}ue[" "]=function(){};var qe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function fe(l,f,m){for(let M in l)f.call(m,l[M],M,l)}function R(l,f){for(let m in l)f.call(void 0,l[m],m,l)}function _(l){let f={};for(let m in l)f[m]=l[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let m,M;for(let L=1;L<arguments.length;L++){M=arguments[L];for(m in M)l[m]=M[m];for(let B=0;B<I.length;B++)m=I[B],Object.prototype.hasOwnProperty.call(M,m)&&(l[m]=M[m])}}function D(l){var f=1;l=l.split(":");let m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function P(l){a.setTimeout(()=>{throw l},0)}function E(){var l=qo;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class _t{constructor(){this.h=this.g=null}add(f,m){let M=Ln.get();M.set(f,m),this.h?this.h.next=M:this.g=M,this.h=M}}var Ln=new q(()=>new fE,l=>l.reset());class fE{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let da,ci=!1,qo=new _t,Bp=()=>{let l=a.Promise.resolve(void 0);da=()=>{l.then(jp)}};var jp=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(m){P(m)}var f=Ln;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ci=!1};function Rr(){this.s=this.s,this.C=this.C}Rr.prototype.s=!1,Rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Gt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var jc=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function Ki(l,f){if(Gt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,M=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(qe){e:{try{ue(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Nd[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ki.aa.h.call(this)}}k(Ki,Gt);var Nd={2:"touch",3:"pen",4:"mouse"};Ki.prototype.h=function(){Ki.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Qi="closure_listenable_"+(1e6*Math.random()|0),Od=0;function zp(l,f,m,M,L){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!M,this.ha=L,this.key=++Od,this.da=this.fa=!1}function ha(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function zc(l){this.src=l,this.g={},this.h=0}zc.prototype.add=function(l,f,m,M,L){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var G=qc(l,f,M,L);return-1<G?(f=l[G],m||(f.fa=!1)):(f=new zp(f,this.src,B,!!M,L),f.fa=m,l.push(f)),f};function $c(l,f){var m=f.type;if(m in l.g){var M=l.g[m],L=Array.prototype.indexOf.call(M,f,void 0),B;(B=0<=L)&&Array.prototype.splice.call(M,L,1),B&&(ha(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function qc(l,f,m,M){for(var L=0;L<l.length;++L){var B=l[L];if(!B.da&&B.listener==f&&B.capture==!!m&&B.ha==M)return L}return-1}var fa="closure_lm_"+(1e6*Math.random()|0),Hc={};function $p(l,f,m,M,L){if(M&&M.once)return Wc(l,f,m,M,L);if(Array.isArray(f)){for(var B=0;B<f.length;B++)$p(l,f[B],m,M,L);return null}return m=Yi(m),l&&l[Qi]?l.K(f,m,d(M)?!!M.capture:!!M,L):Gc(l,f,m,!1,M,L)}function Gc(l,f,m,M,L,B){if(!f)throw Error("Invalid event type");var G=d(L)?!!L.capture:!!L,Je=Kc(l);if(Je||(l[fa]=Je=new zc(l)),m=Je.add(f,m,M,G,B),m.proxy)return m;if(M=Ld(),m.proxy=M,M.src=l,M.listener=m,l.addEventListener)jc||(L=G),L===void 0&&(L=!1),l.addEventListener(f.toString(),M,L);else if(l.attachEvent)l.attachEvent(pa(f.toString()),M);else if(l.addListener&&l.removeListener)l.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ld(){function l(m){return f.call(l.src,l.listener,m)}let f=pE;return l}function Wc(l,f,m,M,L){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Wc(l,f[B],m,M,L);return null}return m=Yi(m),l&&l[Qi]?l.L(f,m,d(M)?!!M.capture:!!M,L):Gc(l,f,m,!0,M,L)}function Wt(l,f,m,M,L){if(Array.isArray(f))for(var B=0;B<f.length;B++)Wt(l,f[B],m,M,L);else M=d(M)?!!M.capture:!!M,m=Yi(m),l&&l[Qi]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],m=qc(B,m,M,L),-1<m&&(ha(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Kc(l))&&(f=l.g[f.toString()],l=-1,f&&(l=qc(f,m,M,L)),(m=-1<l?f[l]:null)&&Kt(m))}function Kt(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Qi])$c(f.i,l);else{var m=l.type,M=l.proxy;f.removeEventListener?f.removeEventListener(m,M,l.capture):f.detachEvent?f.detachEvent(pa(m),M):f.addListener&&f.removeListener&&f.removeListener(M),(m=Kc(f))?($c(m,l),m.h==0&&(m.src=null,f[fa]=null)):ha(l)}}}function pa(l){return l in Hc?Hc[l]:Hc[l]="on"+l}function pE(l,f){if(l.da)l=!0;else{f=new Ki(f,this);var m=l.listener,M=l.ha||l.src;l.fa&&Kt(l),l=m.call(M,f)}return l}function Kc(l){return l=l[fa],l instanceof zc?l:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yi(l){return typeof l=="function"?l:(l[Fd]||(l[Fd]=function(f){return l.handleEvent(f)}),l[Fd])}function Qt(){Rr.call(this),this.i=new zc(this),this.M=this,this.F=null}k(Qt,Rr),Qt.prototype[Qi]=!0,Qt.prototype.removeEventListener=function(l,f,m,M){Wt(this,l,f,m,M)};function sn(l,f){var m,M=l.F;if(M)for(m=[];M;M=M.F)m.push(M);if(l=l.M,M=f.type||f,typeof f=="string")f=new Gt(f,l);else if(f instanceof Gt)f.target=f.target||l;else{var L=f;f=new Gt(M,l),A(f,L)}if(L=!0,m)for(var B=m.length-1;0<=B;B--){var G=f.g=m[B];L=Ho(G,M,!0,f)&&L}if(G=f.g=l,L=Ho(G,M,!0,f)&&L,L=Ho(G,M,!1,f)&&L,m)for(B=0;B<m.length;B++)G=f.g=m[B],L=Ho(G,M,!1,f)&&L}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],M=0;M<m.length;M++)ha(m[M]);delete l.g[f],l.h--}}this.F=null},Qt.prototype.K=function(l,f,m,M){return this.i.add(String(l),f,!1,m,M)},Qt.prototype.L=function(l,f,m,M){return this.i.add(String(l),f,!0,m,M)};function Ho(l,f,m,M){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,B=0;B<f.length;++B){var G=f[B];if(G&&!G.da&&G.capture==m){var Je=G.listener,kt=G.ha||G.src;G.fa&&$c(l.i,G),L=Je.call(kt,M)!==!1&&L}}return L&&!M.defaultPrevented}function qp(l,f,m){if(typeof l=="function")m&&(l=T(l,m));else if(l&&typeof l.handleEvent=="function")l=T(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Hp(l){l.g=qp(()=>{l.g=null,l.i&&(l.i=!1,Hp(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Gp extends Rr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Hp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(l){Rr.call(this),this.h=l,this.g={}}k(Go,Rr);var Wo=[];function Qc(l){fe(l.g,function(f,m){this.g.hasOwnProperty(m)&&Kt(f)},l),l.g={}}Go.prototype.N=function(){Go.aa.N.call(this),Qc(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=a.JSON.stringify,Ji=a.JSON.parse,Wp=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ko(){}Ko.prototype.h=null;function Vd(l){return l.h||(l.h=l.i())}function Qo(){}var Yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yt(){Gt.call(this,"d")}k(Yt,Gt);function Yc(){Gt.call(this,"c")}k(Yc,Gt);var er={},Jo=null;function Jc(){return Jo=Jo||new Qt}er.La="serverreachability";function Kp(l){Gt.call(this,er.La,l)}k(Kp,Gt);function mr(l){let f=Jc();sn(f,new Kp(f))}er.STAT_EVENT="statevent";function Qp(l,f){Gt.call(this,er.STAT_EVENT,l),this.stat=f}k(Qp,Gt);function hn(l){let f=Jc();sn(f,new Qp(f,l))}er.Ma="timingevent";function ma(l,f){Gt.call(this,er.Ma,l),this.size=f}k(ma,Gt);function Zo(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Xo(){this.g=!0}Xo.prototype.xa=function(){this.g=!1};function Ud(l,f,m,M,L,B){l.info(function(){if(l.g)if(B)for(var G="",Je=B.split("&"),kt=0;kt<Je.length;kt++){var Ze=Je[kt].split("=");if(1<Ze.length){var yn=Ze[0];Ze=Ze[1];var _n=yn.split("_");G=2<=_n.length&&_n[1]=="type"?G+(yn+"="+Ze+"&"):G+(yn+"=redacted&")}}else G=null;else G=B;return"XMLHTTP REQ ("+M+") [attempt "+L+"]: "+f+`
`+m+`
`+G})}function ya(l,f,m,M,L,B,G){l.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+L+"]: "+f+`
`+m+`
`+B+" "+G})}function es(l,f,m,M){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Yp(l,m)+(M?" "+M:"")})}function li(l,f){l.info(function(){return"TIMEOUT: "+f})}Xo.prototype.info=function(){};function Yp(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var M=m[l];if(!(2>M.length)){var L=M[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return ga(m)}catch{return f}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},va;function wa(){}k(wa,Ko),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},va=new wa;function ui(l,f,m,M){this.j=l,this.i=f,this.l=m,this.R=M||1,this.U=new Go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var Jp={},ts={};function Xc(l,f,m){l.L=1,l.v=rl(Mr(f)),l.m=m,l.P=!0,el(l,null)}function el(l,f){l.F=Date.now(),rs(l),l.A=Mr(l.v);var m=l.A,M=l.R;Array.isArray(M)||(M=[String(M)]),og(m.i,"t",M),l.C=0,m=l.j.J,l.h=new Bd,l.g=p(l.j,m?f:null,!l.m),0<l.O&&(l.M=new Gp(T(l.Y,l,l.g),l.O)),f=l.U,m=l.g,M=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Wo[0]=L.toString()),L=Wo);for(var B=0;B<L.length;B++){var G=$p(m,L[B],M||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),mr(),Ud(l.i,l.u,l.A,l.l,l.R,l.m)}ui.prototype.ca=function(l){l=l.target;let f=this.M;f&&Vn(l)==3?f.j():this.Y(l)},ui.prototype.Y=function(l){try{if(l==this.g)e:{let _n=Vn(this.g);var f=this.g.Ba();let hl=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||ug(this.g)))){this.J||_n!=4||f==7||(f==8||0>=hl?mr(3):mr(2)),tl(this);var m=this.g.Z();this.X=m;t:if(ns(this)){var M=ug(this.g);l="";var L=M.length,B=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),is(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(M[f],{stream:!(B&&f==L-1)});M.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,ya(this.i,this.u,this.A,this.l,this.R,_n,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,kt=this.g;if((Je=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Je)){var Ze=Je;break t}}Ze=null}if(m=Ze)es(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,m);else{this.o=!1,this.s=3,hn(12),di(this),is(this);break e}}if(this.P){m=!0;let Or;for(;!this.J&&this.C<G.length;)if(Or=Zi(this,G),Or==ts){_n==4&&(this.s=4,hn(14),m=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==Jp){this.s=4,hn(15),es(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else es(this.i,this.l,Or,null),Ea(this,Or);if(ns(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||G.length!=0||this.h.h||(this.s=1,hn(16),m=!1),this.o=this.o&&m,!m)es(this.i,this.l,G,"[Invalid Chunked Response]"),di(this),is(this);else if(0<G.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),dl(yn),yn.M=!0,hn(11))}}else es(this.i,this.l,G,null),Ea(this,G);_n==4&&di(this),this.o&&!this.J&&(_n==4?mn(this.j,this):(this.o=!1,rs(this)))}else dg(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),di(this),is(this)}}}catch{}finally{}};function ns(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Zi(l,f){var m=l.C,M=f.indexOf(`
`,m);return M==-1?ts:(m=Number(f.substring(m,M)),isNaN(m)?Jp:(M+=1,M+m>f.length?ts:(f=f.slice(M,M+m),l.C=M+m,f)))}ui.prototype.cancel=function(){this.J=!0,di(this)};function rs(l){l.S=Date.now()+l.I,Zp(l,l.I)}function Zp(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Zo(T(l.ba,l),f)}function tl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ui.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(li(this.i,this.A),this.L!=2&&(mr(),hn(17)),di(this),this.s=2,is(this)):Zp(this,this.S-l)};function is(l){l.j.G==0||l.J||mn(l.j,l)}function di(l){tl(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Qc(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ea(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Hd(m.h,l))){if(!l.K&&Hd(m.h,l)&&m.G==3){try{var M=m.Da.g.parse(f)}catch{M=null}if(Array.isArray(M)&&M.length==3){var L=M;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)eo(m),ds(m);else break e;ul(m),hn(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Zo(T(m.Za,m),6e3));if(1>=qd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((l.K||m.g==l)&&eo(m),!ne(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let Ze=L[f];if(m.T=Ze[0],Ze=Ze[1],m.G==2)if(Ze[0]=="c"){m.K=Ze[1],m.ia=Ze[2];let yn=Ze[3];yn!=null&&(m.la=yn,m.j.info("VER="+m.la));let _n=Ze[4];_n!=null&&(m.Aa=_n,m.j.info("SVER="+m.Aa));let hl=Ze[5];hl!=null&&typeof hl=="number"&&0<hl&&(M=1.5*hl,m.L=M,m.j.info("backChannelRequestTimeoutMs_="+M)),M=m;let Or=l.g;if(Or){let hg=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hg){var B=M.h;B.g||hg.indexOf("spdy")==-1&&hg.indexOf("quic")==-1&&hg.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(yr(B,B.h),B.h=null))}if(M.D){let mE=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;mE&&(M.ya=mE,ft(M.I,M.D,mE))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),M=m;var G=l;if(M.qa=u(M,M.J?M.ia:null,M.W),G.K){tr(M.h,G);var Je=G,kt=M.L;kt&&(Je.I=kt),Je.B&&(tl(Je),rs(Je)),M.g=G}else eh(M);0<m.i.length&&Aa(m)}else Ze[0]!="stop"&&Ze[0]!="close"||pi(m,7);else m.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?pi(m,7):al(m):Ze[0]!="noop"&&m.l&&m.l.ta(Ze),m.v=0)}}mr(4)}catch{}}var jd=class{constructor(l,f){this.g=l,this.map=f}};function zd(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $d(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function qd(l){return l.h?1:l.g?l.g.size:0}function Hd(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function yr(l,f){l.g?l.g.add(f):l.h=f}function tr(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}zd.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function os(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let m of l.g.values())f=f.concat(m.D);return f}return F(l.i)}function Ia(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,M=0;M<m;M++)f.push(l[M]);return f}f=[],m=0;for(M in l)f[m++]=l[M];return f}function Gd(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(let M in l)f[m++]=M;return f}}}function at(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=Gd(l),M=Ia(l),L=M.length,B=0;B<L;B++)f.call(void 0,M[B],m&&m[B],l)}var ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var M=l[m].indexOf("="),L=null;if(0<=M){var B=l[m].substring(0,M);L=l[m].substring(M+1)}else B=l[m];f(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function nr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof nr){this.h=l.h,Ca(this,l.j),this.o=l.o,this.g=l.g,nl(this,l.s),this.l=l.l;var f=l.i,m=new Sa;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Xp(this,m),this.m=l.m}else l&&(f=String(l).match(ba))?(this.h=!1,Ca(this,f[1]||"",!0),this.o=xr(f[2]||""),this.g=xr(f[3]||"",!0),nl(this,f[4]),this.l=xr(f[5]||"",!0),Xp(this,f[6]||"",!0),this.m=xr(f[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}nr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(rr(f,Wd,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(rr(f,Wd,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(rr(m,m.charAt(0)=="/"?ng:tg,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",rr(m,ss)),l.join("")};function Mr(l){return new nr(l)}function Ca(l,f,m){l.j=m?xr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function nl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Xp(l,f,m){f instanceof Sa?(l.i=f,il(l.i,l.h)):(m||(f=rr(f,rg)),l.i=new Sa(f,l.h))}function ft(l,f,m){l.i.set(f,m)}function rl(l){return ft(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function rr(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,eg),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function eg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wd=/[#\/\?@]/g,tg=/[#\?:]/g,ng=/[#\?]/g,rg=/[#\?@]/g,ss=/#/g;function Sa(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function hi(l){l.g||(l.g=new Map,l.h=0,l.i&&Ta(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Sa.prototype,n.add=function(l,f){hi(this),this.i=null,l=kr(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function ig(l,f){hi(l),f=kr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Pr(l,f){return hi(l),f=kr(l,f),l.g.has(f)}n.forEach=function(l,f){hi(this),this.g.forEach(function(m,M){m.forEach(function(L){l.call(f,L,M,this)},this)},this)},n.na=function(){hi(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let M=0;M<f.length;M++){let L=l[M];for(let B=0;B<L.length;B++)m.push(f[M])}return m},n.V=function(l){hi(this);let f=[];if(typeof l=="string")Pr(this,l)&&(f=f.concat(this.g.get(kr(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return hi(this),this.i=null,l=kr(this,l),Pr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function og(l,f,m){ig(l,f),0<m.length&&(l.i=null,l.g.set(kr(l,f),F(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var M=f[m];let B=encodeURIComponent(String(M)),G=this.V(M);for(M=0;M<G.length;M++){var L=B;G[M]!==""&&(L+="="+encodeURIComponent(String(G[M]))),l.push(L)}}return this.i=l.join("&")};function kr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function il(l,f){f&&!l.j&&(hi(l),l.i=null,l.g.forEach(function(m,M){var L=M.toLowerCase();M!=L&&(ig(this,M),og(this,L,m))},l)),l.j=f}function sg(l,f){let m=new Xo;if(a.Image){let M=new Image;M.onload=C(Fn,m,"TestLoadImage: loaded",!0,f,M),M.onerror=C(Fn,m,"TestLoadImage: error",!1,f,M),M.onabort=C(Fn,m,"TestLoadImage: abort",!1,f,M),M.ontimeout=C(Fn,m,"TestLoadImage: timeout",!1,f,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=l}else f(!1)}function Da(l,f){let m=new Xo,M=new AbortController,L=setTimeout(()=>{M.abort(),Fn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:M.signal}).then(B=>{clearTimeout(L),B.ok?Fn(m,"TestPingServer: ok",!0,f):Fn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Fn(m,"TestPingServer: error",!1,f)})}function Fn(l,f,m,M,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),M(m)}catch{}}function ag(){this.g=new Wp}function Kd(l,f,m){let M=m||"";try{at(l,function(L,B){let G=L;d(L)&&(G=ga(L)),f.push(M+B+"="+encodeURIComponent(G))})}catch(L){throw f.push(M+"type="+encodeURIComponent("_badmap")),L}}function ct(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ct,Ko),ct.prototype.g=function(){return new ol(this.l,this.j)},ct.prototype.i=function(l){return function(){return l}}({});function ol(l,f){Qt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ol,Qt),n=ol.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,cs(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function cg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?as(this):cs(this),this.readyState==3&&cg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,as(this))},n.Qa=function(l){this.g&&(this.response=l,as(this))},n.ga=function(){this.g&&as(this)};function as(l){l.readyState=4,l.l=null,l.j=null,l.v=null,cs(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function cs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qd(l){let f="";return fe(l,function(m,M){f+=M,f+=":",f+=m,f+=`\r
`}),f}function ls(l,f,m){e:{for(M in m){var M=!1;break e}M=!0}M||(m=Qd(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ft(l,f,m))}function tt(l){Qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,Qt);var lg=/^https?$/i,gE=["POST","PUT"];n=tt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():va.g(),this.v=this.o?Vd(this.o):Vd(va),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){us(this,B);return}if(l=m||"",m=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var L in M)m.set(L,M[L]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(let B of M.keys())m.set(B,M.get(B));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gE,f,void 0))||M||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,G]of m)this.g.setRequestHeader(B,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jd(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){us(this,B)}};function us(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Yd(l),Xi(l)}function Yd(l){l.A||(l.A=!0,sn(l,"complete"),sn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,sn(this,"complete"),sn(this,"abort"),Xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sl(this):this.bb())},n.bb=function(){sl(this)};function sl(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)qp(l.Ea,0,l);else if(sn(l,"readystatechange"),Vn(l)==4){l.h=!1;try{let G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var M;if(M=G===0){var L=String(l.D).match(ba)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),M=!lg.test(L?L.toLowerCase():"")}m=M}if(m)sn(l,"complete"),sn(l,"success");else{l.m=6;try{var B=2<Vn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Yd(l)}}finally{Xi(l)}}}}function Xi(l,f){if(l.g){Jd(l);let m=l.g,M=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||sn(l,"ready");try{m.onreadystatechange=M}catch{}}}function Jd(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ji(f)}};function ug(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function dg(l){let f={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<l.length;M++){if(ne(l[M]))continue;var m=D(l[M]);let L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let B=f[L]||[];f[L]=B,B.push(m)}R(f,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Zd(l){this.Aa=0,this.i=[],this.j=new Xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nr("baseRetryDelayMs",5e3,l),this.cb=Nr("retryDelaySeedMs",1e4,l),this.Wa=Nr("forwardChannelMaxRetries",2,l),this.wa=Nr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new zd(l&&l.concurrentRequestLimit),this.Da=new ag,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zd.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,M){hn(0),this.W=l,this.H=f||{},m&&M!==void 0&&(this.H.OSID=m,this.H.OAID=M),this.F=this.X,this.I=u(this,null,this.W),Aa(this)};function al(l){if(cl(l),l.G==3){var f=l.U++,m=Mr(l.I);if(ft(m,"SID",l.K),ft(m,"RID",f),ft(m,"TYPE","terminate"),hs(l,m),f=new ui(l,l.j,f),f.L=2,f.v=rl(Mr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),rs(f)}to(l)}function ds(l){l.g&&(dl(l),l.g.cancel(),l.g=null)}function cl(l){ds(l),l.u&&(a.clearTimeout(l.u),l.u=null),eo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Aa(l){if(!$d(l.h)&&!l.s){l.s=!0;var f=l.Ga;da||Bp(),ci||(da(),ci=!0),qo.add(f,l),l.B=0}}function ll(l,f){return qd(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Zo(T(l.Ga,l,f),nh(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let L=new ui(this,this.j,l),B=this.o;if(this.S&&(B?(B=_(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var M=this.i[m];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(f+=M,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=fi(this,L,f),m=Mr(this.I),ft(m,"RID",l),ft(m,"CVER",22),this.D&&ft(m,"X-HTTP-Session-Id",this.D),hs(this,m),B&&(this.O?f="headers="+encodeURIComponent(String(Qd(B)))+"&"+f:this.m&&ls(m,this.m,B)),yr(this.h,L),this.Ua&&ft(m,"TYPE","init"),this.P?(ft(m,"$req",f),ft(m,"SID","null"),L.T=!0,Xc(L,m,null)):Xc(L,m,f),this.G=2}}else this.G==3&&(l?Xd(this,l):this.i.length==0||$d(this.h)||Xd(this))};function Xd(l,f){var m;f?m=f.l:m=l.U++;let M=Mr(l.I);ft(M,"SID",l.K),ft(M,"RID",m),ft(M,"AID",l.T),hs(l,M),l.m&&l.o&&ls(M,l.m,l.o),m=new ui(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=fi(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yr(l.h,m),Xc(m,M,f)}function hs(l,f){l.H&&fe(l.H,function(m,M){ft(f,M,m)}),l.l&&at({},function(m,M){ft(f,M,m)})}function fi(l,f,m){m=Math.min(l.i.length,m);var M=l.l?T(l.l.Na,l.l,l):null;e:{var L=l.i;let B=-1;for(;;){let G=["count="+m];B==-1?0<m?(B=L[0].g,G.push("ofs="+B)):B=0:G.push("ofs="+B);let Je=!0;for(let kt=0;kt<m;kt++){let Ze=L[kt].g,yn=L[kt].map;if(Ze-=B,0>Ze)B=Math.max(0,L[kt].g-100),Je=!1;else try{Kd(yn,G,"req"+Ze+"_")}catch{M&&M(yn)}}if(Je){M=G.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,M}function eh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;da||Bp(),ci||(da(),ci=!0),qo.add(f,l),l.v=0}}function ul(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Zo(T(l.Fa,l),nh(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Zo(T(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),ds(this),th(this))};function dl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function th(l){l.g=new ui(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Mr(l.qa);ft(f,"RID","rpc"),ft(f,"SID",l.K),ft(f,"AID",l.T),ft(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ft(f,"TO",l.ja),ft(f,"TYPE","xmlhttp"),hs(l,f),l.m&&l.o&&ls(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=rl(Mr(f)),m.m=null,m.P=!0,el(m,l)}n.Za=function(){this.C!=null&&(this.C=null,ds(this),ul(this),hn(19))};function eo(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function mn(l,f){var m=null;if(l.g==f){eo(l),dl(l),l.g=null;var M=2}else if(Hd(l.h,f))m=f.D,tr(l.h,f),M=1;else return;if(l.G!=0){if(f.o)if(M==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;M=Jc(),sn(M,new ma(M,m)),Aa(l)}else eh(l);else if(L=f.s,L==3||L==0&&0<f.X||!(M==1&&ll(l,f)||M==2&&ul(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),L){case 1:pi(l,5);break;case 4:pi(l,10);break;case 3:pi(l,6);break;default:pi(l,2)}}}function nh(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function pi(l,f){if(l.j.info("Error code "+f),f==2){var m=T(l.fb,l),M=l.Xa;let L=!M;M=new nr(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ca(M,"https"),rl(M),L?sg(M.toString(),m):Da(M.toString(),m)}else hn(2);l.G=0,l.l&&l.l.sa(f),to(l),cl(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function to(l){if(l.G=0,l.ka=[],l.l){let f=os(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ka,f),N(l.ka,l.i),l.h.i.length=0,F(l.i),l.i.length=0),l.l.ra()}}function u(l,f,m){var M=m instanceof nr?Mr(m):new nr(m);if(M.g!="")f&&(M.g=f+"."+M.g),nl(M,M.s);else{var L=a.location;M=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var B=new nr(null);M&&Ca(B,M),f&&(B.g=f),L&&nl(B,L),m&&(B.l=m),M=B}return m=l.D,f=l.ya,m&&f&&ft(M,m,f),ft(M,"VER",l.la),hs(l,M),M}function p(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new tt(new ct({eb:m})):new tt(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function x(){}x.prototype.g=function(l,f){return new O(l,f)};function O(l,f){Qt.call(this),this.g=new Zd(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ne(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ne(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new ve(this)}k(O,Qt),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){al(this.g)},O.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=ga(l),l=m);f.i.push(new jd(f.Ya++,l)),f.G==3&&Aa(f)},O.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,O.aa.N.call(this)};function U(l){Yt.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(U,Yt);function Q(){Yc.call(this),this.status=1}k(Q,Yc);function ve(l){this.g=l}k(ve,y),ve.prototype.ua=function(){sn(this.g,"a")},ve.prototype.ta=function(l){sn(this.g,new U(l))},ve.prototype.sa=function(l){sn(this.g,new Q)},ve.prototype.ra=function(){sn(this.g,"b")},x.prototype.createWebChannel=x.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,nA=Fo.createWebChannelTransport=function(){return new x},tA=Fo.getStatEventTarget=function(){return Jc()},eA=Fo.Event=er,Wv=Fo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Yf=Fo.ErrorCode=_a,Zc.COMPLETE="complete",XD=Fo.EventType=Zc,Qo.EventType=Yo,Yo.OPEN="a",Yo.CLOSE="b",Yo.ERROR="c",Yo.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,nd=Fo.WebChannel=Qo,Cee=Fo.FetchXmlHttpFactory=ct,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,ZD=Fo.XhrIo=tt}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var qU="@firebase/firestore";var dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");var Ed="10.14.0";var Sc=new Ls("@firebase/firestore");function Jf(){return Sc.logLevel}function se(n,...e){if(Sc.logLevel<=ze.DEBUG){let t=e.map(UR);Sc.debug(`Firestore (${Ed}): ${n}`,...t)}}function Uo(n,...e){if(Sc.logLevel<=ze.ERROR){let t=e.map(UR);Sc.error(`Firestore (${Ed}): ${n}`,...t)}}function ld(n,...e){if(Sc.logLevel<=ze.WARN){let t=e.map(UR);Sc.warn(`Firestore (${Ed}): ${n}`,...t)}}function UR(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ee(n="Unexpected state"){let e=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+n;throw Uo(e),new Error(e)}function st(n,e){n||Ee()}function Ae(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends Nn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ii=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Zv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},aA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}},cA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},lA=class{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string"),new Zv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new dn(e)}},uA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},dA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new uA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hA=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fA=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){st(this.o===void 0);let r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string"),this.R=t.token,new hA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function See(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=See(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function et(n,e){return n<e?-1:n>e?1:0}function ud(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var pn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new te($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new pn(0,0))}static max(){return new n(new pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ew=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(),r===void 0?r=e.length-t:r>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ct=class n extends ew{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new te($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Dee=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gr=class n extends ew{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Dee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new te($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new te($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ge=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ct.fromString(e))}static fromName(e){return new n(Ct.fromString(e).popFirst(5))}static empty(){return new n(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ct(e.slice()))}};var pA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};pA.UNKNOWN_ID=-1;function Aee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new pn(t+1,0):new pn(t,r));return new Dc(i,ge.empty(),e)}function Ree(n){return new Dc(n.readTime,n.key,-1)}var Dc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ne.min(),ge.empty(),-1)}static max(){return new n(Ne.max(),ge.empty(),-1)}};function Mee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}var xee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yp(n){return S(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==xee)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(h=>{s[d]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Pee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _p(n){return n.name==="IndexedDbTransactionError"}var TB=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pw(n){return n==null}function rp(n){return n===0&&1/n==-1/0}function kee(n){return typeof n=="number"&&Number.isInteger(n)&&!rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Nee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d0e=[...Nee,"documentOverlays"],Oee=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lee=Oee,Fee=[...Lee,"indexConfiguration","indexState","indexEntries"];var h0e=[...Fee,"globals"];function HU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var xt=class n{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}},sd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ji=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();let e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}};ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1;ji.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ji(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var An=class n{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},tw=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ar=class n{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new n([])}unionWith(e){let t=new An(gr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var nw=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nw("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Rn.EMPTY_BYTE_STRING=new Rn("");var Vee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(n){if(st(!!n),typeof n=="string"){let e=0,t=Vee.exec(n);if(st(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ea(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}function BR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jR(n){let e=n.mapValue.fields.__previous_value__;return BR(e)?jR(e):e}function ip(n){let e=Bo(n.mapValue.fields.__local_write_time__.timestampValue);return new pn(e.seconds,e.nanos)}var mA=class{constructor(e,t,r,i,o,s,a,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},rw=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Kv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BR(n)?4:DB(n)?9007199254740991:SB(n)?10:11:Ee()}function qi(n,e){if(n===e)return!0;let t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ip(n).isEqual(ip(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Bo(i.timestampValue),a=Bo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ea(i.bytesValue).isEqual(ea(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return bt(i.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bt(i.integerValue)===bt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=bt(i.doubleValue),a=bt(o.doubleValue);return s===a?rp(s)===rp(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ud(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(HU(s)!==HU(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!qi(s[c],a[c])))return!1;return!0}(n,e);default:return Ee()}}function op(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function dd(n,e){if(n===e)return 0;let t=Ac(n),r=Ac(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=bt(o.integerValue||o.doubleValue),c=bt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return GU(n.timestampValue,e.timestampValue);case 4:return GU(ip(n),ip(e));case 5:return et(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ea(o),c=ea(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=et(a[d],c[d]);if(h!==0)return h}return et(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=et(bt(o.latitude),bt(s.latitude));return a!==0?a:et(bt(o.longitude),bt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return WU(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,d,h;let g=o.fields||{},T=s.fields||{},C=(a=g.value)===null||a===void 0?void 0:a.arrayValue,k=(c=T.value)===null||c===void 0?void 0:c.arrayValue,F=et(((d=C?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return F!==0?F:WU(C,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Kv.mapValue&&s===Kv.mapValue)return 0;if(o===Kv.mapValue)return 1;if(s===Kv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let T=et(c[g],h[g]);if(T!==0)return T;let C=dd(a[c[g]],d[h[g]]);if(C!==0)return C}return et(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function GU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);let t=Bo(n),r=Bo(e),i=et(t.seconds,r.seconds);return i!==0?i:et(t.nanos,r.nanos)}function WU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=dd(t[i],r[i]);if(o)return o}return et(t.length,r.length)}function hd(n){return yA(n)}function yA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Bo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ea(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=yA(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${yA(t.fields[s])}`;return i+"}"}(n.mapValue):Ee()}function KU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _A(n){return!!n&&"integerValue"in n}function zR(n){return!!n&&"arrayValue"in n}function QU(n){return!!n&&"nullValue"in n}function YU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yv(n){return!!n&&"mapValue"in n}function SB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var pr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Xf(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Yv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kc(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Xf(this.value))}};function AB(n){let e=[];return kc(n.fields,(t,r)=>{let i=new gr([t]);if(Yv(r)){let o=AB(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ar(e)}var oi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ne.min(),Ne.min(),Ne.min(),pr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ne.min(),Ne.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ne.min(),Ne.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fd=class{constructor(e,t){this.position=e,this.inclusive=t}};function JU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ge.comparator(ge.fromName(s.referenceValue),t.key):r=dd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}var Rc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Uee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var iw=class{},Ht=class n extends iw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wA(e,t,r):t==="array-contains"?new bA(e,r):t==="in"?new TA(e,r):t==="not-in"?new CA(e,r):t==="array-contains-any"?new SA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new EA(e,r):new IA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(dd(t,this.value)):t!==null&&Ac(this.value)===Ac(t)&&this.matchesComparison(dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},si=class n extends iw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return RB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function RB(n){return n.op==="and"}function MB(n){return Bee(n)&&RB(n)}function Bee(n){for(let e of n.filters)if(e instanceof si)return!1;return!0}function vA(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+hd(n.value);if(MB(n))return n.filters.map(e=>vA(e)).join(",");{let e=n.filters.map(t=>vA(t)).join(",");return`${n.op}(${e})`}}function xB(n,e){return n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)}(n,e):n instanceof si?function(r,i){return i instanceof si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xB(s,i.filters[a]),!0):!1}(n,e):void Ee()}function PB(n){return n instanceof Ht?function(t){return`${t.field.canonicalString()} ${t.op} ${hd(t.value)}`}(n):n instanceof si?function(t){return t.op.toString()+" {"+t.getFilters().map(PB).join(" ,")+"}"}(n):"Filter"}var wA=class extends Ht{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){let t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}},EA=class extends Ht{constructor(e,t){super(e,"in",t),this.keys=kB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},IA=class extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=kB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ge.fromName(r.referenceValue))}var bA=class extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return zR(t)&&op(t.arrayValue,this.value)}},TA=class extends Ht{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&op(this.value.arrayValue,t)}},CA=class extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!op(this.value.arrayValue,t)}},SA=class extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!zR(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>op(this.value.arrayValue,r))}};var DA=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function XU(n,e=null,t=[],r=[],i=null,o=null,s=null){return new DA(n,e,t,r,i,o,s)}function $R(n){let e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hd(r)).join(",")),e.ue=t}return e.ue}function qR(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Uee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZU(n.startAt,e.startAt)&&ZU(n.endAt,e.endAt)}function AA(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ta=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function jee(n,e,t,r,i,o,s,a){return new ta(n,e,t,r,i,o,s,a)}function HR(n){return new ta(n)}function eB(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NB(n){return n.collectionGroup!==null}function ep(n){let e=Ae(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new An(gr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Rc(o,r))}),t.has(gr.keyField().canonicalString())||e.ce.push(new Rc(gr.keyField(),r))}return e.ce}function zi(n){let e=Ae(n);return e.le||(e.le=zee(e,ep(n))),e.le}function zee(n,e){if(n.limitType==="F")return XU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Rc(i.field,o)});let t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return XU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RA(n,e){let t=n.filters.concat([e]);return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ow(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kw(n,e){return qR(zi(n),zi(e))&&n.limitType===e.limitType}function OB(n){return`${$R(zi(n))}|lt:${n.limitType}`}function rd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PB(i)).join(", ")}]`),Pw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hd(i)).join(",")),`Target(${r})`}(zi(n))}; limitType=${n.limitType})`}function Nw(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ep(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let d=JU(s,a,c);return s.inclusive?d<=0:d<0}(r.startAt,ep(r),i)||r.endAt&&!function(s,a,c){let d=JU(s,a,c);return s.inclusive?d>=0:d>0}(r.endAt,ep(r),i))}(n,e)}function $ee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LB(n){return(e,t)=>{let r=!1;for(let i of ep(n)){let o=qee(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qee(n,e,t){let r=n.field.isKeyField()?ge.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?dd(c,d):Ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}var na=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CB(this.inner)}size(){return this.innerSize}};var Hee=new xt(ge.comparator);function jo(){return Hee}var FB=new xt(ge.comparator);function Zf(...n){let e=FB;for(let t of n)e=e.insert(t.key,t);return e}function VB(n){let e=FB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bc(){return tp()}function UB(){return tp()}function tp(){return new na(n=>n.toString(),(n,e)=>n.isEqual(e))}var Gee=new xt(ge.comparator),Wee=new An(ge.comparator);function $e(...n){let e=Wee;for(let t of n)e=e.add(t);return e}var Kee=new An(et);function Qee(){return Kee}function GR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function BB(n){return{integerValue:""+n}}function Yee(n,e){return kee(e)?BB(e):GR(n,e)}var pd=class{constructor(){this._=void 0}};function Jee(n,e,t){return n instanceof gd?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&BR(o)&&(o=jR(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Mc?zB(n,e):n instanceof xc?$B(n,e):function(i,o){let s=jB(i,o),a=tB(s)+tB(i.Pe);return _A(s)&&_A(i.Pe)?BB(a):GR(i.serializer,a)}(n,e)}function Zee(n,e,t){return n instanceof Mc?zB(n,e):n instanceof xc?$B(n,e):t}function jB(n,e){return n instanceof md?function(r){return _A(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var gd=class extends pd{},Mc=class extends pd{constructor(e){super(),this.elements=e}};function zB(n,e){let t=qB(e);for(let r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var xc=class extends pd{constructor(e){super(),this.elements=e}};function $B(n,e){let t=qB(e);for(let r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}var md=class extends pd{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function tB(n){return bt(n.integerValue||n.doubleValue)}function qB(n){return zR(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Xee(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mc&&i instanceof Mc||r instanceof xc&&i instanceof xc?ud(r.elements,i.elements,qi):r instanceof md&&i instanceof md?qi(r.Pe,i.Pe):r instanceof gd&&i instanceof gd}(n.transform,e.transform)}var MA=class{constructor(e,t){this.version=e,this.transformResults=t}},Vo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yd=class{};function HB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sp(n.key,Vo.none()):new Pc(n.key,n.data,Vo.none());{let t=n.data,r=pr.empty(),i=new An(gr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hi(n.key,r,new Ar(i.toArray()),Vo.none())}}function ete(n,e,t){n instanceof Pc?function(i,o,s){let a=i.value.clone(),c=rB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hi?function(i,o,s){if(!Jv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=rB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(GB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function np(n,e,t,r){return n instanceof Pc?function(o,s,a,c){if(!Jv(o.precondition,s))return a;let d=o.value.clone(),h=iB(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hi?function(o,s,a,c){if(!Jv(o.precondition,s))return a;let d=iB(o.fieldTransforms,c,s),h=s.data;return h.setAll(GB(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return Jv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function tte(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=jB(r.transform,i||null);o!=null&&(t===null&&(t=pr.empty()),t.set(r.field,o))}return t||null}function nB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ud(r,i,(o,s)=>Xee(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Pc=class extends yd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hi=class extends yd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function rB(n,e,t){let r=new Map;st(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Zee(s,a,t[i]))}return r}function iB(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Jee(o,s,e))}return r}var sp=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xA=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var PA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ete(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UB();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=HB(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,(t,r)=>nB(t,r))&&ud(this.baseMutations,e.baseMutations,(t,r)=>nB(t,r))}},kA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length);let i=function(){return Gee}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var NA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var OA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Qe;function nte(n){switch(n){default:return Ee();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function WB(n){if(n===void 0)return Uo("GRPC error has no .code"),$.UNKNOWN;switch(n){case $t.OK:return $.OK;case $t.CANCELLED:return $.CANCELLED;case $t.UNKNOWN:return $.UNKNOWN;case $t.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case $t.INTERNAL:return $.INTERNAL;case $t.UNAVAILABLE:return $.UNAVAILABLE;case $t.UNAUTHENTICATED:return $.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case $t.NOT_FOUND:return $.NOT_FOUND;case $t.ALREADY_EXISTS:return $.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return $.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case $t.ABORTED:return $.ABORTED;case $t.OUT_OF_RANGE:return $.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return $.UNIMPLEMENTED;case $t.DATA_LOSS:return $.DATA_LOSS;default:return Ee()}}(Qe=$t||($t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var oB=null;function rte(){return new TextEncoder}var ite=new Zs([4294967295,4294967295],0);function sB(n){let e=rte().encode(n),t=new JD;return t.update(e),new Uint8Array(t.digest())}function aB(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([i,o],0)]}var LA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zs.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Zs.fromNumber(r)));return i.compare(ite)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=sB(e),[r,i]=aB(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=sB(e),[r,i]=aB(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Tc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sw=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ne.min(),i,new xt(et),jo(),$e())}},ap=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var ad=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},aw=class{constructor(e,t){this.targetId=e,this.me=t}},cw=class{constructor(e,t,r=Rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},lw=class{constructor(){this.fe=0,this.ge=lB(),this.pe=Rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),t=$e(),r=$e();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new ap(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=lB()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,st(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},FA=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=jo(),this.qe=cB(),this.Qe=new xt(et)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(AA(o))if(r===0){let s=new ge(o.path);this.Ue(t,s,oi.newNoDocument(s,Ne.min()))}else st(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}oB?.et(function(h,g,T,C,k){var F,N,q,ne,J,ue;let qe={localCacheCount:h,existenceFilterCount:g.count,databaseId:T.database,projectId:T.projectId},fe=g.unchangedNames;return fe&&(qe.bloomFilter={applied:k===0,hashCount:(F=fe?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(ne=(q=(N=fe?.bits)===null||N===void 0?void 0:N.bitmap)===null||q===void 0?void 0:q.length)!==null&&ne!==void 0?ne:0,padding:(ue=(J=fe?.bits)===null||J===void 0?void 0:J.padding)!==null&&ue!==void 0?ue:0,mightContain:R=>{var _;return(_=C?.mightContain(R))!==null&&_!==void 0&&_}}),qe}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ea(r).toUint8Array()}catch(c){if(c instanceof nw)return ld("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new LA(s,i,o)}catch(c){return ld(c instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&AA(a.target)){let c=new ge(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,oi.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=$e();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new sw(e,t,this.Qe,this.ke,r);return this.ke=jo(),this.qe=cB(),this.Qe=new xt(et),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new lw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new An(et),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function cB(){return new xt(ge.comparator)}function lB(){return new xt(ge.comparator)}var ote={asc:"ASCENDING",desc:"DESCENDING"},ste={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ate={and:"AND",or:"OR"},VA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function UA(n,e){return n.useProto3Json||Pw(e)?e:{value:e}}function uw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cte(n,e){return uw(n,e.toTimestamp())}function $i(n){return st(!!n),Ne.fromTimestamp(function(t){let r=Bo(t);return new pn(r.seconds,r.nanos)}(n))}function WR(n,e){return BA(n,e).canonicalString()}function BA(n,e){let t=function(i){return new Ct(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QB(n){let e=Ct.fromString(n);return st(ej(e)),e}function jA(n,e){return WR(n.databaseId,e.path)}function rA(n,e){let t=QB(e);if(t.get(1)!==n.databaseId.projectId)throw new te($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(JB(t))}function YB(n,e){return WR(n.databaseId,e)}function lte(n){let e=QB(n);return e.length===4?Ct.emptyPath():JB(e)}function zA(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JB(n){return st(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uB(n,e,t){return{name:jA(n,e),fields:t.value.mapValue.fields}}function ute(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(st(h===void 0||typeof h=="string"),Rn.fromBase64String(h||"")):(st(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Rn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let h=d.code===void 0?$.UNKNOWN:WB(d.code);return new te(h,d.message||"")}(s);t=new cw(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=rA(n,r.document.name),o=$i(r.document.updateTime),s=r.document.createTime?$i(r.document.createTime):Ne.min(),a=new pr({mapValue:{fields:r.document.fields}}),c=oi.newFoundDocument(i,o,s,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new ad(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=rA(n,r.document),o=r.readTime?$i(r.readTime):Ne.min(),s=oi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ad([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=rA(n,r.document),o=r.removedTargetIds||[];t=new ad([],o,i,null)}else{if(!("filter"in e))return Ee();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new OA(i,o),a=r.targetId;t=new aw(a,s)}}return t}function dte(n,e){let t;if(e instanceof Pc)t={update:uB(n,e.key,e.value)};else if(e instanceof sp)t={delete:jA(n,e.key)};else if(e instanceof Hi)t={update:uB(n,e.key,e.data),updateMask:wte(e.fieldMask)};else{if(!(e instanceof xA))return Ee();t={verify:jA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof gd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof md)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:cte(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee()}(n,e.precondition)),t}function hte(n,e){return n&&n.length>0?(st(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?$i(i.updateTime):$i(o);return s.isEqual(Ne.min())&&(s=$i(o)),new MA(s,i.transformResults||[])}(t,e))):[]}function fte(n,e){return{documents:[YB(n,e.path)]}}function pte(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YB(n,i);let o=function(d){if(d.length!==0)return XB(si.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(h=>function(T){return{field:id(T.field),direction:yte(T.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=UA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function gte(n){let e=lte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){st(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let T=ZB(g);return T instanceof si&&MB(T)?T.getFilters():[T]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(T=>function(k){return new Rc(od(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(T))}(t.orderBy));let a=null;t.limit&&(a=function(g){let T;return T=typeof g=="object"?g.value:g,Pw(T)?null:T}(t.limit));let c=null;t.startAt&&(c=function(g){let T=!!g.before,C=g.values||[];return new fd(C,T)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let T=!g.before,C=g.values||[];return new fd(C,T)}(t.endAt)),jee(e,i,s,o,a,"F",c,d)}function mte(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=od(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=od(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=od(t.unaryFilter.field);return Ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=od(t.unaryFilter.field);return Ht.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return Ht.create(od(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return si.create(t.compositeFilter.filters.map(r=>ZB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function yte(n){return ote[n]}function _te(n){return ste[n]}function vte(n){return ate[n]}function id(n){return{fieldPath:n.canonicalString()}}function od(n){return gr.fromServerFormat(n.fieldPath)}function XB(n){return n instanceof Ht?function(t){if(t.op==="=="){if(YU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NAN"}};if(QU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NAN"}};if(QU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:id(t.field),op:_te(t.op),value:t.value}}}(n):n instanceof si?function(t){let r=t.getFilters().map(i=>XB(i));return r.length===1?r[0]:{compositeFilter:{op:vte(t.op),filters:r}}}(n):Ee()}function wte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ej(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cp=class n{constructor(e,t,r,i,o=Ne.min(),s=Ne.min(),a=Rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $A=class{constructor(e){this.ct=e}};function Ete(n){let e=gte({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ow(e,e.limit,"L"):e}var dw=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(bt(e.integerValue));else if("doubleValue"in e){let r=bt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),rp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Bo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ea(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?DB(e)?this.dt(t,Number.MAX_SAFE_INTEGER):SB(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ee()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(bt(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ge.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};dw.vt=new dw;var qA=class{constructor(){this.un=new HA}addToCollectionParentIndex(e,t){return this.un.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Dc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Dc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},HA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(Ct.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(Ct.comparator)).toArray()}};var p0e=new Uint8Array(0);var Bi=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);var lp=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var GA=class{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var WA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var KA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&np(r.mutation,i,Ar.empty(),pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=jo(),s=tp(),a=function(){return tp()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Hi)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),np(h.mutation,d,h.mutation.getFieldMask(),pn.now())):s.set(d.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new WA(h,(g=s.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=tp(),i=new xt((s,a)=>s-a),o=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Ar.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||$e()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=UB();h.forEach(T=>{if(!o.has(T)){let C=HB(t.get(T),r.get(T));C!==null&&g.set(T,C),o=o.add(T)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return W.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):W.resolve(bc()),a=-1,c=o;return s.next(d=>W.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(T=>{c=c.insert(h,T)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,$e())).next(h=>({batchId:a,changes:VB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(r=>{let i=Zf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Zf();return this.indexManager.getCollectionParents(e,o).next(a=>W.forEach(a,c=>{let d=function(g,T){return new ta(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,T)=>{s=s.insert(g,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,oi.newInvalidDocument(h)))});let a=Zf();return s.forEach((c,d)=>{let h=o.get(c);h!==void 0&&np(h.mutation,d,Ar.empty(),pn.now()),Nw(t,d)&&(a=a.insert(c,d))}),a})}};var QA=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return W.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$i(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Ete(i.bundledQuery),readTime:$i(i.readTime)}}(t)),W.resolve()}};var YA=class{constructor(){this.overlays=new xt(ge.comparator),this.Ir=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bc();return W.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=bc(),o=t.length+1,s=new ge(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xt((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=bc(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=bc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new NA(t,r));let o=this.Ir.get(t);o===void 0&&(o=$e(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var JA=class{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var up=class{constructor(){this.Tr=new An(qt.Er),this.dr=new An(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new qt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ge(new Ct([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ge(new Ct([])),r=new qt(t,e),i=new qt(t,e+1),o=$e();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ge.comparator(e.key,t.key)||et(e.wr,t.wr)}static Ar(e,t){return et(e.wr,t.wr)||ge.comparator(e.key,t.key)}};var ZA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new An(qt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new PA(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new qt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(s)}lookupMutationBatch(e,t){return W.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(et);return t.forEach(i=>{let o=new qt(i,0),s=new qt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ge.isDocumentKey(o)||(o=o.child(""));let s=new qt(new ge(o),0),a=new An(et);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},s),W.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){st(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new qt(t,0),i=this.br.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var XA=class{constructor(e){this.Mr=e,this.docs=function(){return new xt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():oi.newInvalidDocument(t))}getEntries(e,t){let r=jo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():oi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=jo(),s=t.path,a=new ge(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||Mee(Ree(h),r)<=0||(i.has(h.key)||Nw(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ee()}Or(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eR(this)}getSize(e){return W.resolve(this.size)}},eR=class extends GA{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var tR=class{constructor(e){this.persistence=e,this.Nr=new na(t=>$R(t),qR),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new up,this.targetCount=0,this.kr=lp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),W.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new lp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Kn(t),W.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(o).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Br.containsKey(t))}};var nR=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new TB(0),this.Kr=!1,this.Kr=!0,this.$r=new JA,this.referenceDelegate=e(this),this.Ur=new tR(this),this.indexManager=new qA,this.remoteDocumentCache=function(i){return new XA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $A(t),this.Gr=new QA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ZA(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new rR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},rR=class extends gA{constructor(e){super(),this.currentSequenceNumber=e}},iR=class n{constructor(e){this.persistence=e,this.Jr=new up,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),W.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{let i=ge.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return W.or([()=>W.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var oR=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=$e(),i=$e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var sR=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var aR=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vL()?8:Pee(ln())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sR;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Jf()<=ze.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",rd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Jf()<=ze.DEBUG&&se("QueryEngine","Query:",rd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Jf()<=ze.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",rd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):W.resolve())}Yi(e,t){if(eB(t))return W.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ow(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=$e(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,a);return this.ns(t,d,s,c.readTime)?this.Yi(e,ow(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return eB(t)||i.isEqual(Ne.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?W.resolve(null):(Jf()<=ze.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rd(t)),this.rs(e,s,t,Aee(i,-1)).next(a=>a))})}ts(e,t){let r=new An(LB(e));return t.forEach((i,o)=>{Nw(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Jf()<=ze.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",rd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Dc.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var cR=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new xt(et),this._s=new na(o=>$R(o),qR),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Ite(n,e,t,r){return new cR(n,e,t,r)}function tj(n,e){return S(this,null,function*(){let t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=$e();for(let d of i){s.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of o){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:a}))})})})}function bte(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){let g=d.batch,T=g.keys(),C=W.resolve();return T.forEach(k=>{C=C.next(()=>h.getEntry(c,k)).next(F=>{let N=d.docVersions.get(k);st(N!==null),F.version.compareTo(N)<0&&(g.applyToRemoteDocument(F,d),F.isValidDocument()&&(F.setReadTime(d.commitVersion),h.addEntry(F)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=$e();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nj(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Tte(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,g)=>{let T=i.get(g);if(!T)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,g)));let C=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(Rn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(g,C),function(F,N,q){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,C,h)&&a.push(t.Ur.updateTargetData(o,C))});let c=jo(),d=$e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Cte(o,s,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(Ne.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.os=i,o))}function Cte(n,e,t){let r=$e(),i=$e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=jo();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ne.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function Ste(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dte(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,W.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new cp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function lR(n,e,t){return S(this,null,function*(){let r=Ae(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_p(s))throw s;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function dB(n,e,t){let r=Ae(n),i=Ne.min(),o=$e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){let g=Ae(c),T=g._s.get(h);return T!==void 0?W.resolve(g.os.get(T)):g.Ur.getTargetData(d,h)}(r,s,zi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Ne.min(),t?o:$e())).next(a=>(Ate(r,$ee(e),a),{documents:a,Ts:o})))}function Ate(n,e,t){let r=n.us.get(e)||Ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var hw=class{constructor(){this.activeTargetIds=Qee()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uR=class{constructor(){this.so=new hw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dR=class{_o(e){}shutdown(){}};var fw=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qv=null;function iA(){return Qv===null?Qv=function(){return 268435456+Math.round(2147483648*Math.random())}():Qv++,"0x"+Qv.toString(16)}var Rte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var hR=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dn="WebChannelConnection",fR=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=iA(),c=this.xo(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,c,d,i).then(h=>(se("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ld("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ed}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Rte[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=iA();return new Promise((s,a)=>{let c=new ZD;c.setWithCredentials(!0),c.listenOnce(XD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Yf.NO_ERROR:let h=c.getResponseJson();se(Dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Yf.TIMEOUT:se(Dn,`RPC '${e}' ${o} timed out`),a(new te($.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:let g=c.getStatus();if(se(Dn,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let T=c.getResponseJson();Array.isArray(T)&&(T=T[0]);let C=T?.error;if(C&&C.status&&C.message){let k=function(N){let q=N.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(C.status);a(new te(k,C.message))}else a(new te($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new te($.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{se(Dn,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);se(Dn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=iA(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nA(),a=tA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");se(Dn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c),T=!1,C=!1,k=new hR({Io:N=>{C?se(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(T||(se(Dn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),T=!0),se(Dn,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},To:()=>g.close()}),F=(N,q,ne)=>{N.listen(q,J=>{try{ne(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return F(g,nd.EventType.OPEN,()=>{C||(se(Dn,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),F(g,nd.EventType.CLOSE,()=>{C||(C=!0,se(Dn,`RPC '${e}' stream ${i} transport closed`),k.So())}),F(g,nd.EventType.ERROR,N=>{C||(C=!0,ld(Dn,`RPC '${e}' stream ${i} transport errored:`,N),k.So(new te($.UNAVAILABLE,"The operation could not be completed")))}),F(g,nd.EventType.MESSAGE,N=>{var q;if(!C){let ne=N.data[0];st(!!ne);let J=ne,ue=J.error||((q=J[0])===null||q===void 0?void 0:q.error);if(ue){se(Dn,`RPC '${e}' stream ${i} received error:`,ue);let qe=ue.status,fe=function(I){let A=$t[I];if(A!==void 0)return WB(A)}(qe),R=ue.message;fe===void 0&&(fe=$.INTERNAL,R="Unknown error status: "+qe+" with message "+ue.message),C=!0,k.So(new te(fe,R)),g.close()}else se(Dn,`RPC '${e}' stream ${i} received:`,ne),k.bo(ne)}}),F(a,eA.STAT_EVENT,N=>{N.stat===Wv.PROXY?se(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Wv.NOPROXY&&se(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function oA(){return typeof document<"u"?document:null}function Ow(n){return new VA(n,!0)}var pw=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var gw=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Uo(t.toString()),Uo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new te($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pR=class extends gw{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=ute(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?$i(s.readTime):Ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=zA(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=AA(c)?{documents:fte(o,c)}:{query:pte(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KB(o,s.resumeToken);let d=UA(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Ne.min())>0){a.readTime=uw(o,s.snapshotVersion.toTimestamp());let d=UA(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=mte(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=zA(this.serializer),t.removeTarget=e,this.a_(t)}},gR=class extends gw{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=hte(e.writeResults,e.commitTime),r=$i(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=zA(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>dte(this.serializer,r))};this.a_(t)}};var mR=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new te($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,BA(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te($.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,BA(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te($.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},yR=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Uo(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _R=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>S(this,null,function*(){Nc(this)&&(se("RemoteStore","Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let d=Ae(c);d.L_.add(4),yield vp(d),d.q_.set("Unknown"),d.L_.delete(4),yield Lw(d)})}(this))}))}),this.q_=new yR(r,i)}};function Lw(n){return S(this,null,function*(){if(Nc(n))for(let e of n.B_)yield e(!0)})}function vp(n){return S(this,null,function*(){for(let e of n.B_)yield e(!1)})}function rj(n,e){let t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),JR(t)?YR(t):Id(t).r_()&&QR(t,e))}function KR(n,e){let t=Ae(n),r=Id(t);t.N_.delete(e),r.r_()&&ij(t,e),t.N_.size===0&&(r.r_()?r.o_():Nc(t)&&t.q_.set("Unknown"))}function QR(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Id(n).A_(e)}function ij(n,e){n.Q_.xe(e),Id(n).R_(e)}function YR(n){n.Q_=new FA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Id(n).start(),n.q_.v_()}function JR(n){return Nc(n)&&!Id(n).n_()&&n.N_.size>0}function Nc(n){return Ae(n).L_.size===0}function oj(n){n.Q_=void 0}function Mte(n){return S(this,null,function*(){n.q_.set("Online")})}function xte(n){return S(this,null,function*(){n.N_.forEach((e,t)=>{QR(n,e)})})}function Pte(n,e){return S(this,null,function*(){oj(n),JR(n)?(n.q_.M_(e),YR(n)):n.q_.set("Unknown")})}function kte(n,e,t){return S(this,null,function*(){if(n.q_.set("Online"),e instanceof cw&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mw(n,r)}else if(e instanceof ad?n.Q_.Ke(e):e instanceof aw?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ne.min()))try{let r=yield nj(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Rn.EMPTY_BYTE_STRING,h.snapshotVersion)),ij(o,c);let g=new cp(h.target,c,d,h.sequenceNumber);QR(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){se("RemoteStore","Failed to raise snapshot:",r),yield mw(n,r)}})}function mw(n,e,t){return S(this,null,function*(){if(!_p(e))throw e;n.L_.add(1),yield vp(n),n.q_.set("Offline"),t||(t=()=>nj(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){se("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Lw(n)}))})}function sj(n,e){return e().catch(t=>mw(n,t,e))}function Fw(n){return S(this,null,function*(){let e=Ae(n),t=ra(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Nte(e);)try{let i=yield Ste(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Ote(e,i)}catch(i){yield mw(e,i)}aj(e)&&cj(e)})}function Nte(n){return Nc(n)&&n.O_.length<10}function Ote(n,e){n.O_.push(e);let t=ra(n);t.r_()&&t.V_&&t.m_(e.mutations)}function aj(n){return Nc(n)&&!ra(n).n_()&&n.O_.length>0}function cj(n){ra(n).start()}function Lte(n){return S(this,null,function*(){ra(n).p_()})}function Fte(n){return S(this,null,function*(){let e=ra(n);for(let t of n.O_)e.m_(t.mutations)})}function Vte(n,e,t){return S(this,null,function*(){let r=n.O_.shift(),i=kA.from(r,e,t);yield sj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fw(n)})}function Ute(n,e){return S(this,null,function*(){e&&ra(n).V_&&(yield function(r,i){return S(this,null,function*(){if(function(s){return nte(s)&&s!==$.ABORTED}(i.code)){let o=r.O_.shift();ra(r).s_(),yield sj(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Fw(r)}})}(n,e)),aj(n)&&cj(n)})}function hB(n,e){return S(this,null,function*(){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");let r=Nc(t);t.L_.add(3),yield vp(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Lw(t)})}function Bte(n,e){return S(this,null,function*(){let t=Ae(n);e?(t.L_.delete(2),yield Lw(t)):e||(t.L_.add(2),yield vp(t),t.q_.set("Unknown"))})}function Id(n){return n.K_||(n.K_=function(t,r,i){let o=Ae(t);return o.w_(),new pR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Mte.bind(null,n),Ro:xte.bind(null,n),mo:Pte.bind(null,n),d_:kte.bind(null,n)}),n.B_.push(e=>S(null,null,function*(){e?(n.K_.s_(),JR(n)?YR(n):n.q_.set("Unknown")):(yield n.K_.stop(),oj(n))}))),n.K_}function ra(n){return n.U_||(n.U_=function(t,r,i){let o=Ae(t);return o.w_(),new gR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Lte.bind(null,n),mo:Ute.bind(null,n),f_:Fte.bind(null,n),g_:Vte.bind(null,n)}),n.B_.push(e=>S(null,null,function*(){e?(n.U_.s_(),yield Fw(n)):(yield n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var vR=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZR(n,e){if(Uo("AsyncQueue",`${e}: ${n}`),_p(n))return new te($.UNAVAILABLE,`${e}: ${n}`);throw n}var yw=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=Zf(),this.sortedSet=new xt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _w=class{constructor(){this.W_=new xt(ge.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},_d=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,yw.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wR=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ER=class{constructor(){this.queries=fB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=fB(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new te($.ABORTED,"Firestore shutting down"))}};function fB(){return new na(n=>OB(n),kw)}function lj(n,e){return S(this,null,function*(){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new wR,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ZR(s,`Initialization of query '${rd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&XR(t)})}function uj(n,e){return S(this,null,function*(){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function jte(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&XR(t)}function zte(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function XR(n){n.Y_.forEach(e=>{e.next()})}var IR,pB;(pB=IR||(IR={})).ea="default",pB.Cache="cache";var vw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==IR.Cache}};var ww=class{constructor(e){this.key=e}},Ew=class{constructor(e){this.key=e}},bR=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=LB(e),this.Ra=new yw(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new _w,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let T=i.get(h),C=Nw(this.query,g)?g:null,k=!!T&&this.mutatedKeys.has(T.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),N=!1;T&&C?T.data.isEqual(C.data)?k!==F&&(r.track({type:3,doc:C}),N=!0):this.ga(T,C)||(r.track({type:2,doc:C}),N=!0,(c&&this.Aa(C,c)>0||d&&this.Aa(C,d)<0)&&(a=!0)):!T&&C?(r.track({type:0,doc:C}),N=!0):T&&!C&&(r.track({type:1,doc:T}),N=!0,(c||d)&&(a=!0)),N&&(C?(s=s.add(C),o=F?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,g)=>function(C,k){let F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return F(C)-F(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new _d(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _w,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=$e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ew(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ww(r))}),t}ba(e){this.Ta=e.Ts,this.da=$e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _d.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},TR=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},CR=class{constructor(e){this.key=e,this.va=!1}},SR=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new na(a=>OB(a),kw),this.Ma=new Map,this.xa=new Set,this.Oa=new xt(ge.comparator),this.Na=new Map,this.La=new up,this.Ba={},this.ka=new Map,this.qa=lp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function $te(n,e,t=!0){return S(this,null,function*(){let r=mj(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield dj(r,e,t,!0),i})}function qte(n,e){return S(this,null,function*(){let t=mj(n);yield dj(t,e,!0,!1)})}function dj(n,e,t,r){return S(this,null,function*(){let i=yield Dte(n.localStore,zi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Hte(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&rj(n.remoteStore,i),a})}function Hte(n,e,t,r,i){return S(this,null,function*(){n.Ka=(g,T,C)=>function(F,N,q,ne){return S(this,null,function*(){let J=N.view.ma(q);J.ns&&(J=yield dB(F.localStore,N.query,!1).then(({documents:R})=>N.view.ma(R,J)));let ue=ne&&ne.targetChanges.get(N.targetId),qe=ne&&ne.targetMismatches.get(N.targetId)!=null,fe=N.view.applyChanges(J,F.isPrimaryClient,ue,qe);return mB(F,N.targetId,fe.wa),fe.snapshot})}(n,g,T,C);let o=yield dB(n.localStore,e,!0),s=new bR(e,o.Ts),a=s.ma(o.documents),c=ap.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);mB(n,t,d.wa);let h=new TR(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function Gte(n,e,t){return S(this,null,function*(){let r=Ae(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!kw(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&KR(r.remoteStore,i.targetId),DR(r,i.targetId)}).catch(yp))):(DR(r,i.targetId),yield lR(r.localStore,i.targetId,!0))})}function Wte(n,e){return S(this,null,function*(){let t=Ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),KR(t.remoteStore,r.targetId))})}function Kte(n,e,t){return S(this,null,function*(){let r=tne(n);try{let i=yield function(s,a){let c=Ae(s),d=pn.now(),h=a.reduce((C,k)=>C.add(k.key),$e()),g,T;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let k=jo(),F=$e();return c.cs.getEntries(C,h).next(N=>{k=N,k.forEach((q,ne)=>{ne.isValidDocument()||(F=F.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,k)).next(N=>{g=N;let q=[];for(let ne of a){let J=tte(ne,g.get(ne.key).overlayedDocument);J!=null&&q.push(new Hi(ne.key,J,AB(J.value.mapValue),Vo.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,q,a)}).next(N=>{T=N;let q=N.applyToLocalDocumentSet(g,F);return c.documentOverlayCache.saveOverlays(C,N.batchId,q)})}).then(()=>({batchId:T.batchId,changes:VB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new xt(et)),d=d.insert(a,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,t),yield wp(r,i.changes),yield Fw(r.remoteStore)}catch(i){let o=ZR(i,"Failed to persist write");t.reject(o)}})}function hj(n,e){return S(this,null,function*(){let t=Ae(n);try{let r=yield Tte(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?st(s.va):i.removedDocuments.size>0&&(st(s.va),s.va=!1))}),yield wp(t,r,e)}catch(r){yield yp(r)}})}function gB(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ae(s);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let T of g.j_)T.Z_(a)&&(d=!0)}),d&&XR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qte(n,e,t){return S(this,null,function*(){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new xt(ge.comparator);s=s.insert(o,oi.newNoDocument(o,Ne.min()));let a=$e().add(o),c=new sw(Ne.min(),new Map,new xt(et),s,a);yield hj(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),eM(r)}else yield lR(r.localStore,e,!1).then(()=>DR(r,e,t)).catch(yp)})}function Yte(n,e){return S(this,null,function*(){let t=Ae(n),r=e.batch.batchId;try{let i=yield bte(t.localStore,e);pj(t,r,null),fj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wp(t,i)}catch(i){yield yp(i)}})}function Jte(n,e,t){return S(this,null,function*(){let r=Ae(n);try{let i=yield function(s,a){let c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(st(g!==null),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);pj(r,e,t),fj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wp(r,i)}catch(i){yield yp(i)}})}function fj(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function pj(n,e,t){let r=Ae(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function DR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||gj(n,r)})}function gj(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(KR(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),eM(n))}function mB(n,e,t){for(let r of t)r instanceof ww?(n.La.addReference(r.key,e),Zte(n,r)):r instanceof Ew?(se("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||gj(n,r.key)):Ee()}function Zte(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(r),eM(n))}function eM(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ge(Ct.fromString(e)),r=n.qa.next();n.Na.set(r,new CR(t)),n.Oa=n.Oa.insert(t,r),rj(n.remoteStore,new cp(zi(HR(t.path)),r,"TargetPurposeLimboResolution",TB.oe))}}function wp(n,e,t){return S(this,null,function*(){let r=Ae(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=oR.Wi(c.targetId,d);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,d){return S(this,null,function*(){let h=Ae(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(d,T=>W.forEach(T.$i,C=>h.persistence.referenceDelegate.addReference(g,T.targetId,C)).next(()=>W.forEach(T.Ui,C=>h.persistence.referenceDelegate.removeReference(g,T.targetId,C)))))}catch(g){if(!_p(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let T=g.targetId;if(!g.fromCache){let C=h.os.get(T),k=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(T,F)}}})}(r.localStore,o))})}function Xte(n,e){return S(this,null,function*(){let t=Ae(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());let r=yield tj(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new te($.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wp(t,r.hs)}})}function ene(n,e){let t=Ae(n),r=t.Na.get(e);if(r&&r.va)return $e().add(r.key);{let i=$e(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function mj(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ene.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qte.bind(null,e),e.Ca.d_=jte.bind(null,e.eventManager),e.Ca.$a=zte.bind(null,e.eventManager),e}function tne(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jte.bind(null,e),e}var yB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=Ow(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Ite(this.persistence,new aR,t.initialUser,this.serializer)}Ga(t){return new nR(iR.Zr,this.serializer)}Wa(t){return new uR}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var nne=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gB(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xte.bind(null,this.syncEngine),yield Bte(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ER}()}createDatastore(t){let r=Ow(t.databaseInfo.databaseId),i=function(s){return new fR(s)}(t.databaseInfo);return function(s,a,c,d){return new mR(s,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new _R(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>gB(this.syncEngine,r,0),function(){return fw.D()?new fw:new dR}())}createSyncEngine(t,r){return function(o,s,a,c,d,h,g){let T=new SR(o,s,a,c,d,h);return g&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(o){return S(this,null,function*(){let s=Ae(o);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield vp(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Iw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Uo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var AR=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=Xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){se("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(se("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ZR(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sA(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield tj(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _B(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rne(n);se("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hB(e.remoteStore,i)),n._onlineComponents=e})}function rne(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ld("Error using user provided cache. Falling back to memory cache: "+t),yield sA(n,new yB)}}else se("FirestoreClient","Using default OfflineComponentProvider"),yield sA(n,new yB);return n._offlineComponents})}function yj(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),yield _B(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),yield _B(n,new nne))),n._onlineComponents})}function ine(n){return yj(n).then(e=>e.syncEngine)}function _j(n){return S(this,null,function*(){let e=yield yj(n),t=e.eventManager;return t.onListen=$te.bind(null,e.syncEngine),t.onUnlisten=Gte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qte.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wte.bind(null,e.syncEngine),t})}function one(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,d){let h=new Iw({next:T=>{h.Za(),s.enqueueAndForget(()=>uj(o,g));let C=T.docs.has(a);!C&&T.fromCache?d.reject(new te($.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&c&&c.source==="server"?d.reject(new te($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(T)},error:T=>d.reject(T)}),g=new vw(HR(a.path),h,{includeMetadataChanges:!0,_a:!0});return lj(o,g)}(yield _j(n),n.asyncQueue,e,t,r)})),r.promise}function sne(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,d){let h=new Iw({next:T=>{h.Za(),s.enqueueAndForget(()=>uj(o,g)),T.fromCache&&c.source==="server"?d.reject(new te($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(T)},error:T=>d.reject(T)}),g=new vw(a,h,{includeMetadataChanges:!0,_a:!0});return lj(o,g)}(yield _j(n),n.asyncQueue,e,t,r)})),r.promise}function vj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vB=new Map;function wj(n,e,t){if(!t)throw new te($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ane(n,e,t,r){if(e===!0&&r===!0)throw new te($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wB(n){if(!ge.isDocumentKey(n))throw new te($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EB(n){if(ge.isDocumentKey(n))throw new te($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function zo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Vw(n);throw new te($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cne(n,e){if(e<=0)throw new te($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var bw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ane("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aA;switch(r.type){case"firstParty":return new dA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=vB.get(t);r&&(se("ComponentProvider","Removing Datastore"),vB.delete(t),r.terminate())}(this),Promise.resolve()}};function Ej(n,e,t,r={}){var i;let o=(n=zo(n,vd))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ld("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dn.MOCK_USER;else{a=a_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new te($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dn(d)}n._authCredentials=new cA(new Zv(a,c))}}var ia=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xs=class n extends ia{constructor(e,t,r){super(e,t,HR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ge(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ij(n,e,...t){if(n=yt(n),wj("collection","path",e),n instanceof vd){let r=Ct.fromString(e,...t);return EB(r),new Xs(n,null,r)}{if(!(n instanceof Xn||n instanceof Xs))throw new te($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return EB(r),new Xs(n.firestore,null,r)}}function tM(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Xv.newId()),wj("doc","path",e),n instanceof vd){let r=Ct.fromString(e,...t);return wB(r),new Xn(n,null,new ge(r))}{if(!(n instanceof Xn||n instanceof Xs))throw new te($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return wB(r),new Xn(n.firestore,n instanceof Xs?n.converter:null,new ge(r))}}var Tw=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pw(this,"async_queue_retry"),this.Vu=()=>{let r=oA();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=oA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=oA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return S(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_p(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Uo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=vR.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}wu(){return S(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var oa=class extends vd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Tw,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tw(e),this._firestoreClient=void 0,yield e}})}};function bj(n,e){let t=typeof n=="object"?n:Vs(),r=typeof n=="string"?n:e||"(default)",i=ic(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=s_("firestore");o&&Ej(i,...o)}return i}function nM(n){if(n._terminated)throw new te($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lne(n),n._firestoreClient}function lne(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,d,h){return new mA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vj(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new AR(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var dp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Rn.fromBase64String(e))}catch(t){throw new te($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var wd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hp=class{constructor(e){this._methodName=e}};var fp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}};var pp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var une=/^__.*__$/,RR=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}},Cw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Tj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}var MR=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Tj(this.Cu)&&une.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},xR=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ow(e)}Qu(e,t,r,i=!1){return new MR({Cu:e,methodName:t,qu:r,path:gr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rM(n){let e=n._freezeSettings(),t=Ow(n._databaseId);return new xR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dne(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);iM("Data must be an object, but it was:",s,r);let a=Cj(r,s),c,d;if(o.merge)c=new Ar(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let T=PR(e,g,t);if(!s.contains(T))throw new te($.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Dj(h,T)||h.push(T)}c=new Ar(h),d=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=s.fieldTransforms;return new RR(new pr(a),c,d)}var Sw=class n extends hp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function hne(n,e,t,r){let i=n.Qu(1,e,t);iM("Data must be an object, but it was:",i,r);let o=[],s=pr.empty();kc(r,(c,d)=>{let h=oM(e,c,t);d=yt(d);let g=i.Nu(h);if(d instanceof Sw)o.push(h);else{let T=Ep(d,g);T!=null&&(o.push(h),s.set(h,T))}});let a=new Ar(o);return new Cw(s,a,i.fieldTransforms)}function fne(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[PR(e,r,t)],c=[i];if(o.length%2!=0)throw new te($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)a.push(PR(e,o[T])),c.push(o[T+1]);let d=[],h=pr.empty();for(let T=a.length-1;T>=0;--T)if(!Dj(d,a[T])){let C=a[T],k=c[T];k=yt(k);let F=s.Nu(C);if(k instanceof Sw)d.push(C);else{let N=Ep(k,F);N!=null&&(d.push(C),h.set(C,N))}}let g=new Ar(d);return new Cw(h,g,s.fieldTransforms)}function pne(n,e,t,r=!1){return Ep(t,n.Qu(r?4:3,e))}function Ep(n,e){if(Sj(n=yt(n)))return iM("Unsupported field value:",e,n),Cj(n,e);if(n instanceof hp)return function(r,i){if(!Tj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ep(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yee(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=pn.fromDate(r);return{timestampValue:uw(i.serializer,o)}}if(r instanceof pn){let o=new pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uw(i.serializer,o)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dp)return{bytesValue:KB(i.serializer,r._byteString)};if(r instanceof Xn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pp)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return GR(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vw(r)}`)}(n,e)}function Cj(n,e){let t={};return CB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(n,(r,i)=>{let o=Ep(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Sj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pn||n instanceof fp||n instanceof dp||n instanceof Xn||n instanceof hp||n instanceof pp)}function iM(n,e,t){if(!Sj(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Vw(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function PR(n,e,t){if((e=yt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return oM(n,e);throw Dw("Field path arguments must be of type string or ",n,!1,void 0,t)}var gne=new RegExp("[~\\*/\\[\\]]");function oM(n,e,t){if(e.search(gne)>=0)throw Dw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wd(...e.split("."))._internalPath}catch{throw Dw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dw(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new te($.INVALID_ARGUMENT,a+n+c)}function Dj(n,e){return n.some(t=>t.isEqual(e))}var Aw=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Uw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},kR=class extends Aw{data(){return super.data()}};function Uw(n,e){return typeof e=="string"?oM(n,e):e instanceof wd?e._internalPath:e._delegate._internalPath}function mne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gp=class{},mp=class extends gp{};function Aj(n,e,...t){let r=[];e instanceof gp&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof NR).length,a=o.filter(c=>c instanceof Rw).length;if(s>1||s>0&&a>0)throw new te($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Rw=class n extends mp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Pj(e._query,t),new ia(e.firestore,e.converter,RA(e._query,t))}_parse(e){let t=rM(e.firestore);return function(o,s,a,c,d,h,g){let T;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bB(g,h);let C=[];for(let k of g)C.push(IB(c,o,k));T={arrayValue:{values:C}}}else T=IB(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bB(g,h),T=pne(a,s,g,h==="in"||h==="not-in");return Ht.create(d,h,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Rj(n,e,t){let r=e,i=Uw("where",n);return Rw._create(i,r,t)}var NR=class n extends gp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Pj(s,c),s=RA(s,c)}(e._query,t),new ia(e.firestore,e.converter,RA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OR=class n extends mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new te($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(o,s)}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new ta(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Mj(n,e="asc"){let t=e,r=Uw("orderBy",n);return OR._create(r,t)}var LR=class n extends mp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ia(e.firestore,e.converter,ow(e._query,this._limit,this._limitType))}};function xj(n){return cne("limit",n),LR._create("limit",n,"F")}function IB(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new te($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NB(e)&&t.indexOf("/")!==-1)throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ct.fromString(t));if(!ge.isDocumentKey(r))throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KU(n,new ge(r))}if(t instanceof Xn)return KU(n,t._key);throw new te($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vw(t)}.`)}function bB(n,e){if(!Array.isArray(n)||n.length===0)throw new te($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pj(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new te($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var FR=class{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return kc(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>bt(s.doubleValue));return new pp(o)}convertGeoPoint(e){return new fp(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jR(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){let t=Bo(e);return new pn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ct.fromString(e);st(ej(r));let i=new rw(r.get(1),r.get(3)),o=new ge(r.popFirst(5));return i.isEqual(t)||Uo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function yne(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Cc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mw=class extends Aw{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Uw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},cd=class extends Mw{data(e={}){return super.data(e)}},VR=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cd(this._firestore,this._userDataWriter,r.key,r,new Cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:_ne(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _ne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function kj(n){n=zo(n,Xn);let e=zo(n.firestore,oa);return one(nM(e),n._key).then(t=>vne(e,n,t))}var xw=class extends FR{constructor(e){super(),this.firestore=e}convertBytes(e){return new dp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}};function Nj(n){n=zo(n,ia);let e=zo(n.firestore,oa),t=nM(e),r=new xw(e);return mne(n._query),sne(t,n._query).then(i=>new VR(e,r,n,i))}function Oj(n,e,t,...r){n=zo(n,Xn);let i=zo(n.firestore,oa),o=rM(i),s;return s=typeof(e=yt(e))=="string"||e instanceof wd?fne(o,"updateDoc",n._key,e,t,r):hne(o,"updateDoc",n._key,e),sM(i,[s.toMutation(n._key,Vo.exists(!0))])}function Lj(n){return sM(zo(n.firestore,oa),[new sp(n._key,Vo.none())])}function Fj(n,e){let t=zo(n.firestore,oa),r=tM(n),i=yne(n.converter,e);return sM(t,[dne(rM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Vo.exists(!1))]).then(()=>r)}function sM(n,e){return function(r,i){let o=new ii;return r.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Kte(yield ine(r),i,o)})),o.promise}(nM(n),e)}function vne(n,e,t){let r=t.docs.get(e._key),i=new xw(n);return new Mw(n,i,e._key,r,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ed=i})(ki),Pi(new Zn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new oa(new lA(r.getProvider("auth-internal")),new fA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rw(d.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Et(qU,"4.7.3",e),Et(qU,"4.7.3","esm2017")})();var Oc=class{constructor(e){return e}},Vj="firestore",aM=class{constructor(){return cc(Vj)}};var cM=new Y("angularfire2.firestore-instances");function wne(n,e){let t=Eu(Vj,n,e);return t&&new Oc(t)}function Ene(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Oc(r)}}var Ine={provide:aM,deps:[[new en,cM]]},bne={provide:Oc,useFactory:wne,deps:[[new en,cM],Xr]};function Uj(n,...e){return Et("angularfire",_o.full,"fst"),wn([bne,Ine,{provide:cM,useFactory:Ene(n),multi:!0,deps:[Fe,At,Bs,vo,[new en,gc],[new en,Us],...e]}])}var Ip=ot(jU,!0);var Bj=ot(Fj,!0);var Lc=ot(Ij,!0);var jj=ot(Lj,!0);var bp=ot(tM,!0);var zj=ot(kj,!0);var $j=ot(Nj,!0);var qj=ot(bj,!0);var lM=ot(xj,!0);var Bw=ot(Mj,!0);var Tp=ot(Aj,!0);var uM=ot(Oj,!0);var bd=ot(Rj,!0);var Jj="firebasestorage.googleapis.com",Zj="storageBucket",Cne=2*60*1e3,Sne=10*60*1e3;var Pt=class n extends Nn{constructor(e,t,r=0){super(dM(e),`Firebase Storage: ${t} (${dM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Vt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Vt||{});function dM(n){return"storage/"+n}function yM(){let n="An unknown error occurred, please check the error payload for server response.";return new Pt(Vt.UNKNOWN,n)}function Dne(n){return new Pt(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Ane(n){return new Pt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Rne(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Vt.UNAUTHENTICATED,n)}function Mne(){return new Pt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xne(n){return new Pt(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Pne(){return new Pt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kne(){return new Pt(Vt.CANCELED,"User canceled the upload/download.")}function Nne(n){return new Pt(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}function One(n){return new Pt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Lne(){return new Pt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Zj+"' property when initializing the app?")}function Fne(){return new Pt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Vne(){return new Pt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Une(n){return new Pt(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hM(n){return new Pt(Vt.INVALID_ARGUMENT,n)}function Xj(){return new Pt(Vt.APP_DELETED,"The Firebase app was deleted.")}function Bne(n){return new Pt(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sp(n,e){return new Pt(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Cp(n){throw new Pt(Vt.INTERNAL_ERROR,"Internal error: "+n)}var ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw One(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(ue){ue.path_=decodeURIComponent(ue.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${g}/${h}/b/${i}/o${T}`,"i"),k={bucket:1,path:3},F=t===Jj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",q=new RegExp(`^https?://${F}/${i}/${N}`,"i"),J=[{regex:a,indices:c,postModify:o},{regex:C,indices:k,postModify:d},{regex:q,indices:{bucket:1,path:2},postModify:d}];for(let ue=0;ue<J.length;ue++){let qe=J[ue],fe=qe.regex.exec(e);if(fe){let R=fe[qe.indices.bucket],_=fe[qe.indices.path];_||(_=""),r=new n(R,_),qe.postModify(r);break}}if(r==null)throw Nne(e);return r}},fM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function jne(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,n(C,c())},N)}function T(){o&&clearTimeout(o)}function C(N,...q){if(d){T();return}if(N){T(),h.call(null,N,...q);return}if(c()||s){T(),h.call(null,N,...q);return}r<64&&(r*=2);let J;a===1?(a=2,J=0):J=(r+Math.random())*1e3,g(J)}let k=!1;function F(N){k||(k=!0,T(),!d&&(i!==null?(N||(a=2),clearTimeout(i),g(0)):N||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,F(!0)},t),F}function zne(n){n(!1)}function $ne(n){return n!==void 0}function qne(n){return typeof n=="object"&&!Array.isArray(n)}function _M(n){return typeof n=="string"||n instanceof String}function Hj(n){return vM()&&n instanceof Blob}function vM(){return typeof Blob<"u"}function Gj(n,e,t,r){if(r<e)throw hM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hM(`Invalid value for '${n}'. Expected ${t} or less.`)}function wM(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ez(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Cd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Cd||{});function Hne(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var pM=class{constructor(e,t,r,i,o,s,a,c,d,h,g,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Td(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Cd.NO_ERROR,c=o.getStatus();if(!a||Hne(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Cd.ABORT;r(!1,new Td(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new Td(d,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());$ne(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=yM();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?Xj():kne();s(c)}else{let c=Pne();s(c)}};this.canceled_?t(!1,new Td(!1,null,!0)):this.backoffId_=jne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Td=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Gne(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Wne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Kne(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Qne(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Yne(n,e,t,r,i,o,s=!0){let a=ez(n.urlParams),c=n.url+a,d=Object.assign({},n.headers);return Kne(d,e),Gne(d,t),Wne(d,o),Qne(d,r),new pM(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function Jne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zne(...n){let e=Jne();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(vM())return new Blob(n);throw new Pt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Xne(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function ere(n){if(typeof atob>"u")throw Une("base-64");return atob(n)}var Gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Dp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function tre(n,e){switch(n){case Gi.RAW:return new Dp(tz(e));case Gi.BASE64:case Gi.BASE64URL:return new Dp(nz(n,e));case Gi.DATA_URL:return new Dp(rre(e),ire(e))}throw yM()}function tz(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function nre(n){let e;try{e=decodeURIComponent(n)}catch{throw Sp(Gi.DATA_URL,"Malformed data URL.")}return tz(e)}function nz(n,e){switch(n){case Gi.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Sp(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gi.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Sp(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=ere(e)}catch(i){throw i.message.includes("polyfill")?i:Sp(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var zw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sp(Gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=ore(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function rre(n){let e=new zw(n);return e.base64?nz(Gi.BASE64,e.rest):nre(e.rest)}function ire(n){return new zw(n).contentType}function ore(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var $w=class n{constructor(e,t){let r=0,i="";Hj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Hj(this.data_)){let r=this.data_,i=Xne(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(vM()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Zne.apply(null,t))}else{let t=e.map(s=>_M(s)?tre(Gi.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function rz(n){let e;try{e=JSON.parse(n)}catch{return null}return qne(e)?e:null}function sre(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function are(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function iz(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function cre(n,e){return e}var gn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||cre}},jw=null;function lre(n){return!_M(n)||n.length<2?n:iz(n)}function oz(){if(jw)return jw;let n=[];n.push(new gn("bucket")),n.push(new gn("generation")),n.push(new gn("metageneration")),n.push(new gn("name","fullPath",!0));function e(o,s){return lre(s)}let t=new gn("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new gn("size");return i.xform=r,n.push(i),n.push(new gn("timeCreated")),n.push(new gn("updated")),n.push(new gn("md5Hash",null,!0)),n.push(new gn("cacheControl",null,!0)),n.push(new gn("contentDisposition",null,!0)),n.push(new gn("contentEncoding",null,!0)),n.push(new gn("contentLanguage",null,!0)),n.push(new gn("contentType",null,!0)),n.push(new gn("metadata","customMetadata",!0)),jw=n,jw}function ure(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new ai(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function dre(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return ure(r,n),r}function sz(n,e,t){let r=rz(e);return r===null?null:dre(n,r,t)}function hre(n,e,t,r){let i=rz(e);if(i===null||!_M(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(d=>{let h=n.bucket,g=n.fullPath,T="/b/"+s(h)+"/o/"+s(g),C=wM(T,t,r),k=ez({alt:"media",token:d});return C+k})[0]}function fre(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var qw=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function az(n){if(!n)throw yM()}function pre(n,e){function t(r,i){let o=sz(n,i,e);return az(o!==null),o}return t}function gre(n,e){function t(r,i){let o=sz(n,i,e);return az(o!==null),hre(o,i,n.host,n._protocol)}return t}function cz(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Mne():i=Rne():t.getStatus()===402?i=Ane(n.bucket):t.getStatus()===403?i=xne(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function mre(n){let e=cz(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Dne(n.path)),o.serverResponse=i.serverResponse,o}return t}function yre(n,e,t){let r=e.fullServerUrl(),i=wM(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new qw(i,o,gre(n,t),s);return a.errorHandler=mre(e),a}function _re(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function vre(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=_re(null,e)),r}function wre(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let J="";for(let ue=0;ue<2;ue++)J=J+Math.random().toString().slice(2);return J}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let d=vre(e,r,i),h=fre(d,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,T=`\r
--`+c+"--",C=$w.getBlob(g,r,T);if(C===null)throw Fne();let k={name:d.fullPath},F=wM(o,n.host,n._protocol),N="POST",q=n.maxUploadRetryTime,ne=new qw(F,N,pre(n,t),q);return ne.urlParams=k,ne.headers=s,ne.body=C.uploadData(),ne.errorHandler=cz(e),ne}var jIe=256*1024;var Wj=null,gM=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Cp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},mM=class extends gM{initXhr(){this.xhr_.responseType="text"}};function lz(){return Wj?Wj():new mM}var Sd=class n{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iz(this._location.path)}get storage(){return this._service}get parent(){let e=sre(this._location.path);if(e===null)return null;let t=new ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Bne(e)}};function Ere(n,e,t){n._throwIfRoot("uploadBytes");let r=wre(n.storage,n._location,oz(),new $w(e,!0),t);return n.storage.makeRequestWithTokens(r,lz).then(i=>({metadata:i,ref:n}))}function Ire(n){n._throwIfRoot("getDownloadURL");let e=yre(n.storage,n._location,oz());return n.storage.makeRequestWithTokens(e,lz).then(t=>{if(t===null)throw Vne();return t})}function bre(n,e){let t=are(n._location.path,e),r=new ai(n._location.bucket,t);return new Sd(n.storage,r)}function Tre(n){return/^[A-Za-z]+:\/\//.test(n)}function Cre(n,e){return new Sd(n,e)}function uz(n,e){if(n instanceof Ap){let t=n;if(t._bucket==null)throw Lne();let r=new Sd(t,t._bucket);return e!=null?uz(r,e):r}else return e!==void 0?bre(n,e):n}function Sre(n,e){if(e&&Tre(e)){if(n instanceof Ap)return Cre(n,e);throw hM("To use ref(service, url), the first argument must be a Storage instance.")}else return uz(n,e)}function Kj(n,e){let t=e?.[Zj];return t==null?null:ai.makeFromBucketSpec(t,n)}function Dre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:a_(i,n.app.options.projectId))}var Ap=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Jj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Cne,this._maxUploadRetryTime=Sne,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=Kj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=Kj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sd(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new fM(Xj());{let s=Yne(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return S(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Qj="@firebase/storage",Yj="0.13.2";var dz="storage";function hz(n,e,t){return n=yt(n),Ere(n,e,t)}function fz(n){return n=yt(n),Ire(n)}function pz(n,e){return n=yt(n),Sre(n,e)}function gz(n=Vs(),e){n=yt(n);let r=ic(n,dz).getImmediate({identifier:e}),i=s_("storage");return i&&mz(r,...i),r}function mz(n,e,t,r={}){Dre(n,e,t,r)}function Are(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ap(t,r,i,e,ki)}function Rre(){Pi(new Zn(dz,Are,"PUBLIC").setMultipleInstances(!0)),Et(Qj,Yj,""),Et(Qj,Yj,"esm2017")}Rre();var Fc=class{constructor(e){return e}},yz="storage",EM=class{constructor(){return cc(yz)}};var IM=new Y("angularfire2.storage-instances");function Mre(n,e){let t=Eu(yz,n,e);return t&&new Fc(t)}function xre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fc(r)}}var Pre={provide:EM,deps:[[new en,IM]]},kre={provide:Fc,useFactory:Mre,deps:[[new en,IM],Xr]};function _z(n,...e){return Et("angularfire",_o.full,"gcs"),wn([kre,Pre,{provide:IM,useFactory:xre(n),multi:!0,deps:[Fe,At,Bs,vo,[new en,gc],[new en,Us],...e]}])}var vz=ot(fz,!0);var wz=ot(gz,!0);var Ez=ot(pz,!0);var Iz=ot(hz,!0);var Pz=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ie(go),ie(ur))};static \u0275dir=mt({type:n})}return n})(),Zw=(()=>{class n extends Pz{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275dir=mt({type:n,features:[Er]})}return n})(),Op=new Y(""),Ore={provide:Op,useExisting:Ii(()=>SM),multi:!0},SM=(()=>{class n extends Zw{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Si([Ore]),Er]})}return n})(),Lre={provide:Op,useExisting:Ii(()=>Wi),multi:!0};function Fre(){let n=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Vre=new Y(""),Wi=(()=>{class n extends Pz{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Fre())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ie(go),ie(ur),ie(Vre,8))};static \u0275dir=mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ye("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Si([Lre]),Er]})}return n})();function Ure(n){return n==null||Bre(n)===0}function Bre(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var DM=new Y(""),kz=new Y("");function jre(n){return Ure(n.value)?{required:!0}:null}function bz(n){return null}function Nz(n){return n!=null}function Oz(n){return Ts(n)?lt(n):n}function Lz(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function Fz(n,e){return e.map(t=>t(n))}function zre(n){return!n.validate}function Vz(n){return n.map(e=>zre(e)?e:t=>e.validate(t))}function $re(n){if(!n)return null;let e=n.filter(Nz);return e.length==0?null:function(t){return Lz(Fz(t,e))}}function AM(n){return n!=null?$re(Vz(n)):null}function qre(n){if(!n)return null;let e=n.filter(Nz);return e.length==0?null:function(t){let r=Fz(t,e).map(Oz);return qE(r).pipe(Ie(Lz))}}function RM(n){return n!=null?qre(Vz(n)):null}function Tz(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hre(n){return n._rawValidators}function Gre(n){return n._rawAsyncValidators}function bM(n){return n?Array.isArray(n)?n:[n]:[]}function Gw(n,e){return Array.isArray(n)?n.includes(e):n===e}function Cz(n,e){let t=bM(e);return bM(n).forEach(i=>{Gw(t,i)||t.push(i)}),t}function Sz(n,e){return bM(e).filter(t=>!Gw(n,t))}var Ww=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rd=class extends Ww{name;get formDirective(){return null}get path(){return null}},Np=class extends Ww{_parent=null;name=null;valueAccessor=null},Kw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Wre={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Cbe=ae(z({},Wre),{"[class.ng-submitted]":"isSubmitted"}),aa=(()=>{class n extends Kw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ie(Np,2))};static \u0275dir=mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Er]})}return n})(),Md=(()=>{class n extends Kw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ie(Rd,10))};static \u0275dir=mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&gy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Er]})}return n})();var Rp="VALID",Hw="INVALID",Dd="PENDING",Mp="DISABLED",sa=class{},Qw=class extends sa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pp=class extends sa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kp=class extends sa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ad=class extends sa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},TM=class extends sa{source;constructor(e){super(),this.source=e}},CM=class extends sa{source;constructor(e){super(),this.source=e}};function Uz(n){return(Xw(n)?n.validators:n)||null}function Kre(n){return Array.isArray(n)?AM(n):n||null}function Bz(n,e){return(Xw(e)?e.asyncValidators:n)||null}function Qre(n){return Array.isArray(n)?RM(n):n||null}function Xw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Yre(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function Jre(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var Yw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kr(this.statusReactive)}set status(e){Kr(()=>this.statusReactive.set(e))}_status=Zl(()=>this.statusReactive());statusReactive=Hl(void 0);get valid(){return this.status===Rp}get invalid(){return this.status===Hw}get pending(){return this.status==Dd}get disabled(){return this.status===Mp}get enabled(){return this.status!==Mp}errors;get pristine(){return Kr(this.pristineReactive)}set pristine(e){Kr(()=>this.pristineReactive.set(e))}_pristine=Zl(()=>this.pristineReactive());pristineReactive=Hl(!0);get dirty(){return!this.pristine}get touched(){return Kr(this.touchedReactive)}set touched(e){Kr(()=>this.touchedReactive.set(e))}_touched=Zl(()=>this.touchedReactive());touchedReactive=Hl(!1);get untouched(){return!this.touched}_events=new St;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Cz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sz(e,this._rawAsyncValidators))}hasValidator(e){return Gw(this._rawValidators,e)}hasAsyncValidator(e){return Gw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kp(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pp(!0,r))}markAsPending(e={}){this.status=Dd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ad(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mp,this.errors=null,this._forEachChild(i=>{i.disable(ae(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qw(this.value,r)),this._events.next(new Ad(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rp,this._forEachChild(r=>{r.enable(ae(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rp||this.status===Dd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qw(this.value,t)),this._events.next(new Ad(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mp:Rp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Dd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Oz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ad(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?Mp:this.errors?Hw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dd)?Dd:this._anyControlsHaveStatus(Hw)?Hw:Rp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Kre(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qre(this._rawAsyncValidators)}},Jw=class extends Yw{constructor(e,t,r){super(Uz(t),Bz(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Jre(this,!0,e),Object.keys(e).forEach(r=>{Yre(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var MM=new Y("",{providedIn:"root",factory:()=>xM}),xM="always";function Zre(n,e){return[...e.path,n]}function jz(n,e,t=xM){zz(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),eie(n,e),nie(n,e),tie(n,e),Xre(n,e)}function Dz(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xre(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zz(n,e){let t=Hre(n);e.validator!==null?n.setValidators(Tz(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Gre(n);e.asyncValidator!==null?n.setAsyncValidators(Tz(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Dz(e._rawValidators,i),Dz(e._rawAsyncValidators,i)}function eie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&$z(n,e)})}function tie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&$z(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function $z(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nie(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function rie(n,e){n==null,zz(n,e)}function iie(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function oie(n){return Object.getPrototypeOf(n.constructor)===Zw}function sie(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aie(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wi?t=o:oie(o)?r=o:i=o}),i||r||t||null}var cie={provide:Rd,useExisting:Ii(()=>Vc)},xp=Promise.resolve(),Vc=(()=>{class n extends Rd{callSetDisabledState;get submitted(){return Kr(this.submittedReactive)}_submitted=Zl(()=>this.submittedReactive());submittedReactive=Hl(!1);_directives=new Set;form;ngSubmit=new gt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Jw({},AM(t),RM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jz(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xp.then(()=>{let r=this._findContainer(t.path),i=new Jw({});rie(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),sie(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new TM(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new CM(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ie(DM,10),ie(kz,10),ie(MM,8))};static \u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ye("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Si([cie]),Er]})}return n})();function Az(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Rz(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var lie=class extends Yw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Uz(t),Bz(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Rz(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Az(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Az(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Rz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var uie={provide:Np,useExisting:Ii(()=>$o)},Mz=Promise.resolve(),$o=(()=>{class n extends Np{_changeDetectorRef;callSetDisabledState;control=new lie;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new gt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aie(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),iie(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Mz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ds(r);Mz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Zre(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ie(Rd,9),ie(DM,10),ie(kz,10),ie(Op,10),ie(Ss,8),ie(MM,8))};static \u0275dir=mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Si([uie]),Er,lr]})}return n})();var xd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var die={provide:Op,useExisting:Ii(()=>Pd),multi:!0};function qz(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function hie(n){return n.split(":")[0]}var Pd=(()=>{class n extends Zw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=qz(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=hie(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ye("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Si([die]),Er]})}return n})(),eE=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ie(ur),ie(go),ie(Pd,9))};static \u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),fie={provide:Op,useExisting:Ii(()=>Hz),multi:!0};function xz(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function pie(n){return n.split(":")[0]}var Hz=(()=>{class n extends Zw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],d=this._getOptionValue(c.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=pie(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Si([fie]),Er]})}return n})(),tE=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(xz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ie(ur),ie(go),ie(Hz,9))};static \u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var gie=(()=>{class n{_validator=bz;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bz,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,features:[lr]})}return n})();var mie={provide:DM,useExisting:Ii(()=>Uc),multi:!0};var Uc=(()=>{class n extends gie{required;inputName="required";normalizeInput=Ds;createValidator=t=>jre;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fo(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Rh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Si([mie]),Er]})}return n})();var yie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();var ca=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:MM,useValue:t.callSetDisabledState??xM}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({imports:[yie]})}return n})();var _ie=["*"],Fp=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Ot(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(zn(t=>{let r=new Le(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let o=t.addListener(e,s=>{this._ngZone.run(()=>i.next(s))});if(!o){i.complete();return}return this._listeners.push(o),()=>o.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Lp={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Gz="500px",Wz="500px",rE=(()=>{class n{_elementRef=j(ur);_ngZone=j(Fe);_eventManager=new Fp(j(Fe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Gz;width=Wz;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||Lp}_options=Lp;mapInitialized=new gt;authFailure=new gt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=j(Ti);if(this._isBrowser=db(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(vn(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":Kz(this.height)||Gz,t.width=this.width===null?"":Kz(this.width)||Wz}}_combineOptions(){let t=this._options||{};return ae(z({},t),{center:this._center||t.center||Lp.center,zoom:this._zoom??t.zoom??Lp.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||Lp.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Rt({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[lr],ngContentSelectors:_ie,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(AN(),Mt(0,"div",0),RN(1))},encapsulation:2,changeDetection:0})}return n})(),vie=/([A-Za-z%]+)$/;function Kz(n){return n==null?"":vie.test(n)?n:`${n}px`}var Qz=(()=>{class n{_googleMap=j(rE);_elementRef=j(ur);_ngZone=j(Fe);_eventManager=new Fp(j(Fe));_options=new Ot({});_position=new Ot(void 0);_destroy=new St;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new gt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(vn(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let o=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==o||!o)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:o,shouldFocus:r}))}_combineOptions(){return Pa([this._options,this._position]).pipe(Ie(([t,r])=>ae(z({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Tl(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(Tl(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var wie=new Y("MAP_MARKER"),Eie={position:{lat:37.421995,lng:-122.084092}},Yz=(()=>{class n{_googleMap=j(rE);_ngZone=j(Fe);_eventManager=new Fp(j(Fe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new gt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:o,_label:s,_clickable:a,_icon:c,_visible:d}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&o&&r.setPosition(o),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&d!==void 0&&r.setVisible(d))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(vn(1)).toPromise()}_combineOptions(){let t=this._options||Eie;return ae(z({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[Si([{provide:wie,useExisting:n}]),lr]})}return n})();var Jz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function bie(n,e){n&1&&(v(0,"p",15),b(1," \u{1F4CD} Deine Position wird angezeigt "),w())}function Tie(n,e){n&1&&(v(0,"p",16),b(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),w())}function Cie(n,e){if(n&1){let t=dt();v(0,"div",19)(1,"h4"),b(2),w(),v(3,"p")(4,"strong"),b(5),Gr(6,"titlecase"),w()(),v(7,"p"),b(8),w(),v(9,"p"),b(10),w(),v(11,"button",20),ye("click",function(){ce(t);let i=ee().$implicit,o=ee();return le(o.getDirections(i.shop))}),b(12," \u{1F697} Route berechnen "),w()()}if(n&2){let t=ee().$implicit;V(2),tn(t.shop.name),V(3),tn(Wr(6,4,t.shop.type)),V(3),ht("\u{1F4CD} ",t.shop.address.split(",")[0],""),V(2),ht("\u2B50 ",t.shop.rating,"/5")}}function Sie(n,e){n&1&&(v(0,"div",19)(1,"h4"),b(2,"\u{1F4CD} Deine Position"),w(),v(3,"p"),b(4,"Du bist hier"),w()())}function Die(n,e){if(n&1){let t=dt();v(0,"map-marker",17),ye("mapClick",function(){let i=ce(t).$implicit,o=ee();return le(o.onMarkerClick(i))}),v(1,"map-info-window"),be(2,Cie,13,6,"div",18)(3,Sie,5,0,"div",18),w()()}if(n&2){let t=e.$implicit,r=ee();K("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),V(2),K("ngIf",t.shop),V(),K("ngIf",t.isUserLocation)}}var iE=class n{afroshops=[];userLocation=null;shopSelected=new gt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=ae(z({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[lr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h3"),b(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),w(),be(4,bie,2,0,"p",2)(5,Tie,2,0,"p",3),w(),v(6,"google-map",4),be(7,Die,4,5,"map-marker",5),w(),v(8,"div",6)(9,"h4"),b(10,"Legende"),w(),v(11,"div",7)(12,"div",8)(13,"span",9),b(14,"\u{1F37D}\uFE0F"),w(),v(15,"span"),b(16,"Restaurants"),w()(),v(17,"div",8)(18,"span",10),b(19,"\u{1F6D2}"),w(),v(20,"span"),b(21,"Lebensmittel"),w()(),v(22,"div",8)(23,"span",11),b(24,"\u2702\uFE0F"),w(),v(25,"span"),b(26,"Friseure"),w()(),v(27,"div",8)(28,"span",12),b(29,"\u{1F457}"),w(),v(30,"span"),b(31,"Mode"),w()(),v(32,"div",8)(33,"span",13),b(34,"\u{1F3E6}"),w(),v(35,"span"),b(36,"Services"),w()(),v(37,"div",8)(38,"span",14),b(39,"\u{1F4CD}"),w(),v(40,"span"),b(41,"Deine Position"),w()()()()()),t&2&&(V(4),K("ngIf",r.userLocation),V(),K("ngIf",!r.userLocation),V(),K("options",r.mapOptions)("width","100%")("height","400px"),V(),K("ngForOf",r.markers))},dependencies:[En,Xl,kn,Ga,Jz,rE,Qz,Yz],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var kd=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(o=>i.address.toLowerCase().includes(o.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ua=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=Lc(this.firestore,"afroshops");return lt($j(e)).pipe(Ie(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(o=>{let s=o.data();s.id=o.id,r.push(s)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(o=>o.name));let i=r.map(o=>this.mapFirebaseDocToAfroshopData(o));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(o=>o.name)),i.sort((o,s)=>o.name.localeCompare(s.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("city","==",e.toLowerCase()),Bw("name"));return Ip(r,{idField:"id"})}getAfroshopsByType(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("type","==",e),Bw("rating","desc"));return Ip(r,{idField:"id"})}getAfroshopById(e){return S(this,null,function*(){try{let t=bp(this.firestore,"afroshops",e),r=yield zj(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(ae(z({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return S(this,null,function*(){let t=Lc(this.firestore,"afroshops"),r=ae(z({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield Bj(t,r)).id})}updateAfroshop(e,t){return S(this,null,function*(){let r=bp(this.firestore,"afroshops",e),i=ae(z({},t),{updatedAt:new Date});yield uM(r,i)})}deleteAfroshop(e){return S(this,null,function*(){let t=bp(this.firestore,"afroshops",e);yield jj(t)})}searchAfroshops(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("name",">=",e),bd("name","<=",e+"\uF8FF"),lM(20));return Ip(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("verified","==",!0),Bw("rating","desc"),lM(e));return Ip(r,{idField:"id"})}incrementViews(e){return S(this,null,function*(){try{let t=bp(this.firestore,"afroshops",e);yield uM(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return S(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let o=Ez(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",o),console.log("\u2B06\uFE0F Upload en cours...");let s=yield Iz(o,e);console.log("\u2705 Upload termin\xE9, snapshot:",s),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield vz(s.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(de(Oc),de(Fc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mn=class n{constructor(e){this.auth=e;this.user$=PV(this.auth)}user$;register(e,t,r){return S(this,null,function*(){try{let i=yield kV(this.auth,e,t);return r&&i.user&&(yield VV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return S(this,null,function*(){try{let r=yield OV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return S(this,null,function*(){try{let e=new kC;e.setCustomParameters({prompt:"select_account"}),this.checkPopupSupport();let t=yield LV(this.auth,e);return{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("Erreur lors de la connexion Google:",e),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return S(this,null,function*(){try{yield FV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Une erreur est survenue";if(e.code)switch(e.code){case"auth/email-already-in-use":t="Cette adresse email est d\xE9j\xE0 utilis\xE9e";break;case"auth/weak-password":t="Le mot de passe doit contenir au moins 6 caract\xE8res";break;case"auth/invalid-email":t="Adresse email invalide";break;case"auth/user-not-found":t="Aucun compte associ\xE9 \xE0 cette adresse email";break;case"auth/wrong-password":t="Mot de passe incorrect";break;case"auth/too-many-requests":t="Trop de tentatives. Veuillez r\xE9essayer plus tard";break;case"auth/user-disabled":t="Ce compte a \xE9t\xE9 d\xE9sactiv\xE9";break;case"auth/operation-not-allowed":t="Cette op\xE9ration n'est pas autoris\xE9e";break;case"auth/popup-closed-by-user":t="Connexion annul\xE9e par l'utilisateur";break;case"auth/popup-blocked":t="Popup bloqu\xE9e par le navigateur. Veuillez autoriser les popups pour AfroConnect";break;case"popup-blocked":t="Popups bloqu\xE9es. Autorisez les popups pour vous connecter avec Google";break;case"auth/cancelled-popup-request":t="Demande de connexion annul\xE9e";break;default:t=e.message||"Erreur d'authentification"}return new Error(t)}static \u0275fac=function(t){return new(t||n)(de(pc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var oE=class n{constructor(){}getCurrentPosition(){return new Le(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new Le(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let o={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(o)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Rie(n,e){if(n&1){let t=dt();v(0,"div",42)(1,"button",43),ye("click",function(){ce(t);let i=ee();return le(i.goToAddAfroshop())}),b(2," \u2795 Afroshop hinzuf\xFCgen "),w()()}}function Mie(n,e){if(n&1){let t=dt();v(0,"div",42)(1,"button",44),ye("click",function(){ce(t);let i=ee();return le(i.addNewAfroshop())}),b(2," \u{1F510} Anmelden zum Hinzuf\xFCgen "),w()()}}function xie(n,e){if(n&1&&(v(0,"span",50),b(1),w()),n&2){let t=ee(2);V(),ht("um ",t.getSelectedCityName(),"")}}function Pie(n,e){n&1&&(v(0,"span",51),b(1,"um deinen Standort"),w())}function kie(n,e){if(n&1&&(v(0,"div",45)(1,"div",46),b(2," \u{1F3AF} Suche in 50km Umkreis "),be(3,xie,2,1,"span",47)(4,Pie,2,0,"span",48),w(),v(5,"div",49),b(6),w()()),n&2){let t=ee();V(3),K("ngIf",t.selectedCity),V(),K("ngIf",!t.selectedCity),V(2),Jl(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function Nie(n,e){if(n&1){let t=dt();v(0,"div",52)(1,"app-map",53),ye("shopSelected",function(i){ce(t);let o=ee();return le(o.viewAfroshopDetail(i))}),w()()}if(n&2){let t=ee();V(),K("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function Oie(n,e){if(n&1){let t=dt();v(0,"button",71),ye("click",function(i){ce(t);let o=ee().$implicit,s=ee(2);return le(s.editAfroshop(i,o.id))}),b(1," \u270F\uFE0F "),w()}}function Lie(n,e){if(n&1&&(v(0,"div",72),b(1),w()),n&2){let t=ee().$implicit,r=ee(2);V(),ht(" \u{1F3AF} ",r.getDistanceFromUser(t)," ")}}function Fie(n,e){if(n&1){let t=dt();v(0,"div",56)(1,"div",57),ye("click",function(){let i=ce(t).$implicit,o=ee(2);return le(o.viewAfroshopDetail(i.id))}),v(2,"img",58),ye("error",function(i){let o=ce(t).$implicit,s=ee(2);return le(s.onImageError(i,o.type))}),w(),v(3,"div",59),b(4),w(),be(5,Oie,2,0,"button",60),v(6,"div",61)(7,"span",62),b(8,"\u{1F4CD} Details ansehen"),w()()(),v(9,"div",63)(10,"h3",64),b(11),w(),v(12,"p",65),b(13),w(),v(14,"div",66)(15,"span",67),b(16),w(),v(17,"span",68),b(18),w(),v(19,"span",69),b(20),Gr(21,"titlecase"),w()(),be(22,Lie,2,1,"div",70),w()()}if(n&2){let t=e.$implicit,r=ee(2);V(2),K("src",t.image||r.getDefaultImage(t.type),bs)("alt",t.name),V(),my(t.type),V(),ht(" ",r.getTypeIcon(t.type)," "),V(),K("ngIf",r.canEditAfroshop(t)),V(6),tn(t.name),V(2),ht("\u{1F4CD} ",r.getLocationDisplay(t.address),""),V(3),ht("\u2B50 ",t.rating,""),V(2),tn(r.getPriceLevel(t.priceLevel)),V(2),tn(Wr(21,12,t.type)),V(2),K("ngIf",r.userLocation)}}function Vie(n,e){if(n&1&&(v(0,"div",54),be(1,Fie,23,14,"div",55),w()),n&2){let t=ee();V(),K("ngForOf",t.filteredAfroshops)}}function Uie(n,e){if(n&1){let t=dt();v(0,"div",73)(1,"div",74)(2,"div",75),b(3,"\u{1F50D}"),w(),v(4,"h3"),b(5,"Kein Gesch\xE4ft gefunden"),w(),v(6,"p"),b(7,"Kein Afroshop entspricht deinen Suchkriterien"),w(),v(8,"button",76),ye("click",function(){ce(t);let i=ee();return le(i.clearSearch())}),b(9," Alle Gesch\xE4fte anzeigen "),w()()()}}var sE=class n{constructor(e,t,r,i,o){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.router=i;this.geolocationService=o;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){this.userLocation=this.cityCoordinates.berlin,this.selectedCity="berlin",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\uFFFD Standard-Standort aktiviert

Berlin wurde als dein Standort gew\xE4hlt.

\u{1F3AF} Du kannst jederzeit:
\u2022 Eine andere Stadt suchen
\u2022 Aus der Liste w\xE4hlen
\u2022 "\u{1F4E1} Mein Standort" nochmal probieren`)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return S(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],o=parseFloat(i.lat),s=parseFloat(i.lon);if(!isNaN(o)&&!isNaN(s)){this.userLocation={lat:o,lng:s},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${o.toFixed(4)}, ${s.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return ae(z({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=ae(z({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[o,s]of Object.entries(r))if(t.includes(o))return s;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[o,s]of Object.entries(i))if(e.includes(o))return s;return null}static \u0275fac=function(t){return new(t||n)(ie(kd),ie(ua),ie(Mn),ie(wt),ie(oE))};static \u0275cmp=Rt({type:n,selectors:[["app-gallery"]],decls:74,vars:16,consts:[[1,"gallery-container"],[1,"gallery-header"],[1,"header-content"],[1,"header-text"],["class","header-actions",4,"ngIf"],[1,"filter-container","unified-control-group"],["for","type-filter",1,"unified-label"],[1,"unified-input-group"],["id","type-filter",1,"unified-select",3,"ngModelChange","change","ngModel"],["value",""],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],[1,"unified-spacer"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"city-search-controls","unified-control-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt, z.B. Aachen, Regensburg, Freiburg...",1,"unified-input",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn",3,"click","disabled"],[1,"quick-cities","unified-control-group"],[1,"unified-label"],[1,"unified-select",3,"ngModelChange","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn",3,"click","disabled"],[1,"location-actions"],["title","GPS aktivieren und Standort verwenden",1,"location-btn",3,"click"],[1,"location-hint"],["class","radius-info",4,"ngIf"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"header-actions"],["title","Neuen Afroshop hinzuf\xFCgen",1,"add-afroshop-btn","primary",3,"click"],["title","Anmelden um einen Afroshop hinzuzuf\xFCgen",1,"add-afroshop-btn","disabled",3,"click"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5),w()(),be(6,Rie,3,0,"div",4),Gr(7,"async"),be(8,Mie,3,0,"div",4),Gr(9,"async"),w(),v(10,"div",5)(11,"label",6),b(12,"Nach Typ filtern:"),w(),v(13,"div",7)(14,"select",8),Se("ngModelChange",function(o){return xe(r.selectedType,o)||(r.selectedType=o),o}),ye("change",function(){return r.onTypeFilterChange()}),v(15,"option",9),b(16,"Alle Typen"),w(),v(17,"option",10),b(18,"\u{1F37D}\uFE0F Restaurants"),w(),v(19,"option",11),b(20,"\u{1F6D2} Lebensmittelgesch\xE4fte"),w(),v(21,"option",12),b(22,"\u2702\uFE0F Friseure"),w(),v(23,"option",13),b(24,"\u{1F457} Mode"),w(),v(25,"option",14),b(26,"\u{1F3E6} Dienstleistungen"),w()(),Mt(27,"div",15),w()(),v(28,"div",16)(29,"label",17),b(30,"\u{1F4CD} Deine Stadt:"),w(),v(31,"div",18)(32,"div",7)(33,"input",19),Se("ngModelChange",function(o){return xe(r.customCityName,o)||(r.customCityName=o),o}),ye("keyup.enter",function(){return r.searchCity()}),w(),v(34,"button",20),ye("click",function(){return r.searchCity()}),b(35," \u{1F50D} Suchen "),w()()(),v(36,"div",21)(37,"label",22),b(38,"Oder w\xE4hlen:"),w(),v(39,"div",7)(40,"select",23),Se("ngModelChange",function(o){return xe(r.selectedCity,o)||(r.selectedCity=o),o}),v(41,"option",9),b(42,"Bitte Stadt w\xE4hlen"),w(),v(43,"option",24),b(44,"Berlin"),w(),v(45,"option",25),b(46,"Hamburg"),w(),v(47,"option",26),b(48,"M\xFCnchen"),w(),v(49,"option",27),b(50,"K\xF6ln"),w(),v(51,"option",28),b(52,"Frankfurt am Main"),w(),v(53,"option",29),b(54,"Stuttgart"),w(),v(55,"option",30),b(56,"D\xFCsseldorf"),w(),v(57,"option",31),b(58,"Dortmund"),w(),v(59,"option",32),b(60,"Essen"),w(),v(61,"option",33),b(62,"Leipzig"),w()(),v(63,"button",34),ye("click",function(){return r.onCityChange()}),b(64," \u2713 Best\xE4tigen "),w()()(),v(65,"div",35)(66,"button",36),ye("click",function(){return r.useCurrentLocation()}),b(67," \u{1F4E1} GPS aktivieren "),w(),v(68,"small",37),b(69," \u{1F3AF} Findet automatisch Afroshops in deiner N\xE4he "),w()()(),be(70,kie,7,4,"div",38),w()(),be(71,Nie,2,2,"div",39)(72,Vie,2,1,"div",40)(73,Uie,10,0,"div",41)),t&2&&(V(5),ht("\u{1F30D} Entdecke ",r.filteredAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he"),V(),K("ngIf",Wr(7,12,r.user$)),V(2),K("ngIf",!Wr(9,14,r.user$)),V(6),Ce("ngModel",r.selectedType),V(19),Ce("ngModel",r.customCityName),V(),K("disabled",!r.customCityName||!r.customCityName.trim()),V(6),Ce("ngModel",r.selectedCity),V(23),K("disabled",!r.selectedCity),V(7),K("ngIf",r.userLocation&&(r.selectedCity||r.filteredAfroshops.length<r.allAfroshops.length)),V(),K("ngIf",r.showMap&&r.filteredAfroshops.length>0),V(),K("ngIf",!r.showMap&&r.filteredAfroshops.length>0),V(),K("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[En,Xl,kn,kh,Ga,ca,eE,tE,Wi,Pd,aa,$o,iE],styles:[".gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:center}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:none;margin:0}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}"]})};function Bie(n,e){if(n&1){let t=dt();v(0,"button",24),ye("click",function(){ce(t);let i=ee(2);return le(i.editAfroshop())}),b(1," \u270F\uFE0F Bearbeiten "),w()}}function jie(n,e){if(n&1){let t=dt();v(0,"div")(1,"img",25),ye("error",function(i){ce(t);let o=ee(2);return le(o.onImageError(i))}),w()()}if(n&2){let t=ee(2);V(),K("src",t.afroshop.image,bs)("alt",t.afroshop.name)}}function zie(n,e){if(n&1&&(v(0,"div",26)(1,"div",27),b(2,"\u{1F4F7}"),w(),v(3,"p"),b(4,"Kein Bild verf\xFCgbar"),w(),v(5,"small"),b(6),w()()),n&2){let t=ee(2);V(6),tn(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function $ie(n,e){if(n&1&&(v(0,"div",28),b(1),w()),n&2){let t=ee(2);V(),ht(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function qie(n,e){if(n&1){let t=dt();v(0,"div",3)(1,"div",4)(2,"button",5),ye("click",function(){ce(t);let i=ee();return le(i.goBack())}),b(3," \u2190 Zur\xFCck zur \xDCbersicht "),w(),be(4,Bie,2,0,"button",6),w(),v(5,"div",7)(6,"div",8),be(7,jie,2,2,"div",9)(8,zie,7,1,"ng-template",null,0,kN),v(10,"div",10),b(11),Gr(12,"titlecase"),w()(),v(13,"div",11)(14,"h1"),b(15),w(),v(16,"div",12)(17,"div",13),b(18),w(),be(19,$ie,2,1,"div",14),w(),v(20,"div",15)(21,"div",16)(22,"strong"),b(23,"\u{1F4CD} Adresse:"),w(),v(24,"p"),b(25),w()(),v(26,"div",16)(27,"strong"),b(28,"\u{1F4DE} Telefon:"),w(),v(29,"p")(30,"a",17),b(31),w()()(),v(32,"div",16)(33,"strong"),b(34,"\u{1F552} \xD6ffnungszeiten:"),w(),v(35,"p"),b(36),w()()(),v(37,"div",18)(38,"h3"),b(39,"\xDCber uns"),w(),v(40,"p"),b(41),w()(),v(42,"div",19)(43,"button",20),ye("click",function(){ce(t);let i=ee();return le(i.callPhone(i.afroshop.phone))}),b(44," \u{1F4DE} Anrufen "),w(),v(45,"button",21),ye("click",function(){ce(t);let i=ee();return le(i.openInMaps())}),b(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),w(),v(47,"button",22),ye("click",function(){ce(t);let i=ee();return le(i.getDirections())}),b(48," \u{1F9ED} Route "),w(),v(49,"button",23),ye("click",function(){ce(t);let i=ee();return le(i.goBack())}),b(50," \u2190 Zur\xFCck "),w()()()()()}if(n&2){let t=Mh(9),r=ee();V(4),K("ngIf",r.canEdit()),V(3),K("ngIf",r.afroshop.image)("ngIfElse",t),V(3),my(r.afroshop.type),V(),Jl(" ",r.getTypeIcon(r.afroshop.type)," ",Wr(12,17,r.afroshop.type)," "),V(4),tn(r.afroshop.name),V(3),Jl(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),V(),K("ngIf",r.afroshop.cuisine),V(6),tn(r.afroshop.address),V(5),nb("href","tel:",r.afroshop.phone,"",bs),V(),ht(" ",r.afroshop.phone," "),V(5),tn(r.afroshop.hours),V(5),tn(r.afroshop.description)}}function Hie(n,e){if(n&1){let t=dt();v(0,"div",29)(1,"h2"),b(2,"\u274C Gesch\xE4ft nicht gefunden"),w(),v(3,"p"),b(4,"Das gesuchte Gesch\xE4ft existiert nicht."),w(),v(5,"button",5),ye("click",function(){ce(t);let i=ee();return le(i.goBack())}),b(6," \u2190 Zur\xFCck zur \xDCbersicht "),w()()}}var aE=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=o}afroshop;shopId="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop)):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getDirections(){if(this.afroshop){let e=`https://www.google.com/maps/dir/?api=1&destination=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(ie(In),ie(wt),ie(kd),ie(ua),ie(Mn))};static \u0275cmp=Rt({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"error-container"]],template:function(t,r){t&1&&be(0,qie,51,19,"div",1)(1,Hie,7,0,"div",2),t&2&&(K("ngIf",r.afroshop),V(),K("ngIf",!r.afroshop))},dependencies:[En,kn,Ga],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md)}.image-section[_ngcontent-%COMP%]{order:1}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.contact-item[_ngcontent-%COMP%]{text-align:left}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}"]})};function Gie(n,e){n&1&&(v(0,"span"),b(1,"\u{1F4E5} Importieren"),w())}function Wie(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 L\xE4dt..."),w())}function Kie(n,e){if(n&1&&(v(0,"div",68),b(1),w()),n&2){let t=ee();V(),ht(" \u2705 ",t.successMessage," ")}}function Qie(n,e){if(n&1&&(v(0,"div",69),b(1),w()),n&2){let t=ee();V(),ht(" \u274C ",t.errorMessage," ")}}function Yie(n,e){n&1&&(v(0,"span"),b(1,"\u{1F4C1} Bild ausw\xE4hlen"),w())}function Jie(n,e){n&1&&(v(0,"span"),b(1,"\u{1F504} Anderes Bild w\xE4hlen"),w())}function Zie(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Wird bearbeitet..."),w())}function Xie(n,e){n&1&&(v(0,"div",70)(1,"div",71),Mt(2,"div",72),w(),v(3,"small"),b(4,"Bild wird komprimiert und vorbereitet..."),w()())}function eoe(n,e){if(n&1){let t=dt();v(0,"div",73),Mt(1,"img",74),v(2,"button",75),ye("click",function(){ce(t);let i=ee(),o=Mh(48);return i.imagePreview=null,i.selectedFile=null,le(o.value="")}),b(3," \u2715 "),w()()}if(n&2){let t=ee();V(),K("src",t.imagePreview,bs)}}function toe(n,e){if(n&1){let t=dt();v(0,"div",5)(1,"label",76),b(2,"K\xFCche"),w(),v(3,"input",77),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.afroshop.cuisine,i)||(o.afroshop.cuisine=i),le(i)}),w(),v(4,"small",29),b(5,"Spezifizieren Sie die Art der afrikanischen K\xFCche"),w()()}if(n&2){let t=ee();V(3),Ce("ngModel",t.afroshop.cuisine)}}function noe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",79),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.monday.open,i)||(o.openingHours.monday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",88),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.monday.close,i)||(o.openingHours.monday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.monday.open),V(17),Ce("ngModel",t.openingHours.monday.close)}}function roe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",97),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.tuesday.open,i)||(o.openingHours.tuesday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",98),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.tuesday.close,i)||(o.openingHours.tuesday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.tuesday.open),V(17),Ce("ngModel",t.openingHours.tuesday.close)}}function ioe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",99),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.wednesday.open,i)||(o.openingHours.wednesday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",100),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.wednesday.close,i)||(o.openingHours.wednesday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.wednesday.open),V(17),Ce("ngModel",t.openingHours.wednesday.close)}}function ooe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",101),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.thursday.open,i)||(o.openingHours.thursday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",102),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.thursday.close,i)||(o.openingHours.thursday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.thursday.open),V(17),Ce("ngModel",t.openingHours.thursday.close)}}function soe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",103),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.friday.open,i)||(o.openingHours.friday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",104),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.friday.close,i)||(o.openingHours.friday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.friday.open),V(17),Ce("ngModel",t.openingHours.friday.close)}}function aoe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",105),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.saturday.open,i)||(o.openingHours.saturday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",106),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.saturday.close,i)||(o.openingHours.saturday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.saturday.open),V(17),Ce("ngModel",t.openingHours.saturday.close)}}function coe(n,e){if(n&1){let t=dt();v(0,"div",78)(1,"select",107),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.sunday.open,i)||(o.openingHours.sunday.open=i),le(i)}),v(2,"option",80),b(3,"06:00"),w(),v(4,"option",81),b(5,"07:00"),w(),v(6,"option",82),b(7,"08:00"),w(),v(8,"option",83),b(9,"09:00"),w(),v(10,"option",84),b(11,"10:00"),w(),v(12,"option",85),b(13,"11:00"),w(),v(14,"option",86),b(15,"12:00"),w()(),v(16,"span",87),b(17,"bis"),w(),v(18,"select",108),Se("ngModelChange",function(i){ce(t);let o=ee();return xe(o.openingHours.sunday.close,i)||(o.openingHours.sunday.close=i),le(i)}),v(19,"option",89),b(20,"16:00"),w(),v(21,"option",90),b(22,"17:00"),w(),v(23,"option",91),b(24,"18:00"),w(),v(25,"option",92),b(26,"19:00"),w(),v(27,"option",93),b(28,"20:00"),w(),v(29,"option",94),b(30,"21:00"),w(),v(31,"option",95),b(32,"22:00"),w(),v(33,"option",96),b(34,"23:00"),w()()()}if(n&2){let t=ee();V(),Ce("ngModel",t.openingHours.sunday.open),V(17),Ce("ngModel",t.openingHours.sunday.close)}}function loe(n,e){n&1&&(v(0,"span"),b(1,"\u274C Abbrechen"),w())}function uoe(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Warten..."),w())}function doe(n,e){if(n&1&&(v(0,"span"),b(1),w()),n&2){let t=ee();V(),tn(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function hoe(n,e){n&1&&(v(0,"span"),b(1,"\u{1F4E4} Bild wird hochgeladen..."),w())}function foe(n,e){if(n&1&&(v(0,"span"),b(1),w()),n&2){let t=ee();V(),tn(t.isEditMode?"\u{1F4BE} \xC4nderungen speichern":"\u{1F3EA} Afroshop hinzuf\xFCgen")}}var Vp=class n{constructor(e,t,r,i){this.firebaseService=e;this.authService=t;this.router=r;this.route=i}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:0,hours:"",website:""};openingHours={monday:{isOpen:!1,open:"09:00",close:"18:00"},tuesday:{isOpen:!1,open:"09:00",close:"18:00"},wednesday:{isOpen:!1,open:"09:00",close:"18:00"},thursday:{isOpen:!1,open:"09:00",close:"18:00"},friday:{isOpen:!1,open:"09:00",close:"18:00"},saturday:{isOpen:!1,open:"10:00",close:"16:00"},sunday:{isOpen:!1,open:"12:00",close:"16:00"}};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;successMessage="";errorMessage="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return S(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null,this.parseOpeningHoursFromString(t.hours||"")):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return S(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=o=>{this.imagePreview=o.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return S(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(s=>{e.toBlob(a=>s(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let o=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",o),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=o=>{let s=new Image;s.src=o.target.result,s.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=1200,h=1200,g=s.width,T=s.height;g>T?g>d&&(T*=d/g,g=d):T>h&&(g*=h/T,T=h),a.width=g,a.height=T,c?.drawImage(s,0,0,g,T),a.toBlob(C=>{if(C){let k=new File([C],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},s.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return S(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return S(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage()),(!this.afroshop.priceLevel||this.afroshop.priceLevel===0)&&(this.afroshop.priceLevel=2),this.afroshop.website=this.afroshop.website?.trim()||"",this.afroshop.cuisine=this.afroshop.cuisine?.trim()||"",this.afroshop.hours=this.convertOpeningHoursToString();let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=ae(z({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=ae(z({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?this.afroshop.address.trim()?this.afroshop.phone.trim()?this.afroshop.description.trim()?this.afroshop.website&&this.afroshop.website.trim()&&!/^https?:\/\/.+/.test(this.afroshop.website)?(this.errorMessage="Website URL muss mit http:// oder https:// beginnen",!1):(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Beschreibung ist erforderlich",!1):(this.errorMessage="Telefonnummer ist erforderlich",!1):(this.errorMessage="Adresse ist erforderlich",!1):(this.errorMessage="Name ist erforderlich",!1)}setCoordinatesFromAddress(){if(this.afroshop.coordinates.lat===0&&this.afroshop.coordinates.lng===0){let e={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}},t=this.afroshop.address.toLowerCase();for(let[r,i]of Object.entries(e))if(t.includes(r)){this.afroshop.coordinates=i,console.log(`Coordonn\xE9es d\xE9finies automatiquement pour ${r}:`,i);break}}}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return S(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return S(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return S(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|münchen|köln|frankfurt|dortmund|essen|düsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return S(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(o=>o&&o!=="www.facebook.com"&&o!=="facebook.com"&&o!=="p"&&!o.match(/^\d+$/)&&o.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return S(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}convertOpeningHoursToString(){let e=[{key:"monday",name:"Mo"},{key:"tuesday",name:"Di"},{key:"wednesday",name:"Mi"},{key:"thursday",name:"Do"},{key:"friday",name:"Fr"},{key:"saturday",name:"Sa"},{key:"sunday",name:"So"}],t=[];return e.forEach(r=>{let i=this.openingHours[r.key];i.isOpen&&t.push(`${r.name}: ${i.open}-${i.close}`)}),t.length>0?t.join(", "):"\xD6ffnungszeiten nicht angegeben"}parseOpeningHoursFromString(e){if(!e||e==="\xD6ffnungszeiten nicht angegeben")return;this.openingHours.monday.isOpen=!1,this.openingHours.tuesday.isOpen=!1,this.openingHours.wednesday.isOpen=!1,this.openingHours.thursday.isOpen=!1,this.openingHours.friday.isOpen=!1,this.openingHours.saturday.isOpen=!1,this.openingHours.sunday.isOpen=!1,e.split(",").forEach(r=>{let o=r.trim().match(/^(\w+):\s*(\d{2}:\d{2})-(\d{2}:\d{2})$/);if(o){let[,s,a,c]=o;switch(s.toLowerCase()){case"mo":this.openingHours.monday={isOpen:!0,open:a,close:c};break;case"di":this.openingHours.tuesday={isOpen:!0,open:a,close:c};break;case"mi":this.openingHours.wednesday={isOpen:!0,open:a,close:c};break;case"do":this.openingHours.thursday={isOpen:!0,open:a,close:c};break;case"fr":this.openingHours.friday={isOpen:!0,open:a,close:c};break;case"sa":this.openingHours.saturday={isOpen:!0,open:a,close:c};break;case"so":this.openingHours.sunday={isOpen:!0,open:a,close:c};break}}})}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(ie(ua),ie(Mn),ie(wt),ie(In))};static \u0275cmp=Rt({type:n,selectors:[["app-add-afroshop"]],decls:162,vars:43,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"opening-hours-container"],[1,"day-hours"],[1,"day-label"],[1,"hours-controls"],["type","checkbox","id","mon-open","name","mon-open",3,"ngModelChange","ngModel"],["for","mon-open",1,"checkbox-label"],["class","time-selectors",4,"ngIf"],["type","checkbox","id","tue-open","name","tue-open",3,"ngModelChange","ngModel"],["for","tue-open",1,"checkbox-label"],["type","checkbox","id","wed-open","name","wed-open",3,"ngModelChange","ngModel"],["for","wed-open",1,"checkbox-label"],["type","checkbox","id","thu-open","name","thu-open",3,"ngModelChange","ngModel"],["for","thu-open",1,"checkbox-label"],["type","checkbox","id","fri-open","name","fri-open",3,"ngModelChange","ngModel"],["for","fri-open",1,"checkbox-label"],["type","checkbox","id","sat-open","name","sat-open",3,"ngModelChange","ngModel"],["for","sat-open",1,"checkbox-label"],["type","checkbox","id","sun-open","name","sun-open",3,"ngModelChange","ngModel"],["for","sun-open",1,"checkbox-label"],["for","website"],["type","url","id","website","name","website","placeholder","https://www.beispiel.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"message","success"],[1,"message","error"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische, Nigerianische, Senegalesische",1,"form-input",3,"ngModelChange","ngModel"],[1,"time-selectors"],["name","mon-open-time",1,"time-select",3,"ngModelChange","ngModel"],["value","06:00"],["value","07:00"],["value","08:00"],["value","09:00"],["value","10:00"],["value","11:00"],["value","12:00"],[1,"time-separator"],["name","mon-close-time",1,"time-select",3,"ngModelChange","ngModel"],["value","16:00"],["value","17:00"],["value","18:00"],["value","19:00"],["value","20:00"],["value","21:00"],["value","22:00"],["value","23:00"],["name","tue-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-close-time",1,"time-select",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=dt();v(0,"div",1)(1,"div",2)(2,"h2"),b(3),w(),v(4,"p"),b(5),w()(),v(6,"form",3),ye("ngSubmit",function(){return ce(i),le(r.onSubmit())}),v(7,"div",4)(8,"h3"),b(9,"\u{1F517} Schnell hinzuf\xFCgen"),w(),v(10,"p"),b(11,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),w(),v(12,"div",5)(13,"label",6),b(14,"Google Maps, Facebook, Nextdoor oder Website URL"),w(),v(15,"div",7)(16,"input",8),Se("ngModelChange",function(s){return ce(i),xe(r.importUrl,s)||(r.importUrl=s),le(s)}),w(),v(17,"button",9),ye("click",function(){return ce(i),le(r.importFromUrl())}),be(18,Gie,2,0,"span",10)(19,Wie,2,0,"span",10),w()()(),v(20,"div",11)(21,"span"),b(22,"oder manuell eingeben"),w()()(),be(23,Kie,2,1,"div",12)(24,Qie,2,1,"div",13),v(25,"div",5)(26,"label",14),b(27,"Name des Gesch\xE4fts *"),w(),v(28,"input",15),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.name,s)||(r.afroshop.name=s),le(s)}),w()(),v(29,"div",5)(30,"label",16),b(31,"Typ *"),w(),v(32,"select",17),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.type,s)||(r.afroshop.type=s),le(s)}),v(33,"option",18),b(34,"\u{1F37D}\uFE0F Restaurant"),w(),v(35,"option",19),b(36,"\u{1F6D2} Lebensmittelgesch\xE4ft"),w(),v(37,"option",20),b(38,"\u2702\uFE0F Friseur"),w(),v(39,"option",21),b(40,"\u{1F457} Mode"),w(),v(41,"option",22),b(42,"\u{1F3E6} Dienstleistungen"),w()()(),v(43,"div",5)(44,"label",23),b(45,"\u{1F4F8} Bild hochladen"),w(),v(46,"div",24)(47,"input",25,0),ye("change",function(s){return ce(i),le(r.onFileSelected(s))}),w(),v(49,"button",26),ye("click",function(){ce(i);let s=Mh(48);return le(s.click())}),be(50,Yie,2,0,"span",10)(51,Jie,2,0,"span",10)(52,Zie,2,0,"span",10),w(),be(53,Xie,5,0,"div",27)(54,eoe,4,1,"div",28),v(55,"small",29),b(56,"Max. 5MB - Wird automatisch komprimiert und optimiert"),w()()(),v(57,"div",5)(58,"label",30),b(59,"Adresse *"),w(),v(60,"input",31),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.address,s)||(r.afroshop.address=s),le(s)}),w(),v(61,"small"),b(62,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),w()(),v(63,"div",5)(64,"label",32),b(65,"Telefon *"),w(),v(66,"input",33),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.phone,s)||(r.afroshop.phone=s),le(s)}),w()(),v(67,"div",5)(68,"label",34),b(69,"Beschreibung *"),w(),v(70,"textarea",35),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.description,s)||(r.afroshop.description=s),le(s)}),w()(),be(71,toe,6,1,"div",36),v(72,"div",5)(73,"label"),b(74,"\xD6ffnungszeiten"),w(),v(75,"div",37)(76,"div",38)(77,"div",39),b(78,"Montag:"),w(),v(79,"div",40)(80,"input",41),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.monday.isOpen,s)||(r.openingHours.monday.isOpen=s),le(s)}),w(),v(81,"label",42),b(82,"Ge\xF6ffnet"),w(),be(83,noe,35,2,"div",43),w()(),v(84,"div",38)(85,"div",39),b(86,"Dienstag:"),w(),v(87,"div",40)(88,"input",44),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.tuesday.isOpen,s)||(r.openingHours.tuesday.isOpen=s),le(s)}),w(),v(89,"label",45),b(90,"Ge\xF6ffnet"),w(),be(91,roe,35,2,"div",43),w()(),v(92,"div",38)(93,"div",39),b(94,"Mittwoch:"),w(),v(95,"div",40)(96,"input",46),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.wednesday.isOpen,s)||(r.openingHours.wednesday.isOpen=s),le(s)}),w(),v(97,"label",47),b(98,"Ge\xF6ffnet"),w(),be(99,ioe,35,2,"div",43),w()(),v(100,"div",38)(101,"div",39),b(102,"Donnerstag:"),w(),v(103,"div",40)(104,"input",48),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.thursday.isOpen,s)||(r.openingHours.thursday.isOpen=s),le(s)}),w(),v(105,"label",49),b(106,"Ge\xF6ffnet"),w(),be(107,ooe,35,2,"div",43),w()(),v(108,"div",38)(109,"div",39),b(110,"Freitag:"),w(),v(111,"div",40)(112,"input",50),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.friday.isOpen,s)||(r.openingHours.friday.isOpen=s),le(s)}),w(),v(113,"label",51),b(114,"Ge\xF6ffnet"),w(),be(115,soe,35,2,"div",43),w()(),v(116,"div",38)(117,"div",39),b(118,"Samstag:"),w(),v(119,"div",40)(120,"input",52),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.saturday.isOpen,s)||(r.openingHours.saturday.isOpen=s),le(s)}),w(),v(121,"label",53),b(122,"Ge\xF6ffnet"),w(),be(123,aoe,35,2,"div",43),w()(),v(124,"div",38)(125,"div",39),b(126,"Sonntag:"),w(),v(127,"div",40)(128,"input",54),Se("ngModelChange",function(s){return ce(i),xe(r.openingHours.sunday.isOpen,s)||(r.openingHours.sunday.isOpen=s),le(s)}),w(),v(129,"label",55),b(130,"Ge\xF6ffnet"),w(),be(131,coe,35,2,"div",43),w()(),v(132,"small",29),b(133,"W\xE4hlen Sie f\xFCr jeden Tag, ob das Gesch\xE4ft ge\xF6ffnet ist und die \xD6ffnungszeiten"),w()()(),v(134,"div",5)(135,"label",56),b(136,"Website"),w(),v(137,"input",57),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.website,s)||(r.afroshop.website=s),le(s)}),w(),v(138,"small",29),b(139,"Optional: Offizielle Website oder Social Media Profil"),w()(),v(140,"div",5)(141,"label",58),b(142,"Preisstufe"),w(),v(143,"select",59),Se("ngModelChange",function(s){return ce(i),xe(r.afroshop.priceLevel,s)||(r.afroshop.priceLevel=s),le(s)}),v(144,"option",60),b(145,"-- Bitte w\xE4hlen --"),w(),v(146,"option",61),b(147,"\u20AC - G\xFCnstig (unter 10\u20AC)"),w(),v(148,"option",62),b(149,"\u20AC\u20AC - Moderat (10-20\u20AC)"),w(),v(150,"option",63),b(151,"\u20AC\u20AC\u20AC - Gehoben (20-40\u20AC)"),w(),v(152,"option",64),b(153,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig (\xFCber 40\u20AC)"),w()()(),v(154,"div",65)(155,"button",66),ye("click",function(){return ce(i),le(r.goBack())}),be(156,loe,2,0,"span",10)(157,uoe,2,0,"span",10),w(),v(158,"button",67),be(159,doe,2,1,"span",10)(160,hoe,2,0,"span",10)(161,foe,2,1,"span",10),w()()()()}t&2&&(V(3),tn(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),V(2),tn(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),V(11),Ce("ngModel",r.importUrl),V(),K("disabled",!r.importUrl||r.isImporting),V(),K("ngIf",!r.isImporting),V(),K("ngIf",r.isImporting),V(4),K("ngIf",r.successMessage),V(),K("ngIf",r.errorMessage),V(4),Ce("ngModel",r.afroshop.name),V(4),Ce("ngModel",r.afroshop.type),V(17),K("disabled",r.isUploadingImage),V(),K("ngIf",!r.imagePreview&&!r.isUploadingImage),V(),K("ngIf",r.imagePreview&&!r.isUploadingImage),V(),K("ngIf",r.isUploadingImage),V(),K("ngIf",r.isUploadingImage),V(),K("ngIf",r.imagePreview),V(6),Ce("ngModel",r.afroshop.address),V(6),Ce("ngModel",r.afroshop.phone),V(4),Ce("ngModel",r.afroshop.description),V(),K("ngIf",r.afroshop.type==="restaurant"),V(9),Ce("ngModel",r.openingHours.monday.isOpen),V(3),K("ngIf",r.openingHours.monday.isOpen),V(5),Ce("ngModel",r.openingHours.tuesday.isOpen),V(3),K("ngIf",r.openingHours.tuesday.isOpen),V(5),Ce("ngModel",r.openingHours.wednesday.isOpen),V(3),K("ngIf",r.openingHours.wednesday.isOpen),V(5),Ce("ngModel",r.openingHours.thursday.isOpen),V(3),K("ngIf",r.openingHours.thursday.isOpen),V(5),Ce("ngModel",r.openingHours.friday.isOpen),V(3),K("ngIf",r.openingHours.friday.isOpen),V(5),Ce("ngModel",r.openingHours.saturday.isOpen),V(3),K("ngIf",r.openingHours.saturday.isOpen),V(5),Ce("ngModel",r.openingHours.sunday.isOpen),V(3),K("ngIf",r.openingHours.sunday.isOpen),V(6),Ce("ngModel",r.afroshop.website),V(6),Ce("ngModel",r.afroshop.priceLevel),V(12),K("disabled",r.isSubmitting||r.isUploadingImage),V(),K("ngIf",!r.isSubmitting&&!r.isUploadingImage),V(),K("ngIf",r.isSubmitting||r.isUploadingImage),V(),K("disabled",r.isSubmitting||r.isUploadingImage),V(),K("ngIf",r.isSubmitting&&!r.isUploadingImage),V(),K("ngIf",r.isUploadingImage),V(),K("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[En,kn,ca,xd,eE,tE,Wi,SM,Pd,aa,Md,Uc,$o,Vc],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding:20px 0}.btn[_ngcontent-%COMP%]{padding:16px 32px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;display:inline-flex;align-items:center;justify-content:center;text-align:center;min-width:160px;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;transform:translateY(0)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722,#e64a19);color:#fff;box-shadow:0 6px 20px #ff7b0066;border:2px solid transparent}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8f00,#ff6f00,#f57c00);transform:translateY(-3px);box-shadow:0 12px 30px #ff7b0080}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #ff7b0099}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#bdbdbd,#9e9e9e);color:#fff;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a;opacity:.7;animation:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled){animation:_ngcontent-%COMP%_gentle-pulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gentle-pulse{0%,to{box-shadow:0 6px 20px #ff7b0066}50%{box-shadow:0 6px 25px #ff7b0099}}.btn-primary[_ngcontent-%COMP%]:hover{animation:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;box-shadow:0 4px 15px #0000001a;border:2px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#adb5bd}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 10px #0003}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.url-input[_ngcontent-%COMP%]{width:100%}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:20px 0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;font-size:16px;padding:18px 24px;min-width:auto}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg)}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.image-preview-container[_ngcontent-%COMP%]{max-width:100%}.image-preview[_ngcontent-%COMP%]{max-height:200px}}.opening-hours-container[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;margin-top:10px}.day-hours[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.day-hours[_ngcontent-%COMP%]:last-child{margin-bottom:0}.day-label[_ngcontent-%COMP%]{width:100px;font-weight:600;color:#495057;flex-shrink:0}.hours-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex:1}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;cursor:pointer;margin:0;padding:0}.time-selectors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:10px}.time-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;background:#fff;color:#495057;font-size:14px;cursor:pointer;transition:all .2s}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff7b00;box-shadow:0 0 0 3px #ff7b001a}.time-separator[_ngcontent-%COMP%]{color:#6c757d;font-weight:500;margin:0 5px}@media (max-width: 768px){.day-hours[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.day-label[_ngcontent-%COMP%]{width:auto;margin-bottom:5px}.hours-controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.time-selectors[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}}@media (max-width: 480px){.opening-hours-container[_ngcontent-%COMP%]{padding:15px}.time-selectors[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.time-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function poe(n,e){if(n&1&&(v(0,"div",16),b(1),w()),n&2){let t=ee();V(),ht(" ",t.errorMessage," ")}}function goe(n,e){n&1&&(v(0,"span"),b(1,"Anmelden"),w())}function moe(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Anmeldung..."),w())}function yoe(n,e){n&1&&(v(0,"span"),b(1,"\u{1F50D} Mit Google fortfahren"),w())}function _oe(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Google-Anmeldung..."),w())}var cE=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle();let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(ie(Mn),ie(wt),ie(In))};static \u0275cmp=Rt({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"\u{1F510} Anmeldung"),w(),v(5,"p"),b(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),w()(),v(7,"form",3),ye("ngSubmit",function(){return r.onSubmit()}),v(8,"div",4)(9,"label",5),b(10,"E-Mail-Adresse"),w(),v(11,"input",6),Se("ngModelChange",function(o){return xe(r.email,o)||(r.email=o),o}),w()(),v(12,"div",4)(13,"label",7),b(14,"Passwort"),w(),v(15,"input",8),Se("ngModelChange",function(o){return xe(r.password,o)||(r.password=o),o}),w()(),be(16,poe,2,1,"div",9),v(17,"button",10),be(18,goe,2,0,"span",11)(19,moe,2,0,"span",11),w()(),v(20,"div",12)(21,"span"),b(22,"oder"),w()(),v(23,"button",13),ye("click",function(){return r.loginWithGoogle()}),be(24,yoe,2,0,"span",11)(25,_oe,2,0,"span",11),w(),v(26,"div",14)(27,"p"),b(28,"Noch kein Konto? "),v(29,"a",15),b(30,"Registrieren"),w()()()()()),t&2&&(V(11),Ce("ngModel",r.email),K("disabled",r.isLoading),V(4),Ce("ngModel",r.password),K("disabled",r.isLoading),V(),K("ngIf",r.errorMessage),V(),K("disabled",r.isLoading||!r.email||!r.password),V(),K("ngIf",!r.isLoading),V(),K("ngIf",r.isLoading),V(4),K("disabled",r.isLoading),V(),K("ngIf",!r.isLoading),V(),K("ngIf",r.isLoading))},dependencies:[En,kn,ca,xd,Wi,aa,Md,Uc,$o,Vc,ec,Os],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function voe(n,e){if(n&1&&(v(0,"div",20),b(1),w()),n&2){let t=ee();V(),ht(" ",t.errorMessage," ")}}function woe(n,e){n&1&&(v(0,"span"),b(1,"Registrieren"),w())}function Eoe(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Registrierung..."),w())}function Ioe(n,e){n&1&&(v(0,"span"),b(1,"\u{1F50D} Mit Google fortfahren"),w())}function boe(n,e){n&1&&(v(0,"span"),b(1,"\u23F3 Google-Anmeldung..."),w())}var lE=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(ie(Mn),ie(wt))};static \u0275cmp=Rt({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"\u{1F4DD} Registrierung"),w(),v(5,"p"),b(6,"Erstellen Sie Ihr AfroConnect-Konto"),w()(),v(7,"form",3),ye("ngSubmit",function(){return r.onSubmit()}),v(8,"div",4)(9,"label",5),b(10,"Anzeigename"),w(),v(11,"input",6),Se("ngModelChange",function(o){return xe(r.displayName,o)||(r.displayName=o),o}),w()(),v(12,"div",4)(13,"label",7),b(14,"E-Mail-Adresse"),w(),v(15,"input",8),Se("ngModelChange",function(o){return xe(r.email,o)||(r.email=o),o}),w()(),v(16,"div",4)(17,"label",9),b(18,"Passwort"),w(),v(19,"input",10),Se("ngModelChange",function(o){return xe(r.password,o)||(r.password=o),o}),w()(),v(20,"div",4)(21,"label",11),b(22,"Passwort best\xE4tigen"),w(),v(23,"input",12),Se("ngModelChange",function(o){return xe(r.confirmPassword,o)||(r.confirmPassword=o),o}),w()(),be(24,voe,2,1,"div",13),v(25,"button",14),be(26,woe,2,0,"span",15)(27,Eoe,2,0,"span",15),w()(),v(28,"div",16)(29,"span"),b(30,"oder"),w()(),v(31,"button",17),ye("click",function(){return r.loginWithGoogle()}),be(32,Ioe,2,0,"span",15)(33,boe,2,0,"span",15),w(),v(34,"div",18)(35,"p"),b(36,"Bereits ein Konto? "),v(37,"a",19),b(38,"Anmelden"),w()()()()()),t&2&&(V(11),Ce("ngModel",r.displayName),K("disabled",r.isLoading),V(4),Ce("ngModel",r.email),K("disabled",r.isLoading),V(4),Ce("ngModel",r.password),K("disabled",r.isLoading),V(4),Ce("ngModel",r.confirmPassword),K("disabled",r.isLoading),V(),K("ngIf",r.errorMessage),V(),K("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),V(),K("ngIf",!r.isLoading),V(),K("ngIf",r.isLoading),V(4),K("disabled",r.isLoading),V(),K("ngIf",!r.isLoading),V(),K("ngIf",r.isLoading))},dependencies:[En,kn,ca,xd,Wi,aa,Md,Uc,$o,Vc,ec,Os],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var uE=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-privacy"]],decls:108,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),b(3,"Datenschutzerkl\xE4rung"),w(),v(4,"p",2),b(5),w(),v(6,"section")(7,"h2"),b(8,"1. Verantwortlicher"),w(),v(9,"p"),b(10," AfroConnect"),Mt(11,"br"),b(12," [Ihre Adresse]"),Mt(13,"br"),b(14," [Ihre Stadt, PLZ]"),Mt(15,"br"),b(16," Deutschland"),Mt(17,"br"),b(18," E-Mail: contact@afroconnect.de "),w()(),v(19,"section")(20,"h2"),b(21,"2. Erhobene Daten"),w(),v(22,"h3"),b(23,"2.1 Nutzungsdaten"),w(),v(24,"ul")(25,"li"),b(26,"IP-Adresse"),w(),v(27,"li"),b(28,"Browser-Informationen"),w(),v(29,"li"),b(30,"Zugriffszeitpunkt"),w(),v(31,"li"),b(32,"Besuchte Seiten"),w()(),v(33,"h3"),b(34,"2.2 Standortdaten"),w(),v(35,"p"),b(36," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),w(),v(37,"h3"),b(38,"2.3 Registrierungsdaten"),w(),v(39,"ul")(40,"li"),b(41,"E-Mail-Adresse"),w(),v(42,"li"),b(43,"Benutzername"),w(),v(44,"li"),b(45,"Passwort (verschl\xFCsselt)"),w()()(),v(46,"section")(47,"h2"),b(48,"3. Zweck der Datenverarbeitung"),w(),v(49,"ul")(50,"li"),b(51,"Bereitstellung der App-Funktionen"),w(),v(52,"li"),b(53,"Benutzerauthentifizierung"),w(),v(54,"li"),b(55,"Anzeige lokaler Afroshops"),w(),v(56,"li"),b(57,"Verbesserung der Nutzererfahrung"),w()()(),v(58,"section")(59,"h2"),b(60,"4. Rechtsgrundlage"),w(),v(61,"p"),b(62," Die Verarbeitung erfolgt auf Grundlage von: "),w(),v(63,"ul")(64,"li"),b(65,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),w(),v(66,"li"),b(67,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),w(),v(68,"li"),b(69,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),w()()(),v(70,"section")(71,"h2"),b(72,"5. Datenweitergabe"),w(),v(73,"p"),b(74," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),w(),v(75,"ul")(76,"li"),b(77,"Google Firebase (Hosting und Datenbank)"),w(),v(78,"li"),b(79,"Bei gesetzlicher Verpflichtung"),w()()(),v(80,"section")(81,"h2"),b(82,"6. Speicherdauer"),w(),v(83,"p"),b(84," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),w()(),v(85,"section")(86,"h2"),b(87,"7. Ihre Rechte"),w(),v(88,"ul")(89,"li"),b(90,"Auskunft \xFCber gespeicherte Daten"),w(),v(91,"li"),b(92,"Berichtigung falscher Daten"),w(),v(93,"li"),b(94,"L\xF6schung Ihrer Daten"),w(),v(95,"li"),b(96,"Einschr\xE4nkung der Verarbeitung"),w(),v(97,"li"),b(98,"Daten\xFCbertragbarkeit"),w(),v(99,"li"),b(100,"Widerspruch gegen Verarbeitung"),w()()(),v(101,"section")(102,"h2"),b(103,"8. Kontakt"),w(),v(104,"p"),b(105," Bei Fragen zum Datenschutz kontaktieren Sie uns unter:"),Mt(106,"br"),b(107," E-Mail: privacy@afroconnect.de "),w()()()()),t&2&&(V(5),ht("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var dE=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-terms"]],decls:94,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),b(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),w(),v(4,"p",2),b(5),w(),v(6,"section")(7,"h2"),b(8,"\xA7 1 Geltungsbereich"),w(),v(9,"p"),b(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),w()(),v(11,"section")(12,"h2"),b(13,"\xA7 2 Beschreibung der Dienstleistung"),w(),v(14,"p"),b(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),w(),v(16,"h3"),b(17,"2.1 Funktionen"),w(),v(18,"ul")(19,"li"),b(20,"Suche nach Afroshops in der N\xE4he"),w(),v(21,"li"),b(22,"Detailinformationen zu Gesch\xE4ften"),w(),v(23,"li"),b(24,"Bewertungen und Kommentare"),w(),v(25,"li"),b(26,"Kartenansicht und Navigation"),w()()(),v(27,"section")(28,"h2"),b(29,"\xA7 3 Nutzerkonto"),w(),v(30,"h3"),b(31,"3.1 Registrierung"),w(),v(32,"p"),b(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),w(),v(34,"h3"),b(35,"3.2 Passwort und Sicherheit"),w(),v(36,"p"),b(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),w()(),v(38,"section")(39,"h2"),b(40,"\xA7 4 Nutzungsregeln"),w(),v(41,"p"),b(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),w(),v(43,"ul")(44,"li"),b(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),w(),v(46,"li"),b(47,"Keine beleidigenden oder diskriminierenden Inhalte"),w(),v(48,"li"),b(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),w(),v(50,"li"),b(51,"Die Rechte Dritter zu respektieren"),w()()(),v(52,"section")(53,"h2"),b(54,"\xA7 5 Inhalte und Urheberrecht"),w(),v(55,"h3"),b(56,"5.1 Nutzergenerierte Inhalte"),w(),v(57,"p"),b(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),w(),v(59,"h3"),b(60,"5.2 Verantwortung"),w(),v(61,"p"),b(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),w()(),v(63,"section")(64,"h2"),b(65,"\xA7 6 Haftung"),w(),v(66,"p"),b(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),w()(),v(68,"section")(69,"h2"),b(70,"\xA7 7 \xC4nderungen der AGB"),w(),v(71,"p"),b(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),w()(),v(73,"section")(74,"h2"),b(75,"\xA7 8 K\xFCndigung"),w(),v(76,"p"),b(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),w()(),v(78,"section")(79,"h2"),b(80,"\xA7 9 Anwendbares Recht"),w(),v(81,"p"),b(82," Es gilt deutsches Recht. Gerichtsstand ist [Ihre Stadt], Deutschland. "),w()(),v(83,"section")(84,"h2"),b(85,"\xA7 10 Kontakt"),w(),v(86,"p"),b(87," AfroConnect"),Mt(88,"br"),b(89," [Ihre Adresse]"),Mt(90,"br"),b(91," Deutschland"),Mt(92,"br"),b(93," E-Mail: legal@afroconnect.de "),w()()()()),t&2&&(V(5),ht("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var Up=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(vn(1),Ie(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(de(Mn),de(wt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xz=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:sE},{path:"afroshop/:id",component:aE},{path:"add-afroshop",component:Vp,canActivate:[Up]},{path:"edit-afroshop/:id",component:Vp,canActivate:[Up]},{path:"login",component:cE},{path:"register",component:lE},{path:"privacy",component:uE},{path:"terms",component:dE},{path:"**",redirectTo:"/gallery"}];var e4={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"}};var t4={providers:[FN({eventCoalescing:!0}),Jb(Xz),dO(uO()),WL(()=>KL(e4.firebase)),Uj(()=>qj()),xV(()=>NV()),_z(()=>wz())]};function Toe(n,e){if(n&1){let t=dt();v(0,"div",18)(1,"span",19),b(2),w(),v(3,"button",20),ye("click",function(){ce(t);let i=ee();return le(i.logout())}),b(4," \u{1F6AA} Abmelden "),w()()}if(n&2){let t=e.ngIf;V(2),ht("Hallo, ",t.displayName||t.email,"!")}}function Coe(n,e){n&1&&(v(0,"div",21)(1,"a",22),b(2,"\u{1F510} Anmelden"),w(),v(3,"a",23),b(4,"\u{1F4DD} Registrieren"),w()())}var hE=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return S(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(ie(Mn),ie(wt))};static \u0275cmp=Rt({type:n,selectors:[["app-root"]],decls:32,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["href","mailto:contact@afroconnect.de",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1"),b(6,"\u{1F30D} AfroConnect"),w()(),v(7,"p",5),b(8,"Verbinde dich mit der afrikanischen Community in Deutschland"),w()(),v(9,"div",6),be(10,Toe,5,1,"div",7),Gr(11,"async"),be(12,Coe,5,0,"div",8),Gr(13,"async"),w()()(),v(14,"main",9),Mt(15,"router-outlet"),w(),v(16,"footer",10)(17,"div",11)(18,"div",12)(19,"p"),b(20,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),w()(),v(21,"div",13)(22,"a",14),b(23,"Datenschutz"),w(),v(24,"span",15),b(25,"|"),w(),v(26,"a",16),b(27,"AGB"),w(),v(28,"span",15),b(29,"|"),w(),v(30,"a",17),b(31,"Kontakt"),w()()()()()),t&2&&(V(10),K("ngIf",Wr(11,2,r.user$)),V(2),K("ngIf",!Wr(13,4,r.user$)))},dependencies:[En,kn,kh,tf,ec,Os],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};wb(hE,t4).catch(n=>console.error(n));
