<div class="detail-container" *ngIf="afroshop">
  <div class="detail-header">
    <button class="back-button" (click)="goBack()">
      ← Zurück zur Übersicht
    </button>
    
    <!-- Bearbeiten-Button (nur für Ersteller sichtbar) -->
    <button *ngIf="canEdit()" class="edit-button" (click)="editAfroshop()" title="Bearbeiten">
      ✏️ Bearbeiten
    </button>
  </div>

  <div class="detail-content">
    <div class="image-section">
      <div *ngIf="afroshop.image; else noImage">
        <img 
          [src]="afroshop.image" 
          [alt]="afroshop.name"
          class="detail-image"
          (error)="onImageError($event)"
        />
      </div>
      <ng-template #noImage>
        <div class="no-image-placeholder" style="background: #f5f5f5; padding: 2rem; text-align: center; border-radius: 8px;">
          <div style="font-size: 3rem;">📷</div>
          <p>Kein Bild verfügbar</p>
          <small>{{ afroshop.image ? 'Fehler beim Laden: ' + afroshop.image : 'Keine Bild-URL gespeichert' }}</small>
        </div>
      </ng-template>
      
      <!-- Typ-Badge -->
      <div class="type-badge-large" [class]="afroshop.type">
        {{ getTypeIcon(afroshop.type) }} {{ afroshop.type | titlecase }}
      </div>
    </div>
    
    <div class="info-section">
      <h1>{{ afroshop.name }}</h1>
      
      <!-- Schnellinfos -->
      <div class="quick-info">
        <div class="rating-info">
          ⭐ {{ afroshop.rating }}/5 • {{ getPriceLevel(afroshop.priceLevel) }}
        </div>
        <div class="cuisine-info" *ngIf="afroshop.cuisine">
          🍽️ {{ afroshop.cuisine }} Küche
        </div>
      </div>

      <!-- Kontakt und Standort -->
      <div class="contact-section">
        <div class="contact-item">
          <strong>📍 Adresse:</strong>
          <p>{{ afroshop.address }}</p>
        </div>
        
        <div class="contact-item">
          <strong>📞 Telefon:</strong>
          <p>
            <a href="tel:{{ afroshop.phone }}" class="phone-link">
              {{ afroshop.phone }}
            </a>
          </p>
        </div>
        
        <div class="contact-item">
          <strong>🕒 Öffnungszeiten:</strong>
          <div class="opening-hours-display">
            <div *ngFor="let dayInfo of formattedHours" class="day-row" 
                 [class.closed]="!dayInfo.isOpen" 
                 [class.open]="dayInfo.isOpen">
              <span class="day-name">{{ dayInfo.day }}:</span>
              <span class="day-hours" [class.closed-text]="!dayInfo.isOpen">
                {{ dayInfo.hours }}
              </span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Beschreibung -->
      <div class="description">
        <h3>Über uns</h3>
        <p>{{ afroshop.description }}</p>
      </div>
      
      <!-- Aktionen -->
      <div class="actions">
        <button class="action-btn call" (click)="callPhone(afroshop.phone)">
          📞 Anrufen
        </button>
        <button class="action-btn maps" (click)="openInMaps()">
          🗺️ Auf Karte anzeigen
        </button>
        <button class="action-btn route" (click)="getDirections()">
          🧭 Route
        </button>
        <button class="action-btn secondary" (click)="goBack()">
          ← Zurück
        </button>
      </div>
    </div>
  </div>
</div>

<div class="error-container" *ngIf="!afroshop">
  <h2>❌ Geschäft nicht gefunden</h2>
  <p>Das gesuchte Geschäft existiert nicht.</p>
  <button class="back-button" (click)="goBack()">
    ← Zurück zur Übersicht
  </button>
</div>
