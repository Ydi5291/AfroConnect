<div class="detail-container" *ngIf="afroshop">
  <div class="detail-header flex-header">
    <button class="back-button" (click)="goBack()">
      â† {{ texts.backToOverview }}
    </button>
    <button *ngIf="canEdit()" class="add-product-btn" (click)="editProducts()" [title]="texts.edit">
      {{ texts.edit }}
    </button>
  </div>

  <div class="detail-content">
    <div class="image-section">
      <div *ngIf="afroshop.image; else noImage">
        <img [src]="afroshop.image" [alt]="afroshop.name" class="detail-image" (error)="onImageError($event)" />
      </div>
      <ng-template #noImage>
        <div class="no-image-placeholder"
          style="background: #f5f5f5; padding: 2rem; text-align: center; border-radius: 8px;">
          <div style="font-size: 3rem;">ğŸ“·</div>
          <p>{{ texts.noImage }}</p>
          <small>{{ afroshop.image ? 'Fehler beim Laden: ' + afroshop.image : 'Keine Bild-URL gespeichert' }}</small>
        </div>
      </ng-template>

      <!-- Typ-Badge -->
      <div class="type-badge-large" [class]="afroshop.type">
        {{ getTypeIcon(afroshop.type) }} {{ afroshop.type | titlecase }}
      </div>
    </div>

    <div class="info-section">
      <h1>{{ afroshop.name }}</h1>

      <!-- Schnellinfos -->
      <div class="quick-info">
        <div class="rating-info">
          â­ {{ afroshop.rating || 'â€”' }}/5 â€¢ {{ getPriceLevel(afroshop.priceLevel || 1) }}
        </div>
        <div class="cuisine-info" *ngIf="afroshop.cuisine">
          ğŸ½ï¸ {{ afroshop.cuisine || 'â€”' }} {{ texts.cuisine }}
        </div>
      </div>

      <!-- Kontakt und Standort -->
      <div class="contact-section">
        <div class="contact-item">
          <strong>ğŸ“ {{ texts.address }}</strong>
          <p>{{ afroshop.address }}</p>
        </div>

        <div class="contact-item">
          <strong>ğŸ“ {{ texts.phone }}</strong>
          <p *ngIf="afroshop.phone; else noPhone">
            <a href="tel:{{ afroshop.phone }}" class="phone-link">
              {{ afroshop.phone }}
            </a>
          </p>
          <ng-template #noPhone>
            <span style="color:#888">{{ texts.notProvided }}</span>
          </ng-template>
        </div>

        <div class="contact-item">
          <strong>ğŸ•’ {{ texts.openingHours }}</strong>
          <div class="opening-hours-display">
            <div *ngFor="let dayInfo of formattedHours" class="day-row" [class.closed]="!dayInfo.isOpen"
              [class.open]="dayInfo.isOpen">
              <span class="day-name">{{ dayInfo.day }}:</span>
              <span class="day-hours" [class.closed-text]="!dayInfo.isOpen">
                {{ dayInfo.hours }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Beschreibung -->
      <div class="description">
        <h3>{{ texts.aboutUs }}</h3>
        <p>{{ afroshop.description }}</p>
      </div>

      <!-- Aktionen -->
      <div class="actions">
        <button class="action-btn call" (click)="callPhone(afroshop.phone)">ğŸ“ {{ texts.call }}</button>
        <!-- <button class="action-btn maps" (click)="openInMaps()">ğŸ—ºï¸ Auf Karte anzeigen</button> -->
        <!-- <button class="action-btn route" (click)="getDirections()">ğŸ§­ Route</button> -->
        <button class="action-btn cart" (click)="goToShop()" title="Zum Shop">ğŸ›’ {{ texts.shop }}</button>
        <button class="action-btn impressum" (click)="showImpressum = true">ğŸ“ {{ texts.impressumTitle }}</button>
        <button class="action-btn secondary" (click)="goBack()">â† {{ texts.back }}</button>

<!-- Modale Impressum -->
<div class="impressum-modal" *ngIf="showImpressum">
  <div class="impressum-modal-content">
    <button class="close-btn" (click)="showImpressum = false">âœ–</button>
    <h3>ğŸ“‹ {{ texts.impressumTitle }}</h3>
    
    <!-- Wrapper scrollable pour tout le contenu -->
    <div class="impressum-modal-scroll-wrapper">
      <!-- Clause de non-responsabilitÃ© AfroConnect -->
      <div class="afroconnect-disclaimer">
        <p><strong>âš ï¸ {{ texts.impressumNotice }}</strong></p>
        <p>{{ texts.impressumDisclaimer }} <strong>{{ afroshop.impressumName || '[Betreiber]' }}</strong>{{ texts.impressumNotSeller }}</p>
      </div>
      
      <hr>
      
      <div class="impressum-info-container">
        <div *ngIf="afroshop.impressumName">
          <strong>ğŸ‘¤ {{ texts.impressumName }}</strong> 
          <span>{{ afroshop.impressumName }}</span>
        </div>
        <div *ngIf="afroshop.impressumAddress">
          <strong>ğŸ“ {{ texts.impressumAddress }}</strong> 
          <span>{{ afroshop.impressumAddress }}</span>
        </div>
        <div *ngIf="afroshop.impressumEmail">
          <strong>ğŸ“§ {{ texts.impressumEmail }}</strong> 
          <span><a href="mailto:{{afroshop.impressumEmail}}">{{ afroshop.impressumEmail }}</a></span>
        </div>
        <div *ngIf="afroshop.impressumPhone">
          <strong>ğŸ“ {{ texts.impressumPhone }}</strong> 
          <span><a href="tel:{{afroshop.impressumPhone}}">{{ afroshop.impressumPhone }}</a></span>
        </div>
        <div *ngIf="afroshop.impressumText">
          <strong>ğŸ“ {{ texts.impressumAdditional }}</strong>
          <span style="display: block; margin-top: 0.5rem; white-space: pre-line;">{{ afroshop.impressumText }}</span>
        </div>
      </div>
      
      <small class="form-hint">ğŸ’¡ {{ texts.impressumHint }}</small>
    </div>
  </div>
  <div class="impressum-modal-backdrop" (click)="showImpressum = false"></div>
</div>
      </div>
    </div>
  </div>

</div>



<div class="error-container" *ngIf="!afroshop">
  <h2>âŒ {{ texts.impressumNotFound }}</h2>
  <p>{{ texts.impressumNotFoundMsg }}</p>
  <button class="back-button" (click)="goBack()">
    â† {{ texts.backToOverview }}
  </button>
</div>