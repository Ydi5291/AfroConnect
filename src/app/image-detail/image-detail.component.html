<div class="detail-container" *ngIf="afroshop">
  <div class="detail-header flex-header">
    <button class="back-button" (click)="goBack()">
      â† ZurÃ¼ck zur Ãœbersicht
    </button>
    <button *ngIf="canEdit()" class="add-product-btn" (click)="editProducts()" title="Produkte hinzufÃ¼gen">
      bearbeiten
    </button>
  </div>

  <div class="detail-content">
    <div class="image-section">
      <div *ngIf="afroshop.image; else noImage">
        <img [src]="afroshop.image" [alt]="afroshop.name" class="detail-image" (error)="onImageError($event)" />
      </div>
      <ng-template #noImage>
        <div class="no-image-placeholder"
          style="background: #f5f5f5; padding: 2rem; text-align: center; border-radius: 8px;">
          <div style="font-size: 3rem;">ğŸ“·</div>
          <p>Kein Bild verfÃ¼gbar</p>
          <small>{{ afroshop.image ? 'Fehler beim Laden: ' + afroshop.image : 'Keine Bild-URL gespeichert' }}</small>
        </div>
      </ng-template>

      <!-- Typ-Badge -->
      <div class="type-badge-large" [class]="afroshop.type">
        {{ getTypeIcon(afroshop.type) }} {{ afroshop.type | titlecase }}
      </div>
    </div>

    <div class="info-section">
      <h1>{{ afroshop.name }}</h1>

      <!-- Schnellinfos -->
      <div class="quick-info">
        <div class="rating-info">
          â­ {{ afroshop.rating || 'â€”' }}/5 â€¢ {{ getPriceLevel(afroshop.priceLevel || 1) }}
        </div>
        <div class="cuisine-info" *ngIf="afroshop.cuisine">
          ğŸ½ï¸ {{ afroshop.cuisine || 'â€”' }} KÃ¼che
        </div>
      </div>

      <!-- Kontakt und Standort -->
      <div class="contact-section">
        <div class="contact-item">
          <strong>ğŸ“ Adresse:</strong>
          <p>{{ afroshop.address }}</p>
        </div>

        <div class="contact-item">
          <strong>ğŸ“ Telefon:</strong>
          <p *ngIf="afroshop.phone; else noPhone">
            <a href="tel:{{ afroshop.phone }}" class="phone-link">
              {{ afroshop.phone }}
            </a>
          </p>
          <ng-template #noPhone>
            <span style="color:#888">Non renseignÃ©</span>
          </ng-template>
        </div>

        <div class="contact-item">
          <strong>ğŸ•’ Ã–ffnungszeiten:</strong>
          <div class="opening-hours-display">
            <div *ngFor="let dayInfo of formattedHours" class="day-row" [class.closed]="!dayInfo.isOpen"
              [class.open]="dayInfo.isOpen">
              <span class="day-name">{{ dayInfo.day }}:</span>
              <span class="day-hours" [class.closed-text]="!dayInfo.isOpen">
                {{ dayInfo.hours }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Beschreibung -->
      <div class="description">
        <h3>Ãœber uns</h3>
        <p>{{ afroshop.description }}</p>
      </div>

      <!-- Aktionen -->
      <div class="actions">
        <button class="action-btn call" (click)="callPhone(afroshop.phone)">ğŸ“ Anrufen</button>
        <!-- <button class="action-btn maps" (click)="openInMaps()">ğŸ—ºï¸ Auf Karte anzeigen</button> -->
        <!-- <button class="action-btn route" (click)="getDirections()">ğŸ§­ Route</button> -->
        <button class="action-btn cart" (click)="goToShop()" title="Zum Shop">ğŸ›’ Einkaufen</button>
        <button class="action-btn impressum" (click)="showImpressum = true">ğŸ“ Impressum</button>
        <button class="action-btn secondary" (click)="goBack()">â† ZurÃ¼ck</button>

<!-- Modale Impressum -->
<div class="impressum-modal" *ngIf="showImpressum">
  <div class="impressum-modal-content">
    <button class="close-btn" (click)="showImpressum = false">âœ–</button>
    <h3>ğŸ“‹ Impressum</h3>
    
    <!-- Clause de non-responsabilitÃ© AfroConnect -->
    <div class="afroconnect-disclaimer">
      <p><strong>âš ï¸ Hinweis</strong></p>
      <p>Dieses GeschÃ¤ft wird von <strong>{{ afroshop.impressumName || '[Betreiber]' }}</strong> betrieben. 
      AfroConnect ist nicht VerkÃ¤ufer.</p>
    </div>
    
    <hr>
    
    <div class="impressum-info-container">
      <div *ngIf="afroshop.impressumName">
        <strong>ğŸ‘¤ Name/Firma:</strong> 
        <span>{{ afroshop.impressumName }}</span>
      </div>
      <div *ngIf="afroshop.impressumAddress">
        <strong>ğŸ“ Adresse:</strong> 
        <span>{{ afroshop.impressumAddress }}</span>
      </div>
      <div *ngIf="afroshop.impressumEmail">
        <strong>ğŸ“§ E-Mail:</strong> 
        <span><a href="mailto:{{afroshop.impressumEmail}}">{{ afroshop.impressumEmail }}</a></span>
      </div>
      <div *ngIf="afroshop.impressumPhone">
        <strong>ğŸ“ Telefon:</strong> 
        <span><a href="tel:{{afroshop.impressumPhone}}">{{ afroshop.impressumPhone }}</a></span>
      </div>
      <div *ngIf="afroshop.impressumText">
        <strong>ğŸ“ Weitere Angaben:</strong>
        <span style="display: block; margin-top: 0.5rem; white-space: pre-line;">{{ afroshop.impressumText }}</span>
      </div>
    </div>
    
    <small class="form-hint">ğŸ’¡ Dieses Impressum wurde vom Shop-Betreiber hinterlegt. Angaben ohne GewÃ¤hr.</small>
  </div>
  <div class="impressum-modal-backdrop" (click)="showImpressum = false"></div>
</div>
      </div>
    </div>
  </div>

</div>



<div class="error-container" *ngIf="!afroshop">
  <h2>âŒ GeschÃ¤ft nicht gefunden</h2>
  <p>Das gesuchte GeschÃ¤ft existiert nicht.</p>
  <button class="back-button" (click)="goBack()">
    â† ZurÃ¼ck zur Ãœbersicht
  </button>
</div>