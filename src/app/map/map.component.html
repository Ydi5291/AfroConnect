<div class="map-container">
  <div class="map-header">
    <h3>ğŸ—ºï¸ Karte der Afroshops</h3>
    <p *ngIf="userLocation" class="location-info">
      ğŸ“ Deine Position wird angezeigt
    </p>
    <p *ngIf="!userLocation" class="no-location-info">
      âš ï¸ Standort nicht verfÃ¼gbar - Zentrum Berlin angezeigt
    </p>
  </div>

  <!-- Google Maps Komponente -->
  <google-map
    [options]="mapOptions"
    [width]="'100%'"
    [height]="'400px'"
    class="google-map">
    
    <!-- Marqueurs fÃ¼r alle Afroshops -->
    <map-marker
      *ngFor="let marker of markers"
      [position]="marker.position"
      [title]="marker.title"
      [options]="getMarkerOptions(marker)"
      (mapClick)="onMarkerClick(marker)">
      
      <!-- Info Window fÃ¼r Details -->
      <map-info-window>
        <div class="info-window" *ngIf="marker.shop">
          <h4>{{ marker.shop.name }}</h4>
          <p><strong>{{ marker.shop.type | titlecase }}</strong></p>
          <p>ğŸ“ {{ marker.shop.address.split(',')[0] }}</p>
          <p>â­ {{ marker.shop.rating }}/5</p>
          <button 
            class="directions-btn" 
            (click)="getDirections(marker.shop)">
            ğŸš— Route berechnen
          </button>
        </div>
        <div class="info-window" *ngIf="marker.isUserLocation">
          <h4>ğŸ“ Deine Position</h4>
          <p>Du bist hier</p>
        </div>
      </map-info-window>
    </map-marker>
  </google-map>

  <!-- Legende der Afroshop-Typen -->
  <div class="map-legend">
    <h4>Legende</h4>
    <div class="legend-items">
      <div class="legend-item">
        <span class="legend-icon restaurant">ğŸ½ï¸</span>
        <span>Restaurants</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon epicerie">ğŸ›’</span>
        <span>Lebensmittel</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon coiffeur">âœ‚ï¸</span>
        <span>Friseure</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon vetement">ğŸ‘—</span>
        <span>Mode</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon services">ğŸ¦</span>
        <span>Services</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon user">ğŸ“</span>
        <span>Deine Position</span>
      </div>
    </div>
  </div>
</div>
