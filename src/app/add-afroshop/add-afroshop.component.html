<div class="add-afroshop-container">
  <div class="form-header">
    <h2>{{ isEditMode ? 'âœï¸ Afroshop bearbeiten' : 'ğŸª Neuen Afroshop hinzufÃ¼gen' }}</h2>
    <p>{{ isEditMode ? 'Aktualisieren Sie die Informationen' : 'Teilen Sie Ihren Lieblings-Afroshop mit der Community!' }}</p>
  </div>

  <form (ngSubmit)="onSubmit()" class="afroshop-form">
    
    <!-- Import automatique depuis URL -->
    <div class="auto-import-section">
      <h3>ğŸ”— Schnell hinzufÃ¼gen</h3>
      <p>FÃ¼gen Sie einen Link ein, um Informationen automatisch zu laden</p>
      
      <div class="form-group">
        <label for="importUrl">Google Maps, Facebook, Nextdoor oder Website URL</label>
        <div class="url-input-group">
          <input 
            type="url" 
            id="importUrl"
            [(ngModel)]="importUrl"
            name="importUrl"
            placeholder="https://www.facebook.com/business... oder https://www.google.com/maps/place/..."
            class="form-input url-input">
          <button 
            type="button"
            (click)="importFromUrl()"
            [disabled]="!importUrl || isImporting"
            class="import-btn">
            <span *ngIf="!isImporting">ğŸ“¥ Importieren</span>
            <span *ngIf="isImporting">â³ LÃ¤dt...</span>
          </button>
        </div>
      </div>
      
      <div class="divider">
        <span>oder manuell eingeben</span>
      </div>
    </div>
    
    <!-- Messages -->
    <div class="message success" *ngIf="successMessage">
      âœ… {{ successMessage }}
    </div>
    <div class="message error" *ngIf="errorMessage">
      âŒ {{ errorMessage }}
    </div>

    <!-- GeschÃ¤ftsname -->
    <div class="form-group">
      <label for="name">Name des GeschÃ¤fts *</label>
      <input 
        type="text" 
        id="name"
        [(ngModel)]="afroshop.name"
        name="name"
        placeholder="z.B. Mama Afrika Restaurant"
        required
        class="form-input">
    </div>

    <!-- Type -->
    <div class="form-group">
      <label for="type">Typ *</label>
      <select 
        id="type"
        [(ngModel)]="afroshop.type"
        name="type"
        required
        class="form-select">
        <option value="restaurant">ğŸ½ï¸ Restaurant</option>
        <option value="epicerie">ğŸ›’ LebensmittelgeschÃ¤ft</option>
        <option value="coiffeur">âœ‚ï¸ Friseur</option>
        <option value="vetement">ğŸ‘— Mode</option>
        <option value="services">ğŸ¦ Dienstleistungen</option>
      </select>
    </div>

    <!-- Upload d'image -->
    <div class="form-group">
      <label for="image">ğŸ“¸ Bild hochladen</label>
      <div class="image-upload-section">
        <input 
          type="file" 
          id="image"
          (change)="onFileSelected($event)"
          accept="image/*"
          class="file-input"
          #fileInput>
        
        <button 
          type="button" 
          (click)="fileInput.click()" 
          class="upload-btn"
          [disabled]="isUploadingImage">
          <span *ngIf="!imagePreview && !isUploadingImage">ğŸ“ Bild auswÃ¤hlen</span>
          <span *ngIf="imagePreview && !isUploadingImage">ğŸ”„ Anderes Bild wÃ¤hlen</span>
          <span *ngIf="isUploadingImage">â³ Wird bearbeitet...</span>
        </button>
        
        <!-- Indicateur de progression -->
        <div *ngIf="isUploadingImage" class="upload-progress">
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
          <small>Bild wird komprimiert und vorbereitet...</small>
        </div>
        
        <!-- Bildvorschau -->
        <div *ngIf="imagePreview" class="image-preview-container">
          <img [src]="imagePreview" alt="Preview" class="image-preview">
          <button 
            type="button" 
            (click)="imagePreview = null; selectedFile = null; fileInput.value = ''" 
            class="remove-image-btn"
            title="Bild entfernen">
            âœ•
          </button>
        </div>
        
        <small class="form-hint">Max. 5MB - Wird automatisch komprimiert und optimiert</small>
      </div>
    </div>

    <!-- Adresse -->
    <div class="form-group">
      <label for="address">Adresse *</label>
      <input 
        type="text" 
        id="address"
        [(ngModel)]="afroshop.address"
        name="address"
        placeholder="z.B. MÃ¼llerstraÃŸe 123, 13349 Berlin"
        required
        class="form-input">
      <small>Bitte geben Sie die vollstÃ¤ndige Adresse mit Stadt an</small>
    </div>

    <!-- Telefon -->
    <div class="form-group">
      <label for="phone">Telefon *</label>
      <input 
        type="tel" 
        id="phone"
        [(ngModel)]="afroshop.phone"
        name="phone"
        placeholder="+49 30 12345678"
        required
        class="form-input">
    </div>

    <!-- Beschreibung -->
    <div class="form-group">
      <label for="description">Beschreibung *</label>
      <textarea 
        id="description"
        [(ngModel)]="afroshop.description"
        name="description"
        placeholder="Beschreiben Sie das GeschÃ¤ft, SpezialitÃ¤ten, AtmosphÃ¤re..."
        required
        rows="4"
        class="form-textarea"></textarea>
    </div>

    <!-- Cuisine (nur fÃ¼r Restaurants) -->
    <div class="form-group" *ngIf="afroshop.type === 'restaurant'">
      <label for="cuisine">KÃ¼che</label>
      <input 
        type="text" 
        id="cuisine"
        [(ngModel)]="afroshop.cuisine"
        name="cuisine"
        placeholder="z.B. Westafrikanische, Ã„thiopische, Nigerianische, Senegalesische"
        class="form-input">
      <small class="form-hint">Spezifizieren Sie die Art der afrikanischen KÃ¼che</small>
    </div>

    <!-- Ã–ffnungszeiten -->
    <div class="form-group">
      <label for="hours">Ã–ffnungszeiten</label>
      <input 
        type="text" 
        id="hours"
        [(ngModel)]="afroshop.hours"
        name="hours"
        placeholder="z.B. Mo-Fr: 09:00-18:00, Sa: 10:00-16:00, So: geschlossen"
        class="form-input">
      <small class="form-hint">Geben Sie die vollstÃ¤ndigen Ã–ffnungszeiten an</small>
    </div>

    <!-- Website -->
    <div class="form-group">
      <label for="website">Website</label>
      <input 
        type="url" 
        id="website"
        [(ngModel)]="afroshop.website"
        name="website"
        placeholder="https://www.beispiel.com"
        class="form-input">
      <small class="form-hint">Optional: Offizielle Website oder Social Media Profil</small>
    </div>

    <!-- Preisstufe -->
    <div class="form-group">
      <label for="priceLevel">Preisstufe</label>
      <select 
        id="priceLevel"
        [(ngModel)]="afroshop.priceLevel"
        name="priceLevel"
        class="form-select">
        <option value="">-- Bitte wÃ¤hlen --</option>
        <option value="1">â‚¬ - GÃ¼nstig (unter 10â‚¬)</option>
        <option value="2">â‚¬â‚¬ - Moderat (10-20â‚¬)</option>
        <option value="3">â‚¬â‚¬â‚¬ - Gehoben (20-40â‚¬)</option>
        <option value="4">â‚¬â‚¬â‚¬â‚¬ - Hochpreisig (Ã¼ber 40â‚¬)</option>
      </select>
    </div>

    <!-- Buttons -->
    <div class="form-actions">
      <button 
        type="button" 
        (click)="goBack()"
        class="btn-secondary"
        [disabled]="isSubmitting || isUploadingImage">
        Abbrechen
      </button>
      <button 
        type="submit" 
        [disabled]="isSubmitting || isUploadingImage"
        class="btn-primary">
        <span *ngIf="isSubmitting && !isUploadingImage">{{ isEditMode ? 'â³ Wird aktualisiert...' : 'â³ Wird hinzugefÃ¼gt...' }}</span>
        <span *ngIf="isUploadingImage">ğŸ“¤ Bild wird hochgeladen...</span>
        <span *ngIf="!isSubmitting && !isUploadingImage">{{ isEditMode ? 'âœ… Speichern' : 'âœ… Afroshop hinzufÃ¼gen' }}</span>
      </button>
    </div>
  </form>
</div>
