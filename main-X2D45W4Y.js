var J6=Object.defineProperty,Z6=Object.defineProperties;var X6=Object.getOwnPropertyDescriptors;var Gg=Object.getOwnPropertySymbols,ej=Object.getPrototypeOf,qM=Object.prototype.hasOwnProperty,GM=Object.prototype.propertyIsEnumerable,tj=Reflect.get;var HM=(n,e,t)=>e in n?J6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})qM.call(e,t)&&HM(n,t,e[t]);if(Gg)for(var t of Gg(e))GM.call(e,t)&&HM(n,t,e[t]);return n},he=(n,e)=>Z6(n,X6(e));var Vh=(n,e)=>{var t={};for(var r in n)qM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Gg)for(var r of Gg(n))e.indexOf(r)<0&&GM.call(n,r)&&(t[r]=n[r]);return t};var Mi=(n,e,t)=>tj(ej(n),t,e);var S=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function cE(n,e){return Object.is(n,e)}var on=null,Wg=!1,lE=1,Ar=Symbol("SIGNAL");function Ge(n){let e=on;return on=n,e}function uE(){return on}var Bh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jh(n){if(Wg)throw new Error("");if(on===null)return;on.consumerOnSignalRead(n);let e=on.nextProducerIndex++;if(Jg(on),e<on.producerNode.length&&on.producerNode[e]!==n&&Uh(on)){let t=on.producerNode[e];Yg(t,on.producerIndexOfThis[e])}on.producerNode[e]!==n&&(on.producerNode[e]=n,on.producerIndexOfThis[e]=Uh(on)?KM(n,on,e):0),on.producerLastReadVersion[e]=n.version}function WM(){lE++}function dE(n){if(!(Uh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lE)){if(!n.producerMustRecompute(n)&&!gE(n)){aE(n);return}n.producerRecomputeValue(n),aE(n)}}function hE(n){if(n.liveConsumerNode===void 0)return;let e=Wg;Wg=!0;try{for(let t of n.liveConsumerNode)t.dirty||nj(t)}finally{Wg=e}}function fE(){return on?.consumerAllowSignalWrites!==!1}function nj(n){n.dirty=!0,hE(n),n.consumerMarkedDirty?.(n)}function aE(n){n.dirty=!1,n.lastCleanEpoch=lE}function Qg(n){return n&&(n.nextProducerIndex=0),Ge(n)}function pE(n,e){if(Ge(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Yg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gE(n){Jg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dE(t),r!==t.version))return!0}return!1}function mE(n){if(Jg(n),Uh(n))for(let e=0;e<n.producerNode.length;e++)Yg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function KM(n,e,t){if(QM(n),n.liveConsumerNode.length===0&&YM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=KM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Yg(n,e){if(QM(n),n.liveConsumerNode.length===1&&YM(n))for(let r=0;r<n.producerNode.length;r++)Yg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Jg(i),i.producerIndexOfThis[r]=e}}function Uh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Jg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function QM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function YM(n){return n.producerNode!==void 0}function yE(n,e){let t=Object.create(rj);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(dE(t),jh(t),t.value===Kg)throw t.error;return t.value};return r[Ar]=t,r}var oE=Symbol("UNSET"),sE=Symbol("COMPUTING"),Kg=Symbol("ERRORED"),rj=he($({},Bh),{value:oE,dirty:!0,error:null,equal:cE,kind:"computed",producerMustRecompute(n){return n.value===oE||n.value===sE},producerRecomputeValue(n){if(n.value===sE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=sE;let t=Qg(n),r,i=!1;try{r=n.computation(),Ge(null),i=e!==oE&&e!==Kg&&r!==Kg&&n.equal(e,r)}catch(o){r=Kg,n.error=o}finally{pE(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ij(){throw new Error}var JM=ij;function ZM(n){JM(n)}function _E(n){JM=n}var oj=null;function vE(n,e){let t=Object.create(Zg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(jh(t),t.value);return r[Ar]=t,r}function zh(n,e){fE()||ZM(n),n.equal(n.value,e)||(n.value=e,sj(n))}function wE(n,e){fE()||ZM(n),zh(n,e(n.value))}var Zg=he($({},Bh),{equal:cE,value:void 0,kind:"signal"});function sj(n){n.version++,WM(),hE(n),oj?.()}function EE(n){let e=Ge(null);try{return n()}finally{Ge(e)}}var IE;function $h(){return IE}function Co(n){let e=IE;return IE=n,e}var Xg=Symbol("NotFound");function Pe(n){return typeof n=="function"}function Hl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var em=Hl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ec(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Pe(r))try{r()}catch(o){e=o instanceof em?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{XM(o)}catch(s){e=e??[],s instanceof em?e=[...e,...s.errors]:e.push(s)}}if(e)throw new em(e)}}add(e){var t;if(e&&e!==this)if(this.closed)XM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ec(t,e)}remove(e){let{_finalizers:t}=this;t&&ec(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var bE=Mt.EMPTY;function tm(n){return n instanceof Mt||n&&"closed"in n&&Pe(n.remove)&&Pe(n.add)&&Pe(n.unsubscribe)}function XM(n){Pe(n)?n():n.unsubscribe()}var Jr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ql={setTimeout(n,e,...t){let{delegate:r}=ql;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ql;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function nm(n){ql.setTimeout(()=>{let{onUnhandledError:e}=Jr;if(e)e(n);else throw n})}function Hh(){}var eP=CE("C",void 0,void 0);function tP(n){return CE("E",void 0,n)}function nP(n){return CE("N",n,void 0)}function CE(n,e,t){return{kind:n,value:e,error:t}}var tc=null;function Gl(n){if(Jr.useDeprecatedSynchronousErrorHandling){let e=!tc;if(e&&(tc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=tc;if(tc=null,t)throw r}}else n()}function rP(n){Jr.useDeprecatedSynchronousErrorHandling&&tc&&(tc.errorThrown=!0,tc.error=n)}var nc=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,tm(e)&&e.add(this)):this.destination=hj}static create(e,t,r){return new Wl(e,t,r)}next(e){this.isStopped?SE(nP(e),this):this._next(e)}error(e){this.isStopped?SE(tP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?SE(eP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uj=Function.prototype.bind;function TE(n,e){return uj.call(n,e)}var AE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rm(r)}else rm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rm(t)}}},Wl=class extends nc{constructor(e,t,r){super();let i;if(Pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Jr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&TE(e.next,o),error:e.error&&TE(e.error,o),complete:e.complete&&TE(e.complete,o)}):i=e}this.destination=new AE(i)}};function rm(n){Jr.useDeprecatedSynchronousErrorHandling?rP(n):nm(n)}function dj(n){throw n}function SE(n,e){let{onStoppedNotification:t}=Jr;t&&ql.setTimeout(()=>t(n,e))}var hj={closed:!0,next:Hh,error:dj,complete:Hh};var Kl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dr(n){return n}function im(...n){return DE(n)}function DE(n){return n.length===0?dr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ee=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=pj(t)?t:new Wl(t,r,i);return Gl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iP(r),new r((i,o)=>{let s=new Wl({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Kl](){return this}pipe(...t){return DE(t)(this)}toPromise(t){return t=iP(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function iP(n){var e;return(e=n??Jr.Promise)!==null&&e!==void 0?e:Promise}function fj(n){return n&&Pe(n.next)&&Pe(n.error)&&Pe(n.complete)}function pj(n){return n&&n instanceof nc||fj(n)&&tm(n)}function xE(n){return Pe(n?.lift)}function Ye(n){return e=>{if(xE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function We(n,e,t,r,i){return new ME(n,e,t,r,i)}var ME=class extends nc{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ql(){return Ye((n,e)=>{let t=null;n._refCount++;let r=We(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Yl=class extends Ee{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(We(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return Ql()(this)}};var oP=Hl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kt=(()=>{class n extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new om(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oP}next(t){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bE:(this.currentObservers=null,o.push(t),new Mt(()=>{this.currentObservers=null,ec(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ee;return t.source=this,t}}return n.create=(e,t)=>new om(e,t),n})(),om=class extends kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:bE}};var Ft=class extends kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var PE={now(){return(PE.delegate||Date).now()},delegate:void 0};var sm=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var qh={setInterval(n,e,...t){let{delegate:r}=qh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=qh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Jl=class extends sm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return qh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&qh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ec(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zl.now=PE.now;var Xl=class extends Zl{constructor(e,t=Zl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var RE=new Xl(Jl);var am=class extends Jl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var cm=class extends Xl{};var kE=new cm(am);var Wn=new Ee(n=>n.complete());function sP(n){return n&&Pe(n.schedule)}function aP(n){return n[n.length-1]}function lm(n){return Pe(aP(n))?n.pop():void 0}function Fs(n){return sP(aP(n))?n.pop():void 0}function um(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lP(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(_){s(_)}}function c(h){try{u(r.throw(h))}catch(_){s(_)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function cP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rc(n){return this instanceof rc?(this.v=n,this):new rc(n)}function uP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(T){return function(k){return Promise.resolve(k).then(T,_)}}function a(T,k){r[T]&&(i[T]=function(L){return new Promise(function(N,q){o.push([T,L,N,q])>1||c(T,L)})},k&&(i[T]=k(i[T])))}function c(T,k){try{u(r[T](k))}catch(L){I(o[0][3],L)}}function u(T){T.value instanceof rc?Promise.resolve(T.value.v).then(h,_):I(o[0][2],T)}function h(T){c("next",T)}function _(T){c("throw",T)}function I(T,k){T(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function dP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cP=="function"?cP(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var dm=n=>n&&typeof n.length=="number"&&typeof n!="function";function hm(n){return Pe(n?.then)}function fm(n){return Pe(n[Kl])}function pm(n){return Symbol.asyncIterator&&Pe(n?.[Symbol.asyncIterator])}function gm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mm=gj();function ym(n){return Pe(n?.[mm])}function _m(n){return uP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield rc(t.read());if(i)return yield rc(void 0);yield yield rc(r)}}finally{t.releaseLock()}})}function vm(n){return Pe(n?.getReader)}function zt(n){if(n instanceof Ee)return n;if(n!=null){if(fm(n))return mj(n);if(dm(n))return yj(n);if(hm(n))return _j(n);if(pm(n))return hP(n);if(ym(n))return vj(n);if(vm(n))return wj(n)}throw gm(n)}function mj(n){return new Ee(e=>{let t=n[Kl]();if(Pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yj(n){return new Ee(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _j(n){return new Ee(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,nm)})}function vj(n){return new Ee(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function hP(n){return new Ee(e=>{Ej(n,e).catch(t=>e.error(t))})}function wj(n){return hP(_m(n))}function Ej(n,e){var t,r,i,o;return lP(this,void 0,void 0,function*(){try{for(t=dP(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vs(n,e=0){return Ye((t,r)=>{t.subscribe(We(r,i=>Kn(r,n,()=>r.next(i),e),()=>Kn(r,n,()=>r.complete(),e),i=>Kn(r,n,()=>r.error(i),e)))})}function Us(n,e=0){return Ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function fP(n,e){return zt(n).pipe(Us(e),Vs(e))}function pP(n,e){return zt(n).pipe(Us(e),Vs(e))}function gP(n,e){return new Ee(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function mP(n,e){return new Ee(t=>{let r;return Kn(t,e,()=>{r=n[mm](),Kn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Pe(r?.return)&&r.return()})}function wm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ee(t=>{Kn(t,e,()=>{let r=n[Symbol.asyncIterator]();Kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function yP(n,e){return wm(_m(n),e)}function _P(n,e){if(n!=null){if(fm(n))return fP(n,e);if(dm(n))return gP(n,e);if(hm(n))return pP(n,e);if(pm(n))return wm(n,e);if(ym(n))return mP(n,e);if(vm(n))return yP(n,e)}throw gm(n)}function ct(n,e){return e?_P(n,e):zt(n)}function pe(...n){let e=Fs(n);return ct(n,e)}function eu(n,e){let t=Pe(n)?n:()=>n,r=i=>i.error(t());return new Ee(e?i=>e.schedule(r,0,i):r)}function OE(n){return!!n&&(n instanceof Ee||Pe(n.lift)&&Pe(n.subscribe))}var To=Hl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(n,e){return Ye((t,r)=>{let i=0;t.subscribe(We(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Ij}=Array;function bj(n,e){return Ij(e)?n(...e):n(e)}function Em(n){return ge(e=>bj(n,e))}var{isArray:Cj}=Array,{getPrototypeOf:Tj,prototype:Sj,keys:Aj}=Object;function Im(n){if(n.length===1){let e=n[0];if(Cj(e))return{args:e,keys:null};if(Dj(e)){let t=Aj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Dj(n){return n&&typeof n=="object"&&Tj(n)===Sj}function bm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ic(...n){let e=Fs(n),t=lm(n),{args:r,keys:i}=Im(n);if(r.length===0)return ct([],e);let o=new Ee(xj(r,e,i?s=>bm(i,s):dr));return t?o.pipe(Em(t)):o}function xj(n,e,t=dr){return r=>{vP(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)vP(e,()=>{let u=ct(n[c],e),h=!1;u.subscribe(We(r,_=>{o[c]=_,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function vP(n,e,t){n?Kn(t,n,e):e()}function wP(n,e,t,r,i,o,s,a){let c=[],u=0,h=0,_=!1,I=()=>{_&&!c.length&&!u&&e.complete()},T=L=>u<r?k(L):c.push(L),k=L=>{o&&e.next(L),u++;let N=!1;zt(t(L,h++)).subscribe(We(e,q=>{i?.(q),o?T(q):e.next(q)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let q=c.shift();s?Kn(e,s,()=>k(q)):k(q)}I()}catch(q){e.error(q)}}))};return n.subscribe(We(e,T,()=>{_=!0,I()})),()=>{a?.()}}function Vt(n,e,t=1/0){return Pe(e)?Vt((r,i)=>ge((o,s)=>e(r,o,i,s))(zt(n(r,i))),t):(typeof e=="number"&&(t=e),Ye((r,i)=>wP(r,i,n,t)))}function tu(n=1/0){return Vt(dr,n)}function EP(){return tu(1)}function nu(...n){return EP()(ct(n,Fs(n)))}function Cm(n){return new Ee(e=>{zt(n()).subscribe(e)})}function NE(...n){let e=lm(n),{args:t,keys:r}=Im(n),i=new Ee(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let _=!1;zt(t[h]).subscribe(We(o,I=>{_||(_=!0,u--),a[h]=I},()=>c--,void 0,()=>{(!c||!_)&&(u||o.next(r?bm(r,a):a),o.complete())}))}});return e?i.pipe(Em(e)):i}function Pn(n,e){return Ye((t,r)=>{let i=0;t.subscribe(We(r,o=>n.call(e,o,i++)&&r.next(o)))})}function In(n){return Ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(We(t,void 0,void 0,s=>{o=zt(n(s,In(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function IP(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(We(s,h=>{let _=u++;c=a?n(c,h,_):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Pi(n,e){return Pe(e)?Vt(n,e,1):Vt(n,1)}function Bs(n){return Ye((e,t)=>{let r=!1;e.subscribe(We(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rn(n){return n<=0?()=>Wn:Ye((e,t)=>{let r=0;e.subscribe(We(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Tm(n=Mj){return Ye((e,t)=>{let r=!1;e.subscribe(We(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Mj(){return new To}function oc(n){return Ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function So(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pn((i,o)=>n(i,o,r)):dr,Rn(1),t?Bs(e):Tm(()=>new To))}function ru(n){return n<=0?()=>Wn:Ye((e,t)=>{let r=[];e.subscribe(We(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function LE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pn((i,o)=>n(i,o,r)):dr,ru(1),t?Bs(e):Tm(()=>new To))}function Sm(n,e){return Ye(IP(n,e,arguments.length>=2,!0))}function Am(...n){let e=Fs(n);return Ye((t,r)=>{(e?nu(n,t,e):nu(n,t)).subscribe(r)})}function kn(n,e){return Ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(We(r,c=>{i?.unsubscribe();let u=0,h=o++;zt(n(c,h)).subscribe(i=We(r,_=>r.next(e?e(c,_,h,u++):_),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function iu(n){return Ye((e,t)=>{zt(n).subscribe(We(t,()=>t.complete(),Hh)),!t.closed&&e.subscribe(t)})}function sn(n,e,t){let r=Pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(We(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):dr}var jE={JSACTION:"jsaction"},zE={JSACTION:"__jsaction",OWNER:"__owner"},SP={};function Pj(n){return n[zE.JSACTION]}function bP(n,e){n[zE.JSACTION]=e}function Rj(n){return SP[n]}function kj(n,e){SP[n]=e}var ve={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},Oj=[ve.MOUSEENTER,ve.MOUSELEAVE,"pointerenter","pointerleave"],rge=[ve.CLICK,ve.DBLCLICK,ve.FOCUSIN,ve.FOCUSOUT,ve.KEYDOWN,ve.KEYUP,ve.KEYPRESS,ve.MOUSEOVER,ve.MOUSEOUT,ve.SUBMIT,ve.TOUCHSTART,ve.TOUCHEND,ve.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Nj=[ve.FOCUS,ve.BLUR,ve.ERROR,ve.LOAD,ve.TOGGLE],$E=n=>Nj.indexOf(n)>=0;function Lj(n){return n===ve.MOUSEENTER?ve.MOUSEOVER:n===ve.MOUSELEAVE?ve.MOUSEOUT:n===ve.POINTERENTER?ve.POINTEROVER:n===ve.POINTERLEAVE?ve.POINTEROUT:n}function Fj(n,e,t,r){let i=!1;$E(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function Vj(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Uj(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var CP=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Bj(n){return n.which===2||n.which==null&&n.button===4}function jj(n){return CP&&n.metaKey||!CP&&n.ctrlKey||Bj(n)||n.shiftKey}function zj(n,e,t){let r=n.relatedTarget;return(n.type===ve.MOUSEOVER&&e===ve.MOUSEENTER||n.type===ve.MOUSEOUT&&e===ve.MOUSELEAVE||n.type===ve.POINTEROVER&&e===ve.POINTERENTER||n.type===ve.POINTEROUT&&e===ve.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function $j(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===ve.MOUSEOVER?t.type=ve.MOUSEENTER:n.type===ve.MOUSEOUT?t.type=ve.MOUSELEAVE:n.type===ve.POINTEROVER?t.type=ve.POINTERENTER:t.type=ve.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Hj=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Pm=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Hj&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Fj(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)Vj(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},qj={EVENT_ACTION_SEPARATOR:":"};function js(n){return n.eventType}function HE(n,e){n.eventType=e}function xm(n){return n.event}function AP(n,e){n.event=e}function DP(n){return n.targetElement}function xP(n,e){n.targetElement=e}function MP(n){return n.eic}function Gj(n,e){n.eic=e}function Wj(n){return n.timeStamp}function Kj(n,e){n.timeStamp=e}function Mm(n){return n.eia}function PP(n,e,t){n.eia=[e,t]}function FE(n){n.eia=void 0}function Dm(n){return n[1]}function Qj(n){return n.eirp}function RP(n,e){n.eirp=e}function kP(n){return n.eir}function OP(n,e){n.eir=e}function NP(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function Yj(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var VE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return js(this.eventInfo)}setEventType(e){HE(this.eventInfo,e)}getEvent(){return xm(this.eventInfo)}setEvent(e){AP(this.eventInfo,e)}getTargetElement(){return DP(this.eventInfo)}setTargetElement(e){xP(this.eventInfo,e)}getContainer(){return MP(this.eventInfo)}setContainer(e){Gj(this.eventInfo,e)}getTimestamp(){return Wj(this.eventInfo)}setTimestamp(e){Kj(this.eventInfo,e)}getAction(){let e=Mm(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){FE(this.eventInfo);return}PP(this.eventInfo,e.name,e.element)}getIsReplay(){return Qj(this.eventInfo)}setIsReplay(e){RP(this.eventInfo,e)}getResolved(){return kP(this.eventInfo)}setResolved(e){OP(this.eventInfo,e)}clone(){return new n(NP(this.eventInfo))}},Jj={},Zj=/\s*;\s*/,Xj=ve.CLICK,UE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&js(e)===ve.CLICK&&jj(xm(e))?HE(e,ve.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){kP(e)||(this.populateAction(e,DP(e)),OP(e,!0))}resolveParentAction(e){let t=Mm(e),r=t&&Dm(t);FE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==MP(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Mm(e));)r=this.getParentNode(r);let i=Mm(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(js(e)===ve.MOUSEENTER||js(e)===ve.MOUSELEAVE||js(e)===ve.POINTERENTER||js(e)===ve.POINTERLEAVE)))if(zj(xm(e),js(e),Dm(i))){let o=$j(xm(e),Dm(i));AP(e,o),xP(e,Dm(i))}else FE(e)}getParentNode(e){let t=e[zE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[js(t)];i!==void 0&&PP(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Pj(e);if(!t){let r=e.getAttribute(jE.JSACTION);if(!r)t=Jj,bP(e,t);else{if(t=Rj(r),!t){t={};let i=r.split(Zj);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(qj.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?s.substr(0,a).trim():Xj,h=c?s.substr(a+1).trim():s;t[u]=h}kj(r,t)}bP(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},LP=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(LP||{}),BE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new VE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&ez(r.element,t)&&Uj(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function ez(n,e){return n.tagName==="A"&&(e.getEventType()===ve.CLICK||e.getEventType()===ve.CLICKMOD)}var FP=Symbol.for("propagationStopped"),qE={REPLAY:101};var tz="`preventDefault` called during event replay.";var nz="`composedPath` called during event replay.",Rm=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new UE({clickModSupport:t}),this.dispatcher=new BE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&oz(e),rz(e);e.getAction();){if(sz(e),$E(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),iz(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function rz(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[FP]=!0,t()};sc(e,"stopPropagation",r),sc(e,"stopImmediatePropagation",r)}function iz(n){return!!n.getEvent()[FP]}function oz(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);sc(e,"target",t),sc(e,"eventPhase",qE.REPLAY),sc(e,"preventDefault",()=>{throw r(),new Error(tz+"")}),sc(e,"composedPath",()=>{throw new Error(nz+"")})}function sz(n){let e=n.getEvent(),t=n.getAction()?.element;t&&sc(e,"currentTarget",t,{configurable:!0})}function sc(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function VP(n,e){n.ecrd(t=>{e.dispatch(t)},LP.I_AM_THE_JSACTION_FRAMEWORK)}function az(n){return n?.q??[]}function cz(n){n&&(TP(n.c,n.et,n.h),TP(n.c,n.etc,n.h,!0))}function TP(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var lz=!1,UP=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=lz;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=Yj(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){RP(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Oj.indexOf(t)>=0)return;let o=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[t]=o;let s=Lj(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),cz(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=NP(i);HE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function BP(n,e=window){return az(e._ejsas?.[n])}function GE(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var FR="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",se=class extends Error{code;constructor(e,t){super(Ey(e,t)),this.code=e}};function uz(n){return`NG0${Math.abs(n)}`}function Ey(n,e){return`${uz(n)}${e?": "+e:""}`}var VR=Symbol("InputSignalNode#UNSET"),dz=he($({},Zg),{transformFn:void 0,applyValueToInputSignal(n,e){zh(n,e)}});function UR(n,e){let t=Object.create(dz);t.value=n,t.transformFn=e?.transform;function r(){if(jh(t),t.value===VR){let i=null;throw new se(-950,i)}return t.value}return r[Ar]=t,r}function tf(n){return{toString:n}.toString()}var km="__parameters__";function hz(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function BR(n,e,t){return tf(()=>{let r=hz(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let _=c.hasOwnProperty(km)?c[km]:Object.defineProperty(c,km,{value:[]})[km];for(;_.length<=h;)_.push(null);return(_[h]=_[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var qm=globalThis;function _t(n){for(let e in n)if(n[e]===_t)return e;throw Error("Could not find renamed property on target object.")}function fz(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Jn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Jn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function uI(n,e){return n?e?`${n} ${e}`:n:e||""}var pz=_t({__forward_ref__:_t});function xr(n){return n.__forward_ref__=xr,n.toString=function(){return Jn(this())},n}function Bn(n){return jR(n)?n():n}function jR(n){return typeof n=="function"&&n.hasOwnProperty(pz)&&n.__forward_ref__===xr}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Iy(n){return jP(n,$R)||jP(n,HR)}function zR(n){return Iy(n)!==null}function jP(n,e){return n.hasOwnProperty(e)?n[e]:null}function gz(n){let e=n&&(n[$R]||n[HR]);return e||null}function zP(n){return n&&(n.hasOwnProperty($P)||n.hasOwnProperty(mz))?n[$P]:null}var $R=_t({\u0275prov:_t}),$P=_t({\u0275inj:_t}),HR=_t({ngInjectableDef:_t}),mz=_t({ngInjectorDef:_t}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qR(n){return n&&!!n.\u0275providers}var yz=_t({\u0275cmp:_t}),_z=_t({\u0275dir:_t}),vz=_t({\u0275pipe:_t}),wz=_t({\u0275mod:_t}),Gm=_t({\u0275fac:_t}),Qh=_t({__NG_ELEMENT_ID__:_t}),HP=_t({__NG_ENV_ID__:_t});function pu(n){return typeof n=="string"?n:n==null?"":String(n)}function Ez(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():pu(n)}function GR(n,e){throw new se(-200,n)}function tb(n,e){throw new se(-201,!1)}var Ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ue||{}),dI;function WR(){return dI}function Qn(n){let e=dI;return dI=n,e}function KR(n,e,t){let r=Iy(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ue.Optional)return null;if(e!==void 0)return e;tb(n,"Injector")}var Iz={},ac=Iz,hI="__NG_DI_FLAG__",Wm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Xg:ac,r)}},Km="ngTempTokenPath",bz="ngTokenPath",Cz=/\n/gm,Tz="\u0275",qP="__source";function Sz(n,e=Ue.Default){if($h()===void 0)throw new se(-203,!1);if($h()===null)return KR(n,void 0,e);{let t=$h(),r;return t instanceof Wm?r=t.injector:r=t,r.get(n,e&Ue.Optional?null:void 0,e)}}function de(n,e=Ue.Default){return(WR()||Sz)(Bn(n),e)}function z(n,e=Ue.Default){return de(n,by(e))}function by(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fI(n){let e=[];for(let t=0;t<n.length;t++){let r=Bn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new se(900,!1);let i,o=Ue.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Az(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function QR(n,e){return n[hI]=e,n.prototype[hI]=e,n}function Az(n){return n[hI]}function Dz(n,e,t,r){let i=n[Km];throw e[qP]&&i.unshift(e[qP]),n.message=xz(`
`+n.message,i,t,r),n[bz]=i,n[Km]=null,n}function xz(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Tz?n.slice(2):n;let i=Jn(e);if(Array.isArray(e))i=e.map(Jn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Jn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Cz,`
  `)}`}var ln=QR(BR("Optional"),8);var Mz=QR(BR("SkipSelf"),4);function lc(n,e){let t=n.hasOwnProperty(Gm);return t?n[Gm]:null}function nb(n,e){n.forEach(t=>Array.isArray(t)?nb(t,e):e(t))}function YR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pz(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Rz(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function rb(n,e,t){let r=nf(n,e);return r>=0?n[r|1]=t:(r=~r,Rz(n,r,e,t)),r}function WE(n,e){let t=nf(n,e);if(t>=0)return n[t|1]}function nf(n,e){return kz(n,e,1)}function kz(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var uc={},Yn=[],$s=new J(""),JR=new J("",-1),ZR=new J(""),Ym=class{get(e,t=ac){if(t===ac){let r=new Error(`NullInjectorError: No provider for ${Jn(e)}!`);throw r.name="NullInjectorError",r}return t}};function XR(n,e){let t=n[wz]||null;if(!t&&e===!0)throw new Error(`Type ${Jn(n)} does not have '\u0275mod' property.`);return t}function Hs(n){return n[yz]||null}function ek(n){return n[_z]||null}function tk(n){return n[vz]||null}function bn(n){return{\u0275providers:n}}function Oz(...n){return{\u0275providers:ib(!0,n),\u0275fromNgModule:!0}}function ib(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return nb(e,s=>{let a=s;pI(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nk(i,o),t}function nk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ob(i,o=>{e(o,r)})}}function pI(n,e,t,r){if(n=Bn(n),!n)return!1;let i=null,o=zP(n),s=!o&&Hs(n);if(!o&&!s){let c=n.ngModule;if(o=zP(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)pI(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{nb(o.imports,h=>{pI(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&nk(u,e)}if(!a){let u=lc(i)||(()=>new i);e({provide:i,useFactory:u,deps:Yn},i),e({provide:ZR,useValue:i,multi:!0},i),e({provide:$s,useValue:()=>de(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;ob(c,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function ob(n,e){for(let t of n)qR(t)&&(t=t.\u0275providers),Array.isArray(t)?ob(t,e):e(t)}var Nz=_t({provide:String,useValue:_t});function rk(n){return n!==null&&typeof n=="object"&&Nz in n}function Lz(n){return!!(n&&n.useExisting)}function Fz(n){return!!(n&&n.useFactory)}function gu(n){return typeof n=="function"}function Vz(n){return!!n.useClass}var Cy=new J(""),Vm={},GP={},KE;function sb(){return KE===void 0&&(KE=new Ym),KE}var cn=class{},Yh=class extends cn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,mI(e,s=>this.processProvider(s)),this.records.set(JR,ou(void 0,this)),i.has("environment")&&this.records.set(cn,ou(void 0,this));let o=this.records.get(Cy);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ZR,Yn,Ue.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Xg:ac,r)}destroy(){Wh(this),this._destroyed=!0;let e=Ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ge(e)}}onDestroy(e){return Wh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Wh(this);let t=Co(this),r=Qn(void 0),i;try{return e()}finally{Co(t),Qn(r)}}get(e,t=ac,r=Ue.Default){if(Wh(this),e.hasOwnProperty(HP))return e[HP](this);r=by(r);let i,o=Co(this),s=Qn(void 0);try{if(!(r&Ue.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=$z(e)&&Iy(e);u&&this.injectableDefInScope(u)?c=ou(gI(e),Vm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Ue.Self?sb():this.parent;return t=r&Ue.Optional&&t===ac?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Km]=a[Km]||[]).unshift(Jn(e)),o)throw a;return Dz(a,e,"R3InjectorError",this.source)}else throw a}finally{Qn(s),Co(o)}}resolveInjectorInitializers(){let e=Ge(null),t=Co(this),r=Qn(void 0),i;try{let o=this.get($s,Yn,Ue.Self);for(let s of o)s()}finally{Co(t),Qn(r),Ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Bn(e);let t=gu(e)?e:Bn(e&&e.provide),r=Bz(e);if(!gu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ou(void 0,Vm,!0),i.factory=()=>fI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ge(null);try{return t.value===GP?GR(Jn(e)):t.value===Vm&&(t.value=GP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&zz(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Bn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function gI(n){let e=Iy(n),t=e!==null?e.factory:lc(n);if(t!==null)return t;if(n instanceof J)throw new se(204,!1);if(n instanceof Function)return Uz(n);throw new se(204,!1)}function Uz(n){if(n.length>0)throw new se(204,!1);let t=gz(n);return t!==null?()=>t.factory(n):()=>new n}function Bz(n){if(rk(n))return ou(void 0,n.useValue);{let e=ik(n);return ou(e,Vm)}}function ik(n,e,t){let r;if(gu(n)){let i=Bn(n);return lc(i)||gI(i)}else if(rk(n))r=()=>Bn(n.useValue);else if(Fz(n))r=()=>n.useFactory(...fI(n.deps||[]));else if(Lz(n))r=(i,o)=>de(Bn(n.useExisting),o!==void 0&&o&Ue.Optional?Ue.Optional:void 0);else{let i=Bn(n&&(n.useClass||n.provide));if(jz(n))r=()=>new i(...fI(n.deps));else return lc(i)||gI(i)}return r}function Wh(n){if(n.destroyed)throw new se(205,!1)}function ou(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jz(n){return!!n.deps}function zz(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $z(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function mI(n,e){for(let t of n)Array.isArray(t)?mI(t,e):t&&qR(t)?mI(t.\u0275providers,e):e(t)}function mn(n,e){let t;n instanceof Yh?(Wh(n),t=n):t=new Wm(n);let r,i=Co(t),o=Qn(void 0);try{return e()}finally{Co(i),Qn(o)}}function ok(){return WR()!==void 0||$h()!=null}function Ty(n){if(!ok())throw new se(-203,!1)}function Hz(n){return typeof n=="function"}var pr=0,De=1,Re=2,gn=3,ei=4,tr=5,ni=6,Jm=7,Zn=8,ki=9,Do=10,gt=11,Jh=12,WP=13,Cu=14,Xn=15,mu=16,su=17,yu=18,Sy=19,sk=20,zs=21,QE=22,Zm=23,Dr=24,uu=25,Pt=26,ak=1,xo=6,Mo=7,Xm=8,ey=9,fr=10;function ti(n){return Array.isArray(n)&&typeof n[ak]=="object"}function Vi(n){return Array.isArray(n)&&n[ak]===!0}function ab(n){return(n.flags&4)!==0}function mc(n){return n.componentOffset>-1}function Ay(n){return(n.flags&1)===1}function Oi(n){return!!n.template}function Zh(n){return(n[Re]&512)!==0}function yc(n){return(n[Re]&256)===256}var yI=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ck(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var gr=(()=>{let n=()=>lk;return n.ngInherit=!0,n})();function lk(n){return n.type.prototype.ngOnChanges&&(n.setInput=Gz),qz}function qz(){let n=dk(this),e=n?.current;if(e){let t=n.previous;if(t===uc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Gz(n,e,t,r,i){let o=this.declaredInputs[r],s=dk(n)||Wz(n,{previous:uc,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new yI(u&&u.currentValue,t,c===uc),ck(n,e,i,t)}var uk="__ngSimpleChanges__";function dk(n){return n[uk]||null}function Wz(n,e){return n[uk]=e}var KP=null;var lt=function(n,e=null,t){KP?.(n,e,t)},Kz="svg",Qz="math";function ri(n){for(;Array.isArray(n);)n=n[pr];return n}function hk(n,e){return ri(e[n])}function ii(n,e){return ri(e[n.index])}function Dy(n,e){return n.data[e]}function fk(n,e){return n[e]}function Yz(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ni(n,e){let t=e[n];return ti(t)?t:t[pr]}function cb(n){return(n[Re]&128)===128}function Jz(n){return Vi(n[gn])}function _u(n,e){return e==null?null:n[e]}function pk(n){n[su]=0}function gk(n){n[Re]&1024||(n[Re]|=1024,cb(n)&&rf(n))}function Zz(n,e){for(;n>0;)e=e[Cu],n--;return e}function xy(n){return!!(n[Re]&9216||n[Dr]?.dirty)}function _I(n){n[Do].changeDetectionScheduler?.notify(8),n[Re]&64&&(n[Re]|=1024),xy(n)&&rf(n)}function rf(n){n[Do].changeDetectionScheduler?.notify(0);let e=dc(n);for(;e!==null&&!(e[Re]&8192||(e[Re]|=8192,!cb(e)));)e=dc(e)}function mk(n,e){if(yc(n))throw new se(911,!1);n[zs]===null&&(n[zs]=[]),n[zs].push(e)}function Xz(n,e){if(n[zs]===null)return;let t=n[zs].indexOf(e);t!==-1&&n[zs].splice(t,1)}function dc(n){let e=n[gn];return Vi(e)?e[gn]:e}function yk(n){return n[Jm]??=[]}function _k(n){return n.cleanup??=[]}var Be={lFrame:Ck(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vI=!1;function e9(){return Be.lFrame.elementDepthCount}function t9(){Be.lFrame.elementDepthCount++}function n9(){Be.lFrame.elementDepthCount--}function lb(){return Be.bindingsEnabled}function Tu(){return Be.skipHydrationRootTNode!==null}function r9(n){return Be.skipHydrationRootTNode===n}function i9(n){Be.skipHydrationRootTNode=n}function o9(){Be.skipHydrationRootTNode=null}function et(){return Be.lFrame.lView}function un(){return Be.lFrame.tView}function ne(n){return Be.lFrame.contextLView=n,n[Zn]}function re(n){return Be.lFrame.contextLView=null,n}function jn(){let n=vk();for(;n!==null&&n.type===64;)n=n.parent;return n}function vk(){return Be.lFrame.currentTNode}function s9(){let n=Be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _c(n,e){let t=Be.lFrame;t.currentTNode=n,t.isParent=e}function ub(){return Be.lFrame.isParent}function db(){Be.lFrame.isParent=!1}function a9(){return Be.lFrame.contextLView}function wk(){return vI}function QP(n){let e=vI;return vI=n,e}function c9(){let n=Be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function l9(){return Be.lFrame.bindingIndex}function u9(n){return Be.lFrame.bindingIndex=n}function My(){return Be.lFrame.bindingIndex++}function hb(n){let e=Be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function d9(){return Be.lFrame.inI18n}function h9(n,e){let t=Be.lFrame;t.bindingIndex=t.bindingRootIndex=n,wI(e)}function f9(){return Be.lFrame.currentDirectiveIndex}function wI(n){Be.lFrame.currentDirectiveIndex=n}function p9(n){let e=Be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Ek(n){Be.lFrame.currentQueryIndex=n}function g9(n){let e=n[De];return e.type===2?e.declTNode:e.type===1?n[tr]:null}function Ik(n,e,t){if(t&Ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ue.Host);)if(i=g9(o),i===null||(o=o[Cu],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Be.lFrame=bk();return r.currentTNode=e,r.lView=n,!0}function fb(n){let e=bk(),t=n[De];Be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bk(){let n=Be.lFrame,e=n===null?null:n.child;return e===null?Ck(n):e}function Ck(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Tk(){let n=Be.lFrame;return Be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Sk=Tk;function pb(){let n=Tk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function m9(n){return(Be.lFrame.contextLView=Zz(n,Be.lFrame.contextLView))[Zn]}function Gs(){return Be.lFrame.selectedIndex}function hc(n){Be.lFrame.selectedIndex=n}function Py(){let n=Be.lFrame;return Dy(n.tView,n.selectedIndex)}function Ak(){return Be.lFrame.currentNamespace}var Dk=!0;function Ry(){return Dk}function Ws(n){Dk=n}function y9(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lk(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function gb(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Um(n,e,t){xk(n,e,3,t)}function Bm(n,e,t,r){(n[Re]&3)===t&&xk(n,e,t,r)}function YE(n,e){let t=n[Re];(t&3)===e&&(t&=16383,t+=1,n[Re]=t)}function xk(n,e,t,r){let i=r!==void 0?n[su]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[su]+=65536),(a<o||o==-1)&&(_9(n,t,e,c),n[su]=(n[su]&4294901760)+c+2),c++}function YP(n,e){lt(4,n,e);let t=Ge(null);try{e.call(n)}finally{Ge(t),lt(5,n,e)}}function _9(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Re]>>14<n[su]>>16&&(n[Re]&3)===e&&(n[Re]+=16384,YP(a,o)):YP(a,o)}var du=-1,fc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function v9(n){return(n.flags&8)!==0}function w9(n){return(n.flags&16)!==0}function E9(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];I9(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Mk(n){return n===3||n===4||n===6}function I9(n){return n.charCodeAt(0)===64}function vu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?JP(n,t,i,null,e[++r]):JP(n,t,i,null,null))}}return n}function JP(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Pk(n){return n!==du}function ty(n){return n&32767}function b9(n){return n>>16}function ny(n,e){let t=b9(n),r=e;for(;t>0;)r=r[Cu],t--;return r}var EI=!0;function ry(n){let e=EI;return EI=n,e}var C9=256,Rk=C9-1,kk=5,T9=0,Ri={};function S9(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qh)&&(r=t[Qh]),r==null&&(r=t[Qh]=T9++);let i=r&Rk,o=1<<i;e.data[n+(i>>kk)]|=o}function iy(n,e){let t=Ok(n,e);if(t!==-1)return t;let r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,JE(r.data,n),JE(e,null),JE(r.blueprint,null));let i=mb(n,e),o=n.injectorIndex;if(Pk(i)){let s=ty(i),a=ny(i,e),c=a[De].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function JE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ok(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function mb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Uk(i),r===null)return du;if(t++,i=i[Cu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return du}function II(n,e,t){S9(n,e,t)}function A9(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Mk(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Nk(n,e,t){if(t&Ue.Optional||n!==void 0)return n;tb(e,"NodeInjector")}function Lk(n,e,t,r){if(t&Ue.Optional&&r===void 0&&(r=null),(t&(Ue.Self|Ue.Host))===0){let i=n[ki],o=Qn(void 0);try{return i?i.get(e,r,t&Ue.Optional):KR(e,r,t&Ue.Optional)}finally{Qn(o)}}return Nk(r,e,t)}function Fk(n,e,t,r=Ue.Default,i){if(n!==null){if(e[Re]&2048&&!(r&Ue.Self)){let s=R9(n,e,t,r,Ri);if(s!==Ri)return s}let o=Vk(n,e,t,r,Ri);if(o!==Ri)return o}return Lk(e,t,r,i)}function Vk(n,e,t,r,i){let o=M9(t);if(typeof o=="function"){if(!Ik(e,n,r))return r&Ue.Host?Nk(i,t,r):Lk(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ue.Optional))tb(t);else return s}finally{Sk()}}else if(typeof o=="number"){let s=null,a=Ok(n,e),c=du,u=r&Ue.Host?e[Xn][tr]:null;for((a===-1||r&Ue.SkipSelf)&&(c=a===-1?mb(n,e):e[a+8],c===du||!XP(r,!1)?a=-1:(s=e[De],a=ty(c),e=ny(c,e)));a!==-1;){let h=e[De];if(ZP(o,a,h.data)){let _=D9(a,e,t,s,r,u);if(_!==Ri)return _}c=e[a+8],c!==du&&XP(r,e[De].data[a+8]===u)&&ZP(o,a,e)?(s=h,a=ty(c),e=ny(c,e)):a=-1}}return i}function D9(n,e,t,r,i,o){let s=e[De],a=s.data[n+8],c=r==null?mc(a)&&EI:r!=s&&(a.type&3)!==0,u=i&Ue.Host&&o===a,h=x9(a,s,t,c,u);return h!==null?oy(e,s,h,a,i):Ri}function x9(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,h=o>>20,_=r?a:a+h,I=i?a+h:u;for(let T=_;T<I;T++){let k=s[T];if(T<c&&t===k||T>=c&&k.type===t)return T}if(i){let T=s[c];if(T&&Oi(T)&&T.type===t)return c}return null}function oy(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof fc){let a=o;a.resolving&&GR(Ez(s[t]));let c=ry(a.canSeeViewProviders);a.resolving=!0;let u,h=a.injectImpl?Qn(a.injectImpl):null,_=Ik(n,r,Ue.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&y9(t,s[t],e)}finally{h!==null&&Qn(h),ry(c),a.resolving=!1,Sk()}}return o}function M9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qh)?n[Qh]:void 0;return typeof e=="number"?e>=0?e&Rk:P9:e}function ZP(n,e,t){let r=1<<n;return!!(t[e+(n>>kk)]&r)}function XP(n,e){return!(n&Ue.Self)&&!(n&Ue.Host&&e)}var cc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Fk(this._tNode,this._lView,e,by(r),t)}};function P9(){return new cc(jn(),et())}function oi(n){return tf(()=>{let e=n.prototype.constructor,t=e[Gm]||bI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Gm]||bI(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bI(n){return jR(n)?()=>{let e=bI(Bn(n));return e&&e()}:lc(n)}function R9(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Re]&2048&&!Zh(s);){let a=Vk(o,s,t,r|Ue.Self,Ri);if(a!==Ri)return a;let c=o.parent;if(!c){let u=s[sk];if(u){let h=u.get(t,Ri,r);if(h!==Ri)return h}c=Uk(s),s=s[Cu]}o=c}return i}function Uk(n){let e=n[De],t=e.type;return t===2?e.declTNode:t===1?n[tr]:null}function yb(n){return A9(jn(),n)}function eR(n,e=null,t=null,r){let i=Bk(n,e,t,r);return i.resolveInjectorInitializers(),i}function Bk(n,e=null,t=null,r,i=new Set){let o=[t||Yn,Oz(n)];return r=r||(typeof n=="object"?void 0:Jn(n)),new Yh(o,e||sb(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=ac;static NULL=new Ym;static create(e,t){if(Array.isArray(e))return eR({name:""},t,e,"");{let r=e.name??"";return eR({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>de(JR)});static __NG_ELEMENT_ID__=-1};var k9=new J("");k9.__NG_ELEMENT_ID__=n=>{let e=jn();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&Ue.Optional)return null;throw new se(204,!1)};var jk=!1,vc=(()=>{class n{static __NG_ELEMENT_ID__=O9;static __NG_ENV_ID__=t=>t}return n})(),CI=class extends vc{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return yc(t)?(e(),()=>{}):(mk(t,e),()=>Xz(t,e))}};function O9(){return new CI(et())}var pc=class{},ky=new J("",{providedIn:"root",factory:()=>!1});var zk=new J(""),$k=new J(""),Ui=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ft(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),of=(()=>{class n{internalPendingTasks=z(Ui);scheduler=z(pc);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return S(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),TI=class extends kt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ok()&&(this.destroyRef=z(vc,{optional:!0})??void 0,this.pendingTasks=z(Ui,{optional:!0})??void 0)}emit(e){let t=Ge(null);try{super.next(e)}finally{Ge(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=TI;function sy(...n){}function Hk(n){let e,t;function r(){n=sy;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tR(n){return queueMicrotask(()=>n()),()=>{n=sy}}var _b="isAngularZone",ay=_b+"_ID",N9=0,Oe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=jk}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,V9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(_b)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,L9,sy,sy);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},L9={};function vb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function F9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Hk(()=>{n.callbackScheduled=!1,SI(n),n.isCheckStableRunning=!0,vb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),SI(n)}function V9(n){let e=()=>{F9(n)},t=N9++;n._inner=n._inner.fork({name:"angular",properties:{[_b]:!0,[ay]:t,[ay+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(U9(c))return r.invokeTask(o,s,a,c);try{return nR(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rR(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return nR(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!B9(c)&&e(),rR(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,SI(n),vb(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function SI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rR(n){n._nesting--,vb(n)}var AI=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function U9(n){return qk(n,"__ignore_ng_zone__")}function B9(n){return qk(n,"__scheduler_tick__")}function qk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Li=class{_console=console;handleError(e){this._console.error("ERROR",e)}},j9=new J("",{providedIn:"root",factory:()=>{let n=z(Oe),e=z(Li);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function iR(n,e){return UR(n,e)}function z9(n){return UR(VR,n)}var Gk=(iR.required=z9,iR);function $9(){return Oy(jn(),et())}function Oy(n,e){return new mr(ii(n,e))}var mr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=$9}return n})();function H9(n){return typeof n=="function"&&n[Ar]!==void 0}function wc(n,e){let t=vE(n,e?.equal),r=t[Ar];return t.set=i=>zh(r,i),t.update=i=>wE(r,i),t.asReadonly=q9.bind(t),t}function q9(){let n=this[Ar];if(n.readonlyFn===void 0){let e=()=>this();e[Ar]=n,n.readonlyFn=e}return n.readonlyFn}function Wk(n){return H9(n)&&typeof n.set=="function"}var G9="ngSkipHydration",W9="ngskiphydration";function Kk(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===W9)return!0}return!1}function Qk(n){return n.hasAttribute(G9)}function cy(n){return(n.flags&128)===128}function K9(n){if(cy(n))return!0;let e=n.parent;for(;e;){if(cy(n)||Kk(e))return!0;e=e.parent}return!1}var Yk=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Yk||{}),Jk=new Map,Q9=0;function Y9(){return Q9++}function J9(n){Jk.set(n[Sy],n)}function DI(n){Jk.delete(n[Sy])}var oR="__ngContext__";function Su(n,e){ti(e)?(n[oR]=e[Sy],J9(e)):n[oR]=e}function Zk(n){return eO(n[Jh])}function Xk(n){return eO(n[ei])}function eO(n){for(;n!==null&&!Vi(n);)n=n[ei];return n}var xI;function tO(n){xI=n}function Ny(){if(xI!==void 0)return xI;if(typeof document<"u")return document;throw new se(210,!1)}var Ao=new J("",{providedIn:"root",factory:()=>Z9}),Z9="ng",wb=new J(""),Bi=new J("",{providedIn:"platform",factory:()=>"unknown"});var Eb=new J("",{providedIn:"root",factory:()=>Ny().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function X9(){let n=new Au;return n.store=e8(Ny(),z(Ao)),n}var Au=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:X9});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function e8(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var nO="h",rO="b",t8="f",n8="n",r8="e",i8="t",Ib="c",iO="x",ly="r",o8="i",s8="n",oO="d";var a8="di",c8="s",l8="p";var Om=new J(""),sO=!1,aO=new J("",{providedIn:"root",factory:()=>sO});var cO=new J(""),u8=!1,d8=new J(""),sR=new J("",{providedIn:"root",factory:()=>new Map}),bb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(bb||{}),Du=new J(""),aR=new Set;function ji(n){aR.has(n)||(aR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lO=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=h8}return n})();function h8(){return new lO(et(),jn())}var au=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(au||{}),uO=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),f8=[au.EarlyRead,au.Write,au.MixedReadWrite,au.Read],p8=(()=>{class n{ngZone=z(Oe);scheduler=z(pc);errorHandler=z(Li,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){z(Du,{optional:!0})}execute(){let t=this.sequences.size>0;t&&lt(16),this.executing=!0;for(let r of f8)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&lt(17)}register(t){let{view:r}=t;r!==void 0?((r[uu]??=[]).push(t),rf(r),r[Re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(bb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),MI=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[uu];e&&(this.view[uu]=e.filter(t=>t!==this))}};function Ly(n,e){!e?.injector&&Ty(Ly);let t=e?.injector??z(Tt);return ji("NgAfterNextRender"),m8(n,t,e,!0)}function g8(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function m8(n,e,t,r){let i=e.get(uO);i.impl??=e.get(p8);let o=e.get(Du,null,{optional:!0}),s=t?.phase??au.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(vc):null,c=e.get(lO,null,{optional:!0}),u=new MI(i.impl,g8(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var hr=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(hr||{}),cR=0,y8=1,an=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(an||{});var _8=0,Fy=1;var v8=4,w8=5;var E8=7,hu=8,I8=9,dO=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(dO||{});function jm(n,e){let t=C8(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function b8(n){jm(1,n),jm(0,n),jm(2,n)}function C8(n){let e=v8;return n===1?e=w8:n===2&&(e=I8),e}function hO(n){return n+1}function sf(n,e){let t=n[De],r=hO(e.index);return n[r]}function Vy(n,e){let t=hO(e.index);return n.data[t]}function T8(n,e,t){let r=e[De],i=Vy(r,t);switch(n){case an.Complete:return i.primaryTmplIndex;case an.Loading:return i.loadingTmplIndex;case an.Error:return i.errorTmplIndex;case an.Placeholder:return i.placeholderTmplIndex;default:return null}}function lR(n,e){return e===an.Placeholder?n.placeholderBlockConfig?.[cR]??null:e===an.Loading?n.loadingBlockConfig?.[cR]??null:null}function S8(n){return n.loadingBlockConfig?.[y8]??null}function uR(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function A8(n,e){let t=e.primaryTmplIndex+Pt;return Dy(n,t)}var Uy="ngb";var D8=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},x8=(n,e)=>{let t=n,r=t.getAttribute(Uy)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var M8=n=>{n.removeAttribute(jE.JSACTION),n.removeAttribute(Uy),n.__jsaction_fns=void 0},P8=new J("",{providedIn:"root",factory:()=>({})});function fO(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var PI=new Map;function R8(n,e){return PI.set(n,e),()=>PI.delete(n)}var dR=!1,pO=(n,e,t,r)=>{};function k8(n,e,t,r){pO(n,e,t,r)}function O8(){dR||(pO=(n,e,t,r)=>{let i=n[ki].get(Ao);PI.get(i)?.(e,t,r)},dR=!0)}var Cb=new J("");var N8="__nghData__",gO=N8,L8="__nghDeferData__",F8=L8,ZE="ngh",V8="nghm",mO=()=>null;function U8(n,e,t=!1){let r=n.getAttribute(ZE);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Au,null,{optional:!0});h!==null&&(c=h.get(gO,[])[Number(r)])}let u={data:c,firstChild:n.firstChild??null};return t&&(u.firstChild=n,By(u,0,n.nextSibling)),a?n.setAttribute(ZE,a):n.removeAttribute(ZE),u}function B8(){mO=U8}function yO(n,e,t=!1){return mO(n,e,t)}function j8(n){let e=n._lView;return e[De].type===2?null:(Zh(e)&&(e=e[Pt]),e)}function z8(n){return n.textContent?.replace(/\s/gm,"")}function $8(n){let e=Ny(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=z8(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function By(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function RI(n,e){return n.segmentHeads?.[e]??null}function H8(n){return n.get(d8,!1,{optional:!0})}function q8(n,e){let t=n.data,r=t[r8]?.[e]??null;return r===null&&t[Ib]?.[e]&&(r=Tb(n,e)),r}function _O(n,e){return n.data[Ib]?.[e]??null}function Tb(n,e){let t=_O(n,e)??[],r=0;for(let i of t)r+=i[ly]*(i[iO]??1);return r}function G8(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[oO];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function af(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[oO];n.disconnectedNodes=t?new Set(t):null}return!!G8(n)?.has(e)}function W8(n,e){let t=e.get(Cb),i=e.get(Au).get(F8,{}),o=!1,s=n,a=null,c=[];for(;!o&&s;){o=t.has(s);let u=t.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}c.unshift(s),s=i[s][l8]}return{parentBlockPromise:a,hydrationQueue:c}}function XE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===V8}function hR(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function K8(n){for(let r of n.body.childNodes)if(XE(r))return;let e=hR(n.body.previousSibling);if(XE(e))return;let t=hR(n.head.lastChild);if(!XE(t))throw new se(-507,!1)}function vO(n,e){let t=n.contentQueries;if(t!==null){let r=Ge(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Ek(o),a.contentQueries(2,e[s],s)}}}finally{Ge(r)}}}function kI(n,e,t){Ek(0);let r=Ge(null);try{e(n,t)}finally{Ge(r)}}function Sb(n,e,t){if(ab(e)){let r=Ge(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ge(r)}}}var Fi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fi||{});var Nm;function Q8(){if(Nm===void 0&&(Nm=null,qm.trustedTypes))try{Nm=qm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nm}function fR(n){return Q8()?.createScriptURL(n)||n}var uy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FR})`}};function xu(n){return n instanceof uy?n.changingThisBreaksApplicationSecurity:n}function Ab(n,e){let t=Y8(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${FR})`)}return t===e}function Y8(n){return n instanceof uy&&n.getTypeName()||null}var J8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wO(n){return n=String(n),n.match(J8)?n:"unsafe:"+n}var jy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(jy||{});function zi(n){let e=IO();return e?e.sanitize(jy.URL,n)||"":Ab(n,"URL")?xu(n):wO(pu(n))}function Z8(n){let e=IO();if(e)return fR(e.sanitize(jy.RESOURCE_URL,n)||"");if(Ab(n,"ResourceURL"))return fR(xu(n));throw new se(904,!1)}function X8(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Z8:zi}function EO(n,e,t){return X8(e,t)(n)}function IO(){let n=et();return n&&n[Do].sanitizer}var e$=/^>|^->|<!--|-->|--!>|<!-$/g,t$=/(<|>)/g,n$="\u200B$1\u200B";function r$(n){return n.replace(e$,e=>e.replace(t$,n$))}function i$(n){return n.ownerDocument.body}function bO(n){return n instanceof Function?n():n}function o$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var CO="ng-template";function s$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&o$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Db(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Db(n){return n.type===4&&n.value!==CO}function a$(n,e,t){let r=n.type===4&&!t?CO:n.value;return e===r}function c$(n,e,t){let r=4,i=n.attrs,o=i!==null?d$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Zr(r)&&!Zr(c))return!1;if(s&&Zr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!a$(n,c,t)||c===""&&e.length===1){if(Zr(r))return!1;s=!0}}else if(r&8){if(i===null||!s$(n,i,c,t)){if(Zr(r))return!1;s=!0}}else{let u=e[++a],h=l$(c,i,Db(n),t);if(h===-1){if(Zr(r))return!1;s=!0;continue}if(u!==""){let _;if(h>o?_="":_=i[h+1].toLowerCase(),r&2&&u!==_){if(Zr(r))return!1;s=!0}}}}return Zr(r)||s}function Zr(n){return(n&1)===0}function l$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return h$(e,n)}function TO(n,e,t=!1){for(let r=0;r<e.length;r++)if(c$(n,e[r],t))return!0;return!1}function u$(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function d$(n){for(let e=0;e<n.length;e++){let t=n[e];if(Mk(t))return e}return n.length}function h$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function f$(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function pR(n,e){return n?":not("+e.trim()+")":e}function p$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zr(s)&&(e+=pR(o,i),i=""),r=s,o=o||!Zr(r);t++}return i!==""&&(e+=pR(o,i)),e}function g$(n){return n.map(p$).join(",")}function m$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Pr={};function SO(n,e){return n.createText(e)}function y$(n,e,t){n.setValue(e,t)}function AO(n,e){return n.createComment(r$(e))}function xb(n,e,t){return n.createElement(e,t)}function dy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function DO(n,e,t){n.appendChild(e,t)}function gR(n,e,t,r,i){r!==null?dy(n,e,t,r,i):DO(n,e,t)}function Mb(n,e,t){n.removeChild(null,e,t)}function xO(n){n.textContent=""}function _$(n,e,t){n.setAttribute(e,"style",t)}function v$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function MO(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&E9(n,e,r),i!==null&&v$(n,e,i),o!==null&&_$(n,e,o)}function Pb(n,e,t,r,i,o,s,a,c,u,h){let _=Pt+r,I=_+i,T=w$(_,I),k=typeof u=="function"?u():u;return T[De]={type:n,blueprint:T,template:t,queries:null,viewQuery:a,declTNode:e,data:T.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function w$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pr);return t}function E$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Pb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Rb(n,e,t,r,i,o,s,a,c,u,h){let _=e.blueprint.slice();return _[pr]=i,_[Re]=r|4|128|8|64|1024,(u!==null||n&&n[Re]&2048)&&(_[Re]|=2048),pk(_),_[gn]=_[Cu]=n,_[Zn]=t,_[Do]=s||n&&n[Do],_[gt]=a||n&&n[gt],_[ki]=c||n&&n[ki]||null,_[tr]=o,_[Sy]=Y9(),_[ni]=h,_[sk]=u,_[Xn]=e.type==2?n[Xn]:_,_}function I$(n,e,t){let r=ii(e,n),i=E$(t),o=n[Do].rendererFactory,s=kb(n,Rb(n,i,null,PO(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function PO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function RO(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kb(n,e){return n[Jh]?n[WP][ei]=e:n[Jh]=e,n[WP]=e,e}function O(n=1){kO(un(),et(),Gs()+n,!1)}function kO(n,e,t,r){if(!r)if((e[Re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Um(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Bm(e,o,0,t)}hc(t)}var zy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(zy||{});function OI(n,e,t,r){let i=Ge(null);try{let[o,s,a]=n.inputs[t],c=null;(s&zy.SignalBased)!==0&&(c=e[o][Ar]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):ck(e,c,o,r)}finally{Ge(i)}}function OO(n,e,t,r,i){let o=Gs(),s=r&2;try{hc(-1),s&&e.length>Pt&&kO(n,e,Pt,!1),lt(s?2:0,i),t(r,i)}finally{hc(o),lt(s?3:1,i)}}function $y(n,e,t){x$(n,e,t),(t.flags&64)===64&&M$(n,e,t)}function Ob(n,e,t=ii){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function b$(n,e,t,r){let o=r.get(aO,sO)||t===Fi.ShadowDom,s=n.selectRootElement(e,o);return C$(s),s}function C$(n){NO(n)}var NO=()=>null;function T$(n){Qk(n)?xO(n):$8(n)}function S$(){NO=T$}function A$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Nb(n,e,t,r,i,o,s,a){if(!a&&Vb(e,n,t,r,i)){mc(e)&&D$(t,e.index);return}if(e.type&3){let c=ii(e,t);r=A$(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function D$(n,e){let t=Ni(e,n);t[Re]&16||(t[Re]|=64)}function x$(n,e,t){let r=t.directiveStart,i=t.directiveEnd;mc(t)&&I$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||iy(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=oy(e,n,s,t);if(Su(c,e),o!==null&&O$(e,s-r,c,a,t,o),Oi(a)){let u=Ni(t.index,e);u[Zn]=oy(e,n,s,t)}}}function M$(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=f9();try{hc(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];wI(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&P$(c,u)}}finally{hc(-1),wI(s)}}function P$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Lb(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];TO(e,o.selectors,!1)&&(r??=[],Oi(o)?r.unshift(o):r.push(o))}return r}function R$(n,e,t,r,i,o){let s=ii(n,e);k$(e[gt],s,o,n.value,t,r,i)}function k$(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?pu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function O$(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];OI(r,t,c,u)}}function Fb(n,e){let t=n[ki],r=t?t.get(Li,null):null;r&&r.handleError(e)}function Vb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],_=e.data[u];OI(_,t[u],h,i),a=!0}if(o)for(let c of o){let u=t[c],h=e.data[c];OI(h,u,r,i),a=!0}return a}function N$(n,e){let t=Ni(e,n),r=t[De];L$(r,t);let i=t[pr];i!==null&&t[ni]===null&&(t[ni]=yO(i,t[ki])),lt(18),Ub(r,t,t[Zn]),lt(19,t[Zn])}function L$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ub(n,e,t){fb(e);try{let r=n.viewQuery;r!==null&&kI(1,r,t);let i=n.template;i!==null&&OO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[yu]?.finishViewCreation(n),n.staticContentQueries&&vO(n,e),n.staticViewQueries&&kI(2,n.viewQuery,t);let o=n.components;o!==null&&F$(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Re]&=-5,pb()}}function F$(n,e){for(let t=0;t<e.length;t++)N$(n,e[t])}function Bb(n,e,t,r){let i=Ge(null);try{let o=e.tView,a=n[Re]&4096?4096:16,c=Rb(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[mu]=u;let h=n[yu];return h!==null&&(c[yu]=h.createEmbeddedView(o)),Ub(o,c,t),c}finally{Ge(i)}}function hy(n,e){return!e||e.firstChild===null||cy(n)}var V$;function jb(n,e){return V$(n,e)}var Po=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Po||{});function Ec(n){return(n.flags&32)===32}function cu(n,e,t,r,i){if(r!=null){let o,s=!1;Vi(r)?o=r:ti(r)&&(s=!0,r=r[pr]);let a=ri(r);n===0&&t!==null?i==null?DO(e,t,a):dy(e,t,a,i||null,!0):n===1&&t!==null?dy(e,t,a,i||null,!0):n===2?Mb(e,a,s):n===3&&e.destroyNode(a),o!=null&&K$(e,n,o,t,i)}}function U$(n,e){LO(n,e),e[pr]=null,e[tr]=null}function B$(n,e,t,r,i,o){r[pr]=i,r[tr]=e,qy(n,r,t,1,i,o)}function LO(n,e){e[Do].changeDetectionScheduler?.notify(9),qy(n,e,e[gt],2,null,null)}function j$(n){let e=n[Jh];if(!e)return eI(n[De],n);for(;e;){let t=null;if(ti(e))t=e[Jh];else{let r=e[fr];r&&(t=r)}if(!t){for(;e&&!e[ei]&&e!==n;)ti(e)&&eI(e[De],e),e=e[gn];e===null&&(e=n),ti(e)&&eI(e[De],e),t=e&&e[ei]}e=t}}function zb(n,e){let t=n[ey],r=t.indexOf(e);t.splice(r,1)}function $b(n,e){if(yc(e))return;let t=e[gt];t.destroyNode&&qy(n,e,t,3,null,null),j$(e)}function eI(n,e){if(yc(e))return;let t=Ge(null);try{e[Re]&=-129,e[Re]|=256,e[Dr]&&mE(e[Dr]),$$(n,e),z$(n,e),e[De].type===1&&e[gt].destroy();let r=e[mu];if(r!==null&&Vi(e[gn])){r!==e[gn]&&zb(r,e);let i=e[yu];i!==null&&i.detachView(n)}DI(e)}finally{Ge(t)}}function z$(n,e){let t=n.cleanup,r=e[Jm];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Jm]=null);let i=e[zs];if(i!==null){e[zs]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Zm];if(o!==null){e[Zm]=null;for(let s of o)s.destroy()}}function $$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof fc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];lt(4,a,c);try{c.call(a)}finally{lt(5,a,c)}}else{lt(4,i,o);try{o.call(i)}finally{lt(5,i,o)}}}}}function FO(n,e,t){return H$(n,e.parent,t)}function H$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[pr];if(mc(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Fi.None||i===Fi.Emulated)return null}return ii(r,t)}function VO(n,e,t){return G$(n,e,t)}function q$(n,e,t){return n.type&40?ii(n,t):null}var G$=q$,mR;function Hy(n,e,t,r){let i=FO(n,r,e),o=e[gt],s=r.parent||e[tr],a=VO(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)gR(o,i,t[c],a,!1);else gR(o,i,t,a,!1);mR!==void 0&&mR(o,r,e,t,i)}function Kh(n,e){if(e!==null){let t=e.type;if(t&3)return ii(e,n);if(t&4)return NI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Kh(n,r);{let i=n[e.index];return Vi(i)?NI(-1,i):ri(i)}}else{if(t&128)return Kh(n,e.next);if(t&32)return jb(e,n)()||ri(n[e.index]);{let r=UO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=dc(n[Xn]);return Kh(i,r)}else return Kh(n,e.next)}}}return null}function UO(n,e){if(e!==null){let r=n[Xn][tr],i=e.projection;return r.projection[i]}return null}function NI(n,e){let t=fr+n+1;if(t<e.length){let r=e[t],i=r[De].firstChild;if(i!==null)return Kh(r,i)}return e[Mo]}function Hb(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Su(ri(a),r),t.flags|=2),!Ec(t))if(c&8)Hb(n,e,t.child,r,i,o,!1),cu(e,n,i,a,o);else if(c&32){let u=jb(t,r),h;for(;h=u();)cu(e,n,i,h,o);cu(e,n,i,a,o)}else c&16?BO(n,e,r,t,i,o):cu(e,n,i,a,o);t=s?t.projectionNext:t.next}}function qy(n,e,t,r,i,o){Hb(t,r,n.firstChild,e,i,o,!1)}function W$(n,e,t){let r=e[gt],i=FO(n,t,e),o=t.parent||e[tr],s=VO(o,t,e);BO(r,0,e,t,i,s)}function BO(n,e,t,r,i,o){let s=t[Xn],c=s[tr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];cu(e,n,i,h,o)}else{let u=c,h=s[gn];cy(r)&&(u.flags|=128),Hb(n,e,u,h,i,o,!0)}}function K$(n,e,t,r,i){let o=t[Mo],s=ri(t);o!==s&&cu(e,n,r,o,i);for(let a=fr;a<t.length;a++){let c=t[a];qy(c[De],c,n,e,r,o)}}function Q$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Po.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Po.Important),n.setStyle(t,r,i,o))}}function fy(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ri(o)),Vi(o)&&Y$(o,r);let s=t.type;if(s&8)fy(n,e,t.child,r);else if(s&32){let a=jb(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=UO(e,t);if(Array.isArray(a))r.push(...a);else{let c=dc(e[Xn]);fy(c[De],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Y$(n,e){for(let t=fr;t<n.length;t++){let r=n[t],i=r[De].firstChild;i!==null&&fy(r[De],r,i,e)}n[Mo]!==n[pr]&&e.push(n[Mo])}function jO(n){if(n[uu]!==null){for(let e of n[uu])e.impl.addSequence(e);n[uu].length=0}}var zO=[];function J$(n){return n[Dr]??Z$(n)}function Z$(n){let e=zO.pop()??Object.create(eH);return e.lView=n,e}function X$(n){n.lView[Dr]!==n&&(n.lView=null,zO.push(n))}var eH=he($({},Bh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{rf(n.lView)},consumerOnSignalRead(){this.lView[Dr]=this}});function tH(n){let e=n[Dr]??Object.create(nH);return e.lView=n,e}var nH=he($({},Bh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=dc(n.lView);for(;e&&!$O(e[De]);)e=dc(e);e&&gk(e)},consumerOnSignalRead(){this.lView[Dr]=this}});function $O(n){return n.type!==2}function HO(n){if(n[Zm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Re]&8192)}}var rH=100;function qO(n,e=!0,t=0){let i=n[Do].rendererFactory,o=!1;o||i.begin?.();try{iH(n,t)}catch(s){throw e&&Fb(n,s),s}finally{o||i.end?.()}}function iH(n,e){let t=wk();try{QP(!0),LI(n,e);let r=0;for(;xy(n);){if(r===rH)throw new se(103,!1);r++,LI(n,1)}}finally{QP(t)}}function oH(n,e,t,r){if(yc(e))return;let i=e[Re],o=!1,s=!1;fb(e);let a=!0,c=null,u=null;o||($O(n)?(u=J$(e),c=Qg(u)):uE()===null?(a=!1,u=tH(e),c=Qg(u)):e[Dr]&&(mE(e[Dr]),e[Dr]=null));try{pk(e),u9(n.bindingStartIndex),t!==null&&OO(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let T=n.preOrderCheckHooks;T!==null&&Um(e,T,null)}else{let T=n.preOrderHooks;T!==null&&Bm(e,T,0,null),YE(e,0)}if(s||sH(e),HO(e),GO(e,0),n.contentQueries!==null&&vO(n,e),!o)if(h){let T=n.contentCheckHooks;T!==null&&Um(e,T)}else{let T=n.contentHooks;T!==null&&Bm(e,T,1),YE(e,1)}cH(n,e);let _=n.components;_!==null&&KO(e,_,0);let I=n.viewQuery;if(I!==null&&kI(2,I,r),!o)if(h){let T=n.viewCheckHooks;T!==null&&Um(e,T)}else{let T=n.viewHooks;T!==null&&Bm(e,T,2),YE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[QE]){for(let T of e[QE])T();e[QE]=null}o||(jO(e),e[Re]&=-73)}catch(h){throw o||rf(e),h}finally{u!==null&&(pE(u,c),a&&X$(u)),pb()}}function GO(n,e){for(let t=Zk(n);t!==null;t=Xk(t))for(let r=fr;r<t.length;r++){let i=t[r];WO(i,e)}}function sH(n){for(let e=Zk(n);e!==null;e=Xk(e)){if(!(e[Re]&2))continue;let t=e[ey];for(let r=0;r<t.length;r++){let i=t[r];gk(i)}}}function aH(n,e,t){lt(18);let r=Ni(e,n);WO(r,t),lt(19,r[Zn])}function WO(n,e){cb(n)&&LI(n,e)}function LI(n,e){let r=n[De],i=n[Re],o=n[Dr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gE(o)),s||=!1,o&&(o.dirty=!1),n[Re]&=-9217,s)oH(r,n,r.template,n[Zn]);else if(i&8192){HO(n),GO(n,1);let a=r.components;a!==null&&KO(n,a,1),jO(n)}}function KO(n,e,t){for(let r=0;r<e.length;r++)aH(n,e[r],t)}function cH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)hc(~i);else{let o=i,s=t[++r],a=t[++r];h9(s,o);let c=e[o];lt(24,c),a(2,c),lt(25,c)}}}finally{hc(-1)}}function Gy(n,e){let t=wk()?64:1088;for(n[Do].changeDetectionScheduler?.notify(e);n;){n[Re]|=t;let r=dc(n);if(Zh(n)&&!r)return n;n=r}return null}function QO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function qb(n,e,t,r=!0){let i=e[De];if(uH(i,e,n,t),r){let s=NI(t,n),a=e[gt],c=a.parentNode(n[Mo]);c!==null&&B$(i,n[tr],a,e,c,s)}let o=e[ni];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function lH(n,e){let t=py(n,e);return t!==void 0&&$b(t[De],t),t}function py(n,e){if(n.length<=fr)return;let t=fr+e,r=n[t];if(r){let i=r[mu];i!==null&&i!==n&&zb(i,r),e>0&&(n[t-1][ei]=r[ei]);let o=Qm(n,fr+e);U$(r[De],r);let s=o[yu];s!==null&&s.detachView(o[De]),r[gn]=null,r[ei]=null,r[Re]&=-129}return r}function uH(n,e,t,r){let i=fr+r,o=t.length;r>0&&(t[i-1][ei]=e),r<o-fr?(e[ei]=t[i],YR(t,fr+r,e)):(t.push(e),e[ei]=null),e[gn]=t;let s=e[mu];s!==null&&t!==s&&YO(s,e);let a=e[yu];a!==null&&a.insertView(n),_I(e),e[Re]|=128}function YO(n,e){let t=n[ey],r=e[gn];if(ti(r))n[Re]|=2;else{let i=r[gn][Xn];e[Xn]!==i&&(n[Re]|=2)}t===null?n[ey]=[e]:t.push(e)}var Xh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[De];return fy(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return yc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(Vi(e)){let t=e[Xm],r=t?t.indexOf(this):-1;r>-1&&(py(e,r),Qm(t,r))}this._attachedToViewContainer=!1}$b(this._lView[De],this._lView)}onDestroy(e){mk(this._lView,e)}markForCheck(){Gy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Re]&=-129}reattach(){_I(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,qO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zh(this._lView),t=this._lView[mu];t!==null&&!e&&zb(t,this._lView),LO(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=Zh(this._lView),r=this._lView[mu];r!==null&&!t&&YO(r,this._lView),_I(this._lView)}};var Wy=(()=>{class n{static __NG_ELEMENT_ID__=fH}return n})(),dH=Wy,hH=class extends dH{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Bb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Xh(i)}};function fH(){return JO(jn(),et())}function JO(n,e){return n.type&4?new hH(e,n,Oy(n,e)):null}function cf(n,e,t,r,i){let o=n.data[e];if(o===null)o=pH(n,e,t,r,i),d9()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=s9();o.injectorIndex=s===null?-1:s.injectorIndex}return _c(o,!0),o}function pH(n,e,t,r,i){let o=vk(),s=ub(),a=s?o:o&&o.parent,c=n.data[e]=mH(n,a,t,e,r,i);return gH(n,c,o,s),c}function gH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function mH(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Tu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var yH=new RegExp(`^(\\d+)*(${rO}|${nO})*(.*)`);function _H(n){let e=n.match(yH),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,u,h]of o.matchAll(/(f|n)(\d*)/g)){let _=parseInt(h,10)||1;a.push(u,_)}return[s,...a]}function vH(n){return!n.prev&&n.parent?.type===8}function tI(n){return n.index-Pt}function wH(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Ky(n,e,t,r){let i=tI(r),o=wH(n,i);if(o===void 0){let s=n.data[s8];if(s?.[i])o=IH(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(vH(r)){let u=tI(r.parent);o=RI(n,u)}else{let u=ii(c,t);if(a)o=u.firstChild;else{let h=tI(c),_=RI(n,h);if(c.type===2&&_){let T=Tb(n,h)+1;o=Qy(T,_)}else o=u.nextSibling}}}}return o}function Qy(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function EH(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case t8:t=t.firstChild;break;case n8:t=t.nextSibling;break}}return t}function IH(n,e){let[t,...r]=_H(n),i;if(t===nO)i=e[Xn][pr];else if(t===rO)i=i$(e[Xn][pr]);else{let o=Number(t);i=ri(e[o+Pt])}return EH(i,r)}var bH=!1;function CH(n){bH=n}function TH(n){let e=n[ni];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[gt];for(let o of r.values())SH(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function SH(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Pt);i&&Mb(n,i,!1)}}function ZO(n){let e=n[xo]??[],r=n[gn][gt],i=[];for(let o of e)o.data[a8]!==void 0?i.push(o):XO(o,r);n[xo]=i}function AH(n){let{lContainer:e}=n,t=e[xo];if(t===null)return;let i=e[gn][gt];for(let o of t)XO(o,i)}function XO(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[ly];for(;t<i;){let o=r.nextSibling;Mb(e,r,!1),r=o,t++}}}function Yy(n){ZO(n);let e=n[pr];ti(e)&&gy(e);for(let t=fr;t<n.length;t++)gy(n[t])}function gy(n){TH(n);let e=n[De];for(let t=Pt;t<e.bindingStartIndex;t++)if(Vi(n[t])){let r=n[t];Yy(r)}else ti(n[t])&&gy(n[t])}function eN(n){let e=n._views;for(let t of e){let r=j8(t);r!==null&&r[pr]!==null&&(ti(r)?gy(r):Yy(r))}}function DH(n,e,t,r){n!==null&&(t.cleanup(e),Yy(n.lContainer),eN(r))}function xH(n,e){let t=[];for(let r of e)for(let i=0;i<(r[iO]??1);i++){let o={data:r,firstChild:null};r[ly]>0&&(o.firstChild=n,n=Qy(r[ly],n)),t.push(o)}return[n,t]}var tN=()=>null;function MH(n,e){let t=n[xo];return!e||t===null||t.length===0?null:t[0].data[o8]===e?t.shift():(ZO(n),null)}function PH(){tN=MH}function FI(n,e){return tN(n,e)}var RH=class{},nN=class{},VI=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Jn(e)}.`)}},Jy=class{static NULL=new VI},wu=class{},ko=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>kH()}return n})();function kH(){let n=et(),e=jn(),t=Ni(e.index,n);return(ti(t)?t:n)[gt]}var OH=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var nI={},fu=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=by(r);let i=this.injector.get(e,nI,r);return i!==nI||t===nI?i:this.parentInjector.get(e,t,r)}};function UI(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=uI(i,a);else if(o==2){let c=a,u=e[++s];r=uI(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function te(n,e=Ue.Default){let t=et();if(t===null)return de(n,e);let r=jn();return Fk(r,t,Bn(n),e)}function rN(){let n="invalid";throw new Error(n)}function Gb(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,h=LH(s);h===null?a=s:[a,c,u]=h,UH(n,e,t,a,o,c,u)}o!==null&&r!==null&&NH(t,r,o)}function NH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new se(-301,!1);r.push(e[i],o)}}function LH(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Oi(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,FH(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function FH(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function VH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function UH(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let I=0;I<a;I++){let T=r[I];!c&&Oi(T)&&(c=!0,VH(n,t,I)),II(iy(t,e),n,T.type)}qH(t,n.data.length,a);for(let I=0;I<a;I++){let T=r[I];T.providersResolver&&T.providersResolver(T)}let u=!1,h=!1,_=RO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let T=r[I];if(t.mergedAttrs=vu(t.mergedAttrs,T.hostAttrs),jH(n,t,e,_,T),HH(_,T,i),s!==null&&s.has(T)){let[L,N]=s.get(T);t.directiveToIndex.set(T.type,[_,L+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(T))&&t.directiveToIndex.set(T.type,_);T.contentQueries!==null&&(t.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(t.flags|=64);let k=T.type.prototype;!u&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),_++}BH(n,t,o)}function BH(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))yR(0,e,i,r),yR(1,e,i,r),vR(e,r,!1);else{let o=t.get(i);_R(0,e,o,r),_R(1,e,o,r),vR(e,r,!0)}}}function yR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),iN(e,o)}}function _R(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),iN(e,s)}}function iN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function vR(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Db(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function jH(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=lc(i.type,!0)),s=new fc(o,Oi(i),te);n.blueprint[r]=s,t[r]=s,zH(n,e,r,RO(n,t,i.hostVars,Pr),i)}function zH(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;$H(s)!=a&&s.push(a),s.push(t,r,o)}}function $H(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function HH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function qH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oN(n,e,t,r,i,o,s,a){let c=e.consts,u=_u(c,s),h=cf(e,n,2,r,u);return o&&Gb(e,t,h,_u(c,a),i),h.mergedAttrs=vu(h.mergedAttrs,h.attrs),h.attrs!==null&&UI(h,h.attrs,!1),h.mergedAttrs!==null&&UI(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function sN(n,e){gb(n,e),ab(e)&&n.queries.elementEnd(e)}var my=class extends Jy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Hs(e);return new Eu(t,this.ngModule)}};function GH(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&zy.SignalBased)!==0};return i&&(o.transform=i),o})}function WH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function KH(n,e,t){let r=e instanceof cn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new fu(t,r):t}function QH(n){let e=n.get(wu,null);if(e===null)throw new se(407,!1);let t=n.get(OH,null),r=n.get(pc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function YH(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return xb(e,t,t==="svg"?Kz:t==="math"?Qz:null)}var Eu=class extends nN{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=GH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=WH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=g$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){lt(22);let o=Ge(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:m$(this.componentDef.selectors[0]),c=Pb(0,null,null,1,0,null,null,null,null,[a],null),u=KH(s,i||this.ngModule,e),h=QH(u),_=h.rendererFactory.createRenderer(null,s),I=r?b$(_,r,s.encapsulation,u):YH(s,_),T=Rb(null,c,null,512|PO(s),null,null,h,_,u,null,yO(I,u,!0));T[Pt]=I,fb(T);let k=null;try{let L=oN(Pt,c,T,"#host",()=>[this.componentDef],!0,0);I&&(MO(_,I,L),Su(I,T)),$y(c,T,L),Sb(c,L,T),sN(c,L),t!==void 0&&JH(L,this.ngContentSelectors,t),k=Ni(L.index,T),T[Zn]=k[Zn],Ub(c,T,null)}catch(L){throw k!==null&&DI(k),DI(T),L}finally{lt(23),pb()}return new BI(this.componentType,T)}finally{Ge(o)}}},BI=class extends RH{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Dy(t[De],Pt),this.location=Oy(this._tNode,t),this.instance=Ni(this._tNode.index,t)[Zn],this.hostView=this.changeDetectorRef=new Xh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Vb(r,i[De],i,e,t);this.previousInputValues.set(e,t);let s=Ni(r.index,i);Gy(s,1)}get injector(){return new cc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Mu=(()=>{class n{static __NG_ELEMENT_ID__=ZH}return n})();function ZH(){let n=jn();return e7(n,et())}var XH=Mu,aN=class extends XH{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Oy(this._hostTNode,this._hostLView)}get injector(){return new cc(this._hostTNode,this._hostLView)}get parentInjector(){let e=mb(this._hostTNode,this._hostLView);if(Pk(e)){let t=ny(e,this._hostLView),r=ty(e),i=t[De].data[r+8];return new cc(i,t)}else return new cc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=wR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=FI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,hy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Hz(e),a;if(s)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef}let c=s?e:new Eu(Hs(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let L=(s?u:this.parentInjector).get(cn,null);L&&(o=L)}let h=Hs(c.componentType??{}),_=FI(this._lContainer,h?.id??null),I=_?.firstChild??null,T=c.create(u,i,I,o);return this.insertImpl(T.hostView,a,hy(this._hostTNode,_)),T}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Jz(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[gn],u=new aN(c,c[tr],c[gn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return qb(s,i,o,r),e.attachToViewContainerRef(),YR(rI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=wR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=py(this._lContainer,t);r&&(Qm(rI(this._lContainer),t),$b(r[De],r))}detach(e){let t=this._adjustIndex(e,-1),r=py(this._lContainer,t);return r&&Qm(rI(this._lContainer),t)!=null?new Xh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function wR(n){return n[Xm]}function rI(n){return n[Xm]||(n[Xm]=[])}function e7(n,e){let t,r=e[n.index];return Vi(r)?t=r:(t=QO(r,e,null,n),e[n.index]=t,kb(e,t)),cN(t,e,n,r),new aN(t,n,e)}function t7(n,e){let t=n[gt],r=t.createComment(""),i=ii(e,n),o=t.parentNode(i);return dy(t,o,r,t.nextSibling(i),!1),r}var cN=lN,Wb=()=>!1;function n7(n,e,t){return Wb(n,e,t)}function lN(n,e,t,r){if(n[Mo])return;let i;t.type&8?i=ri(r):i=t7(e,t),n[Mo]=i}function r7(n,e,t){if(n[Mo]&&n[xo])return!0;let r=t[ni],i=e.index-Pt;if(!r||K9(e)||af(r,i))return!1;let s=RI(r,i),a=r.data[Ib]?.[i],[c,u]=xH(s,a);return n[Mo]=c,n[xo]=u,!0}function i7(n,e,t,r){Wb(n,t,e)||lN(n,e,t,r)}function o7(){cN=i7,Wb=r7}var Iu=class{},Kb=class{};var jI=class extends Iu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new my(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=XR(e);this._bootstrapComponents=bO(o.bootstrap),this._r3Injector=Bk(e,t,[{provide:Iu,useValue:this},{provide:Jy,useValue:this.componentFactoryResolver},...r],Jn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zI=class extends Kb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jI(this.moduleType,e,[])}};var yy=class extends Iu{injector;componentFactoryResolver=new my(this);instance=null;constructor(e){super();let t=new Yh([...e.providers,{provide:Iu,useValue:this},{provide:Jy,useValue:this.componentFactoryResolver}],e.parent||sb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pu(n,e,t=null){return new yy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var s7=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ib(!1,t.type),i=r.length>0?Pu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(de(cn))})}return n})();function ut(n){return tf(()=>{let e=uN(n),t=he($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Yk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(s7).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fi.Emulated,styles:n.styles||Yn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ji("NgStandalone"),dN(t);let r=n.dependencies;return t.directiveDefs=ER(r,!1),t.pipeDefs=ER(r,!0),t.id=d7(t),t})}function a7(n){return Hs(n)||ek(n)}function c7(n){return n!==null}function Rr(n){return tf(()=>({type:n.type,bootstrap:n.bootstrap||Yn,declarations:n.declarations||Yn,imports:n.imports||Yn,exports:n.exports||Yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function l7(n,e){if(n==null)return uc;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=zy.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function u7(n){if(n==null)return uc;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function mt(n){return tf(()=>{let e=uN(n);return dN(e),e})}function Qb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function uN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||uc,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Yn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:l7(n.inputs,e),outputs:u7(n.outputs),debugInfo:null}}function dN(n){n.features?.forEach(e=>e(n))}function ER(n,e){if(!n)return null;let t=e?tk:a7;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(c7)}function d7(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function h7(n){return Object.getPrototypeOf(n.prototype).constructor}function nr(n){let e=h7(n.type),t=!0,r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=iI(n.inputs),s.declaredInputs=iI(n.declaredInputs),s.outputs=iI(n.outputs);let a=i.hostBindings;a&&y7(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&g7(n,c),u&&m7(n,u),f7(n,i),fz(n.outputs,i.outputs),Oi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===nr&&(t=!1)}}e=Object.getPrototypeOf(e)}p7(r)}function f7(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function p7(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vu(i.hostAttrs,t=vu(t,i.hostAttrs))}}function iI(n){return n===uc?{}:n===Yn?[]:n}function g7(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function m7(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function y7(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function hN(n){return v7(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _7(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function v7(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function w7(n,e,t){return n[e]=t}function Ro(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function E7(n,e,t,r){let i=Ro(n,e,t);return Ro(n,e+1,r)||i}function I7(n,e,t,r,i,o,s,a,c){let u=e.consts,h=cf(e,n,4,s||null,a||null);lb()&&Gb(e,t,h,_u(u,c),Lb),h.mergedAttrs=vu(h.mergedAttrs,h.attrs),gb(e,h);let _=h.tView=Pb(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),_.queries=e.queries.embeddedTView(h)),h}function fN(n,e,t,r,i,o,s,a,c,u){let h=t+Pt,_=e.firstCreatePass?I7(h,e,n,r,i,o,s,a,c):e.data[h];_c(_,!1);let I=pN(e,n,_,t);Ry()&&Hy(e,n,I,_),Su(I,n);let T=QO(I,n,I,_);return n[h]=T,kb(n,T),n7(T,_,n),Ay(_)&&$y(e,n,_),c!=null&&Ob(n,_,u),_}function ae(n,e,t,r,i,o,s,a){let c=et(),u=un(),h=_u(u.consts,o);return fN(c,u,n,e,t,r,i,h,s,a),ae}var pN=gN;function gN(n,e,t,r){return Ws(!0),e[gt].createComment("")}function b7(n,e,t,r){let i=e[ni],o=!i||Tu()||Ec(t)||af(i,r);if(Ws(o),o)return gN(n,e);let s=i.data[i8]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Ky(i,n,e,t);By(i,r,a);let c=Tb(i,r);return Qy(c,a)}function C7(){pN=b7}var T7=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Pu(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var S7=new J("");function oI(n,e,t){return n.get(T7).getOrCreateInjector(e,n,t,"")}function A7(n,e,t){if(n instanceof fu){let i=n.injector,o=n.parentInjector,s=oI(o,e,t);return new fu(i,s)}let r=n.get(cn);if(r!==n){let i=oI(r,e,t);return new fu(n,i)}return oI(n,e,t)}function lu(n,e,t,r=!1){let i=t[gn],o=i[De];if(yc(i))return;let s=sf(i,e),a=s[Fy],c=s[E8];if(!(c!==null&&n<c)&&IR(a,n)&&IR(s[_8]??-1,n)){let u=Vy(o,e),_=!r&&!0&&(S8(u)!==null||lR(u,an.Loading)!==null||lR(u,an.Placeholder))?M7:x7;try{_(n,s,t,e,i)}catch(I){Fb(i,I)}}}function D7(n,e){let t=n[xo]?.findIndex(i=>i.data[c8]===e[Fy])??-1;return{dehydratedView:t>-1?n[xo][t]:null,dehydratedViewIx:t}}function x7(n,e,t,r,i){lt(20);let o=T8(n,i,r);if(o!==null){e[Fy]=n;let s=i[De],a=o+Pt,c=Dy(s,a),u=0;lH(t,u);let h;if(n===an.Complete){let k=Vy(s,r),L=k.providers;L&&L.length>0&&(h=A7(i[ki],k,L))}let{dehydratedView:_,dehydratedViewIx:I}=D7(t,e),T=Bb(i,c,null,{injector:h,dehydratedView:_});if(qb(t,T,u,hy(c,_)),Gy(T,2),I>-1&&t[xo]?.splice(I,1),(n===an.Complete||n===an.Error)&&Array.isArray(e[hu])){for(let k of e[hu])k();e[hu]=null}}lt(21)}function IR(n,e){return n<e}function bR(n,e,t){n.loadingPromise.then(()=>{n.loadingState===hr.COMPLETE?lu(an.Complete,e,t):n.loadingState===hr.FAILED&&lu(an.Error,e,t)})}var M7=null;var Yb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var mN=new J("");var P7=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new $I})}return n})(),$I=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ks(n){return!!n&&typeof n.then=="function"}function Jb(n){return!!n&&typeof n.subscribe=="function"}var yN=new J("");function Zb(n){return bn([{provide:yN,multi:!0,useValue:n}])}var _N=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=z(yN,{optional:!0})??[];injector=z(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mn(this.injector,i);if(Ks(o))t.push(o);else if(Jb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qs=new J("");function R7(){_E(()=>{throw new se(600,!1)})}function k7(n){return n.isBoundToModule}var O7=10;var er=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(j9);afterRenderManager=z(uO);zonelessEnabled=z(ky);rootEffectScheduler=z(P7);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new kt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=z(Ui).hasPendingTasks.pipe(ge(t=>!t));constructor(){z(Du,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=z(cn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tt.NULL){lt(10);let o=t instanceof nN;if(!this._injector.get(_N).done){let T="";throw new se(405,T)}let a;o?a=t:a=this._injector.get(Jy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=k7(a)?void 0:this._injector.get(Iu),u=r||a.selector,h=a.create(i,[],u,c),_=h.location.nativeElement,I=h.injector.get(mN,null);return I?.registerApplication(_),h.onDestroy(()=>{this.detachView(h.hostView),zm(this.components,h),I?.unregisterApplication(_)}),this._loadComponent(h),lt(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(bb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);let t=Ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ge(t),this.afterTick.next(),lt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wu,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<O7;)lt(14),this.synchronizeOnce(),lt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)N7(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>xy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Qs,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function N7(n,e,t,r){if(!t&&!xy(n))return;qO(n,e,t&&!r?0:1)}function L7(n,e,t){let r=e[ki],i=e[De];if(n.loadingState!==hr.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=sf(e,t),s=A8(i,n);n.loadingState=hr.IN_PROGRESS,jm(1,o);let a=n.dependencyResolverFn,c=r.get(of).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let h=!1,_=[],I=[];for(let T of u)if(T.status==="fulfilled"){let k=T.value,L=Hs(k)||ek(k);if(L)_.push(L);else{let N=tk(k);N&&I.push(N)}}else{h=!0;break}if(h){if(n.loadingState=hr.FAILED,n.errorTmplIndex===null){let T="",k=new se(-750,!1);Fb(e,k)}}else{n.loadingState=hr.COMPLETE;let T=s.tView;if(_.length>0){T.directiveRegistry=uR(T.directiveRegistry,_);let k=_.map(N=>N.type),L=ib(!1,...k);n.providers=L}I.length>0&&(T.pipeRegistry=uR(T.pipeRegistry,I))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=hr.COMPLETE,c()}),n.loadingPromise)}function F7(n,e){return e[ki].get(S7,null,{optional:!0})?.behavior!==dO.Manual}function V7(n,e,t){let r=e[De],i=e[t.index];if(!F7(n,e))return;let o=sf(e,t),s=Vy(r,t);switch(b8(o),s.loadingState){case hr.NOT_STARTED:lu(an.Loading,t,i),L7(s,e,t),s.loadingState===hr.IN_PROGRESS&&bR(s,t,i);break;case hr.IN_PROGRESS:lu(an.Loading,t,i),bR(s,t,i);break;case hr.COMPLETE:lu(an.Complete,t,i);break;case hr.FAILED:lu(an.Error,t,i);break;default:}}function U7(n,e,t){return S(this,null,function*(){let r=n.get(Cb);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=W8(e,n);if(s.length===0)return;o!==null&&s.shift(),z7(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield CR(n,s,t):r.awaitParentBlock(a,()=>S(null,null,function*(){return yield CR(n,s,t)}))})}function CR(n,e,t){return S(this,null,function*(){let r=n.get(Cb),i=r.hydrating,o=n.get(Ui),s=o.add();for(let c=0;c<e.length;c++){let u=e[c],h=r.get(u);if(h!=null){if(yield H7(h),yield $7(n),B7(h)){AH(h),TR(e.slice(c),r);break}i.get(u).resolve()}else{j7(c,e,r),TR(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),t&&t(e),DH(r.get(a),e,r,n.get(er))})}function B7(n){return sf(n.lView,n.tNode)[Fy]===an.Error}function j7(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&Yy(i.lContainer)}function TR(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function z7(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function $7(n){return new Promise(e=>Ly(e,{injector:n}))}function H7(n){return S(this,null,function*(){let{tNode:e,lView:t}=n,r=sf(t,e);return new Promise(i=>{q7(r,i),V7(2,t,e)})})}function q7(n,e){Array.isArray(n[hu])||(n[hu]=[]),n[hu].push(e)}function Ic(n,e,t,r){let i=et(),o=My();if(Ro(i,o,e)){let s=un(),a=Py();R$(a,i,n,e,t,r)}return Ic}function vN(n,e,t,r){return Ro(n,My(),t)?e+pu(t)+r:Pr}function G7(n,e,t,r,i,o){let s=l9(),a=E7(n,s,t,i);return hb(2),a?e+pu(t)+r+pu(i)+o:Pr}function Lm(n,e){return n<<17|e<<2}function gc(n){return n>>17&32767}function W7(n){return(n&2)==2}function K7(n,e){return n&131071|e<<17}function HI(n){return n|2}function bu(n){return(n&131068)>>2}function sI(n,e){return n&-131069|e<<2}function Q7(n){return(n&1)===1}function qI(n){return n|1}function Y7(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=gc(s),c=bu(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let _=t;h=_[1],(h===null||nf(_,h)>0)&&(u=!0)}else h=t;if(i)if(c!==0){let I=gc(n[a+1]);n[r+1]=Lm(I,a),I!==0&&(n[I+1]=sI(n[I+1],r)),n[a+1]=K7(n[a+1],r)}else n[r+1]=Lm(a,0),a!==0&&(n[a+1]=sI(n[a+1],r)),a=r;else n[r+1]=Lm(c,0),a===0?a=r:n[c+1]=sI(n[c+1],r),c=r;u&&(n[r+1]=HI(n[r+1])),SR(n,h,r,!0),SR(n,h,r,!1),J7(e,h,n,r,o),s=Lm(a,c),o?e.classBindings=s:e.styleBindings=s}function J7(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&nf(o,e)>=0&&(t[r+1]=qI(t[r+1]))}function SR(n,e,t,r){let i=n[t+1],o=e===null,s=r?gc(i):bu(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];Z7(c,e)&&(a=!0,n[s+1]=r?qI(u):HI(u)),s=r?gc(u):bu(u)}a&&(n[t+1]=r?HI(i):qI(i))}function Z7(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?nf(n,e)>=0:!1}var Xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function X7(n){return n.substring(Xr.key,Xr.keyEnd)}function eq(n){return tq(n),wN(n,EN(n,0,Xr.textEnd))}function wN(n,e){let t=Xr.textEnd;return t===e?-1:(e=Xr.keyEnd=nq(n,Xr.key=e,t),EN(n,e,t))}function tq(n){Xr.key=0,Xr.keyEnd=0,Xr.value=0,Xr.valueEnd=0,Xr.textEnd=n.length}function EN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function nq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function j(n,e,t){let r=et(),i=My();if(Ro(r,i,e)){let o=un(),s=Py();Nb(o,s,r,n,e,r[gt],t,!1)}return j}function GI(n,e,t,r,i){Vb(e,n,t,i?"class":"style",r)}function bc(n,e){return iq(n,e,null,!0),bc}function Ys(n){oq(dq,rq,n,!0)}function rq(n,e){for(let t=eq(e);t>=0;t=wN(e,t))rb(n,X7(e),!0)}function iq(n,e,t,r){let i=et(),o=un(),s=hb(2);if(o.firstUpdatePass&&bN(o,n,s,r),e!==Pr&&Ro(i,s,e)){let a=o.data[Gs()];CN(o,a,i,i[gt],n,i[s+1]=fq(e,t),r,s)}}function oq(n,e,t,r){let i=un(),o=hb(2);i.firstUpdatePass&&bN(i,null,o,r);let s=et();if(t!==Pr&&Ro(s,o,t)){let a=i.data[Gs()];if(TN(a,r)&&!IN(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=uI(c,t||"")),GI(i,a,s,t,r)}else hq(i,a,s,s[gt],s[o+1],s[o+1]=uq(n,e,t),r,o)}}function IN(n,e){return e>=n.expandoStartIndex}function bN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Gs()],s=IN(n,t);TN(o,r)&&e===null&&!s&&(e=!1),e=sq(i,o,e,r),Y7(i,o,e,t,s,r)}}function sq(n,e,t,r){let i=p9(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=aI(null,n,e,t,r),t=ef(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=aI(i,n,e,t,r),o===null){let c=aq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=aI(null,n,e,c[1],r),c=ef(c,e.attrs,r),cq(n,e,r,c))}else o=lq(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function aq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(bu(r)!==0)return n[gc(r)]}function cq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[gc(i)]=r}function lq(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ef(r,s,t)}return ef(r,e.attrs,t)}function aI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ef(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ef(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),rb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function uq(n,e,t){if(t==null||t==="")return Yn;let r=[],i=xu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function dq(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&rb(n,r,t)}function hq(n,e,t,r,i,o,s,a){i===Pr&&(i=Yn);let c=0,u=0,h=0<i.length?i[0]:null,_=0<o.length?o[0]:null;for(;h!==null||_!==null;){let I=c<i.length?i[c+1]:void 0,T=u<o.length?o[u+1]:void 0,k=null,L;h===_?(c+=2,u+=2,I!==T&&(k=_,L=T)):_===null||h!==null&&h<_?(c+=2,k=h):(u+=2,k=_,L=T),k!==null&&CN(n,e,t,r,k,L,s,a),h=c<i.length?i[c]:null,_=u<o.length?o[u]:null}}function CN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],h=Q7(u)?AR(c,e,t,i,bu(u),s):void 0;if(!_y(h)){_y(o)||W7(u)&&(o=AR(c,null,t,i,a,s));let _=hk(Gs(),t);Q$(r,s,_,i,o)}}function AR(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),h=u?c[1]:c,_=h===null,I=t[i+1];I===Pr&&(I=_?Yn:void 0);let T=_?WE(I,r):h===r?I:void 0;if(u&&!_y(T)&&(T=WE(c,r)),_y(T)&&(a=T,s))return a;let k=n[i+1];i=s?gc(k):bu(k)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=WE(c,r))}return a}function _y(n){return n!==void 0}function fq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Jn(xu(n)))),n}function TN(n,e){return(n.flags&(e?8:16))!==0}function f(n,e,t,r){let i=et(),o=un(),s=Pt+n,a=i[gt],c=o.firstCreatePass?oN(s,o,i,e,Lb,lb(),t,r):o.data[s],u=SN(o,i,c,a,e,n);i[s]=u;let h=Ay(c);return _c(c,!0),MO(a,u,c),!Ec(c)&&Ry()&&Hy(o,i,u,c),(e9()===0||h)&&Su(u,i),t9(),h&&($y(o,i,c),Sb(o,c,i)),r!==null&&Ob(i,c),f}function p(){let n=jn();ub()?db():(n=n.parent,_c(n,!1));let e=n;r9(e)&&o9(),n9();let t=un();return t.firstCreatePass&&sN(t,e),e.classesWithoutHost!=null&&v9(e)&&GI(t,e,et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&w9(e)&&GI(t,e,et(),e.stylesWithoutHost,!1),p}function Ne(n,e,t,r){return f(n,e,t,r),p(),Ne}var SN=(n,e,t,r,i,o)=>(Ws(!0),xb(r,i,Ak()));function pq(n,e,t,r,i,o){let s=e[ni],a=!s||Tu()||Ec(t)||af(s,o);if(Ws(a),a)return xb(r,i,Ak());let c=Ky(s,n,e,t);return _O(s,o)&&By(s,o,c.nextSibling),s&&(Kk(t)||Qk(c))&&mc(t)&&(i9(t),xO(c)),c}function gq(){SN=pq}function mq(n,e,t,r,i){let o=e.consts,s=_u(o,r),a=cf(e,n,8,"ng-container",s);s!==null&&UI(a,s,!0);let c=_u(o,i);return lb()&&Gb(e,t,a,c,Lb),a.mergedAttrs=vu(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Xb(n,e,t){let r=et(),i=un(),o=n+Pt,s=i.firstCreatePass?mq(o,i,r,e,t):i.data[o];_c(s,!0);let a=AN(i,r,s,n);return r[o]=a,Ry()&&Hy(i,r,a,s),Su(a,r),Ay(s)&&($y(i,r,s),Sb(i,s,r)),t!=null&&Ob(r,s),Xb}function eC(){let n=jn(),e=un();return ub()?db():(n=n.parent,_c(n,!1)),e.firstCreatePass&&(gb(e,n),ab(n)&&e.queries.elementEnd(n)),eC}var AN=(n,e,t,r)=>(Ws(!0),AO(e[gt],""));function yq(n,e,t,r){let i,o=e[ni],s=!o||Tu()||af(o,r)||Ec(t);if(Ws(s),s)return AO(e[gt],"");let a=Ky(o,n,e,t),c=q8(o,r);return By(o,r,a),i=Qy(c,a),i}function _q(){AN=yq}function $e(){return et()}var vy="en-US";var vq=vy;function wq(n){typeof n=="string"&&(vq=n.toLowerCase().replace(/_/g,"-"))}function DR(n,e,t){return function r(i){if(i===Function)return t;let o=mc(n)?Ni(n.index,e):e;Gy(o,5);let s=e[Zn],a=xR(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=xR(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function xR(n,e,t,r){let i=Ge(null);try{return lt(6,e,t),t(r)!==!1}catch(o){return Eq(n,o),!1}finally{lt(7,e,t),Ge(i)}}function Eq(n,e){let t=n[ki],r=t?t.get(Li,null):null;r&&r.handleError(e)}function MR(n,e,t,r,i,o){let s=e[t],a=e[De],u=a.data[t].outputs[r],h=s[u],_=a.firstCreatePass?_k(a):null,I=yk(e),T=h.subscribe(o),k=I.length;I.push(o,T),_&&_.push(i,n.index,k,-(k+1))}function le(n,e,t,r){let i=et(),o=un(),s=jn();return DN(o,i,i[gt],s,n,e,r),le}function Iq(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Jm],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function DN(n,e,t,r,i,o,s){let a=Ay(r),u=n.firstCreatePass?_k(n):null,h=yk(e),_=!0;if(r.type&3||s){let I=ii(r,e),T=s?s(I):I,k=h.length,L=s?q=>s(ri(q[r.index])):r.index,N=null;if(!s&&a&&(N=Iq(n,e,i,r.index)),N!==null){let q=N.__ngLastListenerFn__||N;q.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,_=!1}else{o=DR(r,e,o),k8(e,T,i,o);let q=t.listen(T,i,o);h.push(o,q),u&&u.push(i,L,k,k+1)}}else o=DR(r,e,o);if(_){let I=r.outputs?.[i],T=r.hostDirectiveOutputs?.[i];if(T&&T.length)for(let k=0;k<T.length;k+=2){let L=T[k],N=T[k+1];MR(r,e,L,N,i,o)}if(I&&I.length)for(let k of I)MR(r,e,k,i,i,o)}}function G(n=1){return m9(n)}function bq(n,e){let t=null,r=u$(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?TO(n,o,!0):f$(r,o))return i}return t}function xN(n){let e=et()[Xn][tr];if(!e.projection){let t=n?n.length:1,r=e.projection=Pz(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?bq(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function MN(n,e=0,t,r,i,o){let s=et(),a=un(),c=r?n+1:null;c!==null&&fN(s,a,c,r,i,o,null,t);let u=cf(a,Pt+n,16,null,t||null);u.projection===null&&(u.projection=e),db();let _=!s[ni]||Tu();s[Xn][tr].projection[u.projection]===null&&c!==null?Cq(s,a,c):_&&!Ec(u)&&W$(a,s,u)}function Cq(n,e,t){let r=Pt+t,i=e.data[r],o=n[r],s=FI(o,i.tView.ssrId),a=Bb(n,i,void 0,{dehydratedView:s});qb(o,a,0,hy(i,s))}function tC(n,e,t,r,i){let o=et(),s=vN(o,e,t,r);if(s!==Pr){let a=un(),c=Py();Nb(a,c,o,n,s,o[gt],i,!1)}return tC}function Ru(n){let e=a9();return fk(e,Pt+n)}function g(n,e=""){let t=et(),r=un(),i=n+Pt,o=r.firstCreatePass?cf(r,i,1,e,null):r.data[i],s=PN(r,t,o,e,n);t[i]=s,Ry()&&Hy(r,t,s,o),_c(o,!1)}var PN=(n,e,t,r,i)=>(Ws(!0),SO(e[gt],r));function Tq(n,e,t,r,i){let o=e[ni],s=!o||Tu()||Ec(t)||af(o,i);return Ws(s),s?SO(e[gt],r):Ky(o,n,e,t)}function Sq(){PN=Tq}function vt(n){return Le("",n,""),vt}function Le(n,e,t){let r=et(),i=vN(r,n,e,t);return i!==Pr&&RN(r,Gs(),i),Le}function yr(n,e,t,r,i){let o=et(),s=G7(o,n,e,t,r,i);return s!==Pr&&RN(o,Gs(),s),yr}function RN(n,e,t){let r=hk(e,n);y$(n[gt],r,t)}function be(n,e,t){Wk(e)&&(e=e());let r=et(),i=My();if(Ro(r,i,e)){let o=un(),s=Py();Nb(o,s,r,n,e,r[gt],t,!1)}return be}function Se(n,e){let t=Wk(n);return t&&n.set(e),t}function Ce(n,e){let t=et(),r=un(),i=jn();return DN(r,t,t[gt],i,n,e),Ce}function Aq(n,e,t){let r=un();if(r.firstCreatePass){let i=Oi(n);WI(t,r.data,r.blueprint,i,!0),WI(e,r.data,r.blueprint,i,!1)}}function WI(n,e,t,r,i){if(n=Bn(n),Array.isArray(n))for(let o=0;o<n.length;o++)WI(n[o],e,t,r,i);else{let o=un(),s=et(),a=jn(),c=gu(n)?n:Bn(n.provide),u=ik(n),h=a.providerIndexes&1048575,_=a.directiveStart,I=a.providerIndexes>>20;if(gu(n)||!n.multi){let T=new fc(u,i,te),k=lI(c,e,i?h:h+I,_);k===-1?(II(iy(a,s),o,c),cI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),s.push(T)):(t[k]=T,s[k]=T)}else{let T=lI(c,e,h+I,_),k=lI(c,e,h,h+I),L=T>=0&&t[T],N=k>=0&&t[k];if(i&&!N||!i&&!L){II(iy(a,s),o,c);let q=Mq(i?xq:Dq,t.length,i,r,u);!i&&N&&(t[k].providerFactory=q),cI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=kN(t[i?k:T],u,!i&&r);cI(o,n,T>-1?T:k,q)}!i&&r&&N&&t[k].componentProviders++}}}function cI(n,e,t,r){let i=gu(e),o=Vz(e);if(i||o){let c=(o?Bn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function kN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function lI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Dq(n,e,t,r,i){return KI(this.multi,[])}function xq(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=oy(r,r[De],this.providerFactory.index,i);s=c.slice(0,a),KI(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],KI(o,s);return s}function KI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Mq(n,e,t,r,i){let o=new fc(n,t,te);return o.multi=[],o.index=e,o.componentProviders=0,kN(o,i,r&&!t),o}function kr(n,e=[]){return t=>{t.providersResolver=(r,i)=>Aq(r,i?i(n):n,e)}}function Pq(n,e){let t=n[e];return t===Pr?void 0:t}function Rq(n,e,t,r,i,o){let s=e+t;return Ro(n,s,i)?w7(n,s+1,o?r.call(o,i):r(i)):Pq(n,s+1)}function $i(n,e){let t=un(),r,i=n+Pt;t.firstCreatePass?(r=kq(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=lc(r.type,!0)),s,a=Qn(te);try{let c=ry(!1),u=o();return ry(c),Yz(t,et(),i,u),u}finally{Qn(a)}}function kq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Hi(n,e,t){let r=n+Pt,i=et(),o=fk(i,r);return Oq(i,r)?Rq(i,c9(),e,o.transform,t,o):o.transform(t)}function Oq(n,e){return n[De].data[e].pure}function ON(n,e){return JO(n,e)}var qs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NN=new qs("19.2.15"),QI=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},LN=(()=>{class n{compileModuleSync(t){return new zI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=XR(t),o=bO(i.declarations).reduce((s,a)=>{let c=Hs(a);return c&&s.push(new Eu(c)),s},[]);return new QI(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nq=(()=>{class n{zone=z(Oe);changeDetectionScheduler=z(pc);applicationRef=z(er);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lq=new J("",{factory:()=>!1});function FN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(he($({},UN()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:$s,multi:!0,useFactory:()=>{let r=z(Nq,{optional:!0});return()=>r.initialize()}},{provide:$s,multi:!0,useFactory:()=>{let r=z(Fq);return()=>{r.initialize()}}},e===!0?{provide:zk,useValue:!0}:[],{provide:$k,useValue:t??jk}]}function VN(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=FN({ngZoneFactory:()=>{let i=UN(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ji("NgZone_CoalesceEvent"),new Oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return bn([{provide:Lq,useValue:!0},{provide:ky,useValue:!1},r])}function UN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Fq=(()=>{class n{subscription=new Mt;initialized=!1;zone=z(Oe);pendingTasks=z(Ui);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vq=(()=>{class n{appRef=z(er);taskService=z(Ui);ngZone=z(Oe);zonelessEnabled=z(ky);tracing=z(Du,{optional:!0});disableScheduling=z(zk,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ay):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z($k,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof AI||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?tR:Hk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ay+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uq(){return typeof $localize<"u"&&$localize.locale||vy}var nC=new J("",{providedIn:"root",factory:()=>z(nC,Ue.Optional|Ue.SkipSelf)||Uq()});var YI=new J(""),Bq=new J("");function Gh(n){return!n.moduleRef}function jq(n){let e=Gh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{Gh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Li,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Gh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(YI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(YI);s.add(o),n.moduleRef.onDestroy(()=>{zm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return $q(r,t,()=>{let o=e.get(_N);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(nC,vy);if(wq(s||vy),!e.get(Bq,!0))return Gh(n)?e.get(er):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Gh(n)){let c=e.get(er);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return zq(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function zq(n,e){let t=n.injector.get(er);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new se(-403,!1);e.push(n)}function $q(n,e,t){try{let r=t();return Ks(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var $m=null;function Hq(n=[],e){return Tt.create({name:e,providers:[{provide:Cy,useValue:"platform"},{provide:YI,useValue:new Set([()=>$m=null])},...n]})}function qq(n=[]){if($m)return $m;let e=Hq(n);return $m=e,R7(),Gq(e),e}function Gq(n){let e=n.get(wb,null);mn(n,()=>{e?.forEach(t=>t())})}function rC(){return!1}var Js=(()=>{class n{static __NG_ELEMENT_ID__=Wq}return n})();function Wq(n){return Kq(jn(),et(),(n&16)===16)}function Kq(n,e,t){if(mc(n)&&!t){let r=Ni(n.index,e);return new Xh(r,r)}else if(n.type&175){let r=e[Xn];return new Xh(r,e)}return null}var JI=class{constructor(){}supports(e){return hN(e)}create(e){return new ZI(e)}},Qq=(n,e)=>e,ZI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Qq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<PR(r,i,o)?t:r,a=PR(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=c-i;if(u!=h){for(let I=0;I<u;I++){let T=I<o.length?o[I]:o[I]=0,k=T+I;h<=k&&k<u&&(o[I]=T+1)}let _=s.previousIndex;o[_]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hN(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_7(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new XI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new wy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new wy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},XI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},eb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},wy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new eb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function PR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function RR(){return new iC([new JI])}var iC=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:RR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||RR()),deps:[[n,new Mz,new ln]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new se(901,!1)}}return n})();function BN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;lt(8);try{let o=i?.injector??qq(r),s=[FN({}),{provide:pc,useExisting:Vq},...t||[]],a=new yy({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return jq({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{lt(9)}}var Fm=new WeakSet,kR="",Hm=[];function OR(n){return n.get(cO,u8)}function jN(){let n=[{provide:cO,useFactory:()=>{let e=!0;{let t=z(Ao);e=!!window._ejsas?.[t]}return e&&ji("NgEventReplay"),e}}];return n.push({provide:$s,useValue:()=>{let e=z(er),{injector:t}=e;if(!Fm.has(e)){let r=z(sR);if(OR(t)){O8();let i=t.get(Ao),o=R8(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(D8(s,a,c),x8(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Qs,useFactory:()=>{let e=z(er),{injector:t}=e;return()=>{!OR(t)||Fm.has(e)||(Fm.add(e),e.onDestroy(()=>{Fm.delete(e);{let r=t.get(Ao);GE(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(P8);Yq(r,t);let i=t.get(sR);i.get(kR)?.forEach(M8),i.delete(kR);let o=r.instance;H8(t)?e.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),n}var Yq=(n,e)=>{let t=e.get(Ao),r=window._ejsas[t],i=n.instance=new UP(new Pm(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=BP(t);i.replayEarlyEventInfos(o),GE(t);let s=new Rm(a=>{Jq(e,a,a.currentTarget)});VP(i,s)};function Jq(n,e,t){let r=(t&&t.getAttribute(Uy))??"";/d\d+/.test(r)?Zq(r,n,e,t):e.eventPhase===qE.REPLAY&&fO(e,t)}function Zq(n,e,t,r){Hm.push({event:t,currentTarget:r}),U7(e,n,Xq)}function Xq(n){let e=[...Hm],t=new Set(n);Hm=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(Uy);t.has(o)?fO(r,i):Hm.push({event:r,currentTarget:i})}}var NR=!1;function eG(){NR||(NR=!0,B8(),gq(),Sq(),_q(),C7(),o7(),PH(),S$())}function tG(n){return n.whenStable()}function zN(){let n=[{provide:Om,useFactory:()=>{let e=!0;return e=!!z(Au,{optional:!0})?.get(gO,null),e&&ji("NgHydration"),e}},{provide:$s,useValue:()=>{CH(!1),z(Om)&&(K8(Ny()),eG())},multi:!0}];return n.push({provide:aO,useFactory:()=>z(Om)},{provide:Qs,useFactory:()=>{if(z(Om)){let e=z(er);return()=>{tG(e).then(()=>{e.destroyed||eN(e)})}}return()=>{}},multi:!0}),bn(n)}function Zs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Or(n){return EE(n)}function Cc(n,e){return yE(n,e?.equal)}var LR=class{[Ar];constructor(e){this[Ar]=e}destroy(){this[Ar].destroy()}};function $N(n){let e=Hs(n);if(!e)return null;let t=new Eu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $t=new J("");var GN=null;function Nr(){return GN}function oC(n){GN??=n}var lf=class{},uf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(WN),providedIn:"platform"})}return n})(),sC=new J(""),WN=(()=>{class n extends uf{_location;_history;_doc=z($t);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nr().getBaseHref(this._doc)}onPopState(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Zy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function HN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function si(n){return n&&n[0]!=="?"?`?${n}`:n}var ai=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(e_),providedIn:"root"})}return n})(),Xy=new J(""),e_=(()=>{class n extends ai{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Zy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+si(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+si(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+si(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(uf),de(Xy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xs=(()=>{class n{_subject=new kt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=iG(HN(qN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+si(r))}normalize(t){return n.stripTrailingSlash(rG(this._basePath,qN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+si(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+si(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=si;static joinWithSlash=Zy;static stripTrailingSlash=HN;static \u0275fac=function(r){return new(r||n)(de(ai))};static \u0275prov=X({token:n,factory:()=>nG(),providedIn:"root"})}return n})();function nG(){return new Xs(de(ai))}function rG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qN(n){return n.replace(/\/index.html$/,"")}function iG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var lC=(()=>{class n extends ai{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Zy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+si(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+si(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(uf),de(Xy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var t_=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new t_(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),KN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);KN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Mu),te(Wy),te(iC))};static \u0275dir=mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function KN(n,e){n.context.$implicit=e.item}var Ut=(()=>{class n{_viewContainer;_context=new n_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){QN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){QN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Mu),te(Wy))};static \u0275dir=mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),n_=class{$implicit=null;ngIf=null};function QN(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}function YN(n,e){return new se(2100,!1)}var aC=class{createSubscription(e,t){return Or(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Or(()=>e.unsubscribe())}},cC=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},oG=new cC,sG=new aC,df=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ks(t))return oG;if(Jb(t))return sG;throw YN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(te(Js,16))};static \u0275pipe=Qb({name:"async",type:n,pure:!1})}return n})();var aG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Tc=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw YN(n,t);return t.replace(aG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Qb({name:"titlecase",type:n,pure:!0})}return n})();var St=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Mr({})}return n})();function hf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var r_="browser",JN="server";function uC(n){return n===r_}function i_(n){return n===JN}var Sc=class{};var ZN=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new dC(z($t),window)})}return n})(),dC=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=cG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function cG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var a_=new J(""),gC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(a_),de(Oe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),ff=class{_doc;constructor(e){this._doc=e}manager},o_="ng-app-id";function XN(n){for(let e of n)e.remove()}function e2(n,e){let t=e.createElement("style");return t.textContent=n,t}function lG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${o_}="${e}"],link[${o_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(o_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function fC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var mC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=i_(o),lG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,e2);r?.forEach(i=>this.addUsage(i,this.external,fC))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(XN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])XN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,e2(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,fC(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(o_,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de($t),de(Ao),de(Eb,8),de(Bi))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),hC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yC=/%COMP%/g;var n2="%COMP%",uG=`_nghost-${n2}`,dG=`_ngcontent-${n2}`,hG=!0,fG=new J("",{providedIn:"root",factory:()=>hG});function pG(n){return dG.replace(yC,n)}function gG(n){return uG.replace(yC,n)}function r2(n,e){return e.map(t=>t.replace(yC,n))}var _C=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=h,this.platformIsServer=i_(a),this.defaultRenderer=new pf(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fi.ShadowDom&&(r=he($({},r),{encapsulation:Fi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof s_?i.applyToHost(t):i instanceof gf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,_=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Fi.Emulated:o=new s_(c,u,r,this.appId,h,s,a,_,I);break;case Fi.ShadowDom:return new pC(c,u,t,r,s,a,this.nonce,_,I);default:o=new gf(c,u,r,h,s,a,_,I);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(gC),de(mC),de(Ao),de(fG),de($t),de(Bi),de(Oe),de(Eb),de(Du,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),pf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(t2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(t2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=hC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Po.DashCase|Po.Important)?e.style.setProperty(t,r,i&Po.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Po.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Nr().getGlobalEventTarget(this.doc,e),!e))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function t2(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pC=class extends pf{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=r2(i.id,h);for(let I of h){let T=document.createElement("style");a&&T.setAttribute("nonce",a),T.textContent=I,this.shadowRoot.appendChild(T)}let _=i.getExternalStyles?.();if(_)for(let I of _){let T=fC(I,o);a&&T.setAttribute("nonce",a),this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gf=class extends pf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?r2(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},s_=class extends gf{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,u,h),this.contentAttr=pG(h),this.hostAttr=gG(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var c_=class n extends lf{supportsDOMEvents=!0;static makeCurrent(){oC(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=mG();return t==null?null:yG(t)}resetBaseElement(){mf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hf(document.cookie,e)}},mf=null;function mG(){return mf=mf||document.head.querySelector("base"),mf?mf.getAttribute("href"):null}function yG(n){return new URL(n,document.baseURI).pathname}var _G=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),o2=(()=>{class n extends ff{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de($t))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),i2=["alt","control","meta","shift"],vG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},s2=(()=>{class n extends ff{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),i2.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=vG[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),i2.forEach(s=>{if(s!==i){let a=wG[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de($t))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function vC(n,e,t){return BN($({rootComponent:n,platformRef:t?.platformRef},EG(e)))}function EG(n){return{appProviders:[...SG,...n?.providers??[]],platformProviders:TG}}function IG(){c_.makeCurrent()}function bG(){return new Li}function CG(){return tO(document),document}var TG=[{provide:Bi,useValue:r_},{provide:wb,useValue:IG,multi:!0},{provide:$t,useFactory:CG}];var SG=[{provide:Cy,useValue:"root"},{provide:Li,useFactory:bG},{provide:a_,useClass:o2,multi:!0,deps:[$t]},{provide:a_,useClass:s2,multi:!0,deps:[$t]},_C,mC,gC,{provide:wu,useExisting:_C},{provide:Sc,useClass:_G},[]];var Ou=class{},yf=class{},No=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var u_=class{encodeKey(e){return a2(e)}encodeValue(e){return a2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function AG(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var DG=/%(\d[a-f0-9])/gi,xG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function a2(n){return encodeURIComponent(n).replace(DG,(e,t)=>xG[t]??e)}function l_(n){return`${n}`}var Oo=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new u_,e.fromString){if(e.fromObject)throw new se(2805,!1);this.map=AG(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(l_):[l_(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(l_(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(l_(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var d_=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function MG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function c2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function l2(n){return typeof Blob<"u"&&n instanceof Blob}function u2(n){return typeof FormData<"u"&&n instanceof FormData}function PG(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var d2="Content-Type",h2="Accept",f2="X-Request-URL",p2="text/plain",g2="application/json",RG=`${g2}, ${p2}, */*`,ku=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(MG(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new No,this.context??=new d_,!this.params)this.params=new Oo,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||c2(this.body)||l2(this.body)||u2(this.body)||PG(this.body)?this.body:this.body instanceof Oo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||u2(this.body)?null:l2(this.body)?this.body.type||null:c2(this.body)?null:typeof this.body=="string"?p2:this.body instanceof Oo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?g2:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,_=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((I,T)=>I.set(T,e.setHeaders[T]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((I,T)=>I.set(T,e.setParams[T]),h)),new n(t,r,s,{params:h,headers:u,context:_,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ac=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ac||{}),Nu=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new No,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},h_=class n extends Nu{constructor(e={}){super(e)}type=Ac.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Dc=class n extends Nu{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ac.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_f=class extends Nu{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},kG=200,OG=204;function wC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var p_=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ku)o=t;else{let c;i.headers instanceof No?c=i.headers:c=new No(i.headers);let u;i.params&&(i.params instanceof Oo?u=i.params:u=new Oo({fromObject:i.params})),o=new ku(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=pe(o).pipe(Pi(c=>this.handler.handle(c)));if(t instanceof ku||i.observe==="events")return s;let a=s.pipe(Pn(c=>c instanceof Dc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new se(2806,!1);return c.body}));case"blob":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new se(2807,!1);return c.body}));case"text":return a.pipe(ge(c=>{if(c.body!==null&&typeof c.body!="string")throw new se(2808,!1);return c.body}));case"json":default:return a.pipe(ge(c=>c.body))}case"response":return a;default:throw new se(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Oo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wC(i,r))}post(t,r,i={}){return this.request("POST",t,wC(i,r))}put(t,r,i={}){return this.request("PUT",t,wC(i,r))}static \u0275fac=function(r){return new(r||n)(de(Ou))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var NG=new J("");function LG(n,e){return e(n)}function FG(n,e,t){return(r,i)=>mn(t,()=>e(r,o=>n(o,i)))}var m2=new J(""),IC=new J(""),y2=new J("",{providedIn:"root",factory:()=>!0});var f_=(()=>{class n extends Ou{backend;injector;chain=null;pendingTasks=z(Ui);contributeToStability=z(y2);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(m2),...this.injector.get(IC,[])]));this.chain=r.reduceRight((i,o)=>FG(i,o,this.injector),LG)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(oc(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(de(yf),de(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var VG=/^\)\]\}',?\n/,UG=RegExp(`^${f2}:`,"m");function BG(n){return"responseURL"in n&&n.responseURL?n.responseURL:UG.test(n.getAllResponseHeaders())?n.getResponseHeader(f2):null}var EC=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new se(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ct(r.\u0275loadImpl()):pe(null)).pipe(kn(()=>new Ee(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((L,N)=>s.setRequestHeader(L,N.join(","))),t.headers.has(h2)||s.setRequestHeader(h2,RG),!t.headers.has(d2)){let L=t.detectContentTypeHeader();L!==null&&s.setRequestHeader(d2,L)}if(t.responseType){let L=t.responseType.toLowerCase();s.responseType=L!=="json"?L:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let L=s.statusText||"OK",N=new No(s.getAllResponseHeaders()),q=BG(s)||t.url;return c=new h_({headers:N,status:s.status,statusText:L,url:q}),c},h=()=>{let{headers:L,status:N,statusText:q,url:ee}=u(),K=null;N!==OG&&(K=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=K?kG:0);let fe=N>=200&&N<300;if(t.responseType==="json"&&typeof K=="string"){let ze=K;K=K.replace(VG,"");try{K=K!==""?JSON.parse(K):null}catch(me){K=ze,fe&&(fe=!1,K={error:me,text:K})}}fe?(o.next(new Dc({body:K,headers:L,status:N,statusText:q,url:ee||void 0})),o.complete()):o.error(new _f({error:K,headers:L,status:N,statusText:q,url:ee||void 0}))},_=L=>{let{url:N}=u(),q=new _f({error:L,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});o.error(q)},I=!1,T=L=>{I||(o.next(u()),I=!0);let N={type:Ac.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(N.total=L.total),t.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),o.next(N)},k=L=>{let N={type:Ac.UploadProgress,loaded:L.loaded};L.lengthComputable&&(N.total=L.total),o.next(N)};return s.addEventListener("load",h),s.addEventListener("error",_),s.addEventListener("timeout",_),s.addEventListener("abort",_),t.reportProgress&&(s.addEventListener("progress",T),a!==null&&s.upload&&s.upload.addEventListener("progress",k)),s.send(a),o.next({type:Ac.Sent}),()=>{s.removeEventListener("error",_),s.removeEventListener("abort",_),s.removeEventListener("load",h),s.removeEventListener("timeout",_),t.reportProgress&&(s.removeEventListener("progress",T),a!==null&&s.upload&&s.upload.removeEventListener("progress",k)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(de(Sc))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),_2=new J(""),jG="XSRF-TOKEN",zG=new J("",{providedIn:"root",factory:()=>jG}),$G="X-XSRF-TOKEN",HG=new J("",{providedIn:"root",factory:()=>$G}),vf=class{},qG=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=hf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(de($t),de(zG))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function GG(n,e){let t=n.url.toLowerCase();if(!z(_2)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=z(vf).getToken(),i=z(HG);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function bC(...n){let e=[p_,EC,f_,{provide:Ou,useExisting:f_},{provide:yf,useFactory:()=>z(NG,{optional:!0})??z(EC)},{provide:m2,useValue:GG,multi:!0},{provide:_2,useValue:!0},{provide:vf,useClass:qG}];for(let t of n)e.push(...t.\u0275providers);return bn(e)}var WG=new J(""),KG="b",QG="h",YG="s",JG="st",ZG="u",XG="rt",CC=new J(""),eW=["GET","HEAD"];function tW(n,e){let I=z(CC),{isCacheActive:t}=I,r=Vh(I,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!eW.includes(o)||!r.includeRequestsWithAuthHeaders&&nW(n)||r.filter?.(n)===!1)return e(n);let s=z(Au);if(z(WG,{optional:!0}))throw new se(2803,!1);let c=n.url,u=rW(n,c),h=s.get(u,null),_=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(_=i.includeHeaders),h){let{[KG]:T,[XG]:k,[QG]:L,[YG]:N,[JG]:q,[ZG]:ee}=h,K=T;switch(k){case"arraybuffer":K=new TextEncoder().encode(T).buffer;break;case"blob":K=new Blob([T]);break}let fe=new No(L);return pe(new Dc({body:K,headers:fe,status:N,statusText:q,url:ee}))}return e(n).pipe(sn(T=>{T instanceof Dc}))}function nW(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function v2(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function rW(n,e){let{params:t,method:r,responseType:i}=n,o=v2(t),s=n.serializeBody();s instanceof URLSearchParams?s=v2(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=iW(a);return c}function iW(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function w2(n){return[{provide:CC,useFactory:()=>(ji("NgHttpTransferCache"),$({isCacheActive:!0},n))},{provide:IC,useValue:tW,multi:!0},{provide:Qs,multi:!0,useFactory:()=>{let e=z(er),t=z(CC);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var E2=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de($t))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(g_||{});function sW(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function I2(){return sW(g_.EventReplay,jN())}function b2(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(g_.HttpTransferCacheOptions);return bn([[],zN(),t.has(g_.NoHttpTransferCache)||r?[]:w2({}),e])}var Fe="primary",Rf=Symbol("RouteTitle"),xC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Pc(n){return new xC(n)}function P2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qi(n[t],e[t]))return!1;return!0}function qi(n,e){let t=n?MC(n):void 0,r=e?MC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!R2(n[i],e[i]))return!1;return!0}function MC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function R2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function k2(n){return n.length>0?n[n.length-1]:null}function ia(n){return OE(n)?n:Ks(n)?ct(Promise.resolve(n)):pe(n)}var lW={exact:N2,subset:L2},O2={exact:uW,subset:dW,ignored:()=>!0};function C2(n,e,t){return lW[t.paths](n.root,e.root,t.matrixParams)&&O2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uW(n,e){return qi(n,e)}function N2(n,e,t){if(!xc(n.segments,e.segments)||!__(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!N2(n.children[r],e.children[r],t))return!1;return!0}function dW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>R2(n[t],e[t]))}function L2(n,e,t){return F2(n,e,e.segments,t)}function F2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!xc(i,t)||e.hasChildren()||!__(i,t,r))}else if(n.segments.length===t.length){if(!xc(n.segments,t)||!__(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!L2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!xc(n.segments,i)||!__(n.segments,i,r)||!n.children[Fe]?!1:F2(n.children[Fe],e,o,r)}}function __(n,e,t){return e.every((r,i)=>O2[t](n[i].parameters,r.parameters))}var Wi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new st([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){return pW.serialize(this)}},st=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return v_(this)}},ea=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Pc(this.parameters),this._parameterMap}toString(){return U2(this)}};function hW(n,e){return xc(n,e)&&n.every((t,r)=>qi(t.parameters,e[r].parameters))}function xc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function fW(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Fe&&(t=t.concat(e(i,r)))}),t}var Rc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new ta,providedIn:"root"})}return n})(),ta=class{parse(e){let t=new RC(e);return new Wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wf(e.root,!0)}`,r=yW(e.queryParams),i=typeof e.fragment=="string"?`#${gW(e.fragment)}`:"";return`${t}${r}${i}`}},pW=new ta;function v_(n){return n.segments.map(e=>U2(e)).join("/")}function wf(n,e){if(!n.hasChildren())return v_(n);if(e){let t=n.children[Fe]?wf(n.children[Fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Fe&&r.push(`${i}:${wf(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=fW(n,(r,i)=>i===Fe?[wf(n.children[Fe],!1)]:[`${i}:${wf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Fe]!=null?`${v_(n)}/${t[0]}`:`${v_(n)}/(${t.join("//")})`}}function V2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function m_(n){return V2(n).replace(/%3B/gi,";")}function gW(n){return encodeURI(n)}function PC(n){return V2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function w_(n){return decodeURIComponent(n)}function T2(n){return w_(n.replace(/\+/g,"%20"))}function U2(n){return`${PC(n.path)}${mW(n.parameters)}`}function mW(n){return Object.entries(n).map(([e,t])=>`;${PC(e)}=${PC(t)}`).join("")}function yW(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${m_(t)}=${m_(i)}`).join("&"):`${m_(t)}=${m_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _W=/^[^\/()?;#]+/;function TC(n){let e=n.match(_W);return e?e[0]:""}var vW=/^[^\/()?;=#]+/;function wW(n){let e=n.match(vW);return e?e[0]:""}var EW=/^[^=?&#]+/;function IW(n){let e=n.match(EW);return e?e[0]:""}var bW=/^[^&#]+/;function CW(n){let e=n.match(bW);return e?e[0]:""}var RC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Fe]=new st(e,t)),r}parseSegment(){let e=TC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new ea(w_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=wW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=TC(this.remaining);i&&(r=i,this.capture(r))}e[w_(t)]=w_(r)}parseQueryParam(e){let t=IW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=CW(this.remaining);s&&(r=s,this.capture(r))}let i=T2(t),o=T2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=TC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Fe]:new st([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function B2(n){return n.segments.length>0?new st([],{[Fe]:n}):n}function j2(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=j2(i);if(r===Fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new st(n.segments,e);return TW(t)}function TW(n){if(n.numberOfChildren===1&&n.children[Fe]){let e=n.children[Fe];return new st(n.segments.concat(e.segments),e.children)}return n}function na(n){return n instanceof Wi}function z2(n,e,t=null,r=null){let i=$2(n);return H2(i,e,t,r)}function $2(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new st(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=B2(r);return e??i}function H2(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return SC(i,i,i,t,r);let o=SW(e);if(o.toRoot())return SC(i,i,new st([],{}),t,r);let s=AW(o,i,n),a=s.processChildren?If(s.segmentGroup,s.index,o.commands):G2(s.segmentGroup,s.index,o.commands);return SC(i,s.segmentGroup,a,t,r)}function I_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cf(n){return typeof n=="object"&&n!=null&&n.outlets}function SC(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=q2(n,e,t);let a=B2(j2(s));return new Wi(a,o,i)}function q2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=q2(o,e,t)}),new st(n.segments,r)}var b_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I_(r[0]))throw new se(4003,!1);let i=r.find(Cf);if(i&&i!==k2(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function SW(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new b_(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new b_(t,e,r)}var Vu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AW(n,e,t){if(n.isAbsolute)return new Vu(e,!0,0);if(!t)return new Vu(e,!1,NaN);if(t.parent===null)return new Vu(t,!0,0);let r=I_(n.commands[0])?0:1,i=t.segments.length-1+r;return DW(t,i,n.numberOfDoubleDots)}function DW(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new Vu(r,!1,i-o)}function xW(n){return Cf(n[0])?n[0].outlets:{[Fe]:n}}function G2(n,e,t){if(n??=new st([],{}),n.segments.length===0&&n.hasChildren())return If(n,e,t);let r=MW(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new st(n.segments.slice(0,r.pathIndex),{});return o.children[Fe]=new st(n.segments.slice(r.pathIndex),n.children),If(o,0,i)}else return r.match&&i.length===0?new st(n.segments,{}):r.match&&!n.hasChildren()?kC(n,e,t):r.match?If(n,0,i):kC(n,e,t)}function If(n,e,t){if(t.length===0)return new st(n.segments,{});{let r=xW(t),i={};if(Object.keys(r).some(o=>o!==Fe)&&n.children[Fe]&&n.numberOfChildren===1&&n.children[Fe].segments.length===0){let o=If(n.children[Fe],e,t);return new st(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=G2(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new st(n.segments,i)}}function MW(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Cf(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!A2(c,u,s))return o;r+=2}else{if(!A2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Cf(o)){let c=PW(o.outlets);return new st(r,c)}if(i===0&&I_(t[0])){let c=n.segments[e];r.push(new ea(c.path,S2(t[0]))),i++;continue}let s=Cf(o)?o.outlets[Fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&I_(a)?(r.push(new ea(s,S2(a))),i+=2):(r.push(new ea(s,{})),i++)}return new st(r,{})}function PW(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=kC(new st([],{}),0,r))}),e}function S2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function A2(n,e,t){return n==t.path&&qi(e,t.parameters)}var E_="imperative",dn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dn||{}),vr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ra=class extends vr{type=dn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends vr{urlAfterRedirects;type=dn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ir=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ir||{}),Bu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Bu||{}),Gi=class extends vr{reason;code;type=dn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ki=class extends vr{reason;code;type=dn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ju=class extends vr{error;target;type=dn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tf=class extends vr{urlAfterRedirects;state;type=dn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends vr{urlAfterRedirects;state;type=dn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T_=class extends vr{urlAfterRedirects;state;shouldActivate;type=dn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},S_=class extends vr{urlAfterRedirects;state;type=dn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A_=class extends vr{urlAfterRedirects;state;type=dn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class{route;type=dn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},x_=class{route;type=dn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},M_=class{snapshot;type=dn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},P_=class{snapshot;type=dn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R_=class{snapshot;type=dn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k_=class{snapshot;type=dn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zu=class{routerEvent;position;anchor;type=dn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sf=class{},$u=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function RW(n,e){return n.providers&&!n._injector&&(n._injector=Pu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function li(n){return n.outlet||Fe}function kW(n,e){let t=n.filter(r=>li(r)===e);return t.push(...n.filter(r=>li(r)!==e)),t}function kf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var O_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return kf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new kc(this.rootInjector)}},kc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new O_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=OC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=OC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=NC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return NC(e,this._root).map(t=>t.value)}};function OC(n,e){if(n===e.value)return e;for(let t of e.children){let r=OC(n,t);if(r)return r}return null}function NC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=NC(n,t);if(r.length)return r.unshift(e),r}return[]}var _r=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Af=class extends N_{snapshot;constructor(e,t){super(e),this.snapshot=t,$C(this,e)}toString(){return this.snapshot.toString()}};function W2(n){let e=OW(n),t=new Ft([new ea("",{})]),r=new Ft({}),i=new Ft({}),o=new Ft({}),s=new Ft(""),a=new On(t,r,o,s,i,Fe,n,e.root);return a.snapshot=e.root,new Af(new _r(a,[]),e)}function OW(n){let e={},t={},r={},i="",o=new Mc([],e,r,i,t,Fe,n,null,{});return new Df("",new _r(o,[]))}var On=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(u=>u[Rf]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Pc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Pc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function L_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&Q2(i)&&(r.resolve[Rf]=i.title),r}var Mc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rf]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Df=class extends N_{url;constructor(e,t){super(t),this.url=e,$C(this,t)}toString(){return K2(this._root)}};function $C(n,e){e.value._routerState=n,e.children.forEach(t=>$C(n,t))}function K2(n){let e=n.children.length>0?` { ${n.children.map(K2).join(", ")} } `:"";return`${n.value}${e}`}function AC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),qi(e.params,t.params)||n.paramsSubject.next(t.params),cW(e.url,t.url)||n.urlSubject.next(t.url),qi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function LC(n,e){let t=qi(n.params,e.params)&&hW(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||LC(n.parent,e.parent))}function Q2(n){return typeof n.title=="string"||n.title===null}var Y2=new J(""),Of=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Fe;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=Gk(void 0);parentContexts=z(kc);location=z(Mu);changeDetector=z(Js);inputBinder=z(Nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new FC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[gr]})}return n})(),FC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===On?this.route:e===kc?this.childContexts:e===Y2?this.outletData:this.parent.get(e,t)}},Nf=new J(""),HC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ic([r.queryParams,r.params,r.data]).pipe(kn(([o,s,a],c)=>(a=$($($({},o),s),a),c===0?pe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=$N(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),qC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ut({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ne(0,"router-outlet")},dependencies:[Of],encapsulation:2})}return n})();function GC(n){let e=n.children&&n.children.map(GC),t=e?he($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Fe&&(t.component=qC),t}function NW(n,e,t){let r=xf(n,e._root,t?t._root:void 0);return new Af(r,e)}function xf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=LW(n,e,t);return new _r(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xf(n,a)),s}}let r=FW(e.value),i=e.children.map(o=>xf(n,o));return new _r(r,i)}}function LW(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xf(n,r,i);return xf(n,r)})}function FW(n){return new On(new Ft(n.url),new Ft(n.params),new Ft(n.queryParams),new Ft(n.fragment),new Ft(n.data),n.outlet,n.component,n)}var Hu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},J2="ngNavigationCancelingError";function F_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Z2(!1,ir.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Z2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[J2]=!0,t.cancellationCode=e,t}function VW(n){return X2(n)&&na(n.url)}function X2(n){return!!n&&n[J2]}var UW=(n,e,t,r)=>ge(i=>(new VC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),VC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fu(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new k_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new P_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(AC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),AC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},V_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Uu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function BW(n,e,t){let r=n._root,i=e?e._root:null;return Ef(r,i,t,[r.value])}function jW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Gu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!zR(n)?n:e.get(n):r}function Ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fu(e);return n.children.forEach(s=>{zW(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bf(a,t.getContext(s),i)),i}function zW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=$W(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new V_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ef(n,e,a?a.children:null,r,i):Ef(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uu(a.outlet.component,s))}else s&&bf(e,a,i),i.canActivateChecks.push(new V_(r)),o.component?Ef(n,null,a?a.children:null,r,i):Ef(n,null,t,r,i);return i}function $W(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xc(n.url,e.url)||!qi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LC(n,e)||!qi(n.queryParams,e.queryParams);case"paramsChange":default:return!LC(n,e)}}function bf(n,e,t){let r=Fu(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bf(s,e.children.getContext(o),t):bf(s,null,t):bf(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Uu(e.outlet.component,i)):t.canDeactivateChecks.push(new Uu(null,i)):t.canDeactivateChecks.push(new Uu(null,i))}function Lf(n){return typeof n=="function"}function HW(n){return typeof n=="boolean"}function qW(n){return n&&Lf(n.canLoad)}function GW(n){return n&&Lf(n.canActivate)}function WW(n){return n&&Lf(n.canActivateChild)}function KW(n){return n&&Lf(n.canDeactivate)}function QW(n){return n&&Lf(n.canMatch)}function eL(n){return n instanceof To||n?.name==="EmptyError"}var y_=Symbol("INITIAL_VALUE");function qu(){return kn(n=>ic(n.map(e=>e.pipe(Rn(1),Am(y_)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===y_)return y_;if(t===!1||YW(t))return t}return!0}),Pn(e=>e!==y_),Rn(1)))}function YW(n){return na(n)||n instanceof Hu}function JW(n,e){return Vt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?pe(he($({},t),{guardsResult:!0})):ZW(s,r,i,n).pipe(Vt(a=>a&&HW(a)?XW(r,o,n,e):pe(a)),ge(a=>he($({},t),{guardsResult:a})))})}function ZW(n,e,t,r){return ct(n).pipe(Vt(i=>iK(i.component,i.route,t,e,r)),So(i=>i!==!0,!0))}function XW(n,e,t,r){return ct(e).pipe(Pi(i=>nu(tK(i.route.parent,r),eK(i.route,r),rK(n,i.path,t),nK(n,i.route,t))),So(i=>i!==!0,!0))}function eK(n,e){return n!==null&&e&&e(new R_(n)),pe(!0)}function tK(n,e){return n!==null&&e&&e(new M_(n)),pe(!0)}function nK(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>Cm(()=>{let s=kf(e)??t,a=Gu(o,s),c=GW(a)?a.canActivate(e,n):mn(s,()=>a(e,n));return ia(c).pipe(So())}));return pe(i).pipe(qu())}function rK(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>jW(s)).filter(s=>s!==null).map(s=>Cm(()=>{let a=s.guards.map(c=>{let u=kf(s.node)??t,h=Gu(c,u),_=WW(h)?h.canActivateChild(r,n):mn(u,()=>h(r,n));return ia(_).pipe(So())});return pe(a).pipe(qu())}));return pe(o).pipe(qu())}function iK(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(a=>{let c=kf(e)??i,u=Gu(a,c),h=KW(u)?u.canDeactivate(n,e,t,r):mn(c,()=>u(n,e,t,r));return ia(h).pipe(So())});return pe(s).pipe(qu())}function oK(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(s=>{let a=Gu(s,n),c=qW(a)?a.canLoad(e,t):mn(n,()=>a(e,t));return ia(c)});return pe(o).pipe(qu(),tL(r))}function tL(n){return im(sn(e=>{if(typeof e!="boolean")throw F_(n,e)}),ge(e=>e===!0))}function sK(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let a=Gu(s,n),c=QW(a)?a.canMatch(e,t):mn(n,()=>a(e,t));return ia(c)});return pe(o).pipe(qu(),tL(r))}var Mf=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Pf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Lu(n){return eu(new Mf(n))}function aK(n){return eu(new se(4e3,!1))}function cK(n){return eu(Z2(!1,ir.GuardRejected))}var UC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Fe])return aK(`${e.redirectTo}`);i=i.children[Fe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:h,url:_,outlet:I,params:T,data:k,title:L}=i,N=mn(o,()=>a({params:T,data:k,queryParams:c,fragment:u,routeConfig:h,url:_,outlet:I,title:L}));if(N instanceof Wi)throw new Pf(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Pf(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Wi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new st(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},BC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lK(n,e,t,r,i){let o=nL(n,e,t);return o.matched?(r=RW(e,r),sK(r,e,t,i).pipe(ge(s=>s===!0?o:$({},BC)))):pe(o)}function nL(n,e,t){if(e.path==="**")return uK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},BC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||P2)(t,n,e);if(!i)return $({},BC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uK(n){return{matched:!0,parameters:n.length>0?k2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function D2(n,e,t,r){return t.length>0&&fK(n,t,r)?{segmentGroup:new st(e,hK(r,new st(t,n.children))),slicedSegments:[]}:t.length===0&&pK(n,t,r)?{segmentGroup:new st(n.segments,dK(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new st(n.segments,n.children),slicedSegments:t}}function dK(n,e,t,r){let i={};for(let o of t)if(B_(n,e,o)&&!r[li(o)]){let s=new st([],{});i[li(o)]=s}return $($({},r),i)}function hK(n,e){let t={};t[Fe]=e;for(let r of n)if(r.path===""&&li(r)!==Fe){let i=new st([],{});t[li(r)]=i}return t}function fK(n,e,t){return t.some(r=>B_(n,e,r)&&li(r)!==Fe)}function pK(n,e,t){return t.some(r=>B_(n,e,r))}function B_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gK(n,e,t){return e.length===0&&!n.children[t]}var jC=class{};function mK(n,e,t,r,i,o,s="emptyOnly"){return new zC(n,e,t,r,i,s,o).recognize()}var yK=31,zC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new UC(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=D2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(({children:t,rootSnapshot:r})=>{let i=new _r(r,t),o=new Df("",i),s=z2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Mc([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Fe,t).pipe(ge(r=>({children:r,rootSnapshot:t})),In(r=>{if(r instanceof Pf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mf?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ge(s=>s instanceof _r?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ct(o).pipe(Pi(s=>{let a=r.children[s],c=kW(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Sm((s,a)=>(s.push(...a),s)),Bs(null),LE(),Vt(s=>{if(s===null)return Lu(r);let a=rL(s);return _K(a),pe(a)}))}processSegment(e,t,r,i,o,s,a){return ct(t).pipe(Pi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(In(u=>{if(u instanceof Mf)return pe(null);throw u}))),So(c=>!!c),In(c=>{if(eL(c))return gK(r,i,o)?pe(new jC):Lu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return li(r)!==s&&(s===Fe||!B_(i,o,r))?Lu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Lu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:_,remainingSegments:I}=nL(t,i,o);if(!c)return Lu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yK&&(this.allowRedirects=!1));let T=new Mc(o,u,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,x2(i),li(i),i.component??i._loadedComponent??null,i,M2(i)),k=L_(T,a,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let L=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,_,T,e);return this.applyRedirects.lineralizeSegments(i,L).pipe(Vt(N=>this.processSegment(e,r,t,N.concat(I),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=lK(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(kn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(kn(({routes:u})=>{let h=r._loadedInjector??e,{parameters:_,consumedSegments:I,remainingSegments:T}=c,k=new Mc(I,_,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,x2(r),li(r),r.component??r._loadedComponent??null,r,M2(r)),L=L_(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(L.params),k.data=Object.freeze(L.data);let{segmentGroup:N,slicedSegments:q}=D2(t,I,T,u);if(q.length===0&&N.hasChildren())return this.processChildren(h,u,N,k).pipe(ge(K=>new _r(k,K)));if(u.length===0&&q.length===0)return pe(new _r(k,[]));let ee=li(r)===o;return this.processSegment(h,u,N,q,ee?Fe:o,!0,k).pipe(ge(K=>new _r(k,K instanceof _r?[K]:[])))}))):Lu(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):oK(e,t,r,this.urlSerializer).pipe(Vt(i=>i?this.configLoader.loadChildren(e,t).pipe(sn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):cK(t))):pe({routes:[],injector:e})}};function _K(n){n.sort((e,t)=>e.value.outlet===Fe?-1:t.value.outlet===Fe?1:e.value.outlet.localeCompare(t.value.outlet))}function vK(n){let e=n.value.routeConfig;return e&&e.path===""}function rL(n){let e=[],t=new Set;for(let r of n){if(!vK(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=rL(r.children);e.push(new _r(r.value,i))}return e.filter(r=>!t.has(r))}function x2(n){return n.data||{}}function M2(n){return n.resolve||{}}function wK(n,e,t,r,i,o){return Vt(s=>mK(n,e,t,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:c})=>he($({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function EK(n,e){return Vt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of iL(c))s.add(u);let a=0;return ct(s).pipe(Pi(c=>o.has(c)?IK(c,r,n,e):(c.data=L_(c,c.parent,n).resolve,pe(void 0))),sn(()=>a++),ru(1),Vt(c=>a===s.size?pe(t):Wn))})}function iL(n){let e=n.children.map(t=>iL(t)).flat();return[n,...e]}function IK(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Q2(i)&&(o[Rf]=i.title),bK(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=L_(n,n.parent,t).resolve,null)))}function bK(n,e,t,r){let i=MC(n);if(i.length===0)return pe({});let o={};return ct(i).pipe(Vt(s=>CK(n[s],e,t,r).pipe(So(),sn(a=>{if(a instanceof Hu)throw F_(new ta,a);o[s]=a}))),ru(1),ge(()=>o),In(s=>eL(s)?Wn:eu(s)))}function CK(n,e,t,r){let i=kf(e)??r,o=Gu(n,i),s=o.resolve?o.resolve(e,t):mn(i,()=>o(e,t));return ia(s)}function DC(n){return kn(e=>{let t=n(e);return t?ct(t).pipe(ge(()=>e)):pe(e)})}var WC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Fe);return r}getResolvedTitleForRoute(t){return t.data[Rf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(oL),providedIn:"root"})}return n})(),oL=(()=>{class n extends WC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(E2))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oc=new J("",{providedIn:"root",factory:()=>({})}),Nc=new J(""),j_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(LN);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ia(t.loadComponent()).pipe(ge(aL),sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),oc(()=>{this.componentLoaders.delete(t)})),i=new Yl(r,()=>new kt).pipe(Ql());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sL(r,this.compiler,t,this.onLoadEndListener).pipe(oc(()=>{this.childrenLoaders.delete(r)})),s=new Yl(o,()=>new kt).pipe(Ql());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sL(n,e,t,r){return ia(n.loadChildren()).pipe(ge(aL),Vt(i=>i instanceof Kb||Array.isArray(i)?pe(i):ct(e.compileModuleAsync(i))),ge(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Nc,[],{optional:!0,self:!0}).flat()),{routes:s.map(GC),injector:o}}))}function TK(n){return n&&typeof n=="object"&&"default"in n}function aL(n){return TK(n)?n.default:n}var z_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(SK),providedIn:"root"})}return n})(),SK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KC=new J(""),QC=new J("");function cL(n,e,t){let r=n.get(QC),i=n.get($t);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),AK(n))),{onViewTransitionCreated:c}=r;return c&&mn(n,()=>c({transition:a,from:e,to:t})),s})}function AK(n){return new Promise(e=>{Ly({read:()=>setTimeout(e)},{injector:n})})}var YC=new J(""),$_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new kt;transitionAbortSubject=new kt;configLoader=z(j_);environmentInjector=z(cn);destroyRef=z(vc);urlSerializer=z(Rc);rootContexts=z(kc);location=z(Xs);inputBindingEnabled=z(Nf,{optional:!0})!==null;titleStrategy=z(WC);options=z(Oc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z(z_);createViewTransition=z(KC,{optional:!0});navigationErrorHandler=z(YC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new D_(i)),r=i=>this.events.next(new x_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Ft(null),this.transitions.pipe(Pn(r=>r!==null),kn(r=>{let i=!1,o=!1;return pe(r).pipe(kn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ir.SupersededByNewNavigation),Wn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new Ki(s.id,this.urlSerializer.serialize(s.rawUrl),u,Bu.IgnoredSameUrlNavigation)),s.resolve(!1),Wn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return pe(s).pipe(kn(u=>(this.events.next(new ra(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Wn:Promise.resolve(u))),wK(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=he($({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Tf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:h,source:_,restoredState:I,extras:T}=s,k=new ra(u,this.urlSerializer.serialize(h),_,I);this.events.next(k);let L=W2(this.rootComponentType).snapshot;return this.currentTransition=r=he($({},s),{targetSnapshot:L,urlAfterRedirects:h,extras:he($({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,pe(r)}else{let u="";return this.events.next(new Ki(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Bu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Wn}}),sn(s=>{let a=new C_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ge(s=>(this.currentTransition=r=he($({},s),{guards:BW(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),JW(this.environmentInjector,s=>this.events.next(s)),sn(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw F_(this.urlSerializer,s.guardsResult);let a=new T_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Pn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",ir.GuardRejected),!1)),DC(s=>{if(s.guards.canActivateChecks.length!==0)return pe(s).pipe(sn(a=>{let c=new S_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),kn(a=>{let c=!1;return pe(a).pipe(EK(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ir.NoDataFromResolver)}}))}),sn(a=>{let c=new A_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),DC(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(sn(h=>{c.component=h}),ge(()=>{})));for(let h of c.children)u.push(...a(h));return u};return ic(a(s.targetSnapshot.root)).pipe(Bs(null),Rn(1))}),DC(()=>this.afterPreactivation()),kn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ct(c).pipe(ge(()=>r)):pe(r)}),ge(s=>{let a=NW(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he($({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),sn(()=>{this.events.next(new Sf)}),UW(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Rn(1),sn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),iu(this.transitionAbortSubject.pipe(sn(s=>{throw s}))),oc(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",ir.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),In(s=>{if(this.destroyed)return r.resolve(!1),Wn;if(o=!0,X2(s))this.events.next(new Gi(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),VW(s)?this.events.next(new $u(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ju(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=mn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Hu){let{message:u,cancellationCode:h}=F_(this.urlSerializer,c);this.events.next(new Gi(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new $u(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Wn}))}))}cancelNavigationTransition(t,r,i){let o=new Gi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DK(n){return n!==E_}var lL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(xK),providedIn:"root"})}return n})(),U_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xK=(()=>{class n extends U_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uL=(()=>{class n{urlSerializer=z(Rc);options=z(Oc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(Xs);urlHandlingStrategy=z(z_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Wi?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=W2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>z(MK),providedIn:"root"})}return n})(),MK=(()=>{class n extends uL{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ra?this.updateStateMemento():t instanceof Ki?this.commitTransition(r):t instanceof Tf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Gi&&(t.code===ir.GuardRejected||t.code===ir.NoDataFromResolver)?this.restoreHistory(r):t instanceof ju?this.restoreHistory(r,!0):t instanceof Lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=$($({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H_(n,e){n.events.pipe(Pn(t=>t instanceof Lr||t instanceof Gi||t instanceof ju||t instanceof Ki),ge(t=>t instanceof Lr||t instanceof Ki?0:(t instanceof Gi?t.code===ir.Redirect||t.code===ir.SupersededByNewNavigation:!1)?2:1),Pn(t=>t!==2),Rn(1)).subscribe(()=>{e()})}var PK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},It=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(Yb);stateManager=z(uL);options=z(Oc,{optional:!0})||{};pendingTasks=z(Ui);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z($_);urlSerializer=z(Rc);location=z(Xs);urlHandlingStrategy=z(z_);_events=new kt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(lL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(Nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(Nf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Gi&&r.code!==ir.Redirect&&r.code!==ir.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lr)this.navigated=!0;else if(r instanceof $u){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DK(i.source)},s);this.scheduleNavigation(a,E_,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}OK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),E_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(GC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let _;try{let I=i?i.snapshot:this.routerState.snapshot.root;_=$2(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),_=this.currentUrlTree.root}return H2(_,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=na(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,E_,null,r)}navigate(t,r={skipLocationChange:!1}){return kK(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},PK):r===!1?i=$({},RK):i=r,na(t))return C2(this.currentUrlTree,t,i);let o=this.parseUrl(t);return C2(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((_,I)=>{a=_,c=I});let h=this.pendingTasks.add();return H_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(_=>Promise.reject(_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kK(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}function OK(n){return!(n instanceof Sf)&&!(n instanceof $u)}var or=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kt;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(na(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:EO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:na(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(te(It),te(On),yb("tabindex"),te(ko),te(mr),te(ai))};static \u0275dir=mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ic("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Zs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Zs],replaceUrl:[2,"replaceUrl","replaceUrl",Zs],routerLink:"routerLink"},features:[gr]})}return n})();var Ff=class{};var dL=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(t=>t instanceof Lr),Pi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Pu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ct(i).pipe(tu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let o=i.pipe(Vt(s=>s===null?pe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ct([o,s]).pipe(tu())}else return o})}static \u0275fac=function(r){return new(r||n)(de(It),de(cn),de(Ff),de(j_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hL=new J(""),VK=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ki&&t.code===Bu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){rN()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function ZC(n,...e){return bn([{provide:Nc,multi:!0,useValue:n},[],{provide:On,useFactory:fL,deps:[It]},{provide:Qs,multi:!0,useFactory:pL},e.map(t=>t.\u0275providers)])}function fL(n){return n.routerState.root}function Vf(n,e){return{\u0275kind:n,\u0275providers:e}}function pL(){let n=z(Tt);return e=>{let t=n.get(er);if(e!==t.components[0])return;let r=n.get(It),i=n.get(gL);n.get(XC)===1&&r.initialNavigation(),n.get(_L,null,Ue.Optional)?.setUpPreloading(),n.get(hL,null,Ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gL=new J("",{factory:()=>new kt}),XC=new J("",{providedIn:"root",factory:()=>1});function mL(){let n=[{provide:XC,useValue:0},Zb(()=>{let e=z(Tt);return e.get(sC,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(It),o=e.get(gL);H_(i,()=>{r(!0)}),e.get($_).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))})];return Vf(2,n)}function yL(){let n=[Zb(()=>{z(It).setUpLocationChangeListener()}),{provide:XC,useValue:2}];return Vf(3,n)}var _L=new J("");function vL(n){return Vf(0,[{provide:_L,useExisting:dL},{provide:Ff,useExisting:n}])}function wL(){return Vf(8,[HC,{provide:Nf,useExisting:HC}])}function EL(n){ji("NgRouterViewTransitions");let e=[{provide:KC,useValue:cL},{provide:QC,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return Vf(9,e)}var IL=[Xs,{provide:Rc,useClass:ta},It,kc,{provide:On,useFactory:fL,deps:[It]},j_,[]],wr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[IL,[],{provide:Nc,multi:!0,useValue:t},[],r?.errorHandler?{provide:YC,useValue:r.errorHandler}:[],{provide:Oc,useValue:r||{}},r?.useHash?BK():jK(),UK(),r?.preloadingStrategy?vL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?zK(r):[],r?.bindToComponentInputs?wL().\u0275providers:[],r?.enableViewTransitions?EL().\u0275providers:[],$K()]}}static forChild(t){return{ngModule:n,providers:[{provide:Nc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Mr({})}return n})();function UK(){return{provide:hL,useFactory:()=>{let n=z(ZN),e=z(Oe),t=z(Oc),r=z($_),i=z(Rc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new VK(i,r,n,e,t)}}}function BK(){return{provide:ai,useClass:lC}}function jK(){return{provide:ai,useClass:e_}}function zK(n){return[n.initialNavigation==="disabled"?yL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?mL().\u0275providers:[]]}var JC=new J("");function $K(){return[{provide:JC,useFactory:pL},{provide:Qs,multi:!0,useExisting:JC}]}var bL=()=>{};var SL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},q_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=o>>2,_=(o&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,s||(I=64)),r.push(t[h],t[_],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||_==null)throw new tT;let I=o<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),_!==64){let k=u<<6&192|_;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qK=function(n){let e=SL(n);return q_.encodeByteArray(e,!0)},Bf=function(n){return qK(n).replace(/\./g,"")},G_=function(n){try{return q_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GK=()=>rT().__FIREBASE_DEFAULTS__,WK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&G_(n[1]);return e&&JSON.parse(e)},W_=()=>{try{return bL()||GK()||WK()||KK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iT=n=>{var e,t;return(t=(e=W_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},K_=n=>{let e=iT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oT=()=>{var n;return(n=W_())===null||n===void 0?void 0:n.config},sT=n=>{var e;return(e=W_())===null||e===void 0?void 0:e[`_${n}`]};var Lc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function di(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Wu(n){return S(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Q_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bf(JSON.stringify(t)),Bf(JSON.stringify(s)),""].join(".")}var Uf={};function QK(){let n={prod:[],emulator:[]};for(let e of Object.keys(Uf))Uf[e]?n.emulator.push(e):n.prod.push(e);return n}function YK(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var CL=!1;function Ku(n,e){if(typeof window>"u"||typeof document>"u"||!di(window.location.host)||Uf[n]===e||Uf[n]||CL)return;Uf[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",o=QK().prod.length>0;function s(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,T){I.setAttribute("width","24"),I.setAttribute("id",T),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function u(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{CL=!0,s()},I}function h(I,T){I.setAttribute("id",T),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function _(){let I=YK(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),L=t("learnmore"),N=document.getElementById(L)||document.createElement("a"),q=t("preprendIcon"),ee=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let K=I.element;a(K),h(N,L);let fe=u();c(ee,q),K.append(ee,k,N,fe),document.body.appendChild(K)}o?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function JK(){var n;let e=(n=W_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ML(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PL(){let n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RL(){return!JK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jf(){try{return typeof indexedDB=="object"}catch{return!1}}function kL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var ZK="FirebaseError",zn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ui.prototype.create)}},ui=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?XK(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new zn(i,a,r)}};function XK(n,e){return n.replace(eQ,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eQ=/\{\$([^}]+)}/g;function OL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TL(o)&&TL(s)){if(!Qi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TL(n){return n!==null&&typeof n=="object"}function Qu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ju(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function NL(n,e){let t=new nT(n,e);return t.subscribe.bind(t)}var nT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tQ(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=eT),i.error===void 0&&(i.error=eT),i.complete===void 0&&(i.complete=eT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tQ(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eT(){}var l0e=4*60*60*1e3;function bt(n){return n&&n._delegate?n._delegate:n}var Cn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fc="[DEFAULT]";var aT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Lc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rQ(e))try{this.getOrInitializeService({instanceIdentifier:Fc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fc){return this.instances.has(e)}getOptions(e=Fc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nQ(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fc){return this.component?this.component.multipleInstances?e:Fc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nQ(n){return n===Fc?void 0:n}function rQ(n){return n.instantiationMode==="EAGER"}var Y_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var iQ=[],He=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(He||{}),oQ={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},sQ=He.INFO,aQ={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},cQ=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=aQ[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yi=class{constructor(e){this.name=e,this._logLevel=sQ,this._logHandler=cQ,this._userLogHandler=null,iQ.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}};var lQ=(n,e)=>e.some(t=>n instanceof t),LL,FL;function uQ(){return LL||(LL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dQ(){return FL||(FL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VL=new WeakMap,lT=new WeakMap,UL=new WeakMap,cT=new WeakMap,dT=new WeakMap;function hQ(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ji(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&VL.set(t,n)}).catch(()=>{}),dT.set(e,n),e}function fQ(n){if(lT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});lT.set(n,e)}var uT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ji(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BL(n){uT=n(uT)}function pQ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(J_(this),e,...t);return UL.set(r,e.sort?e.sort():[e]),Ji(r)}:dQ().includes(n)?function(...e){return n.apply(J_(this),e),Ji(VL.get(this))}:function(...e){return Ji(n.apply(J_(this),e))}}function gQ(n){return typeof n=="function"?pQ(n):(n instanceof IDBTransaction&&fQ(n),lQ(n,uQ())?new Proxy(n,uT):n)}function Ji(n){if(n instanceof IDBRequest)return hQ(n);if(cT.has(n))return cT.get(n);let e=gQ(n);return e!==n&&(cT.set(n,e),dT.set(e,n)),e}var J_=n=>dT.get(n);function Z_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ji(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ji(s.result),c.oldVersion,c.newVersion,Ji(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var mQ=["get","getKey","getAll","getAllKeys","count"],yQ=["put","add","delete","clear"],hT=new Map;function jL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hT.get(e))return hT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=yQ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mQ.includes(t)))return;let o=function(s,...a){return S(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return hT.set(e,o),o}BL(n=>he($({},n),{get:(e,t,r)=>jL(e,t)||n.get(e,t,r),has:(e,t)=>!!jL(e,t)||n.has(e,t)}));var pT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_Q(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function _Q(n){let e=n.getComponent();return e?.type==="VERSION"}var gT="@firebase/app",zL="0.13.2";var Fo=new Yi("@firebase/app"),vQ="@firebase/app-compat",wQ="@firebase/analytics-compat",EQ="@firebase/analytics",IQ="@firebase/app-check-compat",bQ="@firebase/app-check",CQ="@firebase/auth",TQ="@firebase/auth-compat",SQ="@firebase/database",AQ="@firebase/data-connect",DQ="@firebase/database-compat",xQ="@firebase/functions",MQ="@firebase/functions-compat",PQ="@firebase/installations",RQ="@firebase/installations-compat",kQ="@firebase/messaging",OQ="@firebase/messaging-compat",NQ="@firebase/performance",LQ="@firebase/performance-compat",FQ="@firebase/remote-config",VQ="@firebase/remote-config-compat",UQ="@firebase/storage",BQ="@firebase/storage-compat",jQ="@firebase/firestore",zQ="@firebase/ai",$Q="@firebase/firestore-compat",HQ="firebase",qQ="11.10.0";var mT="[DEFAULT]",GQ={[gT]:"fire-core",[vQ]:"fire-core-compat",[EQ]:"fire-analytics",[wQ]:"fire-analytics-compat",[bQ]:"fire-app-check",[IQ]:"fire-app-check-compat",[CQ]:"fire-auth",[TQ]:"fire-auth-compat",[SQ]:"fire-rtdb",[AQ]:"fire-data-connect",[DQ]:"fire-rtdb-compat",[xQ]:"fire-fn",[MQ]:"fire-fn-compat",[PQ]:"fire-iid",[RQ]:"fire-iid-compat",[kQ]:"fire-fcm",[OQ]:"fire-fcm-compat",[NQ]:"fire-perf",[LQ]:"fire-perf-compat",[FQ]:"fire-rc",[VQ]:"fire-rc-compat",[UQ]:"fire-gcs",[BQ]:"fire-gcs-compat",[jQ]:"fire-fst",[$Q]:"fire-fst-compat",[zQ]:"fire-vertex","fire-js":"fire-js",[HQ]:"fire-js-all"};var zf=new Map,WQ=new Map,yT=new Map;function $L(n,e){try{n.container.addComponent(e)}catch(t){Fo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Er(n){let e=n.name;if(yT.has(e))return Fo.debug(`There were multiple attempts to register component ${e}.`),!1;yT.set(e,n);for(let t of zf.values())$L(t,n);for(let t of WQ.values())$L(t,n);return!0}function sa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tn(n){return n==null?!1:n.settings!==void 0}var KQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new ui("app","Firebase",KQ);var _T=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}};var Zi=qQ;function ET(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw oa.create("bad-app-name",{appName:String(i)});if(t||(t=oT()),!t)throw oa.create("no-options");let o=zf.get(i);if(o){if(Qi(t,o.options)&&Qi(r,o.config))return o;throw oa.create("duplicate-app",{appName:i})}let s=new Y_(i);for(let c of yT.values())s.addComponent(c);let a=new _T(t,r,s);return zf.set(i,a),a}function Vo(n=mT){let e=zf.get(n);if(!e&&n===mT&&oT())return ET();if(!e)throw oa.create("no-app",{appName:n});return e}function X_(){return Array.from(zf.values())}function wt(n,e,t){var r;let i=(r=GQ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fo.warn(a.join(" "));return}Er(new Cn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var QQ="firebase-heartbeat-database",YQ=1,$f="firebase-heartbeat-store",fT=null;function WL(){return fT||(fT=Z_(QQ,YQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($f)}catch(t){console.warn(t)}}}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),fT}function JQ(n){return S(this,null,function*(){try{let t=(yield WL()).transaction($f),r=yield t.objectStore($f).get(KL(n));return yield t.done,r}catch(e){if(e instanceof zn)Fo.warn(e.message);else{let t=oa.create("idb-get",{originalErrorMessage:e?.message});Fo.warn(t.message)}}})}function HL(n,e){return S(this,null,function*(){try{let r=(yield WL()).transaction($f,"readwrite");yield r.objectStore($f).put(e,KL(n)),yield r.done}catch(t){if(t instanceof zn)Fo.warn(t.message);else{let r=oa.create("idb-set",{originalErrorMessage:t?.message});Fo.warn(r.message)}}})}function KL(n){return`${n.name}!${n.options.appId}`}var ZQ=1024,XQ=30,vT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=qL();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>XQ){let s=tY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fo.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=qL(),{heartbeatsToSend:r,unsentEntries:i}=eY(this._heartbeatsCache.heartbeats),o=Bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Fo.warn(t),""}})}};function qL(){return new Date().toISOString().substring(0,10)}function eY(n,e=ZQ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GL(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),GL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return jf()?kL().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield JQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function GL(n){return Bf(JSON.stringify({version:2,heartbeats:n})).length}function tY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function nY(n){Er(new Cn("platform-logger",e=>new pT(e),"PRIVATE")),Er(new Cn("heartbeat",e=>new vT(e),"PRIVATE")),wt(gT,zL,n),wt(gT,zL,"esm2017"),wt("fire-js","")}nY("");var rY="firebase",iY="11.10.0";wt(rY,iY,"app");function IT(n){n===void 0&&(Ty(IT),n=z(Tt));let e=n.get(of);return t=>new Ee(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Xi=new qs("ANGULARFIRE2_VERSION");function Uc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var aa=(n,e)=>{let t=e?[e]:X_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zu=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Zu||{}),QL=rC()&&typeof Zone<"u"?Zu.WARN:Zu.SILENT;var ev=class{zone;delegate;constructor(e,t=kE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},eo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=z(Oe);this.outsideAngular=t.runOutsideAngular(()=>new ev(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ev(typeof Zone>"u"?void 0:Zone.current,RE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YL=!1;function oY(n,e){!YL&&(QL>Zu.SILENT||rC())&&(YL=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),QL>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function sY(n){let e=z(Oe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Vc(n){let e=z(Oe,{optional:!0});return e?e.run(()=>n()):n()}var aY=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),mn(t,()=>Vc(()=>n.apply(void 0,r)))),dt=(n,e,t)=>(t||=e?Zu.WARN:Zu.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=z(eo),s=z(of),a=z(cn)}catch{return oY(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Vc(()=>s.add())),i[u]=aY(i[u],r,a));let c=sY(()=>n.apply(this,i));return e?c instanceof Ee?c.pipe(Us(o.outsideAngular),Vs(o.insideAngular),IT(a)):c instanceof Promise?Vc(()=>new Promise((u,h)=>{s.run(()=>c).then(_=>mn(a,()=>Vc(()=>u(_))),_=>mn(a,()=>Vc(()=>h(_))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Vc(()=>c):c instanceof Ee?c.pipe(Us(o.outsideAngular),Vs(o.insideAngular)):Vc(()=>c)});var hi=class{constructor(e){return e}},Uo=class{constructor(){return X_()}};function cY(n){return n&&n.length===1?n[0]:new hi(Vo())}var bT=new J("angularfire2._apps"),lY={provide:hi,useFactory:cY,deps:[[new ln,bT]]},uY={provide:Uo,deps:[[new ln,bT]]};function dY(n){return(e,t)=>{let r=t.get(Bi);wt("angularfire",Xi.full,"core"),wt("angularfire",Xi.full,"app"),wt("angular",NN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new hi(i)}}function JL(n,...e){return bn([lY,uY,{provide:bT,useFactory:dY(n),multi:!0,deps:[Oe,Tt,eo,...e]}])}var ZL=dt(ET,!0);var hY=new Map,fY={activated:!1,tokenObservers:[]},pY={initialized:!1,enabled:!1};function fi(n){return hY.get(n)||Object.assign({},fY)}function nF(){return pY}var gY="https://content-firebaseappcheck.googleapis.com/v1";var mY="exchangeDebugToken",XL={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},gwe=24*60*60*1e3;var ST=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new Lc,this.pending.promise.catch(t=>{}),yield yY(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Lc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function yY(n){return new Promise(e=>{setTimeout(e,n)})}var _Y={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ca=new ui("appCheck","AppCheck",_Y);function rF(n){if(!fi(n).activated)throw ca.create("use-before-activation",{appName:n.name})}function iF(r,i){return S(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let T=yield s.getHeartbeatsHeader();T&&(o["X-Firebase-Client"]=T)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(T){throw ca.create("fetch-network-error",{originalErrorMessage:T?.message})}if(c.status!==200)throw ca.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(T){throw ca.create("fetch-parse-error",{originalErrorMessage:T?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ca.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let _=Number(h[1])*1e3,I=Date.now();return{token:u.token,expireTimeMillis:I+_,issuedAtTimeMillis:I}})}function oF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${gY}/projects/${t}/apps/${r}:${mY}?key=${i}`,body:{debug_token:e}}}var vY="firebase-app-check-database",wY=1,AT="firebase-app-check-store";var tv=null;function EY(){return tv||(tv=new Promise((n,e)=>{try{let t=indexedDB.open(vY,wY);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ca.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(AT,{keyPath:"compositeKey"})}}}catch(t){e(ca.create("storage-open",{originalErrorMessage:t?.message}))}}),tv)}function IY(n,e){return bY(CY(n),e)}function bY(n,e){return S(this,null,function*(){let r=(yield EY()).transaction(AT,"readwrite"),o=r.objectStore(AT).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(ca.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function CY(n){return`${n.options.appId}-${n.name}`}var Hf=new Yi("@firebase/app-check");function CT(n,e){return jf()?IY(n,e).catch(t=>{Hf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sF(){return nF().enabled}function aF(){return S(this,null,function*(){let n=nF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var TY={error:"UNKNOWN_ERROR"};function SY(n){return q_.encodeString(JSON.stringify(n),!1)}function DT(n,e=!1,t=!1){return S(this,null,function*(){let r=n.app;rF(r);let i=fi(r),o=i.token,s;if(o&&!qf(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(qf(u)?o=u:yield CT(r,void 0))}if(!e&&o&&qf(o))return{token:o.token};let a=!1;if(sF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iF(oF(r,yield aF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield CT(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hf.warn(u.message):t&&Hf.error(u),TT(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield fi(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hf.warn(u.message):t&&Hf.error(u),s=u}let c;return o?s?qf(o)?c={token:o.token,internalError:s}:c=TT(s):(c={token:o.token},i.token=o,yield CT(r,o)):c=TT(s),a&&MY(r,c),c})}function AY(n){return S(this,null,function*(){let e=n.app;rF(e);let{provider:t}=fi(e);if(sF()){let r=yield aF(),{token:i}=yield iF(oF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function DY(n,e,t,r){let{app:i}=n,o=fi(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&qf(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),eF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eF(n))}function cF(n,e){let t=fi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eF(n){let{app:e}=n,t=fi(e),r=t.tokenRefresher;r||(r=xY(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xY(n){let{app:e}=n;return new ST(()=>S(null,null,function*(){let t=fi(e),r;if(t.token?r=yield DT(n,!0):r=yield DT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XL.RETRIAL_MIN_WAIT,XL.RETRIAL_MAX_WAIT)}function MY(n,e){let t=fi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qf(n){return n.expireTimeMillis-Date.now()>0}function TT(n){return{token:SY(TY),error:n}}var xT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fi(this.app);for(let t of e)cF(this.app,t.next);return Promise.resolve()}};function PY(n,e){return new xT(n,e)}function RY(n){return{getToken:e=>DT(n,e),getLimitedUseToken:()=>AY(n),addTokenListener:e=>DY(n,"INTERNAL",e),removeTokenListener:e=>cF(n.app,e)}}var kY="@firebase/app-check",OY="0.10.1";var NY="app-check",tF="app-check-internal";function LY(){Er(new Cn(NY,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return PY(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tF).initialize()})),Er(new Cn(tF,n=>{let e=n.getProvider("app-check").getImmediate();return RY(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),wt(kY,OY)}LY();var FY="app-check";var la=class{constructor(){return aa(FY)}};var VY=["localhost","0.0.0.0","127.0.0.1"],Dwe=typeof window<"u"&&VY.includes(window.location.hostname);var lF=()=>{};var uF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UY=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},dF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=o>>2,_=(o&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,s||(I=64)),r.push(t[h],t[_],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UY(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||_==null)throw new PT;let I=o<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),_!==64){let k=u<<6&192|_;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},PT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BY=function(n){let e=uF(n);return dF.encodeByteArray(e,!0)},kT=function(n){return BY(n).replace(/\./g,"")},nv=function(n){try{return dF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jY=()=>hF().__FIREBASE_DEFAULTS__,zY=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$Y=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&nv(n[1]);return e&&JSON.parse(e)},fF=()=>{try{return lF()||jY()||zY()||$Y()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var pF=n=>fF()?.[`_${n}`];function Gf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function HY(){let n=fF()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _F(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vF(){return!HY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OT(){try{return typeof indexedDB=="object"}catch{return!1}}function wF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var qY="FirebaseError",Fr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qY,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}},Bo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?GY(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Fr(i,a,r)}};function GY(n,e){return n.replace(WY,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WY=/\{\$([^}]+)}/g;function NT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function EF(n,e){let t=new RT(n,e);return t.subscribe.bind(t)}var RT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");KY(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=MT),i.error===void 0&&(i.error=MT),i.complete===void 0&&(i.complete=MT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KY(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function MT(){}var kwe=4*60*60*1e3;function ua(n){return n&&n._delegate?n._delegate:n}var pi=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var QY=[],qe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(qe||{}),YY={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},JY=qe.INFO,ZY={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},XY=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ZY[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},da=class{constructor(e){this.name=e,this._logLevel=JY,this._logHandler=XY,this._userLogHandler=null,QY.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}};var FT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eJ(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function eJ(n){return n.getComponent()?.type==="VERSION"}var VT="@firebase/app",IF="0.14.4";var zo=new da("@firebase/app"),tJ="@firebase/app-compat",nJ="@firebase/analytics-compat",rJ="@firebase/analytics",iJ="@firebase/app-check-compat",oJ="@firebase/app-check",sJ="@firebase/auth",aJ="@firebase/auth-compat",cJ="@firebase/database",lJ="@firebase/data-connect",uJ="@firebase/database-compat",dJ="@firebase/functions",hJ="@firebase/functions-compat",fJ="@firebase/installations",pJ="@firebase/installations-compat",gJ="@firebase/messaging",mJ="@firebase/messaging-compat",yJ="@firebase/performance",_J="@firebase/performance-compat",vJ="@firebase/remote-config",wJ="@firebase/remote-config-compat",EJ="@firebase/storage",IJ="@firebase/storage-compat",bJ="@firebase/firestore",CJ="@firebase/ai",TJ="@firebase/firestore-compat",SJ="firebase",AJ="12.4.0";var DJ={[VT]:"fire-core",[tJ]:"fire-core-compat",[rJ]:"fire-analytics",[nJ]:"fire-analytics-compat",[oJ]:"fire-app-check",[iJ]:"fire-app-check-compat",[sJ]:"fire-auth",[aJ]:"fire-auth-compat",[cJ]:"fire-rtdb",[lJ]:"fire-data-connect",[uJ]:"fire-rtdb-compat",[dJ]:"fire-fn",[hJ]:"fire-fn-compat",[fJ]:"fire-iid",[pJ]:"fire-iid-compat",[gJ]:"fire-fcm",[mJ]:"fire-fcm-compat",[yJ]:"fire-perf",[_J]:"fire-perf-compat",[vJ]:"fire-rc",[wJ]:"fire-rc-compat",[EJ]:"fire-gcs",[IJ]:"fire-gcs-compat",[bJ]:"fire-fst",[TJ]:"fire-fst-compat",[CJ]:"fire-vertex","fire-js":"fire-js",[SJ]:"fire-js-all"};var xJ=new Map,MJ=new Map,bF=new Map;function CF(n,e){try{n.container.addComponent(e)}catch(t){zo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ha(n){let e=n.name;if(bF.has(e))return zo.debug(`There were multiple attempts to register component ${e}.`),!1;bF.set(e,n);for(let t of xJ.values())CF(t,n);for(let t of MJ.values())CF(t,n);return!0}function $o(n){return n==null?!1:n.settings!==void 0}var PJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jT=new Bo("app","Firebase",PJ);var Xu=AJ;function jo(n,e,t){let r=DJ[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zo.warn(s.join(" "));return}ha(new pi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var RJ="firebase-heartbeat-database",kJ=1,Wf="firebase-heartbeat-store",LT=null;function xF(){return LT||(LT=Z_(RJ,kJ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw jT.create("idb-open",{originalErrorMessage:n.message})})),LT}function OJ(n){return S(this,null,function*(){try{let t=(yield xF()).transaction(Wf),r=yield t.objectStore(Wf).get(MF(n));return yield t.done,r}catch(e){if(e instanceof Fr)zo.warn(e.message);else{let t=jT.create("idb-get",{originalErrorMessage:e?.message});zo.warn(t.message)}}})}function TF(n,e){return S(this,null,function*(){try{let r=(yield xF()).transaction(Wf,"readwrite");yield r.objectStore(Wf).put(e,MF(n)),yield r.done}catch(t){if(t instanceof Fr)zo.warn(t.message);else{let r=jT.create("idb-set",{originalErrorMessage:t?.message});zo.warn(r.message)}}})}function MF(n){return`${n.name}!${n.options.appId}`}var NJ=1024,LJ=30,UT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new BT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=SF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>LJ){let i=VJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zo.warn(e)}})}getHeartbeatsHeader(){return S(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=SF(),{heartbeatsToSend:t,unsentEntries:r}=FJ(this._heartbeatsCache.heartbeats),i=kT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return zo.warn(e),""}})}};function SF(){return new Date().toISOString().substring(0,10)}function FJ(n,e=NJ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),AF(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),AF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var BT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return OT()?wF().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield OJ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return TF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return TF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function AF(n){return kT(JSON.stringify({version:2,heartbeats:n})).length}function VJ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function UJ(n){ha(new pi("platform-logger",e=>new FT(e),"PRIVATE")),ha(new pi("heartbeat",e=>new UT(e),"PRIVATE")),jo(VT,IF,n),jo(VT,IF,"esm2020"),jo("fire-js","")}UJ("");function VF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var UF=VF,BF=new Bo("auth","Firebase",VF());var sv=new da("@firebase/auth");function HJ(n,...e){sv.logLevel<=qe.WARN&&sv.warn(`Auth (${Xu}): ${n}`,...e)}function iv(n,...e){sv.logLevel<=qe.ERROR&&sv.error(`Auth (${Xu}): ${n}`,...e)}function PF(n,...e){throw XT(n,...e)}function ZT(n,...e){return XT(n,...e)}function jF(n,e,t){let r=he($({},UF()),{[e]:t});return new Bo("auth","Firebase",r).create(e,{appName:n.name})}function ov(n){return jF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BF.create(n,...e)}function at(n,e,...t){if(!n)throw XT(e,...t)}function Kf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw iv(e),new Error(e)}function av(n,e){n||Kf(e)}function qJ(){return RF()==="http:"||RF()==="https:"}function RF(){return typeof self<"u"&&self.location?.protocol||null}function GJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qJ()||yF()||"connection"in navigator)?navigator.onLine:!0}function WJ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var zc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,av(t>e,"Short delay should be less than long delay!"),this.isMobile=gF()||_F()}get(){return GJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function KJ(n,e){av(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var cv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JJ=new zc(3e4,6e4);function zF(n,e){return n.tenantId&&!e.tenantId?he($({},e),{tenantId:n.tenantId}):e}function fv(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return $F(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let _=NT($({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=$({method:e,headers:I},u);return mF()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&Gf(n.emulatorConfig.host)&&(T.credentials="include"),cv.fetch()(yield HF(n,n.config.apiHost,t,_),T)}))})}function $F(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=$($({},QJ),e);try{let i=new HT(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw rv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw rv(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jF(n,h,u);PF(n,h)}}catch(i){if(i instanceof Fr)throw i;PF(n,"network-request-failed",{message:String(i)})}})}function HF(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?KJ(n.config,i):`${n.config.apiScheme}://${i}`;return YJ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var HT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ZT(this.auth,"network-request-failed")),JJ.get())})}};function rv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ZT(n,e,r);return i.customData._tokenResponse=t,i}function ZJ(n,e){return S(this,null,function*(){return fv(n,"POST","/v1/accounts:delete",e)})}function lv(n,e){return S(this,null,function*(){return fv(n,"POST","/v1/accounts:lookup",e)})}function Qf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qF(n,e=!1){return S(this,null,function*(){let t=ua(n),r=yield t.getIdToken(e),i=GF(r);at(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Qf(zT(i.auth_time)),issuedAtTime:Qf(zT(i.iat)),expirationTime:Qf(zT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function zT(n){return Number(n)*1e3}function GF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return iv("JWT malformed, contained fewer than 3 sections"),null;try{let i=nv(t);return i?JSON.parse(i):(iv("Failed to decode base64 JWT payload"),null)}catch(i){return iv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kF(n){let e=GF(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qT(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Fr&&XJ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function XJ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var GT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qf(this.lastLoginAt),this.creationTime=Qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function uv(n){return S(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield qT(n,lv(e,{idToken:t}));at(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?KF(i.providerUserInfo):[],s=eZ(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function WF(n){return S(this,null,function*(){let e=ua(n);yield uv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function eZ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Vh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function tZ(n,e){return S(this,null,function*(){let t=yield $F(n,{},()=>S(null,null,function*(){let r=NT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield HF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Gf(n.emulatorConfig.host)&&(c.credentials="include"),cv.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function nZ(n,e){return S(this,null,function*(){return fv(n,"POST","/v2/accounts:revokeToken",zF(n,e))})}var Yf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){at(e.length!==0,"internal-error");let t=kF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield tZ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(at(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(at(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(at(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kf("not implemented")}};function fa(n,e){at(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bc=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Vh(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield qT(this,this.stsTokenManager.getToken(this.auth,e));return at(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return qF(this,e)}reload(){return WF(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(he($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield uv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if($o(this.auth.app))return Promise.reject(ov(this.auth));let e=yield this.getIdToken();return yield qT(this,ZJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return he($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:_,emailVerified:I,isAnonymous:T,providerData:k,stsTokenManager:L}=t;at(_&&L,e,"internal-error");let N=Yf.fromJSON(this.name,L);at(typeof _=="string",e,"internal-error"),fa(r,e.name),fa(i,e.name),at(typeof I=="boolean",e,"internal-error"),at(typeof T=="boolean",e,"internal-error"),fa(o,e.name),fa(s,e.name),fa(a,e.name),fa(c,e.name),fa(u,e.name),fa(h,e.name);let q=new n({uid:_,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:T,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:u,lastLoginAt:h});return k&&Array.isArray(k)&&(q.providerData=k.map(ee=>$({},ee))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new Yf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield uv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];at(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Yf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var OF=new Map;function jc(n){av(n instanceof Function,"Expected a class definition");let e=OF.get(n);return e?(av(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OF.set(n,e),e)}var rZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),WT=rZ;function $T(n,e,t){return`firebase:${n}:${e}:${t}`}var dv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$T(this.userKey,i.apiKey,o),this.fullPersistenceKey=$T("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield lv(this.auth,{idToken:e}).catch(()=>{});return t?Bc._fromGetAccountInfoResponse(this.auth,t,e):null}return Bc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(jc(WT),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||jc(WT),s=$T(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let _;if(typeof h=="string"){let I=yield lv(e,{idToken:h}).catch(()=>{});if(!I)break;_=yield Bc._fromGetAccountInfoResponse(e,I,h)}else _=Bc._fromJSON(e,h);u!==o&&(a=_),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function NF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iZ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lZ(e))return"Blackberry";if(uZ(e))return"Webos";if(oZ(e))return"Safari";if((e.includes("chrome/")||sZ(e))&&!e.includes("edge/"))return"Chrome";if(cZ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function iZ(n=Ir()){return/firefox\//i.test(n)}function oZ(n=Ir()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sZ(n=Ir()){return/crios\//i.test(n)}function aZ(n=Ir()){return/iemobile/i.test(n)}function cZ(n=Ir()){return/android/i.test(n)}function lZ(n=Ir()){return/blackberry/i.test(n)}function uZ(n=Ir()){return/webos/i.test(n)}function QF(n,e=[]){let t;switch(n){case"Browser":t=NF(Ir());break;case"Worker":t=`${NF(Ir())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xu}/${r}`}var KT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dZ(t){return S(this,arguments,function*(n,e={}){return fv(n,"GET","/v2/passwordPolicy",zF(n,e))})}var hZ=6,QT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hZ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var YT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new KT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jc(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield dv.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield lv(this,{idToken:e}),r=yield Bc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){if($o(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield uv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=WJ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if($o(this.app))return Promise.reject(ov(this));let t=e?ua(e):null;return t&&at(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return $o(this.app)?Promise.reject(ov(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return $o(this.app)?Promise.reject(ov(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(jc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield dZ(this),t=new QT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield nZ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&jc(e)||this._popupRedirectResolver;at(t,this,"argument-error"),this.redirectPersistenceManager=yield dv.create(this,[jc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return S(this,null,function*(){if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&HJ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function fZ(n){return ua(n)}var hv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EF(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pZ={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gZ(n){pZ=n}function mZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function yZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(jc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function eS(n,e,t,r){return ua(n).onAuthStateChanged(e,t,r)}var lEe=mZ("rcb"),uEe=new zc(3e4,6e4);var dEe=new zc(2e3,1e4);var hEe=10*60*1e3;var fEe=new zc(3e4,6e4);var pEe=new zc(5e3,15e3);var gEe=encodeURIComponent("fac");var LF="@firebase/auth",FF="1.11.0";var JT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _Z(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vZ(n){ha(new pi("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;at(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QF(n)},u=new YT(r,i,o,c);return yZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ha(new pi("auth-internal",e=>{let t=fZ(e.getProvider("auth").getImmediate());return(r=>new JT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jo(LF,FF,_Z(n)),jo(LF,FF,"esm2020")}var wZ=5*60,mEe=pF("authIdTokenMaxAge")||wZ;function EZ(){return document.getElementsByTagName("head")?.[0]??document}gZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ZT("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",EZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vZ("Browser");function YF(n){return new Ee(function(e){var t=eS(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function hV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fV=hV,pV=new ui("auth","Firebase",hV());var vv=new Yi("@firebase/auth");function CZ(n,...e){vv.logLevel<=He.WARN&&vv.warn(`Auth (${Zi}): ${n}`,...e)}function gv(n,...e){vv.logLevel<=He.ERROR&&vv.error(`Auth (${Zi}): ${n}`,...e)}function Vr(n,...e){throw bS(n,...e)}function gi(n,...e){return bS(n,...e)}function IS(n,e,t){let r=Object.assign(Object.assign({},fV()),{[e]:t});return new ui("auth","Firebase",r).create(e,{appName:n.name})}function Go(n){return IS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TZ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(n,"argument-error"),IS(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pV.create(n,...e)}function Ie(n,e,...t){if(!n)throw bS(e,...t)}function Ho(n){let e="INTERNAL ASSERTION FAILED: "+n;throw gv(e),new Error(e)}function Wo(n,e){n||Ho(e)}function rS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SZ(){return JF()==="http:"||JF()==="https:"}function JF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function AZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SZ()||xL()||"connection"in navigator)?navigator.onLine:!0}function DZ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var $c=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wo(t>e,"Short delay should be less than long delay!"),this.isMobile=AL()||ML()}get(){return AZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function CS(n,e){Wo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ho("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ho("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ho("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PZ=new $c(3e4,6e4);function ma(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ko(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return gV(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let _=Qu(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=Object.assign({method:e,headers:I},u);return DL()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&di(n.emulatorConfig.host)&&(T.credentials="include"),wv.fetch()(yield mV(n,n.config.apiHost,t,_),T)}))})}function gV(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xZ),e);try{let i=new iS(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw pv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw pv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw pv(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw IS(n,h,u);Vr(n,h)}}catch(i){if(i instanceof zn)throw i;Vr(n,"network-request-failed",{message:String(i)})}})}function op(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){let u=yield Ko(n,e,t,r,i);return"mfaPendingCredential"in u&&Vr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function mV(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?CS(n.config,i):`${n.config.apiScheme}://${i}`;return MZ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function RZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var iS=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),PZ.get())})}};function pv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=gi(n,e,r);return i.customData._tokenResponse=t,i}function ZF(n){return n!==void 0&&n.enterprise!==void 0}var oS=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RZ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function kZ(n,e){return S(this,null,function*(){return Ko(n,"GET","/v2/recaptchaConfig",ma(n,e))})}function OZ(n,e){return S(this,null,function*(){return Ko(n,"POST","/v1/accounts:delete",e)})}function Ev(n,e){return S(this,null,function*(){return Ko(n,"POST","/v1/accounts:lookup",e)})}function Xf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function TS(n,e=!1){return S(this,null,function*(){let t=bt(n),r=yield t.getIdToken(e),i=SS(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xf(tS(i.auth_time)),issuedAtTime:Xf(tS(i.iat)),expirationTime:Xf(tS(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function tS(n){return Number(n)*1e3}function SS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gv("JWT malformed, contained fewer than 3 sections"),null;try{let i=G_(t);return i?JSON.parse(i):(gv("Failed to decode base64 JWT payload"),null)}catch(i){return gv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XF(n){let e=SS(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function td(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof zn&&NZ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function NZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var sS=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var tp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xf(this.lastLoginAt),this.creationTime=Xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Iv(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield td(n,Ev(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?yV(o.providerUserInfo):[],a=LZ(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=c?u:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)})}function AS(n){return S(this,null,function*(){let e=bt(n);yield Iv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LZ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yV(n){return n.map(e=>{var{providerId:t}=e,r=um(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FZ(n,e){return S(this,null,function*(){let t=yield gV(n,{},()=>S(null,null,function*(){let r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield mV(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&di(n.emulatorConfig.host)&&(c.credentials="include"),wv.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function VZ(n,e){return S(this,null,function*(){return Ko(n,"POST","/v2/accounts:revokeToken",ma(n,e))})}var ep=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=XF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield FZ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ho("not implemented")}};function pa(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ga=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tp(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield td(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return TS(this,e)}reload(){return AS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Iv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Tn(this.auth.app))return Promise.reject(Go(this.auth));let e=yield this.getIdToken();return yield td(this,OZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,h;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,L=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ee=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:fe,isAnonymous:ze,providerData:me,stsTokenManager:x}=t;Ie(K&&x,e,"internal-error");let E=ep.fromJSON(this.name,x);Ie(typeof K=="string",e,"internal-error"),pa(_,e.name),pa(I,e.name),Ie(typeof fe=="boolean",e,"internal-error"),Ie(typeof ze=="boolean",e,"internal-error"),pa(T,e.name),pa(k,e.name),pa(L,e.name),pa(N,e.name),pa(q,e.name),pa(ee,e.name);let C=new n({uid:K,auth:e,email:I,emailVerified:fe,displayName:_,isAnonymous:ze,photoURL:k,phoneNumber:T,tenantId:L,stsTokenManager:E,createdAt:q,lastLoginAt:ee});return me&&Array.isArray(me)&&(C.providerData=me.map(D=>Object.assign({},D))),N&&(C._redirectEventId=N),C}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new ep;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Iv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yV(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ep;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new tp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var eV=new Map;function qo(n){Wo(n instanceof Function,"Expected a class definition");let e=eV.get(n);return e?(Wo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eV.set(n,e),e)}var UZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),aS=UZ;function mv(n,e,t){return`firebase:${n}:${e}:${t}`}var bv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=mv(this.userKey,i.apiKey,o),this.fullPersistenceKey=mv("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ev(this.auth,{idToken:e}).catch(()=>{});return t?ga._fromGetAccountInfoResponse(this.auth,t,e):null}return ga._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(qo(aS),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||qo(aS),s=mv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let _;if(typeof h=="string"){let I=yield Ev(e,{idToken:h}).catch(()=>{});if(!I)break;_=yield ga._fromGetAccountInfoResponse(e,I,h)}else _=ga._fromJSON(e,h);u!==o&&(a=_),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function tV(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_V(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bV(e))return"Blackberry";if(CV(e))return"Webos";if(vV(e))return"Safari";if((e.includes("chrome/")||wV(e))&&!e.includes("edge/"))return"Chrome";if(IV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _V(n=yn()){return/firefox\//i.test(n)}function vV(n=yn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wV(n=yn()){return/crios\//i.test(n)}function EV(n=yn()){return/iemobile/i.test(n)}function IV(n=yn()){return/android/i.test(n)}function bV(n=yn()){return/blackberry/i.test(n)}function CV(n=yn()){return/webos/i.test(n)}function DS(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BZ(n=yn()){var e;return DS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jZ(){return PL()&&document.documentMode===10}function TV(n=yn()){return DS(n)||IV(n)||CV(n)||bV(n)||/windows phone/i.test(n)||EV(n)}function SV(n,e=[]){let t;switch(n){case"Browser":t=tV(yn());break;case"Worker":t=`${tV(yn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zi}/${r}`}var cS=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function zZ(t){return S(this,arguments,function*(n,e={}){return Ko(n,"GET","/v2/passwordPolicy",ma(n,e))})}var $Z=6,lS=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:$Z,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var uS=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new cS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qo(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield bv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield Ev(this,{idToken:e}),r=yield ga._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield Iv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=DZ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Tn(this.app))return Promise.reject(Go(this));let t=e?bt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Tn(this.app)?Promise.reject(Go(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tn(this.app)?Promise.reject(Go(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(qo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield zZ(this),t=new lS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ui("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield VZ(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&qo(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=yield bv.create(this,[qo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&CZ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ya(n){return bt(n)}var Cv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=NL(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var kv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HZ(n){kv=n}function AV(n){return kv.loadJS(n)}function qZ(){return kv.recaptchaEnterpriseScript}function GZ(){return kv.gapiScript}function DV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var dS=class{constructor(){this.enterprise=new hS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},hS=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var WZ="recaptcha-enterprise",xV="NO_RECAPTCHA",fS=class{constructor(e){this.type=WZ,this.auth=ya(e)}verify(e="verify",t=!1){return S(this,null,function*(){function r(o){return S(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>S(null,null,function*(){kZ(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new oS(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;ZF(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(xV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dS().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&ZF(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=qZ();c.length!==0&&(c+=a),AV(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Zf(n,e,t,r=!1,i=!1){return S(this,null,function*(){let o=new fS(n),s;if(i)s=xV;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function pS(n,e,t,r,i){return S(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Zf(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>S(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Zf(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Zf(n,e,t);return r(n,a).catch(c=>S(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Zf(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Zf(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function xS(n,e){let t=sa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qi(o,e??{}))return i;Vr(i,"already-initialized")}return t.initialize({options:e})}function KZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function MS(n,e,t){let r=ya(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=MV(e),{host:s,port:a}=QZ(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Qi(u,r.config.emulator)&&Qi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,di(s)?(Wu(`${o}//${s}${c}`),Ku("Auth",!0)):i||YZ()}function MV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QZ(n){let e=MV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:nV(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:nV(s)}}}function nV(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function YZ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var nd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ho("not implemented")}_getIdTokenResponse(e){return Ho("not implemented")}_linkToIdToken(e,t){return Ho("not implemented")}_getReauthenticationResolver(e){return Ho("not implemented")}};function JZ(n,e){return S(this,null,function*(){return Ko(n,"POST","/v1/accounts:signUp",e)})}function ZZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithPassword",ma(n,e))})}function XZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithEmailLink",ma(n,e))})}function eX(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithEmailLink",ma(n,e))})}var np=class n extends nd{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pS(e,t,"signInWithPassword",ZZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XZ(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pS(e,r,"signUpPassword",JZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eX(e,{idToken:t,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ed(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithIdp",ma(n,e))})}var tX="http://localhost",Tv=class n extends nd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=um(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return ed(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ed(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ed(e,t)}buildRequest(){let e={requestUri:tX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qu(t)}return e}};function nX(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rX(n){let e=Yu(Ju(n)).link,t=e?Yu(Ju(e)).deep_link_id:null,r=Yu(Ju(n)).deep_link_id;return(r?Yu(Ju(r)).link:null)||r||t||e||n}var Sv=class n{constructor(e){var t,r,i,o,s,a;let c=Yu(Ju(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,_=nX((i=c.mode)!==null&&i!==void 0?i:null);Ie(u&&h&&_,"argument-error"),this.apiKey=u,this.operation=_,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=rX(e);try{return new n(t)}catch{return null}}};var PV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return np._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Sv.parseLink(r);return Ie(i,"argument-error"),np._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Av=class extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var PS=(()=>{class n extends Av{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Tv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function iX(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signUp",ma(n,e))})}var rd=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return S(this,null,function*(){let o=yield ga._fromIdTokenResponse(e,r,i),s=rV(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return S(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=rV(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function rV(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var gS=class n extends zn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function RV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gS._fromErrorAndOperation(n,o,e,r):o})}function oX(n,e,t=!1){return S(this,null,function*(){let r=yield td(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return rd._forOperation(n,"link",r)})}function sX(n,e,t=!1){return S(this,null,function*(){let{auth:r}=n;if(Tn(r.app))return Promise.reject(Go(r));let i="reauthenticate";try{let o=yield td(n,RV(r,i,e,n),t);Ie(o.idToken,r,"internal-error");let s=SS(o.idToken);Ie(s,r,"internal-error");let{sub:a}=s;return Ie(n.uid===a,r,"user-mismatch"),rd._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Vr(r,"user-mismatch"),o}})}function kV(n,e,t=!1){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(Go(n));let r="signIn",i=yield RV(n,r,e),o=yield rd._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function RS(n,e){return S(this,null,function*(){return kV(ya(n),e)})}function OV(n){return S(this,null,function*(){let e=ya(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function kS(n,e,t){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(Go(n));let r=ya(n),s=yield pS(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iX,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&OV(n),c}),a=yield rd._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function OS(n,e,t){return Tn(n.app)?Promise.reject(Go(n)):RS(bt(n),PV.credential(e,t)).catch(r=>S(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&OV(n),r}))}function aX(n,e){return S(this,null,function*(){return Ko(n,"POST","/v1/accounts:update",e)})}function NS(r,i){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=bt(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield td(o,aX(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let u=o.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=o.displayName,u.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function LS(n,e,t,r){return bt(n).onIdTokenChanged(e,t,r)}function FS(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function VS(n){return bt(n).signOut()}var Dv="__sak";var xv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dv,"1"),this.storage.removeItem(Dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cX=1e3,lX=10,uX=(()=>{class n extends xv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);jZ()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,lX):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},cX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return S(this,null,function*(){yield Mi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return S(this,null,function*(){let r=yield Mi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return S(this,null,function*(){yield Mi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),NV=uX;var dX=(()=>{class n extends xv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),US=dX;function hX(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var fX=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>S(this,null,function*(){return h(r.origin,s)})),u=yield hX(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function BS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var mS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return S(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=BS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(_){let I=_;if(I.data.eventId===u)switch(I.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(I.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function to(){return window}function pX(n){to().location.href=n}function LV(){return typeof to().WorkerGlobalScope<"u"&&typeof to().importScripts=="function"}function gX(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function mX(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yX(){return LV()?self:null}var FV="firebaseLocalStorageDb",_X=1,Mv="firebaseLocalStorage",VV="fbase_key",Hc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ov(n,e){return n.transaction([Mv],e?"readwrite":"readonly").objectStore(Mv)}function vX(){let n=indexedDB.deleteDatabase(FV);return new Hc(n).toPromise()}function yS(){let n=indexedDB.open(FV,_X);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Mv,{keyPath:VV})}catch(i){t(i)}}),n.addEventListener("success",()=>S(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Mv)?e(r):(r.close(),yield vX(),e(yield yS()))}))})}function iV(n,e,t){return S(this,null,function*(){let r=Ov(n,!0).put({[VV]:e,value:t});return new Hc(r).toPromise()})}function wX(n,e){return S(this,null,function*(){let t=Ov(n,!1).get(e),r=yield new Hc(t).toPromise();return r===void 0?null:r.value})}function oV(n,e){let t=Ov(n,!0).delete(e);return new Hc(t).toPromise()}var EX=800,IX=3,bX=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield yS(),this.db)})}_withRetries(t){return S(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>IX)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return LV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=fX._getInstance(yX()),this.receiver._subscribe("keyChanged",(t,r)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,r;if(this.activeServiceWorker=yield gX(),!this.activeServiceWorker)return;this.sender=new mS(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||mX()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield yS();return yield iV(t,Dv,"1"),yield oV(t,Dv),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>iV(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let r=yield this._withRetries(i=>wX(i,t));return this.localCache[t]=r,r})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>oV(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(o=>{let s=Ov(o,!1).getAll();return new Hc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),EX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),UV=bX;var obe=DV("rcb"),sbe=new $c(3e4,6e4);function BV(n,e){return e?qo(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ip=class extends nd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ed(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ed(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ed(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function CX(n){return kV(n.auth,new ip(n),n.bypassAuthState)}function TX(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),sX(t,new ip(n),n.bypassAuthState)}function SX(n){return S(this,null,function*(){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),oX(t,new ip(n),n.bypassAuthState)})}var Pv=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CX;case"linkViaPopup":case"linkViaRedirect":return SX;case"reauthViaPopup":case"reauthViaRedirect":return TX;default:Vr(this.auth,"internal-error")}}resolve(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var AX=new $c(2e3,1e4);function jS(n,e,t){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(gi(n,"operation-not-supported-in-this-environment"));let r=ya(n);TZ(n,e,rp);let i=BV(r,t);return new DX(r,"signInViaPopup",e,i).executeNotNull()})}var DX=(()=>{class n extends Pv{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return Ie(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){Wo(this.filter.length===1,"Popup operations only handle one event");let t=BS();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,AX.get())};t()}}n.currentPopupAction=null;return n})(),xX="pendingRedirect",yv=new Map,_S=class n extends Pv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return S(this,null,function*(){let e=yv.get(this.auth._key());if(!e){try{let r=(yield MX(this.resolver,this.auth))?yield Mi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yv.set(this.auth._key(),e)}return this.bypassAuthState||yv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return Mi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Mi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function MX(n,e){return S(this,null,function*(){let t=kX(e),r=RX(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function PX(n,e){yv.set(n._key(),e)}function RX(n){return qo(n._redirectPersistence)}function kX(n){return mv(xX,n.config.apiKey,n.name)}function OX(n,e,t=!1){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(Go(n));let r=ya(n),i=BV(r,e),s=yield new _S(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var NX=10*60*1e3,vS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NX&&this.cachedEventUids.clear(),this.cachedEventUids.has(sV(e))}saveEventToCache(e){this.cachedEventUids.add(sV(e)),this.lastProcessedEventTime=Date.now()}};function sV(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jV(n);default:return!1}}function FX(t){return S(this,arguments,function*(n,e={}){return Ko(n,"GET","/v1/projects",e)})}var VX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UX=/^https?/;function BX(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield FX(n);for(let t of e)try{if(jX(t))return}catch{}Vr(n,"unauthorized-domain")})}function jX(n){let e=rS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!UX.test(t))return!1;if(VX.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zX=new $c(3e4,6e4);function aV(){let n=to().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $X(n){return new Promise((e,t)=>{var r,i,o;function s(){aV(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aV(),t(gi(n,"network-request-failed"))},timeout:zX.get()})}if(!((i=(r=to().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=to().gapi)===null||o===void 0)&&o.load)s();else{let a=DV("iframefcb");return to()[a]=()=>{gapi.load?s():t(gi(n,"network-request-failed"))},AV(`${GZ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw _v=null,e})}var _v=null;function HX(n){return _v=_v||$X(n),_v}var qX=new $c(5e3,15e3),GX="__/auth/iframe",WX="emulator/auth/iframe",KX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YX(n){let e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?CS(e,WX):`https://${n.config.authDomain}/${GX}`,r={apiKey:e.apiKey,appName:n.name,v:Zi},i=QX.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Qu(r).slice(1)}`}function JX(n){return S(this,null,function*(){let e=yield HX(n),t=to().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:YX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KX,dontclear:!0},r=>new Promise((i,o)=>S(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=gi(n,"network-request-failed"),a=to().setTimeout(()=>{o(s)},qX.get());function c(){to().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var ZX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XX=500,eee=600,tee="_blank",nee="http://localhost",Rv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ree(n,e,t,r=XX,i=eee){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},ZX),{width:r.toString(),height:i.toString(),top:o,left:s}),u=yn().toLowerCase();t&&(a=wV(u)?tee:t),_V(u)&&(e=e||nee,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[T,k])=>`${I}${T}=${k},`,"");if(BZ(u)&&a!=="_self")return iee(e||"",a),new Rv(null);let _=window.open(e||"",a,h);Ie(_,n,"popup-blocked");try{_.focus()}catch{}return new Rv(_)}function iee(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var oee="__/auth/handler",see="emulator/auth/handler",aee=encodeURIComponent("fac");function cV(n,e,t,r,i,o){return S(this,null,function*(){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Zi,eventId:i};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OL(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,_]of Object.entries(o||{}))s[h]=_}if(e instanceof Av){let h=e.getScopes().filter(_=>_!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),u=c?`#${aee}=${encodeURIComponent(c)}`:"";return`${cee(n)}?${Qu(a).slice(1)}${u}`})}function cee({config:n}){return n.emulator?CS(n,see):`https://${n.authDomain}/${oee}`}var nS="webStorageSupport",wS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=US,this._completeRedirectFn=OX,this._overrideRedirectResult=PX}_openPopup(e,t,r,i){return S(this,null,function*(){var o;Wo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield cV(e,t,r,rS(),i);return ree(e,s,BS())})}_openRedirect(e,t,r,i){return S(this,null,function*(){yield this._originValidation(e);let o=yield cV(e,t,r,rS(),i);return pX(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Wo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return S(this,null,function*(){let t=yield JX(e),r=new vS(e);return t.register("authEvent",i=>(Ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nS,{type:nS},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[nS];s!==void 0&&t(!!s),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TV()||vV()||DS()}},zV=wS;var lV="@firebase/auth",uV="1.10.8";var ES=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lee(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uee(n){Er(new Cn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ie(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SV(n)},u=new uS(r,i,o,c);return KZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Er(new Cn("auth-internal",e=>{let t=ya(e.getProvider("auth").getImmediate());return(r=>new ES(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wt(lV,uV,lee(n)),wt(lV,uV,"esm2017")}var dee=5*60,hee=sT("authIdTokenMaxAge")||dee,dV=null,fee=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hee)return;let i=t?.token;dV!==i&&(dV=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function zS(n=Vo()){let e=sa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=xS(n,{popupRedirectResolver:zV,persistence:[UV,NV,US]}),r=sT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=fee(o.toString());FS(t,s,()=>s(t.currentUser)),LS(t,a=>s(a))}}let i=iT("auth");return i&&MS(t,`http://${i}`),t}function pee(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=gi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",pee().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uee("Browser");var $V="auth",qc=class{constructor(e){return e}},Gc=class{constructor(){return aa($V)}};var $S=new J("angularfire2.auth-instances");function tte(n,e){let t=Uc($V,n,e);return t&&new qc(t)}function nte(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qc(r)}}var rte={provide:Gc,deps:[[new ln,$S]]},ite={provide:qc,useFactory:tte,deps:[[new ln,$S],hi]};function HV(n,...e){return wt("angularfire",Xi.full,"auth"),bn([ite,rte,{provide:$S,useFactory:nte(n),multi:!0,deps:[Oe,Tt,eo,Uo,[new ln,la],...e]}])}var qV=dt(YF,!0);var GV=dt(kS,!0,2);var WV=dt(zS,!0);var KV=dt(OS,!0,2);var QV=dt(jS,!0,2);var YV=dt(VS,!0,2);var JV=dt(NS,!0,2);var ZV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XV={};var Qo,HS;(function(){var n;function e(x,E){function C(){}C.prototype=E.prototype,x.F=E.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(D,A,R){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,E,C){C||(C=0);let D=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;A<16;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=x.g[0],C=x.g[1],A=x.g[2];let R=x.g[3],b;b=E+(R^C&(A^R))+D[0]+3614090360&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[1]+3905402710&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[5]+1200080426&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[9]+2336552879&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[13]+4254626195&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^R&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[6]+3225465664&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[10]+38016083&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[14]+3275163606&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[2]+4243563512&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^R)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[8]+2272392833&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[4]+1272893353&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[0]+3936430074&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[12]+3873151461&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~R))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[7]+1126891415&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[3]+2399980690&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[15]+4264355552&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[11]+3174756917&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+E&4294967295,x.g[1]=x.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}r.prototype.v=function(x,E){E===void 0&&(E=x.length);let C=E-this.blockSize,D=this.C,A=this.h,R=0;for(;R<E;){if(A==0)for(;R<=C;)i(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<E;)if(D[A++]=x.charCodeAt(R++),A==this.blockSize){i(this,D),A=0;break}}else for(;R<E;)if(D[A++]=x[R++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var E=1;E<x.length-8;++E)x[E]=0;E=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=E&255,E/=256;for(this.v(x),x=Array(16),E=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)x[E++]=this.g[C]>>>D&255;return x};function o(x,E){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=E(x)}function s(x,E){this.h=E;let C=[],D=!0;for(let A=x.length-1;A>=0;A--){let R=x[A]|0;D&&R==E||(C[A]=R,D=!1)}this.g=C}var a={};function c(x){return-128<=x&&x<128?o(x,function(E){return new s([E|0],E<0?-1:0)}):new s([x|0],x<0?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return _;if(x<0)return N(u(-x));let E=[],C=1;for(let D=0;x>=C;D++)E[D]=x/C|0,C*=4294967296;return new s(E,0)}function h(x,E){if(x.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(x.charAt(0)=="-")return N(h(x.substring(1),E));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');let C=u(Math.pow(E,8)),D=_;for(let R=0;R<x.length;R+=8){var A=Math.min(8,x.length-R);let b=parseInt(x.substring(R,R+A),E);A<8?(A=u(Math.pow(E,A)),D=D.j(A).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var _=c(0),I=c(1),T=c(16777216);n=s.prototype,n.m=function(){if(L(this))return-N(this).m();let x=0,E=1;for(let C=0;C<this.g.length;C++){let D=this.i(C);x+=(D>=0?D:4294967296+D)*E,E*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(L(this))return"-"+N(this).toString(x);let E=u(Math.pow(x,6));var C=this;let D="";for(;;){let A=fe(C,E).g;C=q(C,A.j(E));let R=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=A,k(C))return R+D;for(;R.length<6;)R="0"+R;D=R+D}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let E=0;E<x.g.length;E++)if(x.g[E]!=0)return!1;return!0}function L(x){return x.h==-1}n.l=function(x){return x=q(this,x),L(x)?-1:k(x)?0:1};function N(x){let E=x.g.length,C=[];for(let D=0;D<E;D++)C[D]=~x.g[D];return new s(C,~x.h).add(I)}n.abs=function(){return L(this)?N(this):this},n.add=function(x){let E=Math.max(this.g.length,x.g.length),C=[],D=0;for(let A=0;A<=E;A++){let R=D+(this.i(A)&65535)+(x.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);D=b>>>16,R&=65535,b&=65535,C[A]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function q(x,E){return x.add(N(E))}n.j=function(x){if(k(this)||k(x))return _;if(L(this))return L(x)?N(this).j(N(x)):N(N(this).j(x));if(L(x))return N(this.j(N(x)));if(this.l(T)<0&&x.l(T)<0)return u(this.m()*x.m());let E=this.g.length+x.g.length,C=[];for(var D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let A=0;A<x.g.length;A++){let R=this.i(D)>>>16,b=this.i(D)&65535,Ct=x.i(A)>>>16,Hn=x.i(A)&65535;C[2*D+2*A]+=b*Hn,ee(C,2*D+2*A),C[2*D+2*A+1]+=R*Hn,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=R*Ct,ee(C,2*D+2*A+2)}for(x=0;x<E;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=E;x<2*E;x++)C[x]=0;return new s(C,0)};function ee(x,E){for(;(x[E]&65535)!=x[E];)x[E+1]+=x[E]>>>16,x[E]&=65535,E++}function K(x,E){this.g=x,this.h=E}function fe(x,E){if(k(E))throw Error("division by zero");if(k(x))return new K(_,_);if(L(x))return E=fe(N(x),E),new K(N(E.g),N(E.h));if(L(E))return E=fe(x,N(E)),new K(N(E.g),E.h);if(x.g.length>30){if(L(x)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;D.l(x)<=0;)C=ze(C),D=ze(D);var A=me(C,1),R=me(D,1);for(D=me(D,2),C=me(C,2);!k(D);){var b=R.add(D);b.l(x)<=0&&(A=A.add(C),R=b),D=me(D,1),C=me(C,1)}return E=q(x,A.j(E)),new K(A,E)}for(A=_;x.l(E)>=0;){for(C=Math.max(1,Math.floor(x.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),R=u(C),b=R.j(E);L(b)||b.l(x)>0;)C-=D,R=u(C),b=R.j(E);k(R)&&(R=I),A=A.add(R),x=q(x,b)}return new K(A,x)}n.B=function(x){return fe(this,x).h},n.and=function(x){let E=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)&x.i(D);return new s(C,this.h&x.h)},n.or=function(x){let E=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)|x.i(D);return new s(C,this.h|x.h)},n.xor=function(x){let E=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)^x.i(D);return new s(C,this.h^x.h)};function ze(x){let E=x.g.length+1,C=[];for(let D=0;D<E;D++)C[D]=x.i(D)<<1|x.i(D-1)>>>31;return new s(C,x.h)}function me(x,E){let C=E>>5;E%=32;let D=x.g.length-C,A=[];for(let R=0;R<D;R++)A[R]=E>0?x.i(R+C)>>>E|x.i(R+C+1)<<32-E:x.i(R+C);return new s(A,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HS=XV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Qo=XV.Integer=s}).apply(typeof ZV<"u"?ZV:typeof self<"u"?self:typeof window<"u"?window:{});var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yo={};var qS,ste,id,GS,sp,Lv,WS,KS,QS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nv=="object"&&Nv];for(var y=0;y<d.length;++y){var w=d[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,y){if(y)e:{var w=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var F=d[P];if(!(F in w))break e;w=w[F]}d=d[d.length-1],P=w[d],y=y(P),y!=P&&y!=null&&e(w,d,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(y){var w=[],P;for(P in y)Object.prototype.hasOwnProperty.call(y,P)&&w.push([P,y[P]]);return w}});var o=o||{},s=this||self;function a(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,w){return d.call.apply(d.bind,arguments)}function u(d,y,w){return u=c,u.apply(null,arguments)}function h(d,y){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function _(d,y){function w(){}w.prototype=y.prototype,d.Z=y.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(P,F,U){for(var Z=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)Z[Te-2]=arguments[Te];return y.prototype[F].apply(P,Z)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){let y=d.length;if(y>0){let w=Array(y);for(let P=0;P<y;P++)w[P]=d[P];return w}return[]}function k(d,y){for(let P=1;P<arguments.length;P++){let F=arguments[P];var w=typeof F;if(w=w!="object"?w:F?Array.isArray(F)?"array":w:"null",w=="array"||w=="object"&&typeof F.length=="number"){w=d.length||0;let U=F.length||0;d.length=w+U;for(let Z=0;Z<U;Z++)d[w+Z]=F[Z]}else d.push(F)}}class L{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function N(d){s.setTimeout(()=>{throw d},0)}function q(){var d=x;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ee{constructor(){this.h=this.g=null}add(y,w){let P=K.get();P.set(y,w),this.h?this.h.next=P:this.g=P,this.h=P}}var K=new L(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,me=!1,x=new ee,E=()=>{let d=Promise.resolve(void 0);ze=()=>{d.then(C)}};function C(){for(var d;d=q();){try{d.h.call(d.g)}catch(w){N(w)}var y=K;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}me=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let w=()=>{};s.addEventListener("test",w,y),s.removeEventListener("test",w,y)}catch{}return d}();function b(d){return/^[\s\xa0]*$/.test(d)}function Ct(d,y){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}_(Ct,A),Ct.prototype.init=function(d,y){let w=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(w=="mouseover"?y=d.fromElement:w=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);let d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Hn="closure_listenable_"+(Math.random()*1e6|0),tE=0;function La(d,y,w,P,F){this.listener=d,this.proxy=null,this.src=y,this.type=w,this.capture=!!P,this.ha=F,this.key=++tE,this.da=this.fa=!1}function bi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ps(d,y,w){for(let P in d)y.call(w,d[P],P,d)}function vg(d,y){for(let w in d)y.call(void 0,d[w],w,d)}function wg(d){let y={};for(let w in d)y[w]=d[w];return y}let Hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xt(d,y){let w,P;for(let F=1;F<arguments.length;F++){P=arguments[F];for(w in P)d[w]=P[w];for(let U=0;U<Hr.length;U++)w=Hr[U],Object.prototype.hasOwnProperty.call(P,w)&&(d[w]=P[w])}}function _l(d){this.src=d,this.g={},this.h=0}_l.prototype.add=function(d,y,w,P,F){let U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);let Z=gh(d,y,P,F);return Z>-1?(y=d[Z],w||(y.fa=!1)):(y=new La(y,this.src,U,!!P,F),y.fa=w,d.push(y)),y};function mo(d,y){let w=y.type;if(w in d.g){var P=d.g[w],F=Array.prototype.indexOf.call(P,y,void 0),U;(U=F>=0)&&Array.prototype.splice.call(P,F,1),U&&(bi(y),d.g[w].length==0&&(delete d.g[w],d.h--))}}function gh(d,y,w,P){for(let F=0;F<d.length;++F){let U=d[F];if(!U.da&&U.listener==y&&U.capture==!!w&&U.ha==P)return F}return-1}var yo="closure_lm_"+(Math.random()*1e6|0),mh={};function Eg(d,y,w,P,F){if(P&&P.once)return wl(d,y,w,P,F);if(Array.isArray(y)){for(let U=0;U<y.length;U++)Eg(d,y[U],w,P,F);return null}return w=Cl(w),d&&d[Hn]?d.J(y,w,a(P)?!!P.capture:!!P,F):Fa(d,y,w,!1,P,F)}function Fa(d,y,w,P,F,U){if(!y)throw Error("Invalid event type");let Z=a(F)?!!F.capture:!!F,Te=bl(d);if(Te||(d[yo]=Te=new _l(d)),w=Te.add(y,w,P,Z,U),w.proxy)return w;if(P=vl(),w.proxy=P,P.src=d,P.listener=w,d.addEventListener)R||(F=Z),F===void 0&&(F=!1),d.addEventListener(y.toString(),P,F);else if(d.attachEvent)d.attachEvent(Il(y.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function vl(){function d(w){return y.call(d.src,d.listener,w)}let y=Ig;return d}function wl(d,y,w,P,F){if(Array.isArray(y)){for(let U=0;U<y.length;U++)wl(d,y[U],w,P,F);return null}return w=Cl(w),d&&d[Hn]?d.K(y,w,a(P)?!!P.capture:!!P,F):Fa(d,y,w,!0,P,F)}function El(d,y,w,P,F){if(Array.isArray(y))for(var U=0;U<y.length;U++)El(d,y[U],w,P,F);else P=a(P)?!!P.capture:!!P,w=Cl(w),d&&d[Hn]?(d=d.i,U=String(y).toString(),U in d.g&&(y=d.g[U],w=gh(y,w,P,F),w>-1&&(bi(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete d.g[U],d.h--)))):d&&(d=bl(d))&&(y=d.g[y.toString()],d=-1,y&&(d=gh(y,w,P,F)),(w=d>-1?y[d]:null)&&Va(w))}function Va(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Hn])mo(y.i,d);else{var w=d.type,P=d.proxy;y.removeEventListener?y.removeEventListener(w,P,d.capture):y.detachEvent?y.detachEvent(Il(w),P):y.addListener&&y.removeListener&&y.removeListener(P),(w=bl(y))?(mo(w,d),w.h==0&&(w.src=null,y[yo]=null)):bi(d)}}}function Il(d){return d in mh?mh[d]:mh[d]="on"+d}function Ig(d,y){if(d.da)d=!0;else{y=new Ct(y,this);let w=d.listener,P=d.ha||d.src;d.fa&&Va(d),d=w.call(P,y)}return d}function bl(d){return d=d[yo],d instanceof _l?d:null}var yh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cl(d){return typeof d=="function"?d:(d[yh]||(d[yh]=function(y){return d.handleEvent(y)}),d[yh])}function en(){D.call(this),this.i=new _l(this),this.M=this,this.G=null}_(en,D),en.prototype[Hn]=!0,en.prototype.removeEventListener=function(d,y,w,P){El(this,d,y,w,P)};function tn(d,y){var w,P=d.G;if(P)for(w=[];P;P=P.G)w.push(P);if(d=d.M,P=y.type||y,typeof y=="string")y=new A(y,d);else if(y instanceof A)y.target=y.target||d;else{var F=y;y=new A(P,d),Xt(y,F)}F=!0;let U,Z;if(w)for(Z=w.length-1;Z>=0;Z--)U=y.g=w[Z],F=Ua(U,P,!0,y)&&F;if(U=y.g=d,F=Ua(U,P,!0,y)&&F,F=Ua(U,P,!1,y)&&F,w)for(Z=0;Z<w.length;Z++)U=y.g=w[Z],F=Ua(U,P,!1,y)&&F}en.prototype.N=function(){if(en.Z.N.call(this),this.i){var d=this.i;for(let y in d.g){let w=d.g[y];for(let P=0;P<w.length;P++)bi(w[P]);delete d.g[y],d.h--}}this.G=null},en.prototype.J=function(d,y,w,P){return this.i.add(String(d),y,!1,w,P)},en.prototype.K=function(d,y,w,P){return this.i.add(String(d),y,!0,w,P)};function Ua(d,y,w,P){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let U=0;U<y.length;++U){let Z=y[U];if(Z&&!Z.da&&Z.capture==w){let Te=Z.listener,l=Z.ha||Z.src;Z.fa&&mo(d.i,Z),F=Te.call(l,P)!==!1&&F}}return F&&!P.defaultPrevented}function nE(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:s.setTimeout(d,y||0)}function Tl(d){d.g=nE(()=>{d.g=null,d.i&&(d.i=!1,Tl(d))},d.l);let y=d.h;d.h=null,d.m.apply(null,y)}class _h extends D{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(d){D.call(this),this.h=d,this.g={}}_(_o,D);var nn=[];function pn(d){ps(d.g,function(y,w){this.g.hasOwnProperty(w)&&Va(y)},d),d.g={}}_o.prototype.N=function(){_o.Z.N.call(this),pn(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=s.JSON.stringify,bg=s.JSON.parse,Cg=class{stringify(d){return s.JSON.stringify(d,void 0)}parse(d){return s.JSON.parse(d,void 0)}};function Tg(){}function ms(){}var ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sl(){A.call(this,"d")}_(Sl,A);function Ba(){A.call(this,"c")}_(Ba,A);var vo={},Sg=null;function _s(){return Sg=Sg||new en}vo.Ia="serverreachability";function vh(d){A.call(this,vo.Ia,d)}_(vh,A);function vs(d){let y=_s();tn(y,new vh(y))}vo.STAT_EVENT="statevent";function ws(d,y){A.call(this,vo.STAT_EVENT,d),this.stat=y}_(ws,A);function rn(d){let y=_s();tn(y,new ws(y,d))}vo.Ja="timingevent";function Al(d,y){A.call(this,vo.Ja,d),this.size=y}_(Al,A);function ar(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){d()},y)}function Es(){this.g=!0}Es.prototype.ua=function(){this.g=!1};function Dl(d,y,w,P,F,U){d.info(function(){if(d.g)if(U){var Z="",Te=U.split("&");for(let m=0;m<Te.length;m++){var l=Te[m].split("=");if(l.length>1){let v=l[0];l=l[1];let M=v.split("_");Z=M.length>=2&&M[1]=="type"?Z+(v+"="+l+"&"):Z+(v+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+P+") [attempt "+F+"]: "+y+`
`+w+`
`+Z})}function Ag(d,y,w,P,F,U,Z){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+F+"]: "+y+`
`+w+`
`+U+" "+Z})}function Tr(d,y,w,P){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+En(d,w)+(P?" "+P:"")})}function Dg(d,y){d.info(function(){return"TIMEOUT: "+y})}Es.prototype.info=function(){};function En(d,y){if(!d.g)return y;if(!y)return null;try{let U=JSON.parse(y);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var w=U[d];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var F=P[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<P.length;Z++)P[Z]=""}}}}return gs(U)}catch{return y}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Is={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bs;function wh(){}_(wh,Tg),wh.prototype.g=function(){return new XMLHttpRequest},bs=new wh;function za(d){return encodeURIComponent(String(d))}function Cs(d){var y=1;d=d.split(":");let w=[];for(;y>0&&d.length;)w.push(d.shift()),y--;return d.length&&w.push(d.join(":")),w}function Ci(d,y,w,P){this.j=d,this.i=y,this.l=w,this.S=P||1,this.V=new _o(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xg}function xg(){this.i=null,this.g="",this.h=!1}var $a={},xl={};function Ha(d,y,w){d.M=1,d.A=Ka(cr(y)),d.u=w,d.R=!0,qa(d,null)}function qa(d,y){d.F=Date.now(),Ts(d),d.B=cr(d.A);var w=d.B,P=d.S;Array.isArray(P)||(P=[String(P)]),Ng(w.i,"t",P),d.C=0,w=d.j.L,d.h=new xg,d.g=zl(d.j,w?y:null,!d.u),d.P>0&&(d.O=new _h(u(d.Y,d,d.g),d.P)),y=d.V,w=d.g,P=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(nn[0]=F.toString()),F=nn);for(let U=0;U<F.length;U++){let Z=Eg(w,F[U],P||y.handleEvent,!1,y.h||y);if(!Z)break;y.g[Z.key]=Z}y=d.J?wg(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),vs(),Dl(d.i,d.v,d.B,d.l,d.S,d.u)}Ci.prototype.ba=function(d){d=d.target;let y=this.O;y&&ot(d)==3?y.j():this.Y(d)},Ci.prototype.Y=function(d){try{if(d==this.g)e:{let Te=ot(this.g),l=this.g.ya(),m=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||zg(this.g)))){this.K||Te!=4||l==7||(l==8||m<=0?vs(3):vs(2)),Pl(this);var y=this.g.ca();this.X=y;var w=Ti(this);if(this.o=y==200,Ag(this.i,this.v,this.B,this.l,this.S,Te,y),this.o){if(this.U&&!this.L){t:{if(this.g){var P,F=this.g;if((P=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(P)){var U=P;break t}}U=null}if(d=U)Tr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,As(this,d);else{this.o=!1,this.m=3,rn(12),wo(this),Ss(this);break e}}if(this.R){d=!0;let v;for(;!this.K&&this.C<w.length;)if(v=Mg(this,w),v==xl){Te==4&&(this.m=4,rn(14),d=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(v==$a){this.m=4,rn(15),Tr(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Tr(this.i,this.l,v,null),As(this,v);if(Eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||w.length!=0||this.h.h||(this.m=1,rn(16),d=!1),this.o=this.o&&d,!d)Tr(this.i,this.l,w,"[Invalid Chunked Response]"),wo(this),Ss(this);else if(w.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ul(Z),Z.P=!0,rn(11))}}else Tr(this.i,this.l,w,null),As(this,w);Te==4&&wo(this),this.o&&!this.K&&(Te==4?Oh(this.j,this):(this.o=!1,Ts(this)))}else rE(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),wo(this),Ss(this)}}}catch{}finally{}};function Ti(d){if(!Eh(d))return d.g.la();let y=zg(d.g);if(y==="")return"";let w="",P=y.length,F=ot(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return wo(d),Ss(d),"";d.h.i=new s.TextDecoder}for(let U=0;U<P;U++)d.h.h=!0,w+=d.h.i.decode(y[U],{stream:!(F&&U==P-1)});return y.length=0,d.h.g+=w,d.C=0,d.h.g}function Eh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Mg(d,y){var w=d.C,P=y.indexOf(`
`,w);return P==-1?xl:(w=Number(y.substring(w,P)),isNaN(w)?$a:(P+=1,P+w>y.length?xl:(y=y.slice(P,P+w),d.C=P+w,y)))}Ci.prototype.cancel=function(){this.K=!0,wo(this)};function Ts(d){d.T=Date.now()+d.H,Ml(d,d.H)}function Ml(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ar(u(d.aa,d),y)}function Pl(d){d.D&&(s.clearTimeout(d.D),d.D=null)}Ci.prototype.aa=function(){this.D=null;let d=Date.now();d-this.T>=0?(Dg(this.i,this.B),this.M!=2&&(vs(),rn(17)),wo(this),this.m=2,Ss(this)):Ml(this,this.T-d)};function Ss(d){d.j.I==0||d.K||Oh(d.j,d)}function wo(d){Pl(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,pn(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function As(d,y){try{var w=d.j;if(w.I!=0&&(w.g==d||Ga(w.h,d))){if(!d.L&&Ga(w.h,d)&&w.I==3){try{var P=w.Ba.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var F=P;if(F[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Bl(w),Eo(w);else break e;Ns(w),rn(18)}}else w.xa=F[1],0<w.xa-w.K&&F[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ar(u(w.Va,w),6e3));Si(w.h)<=1&&w.ta&&(w.ta=void 0)}else Di(w,11)}else if((d.L||w.g==d)&&Bl(w),!b(y))for(F=w.Ba.g.parse(y),y=0;y<F.length;y++){let m=F[y],v=m[0];if(!(v<=w.K))if(w.K=v,m=m[1],w.I==2)if(m[0]=="c"){w.M=m[1],w.ba=m[2];let M=m[3];M!=null&&(w.ka=M,w.j.info("VER="+w.ka));let V=m[4];V!=null&&(w.za=V,w.j.info("SVER="+w.za));let B=m[5];B!=null&&typeof B=="number"&&B>0&&(P=1.5*B,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;let Y=d.g;if(Y){let rt=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rt){var U=P.h;U.g||rt.indexOf("spdy")==-1&&rt.indexOf("quic")==-1&&rt.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Ih(U,U.h),U.h=null))}if(P.G){let Lt=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Lt&&(P.wa=Lt,ft(P.J,P.G,Lt))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var Z=d;if(P.na=jl(P,P.L?P.ba:null,P.W),Z.L){bh(P.h,Z);var Te=Z,l=P.O;l&&(Te.H=l),Te.D&&(Pl(Te),Ts(Te)),P.g=Z}else Vl(P);w.i.length>0&&Gn(w)}else m[0]!="stop"&&m[0]!="close"||Di(w,7);else w.I==3&&(m[0]=="stop"||m[0]=="close"?m[0]=="stop"?Di(w,7):Fl(w):m[0]!="noop"&&w.l&&w.l.qa(m),w.A=0)}}vs(4)}catch{}}var Pg=class{constructor(d,y){this.g=d,this.map=y}};function Rl(d){this.l=d||10,s.PerformanceNavigationTiming?(d=s.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ds(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Si(d){return d.h?1:d.g?d.g.size:0}function Ga(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Ih(d,y){d.g?d.g.add(y):d.h=y}function bh(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Rl.prototype.cancel=function(){if(this.i=Ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ch(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(let w of d.g.values())y=y.concat(w.G);return y}return T(d.i)}var Th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sh(d,y){if(d){d=d.split("&");for(let w=0;w<d.length;w++){let P=d[w].indexOf("="),F,U=null;P>=0?(F=d[w].substring(0,P),U=d[w].substring(P+1)):F=d[w],y(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Sr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Sr?(this.l=d.l,xs(this,d.j),this.o=d.o,this.g=d.g,Wa(this,d.u),this.h=d.h,Ah(this,Lg(d.i)),this.m=d.m):d&&(y=String(d).match(Th))?(this.l=!1,xs(this,y[1]||"",!0),this.o=Qa(y[2]||""),this.g=Qa(y[3]||"",!0),Wa(this,y[4]),this.h=Qa(y[5]||"",!0),Ah(this,y[6]||"",!0),this.m=Qa(y[7]||"")):(this.l=!1,this.i=new Gr(null,this.l))}Sr.prototype.toString=function(){let d=[];var y=this.j;y&&d.push(lr(y,Ya,!0),":");var w=this.g;return(w||y=="file")&&(d.push("//"),(y=this.o)&&d.push(lr(y,Ya,!0),"@"),d.push(za(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(lr(w,w.charAt(0)=="/"?Rg:kl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",lr(w,Ol)),d.join("")},Sr.prototype.resolve=function(d){let y=cr(this),w=!!d.j;w?xs(y,d.j):w=!!d.o,w?y.o=d.o:w=!!d.g,w?y.g=d.g:w=d.u!=null;var P=d.h;if(w)Wa(y,d.u);else if(w=!!d.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var F=y.h.lastIndexOf("/");F!=-1&&(P=y.h.slice(0,F+1)+P)}if(F=P,F==".."||F==".")P="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){P=F.lastIndexOf("/",0)==0,F=F.split("/");let U=[];for(let Z=0;Z<F.length;){let Te=F[Z++];Te=="."?P&&Z==F.length&&U.push(""):Te==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),P&&Z==F.length&&U.push("")):(U.push(Te),P=!0)}P=U.join("/")}else P=F}return w?y.h=P:w=d.i.toString()!=="",w?Ah(y,Lg(d.i)):w=!!d.m,w&&(y.m=d.m),y};function cr(d){return new Sr(d)}function xs(d,y,w){d.j=w?Qa(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Wa(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Ah(d,y,w){y instanceof Gr?(d.i=y,Ja(d.i,d.l)):(w||(y=lr(y,yt)),d.i=new Gr(y,d.l))}function ft(d,y,w){d.i.set(y,w)}function Ka(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Qa(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function lr(d,y,w){return typeof d=="string"?(d=encodeURI(d).replace(y,qr),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function qr(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ya=/[#\/\?@]/g,kl=/[#\?:]/g,Rg=/[#\?]/g,yt=/[#\?@]/g,Ol=/#/g;function Gr(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ur(d){d.g||(d.g=new Map,d.h=0,d.i&&Sh(d.i,function(y,w){d.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=Gr.prototype,n.add=function(d,y){ur(this),this.i=null,d=Ms(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(y),this.h+=1,this};function kg(d,y){ur(d),y=Ms(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Dh(d,y){return ur(d),y=Ms(d,y),d.g.has(y)}n.forEach=function(d,y){ur(this),this.g.forEach(function(w,P){w.forEach(function(F){d.call(y,F,P,this)},this)},this)};function Og(d,y){ur(d);let w=[];if(typeof y=="string")Dh(d,y)&&(w=w.concat(d.g.get(Ms(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)w=w.concat(d[y]);return w}n.set=function(d,y){return ur(this),this.i=null,d=Ms(this,d),Dh(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=Og(this,d),d.length>0?String(d[0]):y):y};function Ng(d,y,w){kg(d,y),w.length>0&&(d.i=null,d.g.set(Ms(d,y),T(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],y=Array.from(this.g.keys());for(let P=0;P<y.length;P++){var w=y[P];let F=za(w);w=Og(this,w);for(let U=0;U<w.length;U++){let Z=F;w[U]!==""&&(Z+="="+za(w[U])),d.push(Z)}}return this.i=d.join("&")};function Lg(d){let y=new Gr;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Ms(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Ja(d,y){y&&!d.j&&(ur(d),d.i=null,d.g.forEach(function(w,P){let F=P.toLowerCase();P!=F&&(kg(this,P),Ng(this,F,w))},d)),d.j=y}function Ai(d,y){let w=new Es;if(s.Image){let P=new Image;P.onload=h(Wr,w,"TestLoadImage: loaded",!0,y,P),P.onerror=h(Wr,w,"TestLoadImage: error",!1,y,P),P.onabort=h(Wr,w,"TestLoadImage: abort",!1,y,P),P.ontimeout=h(Wr,w,"TestLoadImage: timeout",!1,y,P),s.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else y(!1)}function Fg(d,y){let w=new Es,P=new AbortController,F=setTimeout(()=>{P.abort(),Wr(w,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:P.signal}).then(U=>{clearTimeout(F),U.ok?Wr(w,"TestPingServer: ok",!0,y):Wr(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Wr(w,"TestPingServer: error",!1,y)})}function Wr(d,y,w,P,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),P(w)}catch{}}function Vg(){this.g=new Cg}function Kr(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Kr,Tg),Kr.prototype.g=function(){return new Nl(this.i,this.h)};function Nl(d,y){en.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Nl,en),n=Nl.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,qn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||s).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ug(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ug(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Za(this):qn(this),this.readyState==3&&Ug(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Za(this))},n.Na=function(d){this.g&&(this.response=d,Za(this))},n.ga=function(){this.g&&Za(this)};function Za(d){d.readyState=4,d.l=null,d.j=null,d.B=null,qn(d)}n.setRequestHeader=function(d,y){this.A.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=y.next();return d.join(`\r
`)};function qn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Bg(d){let y="";return ps(d,function(w,P){y+=P,y+=":",y+=w,y+=`\r
`}),y}function xh(d,y,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=Bg(w),typeof d=="string"?w!=null&&za(w):ft(d,y,w))}function pt(d){en.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(pt,en);var Ll=/^https?$/i,jg=["POST","PUT"];n=pt.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,y,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bs.g(),this.g.onreadystatechange=I(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(U){Ps(this,U);return}if(d=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var F in P)w.set(F,P[F]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(let U of P.keys())w.set(U,P.get(U));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(U=>U.toLowerCase()=="content-type"),F=s.FormData&&d instanceof s.FormData,!(Array.prototype.indexOf.call(jg,y,void 0)>=0)||P||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Z]of w)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Ps(this,U)}};function Ps(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,Rs(d),ks(d)}function Rs(d){d.A||(d.A=!0,tn(d,"complete"),tn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,tn(this,"complete"),tn(this,"abort"),ks(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),pt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mh(this):this.Xa())},n.Xa=function(){Mh(this)};function Mh(d){if(d.h&&typeof o<"u"){if(d.v&&ot(d)==4)setTimeout(d.Ca.bind(d),0);else if(tn(d,"readystatechange"),ot(d)==4){d.h=!1;try{let U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var P;if(P=U===0){let Z=String(d.D).match(Th)[1]||null;!Z&&s.self&&s.self.location&&(Z=s.self.location.protocol.slice(0,-1)),P=!Ll.test(Z?Z.toLowerCase():"")}w=P}if(w)tn(d,"complete"),tn(d,"success");else{d.o=6;try{var F=ot(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Rs(d)}}finally{ks(d)}}}}function ks(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);let w=d.g;d.g=null,y||tn(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ot(d){return d.g?d.g.readyState:0}n.ca=function(){try{return ot(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),bg(y)}};function zg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function rE(d){let y={};d=(d.g&&ot(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(b(d[P]))continue;var w=Cs(d[P]);let F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let U=y[F]||[];y[F]=U,U.push(w)}vg(y,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(d,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||y}function Ph(d){this.za=0,this.i=[],this.j=new Es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,d),this.Za=Os("retryDelaySeedMs",1e4,d),this.Ta=Os("forwardChannelMaxRetries",2,d),this.va=Os("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Rl(d&&d.concurrentRequestLimit),this.Ba=new Vg,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ph.prototype,n.ka=8,n.I=1,n.connect=function(d,y,w,P){rn(0),this.W=d,this.H=y||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=jl(this,null,this.W),Gn(this)};function Fl(d){if(Rh(d),d.I==3){var y=d.V++,w=cr(d.J);if(ft(w,"SID",d.M),ft(w,"RID",y),ft(w,"TYPE","terminate"),Qr(d,w),y=new Ci(d,d.j,y),y.M=2,y.A=Ka(cr(w)),w=!1,s.navigator&&s.navigator.sendBeacon)try{w=s.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&s.Image&&(new Image().src=y.A,w=!0),w||(y.g=zl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ts(y)}Nh(d)}function Eo(d){d.g&&(Ul(d),d.g.cancel(),d.g=null)}function Rh(d){Eo(d),d.v&&(s.clearTimeout(d.v),d.v=null),Bl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&s.clearTimeout(d.m),d.m=null)}function Gn(d){if(!Ds(d.h)&&!d.m){d.m=!0;var y=d.Ea;ze||E(),me||(ze(),me=!0),x.add(y,d),d.D=0}}function $g(d,y){return Si(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ar(u(d.Ea,d,y),Ls(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;let F=new Ci(this,this.j,d),U=this.o;if(this.U&&(U?(U=wg(U),Xt(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=kh(this,F,y),w=cr(this.J),ft(w,"RID",d),ft(w,"CVER",22),this.G&&ft(w,"X-HTTP-Session-Id",this.G),Qr(this,w),U&&(this.R?y="headers="+za(Bg(U))+"&"+y:this.u&&xh(w,this.u,U)),Ih(this.h,F),this.Ra&&ft(w,"TYPE","init"),this.S?(ft(w,"$req",y),ft(w,"SID","null"),F.U=!0,Ha(F,w,null)):Ha(F,w,y),this.I=2}}else this.I==3&&(d?Hg(this,d):this.i.length==0||Ds(this.h)||Hg(this))};function Hg(d,y){var w;y?w=y.l:w=d.V++;let P=cr(d.J);ft(P,"SID",d.M),ft(P,"RID",w),ft(P,"AID",d.K),Qr(d,P),d.u&&d.o&&xh(P,d.u,d.o),w=new Ci(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),y&&(d.i=y.G.concat(d.i)),y=kh(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ih(d.h,w),Ha(w,P,y)}function Qr(d,y){d.H&&ps(d.H,function(w,P){ft(y,P,w)}),d.l&&ps({},function(w,P){ft(y,P,w)})}function kh(d,y,w){w=Math.min(d.i.length,w);let P=d.l?u(d.l.Ka,d.l,d):null;e:{var F=d.i;let Te=-1;for(;;){let l=["count="+w];Te==-1?w>0?(Te=F[0].g,l.push("ofs="+Te)):Te=0:l.push("ofs="+Te);let m=!0;for(let v=0;v<w;v++){var U=F[v].g;let M=F[v].map;if(U-=Te,U<0)Te=Math.max(0,F[v].g-100),m=!1;else try{U="req"+U+"_"||"";try{var Z=M instanceof Map?M:Object.entries(M);for(let[V,B]of Z){let Y=B;a(B)&&(Y=gs(B)),l.push(U+V+"="+encodeURIComponent(Y))}}catch(V){throw l.push(U+"type="+encodeURIComponent("_badmap")),V}}catch{P&&P(M)}}if(m){Z=l.join("&");break e}}Z=void 0}return d=d.i.splice(0,w),y.G=d,Z}function Vl(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;ze||E(),me||(ze(),me=!0),x.add(y,d),d.A=0}}function Ns(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ar(u(d.Da,d),Ls(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Xa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ar(u(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Eo(this),Xa(this))};function Ul(d){d.B!=null&&(s.clearTimeout(d.B),d.B=null)}function Xa(d){d.g=new Ci(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=cr(d.na);ft(y,"RID","rpc"),ft(y,"SID",d.M),ft(y,"AID",d.K),ft(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(y,"TO",d.ia),ft(y,"TYPE","xmlhttp"),Qr(d,y),d.u&&d.o&&xh(y,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ka(cr(y)),w.u=null,w.R=!0,qa(w,d)}n.Va=function(){this.C!=null&&(this.C=null,Eo(this),Ns(this),rn(19))};function Bl(d){d.C!=null&&(s.clearTimeout(d.C),d.C=null)}function Oh(d,y){var w=null;if(d.g==y){Bl(d),Ul(d),d.g=null;var P=2}else if(Ga(d.h,y))w=y.G,bh(d.h,y),P=1;else return;if(d.I!=0){if(y.o)if(P==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var F=d.D;P=_s(),tn(P,new Al(P,w)),Gn(d)}else Vl(d);else if(F=y.m,F==3||F==0&&y.X>0||!(P==1&&$g(d,y)||P==2&&Ns(d)))switch(w&&w.length>0&&(y=d.h,y.i=y.i.concat(w)),F){case 1:Di(d,5);break;case 4:Di(d,10);break;case 3:Di(d,6);break;default:Di(d,2)}}}function Ls(d,y){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*y}function Di(d,y){if(d.j.info("Error code "+y),y==2){var w=u(d.bb,d),P=d.Ua;let F=!P;P=new Sr(P||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||xs(P,"https"),Ka(P),F?Ai(P.toString(),w):Fg(P.toString(),w)}else rn(2);d.I=0,d.l&&d.l.pa(y),Nh(d),Rh(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Nh(d){if(d.I=0,d.ja=[],d.l){let y=Ch(d.h);(y.length!=0||d.i.length!=0)&&(k(d.ja,y),k(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function jl(d,y,w){var P=w instanceof Sr?cr(w):new Sr(w);if(P.g!="")y&&(P.g=y+"."+P.g),Wa(P,P.u);else{var F=s.location;P=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;let U=new Sr(null);P&&xs(U,P),y&&(U.g=y),F&&Wa(U,F),w&&(U.h=w),P=U}return w=d.G,y=d.wa,w&&y&&ft(P,w,y),ft(P,"VER",d.ka),Qr(d,P),P}function zl(d,y,w){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new pt(new Kr({ab:w})):new pt(d.ma),y.Fa(d.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lh(){}n=Lh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Io(){}Io.prototype.g=function(d,y){return new Dn(d,y)};function Dn(d,y){en.call(this),this.g=new Ph(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!b(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!b(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new bo(this)}_(Dn,en),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Fl(this.g)},Dn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=gs(d),d=w);y.i.push(new Pg(y.Ya++,d)),y.I==3&&Gn(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,Dn.Z.N.call(this)};function Fh(d){Sl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(let w in y){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}_(Fh,Sl);function xi(){Ba.call(this),this.status=1}_(xi,Ba);function bo(d){this.g=d}_(bo,Lh),bo.prototype.ra=function(){tn(this.g,"a")},bo.prototype.qa=function(d){tn(this.g,new Fh(d))},bo.prototype.pa=function(d){tn(this.g,new xi)},bo.prototype.oa=function(){tn(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,QS=Yo.createWebChannelTransport=function(){return new Io},KS=Yo.getStatEventTarget=function(){return _s()},WS=Yo.Event=vo,Lv=Yo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,sp=Yo.ErrorCode=ja,Is.COMPLETE="complete",GS=Yo.EventType=Is,ms.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",en.prototype.listen=en.prototype.J,id=Yo.WebChannel=ms,ste=Yo.FetchXmlHttpFactory=Kr,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,qS=Yo.XhrIo=pt}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var e4="@firebase/firestore",t4="4.9.2";var Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");var xd="12.3.0";var Zc=new da("@firebase/firestore");function od(){return Zc.logLevel}function ue(n,...e){if(Zc.logLevel<=qe.DEBUG){let t=e.map(OD);Zc.debug(`Firestore (${xd}): ${n}`,...t)}}function Xo(n,...e){if(Zc.logLevel<=qe.ERROR){let t=e.map(OD);Zc.error(`Firestore (${xd}): ${n}`,...t)}}function fp(n,...e){if(Zc.logLevel<=qe.WARN){let t=e.map(OD);Zc.warn(`Firestore (${xd}): ${n}`,...t)}}function OD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$4(n,r,t)}function $4(n,e,t){let r=`FIRESTORE (${xd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xo(r),new Error(r)}function Rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$4(e,i,r)}function Ze(n,e){return n}var ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ye=class extends Fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _a=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var rA=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ln.UNAUTHENTICATED))}shutdown(){}};var oA=class{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new _a;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _a,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _a)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new rA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}},sA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},aA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$o(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Rt(this.o===void 0,3512);let r=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ate(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var $v=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ate(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Qe(n,e){return n<e?-1:n>e?1:0}function lA(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return YS(i)===YS(o)?Qe(i,o):YS(i)?1:-1}return Qe(n.length,e.length)}var cte=55296,lte=57343;function YS(n){let e=n.charCodeAt(0);return e>=cte&&e<=lte}function yd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var n4="__name__",Hv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):lA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qo.fromString(e.substring(4,e.length-2))}},hn=class n extends Hv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ye(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},ute=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mi=class n extends Hv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return ute.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n4}static keyField(){return new n([n4])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ye(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(hn.fromString(e))}static fromName(e){return new n(hn.fromString(e).popFirst(5))}static empty(){return new n(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new hn(e.slice()))}};function dte(n,e,t,r){if(e===!0&&r===!0)throw new ye(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hte(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fte(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function JS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=fte(n);throw new ye(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ap(n,e){if(!hte(n))throw new ye(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ye(ie.INVALID_ARGUMENT,t);return!0}var r4=-62135596800,i4=1e6,$n=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*i4);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<r4)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i4}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-r4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$n._jsonSchemaVersion="firestore/timestamp/1.0",$n._jsonSchema={type:Gt("string",$n._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};var Ve=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $n(0,0))}static max(){return new n(new $n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pp=-1,uA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};uA.UNKNOWN_ID=-1;function pte(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new $n(t+1,0):new $n(t,r));return new Xc(i,Ae.empty(),e)}function gte(n){return new Xc(n.readTime,n.key,pp)}var Xc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ve.min(),Ae.empty(),pp)}static max(){return new n(Ve.max(),Ae.empty(),pp)}};function mte(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}var yte="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function m0(n){return S(this,null,function*(){if(n.code!==ie.FAILED_PRECONDITION||n.message!==yte)throw n;ue("LocalStore","Unexpectedly lost primary lease")})}var Q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function _te(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Md(n){return n.name==="IndexedDbTransactionError"}var ND=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),vte=-1;function y0(n){return n==null}function qv(n){return n===0&&1/n==-1/0}var H4="";function wte(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=o4(e)),e=Ete(n.get(t),e);return o4(e)}function Ete(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case H4:t+="";break;default:t+=o}}return t}function o4(n){return n+H4+""}var Ite="remoteDocuments",q4="owner";var G4="mutationQueues";var W4="mutations";var K4="documentMutations",bte="remoteDocumentsV14";var Q4="remoteDocumentGlobal";var Y4="targets";var J4="targetDocuments";var Z4="targetGlobal",X4="collectionParents";var eU="clientMetadata";var tU="bundles";var nU="namedQueries";var Cte="indexConfiguration";var Tte="indexState";var Ste="indexEntries";var rU="documentOverlays";var Ate="globals";var Dte=[G4,W4,K4,Ite,Y4,q4,Z4,J4,eU,Q4,X4,tU,nU],cCe=[...Dte,rU],xte=[G4,W4,K4,bte,Y4,q4,Z4,J4,eU,Q4,X4,tU,nU,rU],Mte=xte,Pte=[...Mte,Cte,Tte,Ste];var lCe=[...Pte,Ate];function s4(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dp(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rte(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Bt=class n{constructor(e,t){this.comparator=e,this.root=t||no.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,no.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,no.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}},ld=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},no=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}};no.EMPTY=null,no.RED=!0,no.BLACK=!1;no.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new no(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _n=class n{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wc=class n{constructor(e){this.fields=e,e.sort(mi.comparator)}static empty(){return new n([])}unionWith(e){let t=new _n(mi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Fn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wv("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Fn.EMPTY_BYTE_STRING=new Fn("");var kte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(n){if(Rt(!!n,39018),typeof n=="string"){let e=0,t=kte.exec(n);if(Rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ts(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}var iU="server_timestamp",oU="__type__",sU="__previous_value__",aU="__local_write_time__";function LD(n){return(n?.mapValue?.fields||{})[oU]?.stringValue===iU}function _0(n){let e=n.mapValue.fields[sU];return LD(e)?_0(e):e}function gp(n){let e=es(n.mapValue.fields[aU].timestampValue);return new $n(e.seconds,e.nanos)}var hA=class{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},fA="(default)",Kv=class n{constructor(e,t){this.projectId=e,this.database=t||fA}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===fA}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var cU="__type__",lU="__max__",Fv={mapValue:{fields:{__type__:{stringValue:lU}}}},uU="__vector__",mp="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LD(n)?4:hU(n)?9007199254740991:dU(n)?10:11:xe(28295,{value:n})}function io(n,e){if(n===e)return!0;let t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gp(n).isEqual(gp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=es(i.timestampValue),a=es(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ts(i.bytesValue).isEqual(ts(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=At(i.doubleValue),a=At(o.doubleValue);return s===a?qv(s)===qv(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return yd(n.arrayValue.values||[],e.arrayValue.values||[],io);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(s4(s)!==s4(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!io(s[c],a[c])))return!1;return!0}(n,e);default:return xe(52216,{left:n})}}function yp(n,e){return(n.values||[]).find(t=>io(t,e))!==void 0}function _d(n,e){if(n===e)return 0;let t=va(n),r=va(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=At(o.integerValue||o.doubleValue),c=At(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return a4(n.timestampValue,e.timestampValue);case 4:return a4(gp(n),gp(e));case 5:return lA(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ts(o),c=ts(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Qe(a[u],c[u]);if(h!==0)return h}return Qe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Qe(At(o.latitude),At(s.latitude));return a!==0?a:Qe(At(o.longitude),At(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return c4(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},c=s.fields||{},u=a[mp]?.arrayValue,h=c[mp]?.arrayValue,_=Qe(u?.values?.length||0,h?.values?.length||0);return _!==0?_:c4(u,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Fv.mapValue&&s===Fv.mapValue)return 0;if(o===Fv.mapValue)return 1;if(s===Fv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let _=0;_<c.length&&_<h.length;++_){let I=lA(c[_],h[_]);if(I!==0)return I;let T=_d(a[c[_]],u[h[_]]);if(T!==0)return T}return Qe(c.length,h.length)}(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function a4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);let t=es(n),r=es(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function c4(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=_d(t[i],r[i]);if(o)return o}return Qe(t.length,r.length)}function vd(n){return pA(n)}function pA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=es(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ts(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=pA(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${pA(t.fields[s])}`;return i+"}"}(n.mapValue):xe(61005,{value:n})}function Bv(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_0(n);return e?16+Bv(e):16;case 5:return 2*n.stringValue.length;case 6:return ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Bv(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Dp(r.fields,(o,s)=>{i+=o.length+Bv(s)}),i}(n.mapValue);default:throw xe(13486,{value:n})}}function gA(n){return!!n&&"integerValue"in n}function FD(n){return!!n&&"arrayValue"in n}function l4(n){return!!n&&"nullValue"in n}function u4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ZS(n){return!!n&&"mapValue"in n}function dU(n){return(n?.mapValue?.fields||{})[cU]?.stringValue===uU}function cp(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Dp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cp(n.arrayValue.values[t]);return e}return $({},n)}function hU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lU}var dCe={mapValue:{fields:{[cU]:{stringValue:uU},[mp]:{arrayValue:{}}}}};var Jo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ZS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cp(t)}setAll(e){let t=mi.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=cp(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ZS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ZS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dp(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cp(this.value))}};var yi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ve.min(),Ve.min(),Ve.min(),Jo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ve.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ve.min(),Ve.min(),Jo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ve.min(),Ve.min(),Jo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wd=class{constructor(e,t){this.position=e,this.inclusive=t}};function d4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(s.referenceValue),t.key):r=_d(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function h4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!io(n.position[t],e.position[t]))return!1;return!0}var Ed=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ote(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Qv=class{},fn=class n extends Qv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yA(e,t,r):t==="array-contains"?new wA(e,r):t==="in"?new EA(e,r):t==="not-in"?new IA(e,r):t==="array-contains-any"?new bA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _A(e,r):new vA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_d(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(_d(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oo=class n extends Qv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return fU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function fU(n){return n.op==="and"}function pU(n){return Nte(n)&&fU(n)}function Nte(n){for(let e of n.filters)if(e instanceof oo)return!1;return!0}function mA(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+vd(n.value);if(pU(n))return n.filters.map(e=>mA(e)).join(",");{let e=n.filters.map(t=>mA(t)).join(",");return`${n.op}(${e})`}}function gU(n,e){return n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&io(r.value,i.value)}(n,e):n instanceof oo?function(r,i){return i instanceof oo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gU(s,i.filters[a]),!0):!1}(n,e):void xe(19439)}function mU(n){return n instanceof fn?function(t){return`${t.field.canonicalString()} ${t.op} ${vd(t.value)}`}(n):n instanceof oo?function(t){return t.op.toString()+" {"+t.getFilters().map(mU).join(" ,")+"}"}(n):"Filter"}var yA=class extends fn{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){let t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}},_A=class extends fn{constructor(e,t){super(e,"in",t),this.keys=yU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vA=class extends fn{constructor(e,t){super(e,"not-in",t),this.keys=yU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yU(n,e){return(e.arrayValue?.values||[]).map(t=>Ae.fromName(t.referenceValue))}var wA=class extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return FD(t)&&yp(t.arrayValue,this.value)}},EA=class extends fn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&yp(this.value.arrayValue,t)}},IA=class extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yp(this.value.arrayValue,t)}},bA=class extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!FD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yp(this.value.arrayValue,r))}};var CA=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function f4(n,e=null,t=[],r=[],i=null,o=null,s=null){return new CA(n,e,t,r,i,o,s)}function VD(n){let e=Ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),y0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vd(r)).join(",")),e.Te=t}return e.Te}function UD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ote(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!h4(n.startAt,e.startAt)&&h4(n.endAt,e.endAt)}function TA(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Id=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Lte(n,e,t,r,i,o,s,a){return new Id(n,e,t,r,i,o,s,a)}function BD(n){return new Id(n)}function p4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fte(n){return n.collectionGroup!==null}function lp(n){let e=Ze(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _n(mi.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ed(o,r))}),t.has(mi.keyField().canonicalString())||e.Ie.push(new Ed(mi.keyField(),r))}return e.Ie}function ro(n){let e=Ze(n);return e.Ee||(e.Ee=Vte(e,lp(n))),e.Ee}function Vte(n,e){if(n.limitType==="F")return f4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ed(i.field,o)});let t=n.endAt?new wd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wd(n.startAt.position,n.startAt.inclusive):null;return f4(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function SA(n,e,t){return new Id(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function v0(n,e){return UD(ro(n),ro(e))&&n.limitType===e.limitType}function _U(n){return`${VD(ro(n))}|lt:${n.limitType}`}function sd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mU(i)).join(", ")}]`),y0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vd(i)).join(",")),`Target(${r})`}(ro(n))}; limitType=${n.limitType})`}function w0(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of lp(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=d4(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,lp(r),i)||r.endAt&&!function(s,a,c){let u=d4(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,lp(r),i))}(n,e)}function Ute(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vU(n){return(e,t)=>{let r=!1;for(let i of lp(n)){let o=Bte(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Bte(n,e,t){let r=n.field.isKeyField()?Ae.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?_d(c,u):xe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}var ns=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dp(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Rte(this.inner)}size(){return this.innerSize}};var jte=new Bt(Ae.comparator);function wa(){return jte}var wU=new Bt(Ae.comparator);function ap(...n){let e=wU;for(let t of n)e=e.insert(t.key,t);return e}function zte(n){let e=wU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kc(){return up()}function EU(){return up()}function up(){return new ns(n=>n.toString(),(n,e)=>n.isEqual(e))}var hCe=new Bt(Ae.comparator),$te=new _n(Ae.comparator);function nt(...n){let e=$te;for(let t of n)e=e.add(t);return e}var Hte=new _n(Qe);function qte(){return Hte}function Gte(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qv(e)?"-0":e}}function Wte(n){return{integerValue:""+n}}var bd=class{constructor(){this._=void 0}};function Kte(n,e,t){return n instanceof _p?function(i,o){let s={fields:{[oU]:{stringValue:iU},[aU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&LD(o)&&(o=_0(o)),o&&(s.fields[sU]=o),{mapValue:s}}(t,e):n instanceof Cd?IU(n,e):n instanceof Td?bU(n,e):function(i,o){let s=Yte(i,o),a=g4(s)+g4(i.Ae);return gA(s)&&gA(i.Ae)?Wte(a):Gte(i.serializer,a)}(n,e)}function Qte(n,e,t){return n instanceof Cd?IU(n,e):n instanceof Td?bU(n,e):t}function Yte(n,e){return n instanceof vp?function(r){return gA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var _p=class extends bd{},Cd=class extends bd{constructor(e){super(),this.elements=e}};function IU(n,e){let t=CU(e);for(let r of n.elements)t.some(i=>io(i,r))||t.push(r);return{arrayValue:{values:t}}}var Td=class extends bd{constructor(e){super(),this.elements=e}};function bU(n,e){let t=CU(e);for(let r of n.elements)t=t.filter(i=>!io(i,r));return{arrayValue:{values:t}}}var vp=class extends bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function g4(n){return At(n.integerValue||n.doubleValue)}function CU(n){return FD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Jte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Cd&&i instanceof Cd||r instanceof Td&&i instanceof Td?yd(r.elements,i.elements,io):r instanceof vp&&i instanceof vp?io(r.Ae,i.Ae):r instanceof _p&&i instanceof _p}(n.transform,e.transform)}var dp=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wp=class{};function TU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new AA(n.key,dp.none()):new Ep(n.key,n.data,dp.none());{let t=n.data,r=Jo.empty(),i=new _n(mi.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Sd(n.key,r,new Wc(i.toArray()),dp.none())}}function Zte(n,e,t){n instanceof Ep?function(i,o,s){let a=i.value.clone(),c=y4(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Sd?function(i,o,s){if(!jv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=y4(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(SU(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function hp(n,e,t,r){return n instanceof Ep?function(o,s,a,c){if(!jv(o.precondition,s))return a;let u=o.value.clone(),h=_4(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sd?function(o,s,a,c){if(!jv(o.precondition,s))return a;let u=_4(o.fieldTransforms,c,s),h=s.data;return h.setAll(SU(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(o,s,a){return jv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function m4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yd(r,i,(o,s)=>Jte(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ep=class extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Sd=class extends wp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function SU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function y4(n,e,t){let r=new Map;Rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Qte(s,a,t[i]))}return r}function _4(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Kte(o,s,e))}return r}var AA=class extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var DA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Zte(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=EU();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=TU(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nt())}isEqual(e){return this.batchId===e.batchId&&yd(this.mutations,e.mutations,(t,r)=>m4(t,r))&&yd(this.baseMutations,e.baseMutations,(t,r)=>m4(t,r))}};var xA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var MA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ht,Je;function AU(n){if(n===void 0)return Xo("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Ht.OK:return ie.OK;case Ht.CANCELLED:return ie.CANCELLED;case Ht.UNKNOWN:return ie.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ie.INTERNAL;case Ht.UNAVAILABLE:return ie.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ie.NOT_FOUND;case Ht.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Ht.ABORTED:return ie.ABORTED;case Ht.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Ht.DATA_LOSS:return ie.DATA_LOSS;default:return xe(39323,{code:n})}}(Je=Ht||(Ht={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";var Xte=null;function ene(){return new TextEncoder}var tne=new Qo([4294967295,4294967295],0);function v4(n){let e=ene().encode(n),t=new HS;return t.update(e),new Uint8Array(t.digest())}function w4(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qo([t,r],0),new Qo([i,o],0)]}var PA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qc(`Invalid padding: ${t}`);if(r<0)throw new Qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Qo.fromNumber(r)));return i.compare(tne)===1&&(i=new Qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=v4(e),[r,i]=w4(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=v4(e),[r,i]=w4(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Qc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ve.min(),i,new Bt(Qe),wa(),nt())}},Ip=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,nt(),nt(),nt())}};var ud=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Jv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Zv=class{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Xv=class{constructor(){this.ve=0,this.Fe=E4(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),t=nt(),r=nt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xe(38017,{changeType:o})}}),new Ip(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=E4()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},RA=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=wa(),this.Je=Vv(),this.He=Vv(),this.Ye=new Bt(Qe)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(TA(o))if(r===0){let s=new Ae(o.path);this.et(t,s,yi.newNoDocument(s,Ve.min()))}else Rt(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}Xte?.lt(function(h,_,I,T,k){let L={localCacheCount:h,existenceFilterCount:_.count,databaseId:I.database,projectId:I.projectId},N=_.unchangedNames;return N&&(L.bloomFilter={applied:k===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:q=>T?.mightContain(q)??!1}),L}(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ts(r).toUint8Array()}catch(c){if(c instanceof Wv)return fp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new PA(s,i,o)}catch(c){return fp(c instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&TA(a.target)){let c=new Ae(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,yi.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=nt();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Yv(e,t,this.Ye,this.je,r);return this.je=wa(),this.Je=Vv(),this.He=Vv(),this.Ye=new Bt(Qe),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Vv(){return new Bt(Ae.comparator)}function E4(){return new Bt(Ae.comparator)}var nne={asc:"ASCENDING",desc:"DESCENDING"},rne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ine={and:"AND",or:"OR"},kA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function OA(n,e){return n.useProto3Json||y0(e)?e:{value:e}}function one(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sne(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dd(n){return Rt(!!n,49232),Ve.fromTimestamp(function(t){let r=es(t);return new $n(r.seconds,r.nanos)}(n))}function ane(n,e){return NA(n,e).canonicalString()}function NA(n,e){let t=function(i){return new hn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function DU(n){let e=hn.fromString(n);return Rt(kU(e),10190,{key:e.toString()}),e}function XS(n,e){let t=DU(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(MU(t))}function xU(n,e){return ane(n.databaseId,e)}function cne(n){let e=DU(n);return e.length===4?hn.emptyPath():MU(e)}function I4(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MU(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lne(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(Rt(h===void 0||typeof h=="string",58123),Fn.fromBase64String(h||"")):(Rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Fn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?ie.UNKNOWN:AU(u.code);return new ye(h,u.message||"")}(s);t=new Zv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=XS(n,r.document.name),o=dd(r.document.updateTime),s=r.document.createTime?dd(r.document.createTime):Ve.min(),a=new Jo({mapValue:{fields:r.document.fields}}),c=yi.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new ud(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=XS(n,r.document),o=r.readTime?dd(r.readTime):Ve.min(),s=yi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ud([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=XS(n,r.document),o=r.removedTargetIds||[];t=new ud([],o,i,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new MA(i,o),a=r.targetId;t=new Jv(a,s)}}return t}function une(n,e){return{documents:[xU(n,e.path)]}}function dne(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xU(n,i);let o=function(u){if(u.length!==0)return RU(oo.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:ad(I.field),direction:pne(I.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=OA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function hne(n){let e=cne(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Rt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(_){let I=PU(_);return I instanceof oo&&pU(I)?I.getFilters():[I]}(t.where));let s=[];t.orderBy&&(s=function(_){return _.map(I=>function(k){return new Ed(cd(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(_){let I;return I=typeof _=="object"?_.value:_,y0(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(_){let I=!!_.before,T=_.values||[];return new wd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(_){let I=!_.before,T=_.values||[];return new wd(T,I)}(t.endAt)),Lte(e,i,s,o,a,"F",c,u)}function fne(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PU(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cd(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cd(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=cd(t.unaryFilter.field);return fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=cd(t.unaryFilter.field);return fn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(n):n.fieldFilter!==void 0?function(t){return fn.create(cd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return oo.create(t.compositeFilter.filters.map(r=>PU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(t.compositeFilter.op))}(n):xe(30097,{filter:n})}function pne(n){return nne[n]}function gne(n){return rne[n]}function mne(n){return ine[n]}function ad(n){return{fieldPath:n.canonicalString()}}function cd(n){return mi.fromServerFormat(n.fieldPath)}function RU(n){return n instanceof fn?function(t){if(t.op==="=="){if(u4(t.value))return{unaryFilter:{field:ad(t.field),op:"IS_NAN"}};if(l4(t.value))return{unaryFilter:{field:ad(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(u4(t.value))return{unaryFilter:{field:ad(t.field),op:"IS_NOT_NAN"}};if(l4(t.value))return{unaryFilter:{field:ad(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(t.field),op:gne(t.op),value:t.value}}}(n):n instanceof oo?function(t){let r=t.getFilters().map(i=>RU(i));return r.length===1?r[0]:{compositeFilter:{op:mne(t.op),filters:r}}}(n):xe(54877,{filter:n})}function kU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bp=class n{constructor(e,t,r,i,o=Ve.min(),s=Ve.min(),a=Fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var LA=class{constructor(e){this.yt=e}};function yne(n){let e=hne({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?SA(e,e.limit,"L"):e}var e0=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),qv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=es(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ts(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?hU(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):dU(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=mp,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ae.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};e0.Kt=new e0;var FA=class{constructor(){this.Cn=new VA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Xc.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Xc.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},VA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(hn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(hn.comparator)).toArray()}};var fCe=new Uint8Array(0);var b4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OU=41943040,Ur=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(OU,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);var Cp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var C4="LruGarbageCollector",_ne=1048576;function T4([n,e],[t,r]){let i=Qe(n,t);return i===0?Qe(e,r):i}var UA=class{constructor(e){this.Ir=e,this.buffer=new _n(T4),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();T4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},BA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(C4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Md(t)?ue(C4,"Ignoring IndexedDB error during garbage collection: ",t):yield m0(t)}yield this.Vr(3e5)}))}},jA=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(ND.ce);let r=new UA(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(b4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b4):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,s=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,a=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(u=Date.now(),od()<=qe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${_} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_})))}};function vne(n,e){return new jA(n,e)}var zA=class{constructor(){this.changes=new ns(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $A=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var HA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hp(r.mutation,i,Wc.empty(),$n.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nt()){let i=Kc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ap();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Kc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nt()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wa(),s=up(),a=function(){return up()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Sd)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),hp(h.mutation,u,h.mutation.getFieldMask(),$n.now())):s.set(u.key,Wc.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>a.set(u,new $A(h,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=up(),i=new Bt((s,a)=>s-a),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||Wc.empty();h=a.applyToLocalView(u,h),r.set(c,h);let _=(i.get(a.batchId)||nt()).add(c);i=i.insert(a.batchId,_)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,_=EU();h.forEach(I=>{if(!o.has(I)){let T=TU(t.get(I),r.get(I));T!==null&&_.set(I,T),o=o.add(I)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,_))}return Q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fte(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Q.resolve(Kc()),a=pp,c=o;return s.next(u=>Q.forEach(u,(h,_)=>(a<_.largestBatchId&&(a=_.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,nt())).next(h=>({batchId:a,changes:zte(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(r=>{let i=ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ap();return this.indexManager.getCollectionParents(e,o).next(a=>Q.forEach(a,c=>{let u=function(_,I){return new Id(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((_,I)=>{s=s.insert(_,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,yi.newInvalidDocument(h)))});let a=ap();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&hp(h.mutation,u,Wc.empty(),$n.now()),w0(t,u)&&(a=a.insert(c,u))}),a})}};var qA=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dd(i.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:yne(i.bundledQuery),readTime:dd(i.readTime)}}(t)),Q.resolve()}};var GA=class{constructor(){this.overlays=new Bt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Kc();return Q.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){let i=Kc(),o=t.length+1,s=new Ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Bt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Kc(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Kc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xA(t,r));let o=this.qr.get(t);o===void 0&&(o=nt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var WA=class{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}};var Tp=class{constructor(){this.Qr=new _n(qt.$r),this.Ur=new _n(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Ae(new hn([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ae(new hn([])),r=new qt(t,e),i=new qt(t,e+1),o=nt();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}};var KA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(qt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new DA(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new qt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?vte:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Qe);return t.forEach(i=>{let o=new qt(i,0),s=new qt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Ae.isDocumentKey(o)||(o=o.child(""));let s=new qt(new Ae(o),0),a=new _n(Qe);return this.Zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},s),Q.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new qt(t,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var QA=class{constructor(e){this.ri=e,this.docs=function(){return new Bt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():yi.newInvalidDocument(t))}getEntries(e,t){let r=wa();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yi.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wa(),s=t.path,a=new Ae(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||mte(gte(h),r)<=0||(i.has(h.key)||w0(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){xe(9500)}ii(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YA(this)}getSize(e){return Q.resolve(this.size)}},YA=class extends zA{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var JA=class{constructor(e){this.persistence=e,this.si=new ns(t=>VD(t),UD),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Tp,this.targetCount=0,this.ai=Cp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Cp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}};var t0=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new ND(0),this.li=!1,this.li=!0,this.hi=new WA,this.referenceDelegate=e(this),this.Pi=new JA(this),this.indexManager=new FA,this.remoteDocumentCache=function(i){return new QA(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new LA(t),this.Ii=new qA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new KA(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);let i=new ZA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},ZA=class extends dA{constructor(e){super(),this.currentSequenceNumber=e}},XA=class n{constructor(e){this.persistence=e,this.Ri=new Tp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{let i=Ae.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},n0=class n{constructor(e,t){this.persistence=e,this.pi=new ns(r=>wte(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=vne(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?Q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ve.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bv(e.data.value)),t}br(e,t,r){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var eD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=nt(),i=nt();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var tD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vF()?8:_te(Ir())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new tD;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(od()<=qe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",sd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(od()<=qe.DEBUG&&ue("QueryEngine","Query:",sd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(od()<=qe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",sd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ro(t))):Q.resolve())}ys(e,t){if(p4(t))return Q.resolve(null);let r=ro(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=SA(t,null,"F"),r=ro(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=nt(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Ds(t,a);return this.Cs(t,u,s,c.readTime)?this.ys(e,SA(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,r,i){return p4(t)||i.isEqual(Ve.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?Q.resolve(null):(od()<=qe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sd(t)),this.vs(e,s,t,pte(i,pp)).next(a=>a))})}Ds(e,t){let r=new _n(vU(e));return t.forEach((i,o)=>{w0(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return od()<=qe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",sd(t)),this.ps.getDocumentsMatchingQuery(e,t,Xc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var jD="LocalStore",wne=3e8,rD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Bt(Qe),this.xs=new ns(o=>VD(o),UD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Ene(n,e,t,r){return new rD(n,e,t,r)}function NU(n,e){return S(this,null,function*(){let t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=nt();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function LU(n){let e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Ine(n,e){let t=Ze(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,_)=>{let I=i.get(_);if(!I)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,_).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,_)));let T=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(Fn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(_,T),function(L,N,q){return L.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=wne?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.Pi.updateTargetData(o,T))});let c=wa(),u=nt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(bne(o,s,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Ve.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return Q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ms=i,o))}function bne(n,e,t){let r=nt(),i=nt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wa();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ue(jD,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:s,qs:i}})}function Cne(n,e){let t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new bp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function iD(n,e,t){return S(this,null,function*(){let r=Ze(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Md(s))throw s;ue(jD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function S4(n,e,t){let r=Ze(n),i=Ve.min(),o=nt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let _=Ze(c),I=_.xs.get(h);return I!==void 0?Q.resolve(_.Ms.get(I)):_.Pi.getTargetData(u,h)}(r,s,ro(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Ve.min(),t?o:nt())).next(a=>(Tne(r,Ute(e),a),{documents:a,Qs:o})))}function Tne(n,e,t){let r=n.Os.get(e)||Ve.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var r0=class{constructor(){this.activeTargetIds=qte()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var oD=class{constructor(){this.Mo=new r0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new r0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sD=class{Oo(e){}shutdown(){}};var A4="ConnectivityMonitor",i0=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(A4,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ue(A4,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Uv=null;function aD(){return Uv===null?Uv=function(){return 268435456+Math.round(2147483648*Math.random())}():Uv++,"0x"+Uv.toString(16)}var eA="RestConnection",Sne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fA?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=aD(),a=this.zo(e,t.toUriEncodedString());ue(eA,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:u}=new URL(a),h=Gf(u);return this.Jo(e,a,c,r,h).then(_=>(ue(eA,`Received RPC '${e}' ${s}: `,_),_),_=>{throw fp(eA,`RPC '${e}' ${s} failed with error: `,_,"url: ",a,"request:",r),_})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=Sne[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var lD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Nn="WebChannelConnection",uD=class extends cD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=aD();return new Promise((a,c)=>{let u=new qS;u.setWithCredentials(!0),u.listenOnce(GS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sp.NO_ERROR:let _=u.getResponseJson();ue(Nn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),a(_);break;case sp.TIMEOUT:ue(Nn,`RPC '${e}' ${s} timed out`),c(new ye(ie.DEADLINE_EXCEEDED,"Request time out"));break;case sp.HTTP_ERROR:let I=u.getStatus();if(ue(Nn,`RPC '${e}' ${s} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(ee)>=0?ee:ie.UNKNOWN}(k.status);c(new ye(L,k.message))}else c(new ye(ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(ie.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ue(Nn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);ue(Nn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}T_(e,t,r){let i=aD(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=QS(),a=KS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");ue(Nn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let _=s.createWebChannel(h,c);this.I_(_);let I=!1,T=!1,k=new lD({Yo:N=>{T?ue(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(I||(ue(Nn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),I=!0),ue(Nn,`RPC '${e}' stream ${i} sending:`,N),_.send(N))},Zo:()=>_.close()}),L=(N,q,ee)=>{N.listen(q,K=>{try{ee(K)}catch(fe){setTimeout(()=>{throw fe},0)}})};return L(_,id.EventType.OPEN,()=>{T||(ue(Nn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),L(_,id.EventType.CLOSE,()=>{T||(T=!0,ue(Nn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(_))}),L(_,id.EventType.ERROR,N=>{T||(T=!0,fp(Nn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new ye(ie.UNAVAILABLE,"The operation could not be completed")))}),L(_,id.EventType.MESSAGE,N=>{if(!T){let q=N.data[0];Rt(!!q,16349);let ee=q,K=ee?.error||ee[0]?.error;if(K){ue(Nn,`RPC '${e}' stream ${i} received error:`,K);let fe=K.status,ze=function(E){let C=Ht[E];if(C!==void 0)return AU(C)}(fe),me=K.message;ze===void 0&&(ze=ie.INTERNAL,me="Unknown error status: "+fe+" with message "+K.message),T=!0,k.a_(new ye(ze,me)),_.close()}else ue(Nn,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}}),L(a,WS.STAT_EVENT,N=>{N.stat===Lv.PROXY?ue(Nn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Lv.NOPROXY&&ue(Nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function tA(){return typeof document<"u"?document:null}function FU(n){return new kA(n,!0)}var o0=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var D4="PersistentStream",dD=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return S(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return S(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Xo(t.toString()),Xo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ye(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>S(this,null,function*(){this.state=0,this.start()}))}z_(e){return ue(D4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ue(D4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hD=class extends dD{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=lne(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ve.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ve.min():s.readTime?dd(s.readTime):Ve.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=I4(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=TA(c)?{documents:une(o,c)}:{query:dne(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sne(o,s.resumeToken);let u=OA(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ve.min())>0){a.readTime=one(o,s.snapshotVersion.toTimestamp());let u=OA(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=fne(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=I4(this.serializer),t.removeTarget=e,this.q_(t)}};var fD=class{},pD=class extends fD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,NA(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ie.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,NA(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ie.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},gD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xo(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ad="RemoteStore",mD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){Mp(this)&&(ue(Ad,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Ze(c);u.Ea.add(4),yield xp(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield E0(u)})}(this))}))}),this.Ra=new gD(r,i)}};function E0(n){return S(this,null,function*(){if(Mp(n))for(let e of n.da)yield e(!0)})}function xp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function VU(n,e){let t=Ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qD(t)?HD(t):Pd(t).O_()&&$D(t,e))}function zD(n,e){let t=Ze(n),r=Pd(t);t.Ia.delete(e),r.O_()&&UU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Mp(t)&&t.Ra.set("Unknown"))}function $D(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pd(n).Y_(e)}function UU(n,e){n.Va.Ue(e),Pd(n).Z_(e)}function HD(n){n.Va=new RA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pd(n).start(),n.Ra.ua()}function qD(n){return Mp(n)&&!Pd(n).x_()&&n.Ia.size>0}function Mp(n){return Ze(n).Ea.size===0}function BU(n){n.Va=void 0}function Ane(n){return S(this,null,function*(){n.Ra.set("Online")})}function Dne(n){return S(this,null,function*(){n.Ia.forEach((e,t)=>{$D(n,e)})})}function xne(n,e){return S(this,null,function*(){BU(n),qD(n)?(n.Ra.ha(e),HD(n)):n.Ra.set("Unknown")})}function Mne(n,e,t){return S(this,null,function*(){if(n.Ra.set("Online"),e instanceof Zv&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){ue(Ad,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield x4(n,r)}else if(e instanceof ud?n.Va.Ze(e):e instanceof Jv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ve.min()))try{let r=yield LU(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(u);h&&o.Ia.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Fn.EMPTY_BYTE_STRING,h.snapshotVersion)),UU(o,c);let _=new bp(h.target,c,u,h.sequenceNumber);$D(o,_)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ue(Ad,"Failed to raise snapshot:",r),yield x4(n,r)}})}function x4(n,e,t){return S(this,null,function*(){if(!Md(e))throw e;n.Ea.add(1),yield xp(n),n.Ra.set("Offline"),t||(t=()=>LU(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){ue(Ad,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield E0(n)}))})}function M4(n,e){return S(this,null,function*(){let t=Ze(n);t.asyncQueue.verifyOperationInProgress(),ue(Ad,"RemoteStore received new credentials");let r=Mp(t);t.Ea.add(3),yield xp(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield E0(t)})}function Pne(n,e){return S(this,null,function*(){let t=Ze(n);e?(t.Ea.delete(2),yield E0(t)):e||(t.Ea.add(2),yield xp(t),t.Ra.set("Unknown"))})}function Pd(n){return n.ma||(n.ma=function(t,r,i){let o=Ze(t);return o.sa(),new hD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:Ane.bind(null,n),t_:Dne.bind(null,n),r_:xne.bind(null,n),H_:Mne.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.B_(),qD(n)?HD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),BU(n))}))),n.ma}var yD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jU(n,e){if(Xo("AsyncQueue",`${e}: ${n}`),Md(n))return new ye(ie.UNAVAILABLE,`${e}: ${n}`);throw n}var s0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=ap(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var a0=class{constructor(){this.ga=new Bt(Ae.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Dd=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,s0.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _D=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},vD=class{constructor(){this.queries=P4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ze(t),o=i.queries;i.queries=P4(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ye(ie.ABORTED,"Firestore shutting down"))}};function P4(){return new ns(n=>_U(n),v0)}function Rne(n,e){return S(this,null,function*(){let t=Ze(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new _D,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=jU(s,`Initialization of query '${sd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&GD(t)})}function kne(n,e){return S(this,null,function*(){let t=Ze(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function One(n,e){let t=Ze(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&GD(t)}function Nne(n,e,t){let r=Ze(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function GD(n){n.Ca.forEach(e=>{e.next()})}var wD,R4;(R4=wD||(wD={})).Ma="default",R4.Cache="cache";var ED=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wD.Cache}};var c0=class{constructor(e){this.key=e}},l0=class{constructor(e){this.key=e}},ID=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=vU(e),this.tu=new s0(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new a0,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,_)=>{let I=i.get(h),T=w0(this.query,_)?_:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),N=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),N=!0):this.su(I,T)||(r.track({type:2,doc:T}),N=!0,(c&&this.eu(T,c)>0||u&&this.eu(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),N=!0):I&&!T&&(r.track({type:1,doc:I}),N=!0,(c||u)&&(a=!0)),N&&(T?(s=s.add(T),o=L?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,_)=>function(T,k){let L=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:N})}};return L(T)-L(k)}(h.type,_.type)||this.eu(h.doc,_.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new Dd(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=nt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new l0(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new c0(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=nt();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},WD="SyncEngine",bD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},CD=class{constructor(e){this.key=e,this.hu=!1}},TD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ns(a=>_U(a),v0),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Ae.comparator),this.Au=new Map,this.Ru=new Tp,this.Vu={},this.mu=new Map,this.fu=Cp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Lne(n,e,t=!0){return S(this,null,function*(){let r=GU(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield zU(r,e,t,!0),i})}function Fne(n,e){return S(this,null,function*(){let t=GU(n);yield zU(t,e,!0,!1)})}function zU(n,e,t,r){return S(this,null,function*(){let i=yield Cne(n.localStore,ro(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Vne(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&VU(n.remoteStore,i),a})}function Vne(n,e,t,r,i){return S(this,null,function*(){n.pu=(_,I,T)=>function(L,N,q,ee){return S(this,null,function*(){let K=N.view.ru(q);K.Cs&&(K=yield S4(L.localStore,N.query,!1).then(({documents:x})=>N.view.ru(x,K)));let fe=ee&&ee.targetChanges.get(N.targetId),ze=ee&&ee.targetMismatches.get(N.targetId)!=null,me=N.view.applyChanges(K,L.isPrimaryClient,fe,ze);return O4(L,N.targetId,me.au),me.snapshot})}(n,_,I,T);let o=yield S4(n.localStore,e,!0),s=new ID(e,o.Qs),a=s.ru(o.documents),c=Ip.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);O4(n,t,u.au);let h=new bD(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Une(n,e,t){return S(this,null,function*(){let r=Ze(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!v0(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield iD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zD(r.remoteStore,i.targetId),SD(r,i.targetId)}).catch(m0))):(SD(r,i.targetId),yield iD(r.localStore,i.targetId,!0))})}function Bne(n,e){return S(this,null,function*(){let t=Ze(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zD(t.remoteStore,r.targetId))})}function $U(n,e){return S(this,null,function*(){let t=Ze(n);try{let r=yield Ine(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Rt(s.hu,14607):i.removedDocuments.size>0&&(Rt(s.hu,42227),s.hu=!1))}),yield qU(t,r,e)}catch(r){yield m0(r)}})}function k4(n,e,t){let r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ze(s);c.onlineState=a;let u=!1;c.queries.forEach((h,_)=>{for(let I of _.Sa)I.va(a)&&(u=!0)}),u&&GD(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jne(n,e,t){return S(this,null,function*(){let r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Bt(Ae.comparator);s=s.insert(o,yi.newNoDocument(o,Ve.min()));let a=nt().add(o),c=new Yv(Ve.min(),new Map,new Bt(Qe),s,a);yield $U(r,c),r.du=r.du.remove(o),r.Au.delete(e),KD(r)}else yield iD(r.localStore,e,!1).then(()=>SD(r,e,t)).catch(m0)})}function SD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||HU(n,r)})}function HU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(zD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),KD(n))}function O4(n,e,t){for(let r of t)r instanceof c0?(n.Ru.addReference(r.key,e),zne(n,r)):r instanceof l0?(ue(WD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||HU(n,r.key)):xe(19791,{wu:r})}function zne(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ue(WD,"New document in limbo: "+t),n.Eu.add(r),KD(n))}function KD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ae(hn.fromString(e)),r=n.fu.next();n.Au.set(r,new CD(t)),n.du=n.du.insert(t,r),VU(n.remoteStore,new bp(ro(BD(t.path)),r,"TargetPurposeLimboResolution",ND.ce))}}function qU(n,e,t){return S(this,null,function*(){let r=Ze(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=eD.As(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(c,u){return S(this,null,function*(){let h=Ze(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Q.forEach(u,I=>Q.forEach(I.Es,T=>h.persistence.referenceDelegate.addReference(_,I.targetId,T)).next(()=>Q.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(_,I.targetId,T)))))}catch(_){if(!Md(_))throw _;ue(jD,"Failed to update sequence numbers: "+_)}for(let _ of u){let I=_.targetId;if(!_.fromCache){let T=h.Ms.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(I,L)}}})}(r.localStore,o))})}function $ne(n,e){return S(this,null,function*(){let t=Ze(n);if(!t.currentUser.isEqual(e)){ue(WD,"User change. New user:",e.toKey());let r=yield NU(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new ye(ie.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qU(t,r.Ls)}})}function Hne(n,e){let t=Ze(n),r=t.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let i=nt(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function GU(n){let e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$U.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jne.bind(null,e),e.Pu.H_=One.bind(null,e.eventManager),e.Pu.yu=Nne.bind(null,e.eventManager),e}var WU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=FU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Ene(this.persistence,new nD,t.initialUser,this.serializer)}Cu(t){return new t0(XA.mi,this.serializer)}Du(t){return new oD}terminate(){return S(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),AD=class extends WU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Rt(this.persistence.referenceDelegate instanceof n0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new BA(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new t0(r=>n0.mi(r,t),this.serializer)}};var qne=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>k4(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$ne.bind(null,this.syncEngine),yield Pne(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vD}()}createDatastore(t){let r=FU(t.databaseInfo.databaseId),i=function(s){return new uD(s)}(t.databaseInfo);return function(s,a,c,u){return new pD(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new mD(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>k4(this.syncEngine,r,0),function(){return i0.v()?new i0:new sD}())}createSyncEngine(t,r){return function(o,s,a,c,u,h,_){let I=new TD(o,s,a,c,u,h);return _&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){yield function(r){return S(this,null,function*(){let i=Ze(r);ue(Ad,"RemoteStore shutting down."),i.Ea.add(5),yield xp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var DD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ea="FirestoreClient",xD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){ue(Ea,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ue(Ea,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=jU(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nA(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ue(Ea,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield NU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function N4(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Gne(n);ue(Ea,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>M4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>M4(e.remoteStore,i)),n._onlineComponents=e})}function Gne(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ea,"Using user provided OfflineComponentProvider");try{yield nA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fp("Error using user provided cache. Falling back to memory cache: "+t),yield nA(n,new WU)}}else ue(Ea,"Using default OfflineComponentProvider"),yield nA(n,new AD(void 0));return n._offlineComponents})}function Wne(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ea,"Using user provided OnlineComponentProvider"),yield N4(n,n._uninitializedComponentsProvider._online)):(ue(Ea,"Using default OnlineComponentProvider"),yield N4(n,new qne))),n._onlineComponents})}function L4(n){return S(this,null,function*(){let e=yield Wne(n),t=e.eventManager;return t.onListen=Lne.bind(null,e.syncEngine),t.onUnlisten=Une.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fne.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Bne.bind(null,e.syncEngine),t})}function KU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var F4=new Map;var Kne="firestore.googleapis.com",V4=!0,u0=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kne,this.ssl=V4}else this.host=e.host,this.ssl=e.ssl??V4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_ne)throw new ye(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},MD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iA;switch(r.type){case"firstParty":return new aA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=F4.get(t);r&&(ue("ComponentProvider","Removing Datastore"),F4.delete(t),r.terminate())}(this),Promise.resolve()}};var d0=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zo=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new PD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ap(t,n._jsonSchema))return new n(e,r||null,new Ae(hn.fromString(t.referencePath)))}};Zo._jsonSchemaVersion="firestore/documentReference/1.0",Zo._jsonSchema={type:Gt("string",Zo._jsonSchemaVersion),referencePath:Gt("string")};var PD=class n extends d0{constructor(e,t,r){super(e,t,BD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zo(this.firestore,null,new Ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var U4="AsyncQueue",h0=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o0(this,"async_queue_retry"),this._c=()=>{let r=tA();r&&ue(U4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=tA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=tA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new _a;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return S(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Md(e))throw e;ue(U4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xo("INTERNAL UNHANDLED ERROR: ",B4(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=yD.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&xe(47125,{Pc:B4(this.nc)})}verifyOperationInProgress(){}Tc(){return S(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function B4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function j4(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sp=class extends MD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new h0,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new h0(e),this._firestoreClient=void 0,yield e}})}};function Qne(n){if(n._terminated)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Yne(n),n._firestoreClient}function Yne(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new hA(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,KU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new xD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var hd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Fn.fromBase64String(e))}catch(t){throw new ye(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ap(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};hd._jsonSchemaVersion="firestore/bytes/1.0",hd._jsonSchema={type:Gt("string",hd._jsonSchemaVersion),bytes:Gt("string")};var f0=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fd=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fd._jsonSchemaVersion="firestore/geoPoint/1.0",fd._jsonSchema={type:Gt("string",fd._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};var pd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ap(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ye(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};pd._jsonSchemaVersion="firestore/vectorValue/1.0",pd._jsonSchema={type:Gt("string",pd._jsonSchemaVersion),vectorValues:Gt("object")};var Jne=new RegExp("[~\\*/\\[\\]]");function Zne(n,e,t){if(e.search(Jne)>=0)throw z4(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new f0(...e.split("."))._internalPath}catch{throw z4(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function z4(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ye(ie.INVALID_ARGUMENT,a+n+c)}var p0=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(QU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},RD=class extends p0{data(){return super.data()}};function QU(n,e){return typeof e=="string"?Zne(n,e):e instanceof f0?e._internalPath:e._delegate._internalPath}function Xne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kD=class{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Dp(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[mp].arrayValue?.values?.map(r=>At(r.doubleValue));return new pd(t)}convertGeoPoint(e){return new fd(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){let t=es(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=hn.fromString(e);Rt(kU(r),9688,{name:e});let i=new Kv(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return i.isEqual(t)||Xo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Yc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jc=class n extends p0{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(QU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Jc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jc._jsonSchema={type:Gt("string",Jc._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var gd=class extends Jc{data(e={}){return super.data(e)}},md=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gd(this._firestore,this._userDataWriter,r.key,r,new Yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new gd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new gd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:ere(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$v.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ere(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}md._jsonSchemaVersion="firestore/querySnapshot/1.0",md._jsonSchema={type:Gt("string",md._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var g0=class extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zo(this.firestore,null,t)}};function YU(n,...e){n=ua(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||j4(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(j4(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Zo)s=JS(n.firestore,Sp),a=BD(n._key.path),o={next:c=>{e[r]&&e[r](tre(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=JS(n,d0);s=JS(c.firestore,Sp),a=c._query;let u=new g0(s);o={next:h=>{e[r]&&e[r](new md(s,u,c,h))},error:e[r+1],complete:e[r+2]},Xne(n._query)}return function(u,h,_,I){let T=new DD(I),k=new ED(h,T,_);return u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Rne(yield L4(u),k)})),()=>{T.Nu(),u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return kne(yield L4(u),k)}))}}(Qne(s),a,i,o)}function tre(n,e,t){let r=t.docs.get(e._key),i=new g0(n);return new Jc(n,i,e._key,r,new Yc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){xd=i})(Xu),ha(new pi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Sp(new oA(r.getProvider("auth-internal")),new cA(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kv(u.options.projectId,h)}(s,i),s);return o=$({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),jo(e4,t4,e),jo(e4,t4,"esm2020")})();var I0=function(){return I0=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},I0.apply(this,arguments)};var nre={includeMetadataChanges:!1};function JU(n,e){return e===void 0&&(e=nre),new Ee(function(t){var r=YU(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ZU(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:I0(I0({},r),(t={},t[e.idField]=n.id,t))}function XU(n){return JU(n,{includeMetadataChanges:!0}).pipe(ge(function(e){return e.docs}))}function e3(n,e){return e===void 0&&(e={}),XU(n).pipe(ge(function(t){return t.map(function(r){return ZU(r,e)})}))}var t3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n3={};var rs,QD;(function(){var n;function e(x,E){function C(){}C.prototype=E.prototype,x.D=E.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(D,A,R){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,E,C){C||(C=0);var D=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;16>A;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=x.g[0],C=x.g[1],A=x.g[2];var R=x.g[3],b=E+(R^C&(A^R))+D[0]+3614090360&4294967295;E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[1]+3905402710&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[5]+1200080426&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[9]+2336552879&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[13]+4254626195&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^R&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[6]+3225465664&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[10]+38016083&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[14]+3275163606&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[2]+4243563512&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^R)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[8]+2272392833&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[4]+1272893353&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[0]+3936430074&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[12]+3873151461&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~R))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[7]+1126891415&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[3]+2399980690&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[15]+4264355552&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[11]+3174756917&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+E&4294967295,x.g[1]=x.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}r.prototype.u=function(x,E){E===void 0&&(E=x.length);for(var C=E-this.blockSize,D=this.B,A=this.h,R=0;R<E;){if(A==0)for(;R<=C;)i(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<E;)if(D[A++]=x.charCodeAt(R++),A==this.blockSize){i(this,D),A=0;break}}else for(;R<E;)if(D[A++]=x[R++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var E=1;E<x.length-8;++E)x[E]=0;var C=8*this.o;for(E=x.length-8;E<x.length;++E)x[E]=C&255,C/=256;for(this.u(x),x=Array(16),E=C=0;4>E;++E)for(var D=0;32>D;D+=8)x[C++]=this.g[E]>>>D&255;return x};function o(x,E){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=E(x)}function s(x,E){this.h=E;for(var C=[],D=!0,A=x.length-1;0<=A;A--){var R=x[A]|0;D&&R==E||(C[A]=R,D=!1)}this.g=C}var a={};function c(x){return-128<=x&&128>x?o(x,function(E){return new s([E|0],0>E?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return _;if(0>x)return N(u(-x));for(var E=[],C=1,D=0;x>=C;D++)E[D]=x/C|0,C*=4294967296;return new s(E,0)}function h(x,E){if(x.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x.charAt(0)=="-")return N(h(x.substring(1),E));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(E,8)),D=_,A=0;A<x.length;A+=8){var R=Math.min(8,x.length-A),b=parseInt(x.substring(A,A+R),E);8>R?(R=u(Math.pow(E,R)),D=D.j(R).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var _=c(0),I=c(1),T=c(16777216);n=s.prototype,n.m=function(){if(L(this))return-N(this).m();for(var x=0,E=1,C=0;C<this.g.length;C++){var D=this.i(C);x+=(0<=D?D:4294967296+D)*E,E*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(L(this))return"-"+N(this).toString(x);for(var E=u(Math.pow(x,6)),C=this,D="";;){var A=fe(C,E).g;C=q(C,A.j(E));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=A,k(C))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(var E=0;E<x.g.length;E++)if(x.g[E]!=0)return!1;return!0}function L(x){return x.h==-1}n.l=function(x){return x=q(this,x),L(x)?-1:k(x)?0:1};function N(x){for(var E=x.g.length,C=[],D=0;D<E;D++)C[D]=~x.g[D];return new s(C,~x.h).add(I)}n.abs=function(){return L(this)?N(this):this},n.add=function(x){for(var E=Math.max(this.g.length,x.g.length),C=[],D=0,A=0;A<=E;A++){var R=D+(this.i(A)&65535)+(x.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);D=b>>>16,R&=65535,b&=65535,C[A]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function q(x,E){return x.add(N(E))}n.j=function(x){if(k(this)||k(x))return _;if(L(this))return L(x)?N(this).j(N(x)):N(N(this).j(x));if(L(x))return N(this.j(N(x)));if(0>this.l(T)&&0>x.l(T))return u(this.m()*x.m());for(var E=this.g.length+x.g.length,C=[],D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<x.g.length;A++){var R=this.i(D)>>>16,b=this.i(D)&65535,Ct=x.i(A)>>>16,Hn=x.i(A)&65535;C[2*D+2*A]+=b*Hn,ee(C,2*D+2*A),C[2*D+2*A+1]+=R*Hn,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=R*Ct,ee(C,2*D+2*A+2)}for(D=0;D<E;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=E;D<2*E;D++)C[D]=0;return new s(C,0)};function ee(x,E){for(;(x[E]&65535)!=x[E];)x[E+1]+=x[E]>>>16,x[E]&=65535,E++}function K(x,E){this.g=x,this.h=E}function fe(x,E){if(k(E))throw Error("division by zero");if(k(x))return new K(_,_);if(L(x))return E=fe(N(x),E),new K(N(E.g),N(E.h));if(L(E))return E=fe(x,N(E)),new K(N(E.g),E.h);if(30<x.g.length){if(L(x)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;0>=D.l(x);)C=ze(C),D=ze(D);var A=me(C,1),R=me(D,1);for(D=me(D,2),C=me(C,2);!k(D);){var b=R.add(D);0>=b.l(x)&&(A=A.add(C),R=b),D=me(D,1),C=me(C,1)}return E=q(x,A.j(E)),new K(A,E)}for(A=_;0<=x.l(E);){for(C=Math.max(1,Math.floor(x.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=u(C),b=R.j(E);L(b)||0<b.l(x);)C-=D,R=u(C),b=R.j(E);k(R)&&(R=I),A=A.add(R),x=q(x,b)}return new K(A,x)}n.A=function(x){return fe(this,x).h},n.and=function(x){for(var E=Math.max(this.g.length,x.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)&x.i(D);return new s(C,this.h&x.h)},n.or=function(x){for(var E=Math.max(this.g.length,x.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)|x.i(D);return new s(C,this.h|x.h)},n.xor=function(x){for(var E=Math.max(this.g.length,x.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)^x.i(D);return new s(C,this.h^x.h)};function ze(x){for(var E=x.g.length+1,C=[],D=0;D<E;D++)C[D]=x.i(D)<<1|x.i(D-1)>>>31;return new s(C,x.h)}function me(x,E){var C=E>>5;E%=32;for(var D=x.g.length-C,A=[],R=0;R<D;R++)A[R]=0<E?x.i(R+C)>>>E|x.i(R+C+1)<<32-E:x.i(R+C);return new s(A,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QD=n3.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,rs=n3.Integer=s}).apply(typeof t3<"u"?t3:typeof self<"u"?self:typeof window<"u"?window:{});var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},is={};var YD,rre,Rd,JD,Pp,C0,ZD,XD,e1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,v){return l==Array.prototype||l==Object.prototype||(l[m]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof b0=="object"&&b0];for(var m=0;m<l.length;++m){var v=l[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,m){if(m)e:{var v=r;l=l.split(".");for(var M=0;M<l.length-1;M++){var V=l[M];if(!(V in v))break e;v=v[V]}l=l[l.length-1],M=v[l],m=m(M),m!=M&&m!=null&&e(v,l,{configurable:!0,writable:!0,value:m})}}function o(l,m){l instanceof String&&(l+="");var v=0,M=!1,V={next:function(){if(!M&&v<l.length){var B=v++;return{value:m(B,l[B]),done:!1}}return M=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return o(this,function(m,v){return v})}});var s=s||{},a=this||self;function c(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function u(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,v){return l.call.apply(l.bind,arguments)}function _(l,m,v){if(!l)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,M),l.apply(m,V)}}return function(){return l.apply(m,arguments)}}function I(l,m,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:_,I.apply(null,arguments)}function T(l,m){var v=Array.prototype.slice.call(arguments,1);return function(){var M=v.slice();return M.push.apply(M,arguments),l.apply(this,M)}}function k(l,m){function v(){}v.prototype=m.prototype,l.aa=m.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(M,V,B){for(var Y=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Y[rt-2]=arguments[rt];return m.prototype[V].apply(M,Y)}}function L(l){let m=l.length;if(0<m){let v=Array(m);for(let M=0;M<m;M++)v[M]=l[M];return v}return[]}function N(l,m){for(let v=1;v<arguments.length;v++){let M=arguments[v];if(c(M)){let V=l.length||0,B=M.length||0;l.length=V+B;for(let Y=0;Y<B;Y++)l[V+Y]=M[Y]}else l.push(M)}}class q{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(l){return/^[\s\xa0]*$/.test(l)}function K(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function fe(l){return fe[" "](l),l}fe[" "]=function(){};var ze=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function me(l,m,v){for(let M in l)m.call(v,l[M],M,l)}function x(l,m){for(let v in l)m.call(void 0,l[v],v,l)}function E(l){let m={};for(let v in l)m[v]=l[v];return m}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,m){let v,M;for(let V=1;V<arguments.length;V++){M=arguments[V];for(v in M)l[v]=M[v];for(let B=0;B<C.length;B++)v=C[B],Object.prototype.hasOwnProperty.call(M,v)&&(l[v]=M[v])}}function A(l){var m=1;l=l.split(":");let v=[];for(;0<m&&l.length;)v.push(l.shift()),m--;return l.length&&v.push(l.join(":")),v}function R(l){a.setTimeout(()=>{throw l},0)}function b(){var l=ps;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class Ct{constructor(){this.h=this.g=null}add(m,v){let M=Hn.get();M.set(m,v),this.h?this.h.next=M:this.g=M,this.h=M}}var Hn=new q(()=>new tE,l=>l.reset());class tE{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let La,bi=!1,ps=new Ct,vg=()=>{let l=a.Promise.resolve(void 0);La=()=>{l.then(wg)}};var wg=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(v){R(v)}var m=Hn;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}bi=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xt(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var _l=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};a.addEventListener("test",v,m),a.removeEventListener("test",v,m)}catch{}return l}();function mo(l,m){if(Xt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,M=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(ze){e:{try{fe(m.nodeName);var V=!0;break e}catch{}V=!1}V||(m=null)}}else v=="mouseover"?m=l.fromElement:v=="mouseout"&&(m=l.toElement);this.relatedTarget=m,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:gh[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&mo.aa.h.call(this)}}k(mo,Xt);var gh={2:"touch",3:"pen",4:"mouse"};mo.prototype.h=function(){mo.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var yo="closure_listenable_"+(1e6*Math.random()|0),mh=0;function Eg(l,m,v,M,V){this.listener=l,this.proxy=null,this.src=m,this.type=v,this.capture=!!M,this.ha=V,this.key=++mh,this.da=this.fa=!1}function Fa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function vl(l){this.src=l,this.g={},this.h=0}vl.prototype.add=function(l,m,v,M,V){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var Y=El(l,m,M,V);return-1<Y?(m=l[Y],v||(m.fa=!1)):(m=new Eg(m,this.src,B,!!M,V),m.fa=v,l.push(m)),m};function wl(l,m){var v=m.type;if(v in l.g){var M=l.g[v],V=Array.prototype.indexOf.call(M,m,void 0),B;(B=0<=V)&&Array.prototype.splice.call(M,V,1),B&&(Fa(m),l.g[v].length==0&&(delete l.g[v],l.h--))}}function El(l,m,v,M){for(var V=0;V<l.length;++V){var B=l[V];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==M)return V}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),Il={};function Ig(l,m,v,M,V){if(M&&M.once)return Cl(l,m,v,M,V);if(Array.isArray(m)){for(var B=0;B<m.length;B++)Ig(l,m[B],v,M,V);return null}return v=_o(v),l&&l[yo]?l.K(m,v,u(M)?!!M.capture:!!M,V):bl(l,m,v,!1,M,V)}function bl(l,m,v,M,V,B){if(!m)throw Error("Invalid event type");var Y=u(V)?!!V.capture:!!V,rt=Tl(l);if(rt||(l[Va]=rt=new vl(l)),v=rt.add(m,v,M,Y,B),v.proxy)return v;if(M=yh(),v.proxy=M,M.src=l,M.listener=v,l.addEventListener)_l||(V=Y),V===void 0&&(V=!1),l.addEventListener(m.toString(),M,V);else if(l.attachEvent)l.attachEvent(Ua(m.toString()),M);else if(l.addListener&&l.removeListener)l.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return v}function yh(){function l(v){return m.call(l.src,l.listener,v)}let m=nE;return l}function Cl(l,m,v,M,V){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Cl(l,m[B],v,M,V);return null}return v=_o(v),l&&l[yo]?l.L(m,v,u(M)?!!M.capture:!!M,V):bl(l,m,v,!0,M,V)}function en(l,m,v,M,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)en(l,m[B],v,M,V);else M=u(M)?!!M.capture:!!M,v=_o(v),l&&l[yo]?(l=l.i,m=String(m).toString(),m in l.g&&(B=l.g[m],v=El(B,v,M,V),-1<v&&(Fa(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete l.g[m],l.h--)))):l&&(l=Tl(l))&&(m=l.g[m.toString()],l=-1,m&&(l=El(m,v,M,V)),(v=-1<l?m[l]:null)&&tn(v))}function tn(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[yo])wl(m.i,l);else{var v=l.type,M=l.proxy;m.removeEventListener?m.removeEventListener(v,M,l.capture):m.detachEvent?m.detachEvent(Ua(v),M):m.addListener&&m.removeListener&&m.removeListener(M),(v=Tl(m))?(wl(v,l),v.h==0&&(v.src=null,m[Va]=null)):Fa(l)}}}function Ua(l){return l in Il?Il[l]:Il[l]="on"+l}function nE(l,m){if(l.da)l=!0;else{m=new mo(m,this);var v=l.listener,M=l.ha||l.src;l.fa&&tn(l),l=v.call(M,m)}return l}function Tl(l){return l=l[Va],l instanceof vl?l:null}var _h="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(l){return typeof l=="function"?l:(l[_h]||(l[_h]=function(m){return l.handleEvent(m)}),l[_h])}function nn(){Hr.call(this),this.i=new vl(this),this.M=this,this.F=null}k(nn,Hr),nn.prototype[yo]=!0,nn.prototype.removeEventListener=function(l,m,v,M){en(this,l,m,v,M)};function pn(l,m){var v,M=l.F;if(M)for(v=[];M;M=M.F)v.push(M);if(l=l.M,M=m.type||m,typeof m=="string")m=new Xt(m,l);else if(m instanceof Xt)m.target=m.target||l;else{var V=m;m=new Xt(M,l),D(m,V)}if(V=!0,v)for(var B=v.length-1;0<=B;B--){var Y=m.g=v[B];V=gs(Y,M,!0,m)&&V}if(Y=m.g=l,V=gs(Y,M,!0,m)&&V,V=gs(Y,M,!1,m)&&V,v)for(B=0;B<v.length;B++)Y=m.g=v[B],V=gs(Y,M,!1,m)&&V}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var v=l.g[m],M=0;M<v.length;M++)Fa(v[M]);delete l.g[m],l.h--}}this.F=null},nn.prototype.K=function(l,m,v,M){return this.i.add(String(l),m,!1,v,M)},nn.prototype.L=function(l,m,v,M){return this.i.add(String(l),m,!0,v,M)};function gs(l,m,v,M){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var V=!0,B=0;B<m.length;++B){var Y=m[B];if(Y&&!Y.da&&Y.capture==v){var rt=Y.listener,Lt=Y.ha||Y.src;Y.fa&&wl(l.i,Y),V=rt.call(Lt,M)!==!1&&V}}return V&&!M.defaultPrevented}function bg(l,m,v){if(typeof l=="function")v&&(l=I(l,v));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(l,m||0)}function Cg(l){l.g=bg(()=>{l.g=null,l.i&&(l.i=!1,Cg(l))},l.l);let m=l.h;l.h=null,l.m.apply(null,m)}class Tg extends Hr{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(l){Hr.call(this),this.h=l,this.g={}}k(ms,Hr);var ys=[];function Sl(l){me(l.g,function(m,v){this.g.hasOwnProperty(v)&&tn(m)},l),l.g={}}ms.prototype.N=function(){ms.aa.N.call(this),Sl(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ba=a.JSON.stringify,vo=a.JSON.parse,Sg=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function _s(){}_s.prototype.h=null;function vh(l){return l.h||(l.h=l.i())}function vs(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rn(){Xt.call(this,"d")}k(rn,Xt);function Al(){Xt.call(this,"c")}k(Al,Xt);var ar={},Es=null;function Dl(){return Es=Es||new nn}ar.La="serverreachability";function Ag(l){Xt.call(this,ar.La,l)}k(Ag,Xt);function Tr(l){let m=Dl();pn(m,new Ag(m))}ar.STAT_EVENT="statevent";function Dg(l,m){Xt.call(this,ar.STAT_EVENT,l),this.stat=m}k(Dg,Xt);function En(l){let m=Dl();pn(m,new Dg(m,l))}ar.Ma="timingevent";function ja(l,m){Xt.call(this,ar.Ma,l),this.size=m}k(ja,Xt);function Is(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},m)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function wh(l,m,v,M,V,B){l.info(function(){if(l.g)if(B)for(var Y="",rt=B.split("&"),Lt=0;Lt<rt.length;Lt++){var it=rt[Lt].split("=");if(1<it.length){var xn=it[0];it=it[1];var Mn=xn.split("_");Y=2<=Mn.length&&Mn[1]=="type"?Y+(xn+"="+it+"&"):Y+(xn+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+M+") [attempt "+V+"]: "+m+`
`+v+`
`+Y})}function za(l,m,v,M,V,B,Y){l.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+V+"]: "+m+`
`+v+`
`+B+" "+Y})}function Cs(l,m,v,M){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+xg(l,v)+(M?" "+M:"")})}function Ci(l,m){l.info(function(){return"TIMEOUT: "+m})}bs.prototype.info=function(){};function xg(l,m){if(!l.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var M=v[l];if(!(2>M.length)){var V=M[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return Ba(v)}catch{return m}}var $a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ha;function qa(){}k(qa,_s),qa.prototype.g=function(){return new XMLHttpRequest},qa.prototype.i=function(){return{}},Ha=new qa;function Ti(l,m,v,M){this.j=l,this.i=m,this.l=v,this.R=M||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}var Mg={},Ts={};function Ml(l,m,v){l.L=1,l.v=Ol(qr(m)),l.m=v,l.P=!0,Pl(l,null)}function Pl(l,m){l.F=Date.now(),As(l),l.A=qr(l.v);var v=l.A,M=l.R;Array.isArray(M)||(M=[String(M)]),Vg(v.i,"t",M),l.C=0,v=l.j.J,l.h=new Eh,l.g=y(l.j,v?m:null,!l.m),0<l.O&&(l.M=new Tg(I(l.Y,l,l.g),l.O)),m=l.U,v=l.g,M=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(ys[0]=V.toString()),V=ys);for(var B=0;B<V.length;B++){var Y=Ig(v,V[B],M||m.handleEvent,!1,m.h||m);if(!Y)break;m.g[Y.key]=Y}m=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),Tr(),wh(l.i,l.u,l.A,l.l,l.R,l.m)}Ti.prototype.ca=function(l){l=l.target;let m=this.M;m&&Gn(l)==3?m.j():this.Y(l)},Ti.prototype.Y=function(l){try{if(l==this.g)e:{let Mn=Gn(this.g);var m=this.g.Ba();let $l=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||$g(this.g)))){this.J||Mn!=4||m==7||(m==8||0>=$l?Tr(3):Tr(2)),Rl(this);var v=this.g.Z();this.X=v;t:if(Ss(this)){var M=$g(this.g);l="";var V=M.length,B=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Ds(this);var Y="";break t}this.h.i=new a.TextDecoder}for(m=0;m<V;m++)this.h.h=!0,l+=this.h.i.decode(M[m],{stream:!(B&&m==V-1)});M.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=v==200,za(this.i,this.u,this.A,this.l,this.R,Mn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Lt=this.g;if((rt=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(rt)){var it=rt;break t}}it=null}if(v=it)Cs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,v);else{this.o=!1,this.s=3,En(12),Si(this),Ds(this);break e}}if(this.P){v=!0;let Yr;for(;!this.J&&this.C<Y.length;)if(Yr=wo(this,Y),Yr==Ts){Mn==4&&(this.s=4,En(14),v=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Yr==Mg){this.s=4,En(15),Cs(this.i,this.l,Y,"[Invalid Chunk]"),v=!1;break}else Cs(this.i,this.l,Yr,null),Ga(this,Yr);if(Ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||Y.length!=0||this.h.h||(this.s=1,En(16),v=!1),this.o=this.o&&v,!v)Cs(this.i,this.l,Y,"[Invalid Chunked Response]"),Si(this),Ds(this);else if(0<Y.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),zl(xn),xn.M=!0,En(11))}}else Cs(this.i,this.l,Y,null),Ga(this,Y);Mn==4&&Si(this),this.o&&!this.J&&(Mn==4?Dn(this.j,this):(this.o=!1,As(this)))}else Hg(this.g),v==400&&0<Y.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),Si(this),Ds(this)}}}catch{}finally{}};function Ss(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function wo(l,m){var v=l.C,M=m.indexOf(`
`,v);return M==-1?Ts:(v=Number(m.substring(v,M)),isNaN(v)?Mg:(M+=1,M+v>m.length?Ts:(m=m.slice(M,M+v),l.C=M+v,m)))}Ti.prototype.cancel=function(){this.J=!0,Si(this)};function As(l){l.S=Date.now()+l.I,Pg(l,l.I)}function Pg(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Is(I(l.ba,l),m)}function Rl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ti.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Ci(this.i,this.A),this.L!=2&&(Tr(),En(17)),Si(this),this.s=2,Ds(this)):Pg(this,this.S-l)};function Ds(l){l.j.G==0||l.J||Dn(l.j,l)}function Si(l){Rl(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,Sl(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Ga(l,m){try{var v=l.j;if(v.G!=0&&(v.g==l||Sh(v.h,l))){if(!l.K&&Sh(v.h,l)&&v.G==3){try{var M=v.Da.g.parse(m)}catch{M=null}if(Array.isArray(M)&&M.length==3){var V=M;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)Io(v),Ns(v);else break e;jl(v),En(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=Is(I(v.Za,v),6e3));if(1>=Th(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xi(v,11)}else if((l.K||v.g==l)&&Io(v),!ee(m))for(V=v.Da.g.parse(m),m=0;m<V.length;m++){let it=V[m];if(v.T=it[0],it=it[1],v.G==2)if(it[0]=="c"){v.K=it[1],v.ia=it[2];let xn=it[3];xn!=null&&(v.la=xn,v.j.info("VER="+v.la));let Mn=it[4];Mn!=null&&(v.Aa=Mn,v.j.info("SVER="+v.Aa));let $l=it[5];$l!=null&&typeof $l=="number"&&0<$l&&(M=1.5*$l,v.L=M,v.j.info("backChannelRequestTimeoutMs_="+M)),M=v;let Yr=l.g;if(Yr){let qg=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qg){var B=M.h;B.g||qg.indexOf("spdy")==-1&&qg.indexOf("quic")==-1&&qg.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Sr(B,B.h),B.h=null))}if(M.D){let iE=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;iE&&(M.ya=iE,yt(M.I,M.D,iE))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),M=v;var Y=l;if(M.qa=d(M,M.J?M.ia:null,M.W),Y.K){cr(M.h,Y);var rt=Y,Lt=M.L;Lt&&(rt.I=Lt),rt.B&&(Rl(rt),As(rt)),M.g=Y}else Nh(M);0<v.i.length&&Xa(v)}else it[0]!="stop"&&it[0]!="close"||xi(v,7);else v.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?xi(v,7):Vl(v):it[0]!="noop"&&v.l&&v.l.ta(it),v.v=0)}}Tr(4)}catch{}}var Ih=class{constructor(l,m){this.g=l,this.map=m}};function bh(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ch(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Th(l){return l.h?1:l.g?l.g.size:0}function Sh(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Sr(l,m){l.g?l.g.add(m):l.h=m}function cr(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}bh.prototype.cancel=function(){if(this.i=xs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function xs(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(let v of l.g.values())m=m.concat(v.D);return m}return L(l.i)}function Wa(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var m=[],v=l.length,M=0;M<v;M++)m.push(l[M]);return m}m=[],v=0;for(M in l)m[v++]=l[M];return m}function Ah(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var m=[];l=l.length;for(var v=0;v<l;v++)m.push(v);return m}m=[],v=0;for(let M in l)m[v++]=M;return m}}}function ft(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var v=Ah(l),M=Wa(l),V=M.length,B=0;B<V;B++)m.call(void 0,M[B],v&&v[B],l)}var Ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(l,m){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var M=l[v].indexOf("="),V=null;if(0<=M){var B=l[v].substring(0,M);V=l[v].substring(M+1)}else B=l[v];m(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function lr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof lr){this.h=l.h,Ya(this,l.j),this.o=l.o,this.g=l.g,kl(this,l.s),this.l=l.l;var m=l.i,v=new Ja;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Rg(this,v),this.m=l.m}else l&&(m=String(l).match(Ka))?(this.h=!1,Ya(this,m[1]||"",!0),this.o=Gr(m[2]||""),this.g=Gr(m[3]||"",!0),kl(this,m[4]),this.l=Gr(m[5]||"",!0),Rg(this,m[6]||"",!0),this.m=Gr(m[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}lr.prototype.toString=function(){var l=[],m=this.j;m&&l.push(ur(m,Dh,!0),":");var v=this.g;return(v||m=="file")&&(l.push("//"),(m=this.o)&&l.push(ur(m,Dh,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(ur(v,v.charAt(0)=="/"?Ng:Og,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",ur(v,Ms)),l.join("")};function qr(l){return new lr(l)}function Ya(l,m,v){l.j=v?Gr(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function kl(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Rg(l,m,v){m instanceof Ja?(l.i=m,Nl(l.i,l.h)):(v||(m=ur(m,Lg)),l.i=new Ja(m,l.h))}function yt(l,m,v){l.i.set(m,v)}function Ol(l){return yt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Gr(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ur(l,m,v){return typeof l=="string"?(l=encodeURI(l).replace(m,kg),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function kg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Dh=/[#\/\?@]/g,Og=/[#\?:]/g,Ng=/[#\?]/g,Lg=/[#\?@]/g,Ms=/#/g;function Ja(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Ai(l){l.g||(l.g=new Map,l.h=0,l.i&&Qa(l.i,function(m,v){l.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Ja.prototype,n.add=function(l,m){Ai(this),this.i=null,l=Kr(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(m),this.h+=1,this};function Fg(l,m){Ai(l),m=Kr(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Wr(l,m){return Ai(l),m=Kr(l,m),l.g.has(m)}n.forEach=function(l,m){Ai(this),this.g.forEach(function(v,M){v.forEach(function(V){l.call(m,V,M,this)},this)},this)},n.na=function(){Ai(this);let l=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let M=0;M<m.length;M++){let V=l[M];for(let B=0;B<V.length;B++)v.push(m[M])}return v},n.V=function(l){Ai(this);let m=[];if(typeof l=="string")Wr(this,l)&&(m=m.concat(this.g.get(Kr(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)m=m.concat(l[v])}return m},n.set=function(l,m){return Ai(this),this.i=null,l=Kr(this,l),Wr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},n.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function Vg(l,m,v){Fg(l,m),0<v.length&&(l.i=null,l.g.set(Kr(l,m),L(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var M=m[v];let B=encodeURIComponent(String(M)),Y=this.V(M);for(M=0;M<Y.length;M++){var V=B;Y[M]!==""&&(V+="="+encodeURIComponent(String(Y[M]))),l.push(V)}}return this.i=l.join("&")};function Kr(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function Nl(l,m){m&&!l.j&&(Ai(l),l.i=null,l.g.forEach(function(v,M){var V=M.toLowerCase();M!=V&&(Fg(this,M),Vg(this,V,v))},l)),l.j=m}function Ug(l,m){let v=new bs;if(a.Image){let M=new Image;M.onload=T(qn,v,"TestLoadImage: loaded",!0,m,M),M.onerror=T(qn,v,"TestLoadImage: error",!1,m,M),M.onabort=T(qn,v,"TestLoadImage: abort",!1,m,M),M.ontimeout=T(qn,v,"TestLoadImage: timeout",!1,m,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=l}else m(!1)}function Za(l,m){let v=new bs,M=new AbortController,V=setTimeout(()=>{M.abort(),qn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:M.signal}).then(B=>{clearTimeout(V),B.ok?qn(v,"TestPingServer: ok",!0,m):qn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),qn(v,"TestPingServer: error",!1,m)})}function qn(l,m,v,M,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),M(v)}catch{}}function Bg(){this.g=new Sg}function xh(l,m,v){let M=v||"";try{ft(l,function(V,B){let Y=V;u(V)&&(Y=Ba(V)),m.push(M+B+"="+encodeURIComponent(Y))})}catch(V){throw m.push(M+"type="+encodeURIComponent("_badmap")),V}}function pt(l){this.l=l.Ub||null,this.j=l.eb||!1}k(pt,_s),pt.prototype.g=function(){return new Ll(this.l,this.j)},pt.prototype.i=function(l){return function(){return l}}({});function Ll(l,m){nn.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ll,nn),n=Ll.prototype,n.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Rs(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function jg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Ps(this):Rs(this),this.readyState==3&&jg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ps(this))},n.Qa=function(l){this.g&&(this.response=l,Ps(this))},n.ga=function(){this.g&&Ps(this)};function Ps(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rs(l)}n.setRequestHeader=function(l,m){this.u.append(l,m)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=m.next();return l.join(`\r
`)};function Rs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Mh(l){let m="";return me(l,function(v,M){m+=M,m+=":",m+=v,m+=`\r
`}),m}function ks(l,m,v){e:{for(M in v){var M=!1;break e}M=!0}M||(v=Mh(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):yt(l,m,v))}function ot(l){nn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ot,nn);var zg=/^https?$/i,rE=["POST","PUT"];n=ot.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,m,v,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ha.g(),this.v=this.o?vh(this.o):vh(Ha),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(B){Os(this,B);return}if(l=v||"",v=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var V in M)v.set(V,M[V]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(let B of M.keys())v.set(B,M.get(B));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rE,m,void 0))||M||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Y]of v)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rh(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Os(this,B)}};function Os(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,Ph(l),Eo(l)}function Ph(l){l.A||(l.A=!0,pn(l,"complete"),pn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pn(this,"complete"),pn(this,"abort"),Eo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eo(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},n.bb=function(){Fl(this)};function Fl(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Gn(l)!=4||l.Z()!=2)){if(l.u&&Gn(l)==4)bg(l.Ea,0,l);else if(pn(l,"readystatechange"),Gn(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var M;if(M=Y===0){var V=String(l.D).match(Ka)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),M=!zg.test(V?V.toLowerCase():"")}v=M}if(v)pn(l,"complete"),pn(l,"success");else{l.m=6;try{var B=2<Gn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Ph(l)}}finally{Eo(l)}}}}function Eo(l,m){if(l.g){Rh(l);let v=l.g,M=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||pn(l,"ready");try{v.onreadystatechange=M}catch{}}}function Rh(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Gn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),vo(m)}};function $g(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Hg(l){let m={};l=(l.g&&2<=Gn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<l.length;M++){if(ee(l[M]))continue;var v=A(l[M]);let V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let B=m[V]||[];m[V]=B,B.push(v)}x(m,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(l,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||m}function kh(l){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,l),this.cb=Qr("retryDelaySeedMs",1e4,l),this.Wa=Qr("forwardChannelMaxRetries",2,l),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new bh(l&&l.concurrentRequestLimit),this.Da=new Bg,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kh.prototype,n.la=8,n.G=1,n.connect=function(l,m,v,M){En(0),this.W=l,this.H=m||{},v&&M!==void 0&&(this.H.OSID=v,this.H.OAID=M),this.F=this.X,this.I=d(this,null,this.W),Xa(this)};function Vl(l){if(Ul(l),l.G==3){var m=l.U++,v=qr(l.I);if(yt(v,"SID",l.K),yt(v,"RID",m),yt(v,"TYPE","terminate"),Ls(l,v),m=new Ti(l,l.j,m),m.L=2,m.v=Ol(qr(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=m.v,v=!0),v||(m.g=y(m.j,null),m.g.ea(m.v)),m.F=Date.now(),As(m)}bo(l)}function Ns(l){l.g&&(zl(l),l.g.cancel(),l.g=null)}function Ul(l){Ns(l),l.u&&(a.clearTimeout(l.u),l.u=null),Io(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xa(l){if(!Ch(l.h)&&!l.s){l.s=!0;var m=l.Ga;La||vg(),bi||(La(),bi=!0),ps.add(m,l),l.B=0}}function Bl(l,m){return Th(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Is(I(l.Ga,l,m),Fh(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new Ti(this,this.j,l),B=this.o;if(this.S&&(B?(B=E(B),D(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var M=this.i[v];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(m+=M,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Di(this,V,m),v=qr(this.I),yt(v,"RID",l),yt(v,"CVER",22),this.D&&yt(v,"X-HTTP-Session-Id",this.D),Ls(this,v),B&&(this.O?m="headers="+encodeURIComponent(String(Mh(B)))+"&"+m:this.m&&ks(v,this.m,B)),Sr(this.h,V),this.Ua&&yt(v,"TYPE","init"),this.P?(yt(v,"$req",m),yt(v,"SID","null"),V.T=!0,Ml(V,v,null)):Ml(V,v,m),this.G=2}}else this.G==3&&(l?Oh(this,l):this.i.length==0||Ch(this.h)||Oh(this))};function Oh(l,m){var v;m?v=m.l:v=l.U++;let M=qr(l.I);yt(M,"SID",l.K),yt(M,"RID",v),yt(M,"AID",l.T),Ls(l,M),l.m&&l.o&&ks(M,l.m,l.o),v=new Ti(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Di(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Sr(l.h,v),Ml(v,M,m)}function Ls(l,m){l.H&&me(l.H,function(v,M){yt(m,M,v)}),l.l&&ft({},function(v,M){yt(m,M,v)})}function Di(l,m,v){v=Math.min(l.i.length,v);var M=l.l?I(l.l.Na,l.l,l):null;e:{var V=l.i;let B=-1;for(;;){let Y=["count="+v];B==-1?0<v?(B=V[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let rt=!0;for(let Lt=0;Lt<v;Lt++){let it=V[Lt].g,xn=V[Lt].map;if(it-=B,0>it)B=Math.max(0,V[Lt].g-100),rt=!1;else try{xh(xn,Y,"req"+it+"_")}catch{M&&M(xn)}}if(rt){M=Y.join("&");break e}}}return l=l.i.splice(0,v),m.D=l,M}function Nh(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;La||vg(),bi||(La(),bi=!0),ps.add(m,l),l.v=0}}function jl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Is(I(l.Fa,l),Fh(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Is(I(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),Ns(this),Lh(this))};function zl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Lh(l){l.g=new Ti(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=qr(l.qa);yt(m,"RID","rpc"),yt(m,"SID",l.K),yt(m,"AID",l.T),yt(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&yt(m,"TO",l.ja),yt(m,"TYPE","xmlhttp"),Ls(l,m),l.m&&l.o&&ks(m,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Ol(qr(m)),v.m=null,v.P=!0,Pl(v,l)}n.Za=function(){this.C!=null&&(this.C=null,Ns(this),jl(this),En(19))};function Io(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Dn(l,m){var v=null;if(l.g==m){Io(l),zl(l),l.g=null;var M=2}else if(Sh(l.h,m))v=m.D,cr(l.h,m),M=1;else return;if(l.G!=0){if(m.o)if(M==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var V=l.B;M=Dl(),pn(M,new ja(M,v)),Xa(l)}else Nh(l);else if(V=m.s,V==3||V==0&&0<m.X||!(M==1&&Bl(l,m)||M==2&&jl(l)))switch(v&&0<v.length&&(m=l.h,m.i=m.i.concat(v)),V){case 1:xi(l,5);break;case 4:xi(l,10);break;case 3:xi(l,6);break;default:xi(l,2)}}}function Fh(l,m){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*m}function xi(l,m){if(l.j.info("Error code "+m),m==2){var v=I(l.fb,l),M=l.Xa;let V=!M;M=new lr(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ya(M,"https"),Ol(M),V?Ug(M.toString(),v):Za(M.toString(),v)}else En(2);l.G=0,l.l&&l.l.sa(m),bo(l),Ul(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function bo(l){if(l.G=0,l.ka=[],l.l){let m=xs(l.h);(m.length!=0||l.i.length!=0)&&(N(l.ka,m),N(l.ka,l.i),l.h.i.length=0,L(l.i),l.i.length=0),l.l.ra()}}function d(l,m,v){var M=v instanceof lr?qr(v):new lr(v);if(M.g!="")m&&(M.g=m+"."+M.g),kl(M,M.s);else{var V=a.location;M=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;var B=new lr(null);M&&Ya(B,M),m&&(B.g=m),V&&kl(B,V),v&&(B.l=v),M=B}return v=l.D,m=l.ya,v&&m&&yt(M,v,m),yt(M,"VER",l.la),Ls(l,M),M}function y(l,m,v){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new ot(new pt({eb:v})):new ot(l.pa),m.Ha(l.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function w(){}n=w.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function P(){}P.prototype.g=function(l,m){return new F(l,m)};function F(l,m){nn.call(this),this.g=new kh(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!ee(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Te(this)}k(F,nn),F.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},F.prototype.close=function(){Vl(this.g)},F.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=Ba(l),l=v);m.i.push(new Ih(m.Ya++,l)),m.G==3&&Xa(m)},F.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,F.aa.N.call(this)};function U(l){rn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(let v in m){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}k(U,rn);function Z(){Al.call(this),this.status=1}k(Z,Al);function Te(l){this.g=l}k(Te,w),Te.prototype.ua=function(){pn(this.g,"a")},Te.prototype.ta=function(l){pn(this.g,new U(l))},Te.prototype.sa=function(l){pn(this.g,new Z)},Te.prototype.ra=function(){pn(this.g,"b")},P.prototype.createWebChannel=P.prototype.g,F.prototype.send=F.prototype.o,F.prototype.open=F.prototype.m,F.prototype.close=F.prototype.close,e1=is.createWebChannelTransport=function(){return new P},XD=is.getStatEventTarget=function(){return Dl()},ZD=is.Event=ar,C0=is.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$a.NO_ERROR=0,$a.TIMEOUT=8,$a.HTTP_ERROR=6,Pp=is.ErrorCode=$a,xl.COMPLETE="complete",JD=is.EventType=xl,vs.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",nn.prototype.listen=nn.prototype.K,Rd=is.WebChannel=vs,rre=is.FetchXmlHttpFactory=pt,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,YD=is.XhrIo=ot}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var r3="@firebase/firestore",i3="4.8.0";var vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");var Xd="11.10.0";var il=new Yi("@firebase/firestore");function kd(){return il.logLevel}function ce(n,...e){if(il.logLevel<=He.DEBUG){let t=e.map(zx);il.debug(`Firestore (${Xd}): ${n}`,...t)}}function ss(n,...e){if(il.logLevel<=He.ERROR){let t=e.map(zx);il.error(`Firestore (${Xd}): ${n}`,...t)}}function Sa(n,...e){if(il.logLevel<=He.WARN){let t=e.map(zx);il.warn(`Firestore (${Xd}): ${n}`,...t)}}function zx(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Q3(n,r,t)}function Q3(n,e,t){let r=`FIRESTORE (${Xd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ss(r),new Error(r)}function ht(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Q3(e,i,r)}function Me(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oe=class extends zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _i=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var P0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},o1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}},s1=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},a1=class{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _i,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _i)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new P0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new vn(e)}},c1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},l1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new c1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},R0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},u1=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);let r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new R0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new R0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ire(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Y3(){return new TextEncoder}var Fp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ire(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function je(n,e){return n<e?-1:n>e?1:0}function d1(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return je(r,i);{let o=Y3(),s=ore(o.encode(o3(n,t)),o.encode(o3(e,t)));return s!==0?s:je(r,i)}}t+=r>65535?2:1}return je(n.length,e.length)}function o3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ore(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return je(n[t],e[t]);return je(n.length,e.length)}function jd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var s3="__name__",k0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):d1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}},xt=class n extends k0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},sre=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cr=class n extends k0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return sre.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s3}static keyField(){return new n([s3])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var _e=class n{constructor(e){this.path=e}static fromPath(e){return new n(xt.fromString(e))}static fromName(e){return new n(xt.fromString(e).popFirst(5))}static empty(){return new n(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xt(e.slice()))}};function J3(n,e,t){if(!t)throw new oe(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function are(n,e,t,r){if(e===!0&&r===!0)throw new oe(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function a3(n){if(!_e.isDocumentKey(n))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function c3(n){if(_e.isDocumentKey(n))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Z3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function as(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=fw(n);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cre(n,e){if(e<=0)throw new oe(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Yt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Yp(n,e){if(!Z3(n))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new oe(H.INVALID_ARGUMENT,t);return!0}var l3=-62135596800,u3=1e6,Jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*u3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<l3)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u3}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-l3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Yt("string",Jt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vp=-1,h1=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};h1.UNKNOWN_ID=-1;function lre(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new ol(i,_e.empty(),e)}function ure(n){return new ol(n.readTime,n.key,Vp)}var ol=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),_e.empty(),Vp)}static max(){return new n(ke.max(),_e.empty(),Vp)}};function dre(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}var hre="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",f1=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function eh(n){return S(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==hre)throw n;ce("LocalStore","Unexpectedly lost primary lease")})}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function fre(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function th(n){return n.name==="IndexedDbTransactionError"}var $x=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Hx=-1;function pw(n){return n==null}function Up(n){return n===0&&1/n==-1/0}function pre(n){return typeof n=="number"&&Number.isInteger(n)&&!Up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var X3="";function gre(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d3(e)),e=mre(n.get(t),e);return d3(e)}function mre(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case X3:t+="";break;default:t+=o}}return t}function d3(n){return n+X3+""}var yre="remoteDocuments",e5="owner";var t5="mutationQueues";var n5="mutations";var r5="documentMutations",_re="remoteDocumentsV14";var i5="remoteDocumentGlobal";var o5="targets";var s5="targetDocuments";var a5="targetGlobal",c5="collectionParents";var l5="clientMetadata";var u5="bundles";var d5="namedQueries";var vre="indexConfiguration";var wre="indexState";var Ere="indexEntries";var h5="documentOverlays";var Ire="globals";var bre=[t5,n5,r5,yre,o5,e5,a5,s5,l5,i5,c5,u5,d5],VCe=[...bre,h5],Cre=[t5,n5,r5,_re,o5,e5,a5,s5,l5,i5,c5,u5,d5,h5],Tre=Cre,Sre=[...Tre,vre,wre,Ere];var UCe=[...Sre,Ire];function h3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ka(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function f5(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ot=class n{constructor(e,t){this.comparator=e,this.root=t||so.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,so.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,so.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}},Fd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},so=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};so.EMPTY=null,so.RED=!0,so.BLACK=!1;so.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new so(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wn=class n{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},O0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jr=class n{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new n([])}unionWith(e){let t=new wn(Cr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var N0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Un=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new N0("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Un.EMPTY_BYTE_STRING=new Un("");var Are=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(n){if(ht(!!n,39018),typeof n=="string"){let e=0,t=Are.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?Un.fromBase64String(n):Un.fromUint8Array(n)}var p5="server_timestamp",g5="__type__",m5="__previous_value__",y5="__local_write_time__";function qx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[g5])===null||t===void 0?void 0:t.stringValue)===p5}function gw(n){let e=n.mapValue.fields[m5];return qx(e)?gw(e):e}function Bp(n){let e=cs(n.mapValue.fields[y5].timestampValue);return new Jt(e.seconds,e.nanos)}var p1=class{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},L0="(default)",F0=class n{constructor(e,t){this.projectId=e,this.database=t||L0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===L0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gx="__type__",_5="__max__",T0={mapValue:{fields:{__type__:{stringValue:_5}}}},Wx="__vector__",zd="value";function Aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qx(n)?4:w5(n)?9007199254740991:v5(n)?10:11:we(28295,{value:n})}function lo(n,e){if(n===e)return!0;let t=Aa(n);if(t!==Aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bp(n).isEqual(Bp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=cs(i.timestampValue),a=cs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ls(i.bytesValue).isEqual(ls(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Dt(i.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Dt(i.integerValue)===Dt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Dt(i.doubleValue),a=Dt(o.doubleValue);return s===a?Up(s)===Up(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return jd(n.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(h3(s)!==h3(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!lo(s[c],a[c])))return!1;return!0}(n,e);default:return we(52216,{left:n})}}function jp(n,e){return(n.values||[]).find(t=>lo(t,e))!==void 0}function $d(n,e){if(n===e)return 0;let t=Aa(n),r=Aa(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Dt(o.integerValue||o.doubleValue),c=Dt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return f3(n.timestampValue,e.timestampValue);case 4:return f3(Bp(n),Bp(e));case 5:return d1(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ls(o),c=ls(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=je(a[u],c[u]);if(h!==0)return h}return je(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=je(Dt(o.latitude),Dt(s.latitude));return a!==0?a:je(Dt(o.longitude),Dt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return p3(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,h;let _=o.fields||{},I=s.fields||{},T=(a=_[zd])===null||a===void 0?void 0:a.arrayValue,k=(c=I[zd])===null||c===void 0?void 0:c.arrayValue,L=je(((u=T?.values)===null||u===void 0?void 0:u.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return L!==0?L:p3(T,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===T0.mapValue&&s===T0.mapValue)return 0;if(o===T0.mapValue)return 1;if(s===T0.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let _=0;_<c.length&&_<h.length;++_){let I=d1(c[_],h[_]);if(I!==0)return I;let T=$d(a[c[_]],u[h[_]]);if(T!==0)return T}return je(c.length,h.length)}(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function f3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);let t=cs(n),r=cs(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function p3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=$d(t[i],r[i]);if(o)return o}return je(t.length,r.length)}function Hd(n){return g1(n)}function g1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=cs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=g1(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${g1(t.fields[s])}`;return i+"}"}(n.mapValue):we(61005,{value:n})}function D0(n){switch(Aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=gw(n);return e?16+D0(e):16;case 5:return 2*n.stringValue.length;case 6:return ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+D0(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ka(r.fields,(o,s)=>{i+=o.length+D0(s)}),i}(n.mapValue);default:throw we(13486,{value:n})}}function g3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function m1(n){return!!n&&"integerValue"in n}function Kx(n){return!!n&&"arrayValue"in n}function m3(n){return!!n&&"nullValue"in n}function y3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function x0(n){return!!n&&"mapValue"in n}function v5(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gx])===null||t===void 0?void 0:t.stringValue)===Wx}function kp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ka(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function w5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_5}var jCe={mapValue:{fields:{[Gx]:{stringValue:Wx},[zd]:{arrayValue:{}}}}};var br=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!x0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kp(t)}setAll(e){let t=Cr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=kp(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());x0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];x0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ka(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(kp(this.value))}};function E5(n){let e=[];return ka(n.fields,(t,r)=>{let i=new Cr([t]);if(x0(r)){let o=E5(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jr(e)}var vi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),br.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),br.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qd=class{constructor(e,t){this.position=e,this.inclusive=t}};function _3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(s.referenceValue),t.key):r=$d(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function v3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lo(n.position[t],e.position[t]))return!1;return!0}var sl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Dre(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var V0=class{},Qt=class n extends V0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _1(e,t,r):t==="array-contains"?new E1(e,r):t==="in"?new I1(e,r):t==="not-in"?new b1(e,r):t==="array-contains-any"?new C1(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new v1(e,r):new w1(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($d(t,this.value)):t!==null&&Aa(this.value)===Aa(t)&&this.matchesComparison($d(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wi=class n extends V0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return I5(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function I5(n){return n.op==="and"}function b5(n){return xre(n)&&I5(n)}function xre(n){for(let e of n.filters)if(e instanceof wi)return!1;return!0}function y1(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Hd(n.value);if(b5(n))return n.filters.map(e=>y1(e)).join(",");{let e=n.filters.map(t=>y1(t)).join(",");return`${n.op}(${e})`}}function C5(n,e){return n instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.field.isEqual(i.field)&&lo(r.value,i.value)}(n,e):n instanceof wi?function(r,i){return i instanceof wi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&C5(s,i.filters[a]),!0):!1}(n,e):void we(19439)}function T5(n){return n instanceof Qt?function(t){return`${t.field.canonicalString()} ${t.op} ${Hd(t.value)}`}(n):n instanceof wi?function(t){return t.op.toString()+" {"+t.getFilters().map(T5).join(" ,")+"}"}(n):"Filter"}var _1=class extends Qt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){let t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}},v1=class extends Qt{constructor(e,t){super(e,"in",t),this.keys=S5("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},w1=class extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=S5("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function S5(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}var E1=class extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Kx(t)&&jp(t.arrayValue,this.value)}},I1=class extends Qt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jp(this.value.arrayValue,t)}},b1=class extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jp(this.value.arrayValue,t)}},C1=class extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Kx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jp(this.value.arrayValue,r))}};var T1=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function w3(n,e=null,t=[],r=[],i=null,o=null,s=null){return new T1(n,e,t,r,i,o,s)}function Qx(n){let e=Me(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>y1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),pw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hd(r)).join(",")),e.Pe=t}return e.Pe}function Yx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Dre(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!C5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!v3(n.startAt,e.startAt)&&v3(n.endAt,e.endAt)}function S1(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Da=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Mre(n,e,t,r,i,o,s,a){return new Da(n,e,t,r,i,o,s,a)}function Jx(n){return new Da(n)}function E3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function A5(n){return n.collectionGroup!==null}function Op(n){let e=Me(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wn(Cr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new sl(o,r))}),t.has(Cr.keyField().canonicalString())||e.Te.push(new sl(Cr.keyField(),r))}return e.Te}function ao(n){let e=Me(n);return e.Ie||(e.Ie=Pre(e,Op(n))),e.Ie}function Pre(n,e){if(n.limitType==="F")return w3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new sl(i.field,o)});let t=n.endAt?new qd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qd(n.startAt.position,n.startAt.inclusive):null;return w3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function A1(n,e){let t=n.filters.concat([e]);return new Da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function U0(n,e,t){return new Da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mw(n,e){return Yx(ao(n),ao(e))&&n.limitType===e.limitType}function D5(n){return`${Qx(ao(n))}|lt:${n.limitType}`}function Od(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>T5(i)).join(", ")}]`),pw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hd(i)).join(",")),`Target(${r})`}(ao(n))}; limitType=${n.limitType})`}function yw(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Op(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=_3(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Op(r),i)||r.endAt&&!function(s,a,c){let u=_3(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Op(r),i))}(n,e)}function Rre(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function x5(n){return(e,t)=>{let r=!1;for(let i of Op(n)){let o=kre(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function kre(n,e,t){let r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?$d(c,u):we(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var us=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return f5(this.inner)}size(){return this.innerSize}};var Ore=new Ot(_e.comparator);function ds(){return Ore}var M5=new Ot(_e.comparator);function Rp(...n){let e=M5;for(let t of n)e=e.insert(t.key,t);return e}function P5(n){let e=M5;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function el(){return Np()}function R5(){return Np()}function Np(){return new us(n=>n.toString(),(n,e)=>n.isEqual(e))}var Nre=new Ot(_e.comparator),Lre=new wn(_e.comparator);function Ke(...n){let e=Lre;for(let t of n)e=e.add(t);return e}var Fre=new wn(je);function Vre(){return Fre}function Zx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function k5(n){return{integerValue:""+n}}function Ure(n,e){return pre(e)?k5(e):Zx(n,e)}var Gd=class{constructor(){this._=void 0}};function Bre(n,e,t){return n instanceof Wd?function(i,o){let s={fields:{[g5]:{stringValue:p5},[y5]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qx(o)&&(o=gw(o)),o&&(s.fields[m5]=o),{mapValue:s}}(t,e):n instanceof al?N5(n,e):n instanceof cl?L5(n,e):function(i,o){let s=O5(i,o),a=I3(s)+I3(i.Ee);return m1(s)&&m1(i.Ee)?k5(a):Zx(i.serializer,a)}(n,e)}function jre(n,e,t){return n instanceof al?N5(n,e):n instanceof cl?L5(n,e):t}function O5(n,e){return n instanceof Kd?function(r){return m1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wd=class extends Gd{},al=class extends Gd{constructor(e){super(),this.elements=e}};function N5(n,e){let t=F5(e);for(let r of n.elements)t.some(i=>lo(i,r))||t.push(r);return{arrayValue:{values:t}}}var cl=class extends Gd{constructor(e){super(),this.elements=e}};function L5(n,e){let t=F5(e);for(let r of n.elements)t=t.filter(i=>!lo(i,r));return{arrayValue:{values:t}}}var Kd=class extends Gd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function I3(n){return Dt(n.integerValue||n.doubleValue)}function F5(n){return Kx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zre(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof al&&i instanceof al||r instanceof cl&&i instanceof cl?jd(r.elements,i.elements,lo):r instanceof Kd&&i instanceof Kd?lo(r.Ee,i.Ee):r instanceof Wd&&i instanceof Wd}(n.transform,e.transform)}var D1=class{constructor(e,t){this.version=e,this.transformResults=t}},os=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function M0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qd=class{};function V5(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zp(n.key,os.none()):new ll(n.key,n.data,os.none());{let t=n.data,r=br.empty(),i=new wn(Cr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new uo(n.key,r,new jr(i.toArray()),os.none())}}function $re(n,e,t){n instanceof ll?function(i,o,s){let a=i.value.clone(),c=C3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof uo?function(i,o,s){if(!M0(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=C3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(U5(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Lp(n,e,t,r){return n instanceof ll?function(o,s,a,c){if(!M0(o.precondition,s))return a;let u=o.value.clone(),h=T3(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof uo?function(o,s,a,c){if(!M0(o.precondition,s))return a;let u=T3(o.fieldTransforms,c,s),h=s.data;return h.setAll(U5(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(o,s,a){return M0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Hre(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=O5(r.transform,i||null);o!=null&&(t===null&&(t=br.empty()),t.set(r.field,o))}return t||null}function b3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jd(r,i,(o,s)=>zre(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ll=class extends Qd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},uo=class extends Qd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function U5(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function C3(n,e,t){let r=new Map;ht(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,jre(s,a,t[i]))}return r}function T3(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Bre(o,s,e))}return r}var zp=class extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},x1=class extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var M1=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$re(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=R5();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=V5(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ke())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(t,r)=>b3(t,r))&&jd(this.baseMutations,e.baseMutations,(t,r)=>b3(t,r))}},P1=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Nre}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var R1=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var k1=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Wt,Xe;function qre(n){switch(n){case H.OK:return we(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function B5(n){if(n===void 0)return ss("GRPC error has no .code"),H.UNKNOWN;switch(n){case Wt.OK:return H.OK;case Wt.CANCELLED:return H.CANCELLED;case Wt.UNKNOWN:return H.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return H.INTERNAL;case Wt.UNAVAILABLE:return H.UNAVAILABLE;case Wt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Wt.NOT_FOUND:return H.NOT_FOUND;case Wt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Wt.ABORTED:return H.ABORTED;case Wt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Wt.DATA_LOSS:return H.DATA_LOSS;default:return we(39323,{code:n})}}(Xe=Wt||(Wt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";var S3=null;var Gre=new rs([4294967295,4294967295],0);function A3(n){let e=Y3().encode(n),t=new QD;return t.update(e),new Uint8Array(t.digest())}function D3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new rs([t,r],0),new rs([i,o],0)]}var O1=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(r<0)throw new tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rs.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(rs.fromNumber(r)));return i.compare(Gre)===1&&(i=new rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=A3(e),[r,i]=D3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=A3(e),[r,i]=D3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},tl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var B0=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$p.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new Ot(je),ds(),Ke())}},$p=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ke(),Ke(),Ke())}};var Vd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},j0=class{constructor(e,t){this.targetId=e,this.De=t}},z0=class{constructor(e,t,r=Un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},$0=class{constructor(){this.ve=0,this.Ce=x3(),this.Fe=Un.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),r=Ke();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:o})}}),new $p(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=x3()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},N1=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ds(),this.je=S0(),this.Je=S0(),this.He=new Ot(je)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(S1(o))if(r===0){let s=new _e(o.path);this.Xe(t,s,vi.newNoDocument(s,ke.min()))}else ht(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}S3?.ct(function(h,_,I,T,k){var L,N,q,ee,K,fe;let ze={localCacheCount:h,existenceFilterCount:_.count,databaseId:I.database,projectId:I.projectId},me=_.unchangedNames;return me&&(ze.bloomFilter={applied:k===0,hashCount:(L=me?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(ee=(q=(N=me?.bits)===null||N===void 0?void 0:N.bitmap)===null||q===void 0?void 0:q.length)!==null&&ee!==void 0?ee:0,padding:(fe=(K=me?.bits)===null||K===void 0?void 0:K.padding)!==null&&fe!==void 0?fe:0,mightContain:x=>{var E;return(E=T?.mightContain(x))!==null&&E!==void 0&&E}}),ze}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ls(r).toUint8Array()}catch(c){if(c instanceof N0)return Sa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new O1(s,i,o)}catch(c){return Sa(c instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&S1(a.target)){let c=new _e(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,vi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ke();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new B0(e,t,this.He,this.ze,r);return this.ze=ds(),this.je=S0(),this.Je=S0(),this.He=new Ot(je),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new $0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wn(je),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wn(je),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function S0(){return new Ot(_e.comparator)}function x3(){return new Ot(_e.comparator)}var Wre={asc:"ASCENDING",desc:"DESCENDING"},Kre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qre={and:"AND",or:"OR"},L1=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function F1(n,e){return n.useProto3Json||pw(e)?e:{value:e}}function H0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yre(n,e){return H0(n,e.toTimestamp())}function co(n){return ht(!!n,49232),ke.fromTimestamp(function(t){let r=cs(t);return new Jt(r.seconds,r.nanos)}(n))}function Xx(n,e){return V1(n,e).canonicalString()}function V1(n,e){let t=function(i){return new xt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function z5(n){let e=xt.fromString(n);return ht(W5(e),10190,{key:e.toString()}),e}function U1(n,e){return Xx(n.databaseId,e.path)}function t1(n,e){let t=z5(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(H5(t))}function $5(n,e){return Xx(n.databaseId,e)}function Jre(n){let e=z5(n);return e.length===4?xt.emptyPath():H5(e)}function B1(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function H5(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function M3(n,e,t){return{name:U1(n,e),fields:t.value.mapValue.fields}}function Zre(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(ht(h===void 0||typeof h=="string",58123),Un.fromBase64String(h||"")):(ht(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Un.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?H.UNKNOWN:B5(u.code);return new oe(h,u.message||"")}(s);t=new z0(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=t1(n,r.document.name),o=co(r.document.updateTime),s=r.document.createTime?co(r.document.createTime):ke.min(),a=new br({mapValue:{fields:r.document.fields}}),c=vi.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Vd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=t1(n,r.document),o=r.readTime?co(r.readTime):ke.min(),s=vi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Vd([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=t1(n,r.document),o=r.removedTargetIds||[];t=new Vd([],o,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new k1(i,o),a=r.targetId;t=new j0(a,s)}}return t}function Xre(n,e){let t;if(e instanceof ll)t={update:M3(n,e.key,e.value)};else if(e instanceof zp)t={delete:U1(n,e.key)};else if(e instanceof uo)t={update:M3(n,e.key,e.data),updateMask:cie(e.fieldMask)};else{if(!(e instanceof x1))return we(16599,{Rt:e.type});t={verify:U1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof al)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kd)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw we(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Yre(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(n,e.precondition)),t}function eie(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?co(i.updateTime):co(o);return s.isEqual(ke.min())&&(s=co(o)),new D1(s,i.transformResults||[])}(t,e))):[]}function tie(n,e){return{documents:[$5(n,e.path)]}}function nie(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$5(n,i);let o=function(u){if(u.length!==0)return G5(wi.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:Nd(I.field),direction:oie(I.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=F1(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function rie(n){let e=Jre(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ht(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(_){let I=q5(_);return I instanceof wi&&b5(I)?I.getFilters():[I]}(t.where));let s=[];t.orderBy&&(s=function(_){return _.map(I=>function(k){return new sl(Ld(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(_){let I;return I=typeof _=="object"?_.value:_,pw(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(_){let I=!!_.before,T=_.values||[];return new qd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(_){let I=!_.before,T=_.values||[];return new qd(T,I)}(t.endAt)),Mre(e,i,s,o,a,"F",c,u)}function iie(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function q5(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ld(t.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ld(t.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ld(t.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ld(t.unaryFilter.field);return Qt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(n):n.fieldFilter!==void 0?function(t){return Qt.create(Ld(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return wi.create(t.compositeFilter.filters.map(r=>q5(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(t.compositeFilter.op))}(n):we(30097,{filter:n})}function oie(n){return Wre[n]}function sie(n){return Kre[n]}function aie(n){return Qre[n]}function Nd(n){return{fieldPath:n.canonicalString()}}function Ld(n){return Cr.fromServerFormat(n.fieldPath)}function G5(n){return n instanceof Qt?function(t){if(t.op==="=="){if(y3(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NAN"}};if(m3(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y3(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NOT_NAN"}};if(m3(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nd(t.field),op:sie(t.op),value:t.value}}}(n):n instanceof wi?function(t){let r=t.getFilters().map(i=>G5(i));return r.length===1?r[0]:{compositeFilter:{op:aie(t.op),filters:r}}}(n):we(54877,{filter:n})}function cie(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hp=class n{constructor(e,t,r,i,o=ke.min(),s=ke.min(),a=Un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var j1=class{constructor(e){this.gt=e}};function lie(n){let e=rie({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?U0(e,e.limit,"L"):e}var q0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Dt(e.integerValue));else if("doubleValue"in e){let r=Dt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Up(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=cs(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ls(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?w5(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):v5(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):we(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=zd,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Dt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),_e.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};q0.Ut=new q0;var z1=class{constructor(){this.Dn=new $1}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(ol.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(ol.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},$1=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(xt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(xt.comparator)).toArray()}};var zCe=new Uint8Array(0);var P3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K5=41943040,Br=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(K5,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);var qp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var R3="LruGarbageCollector",uie=1048576;function k3([n,e],[t,r]){let i=je(n,t);return i===0?je(e,r):i}var H1=class{constructor(e){this.Tr=e,this.buffer=new wn(k3),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();k3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},q1=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(R3,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){th(t)?ce(R3,"Ignoring IndexedDB error during garbage collection: ",t):yield eh(t)}yield this.Rr(3e5)}))}},G1=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve($x.ue);let r=new H1(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(P3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P3):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,s=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,a=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(u=Date.now(),kd()<=He.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${_} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_})))}};function die(n,e){return new G1(n,e)}var W1=class{constructor(){this.changes=new us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var K1=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Q1=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Lp(r.mutation,i,jr.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ke()){let i=el();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rp();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=el();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ke()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ds(),s=Np(),a=function(){return Np()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof uo)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Lp(h.mutation,u,h.mutation.getFieldMask(),Jt.now())):s.set(u.key,jr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var _;return a.set(u,new K1(h,(_=s.get(u))!==null&&_!==void 0?_:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Np(),i=new Ot((s,a)=>s-a),o=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||jr.empty();h=a.applyToLocalView(u,h),r.set(c,h);let _=(i.get(a.batchId)||Ke()).add(c);i=i.insert(a.batchId,_)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,_=R5();h.forEach(I=>{if(!o.has(I)){let T=V5(t.get(I),r.get(I));T!==null&&_.set(I,T),o=o.add(I)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,_))}return W.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):A5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):W.resolve(el()),a=Vp,c=o;return s.next(u=>W.forEach(u,(h,_)=>(a<_.largestBatchId&&(a=_.largestBatchId),o.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ke())).next(h=>({batchId:a,changes:P5(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Rp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Rp();return this.indexManager.getCollectionParents(e,o).next(a=>W.forEach(a,c=>{let u=function(_,I){return new Da(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((_,I)=>{s=s.insert(_,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,vi.newInvalidDocument(h)))});let a=Rp();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Lp(h.mutation,u,jr.empty(),Jt.now()),yw(t,u)&&(a=a.insert(c,u))}),a})}};var Y1=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:co(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:lie(i.bundledQuery),readTime:co(i.readTime)}}(t)),W.resolve()}};var J1=class{constructor(){this.overlays=new Ot(_e.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=el();return W.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=el(),o=t.length+1,s=new _e(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ot((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=el(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=el(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new R1(t,r));let o=this.kr.get(t);o===void 0&&(o=Ke(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Z1=class{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var Gp=class{constructor(){this.qr=new wn(Kt.Qr),this.$r=new wn(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Kt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Kt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new _e(new xt([])),r=new Kt(t,e),i=new Kt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new _e(new xt([])),r=new Kt(t,e),i=new Kt(t,e+1),o=Ke();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Kt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Kt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}};var X1=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wn(Kt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new M1(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(s)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Hx:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Kt(t,0),i=new Kt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(je);return t.forEach(i=>{let o=new Kt(i,0),s=new Kt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;_e.isDocumentKey(o)||(o=o.child(""));let s=new Kt(new _e(o),0),a=new wn(je);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ht(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let o=new Kt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Kt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ex=class{constructor(e){this.ni=e,this.docs=function(){return new Ot(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():vi.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():vi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ds(),s=t.path,a=new _e(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||dre(ure(h),r)<=0||(i.has(h.key)||yw(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tx(this)}getSize(e){return W.resolve(this.size)}},tx=class extends W1{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var nx=class{constructor(e){this.persistence=e,this.ii=new us(t=>Qx(t),Yx),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new Gp,this.targetCount=0,this._i=qp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(o).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var G0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new $x(0),this.ci=!1,this.ci=!0,this.li=new Z1,this.referenceDelegate=e(this),this.hi=new nx(this),this.indexManager=new z1,this.remoteDocumentCache=function(i){return new ex(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new j1(t),this.Ti=new Y1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new X1(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);let i=new rx(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},rx=class extends f1{constructor(e){super(),this.currentSequenceNumber=e}},ix=class n{constructor(e){this.persistence=e,this.Ai=new Gp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=_e.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},W0=class n{constructor(e,t){this.persistence=e,this.gi=new us(r=>gre(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=die(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=D0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ox=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ke(),i=Ke();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var sx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ax=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return RL()?8:fre(yn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sx;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(kd()<=He.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Od(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(kd()<=He.DEBUG&&ce("QueryEngine","Query:",Od(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(kd()<=He.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Od(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ao(t))):W.resolve())}ps(e,t){if(E3(t))return W.resolve(null);let r=ao(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=U0(t,null,"F"),r=ao(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ke(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,U0(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return E3(t)||i.isEqual(ke.min())?W.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?W.resolve(null):(kd()<=He.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Od(t)),this.vs(e,s,t,lre(i,Vp)).next(a=>a))})}bs(e,t){let r=new wn(x5(e));return t.forEach((i,o)=>{yw(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return kd()<=He.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Od(t)),this.gs.getDocumentsMatchingQuery(e,t,ol.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var eM="LocalStore",hie=3e8,cx=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ot(je),this.Ms=new us(o=>Qx(o),Yx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q1(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function fie(n,e,t,r){return new cx(n,e,t,r)}function Q5(n,e){return S(this,null,function*(){let t=Me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ke();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function pie(n,e){let t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let _=u.batch,I=_.keys(),T=W.resolve();return I.forEach(k=>{T=T.next(()=>h.getEntry(c,k)).next(L=>{let N=u.docVersions.get(k);ht(N!==null,48541),L.version.compareTo(N)<0&&(_.applyToRemoteDocument(L,u),L.isValidDocument()&&(L.setReadTime(u.commitVersion),h.addEntry(L)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,_))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Y5(n){let e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function gie(n,e){let t=Me(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,_)=>{let I=i.get(_);if(!I)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,_).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,_)));let T=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(Un.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(_,T),function(L,N,q){return L.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=hie?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.hi.updateTargetData(o,T))});let c=ds(),u=Ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(mie(o,s,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(ke.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(_=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function mie(n,e,t){let r=Ke(),i=Ke();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ds();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ce(eM,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function yie(n,e){let t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Hx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _ie(n,e){let t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,W.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Hp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function lx(n,e,t){return S(this,null,function*(){let r=Me(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!th(s))throw s;ce(eM,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function O3(n,e,t){let r=Me(n),i=ke.min(),o=Ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let _=Me(c),I=_.Ms.get(h);return I!==void 0?W.resolve(_.Fs.get(I)):_.hi.getTargetData(u,h)}(r,s,ao(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ke.min(),t?o:Ke())).next(a=>(vie(r,Rre(e),a),{documents:a,qs:o})))}function vie(n,e,t){let r=n.xs.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var K0=class{constructor(){this.activeTargetIds=Vre()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ux=class{constructor(){this.Fo=new K0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new K0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dx=class{xo(e){}shutdown(){}};var N3="ConnectivityMonitor",Q0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(N3,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ce(N3,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var A0=null;function hx(){return A0===null?A0=function(){return 268435456+Math.round(2147483648*Math.random())}():A0++,"0x"+A0.toString(16)}var n1="RestConnection",wie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fx=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===L0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=hx(),a=this.Go(e,t.toUriEncodedString());ce(n1,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),h=di(u);return this.jo(e,a,c,r,h).then(_=>(ce(n1,`Received RPC '${e}' ${s}: `,_),_),_=>{throw Sa(n1,`RPC '${e}' ${s} failed with error: `,_,"url: ",a,"request:",r),_})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=wie[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var px=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Vn="WebChannelConnection",gx=class extends fx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=hx();return new Promise((a,c)=>{let u=new YD;u.setWithCredentials(!0),u.listenOnce(JD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pp.NO_ERROR:let _=u.getResponseJson();ce(Vn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),a(_);break;case Pp.TIMEOUT:ce(Vn,`RPC '${e}' ${s} timed out`),c(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:let I=u.getStatus();if(ce(Vn,`RPC '${e}' ${s} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN}(k.status);c(new oe(L,k.message))}else c(new oe(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new oe(H.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ce(Vn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);ce(Vn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}P_(e,t,r){let i=hx(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=e1(),a=XD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");ce(Vn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let _=s.createWebChannel(h,c);this.T_(_);let I=!1,T=!1,k=new px({Ho:N=>{T?ce(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(I||(ce(Vn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),I=!0),ce(Vn,`RPC '${e}' stream ${i} sending:`,N),_.send(N))},Yo:()=>_.close()}),L=(N,q,ee)=>{N.listen(q,K=>{try{ee(K)}catch(fe){setTimeout(()=>{throw fe},0)}})};return L(_,Rd.EventType.OPEN,()=>{T||(ce(Vn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),L(_,Rd.EventType.CLOSE,()=>{T||(T=!0,ce(Vn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(_))}),L(_,Rd.EventType.ERROR,N=>{T||(T=!0,Sa(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.__(new oe(H.UNAVAILABLE,"The operation could not be completed")))}),L(_,Rd.EventType.MESSAGE,N=>{var q;if(!T){let ee=N.data[0];ht(!!ee,16349);let K=ee,fe=K?.error||((q=K[0])===null||q===void 0?void 0:q.error);if(fe){ce(Vn,`RPC '${e}' stream ${i} received error:`,fe);let ze=fe.status,me=function(C){let D=Wt[C];if(D!==void 0)return B5(D)}(ze),x=fe.message;me===void 0&&(me=H.INTERNAL,x="Unknown error status: "+ze+" with message "+fe.message),T=!0,k.__(new oe(me,x)),_.close()}else ce(Vn,`RPC '${e}' stream ${i} received:`,ee),k.a_(ee)}}),L(a,ZD.STAT_EVENT,N=>{N.stat===C0.PROXY?ce(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===C0.NOPROXY&&ce(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function r1(){return typeof document<"u"?document:null}function _w(n){return new L1(n,!0)}var Y0=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var L3="PersistentStream",J0=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Y0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return S(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return S(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new oe(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>S(this,null,function*(){this.state=0,this.start()}))}G_(e){return ce(L3,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ce(L3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mx=class extends J0{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Zre(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ke.min():s.readTime?co(s.readTime):ke.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=B1(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=S1(c)?{documents:tie(o,c)}:{query:nie(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=j5(o,s.resumeToken);let u=F1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ke.min())>0){a.readTime=H0(o,s.snapshotVersion.toTimestamp());let u=F1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=iie(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=B1(this.serializer),t.removeTarget=e,this.k_(t)}},yx=class extends J0{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=eie(e.writeResults,e.commitTime),r=co(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=B1(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Xre(this.serializer,r))};this.k_(t)}};var _x=class{},vx=class extends _x{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,V1(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(H.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,V1(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(H.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},wx=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ss(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ul="RemoteStore",Ex=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){dl(this)&&(ce(ul,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Me(c);u.Ia.add(4),yield Jp(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield vw(u)})}(this))}))}),this.Aa=new wx(r,i)}};function vw(n){return S(this,null,function*(){if(dl(n))for(let e of n.da)yield e(!0)})}function Jp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function J5(n,e){let t=Me(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),iM(t)?rM(t):nh(t).x_()&&nM(t,e))}function tM(n,e){let t=Me(n),r=nh(t);t.Ta.delete(e),r.x_()&&Z5(t,e),t.Ta.size===0&&(r.x_()?r.B_():dl(t)&&t.Aa.set("Unknown"))}function nM(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nh(n).H_(e)}function Z5(n,e){n.Ra.$e(e),nh(n).Y_(e)}function rM(n){n.Ra=new N1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),nh(n).start(),n.Aa.aa()}function iM(n){return dl(n)&&!nh(n).M_()&&n.Ta.size>0}function dl(n){return Me(n).Ia.size===0}function X5(n){n.Ra=void 0}function Eie(n){return S(this,null,function*(){n.Aa.set("Online")})}function Iie(n){return S(this,null,function*(){n.Ta.forEach((e,t)=>{nM(n,e)})})}function bie(n,e){return S(this,null,function*(){X5(n),iM(n)?(n.Aa.la(e),rM(n)):n.Aa.set("Unknown")})}function Cie(n,e,t){return S(this,null,function*(){if(n.Aa.set("Online"),e instanceof z0&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){ce(ul,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Z0(n,r)}else if(e instanceof Vd?n.Ra.Ye(e):e instanceof j0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{let r=yield Y5(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(Un.EMPTY_BYTE_STRING,h.snapshotVersion)),Z5(o,c);let _=new Hp(h.target,c,u,h.sequenceNumber);nM(o,_)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce(ul,"Failed to raise snapshot:",r),yield Z0(n,r)}})}function Z0(n,e,t){return S(this,null,function*(){if(!th(e))throw e;n.Ia.add(1),yield Jp(n),n.Aa.set("Offline"),t||(t=()=>Y5(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){ce(ul,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield vw(n)}))})}function eB(n,e){return e().catch(t=>Z0(n,t,e))}function ww(n){return S(this,null,function*(){let e=Me(n),t=xa(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hx;for(;Tie(e);)try{let i=yield yie(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Sie(e,i)}catch(i){yield Z0(e,i)}tB(e)&&nB(e)})}function Tie(n){return dl(n)&&n.Pa.length<10}function Sie(n,e){n.Pa.push(e);let t=xa(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function tB(n){return dl(n)&&!xa(n).M_()&&n.Pa.length>0}function nB(n){xa(n).start()}function Aie(n){return S(this,null,function*(){xa(n).na()})}function Die(n){return S(this,null,function*(){let e=xa(n);for(let t of n.Pa)e.X_(t.mutations)})}function xie(n,e,t){return S(this,null,function*(){let r=n.Pa.shift(),i=P1.from(r,e,t);yield eB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ww(n)})}function Mie(n,e){return S(this,null,function*(){e&&xa(n).Z_&&(yield function(r,i){return S(this,null,function*(){if(function(s){return qre(s)&&s!==H.ABORTED}(i.code)){let o=r.Pa.shift();xa(r).N_(),yield eB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ww(r)}})}(n,e)),tB(n)&&nB(n)})}function F3(n,e){return S(this,null,function*(){let t=Me(n);t.asyncQueue.verifyOperationInProgress(),ce(ul,"RemoteStore received new credentials");let r=dl(t);t.Ia.add(3),yield Jp(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield vw(t)})}function Pie(n,e){return S(this,null,function*(){let t=Me(n);e?(t.Ia.delete(2),yield vw(t)):e||(t.Ia.add(2),yield Jp(t),t.Aa.set("Unknown"))})}function nh(n){return n.Va||(n.Va=function(t,r,i){let o=Me(t);return o.ia(),new mx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:Eie.bind(null,n),e_:Iie.bind(null,n),n_:bie.bind(null,n),J_:Cie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.Va.N_(),iM(n)?rM(n):n.Aa.set("Unknown")):(yield n.Va.stop(),X5(n))}))),n.Va}function xa(n){return n.ma||(n.ma=function(t,r,i){let o=Me(t);return o.ia(),new yx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Aie.bind(null,n),n_:Mie.bind(null,n),ea:Die.bind(null,n),ta:xie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.N_(),yield ww(n)):(yield n.ma.stop(),n.Pa.length>0&&(ce(ul,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Ix=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function oM(n,e){if(ss("AsyncQueue",`${e}: ${n}`),th(n))return new oe(H.UNAVAILABLE,`${e}: ${n}`);throw n}var X0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Rp(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ew=class{constructor(){this.fa=new Ot(_e.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Yd=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,X0.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var bx=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Cx=class{constructor(){this.queries=V3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Me(t),o=i.queries;i.queries=V3(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new oe(H.ABORTED,"Firestore shutting down"))}};function V3(){return new us(n=>D5(n),mw)}function rB(n,e){return S(this,null,function*(){let t=Me(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new bx,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=oM(s,`Initialization of query '${Od(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&sM(t)})}function iB(n,e){return S(this,null,function*(){let t=Me(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Rie(n,e){let t=Me(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&sM(t)}function kie(n,e,t){let r=Me(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function sM(n){n.Da.forEach(e=>{e.next()})}var Tx,U3;(U3=Tx||(Tx={})).Fa="default",U3.Cache="cache";var tw=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Yd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Tx.Cache}};var nw=class{constructor(e){this.key=e}},rw=class{constructor(e){this.key=e}},Sx=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=x5(e),this.eu=new X0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new ew,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,_)=>{let I=i.get(h),T=yw(this.query,_)?_:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),N=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),N=!0):this.iu(I,T)||(r.track({type:2,doc:T}),N=!0,(c&&this.Xa(T,c)>0||u&&this.Xa(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),N=!0):I&&!T&&(r.track({type:1,doc:I}),N=!0,(c||u)&&(a=!0)),N&&(T?(s=s.add(T),o=L?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,_)=>function(T,k){let L=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:N})}};return L(T)-L(k)}(h.type,_.type)||this.Xa(h.doc,_.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Yd(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ew,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new rw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new nw(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ke();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Yd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},aM="SyncEngine",Ax=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Dx=class{constructor(e){this.key=e,this.lu=!1}},xx=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new us(a=>D5(a),mw),this.Tu=new Map,this.Iu=new Set,this.du=new Ot(_e.comparator),this.Eu=new Map,this.Au=new Gp,this.Ru={},this.Vu=new Map,this.mu=qp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Oie(n,e,t=!0){return S(this,null,function*(){let r=uB(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield oB(r,e,t,!0),i})}function Nie(n,e){return S(this,null,function*(){let t=uB(n);yield oB(t,e,!0,!1)})}function oB(n,e,t,r){return S(this,null,function*(){let i=yield _ie(n.localStore,ao(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Lie(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&J5(n.remoteStore,i),a})}function Lie(n,e,t,r,i){return S(this,null,function*(){n.gu=(_,I,T)=>function(L,N,q,ee){return S(this,null,function*(){let K=N.view.nu(q);K.Ds&&(K=yield O3(L.localStore,N.query,!1).then(({documents:x})=>N.view.nu(x,K)));let fe=ee&&ee.targetChanges.get(N.targetId),ze=ee&&ee.targetMismatches.get(N.targetId)!=null,me=N.view.applyChanges(K,L.isPrimaryClient,fe,ze);return j3(L,N.targetId,me._u),me.snapshot})}(n,_,I,T);let o=yield O3(n.localStore,e,!0),s=new Sx(e,o.qs),a=s.nu(o.documents),c=$p.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);j3(n,t,u._u);let h=new Ax(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function Fie(n,e,t){return S(this,null,function*(){let r=Me(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!mw(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&tM(r.remoteStore,i.targetId),Mx(r,i.targetId)}).catch(eh))):(Mx(r,i.targetId),yield lx(r.localStore,i.targetId,!0))})}function Vie(n,e){return S(this,null,function*(){let t=Me(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tM(t.remoteStore,r.targetId))})}function Uie(n,e,t){return S(this,null,function*(){let r=Gie(n);try{let i=yield function(s,a){let c=Me(s),u=Jt.now(),h=a.reduce((T,k)=>T.add(k.key),Ke()),_,I;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=ds(),L=Ke();return c.Os.getEntries(T,h).next(N=>{k=N,k.forEach((q,ee)=>{ee.isValidDocument()||(L=L.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,k)).next(N=>{_=N;let q=[];for(let ee of a){let K=Hre(ee,_.get(ee.key).overlayedDocument);K!=null&&q.push(new uo(ee.key,K,E5(K.value.mapValue),os.exists(!0)))}return c.mutationQueue.addMutationBatch(T,u,q,a)}).next(N=>{I=N;let q=N.applyToLocalDocumentSet(_,L);return c.documentOverlayCache.saveOverlays(T,N.batchId,q)})}).then(()=>({batchId:I.batchId,changes:P5(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new Ot(je)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Zp(r,i.changes),yield ww(r.remoteStore)}catch(i){let o=oM(i,"Failed to persist write");t.reject(o)}})}function sB(n,e){return S(this,null,function*(){let t=Me(n);try{let r=yield gie(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ht(s.lu,14607):i.removedDocuments.size>0&&(ht(s.lu,42227),s.lu=!1))}),yield Zp(t,r,e)}catch(r){yield eh(r)}})}function B3(n,e,t){let r=Me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Me(s);c.onlineState=a;let u=!1;c.queries.forEach((h,_)=>{for(let I of _.wa)I.va(a)&&(u=!0)}),u&&sM(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bie(n,e,t){return S(this,null,function*(){let r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ot(_e.comparator);s=s.insert(o,vi.newNoDocument(o,ke.min()));let a=Ke().add(o),c=new B0(ke.min(),new Map,new Ot(je),s,a);yield sB(r,c),r.du=r.du.remove(o),r.Eu.delete(e),cM(r)}else yield lx(r.localStore,e,!1).then(()=>Mx(r,e,t)).catch(eh)})}function jie(n,e){return S(this,null,function*(){let t=Me(n),r=e.batch.batchId;try{let i=yield pie(t.localStore,e);cB(t,r,null),aB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zp(t,i)}catch(i){yield eh(i)}})}function zie(n,e,t){return S(this,null,function*(){let r=Me(n);try{let i=yield function(s,a){let c=Me(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(_=>(ht(_!==null,37113),h=_.keys(),c.mutationQueue.removeMutationBatch(u,_))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);cB(r,e,t),aB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zp(r,i)}catch(i){yield eh(i)}})}function aB(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function cB(n,e,t){let r=Me(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Mx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||lB(n,r)})}function lB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(tM(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),cM(n))}function j3(n,e,t){for(let r of t)r instanceof nw?(n.Au.addReference(r.key,e),$ie(n,r)):r instanceof rw?(ce(aM,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||lB(n,r.key)):we(19791,{yu:r})}function $ie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ce(aM,"New document in limbo: "+t),n.Iu.add(r),cM(n))}function cM(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new _e(xt.fromString(e)),r=n.mu.next();n.Eu.set(r,new Dx(t)),n.du=n.du.insert(t,r),J5(n.remoteStore,new Hp(ao(Jx(t.path)),r,"TargetPurposeLimboResolution",$x.ue))}}function Zp(n,e,t){return S(this,null,function*(){let r=Me(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let _=u?!u.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,_?"current":"not-current")}if(u){i.push(u);let _=ox.Es(c.targetId,u);o.push(_)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,u){return S(this,null,function*(){let h=Me(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>W.forEach(u,I=>W.forEach(I.Is,T=>h.persistence.referenceDelegate.addReference(_,I.targetId,T)).next(()=>W.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(_,I.targetId,T)))))}catch(_){if(!th(_))throw _;ce(eM,"Failed to update sequence numbers: "+_)}for(let _ of u){let I=_.targetId;if(!_.fromCache){let T=h.Fs.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(I,L)}}})}(r.localStore,o))})}function Hie(n,e){return S(this,null,function*(){let t=Me(n);if(!t.currentUser.isEqual(e)){ce(aM,"User change. New user:",e.toKey());let r=yield Q5(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new oe(H.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zp(t,r.Bs)}})}function qie(n,e){let t=Me(n),r=t.Eu.get(e);if(r&&r.lu)return Ke().add(r.key);{let i=Ke(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function uB(n){let e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bie.bind(null,e),e.hu.J_=Rie.bind(null,e.eventManager),e.hu.pu=kie.bind(null,e.eventManager),e}function Gie(n){let e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zie.bind(null,e),e}var dB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=_w(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return fie(this.persistence,new ax,t.initialUser,this.serializer)}Du(t){return new G0(ix.Vi,this.serializer)}bu(t){return new ux}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Px=class extends dB{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ht(this.persistence.referenceDelegate instanceof W0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new q1(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new G0(r=>W0.Vi(r,t),this.serializer)}};var Wie=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>B3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hie.bind(null,this.syncEngine),yield Pie(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Cx}()}createDatastore(t){let r=_w(t.databaseInfo.databaseId),i=function(s){return new gx(s)}(t.databaseInfo);return function(s,a,c,u){return new vx(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Ex(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>B3(this.syncEngine,r,0),function(){return Q0.C()?new Q0:new dx}())}createSyncEngine(t,r){return function(o,s,a,c,u,h,_){let I=new xx(o,s,a,c,u,h);return _&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(o){return S(this,null,function*(){let s=Me(o);ce(ul,"RemoteStore shutting down."),s.Ia.add(5),yield Jp(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var iw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ma="FirestoreClient",Rx=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){ce(Ma,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ce(Ma,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=oM(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function i1(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ce(Ma,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield Q5(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Sa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Sa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function z3(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Kie(n);ce(Ma,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>F3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>F3(e.remoteStore,i)),n._onlineComponents=e})}function Kie(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Ma,"Using user provided OfflineComponentProvider");try{yield i1(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),yield i1(n,new dB)}}else ce(Ma,"Using default OfflineComponentProvider"),yield i1(n,new Px(void 0));return n._offlineComponents})}function hB(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Ma,"Using user provided OnlineComponentProvider"),yield z3(n,n._uninitializedComponentsProvider._online)):(ce(Ma,"Using default OnlineComponentProvider"),yield z3(n,new Wie))),n._onlineComponents})}function Qie(n){return hB(n).then(e=>e.syncEngine)}function fB(n){return S(this,null,function*(){let e=yield hB(n),t=e.eventManager;return t.onListen=Oie.bind(null,e.syncEngine),t.onUnlisten=Fie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Nie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vie.bind(null,e.syncEngine),t})}function Yie(n,e,t={}){let r=new _i;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,u){let h=new iw({next:I=>{h.Ou(),s.enqueueAndForget(()=>iB(o,_));let T=I.docs.has(a);!T&&I.fromCache?u.reject(new oe(H.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&I.fromCache&&c&&c.source==="server"?u.reject(new oe(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(I)},error:I=>u.reject(I)}),_=new tw(Jx(a.path),h,{includeMetadataChanges:!0,ka:!0});return rB(o,_)}(yield fB(n),n.asyncQueue,e,t,r)})),r.promise}function Jie(n,e,t={}){let r=new _i;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,u){let h=new iw({next:I=>{h.Ou(),s.enqueueAndForget(()=>iB(o,_)),I.fromCache&&c.source==="server"?u.reject(new oe(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(I)},error:I=>u.reject(I)}),_=new tw(a,h,{includeMetadataChanges:!0,ka:!0});return rB(o,_)}(yield fB(n),n.asyncQueue,e,t,r)})),r.promise}function pB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $3=new Map;var gB="firestore.googleapis.com",H3=!0,ow=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gB,this.ssl=H3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:H3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uie)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}are("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Jd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o1;switch(r.type){case"firstParty":return new l1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$3.get(t);r&&(ce("ComponentProvider","Removing Datastore"),$3.delete(t),r.terminate())}(this),Promise.resolve()}};function mB(n,e,t,r={}){var i;n=as(n,Jd);let o=di(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Wu(`https://${c}`),Ku("Firestore",!0)),s.host!==gB&&s.host!==c&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Qi(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,_;if(typeof r.mockUserToken=="string")h=r.mockUserToken,_=vn.MOCK_USER;else{h=Q_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new vn(I)}n._authCredentials=new s1(new P0(h,_))}}var Pa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Sn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yp(t,n._jsonSchema))return new n(e,r||null,new _e(xt.fromString(t.referencePath)))}};Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:Yt("string",Sn._jsonSchemaVersion),referencePath:Yt("string")};var Ia=class n extends Pa{constructor(e,t,r){super(e,t,Jx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new _e(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function yB(n,e,...t){if(n=bt(n),J3("collection","path",e),n instanceof Jd){let r=xt.fromString(e,...t);return c3(r),new Ia(n,null,r)}{if(!(n instanceof Sn||n instanceof Ia))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xt.fromString(e,...t));return c3(r),new Ia(n.firestore,null,r)}}function lM(n,e,...t){if(n=bt(n),arguments.length===1&&(e=Fp.newId()),J3("doc","path",e),n instanceof Jd){let r=xt.fromString(e,...t);return a3(r),new Sn(n,null,new _e(r))}{if(!(n instanceof Sn||n instanceof Ia))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xt.fromString(e,...t));return a3(r),new Sn(n.firestore,n instanceof Ia?n.converter:null,new _e(r))}}var q3="AsyncQueue",sw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Y0(this,"async_queue_retry"),this.oc=()=>{let r=r1();r&&ce(q3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=r1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=r1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new _i;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return S(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!th(e))throw e;ce(q3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ss("INTERNAL UNHANDLED ERROR: ",G3(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Ix.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:G3(this.tc)})}verifyOperationInProgress(){}Pc(){return S(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function G3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Ra=class extends Jd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sw,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,yield e}})}};function _B(n,e){let t=typeof n=="object"?n:Vo(),r=typeof n=="string"?n:e||L0,i=sa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=K_("firestore");o&&mB(i,...o)}return i}function uM(n){if(n._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Zie(n),n._firestoreClient}function Zie(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,h){return new p1(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pB(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Rx(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var ba=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Un.fromBase64String(e))}catch(t){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ba._jsonSchemaVersion="firestore/bytes/1.0",ba._jsonSchema={type:Yt("string",ba._jsonSchemaVersion),bytes:Yt("string")};var Zd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wp=class{constructor(e){this._methodName=e}};var Ca=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Yp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ca._jsonSchemaVersion="firestore/geoPoint/1.0",Ca._jsonSchema={type:Yt("string",Ca._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};var Ta=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ta._jsonSchemaVersion="firestore/vectorValue/1.0",Ta._jsonSchema={type:Yt("string",Ta._jsonSchemaVersion),vectorValues:Yt("object")};var Xie=/^__.*__$/,kx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}},aw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}var Ox=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return lw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vB(this.Ec)&&Xie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Nx=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_w(e)}Dc(e,t,r,i=!1){return new Ox({Ec:e,methodName:t,bc:r,path:Cr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dM(n){let e=n._freezeSettings(),t=_w(n._databaseId);return new Nx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eoe(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);hM("Data must be an object, but it was:",s,r);let a=wB(r,s),c,u;if(o.merge)c=new jr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let _ of o.mergeFields){let I=Lx(e,_,t);if(!s.contains(I))throw new oe(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);IB(h,I)||h.push(I)}c=new jr(h),u=s.fieldTransforms.filter(_=>c.covers(_.field))}else c=null,u=s.fieldTransforms;return new kx(new br(a),c,u)}var cw=class n extends Wp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function toe(n,e,t,r){let i=n.Dc(1,e,t);hM("Data must be an object, but it was:",i,r);let o=[],s=br.empty();ka(r,(c,u)=>{let h=fM(e,c,t);u=bt(u);let _=i.gc(h);if(u instanceof cw)o.push(h);else{let I=Xp(u,_);I!=null&&(o.push(h),s.set(h,I))}});let a=new jr(o);return new aw(s,a,i.fieldTransforms)}function noe(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Lx(e,r,t)],c=[i];if(o.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)a.push(Lx(e,o[I])),c.push(o[I+1]);let u=[],h=br.empty();for(let I=a.length-1;I>=0;--I)if(!IB(u,a[I])){let T=a[I],k=c[I];k=bt(k);let L=s.gc(T);if(k instanceof cw)u.push(T);else{let N=Xp(k,L);N!=null&&(u.push(T),h.set(T,N))}}let _=new jr(u);return new aw(h,_,s.fieldTransforms)}function roe(n,e,t,r=!1){return Xp(t,n.Dc(r?4:3,e))}function Xp(n,e){if(EB(n=bt(n)))return hM("Unsupported field value:",e,n),wB(n,e);if(n instanceof Wp)return function(r,i){if(!vB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Xp(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ure(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Jt.fromDate(r);return{timestampValue:H0(i.serializer,o)}}if(r instanceof Jt){let o=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:H0(i.serializer,o)}}if(r instanceof Ca)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:j5(i.serializer,r._byteString)};if(r instanceof Sn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ta)return function(s,a){return{mapValue:{fields:{[Gx]:{stringValue:Wx},[zd]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Zx(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${fw(r)}`)}(n,e)}function wB(n,e){let t={};return f5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(n,(r,i)=>{let o=Xp(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function EB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof Ca||n instanceof ba||n instanceof Sn||n instanceof Wp||n instanceof Ta)}function hM(n,e,t){if(!EB(t)||!Z3(t)){let r=fw(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Lx(n,e,t){if((e=bt(e))instanceof Zd)return e._internalPath;if(typeof e=="string")return fM(n,e);throw lw("Field path arguments must be of type string or ",n,!1,void 0,t)}var ioe=new RegExp("[~\\*/\\[\\]]");function fM(n,e,t){if(e.search(ioe)>=0)throw lw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zd(...e.split("."))._internalPath}catch{throw lw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lw(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new oe(H.INVALID_ARGUMENT,a+n+c)}function IB(n,e){return n.some(t=>t.isEqual(e))}var uw=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Fx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ew("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Fx=class extends uw{data(){return super.data()}};function Ew(n,e){return typeof e=="string"?fM(n,e):e instanceof Zd?e._internalPath:e._delegate._internalPath}function ooe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kp=class{},Qp=class extends Kp{};function bB(n,e,...t){let r=[];e instanceof Kp&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Vx).length,a=o.filter(c=>c instanceof dw).length;if(s>1||s>0&&a>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var dw=class n extends Qp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AB(e._query,t),new Pa(e.firestore,e.converter,A1(e._query,t))}_parse(e){let t=dM(e.firestore);return function(o,s,a,c,u,h,_){let I;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){K3(_,h);let k=[];for(let L of _)k.push(W3(c,o,L));I={arrayValue:{values:k}}}else I=W3(c,o,_)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||K3(_,h),I=roe(a,s,_,h==="in"||h==="not-in");return Qt.create(u,h,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CB(n,e,t){let r=e,i=Ew("where",n);return dw._create(i,r,t)}var Vx=class n extends Kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:wi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)AB(s,c),s=A1(s,c)}(e._query,t),new Pa(e.firestore,e.converter,A1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ux=class n extends Qp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sl(o,s)}(e._query,this._field,this._direction);return new Pa(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Da(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function TB(n,e="asc"){let t=e,r=Ew("orderBy",n);return Ux._create(r,t)}var Bx=class n extends Qp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Pa(e.firestore,e.converter,U0(e._query,this._limit,this._limitType))}};function SB(n){return cre("limit",n),Bx._create("limit",n,"F")}function W3(n,e,t){if(typeof(t=bt(t))=="string"){if(t==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A5(e)&&t.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(xt.fromString(t));if(!_e.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return g3(n,new _e(r))}if(t instanceof Sn)return g3(n,t._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fw(t)}.`)}function K3(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AB(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var jx=class{convertValue(e,t="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ka(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[zd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Dt(s.doubleValue));return new Ta(o)}convertGeoPoint(e){return new Ca(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=gw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bp(e));default:return null}}convertTimestamp(e){let t=cs(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xt.fromString(e);ht(W5(r),9688,{name:e});let i=new F0(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(t)||ss(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function soe(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var nl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rl=class n extends uw{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ew("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:Yt("string",rl._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var Ud=class extends rl{data(e={}){return super.data(e)}},Bd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ud(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:aoe(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function aoe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function DB(n){n=as(n,Sn);let e=as(n.firestore,Ra);return Yie(uM(e),n._key).then(t=>coe(e,n,t))}Bd._jsonSchemaVersion="firestore/querySnapshot/1.0",Bd._jsonSchema={type:Yt("string",Bd._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var hw=class extends jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}};function xB(n){n=as(n,Pa);let e=as(n.firestore,Ra),t=uM(e),r=new hw(e);return ooe(n._query),Jie(t,n._query).then(i=>new Bd(e,r,n,i))}function MB(n,e,t,...r){n=as(n,Sn);let i=as(n.firestore,Ra),o=dM(i),s;return s=typeof(e=bt(e))=="string"||e instanceof Zd?noe(o,"updateDoc",n._key,e,t,r):toe(o,"updateDoc",n._key,e),pM(i,[s.toMutation(n._key,os.exists(!0))])}function PB(n){return pM(as(n.firestore,Ra),[new zp(n._key,os.none())])}function RB(n,e){let t=as(n.firestore,Ra),r=lM(n),i=soe(n.converter,e);return pM(t,[eoe(dM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,os.exists(!1))]).then(()=>r)}function pM(n,e){return function(r,i){let o=new _i;return r.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Uie(yield Qie(r),i,o)})),o.promise}(uM(n),e)}function coe(n,e,t){let r=t.docs.get(e._key),i=new hw(n);return new rl(n,i,e._key,r,new nl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Xd=i})(Zi),Er(new Cn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ra(new a1(r.getProvider("auth-internal")),new u1(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F0(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),wt(r3,i3,e),wt(r3,i3,"esm2017")})();var hl=class{constructor(e){return e}},kB="firestore",gM=class{constructor(){return aa(kB)}};var mM=new J("angularfire2.firestore-instances");function loe(n,e){let t=Uc(kB,n,e);return t&&new hl(t)}function uoe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hl(r)}}var doe={provide:gM,deps:[[new ln,mM]]},hoe={provide:hl,useFactory:loe,deps:[[new ln,mM],hi]};function OB(n,...e){return wt("angularfire",Xi.full,"fst"),bn([hoe,doe,{provide:mM,useFactory:uoe(n),multi:!0,deps:[Oe,Tt,eo,Uo,[new ln,Gc],[new ln,la],...e]}])}var eg=dt(e3,!0);var NB=dt(RB,!0,2);var fl=dt(yB,!0,2);var LB=dt(PB,!0,2);var tg=dt(lM,!0,2);var FB=dt(DB,!0);var VB=dt(xB,!0);var UB=dt(_B,!0);var yM=dt(SB,!0,2);var Iw=dt(TB,!0,2),ng=dt(bB,!0,2);var _M=dt(MB,!0,2);var rh=dt(CB,!0,2);var GB="firebasestorage.googleapis.com",WB="storageBucket",poe=2*60*1e3,goe=10*60*1e3;var Nt=class n extends zn{constructor(e,t,r=0){super(vM(e),`Firebase Storage: ${t} (${vM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},jt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(jt||{});function vM(n){return"storage/"+n}function TM(){let n="An unknown error occurred, please check the error payload for server response.";return new Nt(jt.UNKNOWN,n)}function moe(n){return new Nt(jt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yoe(n){return new Nt(jt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _oe(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(jt.UNAUTHENTICATED,n)}function voe(){return new Nt(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function woe(n){return new Nt(jt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Eoe(){return new Nt(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ioe(){return new Nt(jt.CANCELED,"User canceled the upload/download.")}function boe(n){return new Nt(jt.INVALID_URL,"Invalid URL '"+n+"'.")}function Coe(n){return new Nt(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Toe(){return new Nt(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WB+"' property when initializing the app?")}function Soe(){return new Nt(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Aoe(){return new Nt(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Doe(n){return new Nt(jt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wM(n){return new Nt(jt.INVALID_ARGUMENT,n)}function KB(){return new Nt(jt.APP_DELETED,"The Firebase app was deleted.")}function xoe(n){return new Nt(jt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ig(n,e){return new Nt(jt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rg(n){throw new Nt(jt.INTERNAL_ERROR,"Internal error: "+n)}var Ei=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Coe(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(fe){fe.path_=decodeURIComponent(fe.path)}let h="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",T=new RegExp(`^https?://${_}/${h}/b/${i}/o${I}`,"i"),k={bucket:1,path:3},L=t===GB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",q=new RegExp(`^https?://${L}/${i}/${N}`,"i"),K=[{regex:a,indices:c,postModify:o},{regex:T,indices:k,postModify:u},{regex:q,indices:{bucket:1,path:2},postModify:u}];for(let fe=0;fe<K.length;fe++){let ze=K[fe],me=ze.regex.exec(e);if(me){let x=me[ze.indices.bucket],E=me[ze.indices.path];E||(E=""),r=new n(x,E),ze.postModify(r);break}}if(r==null)throw boe(e);return r}},EM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Moe(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function h(...N){u||(u=!0,e.apply(null,N))}function _(N){i=setTimeout(()=>{i=null,n(T,c())},N)}function I(){o&&clearTimeout(o)}function T(N,...q){if(u){I();return}if(N){I(),h.call(null,N,...q);return}if(c()||s){I(),h.call(null,N,...q);return}r<64&&(r*=2);let K;a===1?(a=2,K=0):K=(r+Math.random())*1e3,_(K)}let k=!1;function L(N){k||(k=!0,I(),!u&&(i!==null?(N||(a=2),clearTimeout(i),_(0)):N||(a=1)))}return _(0),o=setTimeout(()=>{s=!0,L(!0)},t),L}function Poe(n){n(!1)}function Roe(n){return n!==void 0}function koe(n){return typeof n=="object"&&!Array.isArray(n)}function SM(n){return typeof n=="string"||n instanceof String}function BB(n){return AM()&&n instanceof Blob}function AM(){return typeof Blob<"u"}function jB(n,e,t,r){if(r<e)throw wM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wM(`Invalid value for '${n}'. Expected ${t} or less.`)}function DM(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QB(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var oh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(oh||{});function Ooe(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var IM=class{constructor(e,t,r,i,o,s,a,c,u,h,_,I=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=_,this.retry=I,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ih(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===oh.NO_ERROR,c=o.getStatus();if(!a||Ooe(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===oh.ABORT;r(!1,new ih(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new ih(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Roe(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=TM();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?KB():Ioe();s(c)}else{let c=Eoe();s(c)}};this.canceled_?t(!1,new ih(!1,null,!0)):this.backoffId_=Moe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Poe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ih=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Noe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Loe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Foe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Voe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Uoe(n,e,t,r,i,o,s=!0,a=!1){let c=QB(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return Foe(h,e),Noe(h,t),Loe(h,o),Voe(h,r),new IM(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Boe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function joe(...n){let e=Boe();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(AM())return new Blob(n);throw new Nt(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zoe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function $oe(n){if(typeof atob>"u")throw Doe("base-64");return atob(n)}var ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},og=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Hoe(n,e){switch(n){case ho.RAW:return new og(YB(e));case ho.BASE64:case ho.BASE64URL:return new og(JB(n,e));case ho.DATA_URL:return new og(Goe(e),Woe(e))}throw TM()}function YB(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qoe(n){let e;try{e=decodeURIComponent(n)}catch{throw ig(ho.DATA_URL,"Malformed data URL.")}return YB(e)}function JB(n,e){switch(n){case ho.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ig(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ho.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ig(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=$oe(e)}catch(i){throw i.message.includes("polyfill")?i:ig(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Cw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw ig(ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Koe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Goe(n){let e=new Cw(n);return e.base64?JB(ho.BASE64,e.rest):qoe(e.rest)}function Woe(n){return new Cw(n).contentType}function Koe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Tw=class n{constructor(e,t){let r=0,i="";BB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(BB(this.data_)){let r=this.data_,i=zoe(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(AM()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(joe.apply(null,t))}else{let t=e.map(s=>SM(s)?Hoe(ho.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function ZB(n){let e;try{e=JSON.parse(n)}catch{return null}return koe(e)?e:null}function Qoe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Yoe(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function XB(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Joe(n,e){return e}var An=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Joe}},bw=null;function Zoe(n){return!SM(n)||n.length<2?n:XB(n)}function e6(){if(bw)return bw;let n=[];n.push(new An("bucket")),n.push(new An("generation")),n.push(new An("metageneration")),n.push(new An("name","fullPath",!0));function e(o,s){return Zoe(s)}let t=new An("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new An("size");return i.xform=r,n.push(i),n.push(new An("timeCreated")),n.push(new An("updated")),n.push(new An("md5Hash",null,!0)),n.push(new An("cacheControl",null,!0)),n.push(new An("contentDisposition",null,!0)),n.push(new An("contentEncoding",null,!0)),n.push(new An("contentLanguage",null,!0)),n.push(new An("contentType",null,!0)),n.push(new An("metadata","customMetadata",!0)),bw=n,bw}function Xoe(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new Ei(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function ese(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Xoe(r,n),r}function t6(n,e,t){let r=ZB(e);return r===null?null:ese(n,r,t)}function tse(n,e,t,r){let i=ZB(e);if(i===null||!SM(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=n.bucket,_=n.fullPath,I="/b/"+s(h)+"/o/"+s(_),T=DM(I,t,r),k=QB({alt:"media",token:u});return T+k})[0]}function nse(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Sw=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function n6(n){if(!n)throw TM()}function rse(n,e){function t(r,i){let o=t6(n,i,e);return n6(o!==null),o}return t}function ise(n,e){function t(r,i){let o=t6(n,i,e);return n6(o!==null),tse(o,i,n.host,n._protocol)}return t}function r6(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=voe():i=_oe():t.getStatus()===402?i=yoe(n.bucket):t.getStatus()===403?i=woe(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ose(n){let e=r6(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=moe(n.path)),o.serverResponse=i.serverResponse,o}return t}function sse(n,e,t){let r=e.fullServerUrl(),i=DM(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Sw(i,o,ise(n,t),s);return a.errorHandler=ose(e),a}function ase(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function cse(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ase(null,e)),r}function lse(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let K="";for(let fe=0;fe<2;fe++)K=K+Math.random().toString().slice(2);return K}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=cse(e,r,i),h=nse(u,t),_="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,I=`\r
--`+c+"--",T=Tw.getBlob(_,r,I);if(T===null)throw Soe();let k={name:u.fullPath},L=DM(o,n.host,n._protocol),N="POST",q=n.maxUploadRetryTime,ee=new Sw(L,N,rse(n,t),q);return ee.urlParams=k,ee.headers=s,ee.body=T.uploadData(),ee.errorHandler=r6(e),ee}var iSe=256*1024;var zB=null,bM=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw rg("cannot .send() more than once");if(di(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},CM=class extends bM{initXhr(){this.xhr_.responseType="text"}};function i6(){return zB?zB():new CM}var sh=class n{constructor(e,t){this._service=e,t instanceof Ei?this._location=t:this._location=Ei.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XB(this._location.path)}get storage(){return this._service}get parent(){let e=Qoe(this._location.path);if(e===null)return null;let t=new Ei(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xoe(e)}};function use(n,e,t){n._throwIfRoot("uploadBytes");let r=lse(n.storage,n._location,e6(),new Tw(e,!0),t);return n.storage.makeRequestWithTokens(r,i6).then(i=>({metadata:i,ref:n}))}function dse(n){n._throwIfRoot("getDownloadURL");let e=sse(n.storage,n._location,e6());return n.storage.makeRequestWithTokens(e,i6).then(t=>{if(t===null)throw Aoe();return t})}function hse(n,e){let t=Yoe(n._location.path,e),r=new Ei(n._location.bucket,t);return new sh(n.storage,r)}function fse(n){return/^[A-Za-z]+:\/\//.test(n)}function pse(n,e){return new sh(n,e)}function o6(n,e){if(n instanceof sg){let t=n;if(t._bucket==null)throw Toe();let r=new sh(t,t._bucket);return e!=null?o6(r,e):r}else return e!==void 0?hse(n,e):n}function gse(n,e){if(e&&fse(e)){if(n instanceof sg)return pse(n,e);throw wM("To use ref(service, url), the first argument must be a Storage instance.")}else return o6(n,e)}function $B(n,e){let t=e?.[WB];return t==null?null:Ei.makeFromBucketSpec(t,n)}function mse(n,e,t,r={}){n.host=`${e}:${t}`;let i=di(e);i&&(Wu(`https://${n.host}/b`),Ku("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Q_(o,n.app.options.projectId))}var sg=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=GB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=poe,this._maxUploadRetryTime=goe,this._requests=new Set,i!=null?this._bucket=Ei.makeFromBucketSpec(i,this._host):this._bucket=$B(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ei.makeFromBucketSpec(this._url,e):this._bucket=$B(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sh(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new EM(KB());{let s=Uoe(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return S(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},HB="@firebase/storage",qB="0.13.14";var s6="storage";function a6(n,e,t){return n=bt(n),use(n,e,t)}function c6(n){return n=bt(n),dse(n)}function l6(n,e){return n=bt(n),gse(n,e)}function u6(n=Vo(),e){n=bt(n);let r=sa(n,s6).getImmediate({identifier:e}),i=K_("storage");return i&&d6(r,...i),r}function d6(n,e,t,r={}){mse(n,e,t,r)}function yse(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sg(t,r,i,e,Zi)}function _se(){Er(new Cn(s6,yse,"PUBLIC").setMultipleInstances(!0)),wt(HB,qB,""),wt(HB,qB,"esm2017")}_se();var pl=class{constructor(e){return e}},h6="storage",xM=class{constructor(){return aa(h6)}};var MM=new J("angularfire2.storage-instances");function vse(n,e){let t=Uc(h6,n,e);return t&&new pl(t)}function wse(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pl(r)}}var Ese={provide:xM,deps:[[new ln,MM]]},Ise={provide:pl,useFactory:vse,deps:[[new ln,MM],hi]};function f6(n,...e){return wt("angularfire",Xi.full,"gcs"),bn([Ise,Ese,{provide:MM,useFactory:wse(n),multi:!0,deps:[Oe,Tt,eo,Uo,[new ln,Gc],[new ln,la],...e]}])}var p6=dt(c6,!0);var g6=dt(u6,!0);var m6=dt(l6,!0,2);var y6=dt(a6,!0);var S6=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(te(ko),te(mr))};static \u0275dir=mt({type:n})}return n})(),Ow=(()=>{class n extends S6{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,features:[nr]})}return n})(),fg=new J(""),Cse={provide:fg,useExisting:xr(()=>NM),multi:!0},NM=(()=>{class n extends Ow{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[kr([Cse]),nr]})}return n})(),Tse={provide:fg,useExisting:xr(()=>zr),multi:!0};function Sse(){let n=Nr()?Nr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Ase=new J(""),zr=(()=>{class n extends S6{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Sse())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(te(ko),te(mr),te(Ase,8))};static \u0275dir=mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[kr([Tse]),nr]})}return n})();function A6(n){return n==null||D6(n)===0}function D6(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var pg=new J(""),x6=new J("");function Dse(n){return A6(n.value)?{required:!0}:null}function xse(n){return e=>{let t=e.value?.length??D6(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Mse(n){if(!n)return PM;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(A6(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function PM(n){return null}function M6(n){return n!=null}function P6(n){return Ks(n)?ct(n):n}function R6(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function k6(n,e){return e.map(t=>t(n))}function Pse(n){return!n.validate}function O6(n){return n.map(e=>Pse(e)?e:t=>e.validate(t))}function Rse(n){if(!n)return null;let e=n.filter(M6);return e.length==0?null:function(t){return R6(k6(t,e))}}function LM(n){return n!=null?Rse(O6(n)):null}function kse(n){if(!n)return null;let e=n.filter(M6);return e.length==0?null:function(t){let r=k6(t,e).map(P6);return NE(r).pipe(ge(R6))}}function FM(n){return n!=null?kse(O6(n)):null}function _6(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ose(n){return n._rawValidators}function Nse(n){return n._rawAsyncValidators}function RM(n){return n?Array.isArray(n)?n:[n]:[]}function Dw(n,e){return Array.isArray(n)?n.includes(e):n===e}function v6(n,e){let t=RM(e);return RM(n).forEach(i=>{Dw(t,i)||t.push(i)}),t}function w6(n,e){return RM(e).filter(t=>!Dw(n,t))}var xw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},lh=class extends xw{name;get formDirective(){return null}get path(){return null}},hg=class extends xw{_parent=null;name=null;valueAccessor=null},Mw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Lse={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$Se=he($({},Lse),{"[class.ng-submitted]":"isSubmitted"}),fo=(()=>{class n extends Mw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(hg,2))};static \u0275dir=mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&bc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[nr]})}return n})(),uh=(()=>{class n extends Mw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(lh,10))};static \u0275dir=mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&bc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[nr]})}return n})();var ag="VALID",Aw="INVALID",ah="PENDING",cg="DISABLED",Oa=class{},Pw=class extends Oa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ug=class extends Oa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dg=class extends Oa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ch=class extends Oa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},kM=class extends Oa{source;constructor(e){super(),this.source=e}},OM=class extends Oa{source;constructor(e){super(),this.source=e}};function N6(n){return(Nw(n)?n.validators:n)||null}function Fse(n){return Array.isArray(n)?LM(n):n||null}function L6(n,e){return(Nw(e)?e.asyncValidators:n)||null}function Vse(n){return Array.isArray(n)?FM(n):n||null}function Nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Use(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function Bse(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new se(1002,"")})}var Rw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Or(this.statusReactive)}set status(e){Or(()=>this.statusReactive.set(e))}_status=Cc(()=>this.statusReactive());statusReactive=wc(void 0);get valid(){return this.status===ag}get invalid(){return this.status===Aw}get pending(){return this.status==ah}get disabled(){return this.status===cg}get enabled(){return this.status!==cg}errors;get pristine(){return Or(this.pristineReactive)}set pristine(e){Or(()=>this.pristineReactive.set(e))}_pristine=Cc(()=>this.pristineReactive());pristineReactive=wc(!0);get dirty(){return!this.pristine}get touched(){return Or(this.touchedReactive)}set touched(e){Or(()=>this.touchedReactive.set(e))}_touched=Cc(()=>this.touchedReactive());touchedReactive=wc(!1);get untouched(){return!this.touched}_events=new kt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(v6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(v6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(w6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(w6(e,this._rawAsyncValidators))}hasValidator(e){return Dw(this._rawValidators,e)}hasAsyncValidator(e){return Dw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dg(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new dg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ug(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ug(!0,r))}markAsPending(e={}){this.status=ah;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ch(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cg,this.errors=null,this._forEachChild(i=>{i.disable(he($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pw(this.value,r)),this._events.next(new ch(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ag,this._forEachChild(r=>{r.enable(he($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ag||this.status===ah)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pw(this.value,t)),this._events.next(new ch(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cg:ag}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ah,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=P6(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ch(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?cg:this.errors?Aw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ah)?ah:this._anyControlsHaveStatus(Aw)?Aw:ag}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ug(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Fse(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Vse(this._rawAsyncValidators)}},kw=class extends Rw{constructor(e,t,r){super(N6(t),L6(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bse(this,!0,e),Object.keys(e).forEach(r=>{Use(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var VM=new J("",{providedIn:"root",factory:()=>UM}),UM="always";function jse(n,e){return[...e.path,n]}function F6(n,e,t=UM){V6(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$se(n,e),qse(n,e),Hse(n,e),zse(n,e)}function E6(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zse(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function V6(n,e){let t=Ose(n);e.validator!==null?n.setValidators(_6(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Nse(n);e.asyncValidator!==null?n.setAsyncValidators(_6(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();E6(e._rawValidators,i),E6(e._rawAsyncValidators,i)}function $se(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&U6(n,e)})}function Hse(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&U6(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function U6(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qse(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Gse(n,e){n==null,V6(n,e)}function Wse(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Kse(n){return Object.getPrototypeOf(n.constructor)===Ow}function Qse(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Yse(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===zr?t=o:Kse(o)?r=o:i=o}),i||r||t||null}var Jse={provide:lh,useExisting:xr(()=>gl)},lg=Promise.resolve(),gl=(()=>{class n extends lh{callSetDisabledState;get submitted(){return Or(this.submittedReactive)}_submitted=Cc(()=>this.submittedReactive());submittedReactive=wc(!1);_directives=new Set;form;ngSubmit=new Et;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new kw({},LM(t),FM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){lg.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),F6(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){lg.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){lg.then(()=>{let r=this._findContainer(t.path),i=new kw({});Gse(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){lg.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){lg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Qse(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new kM(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new OM(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(te(pg,10),te(x6,10),te(VM,8))};static \u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[kr([Jse]),nr]})}return n})();function I6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function b6(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Zse=class extends Rw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(N6(t),L6(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(b6(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){I6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){I6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){b6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Xse={provide:hg,useExisting:xr(()=>Ii)},C6=Promise.resolve(),Ii=(()=>{class n extends hg{_changeDetectorRef;callSetDisabledState;control=new Zse;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Et;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Yse(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Wse(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){F6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){C6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Zs(r);C6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jse(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(te(lh,9),te(pg,10),te(x6,10),te(fg,10),te(Js,8),te(VM,8))};static \u0275dir=mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[kr([Xse]),nr,gr]})}return n})();var dh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var eae={provide:fg,useExisting:xr(()=>hh),multi:!0};function B6(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tae(n){return n.split(":")[0]}var hh=(()=>{class n extends Ow{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=B6(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=tae(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[kr([eae]),nr]})}return n})(),Lw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(B6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(mr),te(ko),te(hh,9))};static \u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),nae={provide:fg,useExisting:xr(()=>j6),multi:!0};function T6(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function rae(n){return n.split(":")[0]}var j6=(()=>{class n extends Ow{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=rae(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[kr([nae]),nr]})}return n})(),Fw=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(T6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(T6(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(mr),te(ko),te(j6,9))};static \u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function iae(n){return typeof n=="number"?n:parseInt(n,10)}var BM=(()=>{class n{_validator=PM;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):PM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,features:[gr]})}return n})();var oae={provide:pg,useExisting:xr(()=>ml),multi:!0};var ml=(()=>{class n extends BM{required;inputName="required";normalizeInput=Zs;createValidator=t=>Dse;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ic("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[kr([oae]),nr]})}return n})();var sae={provide:pg,useExisting:xr(()=>jM),multi:!0},jM=(()=>{class n extends BM{maxlength;inputName="maxlength";normalizeInput=t=>iae(t);createValidator=t=>xse(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ic("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[kr([sae]),nr]})}return n})(),aae={provide:pg,useExisting:xr(()=>zM),multi:!0},zM=(()=>{class n extends BM{pattern;inputName="pattern";normalizeInput=t=>t;createValidator=t=>Mse(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=oi(n)))(i||n)}})();static \u0275dir=mt({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ic("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[kr([aae]),nr]})}return n})();var cae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Mr({})}return n})();var po=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:VM,useValue:t.callSetDisabledState??UM}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Mr({imports:[cae]})}return n})();var lae=["*"],yg=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Ft(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(kn(t=>{let r=new Ee(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let o=t.addListener(e,s=>{this._ngZone.run(()=>i.next(s))});if(!o){i.complete();return}return this._listeners.push(o),()=>o.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},mg={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},z6="500px",$6="500px",Vw=(()=>{class n{_elementRef=z(mr);_ngZone=z(Oe);_eventManager=new yg(z(Oe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=z6;width=$6;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||mg}_options=mg;mapInitialized=new Et;authFailure=new Et;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=z(Bi);if(this._isBrowser=uC(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Rn(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":H6(this.height)||z6,t.width=this.width===null?"":H6(this.width)||$6}}_combineOptions(){let t=this._options||{};return he($({},t),{center:this._center||t.center||mg.center,zoom:this._zoom??t.zoom??mg.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||mg.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ut({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[gr],ngContentSelectors:lae,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(xN(),Ne(0,"div",0),MN(1))},encapsulation:2,changeDetection:0})}return n})(),uae=/([A-Za-z%]+)$/;function H6(n){return n==null?"":uae.test(n)?n:`${n}px`}var q6=(()=>{class n{_googleMap=z(Vw);_elementRef=z(mr);_ngZone=z(Oe);_eventManager=new yg(z(Oe));_options=new Ft({});_position=new Ft(void 0);_destroy=new kt;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new Et;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(Rn(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let o=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==o||!o)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:o,shouldFocus:r}))}_combineOptions(){return ic([this._options,this._position]).pipe(ge(([t,r])=>he($({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(iu(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(iu(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var dae=new J("MAP_MARKER"),hae={position:{lat:37.421995,lng:-122.084092}},G6=(()=>{class n{_googleMap=z(Vw);_ngZone=z(Oe);_eventManager=new yg(z(Oe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new Et;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:o,_label:s,_clickable:a,_icon:c,_visible:u}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&o&&r.setPosition(o),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&u!==void 0&&r.setVisible(u))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(Rn(1)).toPromise()}_combineOptions(){let t=this._options||hae;return he($({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[kr([{provide:dae,useExisting:n}]),gr]})}return n})();var W6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Mr({})}return n})();function pae(n,e){n&1&&(f(0,"p",15),g(1," \u{1F4CD} Deine Position wird angezeigt "),p())}function gae(n,e){n&1&&(f(0,"p",16),g(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),p())}function mae(n,e){if(n&1){let t=$e();f(0,"div",19)(1,"h4"),g(2),p(),f(3,"p")(4,"strong"),g(5),$i(6,"titlecase"),p()(),f(7,"p"),g(8),p(),f(9,"p"),g(10),p(),f(11,"button",20),le("click",function(){ne(t);let i=G().$implicit,o=G();return re(o.getDirections(i.shop))}),g(12," \u{1F697} Route berechnen "),p()()}if(n&2){let t=G().$implicit;O(2),vt(t.shop.name),O(3),vt(Hi(6,4,t.shop.type)),O(3),Le("\u{1F4CD} ",t.shop.address.split(",")[0],""),O(2),Le("\u2B50 ",t.shop.rating,"/5")}}function yae(n,e){n&1&&(f(0,"div",19)(1,"h4"),g(2,"\u{1F4CD} Deine Position"),p(),f(3,"p"),g(4,"Du bist hier"),p()())}function _ae(n,e){if(n&1){let t=$e();f(0,"map-marker",17),le("mapClick",function(){let i=ne(t).$implicit,o=G();return re(o.onMarkerClick(i))}),f(1,"map-info-window"),ae(2,mae,13,6,"div",18)(3,yae,5,0,"div",18),p()()}if(n&2){let t=e.$implicit,r=G();j("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),O(2),j("ngIf",t.shop),O(),j("ngIf",t.isUserLocation)}}var Uw=class n{afroshops=[];userLocation=null;shopSelected=new Et;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=he($({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[gr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h3"),g(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),p(),ae(4,pae,2,0,"p",2)(5,gae,2,0,"p",3),p(),f(6,"google-map",4),ae(7,_ae,4,5,"map-marker",5),p(),f(8,"div",6)(9,"h4"),g(10,"Legende"),p(),f(11,"div",7)(12,"div",8)(13,"span",9),g(14,"\u{1F37D}\uFE0F"),p(),f(15,"span"),g(16,"Restaurants"),p()(),f(17,"div",8)(18,"span",10),g(19,"\u{1F6D2}"),p(),f(20,"span"),g(21,"Lebensmittel"),p()(),f(22,"div",8)(23,"span",11),g(24,"\u2702\uFE0F"),p(),f(25,"span"),g(26,"Friseure"),p()(),f(27,"div",8)(28,"span",12),g(29,"\u{1F457}"),p(),f(30,"span"),g(31,"Mode"),p()(),f(32,"div",8)(33,"span",13),g(34,"\u{1F3E6}"),p(),f(35,"span"),g(36,"Dienstleistungen"),p()(),f(37,"div",8)(38,"span",14),g(39,"\u{1F4CD}"),p(),f(40,"span"),g(41,"Deine Position"),p()()()()()),t&2&&(O(4),j("ngIf",r.userLocation),O(),j("ngIf",!r.userLocation),O(),j("options",r.mapOptions)("width","100%")("height","400px"),O(),j("ngForOf",r.markers))},dependencies:[St,rr,Ut,Tc,W6,Vw,q6,G6],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var fh=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(o=>i.address.toLowerCase().includes(o.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var sr=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=fl(this.firestore,"afroshops");return ct(VB(e)).pipe(ge(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(o=>{let s=o.data();s.id=o.id,r.push(s)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(o=>o.name));let i=r.map(o=>this.mapFirebaseDocToAfroshopData(o));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(o=>o.name)),i.sort((o,s)=>o.name.localeCompare(s.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=fl(this.firestore,"afroshops"),r=ng(t,rh("city","==",e.toLowerCase()),Iw("name"));return eg(r,{idField:"id"})}getAfroshopsByType(e){let t=fl(this.firestore,"afroshops"),r=ng(t,rh("type","==",e),Iw("rating","desc"));return eg(r,{idField:"id"})}getAfroshopById(e){return S(this,null,function*(){try{let t=tg(this.firestore,"afroshops",e),r=yield FB(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(he($({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return S(this,null,function*(){let t=fl(this.firestore,"afroshops"),r=he($({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield NB(t,r)).id})}updateAfroshop(e,t){return S(this,null,function*(){let r=tg(this.firestore,"afroshops",e),i=he($({},t),{updatedAt:new Date});yield _M(r,i)})}deleteAfroshop(e){return S(this,null,function*(){let t=tg(this.firestore,"afroshops",e);yield LB(t)})}searchAfroshops(e){let t=fl(this.firestore,"afroshops"),r=ng(t,rh("name",">=",e),rh("name","<=",e+"\uF8FF"),yM(20));return eg(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=fl(this.firestore,"afroshops"),r=ng(t,rh("verified","==",!0),Iw("rating","desc"),yM(e));return eg(r,{idField:"id"})}incrementViews(e){return S(this,null,function*(){try{let t=tg(this.firestore,"afroshops",e);yield _M(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return S(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let o=m6(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",o),console.log("\u2B06\uFE0F Upload en cours...");let s=yield y6(o,e);console.log("\u2705 Upload termin\xE9, snapshot:",s),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield p6(s.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(de(hl),de(pl))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var go=class n{businessTypeTranslations={restaurant:"Restaurant",epicerie:"Lebensmittelgesch\xE4ft",coiffeur:"Friseur",vetement:"Modegesch\xE4ft",services:"Dienstleistungen"};businessTypePlural={restaurant:"Restaurants",epicerie:"Lebensmittelgesch\xE4fte",coiffeur:"Friseure",vetement:"Modegesch\xE4fte",services:"Dienstleistungen"};businessTypeIcons={restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"};errorMessages={"auth/user-not-found":"Benutzer nicht gefunden","auth/wrong-password":"Falsches Passwort","auth/email-already-in-use":"E-Mail-Adresse wird bereits verwendet","auth/weak-password":"Passwort ist zu schwach","auth/invalid-email":"Ung\xFCltige E-Mail-Adresse","auth/popup-blocked":"Popup wurde blockiert. Bitte erlauben Sie Popups f\xFCr diese Website.","auth/popup-closed-by-user":"Anmeldung wurde abgebrochen","auth/cancelled-popup-request":"Anmeldung wurde abgebrochen","popup-blocked":"Popup wurde von Ihrem Browser blockiert","connection-error":"Verbindungsfehler. \xDCberpr\xFCfen Sie Ihre Internetverbindung.","general-error":"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut."};generalMessages={"login-success":"Erfolgreich angemeldet!","logout-success":"Erfolgreich abgemeldet!","registration-success":"Konto erfolgreich erstellt!","data-saved":"Daten erfolgreich gespeichert!","data-deleted":"Daten erfolgreich gel\xF6scht!",loading:"Wird geladen...",saving:"Wird gespeichert...","confirma-delete":"Sind Sie sicher, dass Sie dies l\xF6schen m\xF6chten?"};getBusinessTypeName(e,t=!1){return t?this.businessTypePlural[e]||e:this.businessTypeTranslations[e]||e}getBusinessTypeIcon(e){return this.businessTypeIcons[e]||"\u{1F3EA}"}getBusinessTypeDisplay(e,t=!1){let r=this.getBusinessTypeIcon(e),i=this.getBusinessTypeName(e,t);return`${r} ${i}`}getErrorMessage(e){return this.errorMessages[e]||this.errorMessages["general-error"]}getMessage(e){return this.generalMessages[e]||e}getAllBusinessTypes(){return Object.keys(this.businessTypeTranslations).map(e=>({value:e,label:this.businessTypeTranslations[e],icon:this.businessTypeIcons[e]}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zt=class n{constructor(e,t){this.auth=e;this.translationService=t;this.user$=qV(this.auth)}user$;register(e,t,r){return S(this,null,function*(){try{let i=yield GV(this.auth,e,t);return r&&i.user&&(yield JV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return S(this,null,function*(){try{let r=yield KV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return S(this,null,function*(){try{console.log("\u{1F680} Initialisation du provider Google...");let e=new PS;e.setCustomParameters({prompt:"select_account"}),console.log("\u{1F50D} V\xE9rification du support des popups..."),this.checkPopupSupport(),console.log("\u{1F510} Tentative de connexion avec popup...");let t=yield QV(this.auth,e);return console.log("\u2705 Connexion r\xE9ussie, utilisateur:",t.user.email),{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("\u274C Erreur d\xE9taill\xE9e:",{name:e.name,code:e.code,message:e.message,customData:e.customData}),e.code==="auth/popup-blocked"?console.log("\u{1F6AB} Popup bloqu\xE9e d\xE9tect\xE9e"):e.code==="auth/popup-closed-by-user"?console.log("\u{1F44B} Popup ferm\xE9e par l'utilisateur"):e.code==="auth/cancelled-popup-request"&&console.log("\u{1F504} Requ\xEAte popup annul\xE9e"),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return S(this,null,function*(){try{yield YV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Ein Fehler ist aufgetreten";if(e.code)switch(e.code){case"auth/email-already-in-use":t=this.translationService.getErrorMessage("auth/email-already-in-use");break;case"auth/weak-password":t=this.translationService.getErrorMessage("auth/weak-password");break;case"auth/invalid-email":t=this.translationService.getErrorMessage("auth/invalid-email");break;case"auth/user-not-found":t=this.translationService.getErrorMessage("auth/user-not-found");break;case"auth/wrong-password":t=this.translationService.getErrorMessage("auth/wrong-password");break;case"auth/too-many-requests":t="Zu viele Versuche. Bitte versuchen Sie es sp\xE4ter erneut";break;case"auth/user-disabled":t="Dieses Konto wurde deaktiviert";break;case"auth/operation-not-allowed":t="Diese Operation ist nicht erlaubt";break;case"auth/popup-closed-by-user":t=this.translationService.getErrorMessage("auth/popup-closed-by-user");break;case"auth/popup-blocked":t=this.translationService.getErrorMessage("auth/popup-blocked");break;case"popup-blocked":t=this.translationService.getErrorMessage("popup-blocked");break;case"auth/cancelled-popup-request":t=this.translationService.getErrorMessage("auth/cancelled-popup-request");break;default:t=this.translationService.getErrorMessage("general-error")}return new Error(t)}static \u0275fac=function(t){return new(t||n)(de(qc),de(go))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var jw=class n{constructor(){}getCurrentPosition(){return new Ee(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new Ee(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let o={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(o)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var fs={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"},adminConfig:{adminEmails:["youssoufdiamaldiallo@gmail.com"]},googleMapsApiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek"};var wae="https://nominatim.openstreetmap.org/search",Na=class n{constructor(e){this.http=e}getTravelDuration(e,t){let r=this.GOOGLE_MAPS_API_KEY,i="https://maps.googleapis.com/maps/api/directions/json",s=["driving","walking"].map(a=>{let c=`${i}?origin=${e.lat},${e.lng}&destination=${t.lat},${t.lng}&mode=${a}&key=${r}`;return this.http.get(c).pipe(ge(u=>u.routes&&u.routes.length>0&&u.routes[0].legs&&u.routes[0].legs.length>0?{mode:a,duration:u.routes[0].legs[0].duration.text}:{mode:a,duration:void 0}),In(()=>pe({mode:a,duration:void 0})))});return new Ee(a=>{let c={},u=0;s.forEach((h,_)=>{h.subscribe(I=>{c[I.mode]=I.duration,u++,u===s.length&&(a.next({driving:c.driving,walking:c.walking}),a.complete())})})})}geocodeWithNominatim(e){let t={q:e,format:"json",addressdetails:"1",limit:"1",countrycodes:"de"};return this.http.get(wae,{params:t}).pipe(ge(r=>{if(r&&r.length>0){let i=r[0];return{lat:parseFloat(i.lat),lng:parseFloat(i.lon),formatted_address:i.display_name,accuracy:i.type}}return null}),In(r=>(console.error("\u274C Erreur Nominatim:",r),pe(null))))}GOOGLE_MAPS_API_KEY=fs.googleMapsApiKey;GEOCODING_URL="https://maps.googleapis.com/maps/api/geocode/json";CITY_COORDINATES={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},munich:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},cologne:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767},nuremberg:{lat:49.4521,lng:11.0767},mannheim:{lat:49.4875,lng:8.466},karlsruhe:{lat:49.0069,lng:8.4037},wiesbaden:{lat:50.0782,lng:8.2398},m\u00FCnster:{lat:51.9607,lng:7.6261},augsburg:{lat:48.3705,lng:10.8978},m\u00F6nchengladbach:{lat:51.1805,lng:6.4428},braunschweig:{lat:52.2689,lng:10.5268},kiel:{lat:54.3233,lng:10.1228},aachen:{lat:50.7753,lng:6.0839},halle:{lat:51.4969,lng:11.9695},magdeburg:{lat:52.1205,lng:11.6276},freiburg:{lat:47.999,lng:7.8421},krefeld:{lat:51.3388,lng:6.5853},mainz:{lat:49.9929,lng:8.2473},l\u00FCbeck:{lat:53.8655,lng:10.6866},erfurt:{lat:50.9848,lng:11.0299},rostock:{lat:54.0887,lng:12.1446},kassel:{lat:51.3127,lng:9.4797},hagen:{lat:51.367,lng:7.4637},potsdam:{lat:52.3906,lng:13.0645},saarbr\u00FCcken:{lat:49.2401,lng:6.9969},hamm:{lat:51.68,lng:7.8137},soest:{lat:51.5671,lng:8.1065},lippstadt:{lat:51.6738,lng:8.3435},paderborn:{lat:51.7189,lng:8.7545},g\u00FCtersloh:{lat:51.9067,lng:8.3858},bielefeld:{lat:52.0302,lng:8.5325},detmold:{lat:51.9386,lng:8.8795},minden:{lat:52.2897,lng:8.9157},herford:{lat:52.1166,lng:8.671}};geocodeAddress(e){if(!e||e.trim().length===0)return pe(null);let t=e.trim();return console.log(`\u{1F5FA}\uFE0F G\xE9ocodage de l'adresse: "${t}"`),this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"?this.geocodeWithGoogleMaps(t).pipe(In(r=>(console.warn("\u274C \xC9chec du g\xE9ocodage Google Maps, tentative avec Nominatim:",r),this.geocodeWithNominatim(t).pipe(In(()=>pe(this.geocodeWithFallback(t))))))):this.geocodeWithNominatim(t).pipe(In(()=>pe(this.geocodeWithFallback(t))))}geocodeWithGoogleMaps(e){let t={address:e,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:t}).pipe(ge(r=>{if(r.status==="OK"&&r.results&&r.results.length>0){let i=r.results[0],o=i.geometry.location;return console.log("\u2705 G\xE9ocodage Google Maps r\xE9ussi:",{address:i.formatted_address,coordinates:o}),{lat:o.lat,lng:o.lng,formatted_address:i.formatted_address,place_id:i.place_id,accuracy:i.geometry.location_type}}else return console.warn("\u274C Aucun r\xE9sultat trouv\xE9 pour:",e),null}),In(r=>{throw console.error("\u274C Erreur API Google Maps:",r),r}))}geocodeWithFallback(e){let t=e.toLowerCase(),r=Object.entries(this.CITY_COORDINATES).sort((o,s)=>s[0].length-o[0].length);for(let[o,s]of r)if(new RegExp(`\\b${o}\\b`,"i").test(t))return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour ${o}:`,s),{lat:s.lat,lng:s.lng,formatted_address:`${o.charAt(0).toUpperCase()+o.slice(1)}, Deutschland`,accuracy:"APPROXIMATE"};let i=e.match(/\b(\d{5})\b/);if(i){let o=i[1],s=this.getCoordinatesFromPostalCode(o);if(s)return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour code postal ${o}:`,s),{lat:s.lat,lng:s.lng,formatted_address:`${o}, Deutschland`,accuracy:"APPROXIMATE"}}return console.warn("\u274C Impossible de g\xE9ocoder l'adresse:",e),null}getCoordinatesFromPostalCode(e){let t=parseInt(e);return t>=1e4&&t<=19999?{lat:52.52,lng:13.405}:t>=2e4&&t<=29999?{lat:53.5511,lng:9.9937}:t>=3e4&&t<=39999?{lat:52.3759,lng:9.732}:t>=4e4&&t<=49999?{lat:51.2277,lng:6.7735}:t>=5e4&&t<=59999?{lat:50.9375,lng:6.9603}:t>=6e4&&t<=69999?{lat:50.1109,lng:8.6821}:t>=7e4&&t<=79999?{lat:48.7758,lng:9.1829}:t>=8e4&&t<=89999?{lat:48.1351,lng:11.582}:t>=9e4&&t<=99999?{lat:49.4521,lng:11.0767}:null}reverseGeocode(e,t){if(this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"){let r={latlng:`${e},${t}`,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:r}).pipe(ge(i=>{if(i.status==="OK"&&i.results&&i.results.length>0){let o=i.results[0];return{address:o.formatted_address,components:this.parseAddressComponents(o.address_components)}}return null}),In(i=>(console.error("\u274C Erreur g\xE9ocodage inverse:",i),pe(null))))}else return pe({address:`${e.toFixed(4)}, ${t.toFixed(4)}`,components:{}})}parseAddressComponents(e){let t={};return e.forEach(r=>{let i=r.types;i.includes("street_number")?t.street_number=r.long_name:i.includes("route")?t.route=r.long_name:i.includes("locality")?t.locality=r.long_name:i.includes("postal_code")?t.postal_code=r.long_name:i.includes("country")&&(t.country=r.long_name)}),t}isValidCoordinates(e,t){return e!==0&&t!==0&&e>=-90&&e<=90&&t>=-180&&t<=180}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}deg2rad(e){return e*(Math.PI/180)}static \u0275fac=function(t){return new(t||n)(de(p_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Eae(n,e){if(n&1){let t=$e();f(0,"button",47),le("click",function(){ne(t);let i=G(2);return re(i.openSettings())}),g(1,"\u2699\uFE0F"),p()}}function Iae(n,e){if(n&1&&(Xb(0),ae(1,Eae,2,0,"button",46),eC()),n&2){let t=e.ngIf,r=G();O(),j("ngIf",r.isAdminUser(t))}}function bae(n,e){if(n&1&&(f(0,"span",53),g(1),p()),n&2){let t=G(2);O(),Le("um ",t.getSelectedCityName(),"")}}function Cae(n,e){n&1&&(f(0,"span",54),g(1,"um deinen Standort"),p())}function Tae(n,e){if(n&1&&(f(0,"div",48)(1,"div",49),g(2," \u{1F3AF} Suche in 50km Umkreis "),ae(3,bae,2,1,"span",50)(4,Cae,2,0,"span",51),p(),f(5,"div",52),g(6),p()()),n&2){let t=G();O(3),j("ngIf",t.selectedCity),O(),j("ngIf",!t.selectedCity),O(2),yr(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function Sae(n,e){if(n&1){let t=$e();f(0,"div",55)(1,"app-map",56),le("shopSelected",function(i){ne(t);let o=G();return re(o.viewAfroshopDetail(i))}),p()()}if(n&2){let t=G();O(),j("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function Aae(n,e){if(n&1){let t=$e();f(0,"button",77),le("click",function(i){ne(t);let o=G().$implicit,s=G(2);return re(s.editAfroshop(i,o.id))}),g(1," \u270F\uFE0F "),p()}}function Dae(n,e){if(n&1&&(f(0,"span"),g(1),p()),n&2){let t=G(2).$implicit,r=G(2);O(),yr(" ",r.getDirectionsDuration(t)," \u2013 ",r.getTravelDurationDisplay(t)," ")}}function xae(n,e){if(n&1&&(f(0,"div",78),g(1),ae(2,Dae,2,2,"span",4),p()),n&2){let t=G().$implicit,r=G(2);O(),Le(" \u{1F3AF} ",r.getDistanceFromUser(t)," "),O(),j("ngIf",r.getTravelDurationDisplay(t))}}function Mae(n,e){if(n&1){let t=$e();f(0,"div",59)(1,"div",60),le("click",function(){let i=ne(t).$implicit,o=G(2);return re(o.viewAfroshopDetail(i.id))}),f(2,"img",61),le("error",function(i){let o=ne(t).$implicit,s=G(2);return re(s.onImageError(i,o.type))}),p(),f(3,"div",62),g(4),p(),ae(5,Aae,2,0,"button",63),f(6,"div",64)(7,"span",65),g(8,"\u{1F4CD} Details ansehen"),p()()(),f(9,"div",66)(10,"h3",67),g(11),p(),f(12,"p",68),g(13),p(),f(14,"div",69)(15,"span",70),g(16),p(),f(17,"span",71),g(18),p(),f(19,"span",72),g(20),$i(21,"titlecase"),p()(),ae(22,xae,3,2,"div",73),f(23,"div",74)(24,"a",75),g(25,"\u{1F5FA}\uFE0F Karte anzeigen"),p(),f(26,"a",76),g(27,"\u{1F697} Route"),p()()()()}if(n&2){let t=e.$implicit,r=G(2);O(2),j("src",t.image||r.getDefaultImage(t.type),zi)("alt",t.name),O(),Ys(t.type),O(),Le(" ",r.getBusinessTypeDisplay(t.type)," "),O(),j("ngIf",r.canEditAfroshop(t)),O(6),vt(t.name),O(2),Le("\u{1F4CD} ",r.getLocationDisplay(t.address),""),O(3),Le("\u2B50 ",t.rating,""),O(2),vt(r.getPriceLevel(t.priceLevel)),O(2),vt(Hi(21,14,t.type)),O(2),j("ngIf",r.userLocation),O(2),j("href",r.getGoogleMapsUrl(t.address),zi),O(2),j("href",r.getGoogleMapsRouteUrl(t.address),zi)}}function Pae(n,e){if(n&1&&(f(0,"div",57),ae(1,Mae,28,16,"div",58),p()),n&2){let t=G();O(),j("ngForOf",t.filteredAfroshops)}}function Rae(n,e){if(n&1){let t=$e();f(0,"div",79)(1,"div",80)(2,"div",81),g(3,"\u{1F50D}"),p(),f(4,"h3"),g(5,"Kein Gesch\xE4ft gefunden"),p(),f(6,"p"),g(7,"Kein Afroshop entspricht deinen Suchkriterien"),p(),f(8,"button",82),le("click",function(){ne(t);let i=G();return re(i.clearSearch())}),g(9," Alle Gesch\xE4fte anzeigen "),p()()()}}var zw=class n{constructor(e,t,r,i,o,s,a){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.translationService=i;this.router=o;this.geolocationService=s;this.geocodingService=a;this.user$=this.authService.user$}getGoogleMapsUrl(e){return e?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`:"https://maps.google.com"}getGoogleMapsRouteUrl(e){return e?`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e)}`:"https://maps.google.com"}directionsService=null;travelDurations={};allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;addAfroshop(){alert("Formulaire d'ajout Afroshop \xE0 impl\xE9menter.")}openSettings(){this.router.navigate(["/admin"])}cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){window.google&&window.google.maps&&(this.directionsService=new window.google.maps.DirectionsService),navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude}}),this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){let e=prompt(`\u{1F4CD} Standort automatisch nicht m\xF6glich

Bitte gib deine Stadt ein f\xFCr personalisierte Ergebnisse:

Beispiele: Dortmund, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf...

Deine Stadt:`,localStorage.getItem("afroconnect-user-city")||"Dortmund");if(e&&e.trim()){let t=e.toLowerCase().trim();localStorage.setItem("afroconnect-user-city",t),this.cityCoordinates[t]?(this.userLocation=this.cityCoordinates[t],this.selectedCity=t,alert(`\u2705 Standort auf ${this.formatCityName(t)} gesetzt!

\u{1F3AF} Afroshops werden nach Entfernung zu ${this.formatCityName(t)} sortiert.
\u{1F4CF} Du siehst jetzt relevante Gesch\xE4fte in deiner N\xE4he.`)):(this.userLocation=this.cityCoordinates.dortmund||this.cityCoordinates.berlin,this.selectedCity="dortmund",alert(`\u{1F4CD} Stadt "${e}" nicht erkannt

Dortmund wurde als Standard-Standort gew\xE4hlt.

Du kannst jederzeit:
\u2022 Eine andere Stadt aus der Liste w\xE4hlen
\u2022 Eine andere Stadt eingeben
\u2022 GPS nochmal versuchen`))}else this.userLocation=this.cityCoordinates.dortmund||this.cityCoordinates.berlin,this.selectedCity="dortmund",alert(`\u{1F4CD} Standard-Standort: Dortmund

Du kannst jederzeit:
\u2022 Eine Stadt aus der Liste w\xE4hlen
\u2022 Eine Stadt eingeben
\u2022 GPS erneut aktivieren`);this.applyFilters(),this.sortAfroshopsByDistance()}formatCityName(e){return{berlin:"Berlin",hamburg:"Hamburg",m\u00FCnchen:"M\xFCnchen",k\u00F6ln:"K\xF6ln",frankfurt:"Frankfurt am Main",stuttgart:"Stuttgart",d\u00FCsseldorf:"D\xFCsseldorf",dortmund:"Dortmund",essen:"Essen",leipzig:"Leipzig"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(this.userLocation&&e.coordinates.lat&&e.coordinates.lng&&this.travelDurations[e.id],!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}getDirectionsDuration(e){if(!this.directionsService)if(window.google&&window.google.maps)this.directionsService=new window.google.maps.DirectionsService;else return;let t=new window.google.maps.LatLng(this.userLocation.lat,this.userLocation.lng),r=new window.google.maps.LatLng(e.coordinates.lat,e.coordinates.lng);this.directionsService.route({origin:t,destination:r,travelMode:"DRIVING"},(i,o)=>{if(o==="OK"&&i.routes.length>0){let s=i.routes[0].legs[0].duration.text;this.travelDurations[e.id]=he($({},this.travelDurations[e.id]),{driving:s})}}),this.directionsService.route({origin:t,destination:r,travelMode:"WALKING"},(i,o)=>{if(o==="OK"&&i.routes.length>0){let s=i.routes[0].legs[0].duration.text;this.travelDurations[e.id]=he($({},this.travelDurations[e.id]),{walking:s})}})}getTravelDurationDisplay(e){let t=this.travelDurations[e.id];if(!t)return"";let r="";return t.driving&&(r+=`\u{1F697} ${t.driving}`),t.walking&&(r+=(r?" | ":"")+`\u{1F6B6} ${t.walking}`),r}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}isAdminUser(e){return!e||!e.email?!1:["youssoufdiamaldiallo@gmail.com","admin@afroconnect.de","contact@afroconnect.de"].includes(e.email)}goToAdmin(){this.router.navigate(["/admin"])}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}getBusinessTypeDisplay(e){return this.translationService.getBusinessTypeDisplay(e)}getBusinessTypeIcon(e){return this.translationService.getBusinessTypeIcon(e)}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return S(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],o=parseFloat(i.lat),s=parseFloat(i.lon);if(!isNaN(o)&&!isNaN(s)){this.userLocation={lat:o,lng:s},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${o.toFixed(4)}, ${s.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return he($({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=he($({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[o,s]of Object.entries(r))if(t.includes(o))return s;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[o,s]of Object.entries(i))if(e.includes(o))return s;return null}static \u0275fac=function(t){return new(t||n)(te(fh),te(sr),te(Zt),te(go),te(It),te(jw),te(Na))};static \u0275cmp=ut({type:n,selectors:[["app-gallery"]],decls:76,vars:13,consts:[[1,"intro-section"],[1,"intro-message"],[1,"intro-actions"],[1,"add-shop-btn",3,"click"],[4,"ngIf"],[1,"controls-section"],[1,"controls-main"],[1,"controls-row"],[1,"filter-gps-column"],[1,"type-filter-group"],["for","type-filter",1,"unified-label"],["id","type-filter",1,"unified-select","type-select-compact",3,"ngModelChange","change","ngModel"],["value",""],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],[1,"gps-group"],["title","GPS aktivieren und Standort verwenden",1,"location-btn","gps-btn-desktop",3,"click"],["class","radius-info",4,"ngIf"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"city-search-group"],[1,"unified-input-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt...",1,"unified-input","city-input-compact",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn","search-btn",3,"click","disabled"],[1,"quick-cities-group"],[1,"unified-select","city-select-compact",3,"ngModelChange","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["value","bremen"],["value","hannover"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn","confirm-btn",3,"click","disabled"],[1,"gallery-section"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],["class","settings-btn",3,"click",4,"ngIf"],[1,"settings-btn",3,"click"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],[1,"map-buttons"],["target","_blank",1,"map-btn",3,"href"],["target","_blank",1,"route-btn",3,"href"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(f(0,"section",0)(1,"div",1),g(2),p(),f(3,"div",2)(4,"button",3),le("click",function(){return r.goToAddAfroshop()}),g(5,"\u2795 Afroshop hinzuf\xFCgen"),p(),ae(6,Iae,2,1,"ng-container",4),$i(7,"async"),p()(),f(8,"section",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),g(14,"Nach Type filtern:"),p(),f(15,"select",11),Ce("ngModelChange",function(o){return Se(r.selectedType,o)||(r.selectedType=o),o}),le("change",function(){return r.onTypeFilterChange()}),f(16,"option",12),g(17,"Alle Typen"),p(),f(18,"option",13),g(19,"Restaurant"),p(),f(20,"option",14),g(21,"Epicerie"),p(),f(22,"option",15),g(23,"Coiffeur"),p(),f(24,"option",16),g(25,"V\xEAtement"),p(),f(26,"option",17),g(27,"Services"),p()()(),f(28,"div",18)(29,"button",19),le("click",function(){return r.useCurrentLocation()}),g(30," \u{1F4E1} GPS aktivieren "),p()()(),ae(31,Tae,7,4,"div",20),p(),f(32,"div",7)(33,"div",21)(34,"label",22),g(35,"\u{1F4CD} Deine Stadt:"),p(),f(36,"div",23)(37,"div",24)(38,"input",25),Ce("ngModelChange",function(o){return Se(r.customCityName,o)||(r.customCityName=o),o}),le("keyup.enter",function(){return r.searchCity()}),p(),f(39,"button",26),le("click",function(){return r.searchCity()}),g(40," \u{1F50D} Suchen "),p()()(),f(41,"div",27)(42,"div",24)(43,"select",28),Ce("ngModelChange",function(o){return Se(r.selectedCity,o)||(r.selectedCity=o),o}),f(44,"option",12),g(45,"Beliebte St\xE4dte..."),p(),f(46,"option",29),g(47,"Berlin"),p(),f(48,"option",30),g(49,"Hamburg"),p(),f(50,"option",31),g(51,"M\xFCnchen"),p(),f(52,"option",32),g(53,"K\xF6ln"),p(),f(54,"option",33),g(55,"Frankfurt am Main"),p(),f(56,"option",34),g(57,"Stuttgart"),p(),f(58,"option",35),g(59,"D\xFCsseldorf"),p(),f(60,"option",36),g(61,"Dortmund"),p(),f(62,"option",37),g(63,"Essen"),p(),f(64,"option",38),g(65,"Leipzig"),p(),f(66,"option",39),g(67,"Bremen"),p(),f(68,"option",40),g(69,"Hannover"),p()(),f(70,"button",41),le("click",function(){return r.onCityChange()}),g(71," \u2713 Best\xE4tigen "),p()()()()()()(),f(72,"section",42),ae(73,Sae,2,2,"div",43)(74,Pae,2,1,"div",44)(75,Rae,10,0,"div",45),p()),t&2&&(O(2),Le(" \u{1F30D} Entdecke ",r.allAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he "),O(4),j("ngIf",Hi(7,11,r.user$)),O(9),be("ngModel",r.selectedType),O(16),j("ngIf",r.userLocation&&!r.selectedCity),O(7),be("ngModel",r.customCityName),O(),j("disabled",!r.customCityName||!r.customCityName.trim()),O(4),be("ngModel",r.selectedCity),O(27),j("disabled",!r.selectedCity),O(3),j("ngIf",r.showMap&&r.filteredAfroshops.length>0),O(),j("ngIf",!r.showMap&&r.filteredAfroshops.length>0),O(),j("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[St,rr,Ut,df,Tc,po,Lw,Fw,zr,hh,fo,Ii,Uw],styles:["@media (min-width: 600px) and (max-width: 1024px){.quick-cities-group[_ngcontent-%COMP%]{margin-top:2.2rem}}@media (min-width: 600px) and (max-width: 1024px){.unified-select.city-select-compact[_ngcontent-%COMP%]{max-width:220px;width:100%;min-width:120px}}@media (min-width: 600px) and (max-width: 1024px){.unified-input-group[_ngcontent-%COMP%]{gap:2rem}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:120px;max-width:120px;width:120px}}@media (min-width: 600px) and (max-width: 1024px){.unified-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.7rem;width:100%}.unified-input.city-input-compact[_ngcontent-%COMP%]{flex:1 1 0;min-width:0;max-width:70%}.search-btn[_ngcontent-%COMP%]{min-width:90px;max-width:30%;margin-left:.2rem}.quick-cities-group[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}}@media (min-width: 600px) and (max-width: 1024px){.location-container[_ngcontent-%COMP%]{gap:2.2rem;display:flex;flex-direction:column}.city-search-group[_ngcontent-%COMP%]{margin-bottom:3.5rem}}@media (min-width: 600px) and (max-width: 1024px){.gallery-section[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:900px;width:100%;display:block}}@media (min-width: 600px) and (max-width: 1024px){.controls-main[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch!important;gap:1.5rem}.controls-row[_ngcontent-%COMP%], .filter-gps-column[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch!important;gap:1.2rem}.type-filter-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{width:100%;margin-bottom:.7rem}.radius-info.radius-center[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%]{max-width:98vw;padding:1rem 1.2rem;font-size:1.05rem}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:1.2rem;justify-content:center}.shop-card[_ngcontent-%COMP%]{max-width:95vw;min-width:320px;margin-left:auto;margin-right:auto}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{font-size:1.08rem;min-height:2.2rem}}.filter-gps-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem;align-items:flex-start;margin-bottom:1.5rem}.radius-info.radius-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#f9f9f9;border:1px solid #e5e7eb;border-radius:10px;padding:.7rem 1.2rem;margin:1.2rem auto;max-width:420px;font-size:1rem}.radius-info[_ngcontent-%COMP%]   .radius-indicator[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;margin-bottom:.5rem}.radius-info[_ngcontent-%COMP%]   .city-name[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]{color:#3182ce;font-weight:500}.radius-info[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{color:#4a5568;font-size:.98rem;margin-top:.3rem}.controls-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem;align-items:flex-start;margin-bottom:1.5rem}@media (max-width: 900px){.gallery-grid[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;align-items:center!important;justify-content:flex-start;width:100%;padding:0;margin:0;box-sizing:border-box}}.shop-card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:100%;max-width:420px;box-sizing:border-box}@media (max-width: 900px){.shop-card[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;width:calc(100% - 1rem);max-width:98vw}}@media (max-width: 600px){.shop-card[_ngcontent-%COMP%]{margin-left:.2rem;margin-right:.2rem;width:calc(100% - .4rem);max-width:99vw}}@media (max-width: 900px){.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{width:70%;min-width:120px;max-width:220px;margin-left:auto;margin-right:auto;display:block}}@media (max-width: 600px){.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{width:95%;min-width:90px;max-width:180px;font-size:.97rem;margin-left:auto;margin-right:auto;display:block}}@media (max-width: 900px){.location-btn[_ngcontent-%COMP%]{width:70%;min-width:120px;max-width:220px;padding-left:.5rem;padding-right:.5rem}}@media (max-width: 600px){.location-btn[_ngcontent-%COMP%]{width:95%;min-width:90px;max-width:180px;font-size:.97rem;padding-left:.3rem;padding-right:.3rem}}@media (max-width: 900px){.controls-section[_ngcontent-%COMP%], .controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%], .city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;align-items:center!important;width:100%!important;gap:.4rem}}@media (max-width: 900px){.intro-actions[_ngcontent-%COMP%], .controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;width:100%;align-items:center}.gps-group[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%], .city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem;align-items:center;display:flex;flex-direction:column;gap:.3rem}.unified-input-group[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:.3rem;align-items:center}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.5rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.2rem;box-shadow:0 1px 4px #00000014}.radius-info[_ngcontent-%COMP%]{text-align:center;font-size:.98rem;padding:.4rem .2rem;border-radius:7px}.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.7rem .1rem;border-radius:8px;box-shadow:0 1px 4px #00000014}}@media (max-width: 900px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.8rem .2rem;border-radius:10px;box-shadow:0 2px 8px #00000012}.intro-message[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.7rem}.controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:.7rem;width:100%;align-items:stretch}.location-container[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:0 .2rem;box-sizing:border-box}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.4rem;box-shadow:0 1px 4px #00000014}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:.98rem}.gallery-section[_ngcontent-%COMP%]{padding:.5rem .1rem}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:1rem}.shop-card[_ngcontent-%COMP%]{min-width:0;width:100%;box-shadow:0 1px 6px #00000014;border-radius:10px}.card-info[_ngcontent-%COMP%]{font-size:.98rem;padding:.7rem .5rem}}@media (max-width: 600px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.4rem .05rem;border-radius:7px;box-shadow:0 1px 4px #0000000f}.intro-message[_ngcontent-%COMP%]{font-size:.98rem;margin-bottom:.5rem}.controls-section[_ngcontent-%COMP%]{gap:.5rem}.radius-info[_ngcontent-%COMP%]{font-size:.93rem;padding:.3rem .2rem;border-radius:6px}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{font-size:.95rem;min-width:0;padding:.4rem .5rem;margin-bottom:.3rem}.gallery-section[_ngcontent-%COMP%]{padding:.2rem .01rem}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:.7rem}.shop-card[_ngcontent-%COMP%]{border-radius:7px;box-shadow:0 1px 3px #00000012}.card-info[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem .2rem}}@media (max-width: 900px){.controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:1.2rem;width:100%;align-items:center}.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:1.2rem .5rem}.intro-message[_ngcontent-%COMP%]{font-size:1.1rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:180px;font-size:1rem;margin-bottom:.5rem}.location-container[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:0 .5rem}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0}}@media (max-width: 600px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.7rem .2rem;border-radius:10px}.intro-message[_ngcontent-%COMP%]{font-size:1rem}.controls-section[_ngcontent-%COMP%]{gap:1rem}.radius-info[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{font-size:.98rem;min-width:120px;padding:.5rem .7rem}}.controls-main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}.controls-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:2rem;width:100%;margin-bottom:1.2rem}.location-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.location-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:.6rem 1.2rem;border-radius:8px;background:#e0f7fa;color:#00796b;border:none;box-shadow:0 1px 4px #00000012;cursor:pointer;transition:background .2s,color .2s}.location-btn[_ngcontent-%COMP%]:hover{background:#b2ebf2;color:#004d40}.radius-info[_ngcontent-%COMP%]{background:#f3e5f5;border-radius:8px;padding:.7rem 1rem;margin-bottom:.5rem;text-align:center;color:#6a1b9a;font-weight:500;box-shadow:0 1px 4px #0000000a}.radius-indicator[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.3rem}.results-count[_ngcontent-%COMP%]{font-size:.95rem;color:#333}.location-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto;display:flex;flex-direction:column;gap:1rem}.unified-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#222}.city-search-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.unified-input.city-input-compact[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border-radius:8px;border:1px solid #e0e0e0;font-size:1rem}.search-btn[_ngcontent-%COMP%]{background:#e0f7fa;color:#00796b;border:none;border-radius:8px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s,color .2s}.search-btn[_ngcontent-%COMP%]:hover{background:#b2ebf2;color:#004d40}.quick-cities-group[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;gap:.5rem}.unified-select.city-select-compact[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;border:1px solid #e0e0e0;font-size:1rem}.confirm-btn[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a;border:none;border-radius:8px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s,color .2s}.confirm-btn[_ngcontent-%COMP%]:hover{background:#ce93d8;color:#4a148c}.location-hint[_ngcontent-%COMP%]{font-size:.95rem;color:#888;margin-top:.5rem;text-align:center}.intro-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1rem 1.5rem;background:#f8fafc;border-radius:16px;box-shadow:0 2px 8px #0000000a;margin-bottom:2rem}.intro-message[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#222;margin-bottom:1.2rem;text-align:center;letter-spacing:.5px}.intro-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:.6rem 1.2rem;border-radius:8px;border:none;background:#fff;color:#222;box-shadow:0 1px 4px #00000012;cursor:pointer;transition:background .2s,box-shadow .2s}.add-shop-btn[_ngcontent-%COMP%]:hover{background:#e0f7fa;color:#00796b}.settings-btn[_ngcontent-%COMP%]:hover{background:#f3e5f5;color:#6a1b9a}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;box-shadow:0 4px 16px #00000026;gap:48px;align-items:start;padding:32px 40px;background:linear-gradient(135deg,#fff,#f4f7fa);border-radius:18px;box-shadow:0 8px 32px #00000014;margin-bottom:40px}.controls-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;align-items:flex-end;justify-content:flex-start}.controls-right[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;align-items:flex-end;justify-content:flex-end}.filter-container.unified-control-group[_ngcontent-%COMP%], .gps-group-above-city[_ngcontent-%COMP%]{margin:0;max-width:220px;width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{min-width:160px;max-width:220px;padding:12px 24px;margin:0;border-radius:10px;font-size:1rem;font-weight:600;box-shadow:0 4px 15px #28a7454d;display:flex;align-items:center;justify-content:center}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{margin:0;max-width:220px;width:100%}}.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:flex-start;max-width:100%;padding-left:0}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:280px;min-width:180px;margin:0}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.controls-desktop-layout[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:24px;margin-bottom:32px;box-shadow:0 8px 32px #00000014}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(250px,300px) 1fr;gap:40px;align-items:start}.filter-container[_ngcontent-%COMP%]{margin:0;text-align:left}.filter-container[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{padding-left:0}.location-container[_ngcontent-%COMP%]{margin:0}.desktop-city-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 2fr 1fr;gap:20px;align-items:end;width:100%}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.city-input-compact[_ngcontent-%COMP%]{min-width:200px;flex:1;max-width:300px}.city-select-compact[_ngcontent-%COMP%]{min-width:180px;flex:1;max-width:250px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:90px;flex-shrink:0}.gps-btn-desktop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #28a7454d;white-space:nowrap;width:100%;min-height:48px}.gps-btn-desktop[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #28a74566}.mobile-only[_ngcontent-%COMP%], .quick-cities[_ngcontent-%COMP%]   .unified-label[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1023px){.controls-desktop-layout[_ngcontent-%COMP%]{padding:20px}.desktop-city-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.city-input-compact[_ngcontent-%COMP%], .city-select-compact[_ngcontent-%COMP%]{flex:1}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px;flex-shrink:0}.gps-group[_ngcontent-%COMP%]{width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{width:100%;padding:14px}}@media (max-width: 767px){.controls-desktop-layout[_ngcontent-%COMP%]{background:none;border:none;padding:0;box-shadow:none}.desktop-city-controls[_ngcontent-%COMP%]{display:block}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{margin-bottom:16px}.gps-btn-desktop[_ngcontent-%COMP%]{background:var(--primary-color);width:100%;margin-top:0;padding:14px}.mobile-only[_ngcontent-%COMP%]{display:block}}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.admin-link-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);color:#fff;border:none;padding:8px 12px;border-radius:50%;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000001a;margin-left:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.admin-link-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7f8c8d,#95a5a6);transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #00000026}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}@media (min-width: 1400px){.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:320px;min-width:200px}.city-input-compact[_ngcontent-%COMP%]{max-width:350px;min-width:220px}.city-select-compact[_ngcontent-%COMP%]{max-width:280px;min-width:200px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px}}"]})};function kae(n,e){if(n&1){let t=$e();f(0,"button",26),le("click",function(){ne(t);let i=G(2);return re(i.editAfroshop())}),g(1," \u270F\uFE0F Bearbeiten "),p()}}function Oae(n,e){if(n&1){let t=$e();f(0,"div")(1,"img",27),le("error",function(i){ne(t);let o=G(2);return re(o.onImageError(i))}),p()()}if(n&2){let t=G(2);O(),j("src",t.afroshop.image,zi)("alt",t.afroshop.name)}}function Nae(n,e){if(n&1&&(f(0,"div",28)(1,"div",29),g(2,"\u{1F4F7}"),p(),f(3,"p"),g(4,"Kein Bild verf\xFCgbar"),p(),f(5,"small"),g(6),p()()),n&2){let t=G(2);O(6),vt(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function Lae(n,e){if(n&1&&(f(0,"div",30),g(1),p()),n&2){let t=G(2);O(),Le(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function Fae(n,e){if(n&1&&(f(0,"div",31)(1,"span",32),g(2),p(),f(3,"span",33),g(4),p()()),n&2){let t=e.$implicit;bc("closed",!t.isOpen)("open",t.isOpen),O(2),Le("",t.day,":"),O(),bc("closed-text",!t.isOpen),O(),Le(" ",t.hours," ")}}function Vae(n,e){if(n&1){let t=$e();f(0,"div",3)(1,"div",4)(2,"button",5),le("click",function(){ne(t);let i=G();return re(i.goBack())}),g(3," \u2190 Zur\xFCck zur \xDCbersicht "),p(),ae(4,kae,2,0,"button",6),p(),f(5,"div",7)(6,"div",8),ae(7,Oae,2,2,"div",9)(8,Nae,7,1,"ng-template",null,0,ON),f(10,"div",10),g(11),$i(12,"titlecase"),p()(),f(13,"div",11)(14,"h1"),g(15),p(),f(16,"div",12)(17,"div",13),g(18),p(),ae(19,Lae,2,1,"div",14),p(),f(20,"div",15)(21,"div",16)(22,"strong"),g(23,"\u{1F4CD} Adresse:"),p(),f(24,"p"),g(25),p()(),f(26,"div",16)(27,"strong"),g(28,"\u{1F4DE} Telefon:"),p(),f(29,"p")(30,"a",17),g(31),p()()(),f(32,"div",16)(33,"strong"),g(34,"\u{1F552} \xD6ffnungszeiten:"),p(),f(35,"div",18),ae(36,Fae,5,8,"div",19),p()()(),f(37,"div",20)(38,"h3"),g(39,"\xDCber uns"),p(),f(40,"p"),g(41),p()(),f(42,"div",21)(43,"button",22),le("click",function(){ne(t);let i=G();return re(i.callPhone(i.afroshop.phone))}),g(44," \u{1F4DE} Anrufen "),p(),f(45,"button",23),le("click",function(){ne(t);let i=G();return re(i.openInMaps())}),g(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),p(),f(47,"button",24),le("click",function(){ne(t);let i=G();return re(i.getDirections())}),g(48," \u{1F9ED} Route "),p(),f(49,"button",25),le("click",function(){ne(t);let i=G();return re(i.goBack())}),g(50," \u2190 Zur\xFCck "),p()()()()()}if(n&2){let t=Ru(9),r=G();O(4),j("ngIf",r.canEdit()),O(3),j("ngIf",r.afroshop.image)("ngIfElse",t),O(3),Ys(r.afroshop.type),O(),yr(" ",r.getTypeIcon(r.afroshop.type)," ",Hi(12,17,r.afroshop.type)," "),O(4),vt(r.afroshop.name),O(3),yr(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),O(),j("ngIf",r.afroshop.cuisine),O(6),vt(r.afroshop.address),O(5),tC("href","tel:",r.afroshop.phone,"",zi),O(),Le(" ",r.afroshop.phone," "),O(5),j("ngForOf",r.formattedHours),O(5),vt(r.afroshop.description)}}function Uae(n,e){if(n&1){let t=$e();f(0,"div",34)(1,"h2"),g(2,"\u274C Gesch\xE4ft nicht gefunden"),p(),f(3,"p"),g(4,"Das gesuchte Gesch\xE4ft existiert nicht."),p(),f(5,"button",5),le("click",function(){ne(t);let i=G();return re(i.goBack())}),g(6," \u2190 Zur\xFCck zur \xDCbersicht "),p()()}}var $w=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=o}afroshop;shopId="";formattedHours=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop),this.parseOpeningHours(this.afroshop.hours||"")):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let t=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(this.afroshop.address||`${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`)}`;window.open(t,"_blank")}}getDirections(){if(this.afroshop){let t=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(this.afroshop.address||`${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`)}`;window.open(t,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}parseOpeningHours(e){if(this.formattedHours=[],!e)return;let t={Mo:"Montag",Di:"Dienstag",Mi:"Mittwoch",Do:"Donnerstag",Fr:"Freitag",Sa:"Samstag",So:"Sonntag"},r=e.split(",").map(s=>s.trim()),i=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],o={};i.forEach(s=>{o[s]={isOpen:!1,hours:"Geschlossen"}}),r.forEach(s=>{let a=s.indexOf(":");if(a===-1)return;let c=s.substring(0,a).trim(),u=s.substring(a+1).trim();if(c.includes("-")){let[h,_]=c.split("-").map(k=>k.trim()),I=t[h],T=t[_];if(I&&T){let k=i.indexOf(I),L=i.indexOf(T);if(k!==-1&&L!==-1)if(k<=L)for(let N=k;N<=L;N++)o[i[N]]={isOpen:!0,hours:u};else{for(let N=k;N<i.length;N++)o[i[N]]={isOpen:!0,hours:u};for(let N=0;N<=L;N++)o[i[N]]={isOpen:!0,hours:u}}}}else{let h=t[c];h&&(o[h]={isOpen:!0,hours:u})}}),i.forEach(s=>{this.formattedHours.push({day:s,hours:o[s].hours,isOpen:o[s].isOpen})})}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(te(On),te(It),te(fh),te(sr),te(Zt))};static \u0275cmp=ut({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"opening-hours-display"],["class","day-row",3,"closed","open",4,"ngFor","ngForOf"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"day-row"],[1,"day-name"],[1,"day-hours"],[1,"error-container"]],template:function(t,r){t&1&&ae(0,Vae,51,19,"div",1)(1,Uae,7,0,"div",2),t&2&&(j("ngIf",r.afroshop),O(),j("ngIf",!r.afroshop))},dependencies:[St,rr,Ut,Tc],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;flex-direction:column;align-items:center}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:var(--spacing-sm);text-align:center}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);display:flex;align-items:center}.image-section[_ngcontent-%COMP%]{order:1;display:flex;justify-content:center;width:100%}.detail-image[_ngcontent-%COMP%]{margin:0 auto;display:block}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm);width:100%;text-align:center;display:flex;flex-direction:column;align-items:center}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);width:100%;text-align:center;display:flex;flex-direction:column;align-items:center}.contact-item[_ngcontent-%COMP%]{text-align:center;width:100%}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm);width:100%;display:flex;flex-direction:column;align-items:center}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center;margin:0 auto;width:100%}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;text-align:center}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}.opening-hours-display[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);background:var(--surface-color);border-radius:var(--border-radius);padding:var(--spacing-md);border:1px solid var(--border-color)}.day-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-xs) 0;border-bottom:1px solid var(--border-light);transition:all var(--transition-normal)}.day-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.day-row.open[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf500d,#4caf5005)}.day-row.closed[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f443360d,#f4433605)}.day-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);min-width:100px;font-size:.95rem}.day-hours[_ngcontent-%COMP%]{color:#4caf50;font-weight:500;font-size:.95rem;text-align:right}.day-hours.closed-text[_ngcontent-%COMP%]{color:#f44336;font-style:italic}@media (max-width: 768px){.opening-hours-display[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.day-row[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.day-name[_ngcontent-%COMP%]{min-width:80px;font-size:.9rem}.day-hours[_ngcontent-%COMP%]{font-size:.9rem}}"]})};function Bae(n,e){n&1&&(f(0,"a",77),g(1," \u2190 Admin "),p())}function jae(n,e){n&1&&(f(0,"span"),g(1,"\u{1F4E5} Importieren"),p())}function zae(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 L\xE4dt..."),p())}function $ae(n,e){if(n&1&&(f(0,"div",78),g(1),p()),n&2){let t=G();O(),Le(" \u2705 ",t.successMessage," ")}}function Hae(n,e){if(n&1&&(f(0,"div",79),g(1),p()),n&2){let t=G();O(),Le(" \u274C ",t.errorMessage," ")}}function qae(n,e){if(n&1&&(f(0,"div",80),g(1),p()),n&2){let t=G();O(),Le(" \u26A0\uFE0F ",t.geocodingWarning||"Achtung: Die Adresse konnte nicht genau lokalisiert werden. Bitte \xFCberpr\xFCfen Sie die Eingabe."," ")}}function Gae(n,e){if(n&1&&(f(0,"option",81),g(1),p()),n&2){let t=e.$implicit;j("value",t.value),O(),yr(" ",t.icon," ",t.label," ")}}function Wae(n,e){n&1&&(f(0,"span"),g(1,"\u{1F4C1} Bild ausw\xE4hlen"),p())}function Kae(n,e){n&1&&(f(0,"span"),g(1,"\u{1F504} Anderes Bild w\xE4hlen"),p())}function Qae(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Wird bearbeitet..."),p())}function Yae(n,e){n&1&&(f(0,"div",82)(1,"div",83),Ne(2,"div",84),p(),f(3,"small"),g(4,"Bild wird komprimiert und vorbereitet..."),p()())}function Jae(n,e){if(n&1){let t=$e();f(0,"div",85),Ne(1,"img",86),f(2,"button",87),le("click",function(){ne(t);let i=G(),o=Ru(48);return i.imagePreview=null,i.selectedFile=null,re(o.value="")}),g(3," \u2715 "),p()()}if(n&2){let t=G();O(),j("src",t.imagePreview,zi)}}function Zae(n,e){n&1&&(f(0,"div",88),g(1," \u{1F5FA}\uFE0F Adresse wird georeferenziert... "),p())}function Xae(n,e){if(n&1&&(f(0,"div",89),g(1),p()),n&2){let t=G();O(),yr(" \u2705 Standort gefunden: ",t.afroshop.coordinates.lat.toFixed(4),", ",t.afroshop.coordinates.lng.toFixed(4)," ")}}function ece(n,e){if(n&1){let t=$e();f(0,"div",11)(1,"label",90),g(2,"K\xFCche"),p(),f(3,"input",91),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.afroshop.cuisine,i)||(o.afroshop.cuisine=i),re(i)}),p(),f(4,"small",33),g(5,"Spezifizieren Sie die Art der afrikanischen K\xFCche"),p()()}if(n&2){let t=G();O(3),be("ngModel",t.afroshop.cuisine)}}function tce(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",93),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.monday.open,i)||(o.openingHours.monday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",98),g(11,"10:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",113),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.monday.close,i)||(o.openingHours.monday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",107),g(68,"19:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.monday.open),O(39),be("ngModel",t.openingHours.monday.close)}}function nce(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",114),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.tuesday.open,i)||(o.openingHours.tuesday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",98),g(11,"10:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",115),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.tuesday.close,i)||(o.openingHours.tuesday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",107),g(68,"19:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.tuesday.open),O(39),be("ngModel",t.openingHours.tuesday.close)}}function rce(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",116),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.wednesday.open,i)||(o.openingHours.wednesday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",97),g(11,"09:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",117),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.wednesday.close,i)||(o.openingHours.wednesday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",107),g(68,"19:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.wednesday.open),O(39),be("ngModel",t.openingHours.wednesday.close)}}function ice(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",118),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.thursday.open,i)||(o.openingHours.thursday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",97),g(11,"09:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",119),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.thursday.close,i)||(o.openingHours.thursday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",97),g(68,"09:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.thursday.open),O(39),be("ngModel",t.openingHours.thursday.close)}}function oce(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",120),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.friday.open,i)||(o.openingHours.friday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",97),g(11,"09:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",121),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.friday.close,i)||(o.openingHours.friday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",97),g(68,"09:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.friday.open),O(39),be("ngModel",t.openingHours.friday.close)}}function sce(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",122),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.saturday.open,i)||(o.openingHours.saturday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",97),g(11,"09:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",123),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.saturday.close,i)||(o.openingHours.saturday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",107),g(68,"19:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.saturday.open),O(39),be("ngModel",t.openingHours.saturday.close)}}function ace(n,e){if(n&1){let t=$e();f(0,"div",92)(1,"select",124),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.sunday.open,i)||(o.openingHours.sunday.open=i),re(i)}),f(2,"option",94),g(3,"06:00"),p(),f(4,"option",95),g(5,"07:00"),p(),f(6,"option",96),g(7,"08:00"),p(),f(8,"option",97),g(9,"09:00"),p(),f(10,"option",98),g(11,"10:00"),p(),f(12,"option",99),g(13,"11:00"),p(),f(14,"option",100),g(15,"12:00"),p(),f(16,"option",101),g(17,"13:00"),p(),f(18,"option",102),g(19,"14:00"),p(),f(20,"option",103),g(21,"15:00"),p(),f(22,"option",104),g(23,"16:00"),p(),f(24,"option",105),g(25,"17:00"),p(),f(26,"option",106),g(27,"18:00"),p(),f(28,"option",107),g(29,"19:00"),p(),f(30,"option",108),g(31,"20:00"),p(),f(32,"option",109),g(33,"21:00"),p(),f(34,"option",110),g(35,"22:00"),p(),f(36,"option",111),g(37,"23:00"),p()(),f(38,"span",112),g(39,"bis"),p(),f(40,"select",125),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.openingHours.sunday.close,i)||(o.openingHours.sunday.close=i),re(i)}),f(41,"option",94),g(42,"06:00"),p(),f(43,"option",95),g(44,"07:00"),p(),f(45,"option",96),g(46,"08:00"),p(),f(47,"option",97),g(48,"09:00"),p(),f(49,"option",98),g(50,"10:00"),p(),f(51,"option",99),g(52,"11:00"),p(),f(53,"option",100),g(54,"12:00"),p(),f(55,"option",101),g(56,"13:00"),p(),f(57,"option",102),g(58,"14:00"),p(),f(59,"option",103),g(60,"15:00"),p(),f(61,"option",104),g(62,"16:00"),p(),f(63,"option",105),g(64,"17:00"),p(),f(65,"option",106),g(66,"18:00"),p(),f(67,"option",107),g(68,"19:00"),p(),f(69,"option",108),g(70,"20:00"),p(),f(71,"option",109),g(72,"21:00"),p(),f(73,"option",110),g(74,"22:00"),p(),f(75,"option",111),g(76,"23:00"),p()()()}if(n&2){let t=G();O(),be("ngModel",t.openingHours.sunday.open),O(39),be("ngModel",t.openingHours.sunday.close)}}function cce(n,e){n&1&&(f(0,"span"),g(1,"\u274C Abbrechen"),p())}function lce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Warten..."),p())}function uce(n,e){if(n&1&&(f(0,"span"),g(1),p()),n&2){let t=G();O(),vt(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function dce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F4E4} Bild wird hochgeladen..."),p())}function hce(n,e){if(n&1&&(f(0,"span"),g(1),p()),n&2){let t=G();O(),vt(t.isEditMode?"\u{1F4BE} \xC4nderungen speichern":"\u{1F3EA} Afroshop hinzuf\xFCgen")}}var _g=class n{constructor(e,t,r,i,o,s){this.firebaseService=e;this.authService=t;this.translationService=r;this.geocodingService=i;this.router=o;this.route=s}geocodingWarning="";initStreetAutocomplete(e){let t=this.geocodingService.GOOGLE_MAPS_API_KEY;if(!window.google||!window.google.maps)if(document.getElementById("google-maps-script"))document.getElementById("google-maps-script").addEventListener("load",()=>this.setupAutocomplete(e));else{let r=document.createElement("script");r.id="google-maps-script",r.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places`,r.async=!0,r.defer=!0,r.onload=()=>this.setupAutocomplete(e),document.body.appendChild(r)}else this.setupAutocomplete(e)}setupAutocomplete(e){if(window.google&&window.google.maps){let t=new window.google.maps.places.Autocomplete(e,{types:["address"],componentRestrictions:{country:"de"}});t.addListener("place_changed",()=>{let r=t.getPlace();if(r&&r.address_components){let i="",o="",s="";for(let a of r.address_components)a.types.includes("route")&&(i=a.long_name),a.types.includes("street_number")&&(i+=" "+a.long_name),a.types.includes("locality")&&(o=a.long_name),a.types.includes("postal_code")&&(s=a.long_name);this.afroshop.street=i.trim(),this.afroshop.city=o,this.afroshop.plz=s}})}}afroshop={name:"",type:"restaurant",address:"",street:"",city:"",plz:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:0,hours:"",website:""};openingHours={monday:{isOpen:!1,open:"09:00",close:"18:00"},tuesday:{isOpen:!1,open:"09:00",close:"18:00"},wednesday:{isOpen:!1,open:"09:00",close:"18:00"},thursday:{isOpen:!1,open:"09:00",close:"18:00"},friday:{isOpen:!1,open:"09:00",close:"18:00"},saturday:{isOpen:!1,open:"10:00",close:"16:00"},sunday:{isOpen:!1,open:"12:00",close:"16:00"}};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;isGeocoding=!1;isAdmin=!1;successMessage="";errorMessage="";ngOnInit(){this.authService.user$.subscribe(t=>{this.isAdmin=t?.email==="youssoufdiamaldiallo@gmail.com"});let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return S(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);if(t){if(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",street:t.street||"",city:t.city||"",plz:t.plz||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},!this.afroshop.street&&!this.afroshop.city&&!this.afroshop.plz&&this.afroshop.address){let r=this.afroshop.address.split(",");if(this.afroshop.street=r[0]?.trim()||"",r[1]){let i=r[1].match(/(\d{5})\s*(.*)/);i?(this.afroshop.plz=i[1],this.afroshop.city=i[2]?.trim()||""):this.afroshop.city=r[1].trim()}}this.imagePreview=t.image||null,this.parseOpeningHoursFromString(t.hours||"")}else this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3)}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return S(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=o=>{this.imagePreview=o.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return S(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(s=>{e.toBlob(a=>s(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let o=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",o),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=o=>{let s=new Image;s.src=o.target.result,s.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),u=1200,h=1200,_=s.width,I=s.height;_>I?_>u&&(I*=u/_,_=u):I>h&&(_*=h/I,I=h),a.width=_,a.height=I,c?.drawImage(s,0,0,_,I),a.toBlob(T=>{if(T){let k=new File([T],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},s.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return S(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return S(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage()),(!this.afroshop.priceLevel||this.afroshop.priceLevel===0)&&(this.afroshop.priceLevel=2),this.afroshop.website=this.afroshop.website?.trim()||"",this.afroshop.cuisine=this.afroshop.cuisine?.trim()||"",this.afroshop.hours=this.convertOpeningHoursToString();let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=he($({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=he($({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?this.afroshop.address.trim()?this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)?this.afroshop.phone.trim()?this.afroshop.description.trim()?this.afroshop.website&&this.afroshop.website.trim()&&!/^https?:\/\/.+/.test(this.afroshop.website)?(this.errorMessage="Website URL muss mit http:// oder https:// beginnen",!1):(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Beschreibung ist erforderlich",!1):(this.errorMessage="Telefonnummer ist erforderlich",!1):(this.errorMessage="Adresse konnte nicht georeferenziert werden. Bitte \xFCberpr\xFCfen Sie die Adresse.",console.warn("\u274C Coordonn\xE9es invalides:",this.afroshop.coordinates),!1):(this.errorMessage="Adresse ist erforderlich",!1):(this.errorMessage="Name ist erforderlich",!1)}onAddressChange(){this.geocodeTimeout&&clearTimeout(this.geocodeTimeout),this.geocodeTimeout=setTimeout(()=>{this.setCoordinatesFromAddress()},1e3)}geocodeTimeout=null;setCoordinatesFromAddress(){let e=`${this.afroshop.street||""}, ${this.afroshop.plz||""} ${this.afroshop.city||""}`.trim();if(this.afroshop.address=e,!e||e.length===0){console.log("\u274C Adresse vide, impossible de g\xE9ocoder"),this.isGeocoding=!1;return}if(this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)){console.log("\u2705 Coordonn\xE9es d\xE9j\xE0 valides:",this.afroshop.coordinates),this.isGeocoding=!1;return}console.log("\u{1F5FA}\uFE0F D\xE9marrage du g\xE9ocodage pour:",e),this.isGeocoding=!0,this.geocodingService.geocodeAddress(e).subscribe({next:t=>{this.isGeocoding=!1,this.geocodingWarning="",t?(this.afroshop.coordinates={lat:t.lat,lng:t.lng},console.log("\u2705 G\xE9ocodage r\xE9ussi:",{address:this.afroshop.address,coordinates:this.afroshop.coordinates,formatted_address:t.formatted_address}),t.accuracy==="APPROXIMATE"&&(this.geocodingWarning="Attention : la localisation est impr\xE9cise, veuillez v\xE9rifier l'adresse."),t.formatted_address&&this.afroshop.city&&!t.formatted_address.toLowerCase().includes(this.afroshop.city.toLowerCase())&&(this.geocodingWarning="Attention : la ville trouv\xE9e ne correspond pas \xE0 celle saisie."),t.formatted_address&&t.accuracy!=="APPROXIMATE"&&(this.afroshop.address=t.formatted_address)):(console.warn("\u274C G\xE9ocodage \xE9chou\xE9 pour:",this.afroshop.address),this.geocodingWarning="Adresse non reconnue, veuillez v\xE9rifier.",this.afroshop.coordinates={lat:0,lng:0})},error:t=>{this.isGeocoding=!1,this.geocodingWarning="Erreur lors du g\xE9ocodage.",console.error("\u274C Erreur lors du g\xE9ocodage:",t),this.afroshop.coordinates={lat:0,lng:0}}})}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",street:"",city:"",plz:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return S(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return S(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return S(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|mnchen|kln|frankfurt|dortmund|essen|dsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return S(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(o=>o&&o!=="www.facebook.com"&&o!=="facebook.com"&&o!=="p"&&!o.match(/^\d+$/)&&o.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return S(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}convertOpeningHoursToString(){let e=[{key:"monday",name:"Mo"},{key:"tuesday",name:"Di"},{key:"wednesday",name:"Mi"},{key:"thursday",name:"Do"},{key:"friday",name:"Fr"},{key:"saturday",name:"Sa"},{key:"sunday",name:"So"}],t=[];return e.forEach(r=>{let i=this.openingHours[r.key];i.isOpen&&t.push(`${r.name}: ${i.open}-${i.close}`)}),t.length>0?t.join(", "):"\xD6ffnungszeiten nicht angegeben"}parseOpeningHoursFromString(e){if(!e||e==="\xD6ffnungszeiten nicht angegeben")return;this.openingHours.monday.isOpen=!1,this.openingHours.tuesday.isOpen=!1,this.openingHours.wednesday.isOpen=!1,this.openingHours.thursday.isOpen=!1,this.openingHours.friday.isOpen=!1,this.openingHours.saturday.isOpen=!1,this.openingHours.sunday.isOpen=!1,e.split(",").forEach(r=>{let o=r.trim().match(/^(\w+):\s*(\d{2}:\d{2})-(\d{2}:\d{2})$/);if(o){let[,s,a,c]=o;switch(s.toLowerCase()){case"mo":this.openingHours.monday={isOpen:!0,open:a,close:c};break;case"di":this.openingHours.tuesday={isOpen:!0,open:a,close:c};break;case"mi":this.openingHours.wednesday={isOpen:!0,open:a,close:c};break;case"do":this.openingHours.thursday={isOpen:!0,open:a,close:c};break;case"fr":this.openingHours.friday={isOpen:!0,open:a,close:c};break;case"sa":this.openingHours.saturday={isOpen:!0,open:a,close:c};break;case"so":this.openingHours.sunday={isOpen:!0,open:a,close:c};break}}})}goBack(){this.router.navigate(["/"])}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}static \u0275fac=function(t){return new(t||n)(te(sr),te(Zt),te(go),te(Na),te(It),te(On))};static \u0275cmp=ut({type:n,selectors:[["app-add-afroshop"]],decls:180,vars:50,consts:[["fileInput",""],["streetInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"header-content"],[1,"header-text"],[1,"header-actions"],["routerLink","/admin","class","back-btn",4,"ngIf"],["routerLink","/gallery",1,"back-btn"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["class","message warning",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","street"],["type","text","id","street","name","street","placeholder","z.B. M\xFCllerstra\xDFe 123","required","",1,"form-input",3,"ngModelChange","focus","input","ngModel"],["for","city"],["type","text","id","city","name","city","placeholder","z.B. Berlin","required","","pattern","[A-Za-z\xE4\xF6\xFC\xC4\xD6\xDC\xDF\\-\\s]+",1,"form-input",3,"ngModelChange","input","ngModel"],["for","plz"],["type","text","id","plz","name","plz","placeholder","z.B. 13349","required","","pattern","\\d{5}","maxlength","5",1,"form-input",3,"ngModelChange","input","ngModel"],["class","geocoding-indicator",4,"ngIf"],["class","geocoding-success",4,"ngIf"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"opening-hours-container"],[1,"day-hours"],[1,"day-label"],[1,"hours-controls"],["type","checkbox","id","mon-open","name","mon-open",3,"ngModelChange","ngModel"],["for","mon-open",1,"checkbox-label"],["class","time-selectors",4,"ngIf"],["type","checkbox","id","tue-open","name","tue-open",3,"ngModelChange","ngModel"],["for","tue-open",1,"checkbox-label"],["type","checkbox","id","wed-open","name","wed-open",3,"ngModelChange","ngModel"],["for","wed-open",1,"checkbox-label"],["type","checkbox","id","thu-open","name","thu-open",3,"ngModelChange","ngModel"],["for","thu-open",1,"checkbox-label"],["type","checkbox","id","fri-open","name","fri-open",3,"ngModelChange","ngModel"],["for","fri-open",1,"checkbox-label"],["type","checkbox","id","sat-open","name","sat-open",3,"ngModelChange","ngModel"],["for","sat-open",1,"checkbox-label"],["type","checkbox","id","sun-open","name","sun-open",3,"ngModelChange","ngModel"],["for","sun-open",1,"checkbox-label"],["for","website"],["type","url","id","website","name","website","placeholder","https://www.beispiel.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/admin",1,"back-btn"],[1,"message","success"],[1,"message","error"],[1,"message","warning"],[3,"value"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],[1,"geocoding-indicator"],[1,"geocoding-success"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische, Nigerianische, Senegalesische",1,"form-input",3,"ngModelChange","ngModel"],[1,"time-selectors"],["name","mon-open-time",1,"time-select",3,"ngModelChange","ngModel"],["value","06:00"],["value","07:00"],["value","08:00"],["value","09:00"],["value","10:00"],["value","11:00"],["value","12:00"],["value","13:00"],["value","14:00"],["value","15:00"],["value","16:00"],["value","17:00"],["value","18:00"],["value","19:00"],["value","20:00"],["value","21:00"],["value","22:00"],["value","23:00"],[1,"time-separator"],["name","mon-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-close-time",1,"time-select",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=$e();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5),p(),f(6,"p"),g(7),p()(),f(8,"div",6),ae(9,Bae,2,0,"a",7),f(10,"a",8),g(11," \u2190 Galerie "),p()()(),f(12,"form",9),le("ngSubmit",function(){return ne(i),re(r.onSubmit())}),f(13,"div",10)(14,"h3"),g(15,"\u{1F517} Schnell hinzuf\xFCgen"),p(),f(16,"p"),g(17,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),p(),f(18,"div",11)(19,"label",12),g(20,"Google Maps, Facebook, Nextdoor oder Website URL"),p(),f(21,"div",13)(22,"input",14),Ce("ngModelChange",function(s){return ne(i),Se(r.importUrl,s)||(r.importUrl=s),re(s)}),p(),f(23,"button",15),le("click",function(){return ne(i),re(r.importFromUrl())}),ae(24,jae,2,0,"span",16)(25,zae,2,0,"span",16),p()()(),f(26,"div",17)(27,"span"),g(28,"oder manuell eingeben"),p()()(),ae(29,$ae,2,1,"div",18)(30,Hae,2,1,"div",19)(31,qae,2,1,"div",20),f(32,"div",11)(33,"label",21),g(34,"Name des Gesch\xE4fts *"),p(),f(35,"input",22),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.name,s)||(r.afroshop.name=s),re(s)}),p()(),f(36,"div",11)(37,"label",23),g(38,"Typ *"),p(),f(39,"select",24),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.type,s)||(r.afroshop.type=s),re(s)}),f(40,"option",25),g(41,"Typ ausw\xE4hlen"),p(),ae(42,Gae,2,3,"option",26),p()(),f(43,"div",11)(44,"label",27),g(45,"\u{1F4F8} Bild hochladen"),p(),f(46,"div",28)(47,"input",29,0),le("change",function(s){return ne(i),re(r.onFileSelected(s))}),p(),f(49,"button",30),le("click",function(){ne(i);let s=Ru(48);return re(s.click())}),ae(50,Wae,2,0,"span",16)(51,Kae,2,0,"span",16)(52,Qae,2,0,"span",16),p(),ae(53,Yae,5,0,"div",31)(54,Jae,4,1,"div",32),f(55,"small",33),g(56,"Max. 5MB - Wird automatisch komprimiert und optimiert"),p()()(),f(57,"div",11)(58,"label",34),g(59,"Stra\xDFe und Hausnr. *"),p(),f(60,"input",35,1),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.street,s)||(r.afroshop.street=s),re(s)}),le("focus",function(){ne(i);let s=Ru(61);return re(r.initStreetAutocomplete(s))})("input",function(){return ne(i),re(r.onAddressChange())}),p(),f(62,"small",33),g(63,"Adresse wird automatisch vorgeschlagen (Google Maps Autocomplete)"),p(),f(64,"div",11)(65,"label",36),g(66,"Stadt *"),p(),f(67,"input",37),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.city,s)||(r.afroshop.city=s),re(s)}),le("input",function(){return ne(i),re(r.onAddressChange())}),p(),f(68,"small",33),g(69,"Nur Buchstaben und Bindestriche"),p()(),f(70,"div",11)(71,"label",38),g(72,"PLZ *"),p(),f(73,"input",39),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.plz,s)||(r.afroshop.plz=s),re(s)}),le("input",function(){return ne(i),re(r.onAddressChange())}),p(),f(74,"small",33),g(75,"5-stellige Postleitzahl"),p()(),f(76,"div",11)(77,"small"),g(78,"Bitte geben Sie Stra\xDFe, Stadt und PLZ an"),p(),ae(79,Zae,2,0,"div",40)(80,Xae,2,2,"div",41),p(),f(81,"div",11)(82,"label",42),g(83,"Telefon *"),p(),f(84,"input",43),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.phone,s)||(r.afroshop.phone=s),re(s)}),p()(),f(85,"div",11)(86,"label",44),g(87,"Beschreibung *"),p(),f(88,"textarea",45),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.description,s)||(r.afroshop.description=s),re(s)}),p()(),ae(89,ece,6,1,"div",46),f(90,"div",11)(91,"label"),g(92,"\xD6ffnungszeiten"),p(),f(93,"div",47)(94,"div",48)(95,"div",49),g(96,"Montag:"),p(),f(97,"div",50)(98,"input",51),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.monday.isOpen,s)||(r.openingHours.monday.isOpen=s),re(s)}),p(),f(99,"label",52),g(100,"Ge\xF6ffnet"),p(),ae(101,tce,77,2,"div",53),p()(),f(102,"div",48)(103,"div",49),g(104,"Dienstag:"),p(),f(105,"div",50)(106,"input",54),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.tuesday.isOpen,s)||(r.openingHours.tuesday.isOpen=s),re(s)}),p(),f(107,"label",55),g(108,"Ge\xF6ffnet"),p(),ae(109,nce,77,2,"div",53),p()(),f(110,"div",48)(111,"div",49),g(112,"Mittwoch:"),p(),f(113,"div",50)(114,"input",56),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.wednesday.isOpen,s)||(r.openingHours.wednesday.isOpen=s),re(s)}),p(),f(115,"label",57),g(116,"Ge\xF6ffnet"),p(),ae(117,rce,77,2,"div",53),p()(),f(118,"div",48)(119,"div",49),g(120,"Donnerstag:"),p(),f(121,"div",50)(122,"input",58),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.thursday.isOpen,s)||(r.openingHours.thursday.isOpen=s),re(s)}),p(),f(123,"label",59),g(124,"Ge\xF6ffnet"),p(),ae(125,ice,77,2,"div",53),p()(),f(126,"div",48)(127,"div",49),g(128,"Freitag:"),p(),f(129,"div",50)(130,"input",60),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.friday.isOpen,s)||(r.openingHours.friday.isOpen=s),re(s)}),p(),f(131,"label",61),g(132,"Ge\xF6ffnet"),p(),ae(133,oce,77,2,"div",53),p()(),f(134,"div",48)(135,"div",49),g(136,"Samstag:"),p(),f(137,"div",50)(138,"input",62),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.saturday.isOpen,s)||(r.openingHours.saturday.isOpen=s),re(s)}),p(),f(139,"label",63),g(140,"Ge\xF6ffnet"),p(),ae(141,sce,77,2,"div",53),p()(),f(142,"div",48)(143,"div",49),g(144,"Sonntag:"),p(),f(145,"div",50)(146,"input",64),Ce("ngModelChange",function(s){return ne(i),Se(r.openingHours.sunday.isOpen,s)||(r.openingHours.sunday.isOpen=s),re(s)}),p(),f(147,"label",65),g(148,"Ge\xF6ffnet"),p(),ae(149,ace,77,2,"div",53),p()(),f(150,"small",33),g(151,"W\xE4hlen Sie f\xFCr jeden Tag, ob das Gesch\xE4ft ge\xF6ffnet ist und die \xD6ffnungszeiten"),p()()(),f(152,"div",11)(153,"label",66),g(154,"Website"),p(),f(155,"input",67),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.website,s)||(r.afroshop.website=s),re(s)}),p(),f(156,"small",33),g(157,"Optional: Offizielle Website oder Social Media Profil"),p()(),f(158,"div",11)(159,"label",68),g(160,"Preisstufe"),p(),f(161,"select",69),Ce("ngModelChange",function(s){return ne(i),Se(r.afroshop.priceLevel,s)||(r.afroshop.priceLevel=s),re(s)}),f(162,"option",25),g(163,"-- Bitte w\xE4hlen --"),p(),f(164,"option",70),g(165,"\u20AC - G\xFCnstig (unter 10\u20AC)"),p(),f(166,"option",71),g(167,"\u20AC\u20AC - Moderat (10-20\u20AC)"),p(),f(168,"option",72),g(169,"\u20AC\u20AC\u20AC - Gehoben (20-40\u20AC)"),p(),f(170,"option",73),g(171,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig (\xFCber 40\u20AC)"),p()()(),f(172,"div",74)(173,"button",75),le("click",function(){return ne(i),re(r.goBack())}),ae(174,cce,2,0,"span",16)(175,lce,2,0,"span",16),p(),f(176,"button",76),ae(177,uce,2,1,"span",16)(178,dce,2,0,"span",16)(179,hce,2,1,"span",16),p()()()()()()}t&2&&(O(5),vt(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),O(2),vt(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),O(2),j("ngIf",r.isAdmin),O(13),be("ngModel",r.importUrl),O(),j("disabled",!r.importUrl||r.isImporting),O(),j("ngIf",!r.isImporting),O(),j("ngIf",r.isImporting),O(4),j("ngIf",r.successMessage),O(),j("ngIf",r.errorMessage),O(),j("ngIf",r.geocodingWarning),O(4),be("ngModel",r.afroshop.name),O(4),be("ngModel",r.afroshop.type),O(3),j("ngForOf",r.getAllBusinessTypes()),O(7),j("disabled",r.isUploadingImage),O(),j("ngIf",!r.imagePreview&&!r.isUploadingImage),O(),j("ngIf",r.imagePreview&&!r.isUploadingImage),O(),j("ngIf",r.isUploadingImage),O(),j("ngIf",r.isUploadingImage),O(),j("ngIf",r.imagePreview),O(6),be("ngModel",r.afroshop.street),O(7),be("ngModel",r.afroshop.city),O(6),be("ngModel",r.afroshop.plz),O(6),j("ngIf",r.isGeocoding),O(),j("ngIf",r.afroshop.coordinates.lat!==0&&r.afroshop.coordinates.lng!==0),O(4),be("ngModel",r.afroshop.phone),O(4),be("ngModel",r.afroshop.description),O(),j("ngIf",r.afroshop.type==="restaurant"),O(9),be("ngModel",r.openingHours.monday.isOpen),O(3),j("ngIf",r.openingHours.monday.isOpen),O(5),be("ngModel",r.openingHours.tuesday.isOpen),O(3),j("ngIf",r.openingHours.tuesday.isOpen),O(5),be("ngModel",r.openingHours.wednesday.isOpen),O(3),j("ngIf",r.openingHours.wednesday.isOpen),O(5),be("ngModel",r.openingHours.thursday.isOpen),O(3),j("ngIf",r.openingHours.thursday.isOpen),O(5),be("ngModel",r.openingHours.friday.isOpen),O(3),j("ngIf",r.openingHours.friday.isOpen),O(5),be("ngModel",r.openingHours.saturday.isOpen),O(3),j("ngIf",r.openingHours.saturday.isOpen),O(5),be("ngModel",r.openingHours.sunday.isOpen),O(3),j("ngIf",r.openingHours.sunday.isOpen),O(6),be("ngModel",r.afroshop.website),O(6),be("ngModel",r.afroshop.priceLevel),O(12),j("disabled",r.isSubmitting||r.isUploadingImage),O(),j("ngIf",!r.isSubmitting&&!r.isUploadingImage),O(),j("ngIf",r.isSubmitting||r.isUploadingImage),O(),j("disabled",r.isSubmitting||r.isUploadingImage),O(),j("ngIf",r.isSubmitting&&!r.isUploadingImage),O(),j("ngIf",r.isUploadingImage),O(),j("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[St,rr,Ut,po,dh,Lw,Fw,zr,NM,hh,fo,uh,ml,jM,zM,Ii,gl,wr,or],styles:['.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb;padding:10px 16px;border-radius:6px;margin-bottom:12px;font-weight:500}.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.geocoding-indicator[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e3f2fd;color:#1976d2;border-radius:6px;font-size:.9em;border-left:4px solid #2196f3;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.geocoding-success[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e8f5e8;color:#2e7d32;border-radius:6px;font-size:.9em;border-left:4px solid #4caf50}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl);padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px;box-shadow:0 10px 30px #667eea4d}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.back-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;padding:8px 15px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px);text-decoration:none;color:#fff}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #ff7b00;border-radius:var(--border-radius);font-size:1rem;background:#fff;box-shadow:0 2px 8px #00000012;transition:border-color .3s ease,box-shadow .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff5722;box-shadow:0 4px 16px #ff57221a}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding:20px 0}.btn[_ngcontent-%COMP%]{padding:16px 32px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;display:inline-flex;align-items:center;justify-content:center;text-align:center;min-width:160px;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;transform:translateY(0)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722,#e64a19);color:#fff;box-shadow:0 6px 20px #ff7b0066;border:2px solid transparent}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8f00,#ff6f00,#f57c00);transform:translateY(-3px);box-shadow:0 12px 30px #ff7b0080}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #ff7b0099}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#bdbdbd,#9e9e9e);color:#fff;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a;opacity:.7;animation:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled){animation:_ngcontent-%COMP%_gentle-pulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gentle-pulse{0%,to{box-shadow:0 6px 20px #ff7b0066}50%{box-shadow:0 6px 25px #ff7b0099}}.btn-primary[_ngcontent-%COMP%]:hover{animation:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;box-shadow:0 4px 15px #0000001a;border:2px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#adb5bd}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 10px #0003}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%;display:flex;flex-direction:column;align-items:center}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg);display:flex;flex-direction:column;align-items:center}.form-header[_ngcontent-%COMP%]{text-align:center}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);align-items:center}.url-input[_ngcontent-%COMP%]{width:100%;margin:0 auto}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center;margin:0 auto}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:20px 0;align-items:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;font-size:16px;padding:18px 24px;min-width:auto;margin:0 auto}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm);display:flex;flex-direction:column;align-items:center}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;flex-direction:column;align-items:center}.form-header[_ngcontent-%COMP%]{text-align:center}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg);text-align:center}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px;margin:0 auto}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center;margin:0 auto}.image-preview-container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto}.image-preview[_ngcontent-%COMP%]{max-height:200px;margin:0 auto}}.opening-hours-container[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;margin-top:10px}.day-hours[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.day-hours[_ngcontent-%COMP%]:last-child{margin-bottom:0}.day-label[_ngcontent-%COMP%]{width:100px;font-weight:600;color:#495057;flex-shrink:0}.hours-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex:1}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;cursor:pointer;margin:0;padding:0}.time-selectors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:10px}.time-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;background:#fff;color:#495057;font-size:14px;cursor:pointer;transition:all .2s}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff7b00;box-shadow:0 0 0 3px #ff7b001a}.time-separator[_ngcontent-%COMP%]{color:#6c757d;font-weight:500;margin:0 5px}@media (max-width: 768px){.day-hours[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.day-label[_ngcontent-%COMP%]{width:auto;margin-bottom:5px}.hours-controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.time-selectors[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}}@media (max-width: 480px){.opening-hours-container[_ngcontent-%COMP%]{padding:15px}.time-selectors[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.time-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function fce(n,e){if(n&1&&(f(0,"div",16),g(1),p()),n&2){let t=G();O(),Le(" ",t.errorMessage," ")}}function pce(n,e){n&1&&(f(0,"span"),g(1,"Anmelden"),p())}function gce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Anmeldung..."),p())}function mce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F50D} Mit Google fortfahren"),p())}function yce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Google-Anmeldung..."),p())}var Hw=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{console.log("\u{1F510} Tentative de connexion Google...");let e=yield this.authService.loginWithGoogle();console.log("\u2705 Connexion Google r\xE9ussie:",e);let t=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([t])}catch(e){console.error("\u274C Erreur connexion Google:",e);let t=e.message;e instanceof Error&&(console.log("Type d'erreur:",e.name),console.log("Code d'erreur:",e.code),console.log("Message complet:",e.message)),t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")||t.includes("popup-closed-by-user")||t.includes("cancelled")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")||t.includes("popup-blocked")?this.showPopupBlockedDialog():this.errorMessage=`Erreur de connexion: ${t}`}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Zt),te(It),te(On))};static \u0275cmp=ut({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),g(4,"\u{1F510} Anmeldung"),p(),f(5,"p"),g(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),p()(),f(7,"form",3),le("ngSubmit",function(){return r.onSubmit()}),f(8,"div",4)(9,"label",5),g(10,"E-Mail-Adresse"),p(),f(11,"input",6),Ce("ngModelChange",function(o){return Se(r.email,o)||(r.email=o),o}),p()(),f(12,"div",4)(13,"label",7),g(14,"Passwort"),p(),f(15,"input",8),Ce("ngModelChange",function(o){return Se(r.password,o)||(r.password=o),o}),p()(),ae(16,fce,2,1,"div",9),f(17,"button",10),ae(18,pce,2,0,"span",11)(19,gce,2,0,"span",11),p()(),f(20,"div",12)(21,"span"),g(22,"oder"),p()(),f(23,"button",13),le("click",function(){return r.loginWithGoogle()}),ae(24,mce,2,0,"span",11)(25,yce,2,0,"span",11),p(),f(26,"div",14)(27,"p"),g(28,"Noch kein Konto? "),f(29,"a",15),g(30,"Registrieren"),p()()()()()),t&2&&(O(11),be("ngModel",r.email),j("disabled",r.isLoading),O(4),be("ngModel",r.password),j("disabled",r.isLoading),O(),j("ngIf",r.errorMessage),O(),j("disabled",r.isLoading||!r.email||!r.password),O(),j("ngIf",!r.isLoading),O(),j("ngIf",r.isLoading),O(4),j("disabled",r.isLoading),O(),j("ngIf",!r.isLoading),O(),j("ngIf",r.isLoading))},dependencies:[St,Ut,po,dh,zr,fo,uh,ml,Ii,gl,wr,or],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function _ce(n,e){if(n&1&&(f(0,"div",20),g(1),p()),n&2){let t=G();O(),Le(" ",t.errorMessage," ")}}function vce(n,e){n&1&&(f(0,"span"),g(1,"Registrieren"),p())}function wce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Registrierung..."),p())}function Ece(n,e){n&1&&(f(0,"span"),g(1,"\u{1F50D} Mit Google fortfahren"),p())}function Ice(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Google-Anmeldung..."),p())}var qw=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Zt),te(It))};static \u0275cmp=ut({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),g(4,"\u{1F4DD} Registrierung"),p(),f(5,"p"),g(6,"Erstellen Sie Ihr AfroConnect-Konto"),p()(),f(7,"form",3),le("ngSubmit",function(){return r.onSubmit()}),f(8,"div",4)(9,"label",5),g(10,"Anzeigename"),p(),f(11,"input",6),Ce("ngModelChange",function(o){return Se(r.displayName,o)||(r.displayName=o),o}),p()(),f(12,"div",4)(13,"label",7),g(14,"E-Mail-Adresse"),p(),f(15,"input",8),Ce("ngModelChange",function(o){return Se(r.email,o)||(r.email=o),o}),p()(),f(16,"div",4)(17,"label",9),g(18,"Passwort"),p(),f(19,"input",10),Ce("ngModelChange",function(o){return Se(r.password,o)||(r.password=o),o}),p()(),f(20,"div",4)(21,"label",11),g(22,"Passwort best\xE4tigen"),p(),f(23,"input",12),Ce("ngModelChange",function(o){return Se(r.confirmPassword,o)||(r.confirmPassword=o),o}),p()(),ae(24,_ce,2,1,"div",13),f(25,"button",14),ae(26,vce,2,0,"span",15)(27,wce,2,0,"span",15),p()(),f(28,"div",16)(29,"span"),g(30,"oder"),p()(),f(31,"button",17),le("click",function(){return r.loginWithGoogle()}),ae(32,Ece,2,0,"span",15)(33,Ice,2,0,"span",15),p(),f(34,"div",18)(35,"p"),g(36,"Bereits ein Konto? "),f(37,"a",19),g(38,"Anmelden"),p()()()()()),t&2&&(O(11),be("ngModel",r.displayName),j("disabled",r.isLoading),O(4),be("ngModel",r.email),j("disabled",r.isLoading),O(4),be("ngModel",r.password),j("disabled",r.isLoading),O(4),be("ngModel",r.confirmPassword),j("disabled",r.isLoading),O(),j("ngIf",r.errorMessage),O(),j("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),O(),j("ngIf",!r.isLoading),O(),j("ngIf",r.isLoading),O(4),j("disabled",r.isLoading),O(),j("ngIf",!r.isLoading),O(),j("ngIf",r.isLoading))},dependencies:[St,Ut,po,dh,zr,fo,uh,ml,Ii,gl,wr,or],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var Gw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-privacy"]],decls:128,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3,"Datenschutzerkl\xE4rung"),p(),f(4,"p",2),g(5),p(),f(6,"section")(7,"h2"),g(8,"1. Verantwortlicher"),p(),f(9,"p")(10,"strong"),g(11,"AfroConnect"),p(),Ne(12,"br"),g(13," Kapuzinerring 26"),Ne(14,"br"),g(15," 59457 Werl"),Ne(16,"br"),g(17," Deutschland"),Ne(18,"br")(19,"br"),g(20," E-Mail: lamaid0502@gmail.com"),Ne(21,"br")(22,"br"),g(23," Der Verantwortliche im Sinne der Datenschutz-Grundverordnung (DSGVO) und anderer nationaler Datenschutzgesetze der Mitgliedsstaaten sowie sonstiger datenschutzrechtlicher Bestimmungen ist die oben genannte Person. "),p()(),f(24,"section")(25,"h2"),g(26,"2. Erhobene Daten"),p(),f(27,"h3"),g(28,"2.1 Nutzungsdaten"),p(),f(29,"ul")(30,"li"),g(31,"IP-Adresse"),p(),f(32,"li"),g(33,"Browser-Informationen"),p(),f(34,"li"),g(35,"Zugriffszeitpunkt"),p(),f(36,"li"),g(37,"Besuchte Seiten"),p()(),f(38,"h3"),g(39,"2.2 Standortdaten"),p(),f(40,"p"),g(41," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),p(),f(42,"h3"),g(43,"2.3 Registrierungsdaten"),p(),f(44,"ul")(45,"li"),g(46,"E-Mail-Adresse"),p(),f(47,"li"),g(48,"Benutzername"),p(),f(49,"li"),g(50,"Passwort (verschl\xFCsselt)"),p()()(),f(51,"section")(52,"h2"),g(53,"3. Zweck der Datenverarbeitung"),p(),f(54,"ul")(55,"li"),g(56,"Bereitstellung der App-Funktionen"),p(),f(57,"li"),g(58,"Benutzerauthentifizierung"),p(),f(59,"li"),g(60,"Anzeige lokaler Afroshops"),p(),f(61,"li"),g(62,"Verbesserung der Nutzererfahrung"),p()()(),f(63,"section")(64,"h2"),g(65,"4. Rechtsgrundlage"),p(),f(66,"p"),g(67," Die Verarbeitung erfolgt auf Grundlage von: "),p(),f(68,"ul")(69,"li"),g(70,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),p(),f(71,"li"),g(72,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),p(),f(73,"li"),g(74,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),p()()(),f(75,"section")(76,"h2"),g(77,"5. Datenweitergabe"),p(),f(78,"p"),g(79," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),p(),f(80,"ul")(81,"li"),g(82,"Google Firebase (Hosting und Datenbank)"),p(),f(83,"li"),g(84,"Bei gesetzlicher Verpflichtung"),p()()(),f(85,"section")(86,"h2"),g(87,"6. Speicherdauer"),p(),f(88,"p"),g(89," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),p()(),f(90,"section")(91,"h2"),g(92,"7. Ihre Rechte"),p(),f(93,"ul")(94,"li"),g(95,"Auskunft \xFCber gespeicherte Daten"),p(),f(96,"li"),g(97,"Berichtigung falscher Daten"),p(),f(98,"li"),g(99,"L\xF6schung Ihrer Daten"),p(),f(100,"li"),g(101,"Einschr\xE4nkung der Verarbeitung"),p(),f(102,"li"),g(103,"Daten\xFCbertragbarkeit"),p(),f(104,"li"),g(105,"Widerspruch gegen Verarbeitung"),p()()(),f(106,"section")(107,"h2"),g(108,"8. Kontakt"),p(),f(109,"p")(110,"strong"),g(111,"Verantwortlicher f\xFCr den Datenschutz:"),p(),Ne(112,"br")(113,"br"),f(114,"strong"),g(115,"AfroConnect"),p(),Ne(116,"br"),g(117," Kapuzinerring 26"),Ne(118,"br"),g(119," 59457 Werl"),Ne(120,"br"),g(121," Deutschland"),Ne(122,"br")(123,"br"),g(124," E-Mail: lamaid0502@gmail.com"),Ne(125,"br")(126,"br"),g(127," Bei Fragen zum Datenschutz oder zur Aus\xFCbung Ihrer Rechte kontaktieren Sie uns gerne \xFCber die oben genannten Kontaktdaten. "),p()()()()),t&2&&(O(5),Le("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem;text-align:center;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem;text-align:center}h3[_ngcontent-%COMP%]{color:#4caf50;text-align:center}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem;text-align:center}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}.legal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.legal-content[_ngcontent-%COMP%]{width:100%;max-width:800px}@media (max-width: 600px){.legal-container[_ngcontent-%COMP%]{padding:.5rem;min-height:90vh}h1[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{font-size:1.05rem;margin-top:1.2rem}h3[_ngcontent-%COMP%]{font-size:1rem}.legal-content[_ngcontent-%COMP%]{padding:.2rem}section[_ngcontent-%COMP%]{margin-bottom:1.2rem}}"]})};var Ww=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-terms"]],decls:101,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),p(),f(4,"p",2),g(5),p(),f(6,"section")(7,"h2"),g(8,"\xA7 1 Geltungsbereich"),p(),f(9,"p"),g(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),p()(),f(11,"section")(12,"h2"),g(13,"\xA7 2 Beschreibung der Dienstleistung"),p(),f(14,"p"),g(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),p(),f(16,"h3"),g(17,"2.1 Funktionen"),p(),f(18,"ul")(19,"li"),g(20,"Suche nach Afroshops in der N\xE4he"),p(),f(21,"li"),g(22,"Detailinformationen zu Gesch\xE4ften"),p(),f(23,"li"),g(24,"Bewertungen und Kommentare"),p(),f(25,"li"),g(26,"Kartenansicht und Navigation"),p()()(),f(27,"section")(28,"h2"),g(29,"\xA7 3 Nutzerkonto"),p(),f(30,"h3"),g(31,"3.1 Registrierung"),p(),f(32,"p"),g(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),p(),f(34,"h3"),g(35,"3.2 Passwort und Sicherheit"),p(),f(36,"p"),g(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),p()(),f(38,"section")(39,"h2"),g(40,"\xA7 4 Nutzungsregeln"),p(),f(41,"p"),g(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),p(),f(43,"ul")(44,"li"),g(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),p(),f(46,"li"),g(47,"Keine beleidigenden oder diskriminierenden Inhalte"),p(),f(48,"li"),g(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),p(),f(50,"li"),g(51,"Die Rechte Dritter zu respektieren"),p()()(),f(52,"section")(53,"h2"),g(54,"\xA7 5 Inhalte und Urheberrecht"),p(),f(55,"h3"),g(56,"5.1 Nutzergenerierte Inhalte"),p(),f(57,"p"),g(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),p(),f(59,"h3"),g(60,"5.2 Verantwortung"),p(),f(61,"p"),g(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),p()(),f(63,"section")(64,"h2"),g(65,"\xA7 6 Haftung"),p(),f(66,"p"),g(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),p()(),f(68,"section")(69,"h2"),g(70,"\xA7 7 \xC4nderungen der AGB"),p(),f(71,"p"),g(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),p()(),f(73,"section")(74,"h2"),g(75,"\xA7 8 K\xFCndigung"),p(),f(76,"p"),g(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),p()(),f(78,"section")(79,"h2"),g(80,"\xA7 9 Anwendbares Recht"),p(),f(81,"p"),g(82," Es gilt deutsches Recht. Gerichtsstand ist Werl, Deutschland. "),p()(),f(83,"section")(84,"h2"),g(85,"\xA7 10 Kontakt"),p(),f(86,"p")(87,"strong"),g(88,"AfroConnect"),p(),Ne(89,"br"),g(90," Kapuzinerring 26"),Ne(91,"br"),g(92," 59457 Werl"),Ne(93,"br"),g(94," Deutschland"),Ne(95,"br")(96,"br"),g(97," E-Mail: lamaid0502@gmail.com"),Ne(98,"br")(99,"br"),g(100," Bei Fragen zu diesen AGB oder zur Nutzung der App kontaktieren Sie uns gerne \xFCber die oben genannten Kontaktdaten. "),p()()()()),t&2&&(O(5),Le("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem;text-align:center;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem;text-align:center}h3[_ngcontent-%COMP%]{color:#4caf50;text-align:center}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem;text-align:center}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}.legal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.legal-content[_ngcontent-%COMP%]{width:100%;max-width:800px}@media (max-width: 600px){.legal-container[_ngcontent-%COMP%]{padding:.5rem;min-height:90vh}h1[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{font-size:1.05rem;margin-top:1.2rem}h3[_ngcontent-%COMP%]{font-size:1rem}.legal-content[_ngcontent-%COMP%]{padding:.2rem}section[_ngcontent-%COMP%]{margin-bottom:1.2rem}}"]})};var Kw=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-impressum"]],decls:31,vars:0,consts:[["href","mailto:lamaid0502@gmail.com"]],template:function(t,r){t&1&&(f(0,"h2"),g(1,"Impressum"),p(),f(2,"p")(3,"strong"),g(4,"Angaben gem\xE4\xDF \xA7 5 TMG:"),p()(),f(5,"p"),g(6," Youssouf Diallo"),Ne(7,"br"),g(8," Kapuzinerring 26"),Ne(9,"br"),g(10," 59457 Werl"),Ne(11,"br"),g(12,` Deutschland
`),p(),f(13,"p")(14,"strong"),g(15,"Kontakt:"),p()(),f(16,"p"),g(17," E-Mail: "),f(18,"a",0),g(19,"lamaid0502@gmail.com"),p()(),f(20,"p")(21,"strong"),g(22,"Verantwortlich f\xFCr den Inhalt nach \xA7 55 Abs. 2 RStV:"),p()(),f(23,"p"),g(24," Youssouf Diallo"),Ne(25,"br"),g(26," Kapuzinerring 26"),Ne(27,"br"),g(28," 59457 Werl"),Ne(29,"br"),g(30,` Deutschland
`),p())},dependencies:[St],encapsulation:2})};var Qw=class n{constructor(e){this.firebaseService=e}getExistingAfroshops(){return S(this,null,function*(){return new Promise(e=>{this.firebaseService.getAllAfroshops().subscribe({next:t=>e(t),error:t=>{console.warn("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es existantes:",t),e([])}})})})}cleanDuplicates(){return S(this,null,function*(){try{console.log("\u{1F9F9} Nettoyage des doublons en cours...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops trouv\xE9s en base`);let t=new Map;e.forEach(o=>{let s=`${o.name}|${o.address}`;t.has(s)||t.set(s,[]),t.get(s).push(o)});let r=0,i=0;for(let[o,s]of t)if(s.length>1){console.log(`\u{1F50D} Doublon trouv\xE9: ${s[0].name} (${s.length} copies)`),i++;for(let a=1;a<s.length;a++)try{yield this.firebaseService.deleteAfroshop(s[a].id),r++,console.log(`\u{1F5D1}\uFE0F Supprim\xE9: ${s[a].name} (ID: ${s[a].id})`),yield this.delay(100)}catch(c){console.error(`\u274C Erreur suppression ${s[a].id}:`,c)}}else i++;return console.log(`\u2705 Nettoyage termin\xE9: ${r} supprim\xE9s, ${i} conserv\xE9s`),{removed:r,kept:i}}catch(e){throw console.error("\u274C Erreur lors du nettoyage:",e),e}})}afroshopsData=[{name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches westafrikanisches Restaurant mit traditionellen Gerichten aus Ghana und Nigeria. Spezialit\xE4ten: Jollof Rice, Fufu, Kelewele.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Fr: 12:00-22:00, Sa: 14:00-23:00, So: 14:00-21:00",website:"https://mama-afrika-berlin.de"},{name:"Ethiopian Queen Restaurant",type:"restaurant",address:"Kreuzbergstra\xDFe 45, 10965 Berlin",coordinates:{lat:52.4995,lng:13.3883},phone:"+49 30 23456789",description:"Traditionelle \xE4thiopische K\xFCche in gem\xFCtlicher Atmosph\xE4re. Injera, Doro Wat und vegetarische Optionen.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:"https://ethiopian-queen.de"},{name:"Afro Hair Salon Berlin",type:"coiffeur",address:"Hermannstra\xDFe 89, 12049 Berlin",coordinates:{lat:52.4755,lng:13.4324},phone:"+49 30 34567890",description:"Spezialist f\xFCr afroamerikanische Haarpflege. Braids, Weaves, Natural Hair Care und chemische Behandlungen.",rating:4.7,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Afrika Market Berlin",type:"epicerie",address:"Turmstra\xDFe 234, 10551 Berlin",coordinates:{lat:52.5252,lng:13.3415},phone:"+49 30 45678901",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Berlin. Yams, Kochbananen, Palm\xF6l, Gew\xFCrze und Fleischspezialit\xE4ten.",rating:4.2,image:"https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Sa: 08:00-20:00, So: 10:00-18:00",website:"https://afrika-market-berlin.de"},{name:"Senegal Restaurant Hamburg",type:"restaurant",address:"Reeperbahn 456, 20359 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 12345678",description:"Authentische senegalesische K\xFCche. Thieboudienne, Yassa Poulet und frische Meeresfr\xFCchte.",rating:4.4,image:"https://images.unsplash.com/photo-1547592180-85f173990554?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mo-Fr: 18:00-24:00, Sa-So: 17:00-01:00",website:"https://senegal-restaurant-hh.de"},{name:"Afro Style Hamburg",type:"coiffeur",address:"Steindamm 123, 20099 Hamburg",coordinates:{lat:53.553,lng:10.0061},phone:"+49 40 23456789",description:"Moderner Afro-Friseursalon mit internationalen Stylisten. Cuts, Farben und Extensions.",rating:4.6,image:"https://images.unsplash.com/photo-1521490878783-35eb2c52f3b7?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-20:00, Sa: 09:00-18:00",website:""},{name:"Kamerun Eck M\xFCnchen",type:"restaurant",address:"Maximilianstra\xDFe 78, 80539 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 12345678",description:"Kamerunische Spezialit\xE4ten in bayerischer Atmosph\xE4re. Ndol\xE9, Poulet DG und Kochbananen.",rating:4.1,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Kamerunische",priceLevel:2,hours:"Mo-Sa: 11:30-22:00",website:""},{name:"Nigerianisches Restaurant K\xF6ln",type:"restaurant",address:"Z\xFClpicher Stra\xDFe 234, 50937 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 12345678",description:"Authentische nigerianische K\xFCche. Jollof Rice, Suya, Pounded Yam und Egusi Soup.",rating:4.3,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Nigerianische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa-So: 14:00-22:00",website:"https://nigerian-restaurant-koeln.de"},{name:"Eritrea Restaurant Frankfurt",type:"restaurant",address:"Berger Stra\xDFe 145, 60316 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 12345678",description:"Eritreische und \xE4thiopische K\xFCche. Injera, Zigni und traditionelle Kaffeezeremonie.",rating:4.5,image:"https://images.unsplash.com/photo-1554978991-33ef7f31d658?w=800&h=600&fit=crop",cuisine:"Eritreische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:""},{name:"Afrika Laden Stuttgart",type:"epicerie",address:"K\xF6nigstra\xDFe 89, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 12345678",description:"Afrikanische Lebensmittel und Gew\xFCrze. Maniok, Kochbananen, Palm\xF6l und traditionelle Snacks.",rating:4,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Marokkanisches Restaurant D\xFCsseldorf",type:"restaurant",address:"Immermannstra\xDFe 23, 40210 D\xFCsseldorf",coordinates:{lat:51.2277,lng:6.7735},phone:"+49 211 12345678",description:"Nordafrikanische K\xFCche. Tajine, Couscous, Pastilla und marokkanische Tees.",rating:4.2,image:"https://images.unsplash.com/photo-1539353130027-9532750e7146?w=800&h=600&fit=crop",cuisine:"Marokkanische",priceLevel:3,hours:"Mo-So: 17:00-24:00",website:"https://marokko-restaurant-dus.de"},{name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 12345678",description:"Westafrikanische und zentralafrikanische K\xFCche in modernem Ambiente.",rating:4.1,image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Sa: 12:00-22:00",website:""},{name:"African Beauty Salon Essen",type:"coiffeur",address:"Kettwiger Stra\xDFe 67, 45127 Essen",coordinates:{lat:51.4556,lng:7.0116},phone:"+49 201 12345678",description:"Kompletter Service f\xFCr afrikanisches Haar. Relaxer, Braids, Weaves und Naturhaar-Styling.",rating:4.4,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-18:00, Sa: 08:00-16:00",website:""},{name:"\xC4thiopisches Restaurant Leipzig",type:"restaurant",address:"Karl-Liebknecht-Stra\xDFe 123, 04107 Leipzig",coordinates:{lat:51.3397,lng:12.3731},phone:"+49 341 12345678",description:"Traditionelle \xE4thiopische Gerichte in famili\xE4rer Atmosph\xE4re.",rating:4.3,image:"https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-Sa: 17:00-22:00",website:""},{name:"Afrika Shop Bremen",type:"epicerie",address:"Osterstra\xDFe 234, 28199 Bremen",coordinates:{lat:53.0793,lng:8.8017},phone:"+49 421 12345678",description:"Afrikanische Spezialit\xE4ten und Kosmetik. Shea-Butter, schwarze Seife und exotische Fr\xFCchte.",rating:4.1,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-17:00",website:""},{name:"Sudanesisches Restaurant Dresden",type:"restaurant",address:"Prager Stra\xDFe 89, 01069 Dresden",coordinates:{lat:51.0504,lng:13.7373},phone:"+49 351 12345678",description:"Sudanesische und ostafriikanische K\xFCche. Ful Medames, Kisra und Bamya.",rating:4,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"Sudanesische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa: 14:00-22:00",website:""},{name:"African Fashion Hannover",type:"vetement",address:"Georgstra\xDFe 156, 30159 Hannover",coordinates:{lat:52.3759,lng:9.732},phone:"+49 511 12345678",description:"Afrikanische Mode und Accessoires. Dashiki, Kente-Stoffe und handgemachter Schmuck.",rating:4.2,image:"https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-18:00",website:"https://african-fashion-hannover.de"},{name:"Westafrica N\xFCrnberg",type:"restaurant",address:"K\xF6nigstra\xDFe 234, 90402 N\xFCrnberg",coordinates:{lat:49.4521,lng:11.0767},phone:"+49 911 12345678",description:"Ghanaische und ivorische K\xFCche. Banku, Atti\xE9k\xE9 und Palm Nut Soup.",rating:4.4,image:"https://images.unsplash.com/photo-1551218808-94e220e084d2?w=800&h=600&fit=crop",cuisine:"Ghanaische",priceLevel:2,hours:"Mo-Sa: 11:00-22:00",website:""}];kleinestadtAfroshops=[{name:"Afrika Imbiss Soest",type:"restaurant",address:"Thom\xE4stra\xDFe 12, 59494 Soest",coordinates:{lat:51.5671,lng:8.1067},phone:"+49 2921 123456",description:"Kleiner gem\xFCtlicher Imbiss mit westafrikanischen Spezialit\xE4ten. Hausgemachtes Jollof Rice.",rating:4.2,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:1,hours:"Mo-Fr: 11:00-20:00, Sa: 12:00-21:00",website:""},{name:"Afro Hair Werl",type:"coiffeur",address:"Hammer Stra\xDFe 34, 59457 Werl",coordinates:{lat:51.5531,lng:7.9119},phone:"+49 2922 234567",description:"Spezialisiert auf afrikanische Frisuren in ruhiger Kleinstadt-Atmosph\xE4re.",rating:4.5,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-18:00, Sa: 09:00-15:00",website:""}];seedDatabase(){return S(this,null,function*(){try{console.log("\u{1F331} D\xE9but du peuplement de la base de donn\xE9es...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops d\xE9j\xE0 en base`);let r=[...this.afroshopsData,...this.kleinestadtAfroshops].filter(s=>!e.some(a=>a.name===s.name&&a.address===s.address));if(console.log(`\u2728 ${r.length} nouveaux Afroshops \xE0 ajouter`),r.length===0)throw new Error("\u26A0\uFE0F Tous les Afroshops sont d\xE9j\xE0 en base ! Aucun nouvel ajout n\xE9cessaire.");let i=0,o=0;for(let s of r)try{let a=he($({},s),{city:this.extractCityFromAddress(s.address),verified:!0,createdBy:"system",createdByName:"System Import",views:Math.floor(Math.random()*100)+10,likes:Math.floor(Math.random()*20)+5});yield this.firebaseService.addAfroshop(a),i++,console.log(`\u2705 ${s.name} ajout\xE9 avec succ\xE8s`),yield this.delay(100)}catch(a){o++,console.error(`\u274C Erreur lors de l'ajout de ${s.name}:`,a)}console.log(`\u{1F389} Import termin\xE9: ${i} ajout\xE9s, ${o} erreurs`)}catch(e){console.error("\u{1F4A5} Erreur g\xE9n\xE9rale lors du seeding:",e)}})}extractCityFromAddress(e){let t=e.split(",");if(t.length>=2){let r=t[t.length-1].trim(),i=r.match(/\d+\s+(.+)/);return i?i[1].toLowerCase():r.toLowerCase()}return""}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||n)(de(sr))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yw=class n{constructor(){}isAdminUser(e){return!e||!e.email?!1:fs.production?(console.warn("\u{1F6AB} Admin check disabled in production - use server-side verification"),!1):(fs.adminConfig?.adminEmails||[]).includes(e.email)}getSecurityMessage(){return fs.production?"Administration d\xE9sactiv\xE9e en production pour des raisons de s\xE9curit\xE9. Contactez l'administrateur syst\xE8me.":"Mode d\xE9veloppement - Acc\xE8s admin disponible."}shouldHideAdminInterface(){return fs.production}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F680} Datenbank mit Afroshops f\xFCllen"),p())}function Sce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Import l\xE4uft..."),p())}function Ace(n,e){n&1&&(f(0,"span"),g(1,"\u{1F9F9} Doublons entfernen"),p())}function Dce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Nettoyage l\xE4uft..."),p())}function xce(n,e){n&1&&(f(0,"div",22),Ne(1,"div",23),f(2,"p"),g(3,"Afroshops werden hinzugef\xFCgt... Bitte warten."),p()())}function Mce(n,e){n&1&&(f(0,"div",22),Ne(1,"div",23),f(2,"p"),g(3,"Doublons werden entfernt... Bitte warten."),p()())}function Pce(n,e){if(n&1&&(f(0,"div",24),g(1),p()),n&2){let t=G(2);Ys(t.seedingMessage.includes("\u274C")?"error":"success"),O(),Le(" ",t.seedingMessage," ")}}function Rce(n,e){if(n&1&&(f(0,"div",24),g(1),p()),n&2){let t=G(2);Ys(t.cleaningMessage.includes("\u274C")?"error":"success"),O(),Le(" ",t.cleaningMessage," ")}}function kce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F504} Actualiser"),p())}function Oce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Chargement..."),p())}function Nce(n,e){if(n&1){let t=$e();f(0,"div",29)(1,"div",30)(2,"div",31)(3,"h4"),g(4),p(),f(5,"p",32),g(6),p(),f(7,"p",33),g(8),p()(),f(9,"div",34)(10,"span",35),g(11),p()()(),f(12,"div",36)(13,"button",37),le("click",function(){let i=ne(t).$implicit,o=G(3);return re(o.editAfroshop(i))}),g(14," \u270F\uFE0F Bearbeiten "),p(),f(15,"button",38),le("click",function(){let i=ne(t).$implicit,o=G(3);return re(o.confirmDelete(i))}),g(16," \u{1F5D1}\uFE0F L\xF6schen "),p()()()}if(n&2){let t=e.$implicit,r=G(3);O(4),vt(t.name),O(2),vt(r.getGermanBusinessType(t.type)),O(2),Le("\u{1F4CD} ",t.address,""),O(3),Le("ID: ",t.id,""),O(4),j("disabled",r.isDeleting)}}function Lce(n,e){if(n&1){let t=$e();f(0,"div",25)(1,"div",26)(2,"h3"),g(3),p(),f(4,"button",27),le("click",function(){ne(t);let i=G(2);return re(i.loadAfroshops())}),ae(5,kce,2,0,"span",10)(6,Oce,2,0,"span",10),p()(),ae(7,Nce,17,5,"div",28),p()}if(n&2){let t=G(2);O(3),Le("\u{1F4CB} Liste des Afroshops (",t.afroshops.length,")"),O(),j("disabled",t.isLoading),O(),j("ngIf",!t.isLoading),O(),j("ngIf",t.isLoading),O(),j("ngForOf",t.afroshops)("ngForTrackBy",t.trackByAfroshop)}}function Fce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F4CB} Afroshops anzeigen"),p())}function Vce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Wird geladen..."),p())}function Uce(n,e){if(n&1){let t=$e();f(0,"div",39)(1,"button",40),le("click",function(){ne(t);let i=G(2);return re(i.loadAfroshops())}),ae(2,Fce,2,0,"span",10)(3,Vce,2,0,"span",10),p()()}if(n&2){let t=G(2);O(),j("disabled",t.isLoading),O(),j("ngIf",!t.isLoading),O(),j("ngIf",t.isLoading)}}function Bce(n,e){if(n&1&&(f(0,"div",24),g(1),p()),n&2){let t=G(2);Ys(t.deleteMessage.includes("\u274C")?"error":"success"),O(),Le(" ",t.deleteMessage," ")}}function jce(n,e){if(n&1){let t=$e();f(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2"),g(4,"\u{1F331} Peuplement de la base de donn\xE9es"),p(),f(5,"p"),g(6,"Ajouter des Afroshops dans toute l'Allemagne pour donner vie \xE0 l'application"),p()(),f(7,"div",7)(8,"h3"),g(9,"\u{1F4CA} Donn\xE9es incluses:"),p(),f(10,"ul")(11,"li"),g(12,"\u{1F3D9}\uFE0F "),f(13,"strong"),g(14,"Grandes villes:"),p(),g(15," Berlin, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf, Dortmund, Essen"),p(),f(16,"li"),g(17,"\u{1F3D8}\uFE0F "),f(18,"strong"),g(19,"Villes moyennes:"),p(),g(20," Leipzig, Bremen, Dresden, Hannover, N\xFCrnberg"),p(),f(21,"li"),g(22,"\u{1F3E1} "),f(23,"strong"),g(24,"Petites villes & Kreise:"),p(),g(25," Soest, Werl (Kreis Soest) et autres"),p(),f(26,"li"),g(27,"\u{1F37D}\uFE0F "),f(28,"strong"),g(29,"Types:"),p(),g(30," Restaurants, Friseure, Lebensmittelgesch\xE4fte, Mode, Services"),p(),f(31,"li"),g(32,"\u{1F30D} "),f(33,"strong"),g(34,"Cuisines:"),p(),g(35," Westafrikanische, \xC4thiopische, Senegalesische, Kamerunische, Nigerianische, etc."),p()()(),f(36,"div",8)(37,"button",9),le("click",function(){ne(t);let i=G();return re(i.seedDatabase())}),ae(38,Tce,2,0,"span",10)(39,Sce,2,0,"span",10),p(),f(40,"button",11),le("click",function(){ne(t);let i=G();return re(i.cleanDuplicates())}),ae(41,Ace,2,0,"span",10)(42,Dce,2,0,"span",10),p(),ae(43,xce,4,0,"div",12)(44,Mce,4,0,"div",12),p(),ae(45,Pce,2,3,"div",13)(46,Rce,2,3,"div",13),p(),f(47,"div",14)(48,"div",6)(49,"h2"),g(50,"\u{1F5D1}\uFE0F Gestion des Afroshops"),p(),f(51,"p"),g(52,"Supprimer individuellement des Afroshops de la base de donn\xE9es"),p()(),ae(53,Lce,8,6,"div",15)(54,Uce,4,3,"div",16)(55,Bce,2,3,"div",13),p(),f(56,"div",17)(57,"div",6)(58,"h2"),g(59,"\u{1F527} Diagnostic Technique"),p(),f(60,"p"),g(61,"Outils de diagnostic pour r\xE9soudre les probl\xE8mes de g\xE9ocodage et coordonn\xE9es"),p()(),f(62,"div",8)(63,"a",18),g(64," \u{1F5FA}\uFE0F Diagnostic du G\xE9ocodage "),p(),f(65,"p",19),g(66," Testez le syst\xE8me de coordonn\xE9es, auditez les Afroshops existants et corrigez les probl\xE8mes de g\xE9olocalisation. "),p()()(),f(67,"div",20)(68,"button",21),le("click",function(){ne(t);let i=G();return re(i.goToGallery())}),g(69," \u{1F3EA} Voir la galerie "),p()()()}if(n&2){let t=G();O(37),j("disabled",t.isSeeding||t.isCleaning),O(),j("ngIf",!t.isSeeding),O(),j("ngIf",t.isSeeding),O(),j("disabled",t.isCleaning||t.isSeeding),O(),j("ngIf",!t.isCleaning),O(),j("ngIf",t.isCleaning),O(),j("ngIf",t.isSeeding),O(),j("ngIf",t.isCleaning),O(),j("ngIf",t.seedingMessage),O(),j("ngIf",t.cleaningMessage),O(7),j("ngIf",t.afroshops.length>0),O(),j("ngIf",t.afroshops.length===0),O(),j("ngIf",t.deleteMessage)}}function zce(n,e){n&1&&(f(0,"div",41)(1,"h2"),g(2,"\u{1F510} Authentification requise"),p(),f(3,"p"),g(4,"Vous devez \xEAtre connect\xE9 pour acc\xE9der aux outils d'administration."),p()())}var Jw=class n{constructor(e,t,r,i,o,s){this.dataSeedingService=e;this.authService=t;this.firebaseAfroshopService=r;this.translationService=i;this.adminSecurity=o;this.router=s;this.authService.user$.subscribe(a=>{if(!a){this.router.navigate(["/login"]);return}this.checkAdminAccess(a)})}isSeeding=!1;isCleaning=!1;seedingMessage="";cleaningMessage="";isAuthenticated=!1;afroshops=[];isLoading=!1;isDeleting=!1;deleteMessage="";checkAdminAccess(e){this.isAuthenticated=this.adminSecurity.isAdminUser(e),this.isAuthenticated||(console.warn("\u{1F6AB} Acc\xE8s admin refus\xE9:",this.adminSecurity.getSecurityMessage()),this.router.navigate(["/gallery"]))}seedDatabase(){return S(this,null,function*(){if(!this.isAuthenticated){this.seedingMessage="\u274C Vous devez \xEAtre connect\xE9 pour effectuer cette action";return}if(!(this.isSeeding||!confirm(`\u{1F6A8} ACHTUNG!

Diese Aktion wird etwa 50+ neue Afroshops in die Datenbank hinzuf\xFCgen.

\u{1F50D} Bereits vorhandene Gesch\xE4fte werden automatisch \xFCbersprungen.

M\xF6chten Sie fortfahren?`))){this.isSeeding=!0,this.seedingMessage="\u{1F331} Import l\xE4uft... Dies kann einige Minuten dauern.";try{yield this.dataSeedingService.seedDatabase(),this.seedingMessage="\u2705 Datenbank erfolgreich mit neuen Afroshops gef\xFCllt!"}catch(t){console.error("Fehler beim Seeding:",t),this.seedingMessage="\u274C Fehler beim Import. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isSeeding=!1}}})}editAfroshop(e){this.router.navigate(["/edit-afroshop",e.id])}goToGallery(){this.router.navigate(["/gallery"])}cleanDuplicates(){return S(this,null,function*(){if(!this.isAuthenticated){this.cleaningMessage="\u274C Sie m\xFCssen angemeldet sein, um diese Aktion durchzuf\xFChren";return}if(!(this.isCleaning||!confirm(`\u{1F9F9} DOUBLONS NETTOYAGE

Diese Aktion wird alle doppelten Afroshops l\xF6schen.

\u26A0\uFE0F Nur das erste Exemplar jedes Gesch\xE4fts wird beibehalten.

M\xF6chten Sie fortfahren?`))){this.isCleaning=!0,this.cleaningMessage="\u{1F9F9} Doublons werden entfernt... Bitte warten.";try{let t=yield this.dataSeedingService.cleanDuplicates();this.cleaningMessage=`\u2705 Nettoyage abgeschlossen! ${t.removed} Doublons entfernt, ${t.kept} Afroshops beibehalten.`}catch(t){console.error("Fehler beim Nettoyage:",t),this.cleaningMessage="\u274C Fehler beim Nettoyage. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isCleaning=!1}}})}loadAfroshops(){return S(this,null,function*(){this.isLoading=!0,this.deleteMessage="";try{this.firebaseAfroshopService.getAllAfroshops().subscribe({next:e=>{this.afroshops=e.sort((t,r)=>t.name.localeCompare(r.name)),this.isLoading=!1},error:e=>{console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}catch(e){console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}confirmDelete(e){return S(this,null,function*(){confirm(`\u{1F5D1}\uFE0F Afroshop l\xF6schen

Name: ${e.name}
Typ: ${this.getGermanBusinessType(e.type)}
Adresse: ${e.address}

\u26A0\uFE0F Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden!

M\xF6chten Sie "${e.name}" wirklich l\xF6schen?`)&&(yield this.deleteAfroshop(e))})}deleteAfroshop(e){return S(this,null,function*(){this.isDeleting=!0,this.deleteMessage=`\u{1F5D1}\uFE0F "${e.name}" wird gel\xF6scht...`;try{yield this.firebaseAfroshopService.deleteAfroshop(e.id.toString()),this.afroshops=this.afroshops.filter(t=>t.id!==e.id),this.deleteMessage=`\u2705 "${e.name}" wurde erfolgreich gel\xF6scht.`,setTimeout(()=>{this.deleteMessage=""},3e3)}catch(t){console.error("Erreur lors de la suppression:",t),this.deleteMessage=`\u274C Fehler beim L\xF6schen von "${e.name}". Details in der Konsole.`}finally{this.isDeleting=!1}})}getGermanBusinessType(e){return this.translationService.getBusinessTypeName(e)}formatDate(e){if(!e)return"Datum unbekannt";try{let t;return e.toDate?t=e.toDate():e.seconds?t=new Date(e.seconds*1e3):t=new Date(e),t.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Erreur formatage date:",t),"Datum fehler"}}trackByAfroshop(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(te(Qw),te(Zt),te(sr),te(go),te(Yw),te(It))};static \u0275cmp=ut({type:n,selectors:[["app-admin"]],decls:8,vars:2,consts:[[1,"admin-container"],[1,"admin-header"],["class","admin-panel",4,"ngIf"],["class","auth-required",4,"ngIf"],[1,"admin-panel"],[1,"seeding-section"],[1,"section-header"],[1,"data-info"],[1,"action-section"],[1,"seed-btn",3,"click","disabled"],[4,"ngIf"],[1,"clean-btn",3,"click","disabled"],["class","progress-indicator",4,"ngIf"],["class","message",3,"class",4,"ngIf"],[1,"management-section"],["class","afroshops-list",4,"ngIf"],["class","load-button",4,"ngIf"],[1,"diagnostic-section"],["routerLink","/geocoding-diagnostic",1,"diagnostic-btn"],[1,"diagnostic-desc"],[1,"navigation-section"],[1,"nav-btn",3,"click"],[1,"progress-indicator"],[1,"spinner"],[1,"message"],[1,"afroshops-list"],[1,"list-header"],[1,"refresh-btn",3,"click","disabled"],["class","afroshop-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"afroshop-item"],[1,"afroshop-info"],[1,"basic-info"],[1,"type"],[1,"location"],[1,"meta-info"],[1,"id"],[1,"actions"],["title","Afroshop bearbeiten",1,"edit-btn",3,"click"],["title","Afroshop l\xF6schen",1,"delete-btn",3,"click","disabled"],[1,"load-button"],[1,"load-btn",3,"click","disabled"],[1,"auth-required"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3,"\u{1F527} AfroConnect - Administration"),p(),f(4,"p"),g(5,"Outils pour g\xE9rer la base de donn\xE9es d'Afroshops"),p()(),ae(6,jce,70,13,"div",2)(7,zce,5,0,"div",3),p()),t&2&&(O(6),j("ngIf",r.isAuthenticated),O(),j("ngIf",!r.isAuthenticated))},dependencies:[St,rr,Ut,wr,or],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.admin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;font-size:2.5rem;margin-bottom:.5rem}.admin-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem}.admin-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.seeding-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;font-size:1.8rem;margin-bottom:.5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.data-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:12px;padding:1.5rem;margin-bottom:2rem}.data-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:1rem}.data-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.action-section[_ngcontent-%COMP%]{text-align:center;margin:2rem 0;display:flex;flex-direction:column;gap:1rem}.seed-btn[_ngcontent-%COMP%], .clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px #27ae604d;min-width:300px;margin:0 auto}.clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);box-shadow:0 6px 20px #e74c3c4d}.seed-btn[_ngcontent-%COMP%]:hover:not(:disabled), .clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 12px 30px #27ae6066}.clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 12px 30px #e74c3c66}.seed-btn[_ngcontent-%COMP%]:disabled, .clean-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a}.progress-indicator[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #27ae60;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-top:1.5rem;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.diagnostic-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:#f1f8ff;border:1px solid #d1ecf1;border-radius:12px}.diagnostic-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#06c;font-size:1.6rem}.diagnostic-btn[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;padding:.8rem 1.5rem;border-radius:10px;text-decoration:none;font-weight:500;transition:all .3s ease;border:none;cursor:pointer}.diagnostic-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #17a2b84d;text-decoration:none;color:#fff}.diagnostic-desc[_ngcontent-%COMP%]{margin-top:.8rem;color:#6c757d;font-size:.9rem;line-height:1.4}.navigation-section[_ngcontent-%COMP%]{text-align:center;padding-top:2rem;border-top:1px solid #e9ecef}.nav-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:10px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block}.nav-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.auth-required[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:#fff3cd;border:1px solid #ffeaa7;border-radius:12px;color:#856404}.auth-required[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#856404;margin-bottom:1rem}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.admin-panel[_ngcontent-%COMP%]{padding:1.5rem}.seed-btn[_ngcontent-%COMP%]{min-width:auto;width:100%;padding:1rem}.data-info[_ngcontent-%COMP%]{padding:1rem}}.management-section[_ngcontent-%COMP%]{margin-top:3rem;padding-top:2rem;border-top:2px solid #e9ecef}.management-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:1.8rem}.afroshops-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #dee2e6;overflow:hidden;margin-top:1rem}.list-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin:0;font-size:1.2rem}.refresh-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #17a2b84d}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.afroshop-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f1f3f4;transition:background-color .3s ease}.afroshop-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.afroshop-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.afroshop-info[_ngcontent-%COMP%]{flex:1}.basic-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 .25rem;font-size:1.1rem}.basic-info[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0 0 .25rem;font-weight:600}.basic-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:#495057;font-size:.85rem;margin:0}.meta-info[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.meta-info[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{background:#e9ecef;color:#495057;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-family:monospace}.actions[_ngcontent-%COMP%]{margin-left:1rem;display:flex;gap:.5rem;align-items:center}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d;background:linear-gradient(135deg,#218838,#1e7e34)}.delete-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d;background:linear-gradient(135deg,#c82333,#a71e2a)}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.load-button[_ngcontent-%COMP%]{text-align:center;padding:2rem}.load-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;border:none;padding:1rem 2rem;border-radius:8px;cursor:pointer;font-size:1rem;transition:all .3s ease}.load-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.load-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.management-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem}.list-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.afroshop-item[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.actions[_ngcontent-%COMP%]{margin-left:0;width:100%}.delete-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.meta-info[_ngcontent-%COMP%]{justify-content:center}}"]})};function $ce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F5FA}\uFE0F Tester"),p())}function Hce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Test..."),p())}function qce(n,e){if(n&1&&(f(0,"div",21)(1,"h4"),g(2,"\u2705 G\xE9ocodage R\xE9ussi"),p(),f(3,"p")(4,"strong"),g(5,"Coordonn\xE9es:"),p(),g(6),p(),f(7,"p")(8,"strong"),g(9,"Adresse format\xE9e:"),p(),g(10),p(),f(11,"p")(12,"strong"),g(13,"Pr\xE9cision:"),p(),g(14),p()()),n&2){let t=G(3);O(6),yr(" ",t.testResult.lat,", ",t.testResult.lng,""),O(4),Le(" ",t.testResult.formatted_address,""),O(4),Le(" ",t.testResult.accuracy,"")}}function Gce(n,e){n&1&&(f(0,"div",22)(1,"h4"),g(2,"\u274C G\xE9ocodage \xC9chou\xE9"),p(),f(3,"p"),g(4,"L'adresse n'a pas pu \xEAtre g\xE9ocod\xE9e."),p(),f(5,"p")(6,"em"),g(7,"V\xE9rifiez que l'adresse contient une ville allemande connue."),p()()())}function Wce(n,e){if(n&1&&(f(0,"div",18),ae(1,qce,15,4,"div",19)(2,Gce,8,0,"div",20),p()),n&2){let t=G(2);O(),j("ngIf",t.testResult.success),O(),j("ngIf",!t.testResult.success)}}function Kce(n,e){n&1&&(f(0,"span"),g(1,"\u{1F50D} Auditer tous les Afroshops"),p())}function Qce(n,e){n&1&&(f(0,"span"),g(1,"\u23F3 Audit en cours..."),p())}function Yce(n,e){if(n&1){let t=$e();f(0,"div",31)(1,"strong"),g(2),p(),Ne(3,"br"),f(4,"small"),g(5),p(),Ne(6,"br"),f(7,"span",32),g(8),p(),f(9,"button",33),le("click",function(){let i=ne(t).$implicit,o=G(4);return re(o.regeocodeAfroshop(i))}),g(10," \u{1F504} Re-g\xE9ocoder "),p()()}if(n&2){let t=e.$implicit,r=G(4);O(2),vt(t.name),O(3),vt(t.address),O(3),yr("Coordonn\xE9es: ",t.coordinates.lat,", ",t.coordinates.lng,""),O(),j("disabled",r.isRegeocoding)}}function Jce(n,e){if(n&1&&(f(0,"div",29)(1,"h5"),g(2,"\u26A0\uFE0F Afroshops avec Coordonn\xE9es Invalides"),p(),ae(3,Yce,11,5,"div",30),p()),n&2){let t=G(3);O(3),j("ngForOf",t.invalidAfroshops)}}function Zce(n,e){if(n&1&&(f(0,"div",23)(1,"h4"),g(2,"R\xE9sultats de l'Audit"),p(),f(3,"div",24)(4,"div",25)(5,"span",26),g(6),p(),f(7,"span",27),g(8,"Coordonn\xE9es Valides"),p()(),f(9,"div",25)(10,"span",26),g(11),p(),f(12,"span",27),g(13,"Coordonn\xE9es Invalides"),p()()(),ae(14,Jce,4,1,"div",28),p()),n&2){let t=G(2);O(6),vt(t.validCoordinates),O(5),vt(t.invalidCoordinates),O(3),j("ngIf",t.invalidAfroshops.length>0)}}function Xce(n,e){if(n&1){let t=$e();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),g(4,"\u{1F527} Diagnostic du G\xE9ocodage"),p(),f(5,"a",5),g(6," \u2190 Zur\xFCck zur Admin-Seite "),p()()(),f(7,"div",6)(8,"h3"),g(9,"Test d'Adresse"),p(),f(10,"div",7)(11,"input",8),Ce("ngModelChange",function(i){ne(t);let o=G();return Se(o.testAddress,i)||(o.testAddress=i),re(i)}),p(),f(12,"button",9),le("click",function(){ne(t);let i=G();return re(i.testSingleAddress())}),ae(13,$ce,2,0,"span",10)(14,Hce,2,0,"span",10),p()(),ae(15,Wce,3,2,"div",11),p(),f(16,"div",6)(17,"h3"),g(18,"Audit des Coordonn\xE9es"),p(),f(19,"button",12),le("click",function(){ne(t);let i=G();return re(i.auditAfroshops())}),ae(20,Kce,2,0,"span",10)(21,Qce,2,0,"span",10),p(),ae(22,Zce,15,3,"div",13),p(),f(23,"div",6)(24,"h3"),g(25,"Configuration Syst\xE8me"),p(),f(26,"div",14)(27,"div",15)(28,"strong"),g(29,"Mode de g\xE9ocodage:"),p(),f(30,"span",16),g(31),p()(),f(32,"div",15)(33,"strong"),g(34,"Villes support\xE9es:"),p(),f(35,"span"),g(36),p()(),f(37,"div",15)(38,"strong"),g(39,"Estimation par code postal:"),p(),f(40,"span",17),g(41,"\u2705 Activ\xE9e"),p()()()()()}if(n&2){let t=G();O(11),be("ngModel",t.testAddress),O(),j("disabled",t.isGeocoding),O(),j("ngIf",!t.isGeocoding),O(),j("ngIf",t.isGeocoding),O(),j("ngIf",t.testResult),O(4),j("disabled",t.isAuditing),O(),j("ngIf",!t.isAuditing),O(),j("ngIf",t.isAuditing),O(),j("ngIf",t.auditResults.length>0),O(9),vt(t.geocodingMode),O(5),Le("",t.supportedCitiesCount," villes")}}function ele(n,e){n&1&&(f(0,"div",34),g(1," \u{1F512} Acc\xE8s r\xE9serv\xE9 aux administrateurs "),p())}var Zw=class n{constructor(e,t,r){this.geocodingService=e;this.firebaseService=t;this.authService=r;this.authService.user$.subscribe(i=>{this.isAdmin=i?.email==="youssoufdiamaldiallo@gmail.com"})}isAdmin=!1;testAddress="";isGeocoding=!1;isAuditing=!1;isRegeocoding=!1;testResult=null;auditResults=[];invalidAfroshops=[];get validCoordinates(){return this.auditResults.filter(e=>this.geocodingService.isValidCoordinates(e.coordinates.lat,e.coordinates.lng)).length}get invalidCoordinates(){return this.auditResults.length-this.validCoordinates}get geocodingMode(){return"Fallback (Villes pr\xE9d\xE9finies)"}get supportedCitiesCount(){return 50}testSingleAddress(){return S(this,null,function*(){if(this.testAddress.trim()){this.isGeocoding=!0,this.testResult=null;try{this.geocodingService.geocodeAddress(this.testAddress).subscribe({next:e=>{this.isGeocoding=!1,e?this.testResult={success:!0,lat:e.lat,lng:e.lng,formatted_address:e.formatted_address,accuracy:e.accuracy}:this.testResult={success:!1}},error:e=>{this.isGeocoding=!1,this.testResult={success:!1,error:e.message},console.error("Erreur test g\xE9ocodage:",e)}})}catch(e){this.isGeocoding=!1,this.testResult={success:!1},console.error("Erreur test g\xE9ocodage:",e)}}})}auditAfroshops(){return S(this,null,function*(){this.isAuditing=!0,this.auditResults=[],this.invalidAfroshops=[];try{this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.auditResults=e,this.invalidAfroshops=e.filter(t=>!this.geocodingService.isValidCoordinates(t.coordinates.lat,t.coordinates.lng)),console.log(`Audit termin\xE9: ${this.validCoordinates}/${this.auditResults.length} coordonn\xE9es valides`),this.isAuditing=!1},error:e=>{console.error("Erreur audit:",e),this.isAuditing=!1}})}catch(e){console.error("Erreur audit:",e),this.isAuditing=!1}})}regeocodeAfroshop(e){return S(this,null,function*(){this.isRegeocoding=!0;try{this.geocodingService.geocodeAddress(e.address).subscribe({next:t=>S(this,null,function*(){if(t){let r={coordinates:{lat:t.lat,lng:t.lng}};yield this.firebaseService.updateAfroshop(e.id,r);let i=this.invalidAfroshops.findIndex(o=>o.id===e.id);i>=0&&(this.invalidAfroshops[i].coordinates=r.coordinates),console.log(`\u2705 Re-g\xE9ocodage r\xE9ussi pour ${e.name}`)}else console.warn(`\u274C Re-g\xE9ocodage \xE9chou\xE9 pour ${e.name}`);this.isRegeocoding=!1}),error:t=>{console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}catch(t){console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}static \u0275fac=function(t){return new(t||n)(te(Na),te(sr),te(Zt))};static \u0275cmp=ut({type:n,selectors:[["app-geocoding-diagnostic"]],decls:2,vars:2,consts:[["class","diagnostic-container",4,"ngIf"],["class","no-access",4,"ngIf"],[1,"diagnostic-container"],[1,"diagnostic-header"],[1,"header-content"],["routerLink","/admin",1,"back-to-admin-btn"],[1,"test-section"],[1,"input-group"],["type","text","placeholder","Saisissez une adresse allemande...",1,"test-input",3,"ngModelChange","ngModel"],[1,"test-btn",3,"click","disabled"],[4,"ngIf"],["class","result-box",4,"ngIf"],[1,"audit-btn",3,"click","disabled"],["class","audit-results",4,"ngIf"],[1,"config-info"],[1,"config-item"],[1,"mode-indicator"],[1,"feature-enabled"],[1,"result-box"],["class","success-result",4,"ngIf"],["class","error-result",4,"ngIf"],[1,"success-result"],[1,"error-result"],[1,"audit-results"],[1,"stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],["class","invalid-list",4,"ngIf"],[1,"invalid-list"],["class","invalid-item",4,"ngFor","ngForOf"],[1,"invalid-item"],[1,"coordinates"],[1,"regeocode-btn",3,"click","disabled"],[1,"no-access"]],template:function(t,r){t&1&&ae(0,Xce,42,11,"div",0)(1,ele,2,0,"div",1),t&2&&(j("ngIf",r.isAdmin),O(),j("ngIf",!r.isAdmin))},dependencies:[St,rr,Ut,po,zr,fo,Ii,wr,or],styles:[".diagnostic-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.diagnostic-header[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e9ecef}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.back-to-admin-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;padding:8px 16px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:5px}.back-to-admin-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6268,#495057);transform:translateY(-1px);text-decoration:none;color:#fff}.test-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.test-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;border-bottom:2px solid #007bff;padding-bottom:8px}.input-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px}.test-input[_ngcontent-%COMP%]{flex:1;padding:10px;border:2px solid #ddd;border-radius:4px;font-size:14px}.test-btn[_ngcontent-%COMP%], .audit-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:600}.test-btn[_ngcontent-%COMP%]:hover, .audit-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.test-btn[_ngcontent-%COMP%]:disabled, .audit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.result-box[_ngcontent-%COMP%]{margin-top:15px;padding:15px;border-radius:6px}.success-result[_ngcontent-%COMP%]{background:#d4edda;border:1px solid #c3e6cb;color:#155724}.error-result[_ngcontent-%COMP%]{background:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.stats[_ngcontent-%COMP%]{display:flex;gap:20px;margin:15px 0}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#fff;border-radius:6px;box-shadow:0 1px 3px #0000001a}.stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#007bff}.stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:5px}.invalid-item[_ngcontent-%COMP%]{background:#fff;padding:15px;margin:10px 0;border-radius:6px;border-left:4px solid #ffc107}.coordinates[_ngcontent-%COMP%]{color:#666;font-family:monospace}.regeocode-btn[_ngcontent-%COMP%]{margin-top:8px;padding:5px 10px;background:#28a745;color:#fff;border:none;border-radius:3px;font-size:12px;cursor:pointer}.config-info[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px}.config-item[_ngcontent-%COMP%]{margin:10px 0;display:flex;justify-content:space-between}.mode-indicator[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:14px}.feature-enabled[_ngcontent-%COMP%]{color:#28a745}.no-access[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:18px}"]})};var yl=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Rn(1),ge(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(de(Zt),de(It))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Q6=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:zw},{path:"afroshop/:id",component:$w},{path:"add-afroshop",component:_g,canActivate:[yl]},{path:"edit-afroshop/:id",component:_g,canActivate:[yl]},{path:"admin",component:Jw,canActivate:[yl]},{path:"geocoding-diagnostic",component:Zw,canActivate:[yl]},{path:"login",component:Hw},{path:"register",component:qw},{path:"privacy",component:Gw},{path:"terms",component:Ww},{path:"impressum",component:Kw},{path:"**",redirectTo:"/gallery"}];var Y6={providers:[VN({eventCoalescing:!0}),ZC(Q6),bC(),b2(I2()),JL(()=>ZL(fs.firebase)),OB(()=>UB()),HV(()=>WV()),f6(()=>g6())]};function tle(n,e){if(n&1){let t=$e();f(0,"div",1)(1,"span"),g(2," Diese Website verwendet Cookies f\xFCr Google Analytics, um das Nutzererlebnis zu verbessern. Mehr erfahren in unserer Datenschutzerkl\xE4rung. "),p(),f(3,"button",2),le("click",function(){ne(t);let i=G();return re(i.accept())}),g(4,"Akzeptieren"),p(),f(5,"button",2),le("click",function(){ne(t);let i=G();return re(i.decline())}),g(6,"Ablehnen"),p()()}}var Xw=class n{consentGiven=localStorage.getItem("cookie_consent")==="true";showBanner=!this.consentGiven;accept(){localStorage.setItem("cookie_consent","true"),this.showBanner=!1,this.loadAnalytics()}decline(){localStorage.setItem("cookie_consent","false"),this.showBanner=!1}loadAnalytics(){if(!window.gaLoaded){let e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=G-4VZ4WFYE9M",e.async=!0,document.head.appendChild(e),e.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","G-4VZ4WFYE9M",{anonymize_ip:!0}),window.gaLoaded=!0}}}ngOnInit(){this.consentGiven&&this.loadAnalytics()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-cookie-consent"]],decls:1,vars:1,consts:[["class","cookie-banner",4,"ngIf"],[1,"cookie-banner"],[3,"click"]],template:function(t,r){t&1&&ae(0,tle,7,0,"div",0),t&2&&j("ngIf",r.showBanner)},dependencies:[St,Ut],styles:[".cookie-banner[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#222;color:#fff;padding:16px 10px;display:flex;flex-direction:column;align-items:center;z-index:1000;box-shadow:0 -2px 10px #0003}.cookie-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center}.cookie-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:2px 6px;padding:8px 18px;border:none;border-radius:4px;background:#ff7b00;color:#fff;font-weight:600;cursor:pointer;transition:background .2s}.cookie-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#888}.cookie-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ff5722}"]})};function nle(n,e){if(n&1){let t=$e();f(0,"div",20)(1,"span",21),g(2),p(),f(3,"button",22),le("click",function(){ne(t);let i=G();return re(i.logout())}),g(4," \u{1F6AA} Abmelden "),p()()}if(n&2){let t=e.ngIf;O(2),Le("Hallo, ",t.displayName||t.email,"!")}}function rle(n,e){n&1&&(f(0,"div",23)(1,"a",24),g(2,"\u{1F510} Anmelden"),p(),f(3,"a",25),g(4,"\u{1F4DD} Registrieren"),p()())}var eE=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return S(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(te(Zt),te(It))};static \u0275cmp=ut({type:n,selectors:[["app-root"]],decls:39,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"rotating-globe"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["routerLink","/impressum",1,"footer-link"],["href","mailto:lamaid0502@gmail.com",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1")(6,"span",5),g(7,"\u{1F30D}"),p(),g(8," AfroConnect"),p()(),f(9,"p",6),g(10,"Verbinde dich mit der afrikanischen Community in Deutschland"),p()(),f(11,"div",7),ae(12,nle,5,1,"div",8),$i(13,"async"),ae(14,rle,5,0,"div",9),$i(15,"async"),p()()(),f(16,"main",10),Ne(17,"router-outlet"),p(),f(18,"footer",11)(19,"div",12)(20,"div",13)(21,"p"),g(22,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),p()(),f(23,"div",14)(24,"a",15),g(25,"Datenschutz"),p(),f(26,"span",16),g(27,"|"),p(),f(28,"a",17),g(29,"AGB"),p(),f(30,"span",16),g(31,"|"),p(),f(32,"a",18),g(33,"Impressum"),p(),f(34,"span",16),g(35,"|"),p(),f(36,"a",19),g(37,"Kontakt"),p()()()(),Ne(38,"app-cookie-consent"),p()),t&2&&(O(12),j("ngIf",Hi(13,2,r.user$)),O(2),j("ngIf",!Hi(15,4,r.user$)))},dependencies:[St,Ut,df,Of,wr,or,Xw],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (min-width: 1024px){.header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 2rem;gap:2rem}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;font-weight:400;letter-spacing:1px;text-align:left}.welcome-message[_ngcontent-%COMP%]{font-size:1.3rem;margin-top:.5rem;text-align:left}.app-main[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2.5rem 2rem;background:var(--background-light);border-radius:18px;box-shadow:0 2px 24px #00000012}.features[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:2.5rem}.feature-card[_ngcontent-%COMP%]{padding:2.5rem;font-size:1.1rem}.app-footer[_ngcontent-%COMP%]{font-size:1.1rem;padding:2rem 0}.footer-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 2rem}}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};vC(eE,Y6).catch(n=>console.error(n));
