var Jz=Object.defineProperty,Zz=Object.defineProperties;var Xz=Object.getOwnPropertyDescriptors;var dg=Object.getOwnPropertySymbols,e4=Object.getPrototypeOf,PM=Object.prototype.hasOwnProperty,xM=Object.prototype.propertyIsEnumerable,t4=Reflect.get;var MM=(n,e,t)=>e in n?Jz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||={})PM.call(e,t)&&MM(n,t,e[t]);if(dg)for(var t of dg(e))xM.call(e,t)&&MM(n,t,e[t]);return n},ae=(n,e)=>Zz(n,Xz(e));var rh=(n,e)=>{var t={};for(var r in n)PM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&dg)for(var r of dg(n))e.indexOf(r)<0&&xM.call(n,r)&&(t[r]=n[r]);return t};var gi=(n,e,t)=>t4(e4(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(d){i(d)}},o=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function mI(n,e){return Object.is(n,e)}var Qt=null,hg=!1,yI=1,yr=Symbol("SIGNAL");function Le(n){let e=Qt;return Qt=n,e}function _I(){return Qt}var sh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oh(n){if(hg)throw new Error("");if(Qt===null)return;Qt.consumerOnSignalRead(n);let e=Qt.nextProducerIndex++;if(mg(Qt),e<Qt.producerNode.length&&Qt.producerNode[e]!==n&&ih(Qt)){let t=Qt.producerNode[e];gg(t,Qt.producerIndexOfThis[e])}Qt.producerNode[e]!==n&&(Qt.producerNode[e]=n,Qt.producerIndexOfThis[e]=ih(Qt)?NM(n,Qt,e):0),Qt.producerLastReadVersion[e]=n.version}function kM(){yI++}function vI(n){if(!(ih(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yI)){if(!n.producerMustRecompute(n)&&!bI(n)){gI(n);return}n.producerRecomputeValue(n),gI(n)}}function wI(n){if(n.liveConsumerNode===void 0)return;let e=hg;hg=!0;try{for(let t of n.liveConsumerNode)t.dirty||n4(t)}finally{hg=e}}function II(){return Qt?.consumerAllowSignalWrites!==!1}function n4(n){n.dirty=!0,wI(n),n.consumerMarkedDirty?.(n)}function gI(n){n.dirty=!1,n.lastCleanEpoch=yI}function pg(n){return n&&(n.nextProducerIndex=0),Le(n)}function EI(n,e){if(Le(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ih(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function bI(n){mg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vI(t),r!==t.version))return!0}return!1}function TI(n){if(mg(n),ih(n))for(let e=0;e<n.producerNode.length;e++)gg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function NM(n,e,t){if(OM(n),n.liveConsumerNode.length===0&&LM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=NM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gg(n,e){if(OM(n),n.liveConsumerNode.length===1&&LM(n))for(let r=0;r<n.producerNode.length;r++)gg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mg(i),i.producerIndexOfThis[r]=e}}function ih(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function OM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function LM(n){return n.producerNode!==void 0}function CI(n,e){let t=Object.create(r4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(vI(t),oh(t),t.value===fg)throw t.error;return t.value};return r[yr]=t,r}var fI=Symbol("UNSET"),pI=Symbol("COMPUTING"),fg=Symbol("ERRORED"),r4=ae(z({},sh),{value:fI,dirty:!0,error:null,equal:mI,kind:"computed",producerMustRecompute(n){return n.value===fI||n.value===pI},producerRecomputeValue(n){if(n.value===pI)throw new Error("Detected cycle in computations.");let e=n.value;n.value=pI;let t=pg(n),r,i=!1;try{r=n.computation(),Le(null),i=e!==fI&&e!==fg&&r!==fg&&n.equal(e,r)}catch(s){r=fg,n.error=s}finally{EI(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function i4(){throw new Error}var FM=i4;function VM(n){FM(n)}function DI(n){FM=n}var s4=null;function SI(n,e){let t=Object.create(yg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(oh(t),t.value);return r[yr]=t,r}function ah(n,e){II()||VM(n),n.equal(n.value,e)||(n.value=e,o4(n))}function AI(n,e){II()||VM(n),ah(n,e(n.value))}var yg=ae(z({},sh),{equal:mI,value:void 0,kind:"signal"});function o4(n){n.version++,kM(),wI(n),s4?.()}function RI(n){let e=Le(null);try{return n()}finally{Le(e)}}var MI;function ch(){return MI}function Xi(n){let e=MI;return MI=n,e}var _g=Symbol("NotFound");function be(n){return typeof n=="function"}function fu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vg=fu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uh(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(s){e=s instanceof vg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{UM(s)}catch(o){e=e??[],o instanceof vg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)UM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uh(t,e)}remove(e){let{_finalizers:t}=this;t&&uh(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var PI=Pt.EMPTY;function wg(n){return n instanceof Pt||n&&"closed"in n&&be(n.remove)&&be(n.add)&&be(n.unsubscribe)}function UM(n){be(n)?n():n.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pu={setTimeout(n,e,...t){let{delegate:r}=pu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ig(n){pu.setTimeout(()=>{let{onUnhandledError:e}=Lr;if(e)e(n);else throw n})}function lh(){}var BM=xI("C",void 0,void 0);function jM(n){return xI("E",void 0,n)}function zM(n){return xI("N",n,void 0)}function xI(n,e,t){return{kind:n,value:e,error:t}}var Ra=null;function gu(n){if(Lr.useDeprecatedSynchronousErrorHandling){let e=!Ra;if(e&&(Ra={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ra;if(Ra=null,t)throw r}}else n()}function $M(n){Lr.useDeprecatedSynchronousErrorHandling&&Ra&&(Ra.errorThrown=!0,Ra.error=n)}var Ma=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wg(e)&&e.add(this)):this.destination=h4}static create(e,t,r){return new mu(e,t,r)}next(e){this.isStopped?NI(zM(e),this):this._next(e)}error(e){this.isStopped?NI(jM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?NI(BM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},l4=Function.prototype.bind;function kI(n,e){return l4.call(n,e)}var OI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Eg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Eg(r)}else Eg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Eg(t)}}},mu=class extends Ma{constructor(e,t,r){super();let i;if(be(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Lr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kI(e.next,s),error:e.error&&kI(e.error,s),complete:e.complete&&kI(e.complete,s)}):i=e}this.destination=new OI(i)}};function Eg(n){Lr.useDeprecatedSynchronousErrorHandling?$M(n):Ig(n)}function d4(n){throw n}function NI(n,e){let{onStoppedNotification:t}=Lr;t&&pu.setTimeout(()=>t(n,e))}var h4={closed:!0,next:lh,error:d4,complete:lh};var yu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rr(n){return n}function bg(...n){return LI(n)}function LI(n){return n.length===0?rr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=p4(t)?t:new mu(t,r,i);return gu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=qM(r),new r((i,s)=>{let o=new mu({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yu](){return this}pipe(...t){return LI(t)(this)}toPromise(t){return t=qM(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function qM(n){var e;return(e=n??Lr.Promise)!==null&&e!==void 0?e:Promise}function f4(n){return n&&be(n.next)&&be(n.error)&&be(n.complete)}function p4(n){return n&&n instanceof Ma||f4(n)&&wg(n)}function FI(n){return be(n?.lift)}function $e(n){return e=>{if(FI(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new VI(n,e,t,r,i)}var VI=class extends Ma{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _u(){return $e((n,e)=>{let t=null;n._refCount++;let r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var vu=class extends Me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,FI(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;let t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return _u()(this)}};var HM=fu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tt=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Tg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new HM}next(t){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?PI:(this.currentObservers=null,s.push(t),new Pt(()=>{this.currentObservers=null,uh(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Me;return t.source=this,t}}return n.create=(e,t)=>new Tg(e,t),n})(),Tg=class extends Tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:PI}};var xt=class extends Tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vn=new Me(n=>n.complete());function GM(n){return n&&be(n.schedule)}function WM(n){return n[n.length-1]}function Cg(n){return be(WM(n))?n.pop():void 0}function lo(n){return GM(WM(n))?n.pop():void 0}function Dg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function QM(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function KM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pa(n){return this instanceof Pa?(this.v=n,this):new Pa(n)}function YM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(E){return function(M){return Promise.resolve(M).then(E,g)}}function a(E,M){r[E]&&(i[E]=function(F){return new Promise(function(k,q){s.push([E,F,k,q])>1||c(E,F)})},M&&(i[E]=M(i[E])))}function c(E,M){try{d(r[E](M))}catch(F){I(s[0][3],F)}}function d(E){E.value instanceof Pa?Promise.resolve(E.value.v).then(h,g):I(s[0][2],E)}function h(E){c("next",E)}function g(E){c("throw",E)}function I(E,M){E(M),s.shift(),s.length&&c(s[0][0],s[0][1])}}function JM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof KM=="function"?KM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Sg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ag(n){return be(n?.then)}function Rg(n){return be(n[yu])}function Mg(n){return Symbol.asyncIterator&&be(n?.[Symbol.asyncIterator])}function Pg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function g4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xg=g4();function kg(n){return be(n?.[xg])}function Ng(n){return YM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Pa(t.read());if(i)return yield Pa(void 0);yield yield Pa(r)}}finally{t.releaseLock()}})}function Og(n){return be(n?.getReader)}function Lt(n){if(n instanceof Me)return n;if(n!=null){if(Rg(n))return m4(n);if(Sg(n))return y4(n);if(Ag(n))return _4(n);if(Mg(n))return ZM(n);if(kg(n))return v4(n);if(Og(n))return w4(n)}throw Pg(n)}function m4(n){return new Me(e=>{let t=n[yu]();if(be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function y4(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _4(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ig)})}function v4(n){return new Me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZM(n){return new Me(e=>{I4(n,e).catch(t=>e.error(t))})}function w4(n){return ZM(Ng(n))}function I4(n,e){var t,r,i,s;return QM(this,void 0,void 0,function*(){try{for(t=JM(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Un(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Lg(n,e=0){return $e((t,r)=>{t.subscribe(Fe(r,i=>Un(r,n,()=>r.next(i),e),()=>Un(r,n,()=>r.complete(),e),i=>Un(r,n,()=>r.error(i),e)))})}function Fg(n,e=0){return $e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function XM(n,e){return Lt(n).pipe(Fg(e),Lg(e))}function eP(n,e){return Lt(n).pipe(Fg(e),Lg(e))}function tP(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function nP(n,e){return new Me(t=>{let r;return Un(t,e,()=>{r=n[xg](),Un(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>be(r?.return)&&r.return()})}function Vg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{Un(t,e,()=>{let r=n[Symbol.asyncIterator]();Un(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function rP(n,e){return Vg(Ng(n),e)}function iP(n,e){if(n!=null){if(Rg(n))return XM(n,e);if(Sg(n))return tP(n,e);if(Ag(n))return eP(n,e);if(Mg(n))return Vg(n,e);if(kg(n))return nP(n,e);if(Og(n))return rP(n,e)}throw Pg(n)}function ot(n,e){return e?iP(n,e):Lt(n)}function fe(...n){let e=lo(n);return ot(n,e)}function wu(n,e){let t=be(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function UI(n){return!!n&&(n instanceof Me||be(n.lift)&&be(n.subscribe))}var es=fu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _e(n,e){return $e((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:E4}=Array;function b4(n,e){return E4(e)?n(...e):n(e)}function Ug(n){return _e(e=>b4(n,e))}var{isArray:T4}=Array,{getPrototypeOf:C4,prototype:D4,keys:S4}=Object;function Bg(n){if(n.length===1){let e=n[0];if(T4(e))return{args:e,keys:null};if(A4(e)){let t=S4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function A4(n){return n&&typeof n=="object"&&C4(n)===D4}function jg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xa(...n){let e=lo(n),t=Cg(n),{args:r,keys:i}=Bg(n);if(r.length===0)return ot([],e);let s=new Me(R4(r,e,i?o=>jg(i,o):rr));return t?s.pipe(Ug(t)):s}function R4(n,e,t=rr){return r=>{sP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)sP(e,()=>{let d=ot(n[c],e),h=!1;d.subscribe(Fe(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function sP(n,e,t){n?Un(t,n,e):e()}function oP(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,I=()=>{g&&!c.length&&!d&&e.complete()},E=F=>d<r?M(F):c.push(F),M=F=>{s&&e.next(F),d++;let k=!1;Lt(t(F,h++)).subscribe(Fe(e,q=>{i?.(q),s?E(q):e.next(q)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;c.length&&d<r;){let q=c.shift();o?Un(e,o,()=>M(q)):M(q)}I()}catch(q){e.error(q)}}))};return n.subscribe(Fe(e,E,()=>{g=!0,I()})),()=>{a?.()}}function kt(n,e,t=1/0){return be(e)?kt((r,i)=>_e((s,o)=>e(r,s,i,o))(Lt(n(r,i))),t):(typeof e=="number"&&(t=e),$e((r,i)=>oP(r,i,n,t)))}function Iu(n=1/0){return kt(rr,n)}function aP(){return Iu(1)}function Eu(...n){return aP()(ot(n,lo(n)))}function zg(n){return new Me(e=>{Lt(n()).subscribe(e)})}function BI(...n){let e=Cg(n),{args:t,keys:r}=Bg(n),i=new Me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;Lt(t[h]).subscribe(Fe(s,I=>{g||(g=!0,d--),a[h]=I},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?jg(r,a):a),s.complete())}))}});return e?i.pipe(Ug(e)):i}function Bn(n,e){return $e((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ts(n){return $e((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=Lt(n(o,ts(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function cP(n,e,t,r,i){return(s,o)=>{let a=t,c=e,d=0;s.subscribe(Fe(o,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ho(n,e){return be(e)?kt(n,e,1):kt(n,1)}function fo(n){return $e((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _n(n){return n<=0?()=>Vn:$e((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function $g(n=M4){return $e((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function M4(){return new es}function dh(n){return $e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ns(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Bn((i,s)=>n(i,s,r)):rr,_n(1),t?fo(e):$g(()=>new es))}function bu(n){return n<=0?()=>Vn:$e((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jI(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Bn((i,s)=>n(i,s,r)):rr,bu(1),t?fo(e):$g(()=>new es))}function qg(n,e){return $e(cP(n,e,arguments.length>=2,!0))}function Hg(...n){let e=lo(n);return $e((t,r)=>{(e?Eu(n,t,e):Eu(n,t)).subscribe(r)})}function jn(n,e){return $e((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,c=>{i?.unsubscribe();let d=0,h=s++;Lt(n(c,h)).subscribe(i=Fe(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tu(n){return $e((e,t)=>{Lt(n).subscribe(Fe(t,()=>t.complete(),lh)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let r=be(n)||e||t?{next:n,error:e,complete:t}:n;return r?$e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Fe(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):rr}var GI={JSACTION:"jsaction"},WI={JSACTION:"__jsaction",OWNER:"__owner"},hP={};function P4(n){return n[WI.JSACTION]}function uP(n,e){n[WI.JSACTION]=e}function x4(n){return hP[n]}function k4(n,e){hP[n]=e}var de={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},N4=[de.MOUSEENTER,de.MOUSELEAVE,"pointerenter","pointerleave"],Lle=[de.CLICK,de.DBLCLICK,de.FOCUSIN,de.FOCUSOUT,de.KEYDOWN,de.KEYUP,de.KEYPRESS,de.MOUSEOVER,de.MOUSEOUT,de.SUBMIT,de.TOUCHSTART,de.TOUCHEND,de.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],O4=[de.FOCUS,de.BLUR,de.ERROR,de.LOAD,de.TOGGLE],KI=n=>O4.indexOf(n)>=0;function L4(n){return n===de.MOUSEENTER?de.MOUSEOVER:n===de.MOUSELEAVE?de.MOUSEOUT:n===de.POINTERENTER?de.POINTEROVER:n===de.POINTERLEAVE?de.POINTEROUT:n}function F4(n,e,t,r){let i=!1;KI(e)&&(i=!0);let s=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,s),{eventType:e,handler:t,capture:i,passive:r}}function V4(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function U4(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var lP=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function B4(n){return n.which===2||n.which==null&&n.button===4}function j4(n){return lP&&n.metaKey||!lP&&n.ctrlKey||B4(n)||n.shiftKey}function z4(n,e,t){let r=n.relatedTarget;return(n.type===de.MOUSEOVER&&e===de.MOUSEENTER||n.type===de.MOUSEOUT&&e===de.MOUSELEAVE||n.type===de.POINTEROVER&&e===de.POINTERENTER||n.type===de.POINTEROUT&&e===de.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function $4(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,s=n[i];typeof s!="function"&&(t[i]=s)}return n.type===de.MOUSEOVER?t.type=de.MOUSEENTER:n.type===de.MOUSEOUT?t.type=de.MOUSELEAVE:n.type===de.POINTEROVER?t.type=de.POINTERENTER:t.type=de.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var q4=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Qg=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){q4&&(this.element.style.cursor="pointer"),this.handlerInfos.push(F4(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)V4(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},H4={EVENT_ACTION_SEPARATOR:":"};function po(n){return n.eventType}function QI(n,e){n.eventType=e}function Wg(n){return n.event}function fP(n,e){n.event=e}function pP(n){return n.targetElement}function gP(n,e){n.targetElement=e}function mP(n){return n.eic}function G4(n,e){n.eic=e}function W4(n){return n.timeStamp}function K4(n,e){n.timeStamp=e}function Kg(n){return n.eia}function yP(n,e,t){n.eia=[e,t]}function zI(n){n.eia=void 0}function Gg(n){return n[1]}function Q4(n){return n.eirp}function _P(n,e){n.eirp=e}function vP(n){return n.eir}function wP(n,e){n.eir=e}function IP(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function Y4(n,e,t,r,i,s,o,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:s,eirp:o,eiack:a}}var $I=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return po(this.eventInfo)}setEventType(e){QI(this.eventInfo,e)}getEvent(){return Wg(this.eventInfo)}setEvent(e){fP(this.eventInfo,e)}getTargetElement(){return pP(this.eventInfo)}setTargetElement(e){gP(this.eventInfo,e)}getContainer(){return mP(this.eventInfo)}setContainer(e){G4(this.eventInfo,e)}getTimestamp(){return W4(this.eventInfo)}setTimestamp(e){K4(this.eventInfo,e)}getAction(){let e=Kg(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){zI(this.eventInfo);return}yP(this.eventInfo,e.name,e.element)}getIsReplay(){return Q4(this.eventInfo)}setIsReplay(e){_P(this.eventInfo,e)}getResolved(){return vP(this.eventInfo)}setResolved(e){wP(this.eventInfo,e)}clone(){return new n(IP(this.eventInfo))}},J4={},Z4=/\s*;\s*/,X4=de.CLICK,qI=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&po(e)===de.CLICK&&j4(Wg(e))?QI(e,de.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){vP(e)||(this.populateAction(e,pP(e)),wP(e,!0))}resolveParentAction(e){let t=Kg(e),r=t&&Gg(t);zI(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==mP(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Kg(e));)r=this.getParentNode(r);let i=Kg(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(po(e)===de.MOUSEENTER||po(e)===de.MOUSELEAVE||po(e)===de.POINTERENTER||po(e)===de.POINTERLEAVE)))if(z4(Wg(e),po(e),Gg(i))){let s=$4(Wg(e),Gg(i));fP(e,s),gP(e,Gg(i))}else zI(e)}getParentNode(e){let t=e[WI.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[po(t)];i!==void 0&&yP(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=P4(e);if(!t){let r=e.getAttribute(GI.JSACTION);if(!r)t=J4,uP(e,t);else{if(t=x4(r),!t){t={};let i=r.split(Z4);for(let s=0;s<i.length;s++){let o=i[s];if(!o)continue;let a=o.indexOf(H4.EVENT_ACTION_SEPARATOR),c=a!==-1,d=c?o.substr(0,a).trim():X4,h=c?o.substr(a+1).trim():o;t[d]=h}k4(r,t)}uP(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},EP=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(EP||{}),HI=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new $I(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&e$(r.element,t)&&U4(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function e$(n,e){return n.tagName==="A"&&(e.getEventType()===de.CLICK||e.getEventType()===de.CLICKMOD)}var bP=Symbol.for("propagationStopped"),YI={REPLAY:101};var t$="`preventDefault` called during event replay.";var n$="`composedPath` called during event replay.",Yg=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new qI({clickModSupport:t}),this.dispatcher=new HI(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&s$(e),r$(e);e.getAction();){if(o$(e),KI(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),i$(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function r$(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[bP]=!0,t()};ka(e,"stopPropagation",r),ka(e,"stopImmediatePropagation",r)}function i$(n){return!!n.getEvent()[bP]}function s$(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);ka(e,"target",t),ka(e,"eventPhase",YI.REPLAY),ka(e,"preventDefault",()=>{throw r(),new Error(t$+"")}),ka(e,"composedPath",()=>{throw new Error(n$+"")})}function o$(n){let e=n.getEvent(),t=n.getAction()?.element;t&&ka(e,"currentTarget",t,{configurable:!0})}function ka(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function TP(n,e){n.ecrd(t=>{e.dispatch(t)},EP.I_AM_THE_JSACTION_FRAMEWORK)}function a$(n){return n?.q??[]}function c$(n){n&&(dP(n.c,n.et,n.h),dP(n.c,n.etc,n.h,!0))}function dP(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var u$=!1,CP=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=u$;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let s=Y4(t,r,r.target,i,Date.now());this.handleEventInfo(s)}handleEventInfo(t){if(!this.dispatcher){_P(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&N4.indexOf(t)>=0)return;let s=(a,c,d)=>{this.handleEvent(a,c,d)};this.eventHandlers[t]=s;let o=L4(r||t);if(o!==t){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(t),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>c=>{s(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),c$(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],s=this.getEventTypesForBrowserEventType(i.eventType);for(let o=0;o<s.length;o++){let a=IP(i);QI(a,s[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function DP(n,e=window){return a$(e._ejsas?.[n])}function JI(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var Tx="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ne=class extends Error{code;constructor(e,t){super(Bm(e,t)),this.code=e}};function l$(n){return`NG0${Math.abs(n)}`}function Bm(n,e){return`${l$(n)}${e?": "+e:""}`}var Cx=Symbol("InputSignalNode#UNSET"),d$=ae(z({},yg),{transformFn:void 0,applyValueToInputSignal(n,e){ah(n,e)}});function Dx(n,e){let t=Object.create(d$);t.value=n,t.transformFn=e?.transform;function r(){if(oh(t),t.value===Cx){let i=null;throw new ne(-950,i)}return t.value}return r[yr]=t,r}function Eh(n){return{toString:n}.toString()}var Jg="__parameters__";function h$(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Sx(n,e,t){return Eh(()=>{let r=h$(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(Jg)?c[Jg]:Object.defineProperty(c,Jg,{value:[]})[Jg];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var um=globalThis;function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function f$(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function qn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(qn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function gE(n,e){return n?e?`${n} ${e}`:n:e||""}var p$=ut({__forward_ref__:ut});function us(n){return n.__forward_ref__=us,n.toString=function(){return qn(this())},n}function Mn(n){return Ax(n)?n():n}function Ax(n){return typeof n=="function"&&n.hasOwnProperty(p$)&&n.__forward_ref__===us}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $r(n){return{providers:n.providers||[],imports:n.imports||[]}}function jm(n){return SP(n,Mx)||SP(n,Px)}function Rx(n){return jm(n)!==null}function SP(n,e){return n.hasOwnProperty(e)?n[e]:null}function g$(n){let e=n&&(n[Mx]||n[Px]);return e||null}function AP(n){return n&&(n.hasOwnProperty(RP)||n.hasOwnProperty(m$))?n[RP]:null}var Mx=ut({\u0275prov:ut}),RP=ut({\u0275inj:ut}),Px=ut({ngInjectableDef:ut}),m$=ut({ngInjectorDef:ut}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xx(n){return n&&!!n.\u0275providers}var y$=ut({\u0275cmp:ut}),_$=ut({\u0275dir:ut}),v$=ut({\u0275pipe:ut}),w$=ut({\u0275mod:ut}),lm=ut({\u0275fac:ut}),gh=ut({__NG_ELEMENT_ID__:ut}),MP=ut({__NG_ENV_ID__:ut});function Nu(n){return typeof n=="string"?n:n==null?"":String(n)}function I$(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nu(n)}function kx(n,e){throw new ne(-200,n)}function sb(n,e){throw new ne(-201,!1)}var Re=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Re||{}),mE;function Nx(){return mE}function zn(n){let e=mE;return mE=n,e}function Ox(n,e,t){let r=jm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Re.Optional)return null;if(e!==void 0)return e;sb(n,"Injector")}var E$={},Na=E$,yE="__NG_DI_FLAG__",dm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?_g:Na,r)}},hm="ngTempTokenPath",b$="ngTokenPath",T$=/\n/gm,C$="\u0275",PP="__source";function D$(n,e=Re.Default){if(ch()===void 0)throw new ne(-203,!1);if(ch()===null)return Ox(n,void 0,e);{let t=ch(),r;return t instanceof dm?r=t.injector:r=t,r.get(n,e&Re.Optional?null:void 0,e)}}function ce(n,e=Re.Default){return(Nx()||D$)(Mn(n),e)}function B(n,e=Re.Default){return ce(n,zm(e))}function zm(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _E(n){let e=[];for(let t=0;t<n.length;t++){let r=Mn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,s=Re.Default;for(let o=0;o<r.length;o++){let a=r[o],c=S$(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ce(i,s))}else e.push(ce(r))}return e}function Lx(n,e){return n[yE]=e,n.prototype[yE]=e,n}function S$(n){return n[yE]}function A$(n,e,t,r){let i=n[hm];throw e[PP]&&i.unshift(e[PP]),n.message=R$(`
`+n.message,i,t,r),n[b$]=i,n[hm]=null,n}function R$(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==C$?n.slice(2):n;let i=qn(e);if(Array.isArray(e))i=e.map(qn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):qn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(T$,`
  `)}`}var Zt=Lx(Sx("Optional"),8);var M$=Lx(Sx("SkipSelf"),4);function La(n,e){let t=n.hasOwnProperty(lm);return t?n[lm]:null}function ob(n,e){n.forEach(t=>Array.isArray(t)?ob(t,e):e(t))}function Fx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function P$(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function x$(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ab(n,e,t){let r=bh(n,e);return r>=0?n[r|1]=t:(r=~r,x$(n,r,e,t)),r}function ZI(n,e){let t=bh(n,e);if(t>=0)return n[t|1]}function bh(n,e){return k$(n,e,1)}function k$(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Fa={},$n=[],mo=new Q(""),Vx=new Q("",-1),Ux=new Q(""),pm=class{get(e,t=Na){if(t===Na){let r=new Error(`NullInjectorError: No provider for ${qn(e)}!`);throw r.name="NullInjectorError",r}return t}};function Bx(n,e){let t=n[w$]||null;if(!t&&e===!0)throw new Error(`Type ${qn(n)} does not have '\u0275mod' property.`);return t}function yo(n){return n[y$]||null}function jx(n){return n[_$]||null}function zx(n){return n[v$]||null}function vn(n){return{\u0275providers:n}}function N$(...n){return{\u0275providers:cb(!0,n),\u0275fromNgModule:!0}}function cb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return ob(e,o=>{let a=o;vE(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&$x(i,s),t}function $x(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ub(i,s=>{e(s,r)})}}function vE(n,e,t,r){if(n=Mn(n),!n)return!1;let i=null,s=AP(n),o=!s&&yo(n);if(!s&&!o){let c=n.ngModule;if(s=AP(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)vE(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{ob(s.imports,h=>{vE(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&$x(d,e)}if(!a){let d=La(i)||(()=>new i);e({provide:i,useFactory:d,deps:$n},i),e({provide:Ux,useValue:i,multi:!0},i),e({provide:mo,useValue:()=>ce(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;ub(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function ub(n,e){for(let t of n)xx(t)&&(t=t.\u0275providers),Array.isArray(t)?ub(t,e):e(t)}var O$=ut({provide:String,useValue:ut});function qx(n){return n!==null&&typeof n=="object"&&O$ in n}function L$(n){return!!(n&&n.useExisting)}function F$(n){return!!(n&&n.useFactory)}function Ou(n){return typeof n=="function"}function V$(n){return!!n.useClass}var $m=new Q(""),nm={},xP={},XI;function lb(){return XI===void 0&&(XI=new pm),XI}var Pn=class{},mh=class extends Pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,IE(e,o=>this.processProvider(o)),this.records.set(Vx,Cu(void 0,this)),i.has("environment")&&this.records.set(Pn,Cu(void 0,this));let s=this.records.get($m);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ux,$n,Re.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?_g:Na,r)}destroy(){fh(this),this._destroyed=!0;let e=Le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Le(e)}}onDestroy(e){return fh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fh(this);let t=Xi(this),r=zn(void 0),i;try{return e()}finally{Xi(t),zn(r)}}get(e,t=Na,r=Re.Default){if(fh(this),e.hasOwnProperty(MP))return e[MP](this);r=zm(r);let i,s=Xi(this),o=zn(void 0);try{if(!(r&Re.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=$$(e)&&jm(e);d&&this.injectableDefInScope(d)?c=Cu(wE(e),nm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Re.Self?lb():this.parent;return t=r&Re.Optional&&t===Na?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[hm]=a[hm]||[]).unshift(qn(e)),s)throw a;return A$(a,e,"R3InjectorError",this.source)}else throw a}finally{zn(o),Xi(s)}}resolveInjectorInitializers(){let e=Le(null),t=Xi(this),r=zn(void 0),i;try{let s=this.get(mo,$n,Re.Self);for(let o of s)o()}finally{Xi(t),zn(r),Le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(qn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Mn(e);let t=Ou(e)?e:Mn(e&&e.provide),r=B$(e);if(!Ou(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Cu(void 0,nm,!0),i.factory=()=>_E(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Le(null);try{return t.value===xP?kx(qn(e)):t.value===nm&&(t.value=xP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&z$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wE(n){let e=jm(n),t=e!==null?e.factory:La(n);if(t!==null)return t;if(n instanceof Q)throw new ne(204,!1);if(n instanceof Function)return U$(n);throw new ne(204,!1)}function U$(n){if(n.length>0)throw new ne(204,!1);let t=g$(n);return t!==null?()=>t.factory(n):()=>new n}function B$(n){if(qx(n))return Cu(void 0,n.useValue);{let e=Hx(n);return Cu(e,nm)}}function Hx(n,e,t){let r;if(Ou(n)){let i=Mn(n);return La(i)||wE(i)}else if(qx(n))r=()=>Mn(n.useValue);else if(F$(n))r=()=>n.useFactory(..._E(n.deps||[]));else if(L$(n))r=(i,s)=>ce(Mn(n.useExisting),s!==void 0&&s&Re.Optional?Re.Optional:void 0);else{let i=Mn(n&&(n.useClass||n.provide));if(j$(n))r=()=>new i(..._E(n.deps));else return La(i)||wE(i)}return r}function fh(n){if(n.destroyed)throw new ne(205,!1)}function Cu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function j$(n){return!!n.deps}function z$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $$(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function IE(n,e){for(let t of n)Array.isArray(t)?IE(t,e):t&&xx(t)?IE(t.\u0275providers,e):e(t)}function ar(n,e){let t;n instanceof mh?(fh(n),t=n):t=new dm(n);let r,i=Xi(t),s=zn(void 0);try{return e()}finally{Xi(i),zn(s)}}function Gx(){return Nx()!==void 0||ch()!=null}function Wx(n){if(!Gx())throw new ne(-203,!1)}function q$(n){return typeof n=="function"}var or=0,we=1,Te=2,sn=3,Ur=4,Kn=5,jr=6,gm=7,Hn=8,yi=9,is=10,at=11,yh=12,kP=13,zu=14,Gn=15,Lu=16,Du=17,Fu=18,qm=19,Kx=20,go=21,eE=22,mm=23,_r=24,Mu=25,Ct=26,Qx=1,ss=6,os=7,ym=8,_m=9,sr=10;function Br(n){return Array.isArray(n)&&typeof n[Qx]=="object"}function Ei(n){return Array.isArray(n)&&n[Qx]===!0}function Yx(n){return(n.flags&4)!==0}function $a(n){return n.componentOffset>-1}function db(n){return(n.flags&1)===1}function _i(n){return!!n.template}function _h(n){return(n[Te]&512)!==0}function qa(n){return(n[Te]&256)===256}var EE=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Jx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var cr=(()=>{let n=()=>Zx;return n.ngInherit=!0,n})();function Zx(n){return n.type.prototype.ngOnChanges&&(n.setInput=G$),H$}function H$(){let n=ek(this),e=n?.current;if(e){let t=n.previous;if(t===Fa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function G$(n,e,t,r,i){let s=this.declaredInputs[r],o=ek(n)||W$(n,{previous:Fa,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new EE(d&&d.currentValue,t,c===Fa),Jx(n,e,i,t)}var Xx="__ngSimpleChanges__";function ek(n){return n[Xx]||null}function W$(n,e){return n[Xx]=e}var NP=null;var tt=function(n,e=null,t){NP?.(n,e,t)},K$="svg",Q$="math";function zr(n){for(;Array.isArray(n);)n=n[or];return n}function tk(n,e){return zr(e[n])}function qr(n,e){return zr(e[n.index])}function Hm(n,e){return n.data[e]}function nk(n,e){return n[e]}function Y$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vi(n,e){let t=e[n];return Br(t)?t:t[or]}function hb(n){return(n[Te]&128)===128}function J$(n){return Ei(n[sn])}function vm(n,e){return e==null?null:n[e]}function rk(n){n[Du]=0}function ik(n){n[Te]&1024||(n[Te]|=1024,hb(n)&&Th(n))}function Z$(n,e){for(;n>0;)e=e[zu],n--;return e}function Gm(n){return!!(n[Te]&9216||n[_r]?.dirty)}function bE(n){n[is].changeDetectionScheduler?.notify(8),n[Te]&64&&(n[Te]|=1024),Gm(n)&&Th(n)}function Th(n){n[is].changeDetectionScheduler?.notify(0);let e=Va(n);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!hb(e)));)e=Va(e)}function sk(n,e){if(qa(n))throw new ne(911,!1);n[go]===null&&(n[go]=[]),n[go].push(e)}function X$(n,e){if(n[go]===null)return;let t=n[go].indexOf(e);t!==-1&&n[go].splice(t,1)}function Va(n){let e=n[sn];return Ei(e)?e[sn]:e}function ok(n){return n[gm]??=[]}function ak(n){return n.cleanup??=[]}var xe={lFrame:mk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TE=!1;function e3(){return xe.lFrame.elementDepthCount}function t3(){xe.lFrame.elementDepthCount++}function n3(){xe.lFrame.elementDepthCount--}function ck(){return xe.bindingsEnabled}function $u(){return xe.skipHydrationRootTNode!==null}function r3(n){return xe.skipHydrationRootTNode===n}function i3(n){xe.skipHydrationRootTNode=n}function s3(){xe.skipHydrationRootTNode=null}function Ye(){return xe.lFrame.lView}function hn(){return xe.lFrame.tView}function ke(n){return xe.lFrame.contextLView=n,n[Hn]}function Ne(n){return xe.lFrame.contextLView=null,n}function Qn(){let n=uk();for(;n!==null&&n.type===64;)n=n.parent;return n}function uk(){return xe.lFrame.currentTNode}function o3(){let n=xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ch(n,e){let t=xe.lFrame;t.currentTNode=n,t.isParent=e}function lk(){return xe.lFrame.isParent}function dk(){xe.lFrame.isParent=!1}function a3(){return xe.lFrame.contextLView}function hk(){return TE}function OP(n){let e=TE;return TE=n,e}function c3(){let n=xe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function u3(){return xe.lFrame.bindingIndex}function l3(n){return xe.lFrame.bindingIndex=n}function Wm(){return xe.lFrame.bindingIndex++}function fb(n){let e=xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function d3(){return xe.lFrame.inI18n}function h3(n,e){let t=xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,CE(e)}function f3(){return xe.lFrame.currentDirectiveIndex}function CE(n){xe.lFrame.currentDirectiveIndex=n}function p3(n){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fk(n){xe.lFrame.currentQueryIndex=n}function g3(n){let e=n[we];return e.type===2?e.declTNode:e.type===1?n[Kn]:null}function pk(n,e,t){if(t&Re.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Re.Host);)if(i=g3(s),i===null||(s=s[zu],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=xe.lFrame=gk();return r.currentTNode=e,r.lView=n,!0}function pb(n){let e=gk(),t=n[we];xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gk(){let n=xe.lFrame,e=n===null?null:n.child;return e===null?mk(n):e}function mk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yk(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _k=yk;function gb(){let n=yk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function m3(n){return(xe.lFrame.contextLView=Z$(n,xe.lFrame.contextLView))[Hn]}function vo(){return xe.lFrame.selectedIndex}function Ua(n){xe.lFrame.selectedIndex=n}function Km(){let n=xe.lFrame;return Hm(n.tView,n.selectedIndex)}function vk(){return xe.lFrame.currentNamespace}var wk=!0;function mb(){return wk}function wo(n){wk=n}function y3(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Zx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Ik(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function rm(n,e,t){Ek(n,e,3,t)}function im(n,e,t,r){(n[Te]&3)===t&&Ek(n,e,t,r)}function tE(n,e){let t=n[Te];(t&3)===e&&(t&=16383,t+=1,n[Te]=t)}function Ek(n,e,t,r){let i=r!==void 0?n[Du]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Du]+=65536),(a<s||s==-1)&&(_3(n,t,e,c),n[Du]=(n[Du]&4294901760)+c+2),c++}function LP(n,e){tt(4,n,e);let t=Le(null);try{e.call(n)}finally{Le(t),tt(5,n,e)}}function _3(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Te]>>14<n[Du]>>16&&(n[Te]&3)===e&&(n[Te]+=16384,LP(a,s)):LP(a,s)}var Pu=-1,Ba=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function v3(n){return(n.flags&8)!==0}function w3(n){return(n.flags&16)!==0}function I3(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];E3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function bk(n){return n===3||n===4||n===6}function E3(n){return n.charCodeAt(0)===64}function vh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?FP(n,t,i,null,e[++r]):FP(n,t,i,null,null))}}return n}function FP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Tk(n){return n!==Pu}function wm(n){return n&32767}function b3(n){return n>>16}function Im(n,e){let t=b3(n),r=e;for(;t>0;)r=r[zu],t--;return r}var DE=!0;function Em(n){let e=DE;return DE=n,e}var T3=256,Ck=T3-1,Dk=5,C3=0,mi={};function D3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(gh)&&(r=t[gh]),r==null&&(r=t[gh]=C3++);let i=r&Ck,s=1<<i;e.data[n+(i>>Dk)]|=s}function bm(n,e){let t=Sk(n,e);if(t!==-1)return t;let r=e[we];r.firstCreatePass&&(n.injectorIndex=e.length,nE(r.data,n),nE(e,null),nE(r.blueprint,null));let i=yb(n,e),s=n.injectorIndex;if(Tk(i)){let o=wm(i),a=Im(i,e),c=a[we].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function nE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Sk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function yb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=xk(i),r===null)return Pu;if(t++,i=i[zu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Pu}function SE(n,e,t){D3(n,e,t)}function S3(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(bk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Ak(n,e,t){if(t&Re.Optional||n!==void 0)return n;sb(e,"NodeInjector")}function Rk(n,e,t,r){if(t&Re.Optional&&r===void 0&&(r=null),(t&(Re.Self|Re.Host))===0){let i=n[yi],s=zn(void 0);try{return i?i.get(e,r,t&Re.Optional):Ox(e,r,t&Re.Optional)}finally{zn(s)}}return Ak(r,e,t)}function Mk(n,e,t,r=Re.Default,i){if(n!==null){if(e[Te]&2048&&!(r&Re.Self)){let o=x3(n,e,t,r,mi);if(o!==mi)return o}let s=Pk(n,e,t,r,mi);if(s!==mi)return s}return Rk(e,t,r,i)}function Pk(n,e,t,r,i){let s=M3(t);if(typeof s=="function"){if(!pk(e,n,r))return r&Re.Host?Ak(i,t,r):Rk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Re.Optional))sb(t);else return o}finally{_k()}}else if(typeof s=="number"){let o=null,a=Sk(n,e),c=Pu,d=r&Re.Host?e[Gn][Kn]:null;for((a===-1||r&Re.SkipSelf)&&(c=a===-1?yb(n,e):e[a+8],c===Pu||!UP(r,!1)?a=-1:(o=e[we],a=wm(c),e=Im(c,e)));a!==-1;){let h=e[we];if(VP(s,a,h.data)){let g=A3(a,e,t,o,r,d);if(g!==mi)return g}c=e[a+8],c!==Pu&&UP(r,e[we].data[a+8]===d)&&VP(s,a,e)?(o=h,a=wm(c),e=Im(c,e)):a=-1}}return i}function A3(n,e,t,r,i,s){let o=e[we],a=o.data[n+8],c=r==null?$a(a)&&DE:r!=o&&(a.type&3)!==0,d=i&Re.Host&&s===a,h=R3(a,o,t,c,d);return h!==null?Tm(e,o,h,a,i):mi}function R3(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,I=i?a+h:d;for(let E=g;E<I;E++){let M=o[E];if(E<c&&t===M||E>=c&&M.type===t)return E}if(i){let E=o[c];if(E&&_i(E)&&E.type===t)return c}return null}function Tm(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ba){let a=s;a.resolving&&kx(I$(o[t]));let c=Em(a.canSeeViewProviders);a.resolving=!0;let d,h=a.injectImpl?zn(a.injectImpl):null,g=pk(n,r,Re.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&y3(t,o[t],e)}finally{h!==null&&zn(h),Em(c),a.resolving=!1,_k()}}return s}function M3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gh)?n[gh]:void 0;return typeof e=="number"?e>=0?e&Ck:P3:e}function VP(n,e,t){let r=1<<n;return!!(t[e+(n>>Dk)]&r)}function UP(n,e){return!(n&Re.Self)&&!(n&Re.Host&&e)}var Oa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Mk(this._tNode,this._lView,e,zm(r),t)}};function P3(){return new Oa(Qn(),Ye())}function Io(n){return Eh(()=>{let e=n.prototype.constructor,t=e[lm]||AE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[lm]||AE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function AE(n){return Ax(n)?()=>{let e=AE(Mn(n));return e&&e()}:La(n)}function x3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Te]&2048&&!_h(o);){let a=Pk(s,o,t,r|Re.Self,mi);if(a!==mi)return a;let c=s.parent;if(!c){let d=o[Kx];if(d){let h=d.get(t,mi,r);if(h!==mi)return h}c=xk(o),o=o[zu]}s=c}return i}function xk(n){let e=n[we],t=e.type;return t===2?e.declTNode:t===1?n[Kn]:null}function _b(n){return S3(Qn(),n)}function BP(n,e=null,t=null,r){let i=kk(n,e,t,r);return i.resolveInjectorInitializers(),i}function kk(n,e=null,t=null,r,i=new Set){let s=[t||$n,N$(n)];return r=r||(typeof n=="object"?void 0:qn(n)),new mh(s,e||lb(),r||null,i)}var Dt=class n{static THROW_IF_NOT_FOUND=Na;static NULL=new pm;static create(e,t){if(Array.isArray(e))return BP({name:""},t,e,"");{let r=e.name??"";return BP({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>ce(Vx)});static __NG_ELEMENT_ID__=-1};var k3=new Q("");k3.__NG_ELEMENT_ID__=n=>{let e=Qn();if(e===null)throw new ne(204,!1);if(e.type&2)return e.value;if(n&Re.Optional)return null;throw new ne(204,!1)};var Nk=!1,qu=(()=>{class n{static __NG_ELEMENT_ID__=N3;static __NG_ENV_ID__=t=>t}return n})(),RE=class extends qu{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return qa(t)?(e(),()=>{}):(sk(t,e),()=>X$(t,e))}};function N3(){return new RE(Ye())}var ja=class{},Qm=new Q("",{providedIn:"root",factory:()=>!1});var Ok=new Q(""),Lk=new Q(""),ls=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new xt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),O3=(()=>{class n{internalPendingTasks=B(ls);scheduler=B(ja);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return b(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),ME=class extends Tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Gx()&&(this.destroyRef=B(qu,{optional:!0})??void 0,this.pendingTasks=B(ls,{optional:!0})??void 0)}emit(e){let t=Le(null);try{super.next(e)}finally{Le(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Pt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},lt=ME;function Cm(...n){}function Fk(n){let e,t;function r(){n=Cm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function jP(n){return queueMicrotask(()=>n()),()=>{n=Cm}}var vb="isAngularZone",Dm=vb+"_ID",L3=0,Pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new lt(!1);onMicrotaskEmpty=new lt(!1);onStable=new lt(!1);onError=new lt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Nk}=e;if(typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,U3(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(vb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ne(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,F3,Cm,Cm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},F3={};function wb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function V3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Fk(()=>{n.callbackScheduled=!1,PE(n),n.isCheckStableRunning=!0,wb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),PE(n)}function U3(n){let e=()=>{V3(n)},t=L3++;n._inner=n._inner.fork({name:"angular",properties:{[vb]:!0,[Dm]:t,[Dm+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(B3(c))return r.invokeTask(s,o,a,c);try{return zP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$P(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return zP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!j3(c)&&e(),$P(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,PE(n),wb(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function PE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function zP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $P(n){n._nesting--,wb(n)}var xE=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new lt;onMicrotaskEmpty=new lt;onStable=new lt;onError=new lt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function B3(n){return Vk(n,"__ignore_ng_zone__")}function j3(n){return Vk(n,"__scheduler_tick__")}function Vk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var wi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},z3=new Q("",{providedIn:"root",factory:()=>{let n=B(Pe),e=B(wi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qP(n,e){return Dx(n,e)}function $3(n){return Dx(Cx,n)}var Uk=(qP.required=$3,qP);function q3(){return Ym(Qn(),Ye())}function Ym(n,e){return new ur(qr(n,e))}var ur=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=q3}return n})();function H3(n){return typeof n=="function"&&n[yr]!==void 0}function Hu(n,e){let t=SI(n,e?.equal),r=t[yr];return t.set=i=>ah(r,i),t.update=i=>AI(r,i),t.asReadonly=G3.bind(t),t}function G3(){let n=this[yr];if(n.readonlyFn===void 0){let e=()=>this();e[yr]=n,n.readonlyFn=e}return n.readonlyFn}function Bk(n){return H3(n)&&typeof n.set=="function"}var W3="ngSkipHydration",K3="ngskiphydration";function jk(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===K3)return!0}return!1}function zk(n){return n.hasAttribute(W3)}function Sm(n){return(n.flags&128)===128}function Q3(n){if(Sm(n))return!0;let e=n.parent;for(;e;){if(Sm(n)||jk(e))return!0;e=e.parent}return!1}var $k=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($k||{}),qk=new Map,Y3=0;function J3(){return Y3++}function Z3(n){qk.set(n[qm],n)}function kE(n){qk.delete(n[qm])}var HP="__ngContext__";function Dh(n,e){Br(e)?(n[HP]=e[qm],Z3(e)):n[HP]=e}function Hk(n){return Wk(n[yh])}function Gk(n){return Wk(n[Ur])}function Wk(n){for(;n!==null&&!Ei(n);)n=n[Ur];return n}var NE;function Kk(n){NE=n}function Jm(){if(NE!==void 0)return NE;if(typeof document<"u")return document;throw new ne(210,!1)}var rs=new Q("",{providedIn:"root",factory:()=>X3}),X3="ng",Ib=new Q(""),bi=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Eb=new Q("",{providedIn:"root",factory:()=>Jm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function eq(){let n=new Gu;return n.store=tq(Jm(),B(rs)),n}var Gu=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:eq});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function tq(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Qk="h",Yk="b",nq="f",rq="n",iq="e",sq="t",bb="c",Jk="x",Am="r",oq="i",aq="n",Zk="d";var cq="di",uq="s",lq="p";var Zg=new Q(""),Xk=!1,eN=new Q("",{providedIn:"root",factory:()=>Xk});var tN=new Q(""),dq=!1,hq=new Q(""),GP=new Q("",{providedIn:"root",factory:()=>new Map}),Tb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Tb||{}),Wu=new Q(""),WP=new Set;function Ti(n){WP.has(n)||(WP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var nN=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=fq}return n})();function fq(){return new nN(Ye(),Qn())}var Su=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Su||{}),rN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),pq=[Su.EarlyRead,Su.Write,Su.MixedReadWrite,Su.Read],gq=(()=>{class n{ngZone=B(Pe);scheduler=B(ja);errorHandler=B(wi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){B(Wu,{optional:!0})}execute(){let t=this.sequences.size>0;t&&tt(16),this.executing=!0;for(let r of pq)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&tt(17)}register(t){let{view:r}=t;r!==void 0?((r[Mu]??=[]).push(t),Th(r),r[Te]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Tb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),OE=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Mu];e&&(this.view[Mu]=e.filter(t=>t!==this))}};function Zm(n,e){!e?.injector&&Wx(Zm);let t=e?.injector??B(Dt);return Ti("NgAfterNextRender"),yq(n,t,e,!0)}function mq(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function yq(n,e,t,r){let i=e.get(rN);i.impl??=e.get(gq);let s=e.get(Wu,null,{optional:!0}),o=t?.phase??Su.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(qu):null,c=e.get(nN,null,{optional:!0}),d=new OE(i.impl,mq(n,o),c?.view,r,a,s?.snapshot(null));return i.impl.register(d),d}var ir=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(ir||{}),KP=0,_q=1,Jt=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(Jt||{});var vq=0,Xm=1;var wq=4,Iq=5;var Eq=7,xu=8,bq=9,iN=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(iN||{});function sm(n,e){let t=Cq(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function Tq(n){sm(1,n),sm(0,n),sm(2,n)}function Cq(n){let e=wq;return n===1?e=Iq:n===2&&(e=bq),e}function sN(n){return n+1}function Sh(n,e){let t=n[we],r=sN(e.index);return n[r]}function ey(n,e){let t=sN(e.index);return n.data[t]}function Dq(n,e,t){let r=e[we],i=ey(r,t);switch(n){case Jt.Complete:return i.primaryTmplIndex;case Jt.Loading:return i.loadingTmplIndex;case Jt.Error:return i.errorTmplIndex;case Jt.Placeholder:return i.placeholderTmplIndex;default:return null}}function QP(n,e){return e===Jt.Placeholder?n.placeholderBlockConfig?.[KP]??null:e===Jt.Loading?n.loadingBlockConfig?.[KP]??null:null}function Sq(n){return n.loadingBlockConfig?.[_q]??null}function YP(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function Aq(n,e){let t=e.primaryTmplIndex+Ct;return Hm(n,t)}var ty="ngb";var Rq=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,s=i.get(e)??[];s.push(t),i.set(e,s),r.__jsaction_fns=i},Mq=(n,e)=>{let t=n,r=t.getAttribute(ty)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var Pq=n=>{n.removeAttribute(GI.JSACTION),n.removeAttribute(ty),n.__jsaction_fns=void 0},xq=new Q("",{providedIn:"root",factory:()=>({})});function oN(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var LE=new Map;function kq(n,e){return LE.set(n,e),()=>LE.delete(n)}var JP=!1,aN=(n,e,t,r)=>{};function Nq(n,e,t,r){aN(n,e,t,r)}function Oq(){JP||(aN=(n,e,t,r)=>{let i=n[yi].get(rs);LE.get(i)?.(e,t,r)},JP=!0)}var Cb=new Q("");var Lq="__nghData__",cN=Lq,Fq="__nghDeferData__",Vq=Fq,rE="ngh",Uq="nghm",uN=()=>null;function Bq(n,e,t=!1){let r=n.getAttribute(rE);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let h=e.get(Gu,null,{optional:!0});h!==null&&(c=h.get(cN,[])[Number(r)])}let d={data:c,firstChild:n.firstChild??null};return t&&(d.firstChild=n,ny(d,0,n.nextSibling)),a?n.setAttribute(rE,a):n.removeAttribute(rE),d}function jq(){uN=Bq}function lN(n,e,t=!1){return uN(n,e,t)}function zq(n){let e=n._lView;return e[we].type===2?null:(_h(e)&&(e=e[Ct]),e)}function $q(n){return n.textContent?.replace(/\s/gm,"")}function qq(n){let e=Jm(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=$q(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function ny(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function FE(n,e){return n.segmentHeads?.[e]??null}function Hq(n){return n.get(hq,!1,{optional:!0})}function Gq(n,e){let t=n.data,r=t[iq]?.[e]??null;return r===null&&t[bb]?.[e]&&(r=Db(n,e)),r}function dN(n,e){return n.data[bb]?.[e]??null}function Db(n,e){let t=dN(n,e)??[],r=0;for(let i of t)r+=i[Am]*(i[Jk]??1);return r}function Wq(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[Zk];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ah(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[Zk];n.disconnectedNodes=t?new Set(t):null}return!!Wq(n)?.has(e)}function Kq(n,e){let t=e.get(Cb),i=e.get(Gu).get(Vq,{}),s=!1,o=n,a=null,c=[];for(;!s&&o;){s=t.has(o);let d=t.hydrating.get(o);if(a===null&&d!=null){a=d.promise;break}c.unshift(o),o=i[o][lq]}return{parentBlockPromise:a,hydrationQueue:c}}function iE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Uq}function ZP(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function Qq(n){for(let r of n.body.childNodes)if(iE(r))return;let e=ZP(n.body.previousSibling);if(iE(e))return;let t=ZP(n.head.lastChild);if(!iE(t))throw new ne(-507,!1)}function hN(n,e){let t=n.contentQueries;if(t!==null){let r=Le(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];fk(s),a.contentQueries(2,e[o],o)}}}finally{Le(r)}}}function VE(n,e,t){fk(0);let r=Le(null);try{e(n,t)}finally{Le(r)}}function fN(n,e,t){if(Yx(e)){let r=Le(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Le(r)}}}var Ii=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ii||{});var Xg;function Yq(){if(Xg===void 0&&(Xg=null,um.trustedTypes))try{Xg=um.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xg}function XP(n){return Yq()?.createScriptURL(n)||n}var Rm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tx})`}};function Ku(n){return n instanceof Rm?n.changingThisBreaksApplicationSecurity:n}function Sb(n,e){let t=Jq(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Tx})`)}return t===e}function Jq(n){return n instanceof Rm&&n.getTypeName()||null}var Zq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pN(n){return n=String(n),n.match(Zq)?n:"unsafe:"+n}var ry=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ry||{});function Eo(n){let e=mN();return e?e.sanitize(ry.URL,n)||"":Sb(n,"URL")?Ku(n):pN(Nu(n))}function Xq(n){let e=mN();if(e)return XP(e.sanitize(ry.RESOURCE_URL,n)||"");if(Sb(n,"ResourceURL"))return XP(Ku(n));throw new ne(904,!1)}function e6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Xq:Eo}function gN(n,e,t){return e6(e,t)(n)}function mN(){let n=Ye();return n&&n[is].sanitizer}var t6=/^>|^->|<!--|-->|--!>|<!-$/g,n6=/(<|>)/g,r6="\u200B$1\u200B";function i6(n){return n.replace(t6,e=>e.replace(n6,r6))}function s6(n){return n.ownerDocument.body}function yN(n){return n instanceof Function?n():n}function o6(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var _N="ng-template";function a6(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&o6(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ab(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ab(n){return n.type===4&&n.value!==_N}function c6(n,e,t){let r=n.type===4&&!t?_N:n.value;return e===r}function u6(n,e,t){let r=4,i=n.attrs,s=i!==null?h6(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Fr(r)&&!Fr(c))return!1;if(o&&Fr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!c6(n,c,t)||c===""&&e.length===1){if(Fr(r))return!1;o=!0}}else if(r&8){if(i===null||!a6(n,i,c,t)){if(Fr(r))return!1;o=!0}}else{let d=e[++a],h=l6(c,i,Ab(n),t);if(h===-1){if(Fr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Fr(r))return!1;o=!0}}}}return Fr(r)||o}function Fr(n){return(n&1)===0}function l6(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return f6(e,n)}function vN(n,e,t=!1){for(let r=0;r<e.length;r++)if(u6(n,e[r],t))return!0;return!1}function d6(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function h6(n){for(let e=0;e<n.length;e++){let t=n[e];if(bk(t))return e}return n.length}function f6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function p6(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ex(n,e){return n?":not("+e.trim()+")":e}function g6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Fr(o)&&(e+=ex(s,i),i=""),r=o,s=s||!Fr(r);t++}return i!==""&&(e+=ex(s,i)),e}function m6(n){return n.map(g6).join(",")}function y6(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Fr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var vr={};function wN(n,e){return n.createText(e)}function _6(n,e,t){n.setValue(e,t)}function IN(n,e){return n.createComment(i6(e))}function Rb(n,e,t){return n.createElement(e,t)}function Mm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function EN(n,e,t){n.appendChild(e,t)}function tx(n,e,t,r,i){r!==null?Mm(n,e,t,r,i):EN(n,e,t)}function Mb(n,e,t){n.removeChild(null,e,t)}function bN(n){n.textContent=""}function v6(n,e,t){n.setAttribute(e,"style",t)}function w6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function TN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&I3(n,e,r),i!==null&&w6(n,e,i),s!==null&&v6(n,e,s)}function Pb(n,e,t,r,i,s,o,a,c,d,h){let g=Ct+r,I=g+i,E=I6(g,I),M=typeof d=="function"?d():d;return E[we]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:h}}function I6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:vr);return t}function E6(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Pb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function xb(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[or]=i,g[Te]=r|4|128|8|64|1024,(d!==null||n&&n[Te]&2048)&&(g[Te]|=2048),rk(g),g[sn]=g[zu]=n,g[Hn]=t,g[is]=o||n&&n[is],g[at]=a||n&&n[at],g[yi]=c||n&&n[yi]||null,g[Kn]=s,g[qm]=J3(),g[jr]=h,g[Kx]=d,g[Gn]=e.type==2?n[Gn]:g,g}function b6(n,e,t){let r=qr(e,n),i=E6(t),s=n[is].rendererFactory,o=kb(n,xb(n,i,null,CN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function CN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function DN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kb(n,e){return n[yh]?n[kP][Ur]=e:n[yh]=e,n[kP]=e,e}function j(n=1){SN(hn(),Ye(),vo()+n,!1)}function SN(n,e,t,r){if(!r)if((e[Te]&3)===3){let s=n.preOrderCheckHooks;s!==null&&rm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&im(e,s,0,t)}Ua(t)}var iy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(iy||{});function UE(n,e,t,r){let i=Le(null);try{let[s,o,a]=n.inputs[t],c=null;(o&iy.SignalBased)!==0&&(c=e[s][yr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):Jx(e,c,s,r)}finally{Le(i)}}function AN(n,e,t,r,i){let s=vo(),o=r&2;try{Ua(-1),o&&e.length>Ct&&SN(n,e,Ct,!1),tt(o?2:0,i),t(r,i)}finally{Ua(s),tt(o?3:1,i)}}function Nb(n,e,t){M6(n,e,t),(t.flags&64)===64&&P6(n,e,t)}function RN(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function T6(n,e,t,r){let s=r.get(eN,Xk)||t===Ii.ShadowDom,o=n.selectRootElement(e,s);return C6(o),o}function C6(n){MN(n)}var MN=()=>null;function D6(n){zk(n)?bN(n):qq(n)}function S6(){MN=D6}function A6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Ob(n,e,t,r,i,s,o,a){if(!a&&Fb(e,n,t,r,i)){$a(e)&&R6(t,e.index);return}if(e.type&3){let c=qr(e,t);r=A6(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)}else e.type&12}function R6(n,e){let t=vi(e,n);t[Te]&16||(t[Te]|=64)}function M6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$a(t)&&b6(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||bm(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Tm(e,n,o,t);if(Dh(c,e),s!==null&&O6(e,o-r,c,a,t,s),_i(a)){let d=vi(t.index,e);d[Hn]=Tm(e,n,o,t)}}}function P6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=f3();try{Ua(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];CE(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&x6(c,d)}}finally{Ua(-1),CE(o)}}function x6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function PN(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];vN(e,s.selectors,!1)&&(r??=[],_i(s)?r.unshift(s):r.push(s))}return r}function k6(n,e,t,r,i,s){let o=qr(n,e);N6(e[at],o,s,n.value,t,r,i)}function N6(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Nu(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function O6(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];UE(r,t,c,d)}}function Lb(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function Fb(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];UE(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];UE(h,d,r,i),a=!0}return a}function L6(n,e){let t=vi(e,n),r=t[we];F6(r,t);let i=t[or];i!==null&&t[jr]===null&&(t[jr]=lN(i,t[yi])),tt(18),Vb(r,t,t[Hn]),tt(19,t[Hn])}function F6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Vb(n,e,t){pb(e);try{let r=n.viewQuery;r!==null&&VE(1,r,t);let i=n.template;i!==null&&AN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fu]?.finishViewCreation(n),n.staticContentQueries&&hN(n,e),n.staticViewQueries&&VE(2,n.viewQuery,t);let s=n.components;s!==null&&V6(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Te]&=-5,gb()}}function V6(n,e){for(let t=0;t<e.length;t++)L6(n,e[t])}function Ub(n,e,t,r){let i=Le(null);try{let s=e.tView,a=n[Te]&4096?4096:16,c=xb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Lu]=d;let h=n[Fu];return h!==null&&(c[Fu]=h.createEmbeddedView(s)),Vb(s,c,t),c}finally{Le(i)}}function Pm(n,e){return!e||e.firstChild===null||Sm(n)}var U6;function Bb(n,e){return U6(n,e)}var as=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(as||{});function Ha(n){return(n.flags&32)===32}function Au(n,e,t,r,i){if(r!=null){let s,o=!1;Ei(r)?s=r:Br(r)&&(o=!0,r=r[or]);let a=zr(r);n===0&&t!==null?i==null?EN(e,t,a):Mm(e,t,a,i||null,!0):n===1&&t!==null?Mm(e,t,a,i||null,!0):n===2?Mb(e,a,o):n===3&&e.destroyNode(a),s!=null&&Q6(e,n,s,t,i)}}function B6(n,e){xN(n,e),e[or]=null,e[Kn]=null}function j6(n,e,t,r,i,s){r[or]=i,r[Kn]=e,sy(n,r,t,1,i,s)}function xN(n,e){e[is].changeDetectionScheduler?.notify(9),sy(n,e,e[at],2,null,null)}function z6(n){let e=n[yh];if(!e)return sE(n[we],n);for(;e;){let t=null;if(Br(e))t=e[yh];else{let r=e[sr];r&&(t=r)}if(!t){for(;e&&!e[Ur]&&e!==n;)Br(e)&&sE(e[we],e),e=e[sn];e===null&&(e=n),Br(e)&&sE(e[we],e),t=e&&e[Ur]}e=t}}function jb(n,e){let t=n[_m],r=t.indexOf(e);t.splice(r,1)}function zb(n,e){if(qa(e))return;let t=e[at];t.destroyNode&&sy(n,e,t,3,null,null),z6(e)}function sE(n,e){if(qa(e))return;let t=Le(null);try{e[Te]&=-129,e[Te]|=256,e[_r]&&TI(e[_r]),q6(n,e),$6(n,e),e[we].type===1&&e[at].destroy();let r=e[Lu];if(r!==null&&Ei(e[sn])){r!==e[sn]&&jb(r,e);let i=e[Fu];i!==null&&i.detachView(n)}kE(e)}finally{Le(t)}}function $6(n,e){let t=n.cleanup,r=e[gm];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[gm]=null);let i=e[go];if(i!==null){e[go]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[mm];if(s!==null){e[mm]=null;for(let o of s)o.destroy()}}function q6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ba)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];tt(4,a,c);try{c.call(a)}finally{tt(5,a,c)}}else{tt(4,i,s);try{s.call(i)}finally{tt(5,i,s)}}}}}function kN(n,e,t){return H6(n,e.parent,t)}function H6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[or];if($a(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ii.None||i===Ii.Emulated)return null}return qr(r,t)}function NN(n,e,t){return W6(n,e,t)}function G6(n,e,t){return n.type&40?qr(n,t):null}var W6=G6,nx;function $b(n,e,t,r){let i=kN(n,r,e),s=e[at],o=r.parent||e[Kn],a=NN(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)tx(s,i,t[c],a,!1);else tx(s,i,t,a,!1);nx!==void 0&&nx(s,r,e,t,i)}function ph(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return BE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ph(n,r);{let i=n[e.index];return Ei(i)?BE(-1,i):zr(i)}}else{if(t&128)return ph(n,e.next);if(t&32)return Bb(e,n)()||zr(n[e.index]);{let r=ON(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Va(n[Gn]);return ph(i,r)}else return ph(n,e.next)}}}return null}function ON(n,e){if(e!==null){let r=n[Gn][Kn],i=e.projection;return r.projection[i]}return null}function BE(n,e){let t=sr+n+1;if(t<e.length){let r=e[t],i=r[we].firstChild;if(i!==null)return ph(r,i)}return e[os]}function qb(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Dh(zr(a),r),t.flags|=2),!Ha(t))if(c&8)qb(n,e,t.child,r,i,s,!1),Au(e,n,i,a,s);else if(c&32){let d=Bb(t,r),h;for(;h=d();)Au(e,n,i,h,s);Au(e,n,i,a,s)}else c&16?LN(n,e,r,t,i,s):Au(e,n,i,a,s);t=o?t.projectionNext:t.next}}function sy(n,e,t,r,i,s){qb(t,r,n.firstChild,e,i,s,!1)}function K6(n,e,t){let r=e[at],i=kN(n,t,e),s=t.parent||e[Kn],o=NN(s,t,e);LN(r,0,e,t,i,o)}function LN(n,e,t,r,i,s){let o=t[Gn],c=o[Kn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Au(e,n,i,h,s)}else{let d=c,h=o[sn];Sm(r)&&(d.flags|=128),qb(n,e,d,h,i,s,!0)}}function Q6(n,e,t,r,i){let s=t[os],o=zr(t);s!==o&&Au(e,n,r,s,i);for(let a=sr;a<t.length;a++){let c=t[a];sy(c[we],c,n,e,r,s)}}function Y6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:as.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=as.Important),n.setStyle(t,r,i,s))}}function xm(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(zr(s)),Ei(s)&&J6(s,r);let o=t.type;if(o&8)xm(n,e,t.child,r);else if(o&32){let a=Bb(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ON(e,t);if(Array.isArray(a))r.push(...a);else{let c=Va(e[Gn]);xm(c[we],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function J6(n,e){for(let t=sr;t<n.length;t++){let r=n[t],i=r[we].firstChild;i!==null&&xm(r[we],r,i,e)}n[os]!==n[or]&&e.push(n[os])}function FN(n){if(n[Mu]!==null){for(let e of n[Mu])e.impl.addSequence(e);n[Mu].length=0}}var VN=[];function Z6(n){return n[_r]??X6(n)}function X6(n){let e=VN.pop()??Object.create(t5);return e.lView=n,e}function e5(n){n.lView[_r]!==n&&(n.lView=null,VN.push(n))}var t5=ae(z({},sh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Th(n.lView)},consumerOnSignalRead(){this.lView[_r]=this}});function n5(n){let e=n[_r]??Object.create(r5);return e.lView=n,e}var r5=ae(z({},sh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Va(n.lView);for(;e&&!UN(e[we]);)e=Va(e);e&&ik(e)},consumerOnSignalRead(){this.lView[_r]=this}});function UN(n){return n.type!==2}function BN(n){if(n[mm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[mm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Te]&8192)}}var i5=100;function jN(n,e=!0,t=0){let i=n[is].rendererFactory,s=!1;s||i.begin?.();try{s5(n,t)}catch(o){throw e&&Lb(n,o),o}finally{s||i.end?.()}}function s5(n,e){let t=hk();try{OP(!0),jE(n,e);let r=0;for(;Gm(n);){if(r===i5)throw new ne(103,!1);r++,jE(n,1)}}finally{OP(t)}}function o5(n,e,t,r){if(qa(e))return;let i=e[Te],s=!1,o=!1;pb(e);let a=!0,c=null,d=null;s||(UN(n)?(d=Z6(e),c=pg(d)):_I()===null?(a=!1,d=n5(e),c=pg(d)):e[_r]&&(TI(e[_r]),e[_r]=null));try{rk(e),l3(n.bindingStartIndex),t!==null&&AN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let E=n.preOrderCheckHooks;E!==null&&rm(e,E,null)}else{let E=n.preOrderHooks;E!==null&&im(e,E,0,null),tE(e,0)}if(o||a5(e),BN(e),zN(e,0),n.contentQueries!==null&&hN(n,e),!s)if(h){let E=n.contentCheckHooks;E!==null&&rm(e,E)}else{let E=n.contentHooks;E!==null&&im(e,E,1),tE(e,1)}u5(n,e);let g=n.components;g!==null&&qN(e,g,0);let I=n.viewQuery;if(I!==null&&VE(2,I,r),!s)if(h){let E=n.viewCheckHooks;E!==null&&rm(e,E)}else{let E=n.viewHooks;E!==null&&im(e,E,2),tE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[eE]){for(let E of e[eE])E();e[eE]=null}s||(FN(e),e[Te]&=-73)}catch(h){throw s||Th(e),h}finally{d!==null&&(EI(d,c),a&&e5(d)),gb()}}function zN(n,e){for(let t=Hk(n);t!==null;t=Gk(t))for(let r=sr;r<t.length;r++){let i=t[r];$N(i,e)}}function a5(n){for(let e=Hk(n);e!==null;e=Gk(e)){if(!(e[Te]&2))continue;let t=e[_m];for(let r=0;r<t.length;r++){let i=t[r];ik(i)}}}function c5(n,e,t){tt(18);let r=vi(e,n);$N(r,t),tt(19,r[Hn])}function $N(n,e){hb(n)&&jE(n,e)}function jE(n,e){let r=n[we],i=n[Te],s=n[_r],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&bI(s)),o||=!1,s&&(s.dirty=!1),n[Te]&=-9217,o)o5(r,n,r.template,n[Hn]);else if(i&8192){BN(n),zN(n,1);let a=r.components;a!==null&&qN(n,a,1),FN(n)}}function qN(n,e,t){for(let r=0;r<e.length;r++)c5(n,e[r],t)}function u5(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ua(~i);else{let s=i,o=t[++r],a=t[++r];h3(o,s);let c=e[s];tt(24,c),a(2,c),tt(25,c)}}}finally{Ua(-1)}}function oy(n,e){let t=hk()?64:1088;for(n[is].changeDetectionScheduler?.notify(e);n;){n[Te]|=t;let r=Va(n);if(_h(n)&&!r)return n;n=r}return null}function HN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Hb(n,e,t,r=!0){let i=e[we];if(d5(i,e,n,t),r){let o=BE(t,n),a=e[at],c=a.parentNode(n[os]);c!==null&&j6(i,n[Kn],a,e,c,o)}let s=e[jr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function l5(n,e){let t=km(n,e);return t!==void 0&&zb(t[we],t),t}function km(n,e){if(n.length<=sr)return;let t=sr+e,r=n[t];if(r){let i=r[Lu];i!==null&&i!==n&&jb(i,r),e>0&&(n[t-1][Ur]=r[Ur]);let s=fm(n,sr+e);B6(r[we],r);let o=s[Fu];o!==null&&o.detachView(s[we]),r[sn]=null,r[Ur]=null,r[Te]&=-129}return r}function d5(n,e,t,r){let i=sr+r,s=t.length;r>0&&(t[i-1][Ur]=e),r<s-sr?(e[Ur]=t[i],Fx(t,sr+r,e)):(t.push(e),e[Ur]=null),e[sn]=t;let o=e[Lu];o!==null&&t!==o&&GN(o,e);let a=e[Fu];a!==null&&a.insertView(n),bE(e),e[Te]|=128}function GN(n,e){let t=n[_m],r=e[sn];if(Br(r))n[Te]|=2;else{let i=r[sn][Gn];e[Gn]!==i&&(n[Te]|=2)}t===null?n[_m]=[e]:t.push(e)}var wh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[we];return xm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Hn]}set context(e){this._lView[Hn]=e}get destroyed(){return qa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[sn];if(Ei(e)){let t=e[ym],r=t?t.indexOf(this):-1;r>-1&&(km(e,r),fm(t,r))}this._attachedToViewContainer=!1}zb(this._lView[we],this._lView)}onDestroy(e){sk(this._lView,e)}markForCheck(){oy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){bE(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,jN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_h(this._lView),t=this._lView[Lu];t!==null&&!e&&jb(t,this._lView),xN(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;let t=_h(this._lView),r=this._lView[Lu];r!==null&&!t&&GN(r,this._lView),bE(this._lView)}};var ay=(()=>{class n{static __NG_ELEMENT_ID__=p5}return n})(),h5=ay,f5=class extends h5{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ub(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wh(i)}};function p5(){return g5(Qn(),Ye())}function g5(n,e){return n.type&4?new f5(e,n,Ym(n,e)):null}function cy(n,e,t,r,i){let s=n.data[e];if(s===null)s=m5(n,e,t,r,i),d3()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=o3();s.injectorIndex=o===null?-1:o.injectorIndex}return Ch(s,!0),s}function m5(n,e,t,r,i){let s=uk(),o=lk(),a=o?s:s&&s.parent,c=n.data[e]=_5(n,a,t,e,r,i);return y5(n,c,s,o),c}function y5(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function _5(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return $u()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var v5=new RegExp(`^(\\d+)*(${Yk}|${Qk})*(.*)`);function w5(n){let e=n.match(v5),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,d,h]of s.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(d,g)}return[o,...a]}function I5(n){return!n.prev&&n.parent?.type===8}function oE(n){return n.index-Ct}function E5(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function uy(n,e,t,r){let i=oE(r),s=E5(n,i);if(s===void 0){let o=n.data[aq];if(o?.[i])s=T5(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(I5(r)){let d=oE(r.parent);s=FE(n,d)}else{let d=qr(c,t);if(a)s=d.firstChild;else{let h=oE(c),g=FE(n,h);if(c.type===2&&g){let E=Db(n,h)+1;s=ly(E,g)}else s=d.nextSibling}}}}return s}function ly(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function b5(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case nq:t=t.firstChild;break;case rq:t=t.nextSibling;break}}return t}function T5(n,e){let[t,...r]=w5(n),i;if(t===Qk)i=e[Gn][or];else if(t===Yk)i=s6(e[Gn][or]);else{let s=Number(t);i=zr(e[s+Ct])}return b5(i,r)}var C5=!1;function D5(n){C5=n}function S5(n){let e=n[jr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[at];for(let s of r.values())A5(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function A5(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ct);i&&Mb(n,i,!1)}}function WN(n){let e=n[ss]??[],r=n[sn][at],i=[];for(let s of e)s.data[cq]!==void 0?i.push(s):KN(s,r);n[ss]=i}function R5(n){let{lContainer:e}=n,t=e[ss];if(t===null)return;let i=e[sn][at];for(let s of t)KN(s,i)}function KN(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Am];for(;t<i;){let s=r.nextSibling;Mb(e,r,!1),r=s,t++}}}function dy(n){WN(n);let e=n[or];Br(e)&&Nm(e);for(let t=sr;t<n.length;t++)Nm(n[t])}function Nm(n){S5(n);let e=n[we];for(let t=Ct;t<e.bindingStartIndex;t++)if(Ei(n[t])){let r=n[t];dy(r)}else Br(n[t])&&Nm(n[t])}function QN(n){let e=n._views;for(let t of e){let r=zq(t);r!==null&&r[or]!==null&&(Br(r)?Nm(r):dy(r))}}function M5(n,e,t,r){n!==null&&(t.cleanup(e),dy(n.lContainer),QN(r))}function P5(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Jk]??1);i++){let s={data:r,firstChild:null};r[Am]>0&&(s.firstChild=n,n=ly(r[Am],n)),t.push(s)}return[n,t]}var YN=()=>null;function x5(n,e){let t=n[ss];return!e||t===null||t.length===0?null:t[0].data[oq]===e?t.shift():(WN(n),null)}function k5(){YN=x5}function zE(n,e){return YN(n,e)}var N5=class{},JN=class{},$E=class{resolveComponentFactory(e){throw Error(`No component factory found for ${qn(e)}.`)}},hy=class{static NULL=new $E},Vu=class{},ds=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>O5()}return n})();function O5(){let n=Ye(),e=Qn(),t=vi(e.index,n);return(Br(t)?t:n)[at]}var L5=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var aE={},ku=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zm(r);let i=this.injector.get(e,aE,r);return i!==aE||t===aE?i:this.parentInjector.get(e,t,r)}};function rx(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=gE(i,a);else if(s==2){let c=a,d=e[++o];r=gE(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=Re.Default){let t=Ye();if(t===null)return ce(n,e);let r=Qn();return Mk(r,t,Mn(n),e)}function ZN(){let n="invalid";throw new Error(n)}function XN(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,c=null,d=null,h=V5(o);h===null?a=o:[a,c,d]=h,j5(n,e,t,a,s,c,d)}s!==null&&r!==null&&F5(t,r,s)}function F5(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ne(-301,!1);r.push(e[i],s)}}function V5(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&_i(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,U5(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function U5(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function B5(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function j5(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let I=0;I<a;I++){let E=r[I];!c&&_i(E)&&(c=!0,B5(n,t,I)),SE(bm(t,e),n,E.type)}W5(t,n.data.length,a);for(let I=0;I<a;I++){let E=r[I];E.providersResolver&&E.providersResolver(E)}let d=!1,h=!1,g=DN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let E=r[I];if(t.mergedAttrs=vh(t.mergedAttrs,E.hostAttrs),$5(n,t,e,g,E),G5(g,E,i),o!==null&&o.has(E)){let[F,k]=o.get(E);t.directiveToIndex.set(E.type,[g,F+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(E))&&t.directiveToIndex.set(E.type,g);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let M=E.type.prototype;!d&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}z5(n,t,s)}function z5(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ix(0,e,i,r),ix(1,e,i,r),ox(e,r,!1);else{let s=t.get(i);sx(0,e,s,r),sx(1,e,s,r),ox(e,r,!0)}}}function ix(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),eO(e,s)}}function sx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),eO(e,o)}}function eO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ox(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Ab(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function $5(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=La(i.type,!0)),o=new Ba(s,_i(i),re);n.blueprint[r]=o,t[r]=o,q5(n,e,r,DN(n,t,i.hostVars,vr),i)}function q5(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;H5(o)!=a&&o.push(a),o.push(t,r,s)}}function H5(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function G5(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function W5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tO(n,e,t,r,i,s,o,a){let c=e.consts,d=vm(c,o),h=cy(e,n,2,r,d);return s&&XN(e,t,h,vm(c,a),i),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),h.attrs!==null&&rx(h,h.attrs,!1),h.mergedAttrs!==null&&rx(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function nO(n,e){Ik(n,e),Yx(e)&&n.queries.elementEnd(e)}var Om=class extends hy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=yo(e);return new Uu(t,this.ngModule)}};function K5(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&iy.SignalBased)!==0};return i&&(s.transform=i),s})}function Q5(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Y5(n,e,t){let r=e instanceof Pn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ku(t,r):t}function J5(n){let e=n.get(Vu,null);if(e===null)throw new ne(407,!1);let t=n.get(L5,null),r=n.get(ja,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function Z5(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Rb(e,t,t==="svg"?K$:t==="math"?Q$:null)}var Uu=class extends JN{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=K5(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Q5(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=m6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){tt(22);let s=Le(null);try{let o=this.componentDef,a=r?["ng-version","19.2.15"]:y6(this.componentDef.selectors[0]),c=Pb(0,null,null,1,0,null,null,null,null,[a],null),d=Y5(o,i||this.ngModule,e),h=J5(d),g=h.rendererFactory.createRenderer(null,o),I=r?T6(g,r,o.encapsulation,d):Z5(o,g),E=xb(null,c,null,512|CN(o),null,null,h,g,d,null,lN(I,d,!0));E[Ct]=I,pb(E);let M=null;try{let F=tO(Ct,c,E,"#host",()=>[this.componentDef],!0,0);I&&(TN(g,I,F),Dh(I,E)),Nb(c,E,F),fN(c,F,E),nO(c,F),t!==void 0&&X5(F,this.ngContentSelectors,t),M=vi(F.index,E),E[Hn]=M[Hn],Vb(c,E,null)}catch(F){throw M!==null&&kE(M),kE(E),F}finally{tt(23),gb()}return new qE(this.componentType,E)}finally{Le(s)}}},qE=class extends N5{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Hm(t[we],Ct),this.location=Ym(this._tNode,t),this.instance=vi(this._tNode.index,t)[Hn],this.hostView=this.changeDetectorRef=new wh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Fb(r,i[we],i,e,t);this.previousInputValues.set(e,t);let o=vi(r.index,i);oy(o,1)}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function X5(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Qu=(()=>{class n{static __NG_ELEMENT_ID__=eH}return n})();function eH(){let n=Qn();return nH(n,Ye())}var tH=Qu,rO=class extends tH{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ym(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){let e=yb(this._hostTNode,this._hostLView);if(Tk(e)){let t=Im(e,this._hostLView),r=wm(e),i=t[we].data[r+8];return new Oa(i,t)}else return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ax(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=zE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Pm(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!q$(e),a;if(o)a=t;else{let M=t||{};a=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef}let c=o?e:new Uu(yo(e)),d=r||this.parentInjector;if(!s&&c.ngModule==null){let F=(o?d:this.parentInjector).get(Pn,null);F&&(s=F)}let h=yo(c.componentType??{}),g=zE(this._lContainer,h?.id??null),I=g?.firstChild??null,E=c.create(d,i,I,s);return this.insertImpl(E.hostView,a,Pm(this._hostTNode,g)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(J$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[sn],d=new rO(c,c[Kn],c[sn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Hb(o,i,s,r),e.attachToViewContainerRef(),Fx(cE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ax(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=km(this._lContainer,t);r&&(fm(cE(this._lContainer),t),zb(r[we],r))}detach(e){let t=this._adjustIndex(e,-1),r=km(this._lContainer,t);return r&&fm(cE(this._lContainer),t)!=null?new wh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ax(n){return n[ym]}function cE(n){return n[ym]||(n[ym]=[])}function nH(n,e){let t,r=e[n.index];return Ei(r)?t=r:(t=HN(r,e,null,n),e[n.index]=t,kb(e,t)),iO(t,e,n,r),new rO(t,n,e)}function rH(n,e){let t=n[at],r=t.createComment(""),i=qr(e,n),s=t.parentNode(i);return Mm(t,s,r,t.nextSibling(i),!1),r}var iO=sO,Gb=()=>!1;function iH(n,e,t){return Gb(n,e,t)}function sO(n,e,t,r){if(n[os])return;let i;t.type&8?i=zr(r):i=rH(e,t),n[os]=i}function sH(n,e,t){if(n[os]&&n[ss])return!0;let r=t[jr],i=e.index-Ct;if(!r||Q3(e)||Ah(r,i))return!1;let o=FE(r,i),a=r.data[bb]?.[i],[c,d]=P5(o,a);return n[os]=c,n[ss]=d,!0}function oH(n,e,t,r){Gb(n,t,e)||sO(n,e,t,r)}function aH(){iO=oH,Gb=sH}var Bu=class{},Wb=class{};var HE=class extends Bu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Om(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Bx(e);this._bootstrapComponents=yN(s.bootstrap),this._r3Injector=kk(e,t,[{provide:Bu,useValue:this},{provide:hy,useValue:this.componentFactoryResolver},...r],qn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},GE=class extends Wb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new HE(this.moduleType,e,[])}};var Lm=class extends Bu{injector;componentFactoryResolver=new Om(this);instance=null;constructor(e){super();let t=new mh([...e.providers,{provide:Bu,useValue:this},{provide:hy,useValue:this.componentFactoryResolver}],e.parent||lb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yu(n,e,t=null){return new Lm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var cH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cb(!1,t.type),i=r.length>0?Yu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(ce(Pn))})}return n})();function on(n){return Eh(()=>{let e=oO(n),t=ae(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$k.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(cH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ii.Emulated,styles:n.styles||$n,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ti("NgStandalone"),aO(t);let r=n.dependencies;return t.directiveDefs=cx(r,!1),t.pipeDefs=cx(r,!0),t.id=fH(t),t})}function uH(n){return yo(n)||jx(n)}function lH(n){return n!==null}function Hr(n){return Eh(()=>({type:n.type,bootstrap:n.bootstrap||$n,declarations:n.declarations||$n,imports:n.imports||$n,exports:n.exports||$n,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dH(n,e){if(n==null)return Fa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=iy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function hH(n){if(n==null)return Fa;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function dt(n){return Eh(()=>{let e=oO(n);return aO(e),e})}function Kb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function oO(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Fa,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||$n,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dH(n.inputs,e),outputs:hH(n.outputs),debugInfo:null}}function aO(n){n.features?.forEach(e=>e(n))}function cx(n,e){if(!n)return null;let t=e?zx:uH;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(lH)}function fH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pH(n){return Object.getPrototypeOf(n.prototype).constructor}function Gr(n){let e=pH(n.type),t=!0,r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=uE(n.inputs),o.declaredInputs=uE(n.declaredInputs),o.outputs=uE(n.outputs);let a=i.hostBindings;a&&vH(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&yH(n,c),d&&_H(n,d),gH(n,i),f$(n.outputs,i.outputs),_i(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Gr&&(t=!1)}}e=Object.getPrototypeOf(e)}mH(r)}function gH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function mH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vh(i.hostAttrs,t=vh(t,i.hostAttrs))}}function uE(n){return n===Fa?{}:n===$n?[]:n}function yH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function _H(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function vH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cO(n){return IH(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function wH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function IH(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function EH(n,e,t){return n[e]=t}function cs(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function bH(n,e,t,r){let i=cs(n,e,t);return cs(n,e+1,r)||i}function TH(n,e,t,r,i,s,o,a,c){let d=e.consts,h=cy(e,n,4,o||null,a||null);ck()&&XN(e,t,h,vm(d,c),PN),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),Ik(e,h);let g=h.tView=Pb(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function uO(n,e,t,r,i,s,o,a,c,d){let h=t+Ct,g=e.firstCreatePass?TH(h,e,n,r,i,s,o,a,c):e.data[h];Ch(g,!1);let I=lO(e,n,g,t);mb()&&$b(e,n,I,g),Dh(I,n);let E=HN(I,n,I,g);return n[h]=E,kb(n,E),iH(E,g,n),db(g)&&Nb(e,n,g),c!=null&&RN(n,g,d),g}function Ve(n,e,t,r,i,s,o,a){let c=Ye(),d=hn(),h=vm(d.consts,s);return uO(c,d,n,e,t,r,i,h,o,a),Ve}var lO=dO;function dO(n,e,t,r){return wo(!0),e[at].createComment("")}function CH(n,e,t,r){let i=e[jr],s=!i||$u()||Ha(t)||Ah(i,r);if(wo(s),s)return dO(n,e);let o=i.data[sq]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=uy(i,n,e,t);ny(i,r,a);let c=Db(i,r);return ly(c,a)}function DH(){lO=CH}var SH=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,s){if(!this.cachedInjectors.has(t)){let o=i.length>0?Yu(i,r,s):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var AH=new Q("");function lE(n,e,t){return n.get(SH).getOrCreateInjector(e,n,t,"")}function RH(n,e,t){if(n instanceof ku){let i=n.injector,s=n.parentInjector,o=lE(s,e,t);return new ku(i,o)}let r=n.get(Pn);if(r!==n){let i=lE(r,e,t);return new ku(n,i)}return lE(n,e,t)}function Ru(n,e,t,r=!1){let i=t[sn],s=i[we];if(qa(i))return;let o=Sh(i,e),a=o[Xm],c=o[Eq];if(!(c!==null&&n<c)&&ux(a,n)&&ux(o[vq]??-1,n)){let d=ey(s,e),g=!r&&!0&&(Sq(d)!==null||QP(d,Jt.Loading)!==null||QP(d,Jt.Placeholder))?xH:PH;try{g(n,o,t,e,i)}catch(I){Lb(i,I)}}}function MH(n,e){let t=n[ss]?.findIndex(i=>i.data[uq]===e[Xm])??-1;return{dehydratedView:t>-1?n[ss][t]:null,dehydratedViewIx:t}}function PH(n,e,t,r,i){tt(20);let s=Dq(n,i,r);if(s!==null){e[Xm]=n;let o=i[we],a=s+Ct,c=Hm(o,a),d=0;l5(t,d);let h;if(n===Jt.Complete){let M=ey(o,r),F=M.providers;F&&F.length>0&&(h=RH(i[yi],M,F))}let{dehydratedView:g,dehydratedViewIx:I}=MH(t,e),E=Ub(i,c,null,{injector:h,dehydratedView:g});if(Hb(t,E,d,Pm(c,g)),oy(E,2),I>-1&&t[ss]?.splice(I,1),(n===Jt.Complete||n===Jt.Error)&&Array.isArray(e[xu])){for(let M of e[xu])M();e[xu]=null}}tt(21)}function ux(n,e){return n<e}function lx(n,e,t){n.loadingPromise.then(()=>{n.loadingState===ir.COMPLETE?Ru(Jt.Complete,e,t):n.loadingState===ir.FAILED&&Ru(Jt.Error,e,t)})}var xH=null;var Qb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var hO=new Q("");var kH=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new WE})}return n})(),WE=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function bo(n){return!!n&&typeof n.then=="function"}function Yb(n){return!!n&&typeof n.subscribe=="function"}var fO=new Q("");function Jb(n){return vn([{provide:fO,multi:!0,useValue:n}])}var pO=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=B(fO,{optional:!0})??[];injector=B(Dt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=ar(this.injector,i);if(bo(s))t.push(s);else if(Yb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),To=new Q("");function NH(){DI(()=>{throw new ne(600,!1)})}function OH(n){return n.isBoundToModule}var LH=10;var Wn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(z3);afterRenderManager=B(rN);zonelessEnabled=B(Qm);rootEffectScheduler=B(kH);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Tt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=B(ls).hasPendingTasks.pipe(_e(t=>!t));constructor(){B(Wu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=B(Pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Dt.NULL){tt(10);let s=t instanceof JN;if(!this._injector.get(pO).done){let E="";throw new ne(405,E)}let a;s?a=t:a=this._injector.get(hy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=OH(a)?void 0:this._injector.get(Bu),d=r||a.selector,h=a.create(i,[],d,c),g=h.location.nativeElement,I=h.injector.get(hO,null);return I?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),om(this.components,h),I?.unregisterApplication(g)}),this._loadComponent(h),tt(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){tt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Tb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ne(101,!1);let t=Le(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Le(t),this.afterTick.next(),tt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vu,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LH;)tt(14),this.synchronizeOnce(),tt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)FH(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Gm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;om(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(To,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>om(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function om(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FH(n,e,t,r){if(!t&&!Gm(n))return;jN(n,e,t&&!r?0:1)}function VH(n,e,t){let r=e[yi],i=e[we];if(n.loadingState!==ir.NOT_STARTED)return n.loadingPromise??Promise.resolve();let s=Sh(e,t),o=Aq(i,n);n.loadingState=ir.IN_PROGRESS,sm(1,s);let a=n.dependencyResolverFn,c=r.get(O3).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(d=>{let h=!1,g=[],I=[];for(let E of d)if(E.status==="fulfilled"){let M=E.value,F=yo(M)||jx(M);if(F)g.push(F);else{let k=zx(M);k&&I.push(k)}}else{h=!0;break}if(h){if(n.loadingState=ir.FAILED,n.errorTmplIndex===null){let E="",M=new ne(-750,!1);Lb(e,M)}}else{n.loadingState=ir.COMPLETE;let E=o.tView;if(g.length>0){E.directiveRegistry=YP(E.directiveRegistry,g);let M=g.map(k=>k.type),F=cb(!1,...M);n.providers=F}I.length>0&&(E.pipeRegistry=YP(E.pipeRegistry,I))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=ir.COMPLETE,c()}),n.loadingPromise)}function UH(n,e){return e[yi].get(AH,null,{optional:!0})?.behavior!==iN.Manual}function BH(n,e,t){let r=e[we],i=e[t.index];if(!UH(n,e))return;let s=Sh(e,t),o=ey(r,t);switch(Tq(s),o.loadingState){case ir.NOT_STARTED:Ru(Jt.Loading,t,i),VH(o,e,t),o.loadingState===ir.IN_PROGRESS&&lx(o,t,i);break;case ir.IN_PROGRESS:Ru(Jt.Loading,t,i),lx(o,t,i);break;case ir.COMPLETE:Ru(Jt.Complete,t,i);break;case ir.FAILED:Ru(Jt.Error,t,i);break;default:}}function jH(n,e,t){return b(this,null,function*(){let r=n.get(Cb);if(r.hydrating.has(e))return;let{parentBlockPromise:s,hydrationQueue:o}=Kq(e,n);if(o.length===0)return;s!==null&&o.shift(),qH(r,o),s!==null&&(yield s);let a=o[0];r.has(a)?yield dx(n,o,t):r.awaitParentBlock(a,()=>b(null,null,function*(){return yield dx(n,o,t)}))})}function dx(n,e,t){return b(this,null,function*(){let r=n.get(Cb),i=r.hydrating,s=n.get(ls),o=s.add();for(let c=0;c<e.length;c++){let d=e[c],h=r.get(d);if(h!=null){if(yield GH(h),yield HH(n),zH(h)){R5(h),hx(e.slice(c),r);break}i.get(d).resolve()}else{$H(c,e,r),hx(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,s.remove(o),t&&t(e),M5(r.get(a),e,r,n.get(Wn))})}function zH(n){return Sh(n.lView,n.tNode)[Xm]===Jt.Error}function $H(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&dy(i.lContainer)}function hx(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function qH(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function HH(n){return new Promise(e=>Zm(e,{injector:n}))}function GH(n){return b(this,null,function*(){let{tNode:e,lView:t}=n,r=Sh(t,e);return new Promise(i=>{WH(r,i),BH(2,t,e)})})}function WH(n,e){Array.isArray(n[xu])||(n[xu]=[]),n[xu].push(e)}function Rh(n,e,t,r){let i=Ye(),s=Wm();if(cs(i,s,e)){let o=hn(),a=Km();k6(a,i,n,e,t,r)}return Rh}function gO(n,e,t,r){return cs(n,Wm(),t)?e+Nu(t)+r:vr}function KH(n,e,t,r,i,s){let o=u3(),a=bH(n,o,t,i);return fb(2),a?e+Nu(t)+r+Nu(i)+s:vr}function em(n,e){return n<<17|e<<2}function za(n){return n>>17&32767}function QH(n){return(n&2)==2}function YH(n,e){return n&131071|e<<17}function KE(n){return n|2}function ju(n){return(n&131068)>>2}function dE(n,e){return n&-131069|e<<2}function JH(n){return(n&1)===1}function QE(n){return n|1}function ZH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=za(o),c=ju(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||bh(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let I=za(n[a+1]);n[r+1]=em(I,a),I!==0&&(n[I+1]=dE(n[I+1],r)),n[a+1]=YH(n[a+1],r)}else n[r+1]=em(a,0),a!==0&&(n[a+1]=dE(n[a+1],r)),a=r;else n[r+1]=em(c,0),a===0?a=r:n[c+1]=dE(n[c+1],r),c=r;d&&(n[r+1]=KE(n[r+1])),fx(n,h,r,!0),fx(n,h,r,!1),XH(e,h,n,r,s),o=em(a,c),s?e.classBindings=o:e.styleBindings=o}function XH(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&bh(s,e)>=0&&(t[r+1]=QE(t[r+1]))}function fx(n,e,t,r){let i=n[t+1],s=e===null,o=r?za(i):ju(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];e9(c,e)&&(a=!0,n[o+1]=r?QE(d):KE(d)),o=r?za(d):ju(d)}a&&(n[t+1]=r?KE(i):QE(i))}function e9(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bh(n,e)>=0:!1}var Vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function t9(n){return n.substring(Vr.key,Vr.keyEnd)}function n9(n){return r9(n),mO(n,yO(n,0,Vr.textEnd))}function mO(n,e){let t=Vr.textEnd;return t===e?-1:(e=Vr.keyEnd=i9(n,Vr.key=e,t),yO(n,e,t))}function r9(n){Vr.key=0,Vr.keyEnd=0,Vr.value=0,Vr.valueEnd=0,Vr.textEnd=n.length}function yO(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function i9(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Z(n,e,t){let r=Ye(),i=Wm();if(cs(r,i,e)){let s=hn(),o=Km();Ob(s,o,r,n,e,r[at],t,!1)}return Z}function YE(n,e,t,r,i){Fb(e,n,t,i?"class":"style",r)}function fy(n,e){return o9(n,e,null,!0),fy}function py(n){a9(f9,s9,n,!0)}function s9(n,e){for(let t=n9(e);t>=0;t=mO(e,t))ab(n,t9(e),!0)}function o9(n,e,t,r){let i=Ye(),s=hn(),o=fb(2);if(s.firstUpdatePass&&vO(s,n,o,r),e!==vr&&cs(i,o,e)){let a=s.data[vo()];wO(s,a,i,i[at],n,i[o+1]=g9(e,t),r,o)}}function a9(n,e,t,r){let i=hn(),s=fb(2);i.firstUpdatePass&&vO(i,null,s,r);let o=Ye();if(t!==vr&&cs(o,s,t)){let a=i.data[vo()];if(IO(a,r)&&!_O(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=gE(c,t||"")),YE(i,a,o,t,r)}else p9(i,a,o,o[at],o[s+1],o[s+1]=h9(n,e,t),r,s)}}function _O(n,e){return e>=n.expandoStartIndex}function vO(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[vo()],o=_O(n,t);IO(s,r)&&e===null&&!o&&(e=!1),e=c9(i,s,e,r),ZH(i,s,e,t,o,r)}}function c9(n,e,t,r){let i=p3(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=hE(null,n,e,t,r),t=Ih(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=hE(i,n,e,t,r),s===null){let c=u9(n,e,r);c!==void 0&&Array.isArray(c)&&(c=hE(null,n,e,c[1],r),c=Ih(c,e.attrs,r),l9(n,e,r,c))}else s=d9(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function u9(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ju(r)!==0)return n[za(r)]}function l9(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[za(i)]=r}function d9(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ih(r,o,t)}return Ih(r,e.attrs,t)}function hE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ih(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ih(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ab(n,o,t?!0:e[++s]))}return n===void 0?null:n}function h9(n,e,t){if(t==null||t==="")return $n;let r=[],i=Ku(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function f9(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ab(n,r,t)}function p9(n,e,t,r,i,s,o,a){i===vr&&(i=$n);let c=0,d=0,h=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;h!==null||g!==null;){let I=c<i.length?i[c+1]:void 0,E=d<s.length?s[d+1]:void 0,M=null,F;h===g?(c+=2,d+=2,I!==E&&(M=g,F=E)):g===null||h!==null&&h<g?(c+=2,M=h):(d+=2,M=g,F=E),M!==null&&wO(n,e,t,r,M,F,o,a),h=c<i.length?i[c]:null,g=d<s.length?s[d]:null}}function wO(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=JH(d)?px(c,e,t,i,ju(d),o):void 0;if(!Fm(h)){Fm(s)||QH(d)&&(s=px(c,null,t,i,a,o));let g=tk(vo(),t);Y6(r,o,g,i,s)}}function px(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,I=t[i+1];I===vr&&(I=g?$n:void 0);let E=g?ZI(I,r):h===r?I:void 0;if(d&&!Fm(E)&&(E=ZI(c,r)),Fm(E)&&(a=E,o))return a;let M=n[i+1];i=o?za(M):ju(M)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ZI(c,r))}return a}function Fm(n){return n!==void 0}function g9(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=qn(Ku(n)))),n}function IO(n,e){return(n.flags&(e?8:16))!==0}function P(n,e,t,r){let i=Ye(),s=hn(),o=Ct+n,a=i[at],c=s.firstCreatePass?tO(o,s,i,e,PN,ck(),t,r):s.data[o],d=EO(s,i,c,a,e,n);i[o]=d;let h=db(c);return Ch(c,!0),TN(a,d,c),!Ha(c)&&mb()&&$b(s,i,d,c),(e3()===0||h)&&Dh(d,i),t3(),h&&(Nb(s,i,c),fN(s,c,i)),r!==null&&RN(i,c),P}function x(){let n=Qn();lk()?dk():(n=n.parent,Ch(n,!1));let e=n;r3(e)&&s3(),n3();let t=hn();return t.firstCreatePass&&nO(t,e),e.classesWithoutHost!=null&&v3(e)&&YE(t,e,Ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&w3(e)&&YE(t,e,Ye(),e.stylesWithoutHost,!1),x}function Wr(n,e,t,r){return P(n,e,t,r),x(),Wr}var EO=(n,e,t,r,i,s)=>(wo(!0),Rb(r,i,vk()));function m9(n,e,t,r,i,s){let o=e[jr],a=!o||$u()||Ha(t)||Ah(o,s);if(wo(a),a)return Rb(r,i,vk());let c=uy(o,n,e,t);return dN(o,s)&&ny(o,s,c.nextSibling),o&&(jk(t)||zk(c))&&$a(t)&&(i3(t),bN(c)),c}function y9(){EO=m9}var _9=(n,e,t,r)=>(wo(!0),IN(e[at],""));function v9(n,e,t,r){let i,s=e[jr],o=!s||$u()||Ah(s,r)||Ha(t);if(wo(o),o)return IN(e[at],"");let a=uy(s,n,e,t),c=Gq(s,r);return ny(s,r,a),i=ly(c,a),i}function w9(){_9=v9}function Ft(){return Ye()}var Vm="en-US";var I9=Vm;function E9(n){typeof n=="string"&&(I9=n.toLowerCase().replace(/_/g,"-"))}function gx(n,e,t){return function r(i){if(i===Function)return t;let s=$a(n)?vi(n.index,e):e;oy(s,5);let o=e[Hn],a=mx(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=mx(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function mx(n,e,t,r){let i=Le(null);try{return tt(6,e,t),t(r)!==!1}catch(s){return b9(n,s),!1}finally{tt(7,e,t),Le(i)}}function b9(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function yx(n,e,t,r,i,s){let o=e[t],a=e[we],d=a.data[t].outputs[r],h=o[d],g=a.firstCreatePass?ak(a):null,I=ok(e),E=h.subscribe(s),M=I.length;I.push(s,E),g&&g.push(i,n.index,M,-(M+1))}function Ce(n,e,t,r){let i=Ye(),s=hn(),o=Qn();return bO(s,i,i[at],o,n,e,r),Ce}function T9(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[gm],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function bO(n,e,t,r,i,s,o){let a=db(r),d=n.firstCreatePass?ak(n):null,h=ok(e),g=!0;if(r.type&3||o){let I=qr(r,e),E=o?o(I):I,M=h.length,F=o?q=>o(zr(q[r.index])):r.index,k=null;if(!o&&a&&(k=T9(n,e,i,r.index)),k!==null){let q=k.__ngLastListenerFn__||k;q.__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,g=!1}else{s=gx(r,e,s),Nq(e,E,i,s);let q=t.listen(E,i,s);h.push(s,q),d&&d.push(i,F,M,M+1)}}else s=gx(r,e,s);if(g){let I=r.outputs?.[i],E=r.hostDirectiveOutputs?.[i];if(E&&E.length)for(let M=0;M<E.length;M+=2){let F=E[M],k=E[M+1];yx(r,e,F,k,i,s)}if(I&&I.length)for(let M of I)yx(r,e,M,i,i,s)}}function ve(n=1){return m3(n)}function C9(n,e){let t=null,r=d6(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?vN(n,s,!0):p6(r,s))return i}return t}function TO(n){let e=Ye()[Gn][Kn];if(!e.projection){let t=n?n.length:1,r=e.projection=P$(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?C9(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function CO(n,e=0,t,r,i,s){let o=Ye(),a=hn(),c=r?n+1:null;c!==null&&uO(o,a,c,r,i,s,null,t);let d=cy(a,Ct+n,16,null,t||null);d.projection===null&&(d.projection=e),dk();let g=!o[jr]||$u();o[Gn][Kn].projection[d.projection]===null&&c!==null?D9(o,a,c):g&&!Ha(d)&&K6(a,o,d)}function D9(n,e,t){let r=Ct+t,i=e.data[r],s=n[r],o=zE(s,i.tView.ssrId),a=Ub(n,i,void 0,{dehydratedView:o});Hb(s,a,0,Pm(i,o))}function Zb(n,e,t,r,i){let s=Ye(),o=gO(s,e,t,r);if(o!==vr){let a=hn(),c=Km();Ob(a,c,s,n,o,s[at],i,!1)}return Zb}function Xb(n){let e=a3();return nk(e,Ct+n)}function O(n,e=""){let t=Ye(),r=hn(),i=n+Ct,s=r.firstCreatePass?cy(r,i,1,e,null):r.data[i],o=DO(r,t,s,e,n);t[i]=o,mb()&&$b(r,t,o,s),Ch(s,!1)}var DO=(n,e,t,r,i)=>(wo(!0),wN(e[at],r));function S9(n,e,t,r,i){let s=e[jr],o=!s||$u()||Ha(t)||Ah(s,i);return wo(o),o?wN(e[at],r):uy(s,n,e,t)}function A9(){DO=S9}function Xt(n){return pt("",n,""),Xt}function pt(n,e,t){let r=Ye(),i=gO(r,n,e,t);return i!==vr&&SO(r,vo(),i),pt}function Co(n,e,t,r,i){let s=Ye(),o=KH(s,n,e,t,r,i);return o!==vr&&SO(s,vo(),o),Co}function SO(n,e,t){let r=tk(e,n);_6(n[at],r,t)}function gt(n,e,t){Bk(e)&&(e=e());let r=Ye(),i=Wm();if(cs(r,i,e)){let s=hn(),o=Km();Ob(s,o,r,n,e,r[at],t,!1)}return gt}function It(n,e){let t=Bk(n);return t&&n.set(e),t}function mt(n,e){let t=Ye(),r=hn(),i=Qn();return bO(r,t,t[at],i,n,e),mt}function R9(n,e,t){let r=hn();if(r.firstCreatePass){let i=_i(n);JE(t,r.data,r.blueprint,i,!0),JE(e,r.data,r.blueprint,i,!1)}}function JE(n,e,t,r,i){if(n=Mn(n),Array.isArray(n))for(let s=0;s<n.length;s++)JE(n[s],e,t,r,i);else{let s=hn(),o=Ye(),a=Qn(),c=Ou(n)?n:Mn(n.provide),d=Hx(n),h=a.providerIndexes&1048575,g=a.directiveStart,I=a.providerIndexes>>20;if(Ou(n)||!n.multi){let E=new Ba(d,i,re),M=pE(c,e,i?h:h+I,g);M===-1?(SE(bm(a,o),s,c),fE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[M]=E,o[M]=E)}else{let E=pE(c,e,h+I,g),M=pE(c,e,h,h+I),F=E>=0&&t[E],k=M>=0&&t[M];if(i&&!k||!i&&!F){SE(bm(a,o),s,c);let q=x9(i?P9:M9,t.length,i,r,d);!i&&k&&(t[M].providerFactory=q),fE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),o.push(q)}else{let q=AO(t[i?M:E],d,!i&&r);fE(s,n,E>-1?E:M,q)}!i&&r&&k&&t[M].componentProviders++}}}function fE(n,e,t,r){let i=Ou(e),s=V$(e);if(i||s){let c=(s?Mn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function AO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function pE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function M9(n,e,t,r,i){return ZE(this.multi,[])}function P9(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Tm(r,r[we],this.providerFactory.index,i);o=c.slice(0,a),ZE(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],ZE(s,o);return o}function ZE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function x9(n,e,t,r,i){let s=new Ba(n,t,re);return s.multi=[],s.index=e,s.componentProviders=0,AO(s,i,r&&!t),s}function hs(n,e=[]){return t=>{t.providersResolver=(r,i)=>R9(r,i?i(n):n,e)}}function k9(n,e){let t=n[e];return t===vr?void 0:t}function N9(n,e,t,r,i,s){let o=e+t;return cs(n,o,i)?EH(n,o+1,s?r.call(s,i):r(i)):k9(n,o+1)}function wr(n,e){let t=hn(),r,i=n+Ct;t.firstCreatePass?(r=O9(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=La(r.type,!0)),o,a=zn(re);try{let c=Em(!1),d=s();return Em(c),Y$(t,Ye(),i,d),d}finally{zn(a)}}function O9(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ir(n,e,t){let r=n+Ct,i=Ye(),s=nk(i,r);return L9(i,r)?N9(i,c3(),e,s.transform,t,s):s.transform(t)}function L9(n,e){return n[we].data[e].pure}var _o=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},RO=new _o("19.2.15"),XE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},MO=(()=>{class n{compileModuleSync(t){return new GE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Bx(t),s=yN(i.declarations).reduce((o,a)=>{let c=yo(a);return c&&o.push(new Uu(c)),o},[]);return new XE(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F9=(()=>{class n{zone=B(Pe);changeDetectionScheduler=B(ja);applicationRef=B(Wn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V9=new Q("",{factory:()=>!1});function PO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Pe(ae(z({},kO()),{scheduleInRootZone:t})),[{provide:Pe,useFactory:n},{provide:mo,multi:!0,useFactory:()=>{let r=B(F9,{optional:!0});return()=>r.initialize()}},{provide:mo,multi:!0,useFactory:()=>{let r=B(U9);return()=>{r.initialize()}}},e===!0?{provide:Ok,useValue:!0}:[],{provide:Lk,useValue:t??Nk}]}function xO(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=PO({ngZoneFactory:()=>{let i=kO(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ti("NgZone_CoalesceEvent"),new Pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return vn([{provide:V9,useValue:!0},{provide:Qm,useValue:!1},r])}function kO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var U9=(()=>{class n{subscription=new Pt;initialized=!1;zone=B(Pe);pendingTasks=B(ls);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var B9=(()=>{class n{appRef=B(Wn);taskService=B(ls);ngZone=B(Pe);zonelessEnabled=B(Qm);tracing=B(Wu,{optional:!0});disableScheduling=B(Ok,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(Lk,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xE||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?jP:Fk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j9(){return typeof $localize<"u"&&$localize.locale||Vm}var eT=new Q("",{providedIn:"root",factory:()=>B(eT,Re.Optional|Re.SkipSelf)||j9()});var eb=new Q(""),z9=new Q("");function hh(n){return!n.moduleRef}function $9(n){let e=hh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pe);return t.run(()=>{hh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),hh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(eb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(eb);o.add(s),n.moduleRef.onDestroy(()=>{om(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return H9(r,t,()=>{let s=e.get(pO);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(eT,Vm);if(E9(o||Vm),!e.get(z9,!0))return hh(n)?e.get(Wn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(hh(n)){let c=e.get(Wn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return q9(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function q9(n,e){let t=n.injector.get(Wn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ne(-403,!1);e.push(n)}function H9(n,e,t){try{let r=t();return bo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var am=null;function G9(n=[],e){return Dt.create({name:e,providers:[{provide:$m,useValue:"platform"},{provide:eb,useValue:new Set([()=>am=null])},...n]})}function W9(n=[]){if(am)return am;let e=G9(n);return am=e,NH(),K9(e),e}function K9(n){let e=n.get(Ib,null);ar(n,()=>{e?.forEach(t=>t())})}var Do=(()=>{class n{static __NG_ELEMENT_ID__=Q9}return n})();function Q9(n){return Y9(Qn(),Ye(),(n&16)===16)}function Y9(n,e,t){if($a(n)&&!t){let r=vi(n.index,e);return new wh(r,r)}else if(n.type&175){let r=e[Gn];return new wh(r,e)}return null}var tb=class{constructor(){}supports(e){return cO(e)}create(e){return new nb(e)}},J9=(n,e)=>e,nb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||J9}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<_x(r,i,s)?t:r,a=_x(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let I=0;I<d;I++){let E=I<s.length?s[I]:s[I]=0,M=E+I;h<=M&&M<d&&(s[I]=E+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cO(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,wH(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new rb(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Um),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Um),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},ib=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Um=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ib,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _x(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function vx(){return new tT([new tb])}var tT=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:vx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||vx()),deps:[[n,new M$,new Zt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ne(901,!1)}}return n})();function NO(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;tt(8);try{let s=i?.injector??W9(r),o=[PO({}),{provide:ja,useExisting:B9},...t||[]],a=new Lm({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return $9({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{tt(9)}}var tm=new WeakSet,wx="",cm=[];function Ix(n){return n.get(tN,dq)}function OO(){let n=[{provide:tN,useFactory:()=>{let e=!0;{let t=B(rs);e=!!window._ejsas?.[t]}return e&&Ti("NgEventReplay"),e}}];return n.push({provide:mo,useValue:()=>{let e=B(Wn),{injector:t}=e;if(!tm.has(e)){let r=B(GP);if(Ix(t)){Oq();let i=t.get(rs),s=kq(i,(o,a,c)=>{o.nodeType===Node.ELEMENT_NODE&&(Rq(o,a,c),Mq(o,r))});e.onDestroy(s)}}},multi:!0},{provide:To,useFactory:()=>{let e=B(Wn),{injector:t}=e;return()=>{!Ix(t)||tm.has(e)||(tm.add(e),e.onDestroy(()=>{tm.delete(e);{let r=t.get(rs);JI(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(xq);Z9(r,t);let i=t.get(GP);i.get(wx)?.forEach(Pq),i.delete(wx);let s=r.instance;Hq(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()}))}},multi:!0}),n}var Z9=(n,e)=>{let t=e.get(rs),r=window._ejsas[t],i=n.instance=new CP(new Qg(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let s=DP(t);i.replayEarlyEventInfos(s),JI(t);let o=new Yg(a=>{X9(e,a,a.currentTarget)});TP(i,o)};function X9(n,e,t){let r=(t&&t.getAttribute(ty))??"";/d\d+/.test(r)?eG(r,n,e,t):e.eventPhase===YI.REPLAY&&oN(e,t)}function eG(n,e,t,r){cm.push({event:t,currentTarget:r}),jH(e,n,tG)}function tG(n){let e=[...cm],t=new Set(n);cm=[];for(let{event:r,currentTarget:i}of e){let s=i.getAttribute(ty);t.has(s)?oN(r,i):cm.push({event:r,currentTarget:i})}}var Ex=!1;function nG(){Ex||(Ex=!0,jq(),y9(),A9(),w9(),DH(),aH(),k5(),S6())}function rG(n){return n.whenStable()}function LO(){let n=[{provide:Zg,useFactory:()=>{let e=!0;return e=!!B(Gu,{optional:!0})?.get(cN,null),e&&Ti("NgHydration"),e}},{provide:mo,useValue:()=>{D5(!1),B(Zg)&&(Qq(Jm()),nG())},multi:!0}];return n.push({provide:eN,useFactory:()=>B(Zg)},{provide:To,useFactory:()=>{if(B(Zg)){let e=B(Wn);return()=>{rG(e).then(()=>{e.destroyed||QN(e)})}}return()=>{}},multi:!0}),vn(n)}function So(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Kr(n){return RI(n)}function Ju(n,e){return CI(n,e?.equal)}var bx=class{[yr];constructor(e){this[yr]=e}destroy(){this[yr].destroy()}};function FO(n){let e=yo(n);if(!e)return null;let t=new Uu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var an=new Q("");var BO=null;function Er(){return BO}function nT(n){BO??=n}var Mh=class{},Ph=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(jO),providedIn:"platform"})}return n})(),rT=new Q(""),jO=(()=>{class n extends Ph{_location;_history;_doc=B(an);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function gy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function VO(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qr(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(yy),providedIn:"root"})}return n})(),my=new Q(""),yy=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(an).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(Ph),ce(my,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ao=(()=>{class n{_subject=new Tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=oG(VO(UO(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(sG(this._basePath,UO(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qr;static joinWithSlash=gy;static stripTrailingSlash=VO;static \u0275fac=function(r){return new(r||n)(ce(Yr))};static \u0275prov=X({token:n,factory:()=>iG(),providedIn:"root"})}return n})();function iG(){return new Ao(ce(Yr))}function sG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UO(n){return n.replace(/\/index.html$/,"")}function oG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var oT=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=gy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(Ph),ce(my,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var _y=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zu=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _y(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),zO(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);zO(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(Qu),re(ay),re(tT))};static \u0275dir=dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function zO(n,e){n.context.$implicit=e.item}var xn=(()=>{class n{_viewContainer;_context=new vy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$O(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$O(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(Qu),re(ay))};static \u0275dir=dt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),vy=class{$implicit=null;ngIf=null};function $O(n,e){if(n&&!n.createEmbeddedView)throw new ne(2020,!1)}function qO(n,e){return new ne(2100,!1)}var iT=class{createSubscription(e,t){return Kr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Kr(()=>e.unsubscribe())}},sT=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},aG=new sT,cG=new iT,xh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(bo(t))return aG;if(Yb(t))return cG;throw qO(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(re(Do,16))};static \u0275pipe=Kb({name:"async",type:n,pure:!1})}return n})();var uG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ga=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw qO(n,t);return t.replace(uG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Kb({name:"titlecase",type:n,pure:!0})}return n})();var wn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function aT(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var wy="browser",HO="server";function cT(n){return n===wy}function Iy(n){return n===HO}var kh=class{};var GO=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new uT(B(an),window)})}return n})(),uT=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=lG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function lG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Ty=new Q(""),fT=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(Ty),ce(Pe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Nh=class{_doc;constructor(e){this._doc=e}manager},Ey="ng-app-id";function WO(n){for(let e of n)e.remove()}function KO(n,e){let t=e.createElement("style");return t.textContent=n,t}function dG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ey}="${e}"],link[${Ey}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ey),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function dT(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var pT=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Iy(s),dG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,KO);r?.forEach(i=>this.addUsage(i,this.external,dT))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(WO(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])WO(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,KO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,dT(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ey,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(an),ce(rs),ce(Eb,8),ce(bi))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),lT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gT=/%COMP%/g;var YO="%COMP%",hG=`_nghost-${YO}`,fG=`_ngcontent-${YO}`,pG=!0,gG=new Q("",{providedIn:"root",factory:()=>pG});function mG(n){return fG.replace(gT,n)}function yG(n){return hG.replace(gT,n)}function JO(n,e){return e.map(t=>t.replace(gT,n))}var mT=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=Iy(a),this.defaultRenderer=new Oh(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ii.ShadowDom&&(r=ae(z({},r),{encapsulation:Ii.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof by?i.applyToHost(t):i instanceof Lh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Ii.Emulated:s=new by(c,d,r,this.appId,h,o,a,g,I);break;case Ii.ShadowDom:return new hT(c,d,t,r,o,a,this.nonce,g,I);default:s=new Lh(c,d,r,h,o,a,g,I);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(fT),ce(pT),ce(rs),ce(gG),ce(an),ce(bi),ce(Pe),ce(Eb),ce(Wu,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Oh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(lT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(QO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(QO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=lT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(as.DashCase|as.Important)?e.style.setProperty(t,r,i&as.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&as.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new ne(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function QO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hT=class extends Oh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=JO(i.id,h);for(let I of h){let E=document.createElement("style");a&&E.setAttribute("nonce",a),E.textContent=I,this.shadowRoot.appendChild(E)}let g=i.getExternalStyles?.();if(g)for(let I of g){let E=dT(I,s);a&&E.setAttribute("nonce",a),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lh=class extends Oh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?JO(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},by=class extends Lh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=mG(h),this.hostAttr=yG(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Cy=class n extends Mh{supportsDOMEvents=!0;static makeCurrent(){nT(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_G();return t==null?null:vG(t)}resetBaseElement(){Fh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return aT(document.cookie,e)}},Fh=null;function _G(){return Fh=Fh||document.head.querySelector("base"),Fh?Fh.getAttribute("href"):null}function vG(n){return new URL(n,document.baseURI).pathname}var wG=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),XO=(()=>{class n extends Nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ce(an))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),ZO=["alt","control","meta","shift"],IG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},e1=(()=>{class n extends Nh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ZO.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=IG[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ZO.forEach(o=>{if(o!==i){let a=EG[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(an))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function yT(n,e,t){return NO(z({rootComponent:n,platformRef:t?.platformRef},bG(e)))}function bG(n){return{appProviders:[...AG,...n?.providers??[]],platformProviders:SG}}function TG(){Cy.makeCurrent()}function CG(){return new wi}function DG(){return Kk(document),document}var SG=[{provide:bi,useValue:wy},{provide:Ib,useValue:TG,multi:!0},{provide:an,useFactory:DG}];var AG=[{provide:$m,useValue:"root"},{provide:wi,useFactory:CG},{provide:Ty,useClass:XO,multi:!0,deps:[an]},{provide:Ty,useClass:e1,multi:!0,deps:[an]},mT,pT,fT,{provide:Vu,useExisting:mT},{provide:kh,useClass:wG},[]];var Vh=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var RG="X-Request-URL",MG="text/plain",PG="application/json",Gfe=`${PG}, ${MG}, */*`;var vT=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(vT||{}),_T=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Vh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Uh=class n extends _T{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=vT.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var t1=new Q("");var Wfe=RegExp(`^${RG}:`,"m");var xG=new Q(""),kG="b",NG="h",OG="s",LG="st",FG="u",VG="rt",wT=new Q(""),UG=["GET","HEAD"];function BG(n,e){let I=B(wT),{isCacheActive:t}=I,r=rh(I,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!UG.includes(s)||!r.includeRequestsWithAuthHeaders&&jG(n)||r.filter?.(n)===!1)return e(n);let o=B(Gu);if(B(xG,{optional:!0}))throw new ne(2803,!1);let c=n.url,d=zG(n,c),h=o.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[kG]:E,[VG]:M,[NG]:F,[OG]:k,[LG]:q,[FG]:te}=h,Y=E;switch(M){case"arraybuffer":Y=new TextEncoder().encode(E).buffer;break;case"blob":Y=new Blob([E]);break}let oe=new Vh(F);return fe(new Uh({body:Y,headers:oe,status:k,statusText:q,url:te}))}return e(n).pipe(Yt(E=>{E instanceof Uh}))}function jG(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function n1(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function zG(n,e){let{params:t,method:r,responseType:i}=n,s=n1(t),o=n.serializeBody();o instanceof URLSearchParams?o=n1(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=$G(a);return c}function $G(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function r1(n){return[{provide:wT,useFactory:()=>(Ti("NgHttpTransferCache"),z({isCacheActive:!0},n))},{provide:t1,useValue:BG,multi:!0},{provide:To,multi:!0,useFactory:()=>{let e=B(Wn),t=B(wT);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var i1=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(an))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(Dy||{});function qG(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function s1(){return qG(Dy.EventReplay,OO())}function o1(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);let r=t.has(Dy.HttpTransferCacheOptions);return vn([[],LO(),t.has(Dy.NoHttpTransferCache)||r?[]:r1({}),e])}var De="primary",Zh=Symbol("RouteTitle"),CT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qa(n){return new CT(n)}function p1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function GG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ci(n[t],e[t]))return!1;return!0}function Ci(n,e){let t=n?DT(n):void 0,r=e?DT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!g1(n[i],e[i]))return!1;return!0}function DT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function g1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function m1(n){return n.length>0?n[n.length-1]:null}function No(n){return UI(n)?n:bo(n)?ot(Promise.resolve(n)):fe(n)}var WG={exact:_1,subset:v1},y1={exact:KG,subset:QG,ignored:()=>!0};function a1(n,e,t){return WG[t.paths](n.root,e.root,t.matrixParams)&&y1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KG(n,e){return Ci(n,e)}function _1(n,e,t){if(!Wa(n.segments,e.segments)||!Ry(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_1(n.children[r],e.children[r],t))return!1;return!0}function QG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>g1(n[t],e[t]))}function v1(n,e,t){return w1(n,e,e.segments,t)}function w1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wa(i,t)||e.hasChildren()||!Ry(i,t,r))}else if(n.segments.length===t.length){if(!Wa(n.segments,t)||!Ry(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!v1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Wa(n.segments,i)||!Ry(n.segments,i,r)||!n.children[De]?!1:w1(n.children[De],e,s,r)}}function Ry(n,e,t){return e.every((r,i)=>y1[t](n[i].parameters,r.parameters))}var Si=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return ZG.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return My(this)}},Mo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qa(this.parameters),this._parameterMap}toString(){return E1(this)}};function YG(n,e){return Wa(n,e)&&n.every((t,r)=>Ci(t.parameters,e[r].parameters))}function Wa(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JG(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===De&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==De&&(t=t.concat(e(i,r)))}),t}var Ya=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new Po,providedIn:"root"})}return n})(),Po=class{parse(e){let t=new AT(e);return new Si(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bh(e.root,!0)}`,r=tW(e.queryParams),i=typeof e.fragment=="string"?`#${XG(e.fragment)}`:"";return`${t}${r}${i}`}},ZG=new Po;function My(n){return n.segments.map(e=>E1(e)).join("/")}function Bh(n,e){if(!n.hasChildren())return My(n);if(e){let t=n.children[De]?Bh(n.children[De],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==De&&r.push(`${i}:${Bh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JG(n,(r,i)=>i===De?[Bh(n.children[De],!1)]:[`${i}:${Bh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${My(n)}/${t[0]}`:`${My(n)}/(${t.join("//")})`}}function I1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sy(n){return I1(n).replace(/%3B/gi,";")}function XG(n){return encodeURI(n)}function ST(n){return I1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Py(n){return decodeURIComponent(n)}function c1(n){return Py(n.replace(/\+/g,"%20"))}function E1(n){return`${ST(n.path)}${eW(n.parameters)}`}function eW(n){return Object.entries(n).map(([e,t])=>`;${ST(e)}=${ST(t)}`).join("")}function tW(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sy(t)}=${Sy(i)}`).join("&"):`${Sy(t)}=${Sy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var nW=/^[^\/()?;#]+/;function IT(n){let e=n.match(nW);return e?e[0]:""}var rW=/^[^\/()?;=#]+/;function iW(n){let e=n.match(rW);return e?e[0]:""}var sW=/^[^=?&#]+/;function oW(n){let e=n.match(sW);return e?e[0]:""}var aW=/^[^&#]+/;function cW(n){let e=n.match(aW);return e?e[0]:""}var AT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[De]=new Xe(e,t)),r}parseSegment(){let e=IT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new Mo(Py(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=iW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=IT(this.remaining);i&&(r=i,this.capture(r))}e[Py(t)]=Py(r)}parseQueryParam(e){let t=oW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=cW(this.remaining);o&&(r=o,this.capture(r))}let i=c1(t),s=c1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=IT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=De);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[De]:new Xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function b1(n){return n.segments.length>0?new Xe([],{[De]:n}):n}function T1(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=T1(i);if(r===De&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Xe(n.segments,e);return uW(t)}function uW(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new Xe(n.segments.concat(e.segments),e.children)}return n}function xo(n){return n instanceof Si}function C1(n,e,t=null,r=null){let i=D1(n);return S1(i,e,t,r)}function D1(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=b1(r);return e??i}function S1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ET(i,i,i,t,r);let s=lW(e);if(s.toRoot())return ET(i,i,new Xe([],{}),t,r);let o=dW(s,i,n),a=o.processChildren?zh(o.segmentGroup,o.index,s.commands):R1(o.segmentGroup,o.index,s.commands);return ET(i,o.segmentGroup,a,t,r)}function ky(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qh(n){return typeof n=="object"&&n!=null&&n.outlets}function ET(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;n===e?o=t:o=A1(n,e,t);let a=b1(T1(o));return new Si(a,s,i)}function A1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=A1(s,e,t)}),new Xe(n.segments,r)}var Ny=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ky(r[0]))throw new ne(4003,!1);let i=r.find(qh);if(i&&i!==m1(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lW(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ny(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ny(t,e,r)}var tl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function dW(n,e,t){if(n.isAbsolute)return new tl(e,!0,0);if(!t)return new tl(e,!1,NaN);if(t.parent===null)return new tl(t,!0,0);let r=ky(n.commands[0])?0:1,i=t.segments.length-1+r;return hW(t,i,n.numberOfDoubleDots)}function hW(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new tl(r,!1,i-s)}function fW(n){return qh(n[0])?n[0].outlets:{[De]:n}}function R1(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return zh(n,e,t);let r=pW(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Xe(n.segments.slice(0,r.pathIndex),{});return s.children[De]=new Xe(n.segments.slice(r.pathIndex),n.children),zh(s,0,i)}else return r.match&&i.length===0?new Xe(n.segments,{}):r.match&&!n.hasChildren()?RT(n,e,t):r.match?zh(n,0,i):RT(n,e,t)}function zh(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let r=fW(t),i={};if(Object.keys(r).some(s=>s!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let s=zh(n.children[De],e,t);return new Xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=R1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Xe(n.segments,i)}}function pW(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(qh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!l1(c,d,o))return s;r+=2}else{if(!l1(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function RT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(qh(s)){let c=gW(s.outlets);return new Xe(r,c)}if(i===0&&ky(t[0])){let c=n.segments[e];r.push(new Mo(c.path,u1(t[0]))),i++;continue}let o=qh(s)?s.outlets[De]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ky(a)?(r.push(new Mo(o,u1(a))),i+=2):(r.push(new Mo(o,{})),i++)}return new Xe(r,{})}function gW(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=RT(new Xe([],{}),0,r))}),e}function u1(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function l1(n,e,t){return n==t.path&&Ci(e,t.parameters)}var xy="imperative",en=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(en||{}),dr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ko=class extends dr{type=en.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends dr{urlAfterRedirects;type=en.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yn||{}),rl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(rl||{}),Di=class extends dr{reason;code;type=en.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ai=class extends dr{reason;code;type=en.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},il=class extends dr{error;target;type=en.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hh=class extends dr{urlAfterRedirects;state;type=en.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oy=class extends dr{urlAfterRedirects;state;type=en.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends dr{urlAfterRedirects;state;shouldActivate;type=en.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fy=class extends dr{urlAfterRedirects;state;type=en.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends dr{urlAfterRedirects;state;type=en.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class{route;type=en.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},By=class{route;type=en.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jy=class{snapshot;type=en.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{snapshot;type=en.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{snapshot;type=en.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qy=class{snapshot;type=en.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sl=class{routerEvent;position;anchor;type=en.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gh=class{},ol=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function mW(n,e){return n.providers&&!n._injector&&(n._injector=Yu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||De}function yW(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function Xh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Hy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xh(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ja(this.rootInjector)}},Ja=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(Pn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=MT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=MT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=PT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return PT(e,this._root).map(t=>t.value)}};function MT(n,e){if(n===e.value)return e;for(let t of e.children){let r=MT(n,t);if(r)return r}return null}function PT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=PT(n,t);if(r.length)return r.unshift(e),r}return[]}var lr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function el(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Wh=class extends Gy{snapshot;constructor(e,t){super(e),this.snapshot=t,UT(this,e)}toString(){return this.snapshot.toString()}};function M1(n){let e=_W(n),t=new xt([new Mo("",{})]),r=new xt({}),i=new xt({}),s=new xt({}),o=new xt(""),a=new In(t,r,s,o,i,De,n,e.root);return a.snapshot=e.root,new Wh(new lr(a,[]),e)}function _W(n){let e={},t={},r={},i="",s=new Ka([],e,r,i,t,De,n,null,{});return new Kh("",new lr(s,[]))}var In=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(_e(d=>d[Zh]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>Qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>Qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&x1(i)&&(r.resolve[Zh]=i.title),r}var Ka=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Zh]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Kh=class extends Gy{url;constructor(e,t){super(t),this.url=e,UT(this,t)}toString(){return P1(this._root)}};function UT(n,e){e.value._routerState=n,e.children.forEach(t=>UT(n,t))}function P1(n){let e=n.children.length>0?` { ${n.children.map(P1).join(", ")} } `:"";return`${n.value}${e}`}function bT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ci(e.params,t.params)||n.paramsSubject.next(t.params),GG(e.url,t.url)||n.urlSubject.next(t.url),Ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function xT(n,e){let t=Ci(n.params,e.params)&&YG(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||xT(n.parent,e.parent))}function x1(n){return typeof n.title=="string"||n.title===null}var k1=new Q(""),ef=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De;activateEvents=new lt;deactivateEvents=new lt;attachEvents=new lt;detachEvents=new lt;routerOutletData=Uk(void 0);parentContexts=B(Ja);location=B(Qu);changeDetector=B(Do);inputBinder=B(tf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new kT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[cr]})}return n})(),kT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===In?this.route:e===Ja?this.childContexts:e===k1?this.outletData:this.parent.get(e,t)}},tf=new Q(""),BT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xa([r.queryParams,r.params,r.data]).pipe(jn(([s,o,a],c)=>(a=z(z(z({},s),o),a),c===0?fe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=FO(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),jT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=on({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Wr(0,"router-outlet")},dependencies:[ef],encapsulation:2})}return n})();function zT(n){let e=n.children&&n.children.map(zT),t=e?ae(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=jT),t}function vW(n,e,t){let r=Qh(n,e._root,t?t._root:void 0);return new Wh(r,e)}function Qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=wW(n,e,t);return new lr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Qh(n,a)),o}}let r=IW(e.value),i=e.children.map(s=>Qh(n,s));return new lr(r,i)}}function wW(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qh(n,r,i);return Qh(n,r)})}function IW(n){return new In(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var al=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},N1="ngNavigationCancelingError";function Ky(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=O1(!1,Yn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function O1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[N1]=!0,t.cancellationCode=e,t}function EW(n){return L1(n)&&xo(n.url)}function L1(n){return!!n&&n[N1]}var bW=(n,e,t,r)=>_e(i=>(new NT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),NT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=el(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=el(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=el(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=el(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new qy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(bT(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),bT(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Qy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},nl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function TW(n,e,t){let r=n._root,i=e?e._root:null;return jh(r,i,t,[r.value])}function CW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ul(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Rx(n)?n:e.get(n):r}function jh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=el(e);return n.children.forEach(o=>{DW(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>$h(a,t.getContext(o),i)),i}function DW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=SW(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qy(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?jh(n,e,a?a.children:null,r,i):jh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nl(a.outlet.component,o))}else o&&$h(e,a,i),i.canActivateChecks.push(new Qy(r)),s.component?jh(n,null,a?a.children:null,r,i):jh(n,null,t,r,i);return i}function SW(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wa(n.url,e.url)||!Ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xT(n,e)||!Ci(n.queryParams,e.queryParams);case"paramsChange":default:return!xT(n,e)}}function $h(n,e,t){let r=el(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?$h(o,e.children.getContext(s),t):$h(o,null,t):$h(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new nl(e.outlet.component,i)):t.canDeactivateChecks.push(new nl(null,i)):t.canDeactivateChecks.push(new nl(null,i))}function nf(n){return typeof n=="function"}function AW(n){return typeof n=="boolean"}function RW(n){return n&&nf(n.canLoad)}function MW(n){return n&&nf(n.canActivate)}function PW(n){return n&&nf(n.canActivateChild)}function xW(n){return n&&nf(n.canDeactivate)}function kW(n){return n&&nf(n.canMatch)}function F1(n){return n instanceof es||n?.name==="EmptyError"}var Ay=Symbol("INITIAL_VALUE");function cl(){return jn(n=>xa(n.map(e=>e.pipe(_n(1),Hg(Ay)))).pipe(_e(e=>{for(let t of e)if(t!==!0){if(t===Ay)return Ay;if(t===!1||NW(t))return t}return!0}),Bn(e=>e!==Ay),_n(1)))}function NW(n){return xo(n)||n instanceof al}function OW(n,e){return kt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?fe(ae(z({},t),{guardsResult:!0})):LW(o,r,i,n).pipe(kt(a=>a&&AW(a)?FW(r,s,n,e):fe(a)),_e(a=>ae(z({},t),{guardsResult:a})))})}function LW(n,e,t,r){return ot(n).pipe(kt(i=>zW(i.component,i.route,t,e,r)),ns(i=>i!==!0,!0))}function FW(n,e,t,r){return ot(e).pipe(ho(i=>Eu(UW(i.route.parent,r),VW(i.route,r),jW(n,i.path,t),BW(n,i.route,t))),ns(i=>i!==!0,!0))}function VW(n,e){return n!==null&&e&&e(new $y(n)),fe(!0)}function UW(n,e){return n!==null&&e&&e(new jy(n)),fe(!0)}function BW(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(s=>zg(()=>{let o=Xh(e)??t,a=ul(s,o),c=MW(a)?a.canActivate(e,n):ar(o,()=>a(e,n));return No(c).pipe(ns())}));return fe(i).pipe(cl())}function jW(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CW(o)).filter(o=>o!==null).map(o=>zg(()=>{let a=o.guards.map(c=>{let d=Xh(o.node)??t,h=ul(c,d),g=PW(h)?h.canActivateChild(r,n):ar(d,()=>h(r,n));return No(g).pipe(ns())});return fe(a).pipe(cl())}));return fe(s).pipe(cl())}function zW(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return fe(!0);let o=s.map(a=>{let c=Xh(e)??i,d=ul(a,c),h=xW(d)?d.canDeactivate(n,e,t,r):ar(c,()=>d(n,e,t,r));return No(h).pipe(ns())});return fe(o).pipe(cl())}function $W(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return fe(!0);let s=i.map(o=>{let a=ul(o,n),c=RW(a)?a.canLoad(e,t):ar(n,()=>a(e,t));return No(c)});return fe(s).pipe(cl(),V1(r))}function V1(n){return bg(Yt(e=>{if(typeof e!="boolean")throw Ky(n,e)}),_e(e=>e===!0))}function qW(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return fe(!0);let s=i.map(o=>{let a=ul(o,n),c=kW(a)?a.canMatch(e,t):ar(n,()=>a(e,t));return No(c)});return fe(s).pipe(cl(),V1(r))}var Yh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Xu(n){return wu(new Yh(n))}function HW(n){return wu(new ne(4e3,!1))}function GW(n){return wu(O1(!1,Yn.GuardRejected))}var OT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[De])return HW(`${e.redirectTo}`);i=i.children[De]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:h,url:g,outlet:I,params:E,data:M,title:F}=i,k=ar(s,()=>a({params:E,data:M,queryParams:c,fragment:d,routeConfig:h,url:g,outlet:I,title:F}));if(k instanceof Si)throw new Jh(k);t=k}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Jh(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Si(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},LT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WW(n,e,t,r,i){let s=U1(n,e,t);return s.matched?(r=mW(e,r),qW(r,e,t,i).pipe(_e(o=>o===!0?s:z({},LT)))):fe(s)}function U1(n,e,t){if(e.path==="**")return KW(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},LT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||p1)(t,n,e);if(!i)return z({},LT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?z(z({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KW(n){return{matched:!0,parameters:n.length>0?m1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function d1(n,e,t,r){return t.length>0&&JW(n,t,r)?{segmentGroup:new Xe(e,YW(r,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&ZW(n,t,r)?{segmentGroup:new Xe(n.segments,QW(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function QW(n,e,t,r){let i={};for(let s of t)if(Jy(n,e,s)&&!r[Jr(s)]){let o=new Xe([],{});i[Jr(s)]=o}return z(z({},r),i)}function YW(n,e){let t={};t[De]=e;for(let r of n)if(r.path===""&&Jr(r)!==De){let i=new Xe([],{});t[Jr(r)]=i}return t}function JW(n,e,t){return t.some(r=>Jy(n,e,r)&&Jr(r)!==De)}function ZW(n,e,t){return t.some(r=>Jy(n,e,r))}function Jy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function XW(n,e,t){return e.length===0&&!n.children[t]}var FT=class{};function e8(n,e,t,r,i,s,o="emptyOnly"){return new VT(n,e,t,r,i,o,s).recognize()}var t8=31,VT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new OT(this.urlSerializer,this.urlTree)}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=d1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(_e(({children:t,rootSnapshot:r})=>{let i=new lr(r,t),s=new Kh("",i),o=C1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ka([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,t).pipe(_e(r=>({children:r,rootSnapshot:t})),ts(r=>{if(r instanceof Jh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(_e(o=>o instanceof lr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ot(s).pipe(ho(o=>{let a=r.children[o],c=yW(t,o);return this.processSegmentGroup(e,c,a,o,i)}),qg((o,a)=>(o.push(...a),o)),fo(null),jI(),kt(o=>{if(o===null)return Xu(r);let a=B1(o);return n8(a),fe(a)}))}processSegment(e,t,r,i,s,o,a){return ot(t).pipe(ho(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ts(d=>{if(d instanceof Yh)return fe(null);throw d}))),ns(c=>!!c),ts(c=>{if(F1(c))return XW(r,i,s)?fe(new FT):Xu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Jr(r)!==o&&(o===De||!Jy(i,s,r))?Xu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Xu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:I}=U1(t,i,s);if(!c)return Xu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>t8&&(this.allowRedirects=!1));let E=new Ka(s,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,h1(i),Jr(i),i.component??i._loadedComponent??null,i,f1(i)),M=Wy(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(M.params),E.data=Object.freeze(M.data);let F=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,F).pipe(kt(k=>this.processSegment(e,r,t,k.concat(I),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=WW(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(jn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(jn(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:E}=c,M=new Ka(I,g,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,h1(r),Jr(r),r.component??r._loadedComponent??null,r,f1(r)),F=Wy(M,o,this.paramsInheritanceStrategy);M.params=Object.freeze(F.params),M.data=Object.freeze(F.data);let{segmentGroup:k,slicedSegments:q}=d1(t,I,E,d);if(q.length===0&&k.hasChildren())return this.processChildren(h,d,k,M).pipe(_e(Y=>new lr(M,Y)));if(d.length===0&&q.length===0)return fe(new lr(M,[]));let te=Jr(r)===s;return this.processSegment(h,d,k,q,te?De:s,!0,M).pipe(_e(Y=>new lr(M,Y instanceof lr?[Y]:[])))}))):Xu(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):$W(e,t,r,this.urlSerializer).pipe(kt(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):GW(t))):fe({routes:[],injector:e})}};function n8(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function r8(n){let e=n.value.routeConfig;return e&&e.path===""}function B1(n){let e=[],t=new Set;for(let r of n){if(!r8(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=B1(r.children);e.push(new lr(r.value,i))}return e.filter(r=>!t.has(r))}function h1(n){return n.data||{}}function f1(n){return n.resolve||{}}function i8(n,e,t,r,i,s){return kt(o=>e8(n,e,t,r,o.extractedUrl,i,s).pipe(_e(({state:a,tree:c})=>ae(z({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function s8(n,e){return kt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of j1(c))o.add(d);let a=0;return ot(o).pipe(ho(c=>s.has(c)?o8(c,r,n,e):(c.data=Wy(c,c.parent,n).resolve,fe(void 0))),Yt(()=>a++),bu(1),kt(c=>a===o.size?fe(t):Vn))})}function j1(n){let e=n.children.map(t=>j1(t)).flat();return[n,...e]}function o8(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!x1(i)&&(s[Zh]=i.title),a8(s,n,e,r).pipe(_e(o=>(n._resolvedData=o,n.data=Wy(n,n.parent,t).resolve,null)))}function a8(n,e,t,r){let i=DT(n);if(i.length===0)return fe({});let s={};return ot(i).pipe(kt(o=>c8(n[o],e,t,r).pipe(ns(),Yt(a=>{if(a instanceof al)throw Ky(new Po,a);s[o]=a}))),bu(1),_e(()=>s),ts(o=>F1(o)?Vn:wu(o)))}function c8(n,e,t,r){let i=Xh(e)??r,s=ul(n,i),o=s.resolve?s.resolve(e,t):ar(i,()=>s(e,t));return No(o)}function TT(n){return jn(e=>{let t=n(e);return t?ot(t).pipe(_e(()=>e)):fe(e)})}var $T=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===De);return r}getResolvedTitleForRoute(t){return t.data[Zh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(z1),providedIn:"root"})}return n})(),z1=(()=>{class n extends $T{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(i1))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Za=new Q("",{providedIn:"root",factory:()=>({})}),Xa=new Q(""),Zy=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(MO);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=No(t.loadComponent()).pipe(_e(q1),Yt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),dh(()=>{this.componentLoaders.delete(t)})),i=new vu(r,()=>new Tt).pipe(_u());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=$1(r,this.compiler,t,this.onLoadEndListener).pipe(dh(()=>{this.childrenLoaders.delete(r)})),o=new vu(s,()=>new Tt).pipe(_u());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $1(n,e,t,r){return No(n.loadChildren()).pipe(_e(q1),kt(i=>i instanceof Wb||Array.isArray(i)?fe(i):ot(e.compileModuleAsync(i))),_e(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Xa,[],{optional:!0,self:!0}).flat()),{routes:o.map(zT),injector:s}}))}function u8(n){return n&&typeof n=="object"&&"default"in n}function q1(n){return u8(n)?n.default:n}var Xy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(l8),providedIn:"root"})}return n})(),l8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qT=new Q(""),HT=new Q("");function H1(n,e,t){let r=n.get(HT),i=n.get(an);return n.get(Pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=i.startViewTransition(()=>(s(),d8(n))),{onViewTransitionCreated:c}=r;return c&&ar(n,()=>c({transition:a,from:e,to:t})),o})}function d8(n){return new Promise(e=>{Zm({read:()=>setTimeout(e)},{injector:n})})}var GT=new Q(""),e_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Tt;transitionAbortSubject=new Tt;configLoader=B(Zy);environmentInjector=B(Pn);destroyRef=B(qu);urlSerializer=B(Ya);rootContexts=B(Ja);location=B(Ao);inputBindingEnabled=B(tf,{optional:!0})!==null;titleStrategy=B($T);options=B(Za,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(Xy);createViewTransition=B(qT,{optional:!0});navigationErrorHandler=B(GT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Uy(i)),r=i=>this.events.next(new By(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new xt(null),this.transitions.pipe(Bn(r=>r!==null),jn(r=>{let i=!1,s=!1;return fe(r).pipe(jn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yn.SupersededByNewNavigation),Vn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let d="";return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.rawUrl),d,rl.IgnoredSameUrlNavigation)),o.resolve(!1),Vn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fe(o).pipe(jn(d=>(this.events.next(new ko(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Vn:Promise.resolve(d))),i8(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=ae(z({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Hh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:I,extras:E}=o,M=new ko(d,this.urlSerializer.serialize(h),g,I);this.events.next(M);let F=M1(this.rootComponentType).snapshot;return this.currentTransition=r=ae(z({},o),{targetSnapshot:F,urlAfterRedirects:h,extras:ae(z({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,fe(r)}else{let d="";return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),d,rl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vn}}),Yt(o=>{let a=new Oy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),_e(o=>(this.currentTransition=r=ae(z({},o),{guards:TW(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),OW(this.environmentInjector,o=>this.events.next(o)),Yt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ky(this.urlSerializer,o.guardsResult);let a=new Ly(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Bn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yn.GuardRejected),!1)),TT(o=>{if(o.guards.canActivateChecks.length!==0)return fe(o).pipe(Yt(a=>{let c=new Fy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),jn(a=>{let c=!1;return fe(a).pipe(s8(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Yn.NoDataFromResolver)}}))}),Yt(a=>{let c=new Vy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),TT(o=>{let a=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Yt(h=>{c.component=h}),_e(()=>{})));for(let h of c.children)d.push(...a(h));return d};return xa(a(o.targetSnapshot.root)).pipe(fo(null),_n(1))}),TT(()=>this.afterPreactivation()),jn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?ot(c).pipe(_e(()=>r)):fe(r)}),_e(o=>{let a=vW(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ae(z({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Yt(()=>{this.events.next(new Gh)}),bW(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),_n(1),Yt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Tu(this.transitionAbortSubject.pipe(Yt(o=>{throw o}))),dh(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Yn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ts(o=>{if(this.destroyed)return r.resolve(!1),Vn;if(s=!0,L1(o))this.events.next(new Di(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),EW(o)?this.events.next(new ol(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new il(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=ar(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof al){let{message:d,cancellationCode:h}=Ky(this.urlSerializer,c);this.events.next(new Di(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new ol(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Vn}))}))}cancelNavigationTransition(t,r,i){let s=new Di(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h8(n){return n!==xy}var G1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(f8),providedIn:"root"})}return n})(),Yy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},f8=(()=>{class n extends Yy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W1=(()=>{class n{urlSerializer=B(Ya);options=B(Za,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(Ao);urlHandlingStrategy=B(Xy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Si;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Si?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=M1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>B(p8),providedIn:"root"})}return n})(),p8=(()=>{class n extends W1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ko?this.updateStateMemento():t instanceof Ai?this.commitTransition(r):t instanceof Hh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Gh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Di&&(t.code===Yn.GuardRejected||t.code===Yn.NoDataFromResolver)?this.restoreHistory(r):t instanceof il?this.restoreHistory(r,!0):t instanceof br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=z(z({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t_(n,e){n.events.pipe(Bn(t=>t instanceof br||t instanceof Di||t instanceof il||t instanceof Ai),_e(t=>t instanceof br||t instanceof Ai?0:(t instanceof Di?t.code===Yn.Redirect||t.code===Yn.SupersededByNewNavigation:!1)?2:1),Bn(t=>t!==2),_n(1)).subscribe(()=>{e()})}var g8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(Qb);stateManager=B(W1);options=B(Za,{optional:!0})||{};pendingTasks=B(ls);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(e_);urlSerializer=B(Ya);location=B(Ao);urlHandlingStrategy=B(Xy);_events=new Tt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B(G1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(Xa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(tf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Di&&r.code!==Yn.Redirect&&r.code!==Yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof br)this.navigated=!0;else if(r instanceof ol){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||h8(i.source)},o);this.scheduleNavigation(a,xy,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=D1(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return S1(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=xo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,xy,null,r)}navigate(t,r={skipLocationChange:!1}){return y8(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},g8):r===!1?i=z({},m8):i=r,xo(t))return a1(this.currentUrlTree,t,i);let s=this.parseUrl(t);return a1(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,I)=>{a=g,c=I});let h=this.pendingTasks.add();return t_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y8(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ne(4008,!1)}function _8(n){return!(n instanceof Gh)&&!(n instanceof ol)}var Oo=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Tt;constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof br&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:gN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:xo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(re(yt),re(In),_b("tabindex"),re(ds),re(ur),re(Yr))};static \u0275dir=dt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ce("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Rh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",So],skipLocationChange:[2,"skipLocationChange","skipLocationChange",So],replaceUrl:[2,"replaceUrl","replaceUrl",So],routerLink:"routerLink"},features:[cr]})}return n})();var rf=class{};var K1=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof br),ho(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Yu(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ot(i).pipe(Iu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=fe(null);let s=i.pipe(kt(o=>o===null?fe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return ot([s,o]).pipe(Iu())}else return s})}static \u0275fac=function(r){return new(r||n)(ce(yt),ce(Pn),ce(rf),ce(Zy))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q1=new Q(""),E8=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ko?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof br?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ai&&t.code===rl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){ZN()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function KT(n,...e){return vn([{provide:Xa,multi:!0,useValue:n},[],{provide:In,useFactory:Y1,deps:[yt]},{provide:To,multi:!0,useFactory:J1},e.map(t=>t.\u0275providers)])}function Y1(n){return n.routerState.root}function sf(n,e){return{\u0275kind:n,\u0275providers:e}}function J1(){let n=B(Dt);return e=>{let t=n.get(Wn);if(e!==t.components[0])return;let r=n.get(yt),i=n.get(Z1);n.get(QT)===1&&r.initialNavigation(),n.get(tL,null,Re.Optional)?.setUpPreloading(),n.get(Q1,null,Re.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Z1=new Q("",{factory:()=>new Tt}),QT=new Q("",{providedIn:"root",factory:()=>1});function X1(){let n=[{provide:QT,useValue:0},Jb(()=>{let e=B(Dt);return e.get(rT,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(yt),s=e.get(Z1);t_(i,()=>{r(!0)}),e.get(e_).afterPreactivation=()=>(r(!0),s.closed?fe(void 0):s),i.initialNavigation()}))})];return sf(2,n)}function eL(){let n=[Jb(()=>{B(yt).setUpLocationChangeListener()}),{provide:QT,useValue:2}];return sf(3,n)}var tL=new Q("");function nL(n){return sf(0,[{provide:tL,useExisting:K1},{provide:rf,useExisting:n}])}function rL(){return sf(8,[BT,{provide:tf,useExisting:BT}])}function iL(n){Ti("NgRouterViewTransitions");let e=[{provide:qT,useValue:H1},{provide:HT,useValue:z({skipNextTransition:!!n?.skipInitialTransition},n)}];return sf(9,e)}var sL=[Ao,{provide:Ya,useClass:Po},yt,Ja,{provide:In,useFactory:Y1,deps:[yt]},Zy,[]],ec=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[sL,[],{provide:Xa,multi:!0,useValue:t},[],r?.errorHandler?{provide:GT,useValue:r.errorHandler}:[],{provide:Za,useValue:r||{}},r?.useHash?T8():C8(),b8(),r?.preloadingStrategy?nL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?D8(r):[],r?.bindToComponentInputs?rL().\u0275providers:[],r?.enableViewTransitions?iL().\u0275providers:[],S8()]}}static forChild(t){return{ngModule:n,providers:[{provide:Xa,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function b8(){return{provide:Q1,useFactory:()=>{let n=B(GO),e=B(Pe),t=B(Za),r=B(e_),i=B(Ya);return t.scrollOffset&&n.setOffset(t.scrollOffset),new E8(i,r,n,e,t)}}}function T8(){return{provide:Yr,useClass:oT}}function C8(){return{provide:Yr,useClass:yy}}function D8(n){return[n.initialNavigation==="disabled"?eL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?X1().\u0275providers:[]]}var WT=new Q("");function S8(){return[{provide:WT,useFactory:J1},{provide:To,multi:!0,useExisting:WT}]}var aL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},A8=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},cL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(I=64)),r.push(t[h],t[g],t[I],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):A8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new JT;let I=s<<2|a>>4;if(r.push(I),d!==64){let E=a<<4&240|d>>2;if(r.push(E),g!==64){let M=d<<6&192|g;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},JT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},R8=function(n){let e=aL(n);return cL.encodeByteArray(e,!0)},of=function(n){return R8(n).replace(/\./g,"")},XT=function(n){try{return cL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function M8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var P8=()=>M8().__FIREBASE_DEFAULTS__,x8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&XT(n[1]);return e&&JSON.parse(e)},r_=()=>{try{return P8()||x8()||k8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},e0=n=>{var e,t;return(t=(e=r_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},i_=n=>{let e=e0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},t0=()=>{var n;return(n=r_())===null||n===void 0?void 0:n.config},n0=n=>{var e;return(e=r_())===null||e===void 0?void 0:e[`_${n}`]};var n_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function s_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[of(JSON.stringify(t)),of(JSON.stringify(o)),""].join(".")}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function N8(){var n;let e=(n=r_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fL(){let n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pL(){return!N8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r0(){try{return typeof indexedDB=="object"}catch{return!1}}function gL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var O8="FirebaseError",kn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=O8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fs.prototype.create)}},fs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?L8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kn(i,a,r)}};function L8(n,e){return n.replace(F8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var F8=/\{\$([^}]+)}/g;function mL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nc(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(oL(s)&&oL(o)){if(!nc(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oL(n){return n!==null&&typeof n=="object"}function ll(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function hl(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yL(n,e){let t=new ZT(n,e);return t.subscribe.bind(t)}var ZT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");V8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=YT),i.error===void 0&&(i.error=YT),i.complete===void 0&&(i.complete=YT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function V8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function YT(){}var Ege=4*60*60*1e3;function ht(n){return n&&n._delegate?n._delegate:n}var Jn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rc="[DEFAULT]";var i0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new n_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B8(e))try{this.getOrInitializeService({instanceIdentifier:rc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rc){return this.instances.has(e)}getOptions(e=rc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rc){return this.component?this.component.multipleInstances?e:rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function U8(n){return n===rc?void 0:n}function B8(n){return n.instantiationMode==="EAGER"}var o_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new i0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var j8=[],Ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ue||{}),z8={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},$8=Ue.INFO,q8={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},H8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=q8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lo=class{constructor(e){this.name=e,this._logLevel=$8,this._logHandler=H8,this._userLogHandler=null,j8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var G8=(n,e)=>e.some(t=>n instanceof t),_L,vL;function W8(){return _L||(_L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K8(){return vL||(vL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wL=new WeakMap,o0=new WeakMap,IL=new WeakMap,s0=new WeakMap,c0=new WeakMap;function Q8(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ri(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&wL.set(t,n)}).catch(()=>{}),c0.set(e,n),e}function Y8(n){if(o0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});o0.set(n,e)}var a0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return o0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function EL(n){a0=n(a0)}function J8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(a_(this),e,...t);return IL.set(r,e.sort?e.sort():[e]),Ri(r)}:K8().includes(n)?function(...e){return n.apply(a_(this),e),Ri(wL.get(this))}:function(...e){return Ri(n.apply(a_(this),e))}}function Z8(n){return typeof n=="function"?J8(n):(n instanceof IDBTransaction&&Y8(n),G8(n,W8())?new Proxy(n,a0):n)}function Ri(n){if(n instanceof IDBRequest)return Q8(n);if(s0.has(n))return s0.get(n);let e=Z8(n);return e!==n&&(s0.set(n,e),c0.set(e,n)),e}var a_=n=>c0.get(n);function c_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ri(o.result),c.oldVersion,c.newVersion,Ri(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var X8=["get","getKey","getAll","getAllKeys","count"],e7=["put","add","delete","clear"],u0=new Map;function bL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=e7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||X8.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return u0.set(e,s),s}EL(n=>ae(z({},n),{get:(e,t,r)=>bL(e,t)||n.get(e,t,r),has:(e,t)=>!!bL(e,t)||n.has(e,t)}));var d0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(t7(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function t7(n){let e=n.getComponent();return e?.type==="VERSION"}var h0="@firebase/app",TL="0.10.13";var ps=new Lo("@firebase/app"),n7="@firebase/app-compat",r7="@firebase/analytics-compat",i7="@firebase/analytics",s7="@firebase/app-check-compat",o7="@firebase/app-check",a7="@firebase/auth",c7="@firebase/auth-compat",u7="@firebase/database",l7="@firebase/data-connect",d7="@firebase/database-compat",h7="@firebase/functions",f7="@firebase/functions-compat",p7="@firebase/installations",g7="@firebase/installations-compat",m7="@firebase/messaging",y7="@firebase/messaging-compat",_7="@firebase/performance",v7="@firebase/performance-compat",w7="@firebase/remote-config",I7="@firebase/remote-config-compat",E7="@firebase/storage",b7="@firebase/storage-compat",T7="@firebase/firestore",C7="@firebase/vertexai-preview",D7="@firebase/firestore-compat",S7="firebase",A7="10.14.1";var f0="[DEFAULT]",R7={[h0]:"fire-core",[n7]:"fire-core-compat",[i7]:"fire-analytics",[r7]:"fire-analytics-compat",[o7]:"fire-app-check",[s7]:"fire-app-check-compat",[a7]:"fire-auth",[c7]:"fire-auth-compat",[u7]:"fire-rtdb",[l7]:"fire-data-connect",[d7]:"fire-rtdb-compat",[h7]:"fire-fn",[f7]:"fire-fn-compat",[p7]:"fire-iid",[g7]:"fire-iid-compat",[m7]:"fire-fcm",[y7]:"fire-fcm-compat",[_7]:"fire-perf",[v7]:"fire-perf-compat",[w7]:"fire-rc",[I7]:"fire-rc-compat",[E7]:"fire-gcs",[b7]:"fire-gcs-compat",[T7]:"fire-fst",[D7]:"fire-fst-compat",[C7]:"fire-vertex","fire-js":"fire-js",[S7]:"fire-js-all"};var af=new Map,M7=new Map,p0=new Map;function CL(n,e){try{n.container.addComponent(e)}catch(t){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mi(n){let e=n.name;if(p0.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;p0.set(e,n);for(let t of af.values())CL(t,n);for(let t of M7.values())CL(t,n);return!0}function ic(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tr(n){return n.settings!==void 0}var P7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new fs("app","Firebase",P7);var g0=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}};var Pi=A7;function _0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:f0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fo.create("bad-app-name",{appName:String(i)});if(t||(t=t0()),!t)throw Fo.create("no-options");let s=af.get(i);if(s){if(nc(t,s.options)&&nc(r,s.config))return s;throw Fo.create("duplicate-app",{appName:i})}let o=new o_(i);for(let c of p0.values())o.addComponent(c);let a=new g0(t,r,o);return af.set(i,a),a}function Vo(n=f0){let e=af.get(n);if(!e&&n===f0&&t0())return _0();if(!e)throw Fo.create("no-app",{appName:n});return e}function u_(){return Array.from(af.values())}function _t(n,e,t){var r;let i=(r=R7[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(a.join(" "));return}Mi(new Jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var x7="firebase-heartbeat-database",k7=1,cf="firebase-heartbeat-store",l0=null;function RL(){return l0||(l0=c_(x7,k7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fo.create("idb-open",{originalErrorMessage:n.message})})),l0}function N7(n){return b(this,null,function*(){try{let t=(yield RL()).transaction(cf),r=yield t.objectStore(cf).get(ML(n));return yield t.done,r}catch(e){if(e instanceof kn)ps.warn(e.message);else{let t=Fo.create("idb-get",{originalErrorMessage:e?.message});ps.warn(t.message)}}})}function DL(n,e){return b(this,null,function*(){try{let r=(yield RL()).transaction(cf,"readwrite");yield r.objectStore(cf).put(e,ML(n)),yield r.done}catch(t){if(t instanceof kn)ps.warn(t.message);else{let r=Fo.create("idb-set",{originalErrorMessage:t?.message});ps.warn(r.message)}}})}function ML(n){return`${n.name}!${n.options.appId}`}var O7=1024,L7=30*24*60*60*1e3,m0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new y0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=L7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ps.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=SL(),{heartbeatsToSend:r,unsentEntries:i}=F7(this._heartbeatsCache.heartbeats),s=of(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ps.warn(t),""}})}};function SL(){return new Date().toISOString().substring(0,10)}function F7(n,e=O7){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),AL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),AL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var y0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return r0()?gL().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield N7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function AL(n){return of(JSON.stringify({version:2,heartbeats:n})).length}function V7(n){Mi(new Jn("platform-logger",e=>new d0(e),"PRIVATE")),Mi(new Jn("heartbeat",e=>new m0(e),"PRIVATE")),_t(h0,TL,n),_t(h0,TL,"esm2017"),_t("fire-js","")}V7("");var U7="firebase",B7="10.14.1";_t(U7,B7,"app");function En(n){return typeof n=="function"}function PL(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var l_=PL(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(En(r))try{r()}catch(s){e=s instanceof l_?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{xL(s)}catch(o){e=e??[],o instanceof l_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new l_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xL(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uf(t,e)}remove(e){let{_finalizers:t}=this;t&&uf(t,e),e instanceof n&&e._removeParent(this)}};xi.EMPTY=(()=>{let n=new xi;return n.closed=!0,n})();var tme=xi.EMPTY;function d_(n){return n instanceof xi||n&&"closed"in n&&En(n.remove)&&En(n.add)&&En(n.unsubscribe)}function xL(n){En(n)?n():n.unsubscribe()}var Zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fl={setTimeout(n,e,...t){let{delegate:r}=fl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kL(n){fl.setTimeout(()=>{let{onUnhandledError:e}=Zr;if(e)e(n);else throw n})}function v0(){}var NL=w0("C",void 0,void 0);function OL(n){return w0("E",void 0,n)}function LL(n){return w0("N",n,void 0)}function w0(n,e,t){return{kind:n,value:e,error:t}}var sc=null;function FL(n){if(Zr.useDeprecatedSynchronousErrorHandling){let e=!sc;if(e&&(sc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=sc;if(sc=null,t)throw r}}else n()}function VL(n){Zr.useDeprecatedSynchronousErrorHandling&&sc&&(sc.errorThrown=!0,sc.error=n)}var oc=class extends xi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,d_(e)&&e.add(this)):this.destination=$7}static create(e,t,r){return new pl(e,t,r)}next(e){this.isStopped?E0(LL(e),this):this._next(e)}error(e){this.isStopped?E0(OL(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?E0(NL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j7=Function.prototype.bind;function I0(n,e){return j7.call(n,e)}var b0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){h_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){h_(r)}else h_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){h_(t)}}},pl=class extends oc{constructor(e,t,r){super();let i;if(En(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Zr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&I0(e.next,s),error:e.error&&I0(e.error,s),complete:e.complete&&I0(e.complete,s)}):i=e}this.destination=new b0(i)}};function h_(n){Zr.useDeprecatedSynchronousErrorHandling?VL(n):kL(n)}function z7(n){throw n}function E0(n,e){let{onStoppedNotification:t}=Zr;t&&fl.setTimeout(()=>t(n,e))}var $7={closed:!0,next:v0,error:z7,complete:v0};var UL=typeof Symbol=="function"&&Symbol.observable||"@@observable";function f_(n){return n}function BL(n){return n.length===0?f_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var p_=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=H7(t)?t:new pl(t,r,i);return FL(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jL(r),new r((i,s)=>{let o=new pl({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[UL](){return this}pipe(...t){return BL(t)(this)}toPromise(t){return t=jL(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function jL(n){var e;return(e=n??Zr.Promise)!==null&&e!==void 0?e:Promise}function q7(n){return n&&En(n.next)&&En(n.error)&&En(n.complete)}function H7(n){return n&&n instanceof oc||q7(n)&&d_(n)}function G7(n){return En(n?.lift)}function gl(n){return e=>{if(G7(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function g_(n,e,t,r,i){return new T0(n,e,t,r,i)}var T0=class extends oc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var C0={now(){return(C0.delegate||Date).now()},delegate:void 0};var m_=class extends xi{constructor(e,t){super()}schedule(e,t=0){return this}};var lf={setInterval(n,e,...t){let{delegate:r}=lf;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=lf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ml=class extends m_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return lf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&lf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,uf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var yl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};yl.now=C0.now;var _l=class extends yl{constructor(e,t=yl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var D0=new _l(ml);var y_=class extends ml{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var __=class extends _l{};var S0=new __(y_);function v_(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function w_(n,e=0){return gl((t,r)=>{t.subscribe(g_(r,i=>v_(r,n,()=>r.next(i),e),()=>v_(r,n,()=>r.complete(),e),i=>v_(r,n,()=>r.error(i),e)))})}function I_(n,e=0){return gl((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function A0(n,e,t){let r=En(n)||e||t?{next:n,error:e,complete:t}:n;return r?gl((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(g_(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):f_}var gs=new _o("ANGULARFIRE2_VERSION");function wl(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var cc=(n,e)=>{let t=e?[e]:u_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Uo=class{constructor(){return cc(W7)}},W7="app-check";function vl(){}var E_=class{zone;delegate;constructor(e,t=S0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},R0=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vl,{},vl,vl)),t.pipe(A0({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new E_(Zone.current)),this.insideAngular=t.run(()=>new E_(Zone.current,D0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ce(Pe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b_(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function K7(n){return b_().ngZone.runOutsideAngular(()=>n())}function ac(n){return b_().ngZone.run(()=>n())}function Q7(n){return Y7(b_())(n)}function Y7(n){return function(t){return t=t.lift(new R0(n.ngZone)),t.pipe(I_(n.outsideAngular),w_(n.insideAngular))}}var J7=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ac(()=>n.apply(void 0,r))},nt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=ac(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vl,{},vl,vl))),r[s]=J7(r[s],t));let i=K7(()=>n.apply(this,r));if(!e)if(i instanceof p_){let s=b_();return i.pipe(I_(s.outsideAngular),w_(s.insideAngular))}else return ac(()=>i);return i instanceof p_?i.pipe(Q7):i instanceof Promise?ac(()=>new Promise((s,o)=>i.then(a=>ac(()=>s(a)),a=>ac(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ac(()=>i)};var Xr=class{constructor(e){return e}},ms=class{constructor(){return u_()}};function Z7(n){return n&&n.length===1?n[0]:new Xr(Vo())}var M0=new Q("angularfire2._apps"),X7={provide:Xr,useFactory:Z7,deps:[[new Zt,M0]]},eK={provide:ms,deps:[[new Zt,M0]]};function tK(n){return(e,t)=>{let r=t.get(bi);_t("angularfire",gs.full,"core"),_t("angularfire",gs.full,"app"),_t("angular",RO.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function zL(n,...e){return vn([X7,eK,{provide:M0,useFactory:tK(n),multi:!0,deps:[Pe,Dt,Bo,...e]}])}var $L=nt(_0,!0);var qL=()=>{};var HL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},nK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},GL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(I=64)),r.push(t[h],t[g],t[I],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new x0;let I=s<<2|a>>4;if(r.push(I),d!==64){let E=a<<4&240|d>>2;if(r.push(E),g!==64){let M=d<<6&192|g;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},x0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rK=function(n){let e=HL(n);return GL.encodeByteArray(e,!0)},N0=function(n){return rK(n).replace(/\./g,"")},T_=function(n){try{return GL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var iK=()=>WL().__FIREBASE_DEFAULTS__,sK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&T_(n[1]);return e&&JSON.parse(e)},KL=()=>{try{return qL()||iK()||sK()||oK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var QL=n=>KL()?.[`_${n}`];function df(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function aK(){let n=KL()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eF(){return!aK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O0(){try{return typeof indexedDB=="object"}catch{return!1}}function tF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var cK="FirebaseError",Cr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ys.prototype.create)}},ys=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uK(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Cr(i,a,r)}};function uK(n,e){return n.replace(lK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var lK=/\{\$([^}]+)}/g;function L0(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nF(n,e){let t=new k0(n,e);return t.subscribe.bind(t)}var k0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");dK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=P0),i.error===void 0&&(i.error=P0),i.complete===void 0&&(i.complete=P0);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function P0(){}var Wye=4*60*60*1e3;function jo(n){return n&&n._delegate?n._delegate:n}var ei=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var hK=[],Oe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Oe||{}),fK={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},pK=Oe.INFO,gK={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},mK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=gK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zo=class{constructor(e){this.name=e,this._logLevel=pK,this._logHandler=mK,this._userLogHandler=null,hK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}};var V0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yK(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function yK(n){return n.getComponent()?.type==="VERSION"}var U0="@firebase/app",rF="0.14.4";var vs=new zo("@firebase/app"),_K="@firebase/app-compat",vK="@firebase/analytics-compat",wK="@firebase/analytics",IK="@firebase/app-check-compat",EK="@firebase/app-check",bK="@firebase/auth",TK="@firebase/auth-compat",CK="@firebase/database",DK="@firebase/data-connect",SK="@firebase/database-compat",AK="@firebase/functions",RK="@firebase/functions-compat",MK="@firebase/installations",PK="@firebase/installations-compat",xK="@firebase/messaging",kK="@firebase/messaging-compat",NK="@firebase/performance",OK="@firebase/performance-compat",LK="@firebase/remote-config",FK="@firebase/remote-config-compat",VK="@firebase/storage",UK="@firebase/storage-compat",BK="@firebase/firestore",jK="@firebase/ai",zK="@firebase/firestore-compat",$K="firebase",qK="12.4.0";var HK={[U0]:"fire-core",[_K]:"fire-core-compat",[wK]:"fire-analytics",[vK]:"fire-analytics-compat",[EK]:"fire-app-check",[IK]:"fire-app-check-compat",[bK]:"fire-auth",[TK]:"fire-auth-compat",[CK]:"fire-rtdb",[DK]:"fire-data-connect",[SK]:"fire-rtdb-compat",[AK]:"fire-fn",[RK]:"fire-fn-compat",[MK]:"fire-iid",[PK]:"fire-iid-compat",[xK]:"fire-fcm",[kK]:"fire-fcm-compat",[NK]:"fire-perf",[OK]:"fire-perf-compat",[LK]:"fire-rc",[FK]:"fire-rc-compat",[VK]:"fire-gcs",[UK]:"fire-gcs-compat",[BK]:"fire-fst",[zK]:"fire-fst-compat",[jK]:"fire-vertex","fire-js":"fire-js",[$K]:"fire-js-all"};var GK=new Map,WK=new Map,iF=new Map;function sF(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $o(n){let e=n.name;if(iF.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;iF.set(e,n);for(let t of GK.values())sF(t,n);for(let t of WK.values())sF(t,n);return!0}function ws(n){return n==null?!1:n.settings!==void 0}var KK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},z0=new ys("app","Firebase",KK);var Il=qK;function _s(n,e,t){let r=HK[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(o.join(" "));return}$o(new ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var QK="firebase-heartbeat-database",YK=1,hf="firebase-heartbeat-store",F0=null;function lF(){return F0||(F0=c_(QK,YK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hf)}catch(t){console.warn(t)}}}}).catch(n=>{throw z0.create("idb-open",{originalErrorMessage:n.message})})),F0}function JK(n){return b(this,null,function*(){try{let t=(yield lF()).transaction(hf),r=yield t.objectStore(hf).get(dF(n));return yield t.done,r}catch(e){if(e instanceof Cr)vs.warn(e.message);else{let t=z0.create("idb-get",{originalErrorMessage:e?.message});vs.warn(t.message)}}})}function oF(n,e){return b(this,null,function*(){try{let r=(yield lF()).transaction(hf,"readwrite");yield r.objectStore(hf).put(e,dF(n)),yield r.done}catch(t){if(t instanceof Cr)vs.warn(t.message);else{let r=z0.create("idb-set",{originalErrorMessage:t?.message});vs.warn(r.message)}}})}function dF(n){return`${n.name}!${n.options.appId}`}var ZK=1024,XK=30,B0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new j0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>XK){let i=tQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vs.warn(e)}})}getHeartbeatsHeader(){return b(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=aF(),{heartbeatsToSend:t,unsentEntries:r}=eQ(this._heartbeatsCache.heartbeats),i=N0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vs.warn(e),""}})}};function aF(){return new Date().toISOString().substring(0,10)}function eQ(n,e=ZK){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var j0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return O0()?tF().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield JK(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return oF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return oF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function cF(n){return N0(JSON.stringify({version:2,heartbeats:n})).length}function tQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function nQ(n){$o(new ei("platform-logger",e=>new V0(e),"PRIVATE")),$o(new ei("heartbeat",e=>new B0(e),"PRIVATE")),_s(U0,rF,n),_s(U0,rF,"esm2020"),_s("fire-js","")}nQ("");function vF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wF=vF,IF=new ys("auth","Firebase",vF());var A_=new zo("@firebase/auth");function aQ(n,...e){A_.logLevel<=Oe.WARN&&A_.warn(`Auth (${Il}): ${n}`,...e)}function D_(n,...e){A_.logLevel<=Oe.ERROR&&A_.error(`Auth (${Il}): ${n}`,...e)}function hF(n,...e){throw eC(n,...e)}function X0(n,...e){return eC(n,...e)}function EF(n,e,t){let r=ae(z({},wF()),{[e]:t});return new ys("auth","Firebase",r).create(e,{appName:n.name})}function S_(n){return EF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return IF.create(n,...e)}function et(n,e,...t){if(!n)throw eC(e,...t)}function ff(n){let e="INTERNAL ASSERTION FAILED: "+n;throw D_(e),new Error(e)}function R_(n,e){n||ff(e)}function cQ(){return fF()==="http:"||fF()==="https:"}function fF(){return typeof self<"u"&&self.location?.protocol||null}function uQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cQ()||ZL()||"connection"in navigator)?navigator.onLine:!0}function lQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,R_(t>e,"Short delay should be less than long delay!"),this.isMobile=YL()||XL()}get(){return uQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dQ(n,e){R_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var M_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ff("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ff("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ff("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var hQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var fQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pQ=new dc(3e4,6e4);function bF(n,e){return n.tenantId&&!e.tenantId?ae(z({},e),{tenantId:n.tenantId}):e}function O_(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return TF(n,i,()=>b(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=L0(z({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let E=z({method:e,headers:I},d);return JL()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&df(n.emulatorConfig.host)&&(E.credentials="include"),M_.fetch()(yield CF(n,n.config.apiHost,t,g),E)}))})}function TF(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=z(z({},hQ),e);try{let i=new H0(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw C_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw C_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw C_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw C_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw EF(n,h,d);hF(n,h)}}catch(i){if(i instanceof Cr)throw i;hF(n,"network-request-failed",{message:String(i)})}})}function CF(n,e,t,r){return b(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?dQ(n.config,i):`${n.config.apiScheme}://${i}`;return fQ.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var H0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(X0(this.auth,"network-request-failed")),pQ.get())})}};function C_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=X0(n,e,r);return i.customData._tokenResponse=t,i}function gQ(n,e){return b(this,null,function*(){return O_(n,"POST","/v1/accounts:delete",e)})}function P_(n,e){return b(this,null,function*(){return O_(n,"POST","/v1/accounts:lookup",e)})}function pf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function DF(n,e=!1){return b(this,null,function*(){let t=jo(n),r=yield t.getIdToken(e),i=SF(r);et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:pf($0(i.auth_time)),issuedAtTime:pf($0(i.iat)),expirationTime:pf($0(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function $0(n){return Number(n)*1e3}function SF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return D_("JWT malformed, contained fewer than 3 sections"),null;try{let i=T_(t);return i?JSON.parse(i):(D_("Failed to decode base64 JWT payload"),null)}catch(i){return D_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pF(n){let e=SF(n);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function G0(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Cr&&mQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function mQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var W0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pf(this.lastLoginAt),this.creationTime=pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function x_(n){return b(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield G0(n,P_(e,{idToken:t}));et(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?RF(i.providerUserInfo):[],o=yQ(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function AF(n){return b(this,null,function*(){let e=jo(n);yield x_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function yQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=rh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function _Q(n,e){return b(this,null,function*(){let t=yield TF(n,{},()=>b(null,null,function*(){let r=L0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield CF(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&df(n.emulatorConfig.host)&&(c.credentials="include"),M_.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function vQ(n,e){return b(this,null,function*(){return O_(n,"POST","/v2/accounts:revokeToken",bF(n,e))})}var gf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){et(e.length!==0,"internal-error");let t=pF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield _Q(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(et(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(et(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(et(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ff("not implemented")}};function qo(n,e){et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var uc=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=rh(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield G0(this,this.stsTokenManager.getToken(this.auth,e));return et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return DF(this,e)}reload(){return AF(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>z({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ae(z({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield x_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(ws(this.auth.app))return Promise.reject(S_(this.auth));let e=yield this.getIdToken();return yield G0(this,gQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return ae(z({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>z({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:I,isAnonymous:E,providerData:M,stsTokenManager:F}=t;et(g&&F,e,"internal-error");let k=gf.fromJSON(this.name,F);et(typeof g=="string",e,"internal-error"),qo(r,e.name),qo(i,e.name),et(typeof I=="boolean",e,"internal-error"),et(typeof E=="boolean",e,"internal-error"),qo(s,e.name),qo(o,e.name),qo(a,e.name),qo(c,e.name),qo(d,e.name),qo(h,e.name);let q=new n({uid:g,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return M&&Array.isArray(M)&&(q.providerData=M.map(te=>z({},te))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new gf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield x_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];et(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?RF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new gf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var gF=new Map;function lc(n){R_(n instanceof Function,"Expected a class definition");let e=gF.get(n);return e?(R_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gF.set(n,e),e)}var wQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),K0=wQ;function q0(n,e,t){return`firebase:${n}:${e}:${t}`}var k_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=q0(this.userKey,i.apiKey,s),this.fullPersistenceKey=q0("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield P_(this.auth,{idToken:e}).catch(()=>{});return t?uc._fromGetAccountInfoResponse(this.auth,t,e):null}return uc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(lc(K0),e,r);let i=(yield Promise.all(t.map(d=>b(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||lc(K0),o=q0(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let I=yield P_(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield uc._fromGetAccountInfoResponse(e,I,h)}else g=uc._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>b(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function mF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DQ(e))return"Blackberry";if(SQ(e))return"Webos";if(EQ(e))return"Safari";if((e.includes("chrome/")||bQ(e))&&!e.includes("edge/"))return"Chrome";if(CQ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function IQ(n=hr()){return/firefox\//i.test(n)}function EQ(n=hr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bQ(n=hr()){return/crios\//i.test(n)}function TQ(n=hr()){return/iemobile/i.test(n)}function CQ(n=hr()){return/android/i.test(n)}function DQ(n=hr()){return/blackberry/i.test(n)}function SQ(n=hr()){return/webos/i.test(n)}function MF(n,e=[]){let t;switch(n){case"Browser":t=mF(hr());break;case"Worker":t=`${mF(hr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Il}/${r}`}var Q0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function AQ(t){return b(this,arguments,function*(n,e={}){return O_(n,"GET","/v2/passwordPolicy",bF(n,e))})}var RQ=6,Y0=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var J0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N_(this),this.idTokenSubscription=new N_(this),this.beforeStateQueue=new Q0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lc(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield k_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield P_(this,{idToken:e}),r=yield uc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){if(ws(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield x_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=lQ()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(ws(this.app))return Promise.reject(S_(this));let t=e?jo(e):null;return t&&et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return ws(this.app)?Promise.reject(S_(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ws(this.app)?Promise.reject(S_(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(lc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield AQ(this),t=new Y0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ys("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vQ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&lc(e)||this._popupRedirectResolver;et(t,this,"argument-error"),this.redirectPersistenceManager=yield k_.create(this,[lc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return b(this,null,function*(){if(ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aQ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function MQ(n){return jo(n)}var N_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nF(t=>this.observer=t)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var PQ={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xQ(n){PQ=n}function kQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function NQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(lc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tC(n,e,t,r){return jo(n).onAuthStateChanged(e,t,r)}var b_e=kQ("rcb"),T_e=new dc(3e4,6e4);var C_e=new dc(2e3,1e4);var D_e=10*60*1e3;var S_e=new dc(3e4,6e4);var A_e=new dc(5e3,15e3);var R_e=encodeURIComponent("fac");var yF="@firebase/auth",_F="1.11.0";var Z0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LQ(n){$o(new ei("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MF(n)},d=new J0(r,i,s,c);return NQ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$o(new ei("auth-internal",e=>{let t=MQ(e.getProvider("auth").getImmediate());return(r=>new Z0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(yF,_F,OQ(n)),_s(yF,_F,"esm2020")}var FQ=5*60,M_e=QL("authIdTokenMaxAge")||FQ;function VQ(){return document.getElementsByTagName("head")?.[0]??document}xQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=X0("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",VQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LQ("Browser");function PF(n){return new Me(function(e){var t=tC(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function KF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QF=KF,YF=new fs("auth","Firebase",KF());var j_=new Lo("@firebase/auth");function jQ(n,...e){j_.logLevel<=Ue.WARN&&j_.warn(`Auth (${Pi}): ${n}`,...e)}function F_(n,...e){j_.logLevel<=Ue.ERROR&&j_.error(`Auth (${Pi}): ${n}`,...e)}function Dr(n,...e){throw EC(n,...e)}function ti(n,...e){return EC(n,...e)}function IC(n,e,t){let r=Object.assign(Object.assign({},QF()),{[e]:t});return new fs("auth","Firebase",r).create(e,{appName:n.name})}function bs(n){return IC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zQ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dr(n,"argument-error"),IC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function EC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YF.create(n,...e)}function pe(n,e,...t){if(!n)throw EC(e,...t)}function Is(n){let e="INTERNAL ASSERTION FAILED: "+n;throw F_(e),new Error(e)}function Ts(n,e){n||Is(e)}function iC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $Q(){return xF()==="http:"||xF()==="https:"}function xF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function qQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($Q()||dL()||"connection"in navigator)?navigator.onLine:!0}function HQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var hc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ts(t>e,"Short delay should be less than long delay!"),this.isMobile=uL()||hL()}get(){return qQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bC(n,e){Ts(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var z_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var WQ=new hc(3e4,6e4);function Go(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Cs(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return JF(n,i,()=>b(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=ll(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:I},d);return lL()||(E.referrerPolicy="no-referrer"),z_.fetch()(ZF(n,n.config.apiHost,t,g),E)}))})}function JF(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},GQ),e);try{let i=new sC(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw L_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw L_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw L_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw L_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw IC(n,h,d);Dr(n,h)}}catch(i){if(i instanceof kn)throw i;Dr(n,"network-request-failed",{message:String(i)})}})}function bf(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){let d=yield Cs(n,e,t,r,i);return"mfaPendingCredential"in d&&Dr(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function ZF(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?bC(n.config,i):`${n.config.apiScheme}://${i}`}function KQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var sC=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),WQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function L_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ti(n,e,r);return i.customData._tokenResponse=t,i}function kF(n){return n!==void 0&&n.enterprise!==void 0}var oC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function QQ(n,e){return b(this,null,function*(){return Cs(n,"GET","/v2/recaptchaConfig",Go(n,e))})}function YQ(n,e){return b(this,null,function*(){return Cs(n,"POST","/v1/accounts:delete",e)})}function XF(n,e){return b(this,null,function*(){return Cs(n,"POST","/v1/accounts:lookup",e)})}function yf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function TC(n,e=!1){return b(this,null,function*(){let t=ht(n),r=yield t.getIdToken(e),i=CC(r);pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:yf(nC(i.auth_time)),issuedAtTime:yf(nC(i.iat)),expirationTime:yf(nC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function nC(n){return Number(n)*1e3}function CC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return F_("JWT malformed, contained fewer than 3 sections"),null;try{let i=XT(t);return i?JSON.parse(i):(F_("Failed to decode base64 JWT payload"),null)}catch(i){return F_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function NF(n){let e=CC(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function bl(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof kn&&JQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function JQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var aC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var vf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yf(this.lastLoginAt),this.creationTime=yf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $_(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield bl(n,XF(t,{idToken:r}));pe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eV(s.providerUserInfo):[],a=ZQ(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function DC(n){return b(this,null,function*(){let e=ht(n);yield $_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ZQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eV(n){return n.map(e=>{var{providerId:t}=e,r=Dg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function XQ(n,e){return b(this,null,function*(){let t=yield JF(n,{},()=>b(null,null,function*(){let r=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=ZF(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",z_.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function eY(n,e){return b(this,null,function*(){return Cs(n,"POST","/v2/accounts:revokeToken",Go(n,e))})}var _f=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let t=NF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield XQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Is("not implemented")}};function Ho(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Tl=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vf(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield bl(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return TC(this,e)}reload(){return DC(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield $_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Tr(this.auth.app))return Promise.reject(bs(this.auth));let e=yield this.getIdToken();return yield bl(this,YQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,M=(o=t.photoURL)!==null&&o!==void 0?o:void 0,F=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,te=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:oe,isAnonymous:je,providerData:le,stsTokenManager:D}=t;pe(Y&&D,e,"internal-error");let _=_f.fromJSON(this.name,D);pe(typeof Y=="string",e,"internal-error"),Ho(g,e.name),Ho(I,e.name),pe(typeof oe=="boolean",e,"internal-error"),pe(typeof je=="boolean",e,"internal-error"),Ho(E,e.name),Ho(M,e.name),Ho(F,e.name),Ho(k,e.name),Ho(q,e.name),Ho(te,e.name);let w=new n({uid:Y,auth:e,email:I,emailVerified:oe,displayName:g,isAnonymous:je,photoURL:M,phoneNumber:E,tenantId:F,stsTokenManager:_,createdAt:q,lastLoginAt:te});return le&&Array.isArray(le)&&(w.providerData=le.map(C=>Object.assign({},C))),k&&(w._redirectEventId=k),w}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new _f;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];pe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?eV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new _f;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var OF=new Map;function Es(n){Ts(n instanceof Function,"Expected a class definition");let e=OF.get(n);return e?(Ts(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OF.set(n,e),e)}var tY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),cC=tY;function V_(n,e,t){return`firebase:${n}:${e}:${t}`}var q_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=V_(this.userKey,i.apiKey,s),this.fullPersistenceKey=V_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Tl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Es(cC),e,r);let i=(yield Promise.all(t.map(d=>b(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Es(cC),o=V_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g=Tl._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>b(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function LF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oV(e))return"Blackberry";if(aV(e))return"Webos";if(nV(e))return"Safari";if((e.includes("chrome/")||rV(e))&&!e.includes("edge/"))return"Chrome";if(sV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function tV(n=cn()){return/firefox\//i.test(n)}function nV(n=cn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rV(n=cn()){return/crios\//i.test(n)}function iV(n=cn()){return/iemobile/i.test(n)}function sV(n=cn()){return/android/i.test(n)}function oV(n=cn()){return/blackberry/i.test(n)}function aV(n=cn()){return/webos/i.test(n)}function SC(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nY(n=cn()){var e;return SC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rY(){return fL()&&document.documentMode===10}function cV(n=cn()){return SC(n)||sV(n)||aV(n)||oV(n)||/windows phone/i.test(n)||iV(n)}function uV(n,e=[]){let t;switch(n){case"Browser":t=LF(cn());break;case"Worker":t=`${LF(cn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pi}/${r}`}var uC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function iY(t){return b(this,arguments,function*(n,e={}){return Cs(n,"GET","/v2/passwordPolicy",Go(n,e))})}var sY=6,lC=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:sY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var dC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new uC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield q_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield XF(this,{idToken:e}),r=yield Tl._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Tr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield $_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=HQ()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Tr(this.app))return Promise.reject(bs(this));let t=e?ht(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Tr(this.app)?Promise.reject(bs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tr(this.app)?Promise.reject(bs(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Es(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield iY(this),t=new lC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eY(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Es(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=yield q_.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&jQ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wo(n){return ht(n)}var H_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yL(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ev={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oY(n){ev=n}function lV(n){return ev.loadJS(n)}function aY(){return ev.recaptchaEnterpriseScript}function cY(){return ev.gapiScript}function dV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var uY="recaptcha-enterprise",lY="NO_RECAPTCHA",hC=class{constructor(e){this.type=uY,this.auth=Wo(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>b(null,null,function*(){QQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new oC(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;kF(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(lY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&kF(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=aY();c.length!==0&&(c+=a),lV(c).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})})}};function FF(n,e,t,r=!1){return b(this,null,function*(){let i=new hC(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function fC(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield FF(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>b(null,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield FF(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function AC(n,e){let t=ic(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(nc(s,e??{}))return i;Dr(i,"already-initialized")}return t.initialize({options:e})}function dY(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function RC(n,e,t){let r=Wo(n);pe(r._canInitEmulator,r,"emulator-config-failed"),pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=hV(e),{host:o,port:a}=hY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||fY()}function hV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hY(n){let e=hV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:VF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:VF(o)}}}function VF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function fY(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Cl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}};function pY(n,e){return b(this,null,function*(){return Cs(n,"POST","/v1/accounts:signUp",e)})}function gY(n,e){return b(this,null,function*(){return bf(n,"POST","/v1/accounts:signInWithPassword",Go(n,e))})}function mY(n,e){return b(this,null,function*(){return bf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))})}function yY(n,e){return b(this,null,function*(){return bf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))})}var wf=class n extends Cl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,t,"signInWithPassword",gY);case"emailLink":return mY(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,r,"signUpPassword",pY);case"emailLink":return yY(e,{idToken:t,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function El(n,e){return b(this,null,function*(){return bf(n,"POST","/v1/accounts:signInWithIdp",Go(n,e))})}var _Y="http://localhost",G_=class n extends Cl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Dg(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return El(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,El(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,El(e,t)}buildRequest(){let e={requestUri:_Y,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ll(t)}return e}};function vY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wY(n){let e=dl(hl(n)).link,t=e?dl(hl(e)).deep_link_id:null,r=dl(hl(n)).deep_link_id;return(r?dl(hl(r)).link:null)||r||t||e||n}var W_=class n{constructor(e){var t,r,i,s,o,a;let c=dl(hl(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=vY((i=c.mode)!==null&&i!==void 0?i:null);pe(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=wY(e);try{return new n(t)}catch{return null}}};var fV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return wf._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=W_.parseLink(r);return pe(i,"argument-error"),wf._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),If=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var K_=class extends If{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var MC=(()=>{class n extends K_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return G_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function IY(n,e){return b(this,null,function*(){return bf(n,"POST","/v1/accounts:signUp",Go(n,e))})}var Dl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let s=yield Tl._fromIdTokenResponse(e,r,i),o=UF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function UF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var pC=class n extends kn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function pV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pC._fromErrorAndOperation(n,s,e,r):s})}function EY(n,e,t=!1){return b(this,null,function*(){let r=yield bl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Dl._forOperation(n,"link",r)})}function bY(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Tr(r.app))return Promise.reject(bs(r));let i="reauthenticate";try{let s=yield bl(n,pV(r,i,e,n),t);pe(s.idToken,r,"internal-error");let o=CC(s.idToken);pe(o,r,"internal-error");let{sub:a}=o;return pe(n.uid===a,r,"user-mismatch"),Dl._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dr(r,"user-mismatch"),s}})}function gV(n,e,t=!1){return b(this,null,function*(){if(Tr(n.app))return Promise.reject(bs(n));let r="signIn",i=yield pV(n,r,e),s=yield Dl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function PC(n,e){return b(this,null,function*(){return gV(Wo(n),e)})}function mV(n){return b(this,null,function*(){let e=Wo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function xC(n,e,t){return b(this,null,function*(){if(Tr(n.app))return Promise.reject(bs(n));let r=Wo(n),o=yield fC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&mV(n),c}),a=yield Dl._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function kC(n,e,t){return Tr(n.app)?Promise.reject(bs(n)):PC(ht(n),fV.credential(e,t)).catch(r=>b(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&mV(n),r}))}function TY(n,e){return b(this,null,function*(){return Cs(n,"POST","/v1/accounts:update",e)})}function NC(r,i){return b(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=ht(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield bl(s,TY(s.auth,a));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let d=s.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function OC(n,e,t,r){return ht(n).onIdTokenChanged(e,t,r)}function LC(n,e,t){return ht(n).beforeAuthStateChanged(e,t)}function FC(n){return ht(n).signOut()}var Q_="__sak";var Y_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Q_,"1"),this.storage.removeItem(Q_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var CY=1e3,DY=10,SY=(()=>{class n extends Y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);rY()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,DY):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},CY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield gi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield gi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield gi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),yV=SY;var AY=(()=>{class n extends Y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),VC=AY;function RY(n){return Promise.all(n.map(e=>b(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var MY=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>b(this,null,function*(){return h(r.origin,o)})),d=yield RY(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function UC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var gC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=UC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ki(){return window}function PY(n){ki().location.href=n}function _V(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}function xY(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kY(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NY(){return _V()?self:null}var vV="firebaseLocalStorageDb",OY=1,J_="firebaseLocalStorage",wV="fbase_key",fc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function tv(n,e){return n.transaction([J_],e?"readwrite":"readonly").objectStore(J_)}function LY(){let n=indexedDB.deleteDatabase(vV);return new fc(n).toPromise()}function mC(){let n=indexedDB.open(vV,OY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(J_,{keyPath:wV})}catch(i){t(i)}}),n.addEventListener("success",()=>b(null,null,function*(){let r=n.result;r.objectStoreNames.contains(J_)?e(r):(r.close(),yield LY(),e(yield mC()))}))})}function BF(n,e,t){return b(this,null,function*(){let r=tv(n,!0).put({[wV]:e,value:t});return new fc(r).toPromise()})}function FY(n,e){return b(this,null,function*(){let t=tv(n,!1).get(e),r=yield new fc(t).toPromise();return r===void 0?null:r.value})}function jF(n,e){let t=tv(n,!0).delete(e);return new fc(t).toPromise()}var VY=800,UY=3,BY=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield mC(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>UY)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return _V()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=MY._getInstance(NY()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield xY(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kY()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield mC();return yield BF(t,Q_,"1"),yield jF(t,Q_),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>BF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>FY(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>jF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=tv(s,!1).getAll();return new fc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),VY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),IV=BY;var vwe=dV("rcb"),wwe=new hc(3e4,6e4);function EV(n,e){return e?Es(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ef=class extends Cl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,t){return El(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jY(n){return gV(n.auth,new Ef(n),n.bypassAuthState)}function zY(n){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),bY(t,new Ef(n),n.bypassAuthState)}function $Y(n){return b(this,null,function*(){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),EY(t,new Ef(n),n.bypassAuthState)})}var Z_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jY;case"linkViaPopup":case"linkViaRedirect":return $Y;case"reauthViaPopup":case"reauthViaRedirect":return zY;default:Dr(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var qY=new hc(2e3,1e4);function BC(n,e,t){return b(this,null,function*(){if(Tr(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));let r=Wo(n);zQ(n,e,If);let i=EV(r,t);return new HY(r,"signInViaPopup",e,i).executeNotNull()})}var HY=(()=>{class n extends Z_{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return pe(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Ts(this.filter.length===1,"Popup operations only handle one event");let t=UC();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qY.get())};t()}}n.currentPopupAction=null;return n})(),GY="pendingRedirect",U_=new Map,yC=class n extends Z_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=U_.get(this.auth._key());if(!e){try{let r=(yield WY(this.resolver,this.auth))?yield gi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}U_.set(this.auth._key(),e)}return this.bypassAuthState||U_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return gi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function WY(n,e){return b(this,null,function*(){let t=YY(e),r=QY(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function KY(n,e){U_.set(n._key(),e)}function QY(n){return Es(n._redirectPersistence)}function YY(n){return V_(GY,n.config.apiKey,n.name)}function JY(n,e,t=!1){return b(this,null,function*(){if(Tr(n.app))return Promise.reject(bs(n));let r=Wo(n),i=EV(r,e),o=yield new yC(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var ZY=10*60*1e3,_C=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XY(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!bV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZY&&this.cachedEventUids.clear(),this.cachedEventUids.has(zF(e))}saveEventToCache(e){this.cachedEventUids.add(zF(e)),this.lastProcessedEventTime=Date.now()}};function zF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function XY(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bV(n);default:return!1}}function eJ(t){return b(this,arguments,function*(n,e={}){return Cs(n,"GET","/v1/projects",e)})}var tJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nJ=/^https?/;function rJ(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield eJ(n);for(let t of e)try{if(iJ(t))return}catch{}Dr(n,"unauthorized-domain")})}function iJ(n){let e=iC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!nJ.test(t))return!1;if(tJ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var sJ=new hc(3e4,6e4);function $F(){let n=ki().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oJ(n){return new Promise((e,t)=>{var r,i,s;function o(){$F(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$F(),t(ti(n,"network-request-failed"))},timeout:sJ.get()})}if(!((i=(r=ki().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ki().gapi)===null||s===void 0)&&s.load)o();else{let a=dV("iframefcb");return ki()[a]=()=>{gapi.load?o():t(ti(n,"network-request-failed"))},lV(`${cY()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw B_=null,e})}var B_=null;function aJ(n){return B_=B_||oJ(n),B_}var cJ=new hc(5e3,15e3),uJ="__/auth/iframe",lJ="emulator/auth/iframe",dJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fJ(n){let e=n.config;pe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?bC(e,lJ):`https://${n.config.authDomain}/${uJ}`,r={apiKey:e.apiKey,appName:n.name,v:Pi},i=hJ.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ll(r).slice(1)}`}function pJ(n){return b(this,null,function*(){let e=yield aJ(n),t=ki().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:fJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dJ,dontclear:!0},r=>new Promise((i,s)=>b(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ti(n,"network-request-failed"),a=ki().setTimeout(()=>{s(o)},cJ.get());function c(){ki().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var gJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mJ=500,yJ=600,_J="_blank",vJ="http://localhost",X_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wJ(n,e,t,r=mJ,i=yJ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},gJ),{width:r.toString(),height:i.toString(),top:s,left:o}),d=cn().toLowerCase();t&&(a=rV(d)?_J:t),tV(d)&&(e=e||vJ,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[E,M])=>`${I}${E}=${M},`,"");if(nY(d)&&a!=="_self")return IJ(e||"",a),new X_(null);let g=window.open(e||"",a,h);pe(g,n,"popup-blocked");try{g.focus()}catch{}return new X_(g)}function IJ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var EJ="__/auth/handler",bJ="emulator/auth/handler",TJ=encodeURIComponent("fac");function qF(n,e,t,r,i,s){return b(this,null,function*(){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pi,eventId:i};if(e instanceof If){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",mL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof K_){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${TJ}=${encodeURIComponent(c)}`:"";return`${CJ(n)}?${ll(a).slice(1)}${d}`})}function CJ({config:n}){return n.emulator?bC(n,bJ):`https://${n.authDomain}/${EJ}`}var rC="webStorageSupport",vC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VC,this._completeRedirectFn=JY,this._overrideRedirectResult=KY}_openPopup(e,t,r,i){return b(this,null,function*(){var s;Ts((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qF(e,t,r,iC(),i);return wJ(e,o,UC())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let s=yield qF(e,t,r,iC(),i);return PY(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ts(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield pJ(e),r=new _C(e);return t.register("authEvent",i=>(pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rC,{type:rC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[rC];o!==void 0&&t(!!o),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cV()||nV()||SC()}},TV=vC;var HF="@firebase/auth",GF="1.7.9";var wC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SJ(n){Mi(new Jn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uV(n)},d=new dC(r,i,s,c);return dY(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mi(new Jn("auth-internal",e=>{let t=Wo(e.getProvider("auth").getImmediate());return(r=>new wC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(HF,GF,DJ(n)),_t(HF,GF,"esm2017")}var AJ=5*60,RJ=n0("authIdTokenMaxAge")||AJ,WF=null,MJ=n=>e=>b(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RJ)return;let i=t?.token;WF!==i&&(WF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jC(n=Vo()){let e=ic(n,"auth");if(e.isInitialized())return e.getImmediate();let t=AC(n,{popupRedirectResolver:TV,persistence:[IV,yV,VC]}),r=n0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=MJ(s.toString());LC(t,o,()=>o(t.currentUser)),OC(t,a=>o(a))}}let i=e0("auth");return i&&RC(t,`http://${i}`),t}function PJ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}oY({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",PJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SJ("Browser");var CV="auth",pc=class{constructor(e){return e}},gc=class{constructor(){return cc(CV)}};var zC=new Q("angularfire2.auth-instances");function vZ(n,e){let t=wl(CV,n,e);return t&&new pc(t)}function wZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pc(r)}}var IZ={provide:gc,deps:[[new Zt,zC]]},EZ={provide:pc,useFactory:vZ,deps:[[new Zt,zC],Xr]};function DV(n,...e){return _t("angularfire",gs.full,"auth"),vn([EZ,IZ,{provide:zC,useFactory:wZ(n),multi:!0,deps:[Pe,Dt,Bo,ms,[new Zt,Uo],...e]}])}var SV=nt(PF,!0);var AV=nt(xC,!0);var RV=nt(jC,!0);var MV=nt(kC,!0);var PV=nt(BC,!0);var xV=nt(FC,!0);var kV=nt(NC,!0);var NV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},OV={};var Ds,$C;(function(){var n;function e(D,_){function w(){}w.prototype=_.prototype,D.F=_.prototype,D.prototype=new w,D.prototype.constructor=D,D.D=function(C,T,R){for(var v=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)v[ft-2]=arguments[ft];return _.prototype[T].apply(C,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,w){w||(w=0);let C=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)C[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;T<16;++T)C[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=D.g[0],w=D.g[1],T=D.g[2];let R=D.g[3],v;v=_+(R^w&(T^R))+C[0]+3614090360&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[3]+3250441966&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[7]+4249261313&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[11]+2304563134&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[15]+1236535329&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(T^R&(w^T))+C[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[0]+3921069994&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[4]+3889429448&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[8]+1163531501&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[12]+2368359562&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(w^T^R)+C[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[14]+4259657740&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[10]+3200236656&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[6]+76029189&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[2]+3299628645&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(T^(w|~R))+C[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[5]+4237533241&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[1]+2240044497&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[13]+1309151649&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+R&4294967295}r.prototype.v=function(D,_){_===void 0&&(_=D.length);let w=_-this.blockSize,C=this.C,T=this.h,R=0;for(;R<_;){if(T==0)for(;R<=w;)i(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<_;)if(C[T++]=D.charCodeAt(R++),T==this.blockSize){i(this,C),T=0;break}}else for(;R<_;)if(C[T++]=D[R++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=_},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;_=this.o*8;for(var w=D.length-8;w<D.length;++w)D[w]=_&255,_/=256;for(this.v(D),D=Array(16),_=0,w=0;w<4;++w)for(let C=0;C<32;C+=8)D[_++]=this.g[w]>>>C&255;return D};function s(D,_){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=_(D)}function o(D,_){this.h=_;let w=[],C=!0;for(let T=D.length-1;T>=0;T--){let R=D[T]|0;C&&R==_||(w[T]=R,C=!1)}this.g=w}var a={};function c(D){return-128<=D&&D<128?s(D,function(_){return new o([_|0],_<0?-1:0)}):new o([D|0],D<0?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return k(d(-D));let _=[],w=1;for(let C=0;D>=w;C++)_[C]=D/w|0,w*=4294967296;return new o(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return k(h(D.substring(1),_));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=d(Math.pow(_,8)),C=g;for(let R=0;R<D.length;R+=8){var T=Math.min(8,D.length-R);let v=parseInt(D.substring(R,R+T),_);T<8?(T=d(Math.pow(_,T)),C=C.j(T).add(d(v))):(C=C.j(w),C=C.add(d(v)))}return C}var g=c(0),I=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(F(this))return-k(this).m();let D=0,_=1;for(let w=0;w<this.g.length;w++){let C=this.i(w);D+=(C>=0?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(F(this))return"-"+k(this).toString(D);let _=d(Math.pow(D,6));var w=this;let C="";for(;;){let T=oe(w,_).g;w=q(w,T.j(_));let R=((w.g.length>0?w.g[0]:w.h)>>>0).toString(D);if(w=T,M(w))return R+C;for(;R.length<6;)R="0"+R;C=R+C}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(let _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function F(D){return D.h==-1}n.l=function(D){return D=q(this,D),F(D)?-1:M(D)?0:1};function k(D){let _=D.g.length,w=[];for(let C=0;C<_;C++)w[C]=~D.g[C];return new o(w,~D.h).add(I)}n.abs=function(){return F(this)?k(this):this},n.add=function(D){let _=Math.max(this.g.length,D.g.length),w=[],C=0;for(let T=0;T<=_;T++){let R=C+(this.i(T)&65535)+(D.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);C=v>>>16,R&=65535,v&=65535,w[T]=v<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function q(D,_){return D.add(k(_))}n.j=function(D){if(M(this)||M(D))return g;if(F(this))return F(D)?k(this).j(k(D)):k(k(this).j(D));if(F(D))return k(this.j(k(D)));if(this.l(E)<0&&D.l(E)<0)return d(this.m()*D.m());let _=this.g.length+D.g.length,w=[];for(var C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(let T=0;T<D.g.length;T++){let R=this.i(C)>>>16,v=this.i(C)&65535,ft=D.i(T)>>>16,On=D.i(T)&65535;w[2*C+2*T]+=v*On,te(w,2*C+2*T),w[2*C+2*T+1]+=R*On,te(w,2*C+2*T+1),w[2*C+2*T+1]+=v*ft,te(w,2*C+2*T+1),w[2*C+2*T+2]+=R*ft,te(w,2*C+2*T+2)}for(D=0;D<_;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=_;D<2*_;D++)w[D]=0;return new o(w,0)};function te(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function Y(D,_){this.g=D,this.h=_}function oe(D,_){if(M(_))throw Error("division by zero");if(M(D))return new Y(g,g);if(F(D))return _=oe(k(D),_),new Y(k(_.g),k(_.h));if(F(_))return _=oe(D,k(_)),new Y(k(_.g),_.h);if(D.g.length>30){if(F(D)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var w=I,C=_;C.l(D)<=0;)w=je(w),C=je(C);var T=le(w,1),R=le(C,1);for(C=le(C,2),w=le(w,2);!M(C);){var v=R.add(C);v.l(D)<=0&&(T=T.add(w),R=v),C=le(C,1),w=le(w,1)}return _=q(D,T.j(_)),new Y(T,_)}for(T=g;D.l(_)>=0;){for(w=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),R=d(w),v=R.j(_);F(v)||v.l(D)>0;)w-=C,R=d(w),v=R.j(_);M(R)&&(R=I),T=T.add(R),D=q(D,v)}return new Y(T,D)}n.B=function(D){return oe(this,D).h},n.and=function(D){let _=Math.max(this.g.length,D.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)&D.i(C);return new o(w,this.h&D.h)},n.or=function(D){let _=Math.max(this.g.length,D.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)|D.i(C);return new o(w,this.h|D.h)},n.xor=function(D){let _=Math.max(this.g.length,D.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)^D.i(C);return new o(w,this.h^D.h)};function je(D){let _=D.g.length+1,w=[];for(let C=0;C<_;C++)w[C]=D.i(C)<<1|D.i(C-1)>>>31;return new o(w,D.h)}function le(D,_){let w=_>>5;_%=32;let C=D.g.length-w,T=[];for(let R=0;R<C;R++)T[R]=_>0?D.i(R+w)>>>_|D.i(R+w+1)<<32-_:D.i(R+w);return new o(T,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$C=OV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ds=OV.Integer=o}).apply(typeof NV<"u"?NV:typeof self<"u"?self:typeof window<"u"?window:{});var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ss={};var qC,TZ,Sl,HC,Tf,rv,GC,WC,KC;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nv=="object"&&nv];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var N=l[A];if(!(N in y))break e;y=y[N]}l=l[l.length-1],A=y[l],p=p(A),p!=A&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&y.push([A,p[A]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(A,N,V){for(var K=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)K[ge-2]=arguments[ge];return p.prototype[N].apply(A,K)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function E(l){let p=l.length;if(p>0){let y=Array(p);for(let A=0;A<p;A++)y[A]=l[A];return y}return[]}function M(l,p){for(let A=1;A<arguments.length;A++){let N=arguments[A];var y=typeof N;if(y=y!="object"?y:N?Array.isArray(N)?"array":y:"null",y=="array"||y=="object"&&typeof N.length=="number"){y=l.length||0;let V=N.length||0;l.length=y+V;for(let K=0;K<V;K++)l[y+K]=N[K]}else l.push(N)}}class F{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function q(){var l=D;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,y){let A=Y.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new F(()=>new oe,l=>l.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let je,le=!1,D=new te,_=()=>{let l=Promise.resolve(void 0);je=()=>{l.then(w)}};function w(){for(var l;l=q();){try{l.h.call(l.g)}catch(y){k(y)}var p=Y;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}le=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l}();function v(l){return/^[\s\xa0]*$/.test(l)}function ft(l,p){T.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(ft,T),ft.prototype.init=function(l,p){let y=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ft.Z.h.call(this)},ft.prototype.h=function(){ft.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var On="closure_listenable_"+(Math.random()*1e6|0),uI=0;function da(l,p,y,A,N){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=N,this.key=++uI,this.da=this.fa=!1}function ci(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function js(l,p,y){for(let A in l)p.call(y,l[A],A,l)}function Vp(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function Up(l){let p={};for(let y in l)p[y]=l[y];return p}let Rr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qt(l,p){let y,A;for(let N=1;N<arguments.length;N++){A=arguments[N];for(y in A)l[y]=A[y];for(let V=0;V<Rr.length;V++)y=Rr[V],Object.prototype.hasOwnProperty.call(A,y)&&(l[y]=A[y])}}function jc(l){this.src=l,this.g={},this.h=0}jc.prototype.add=function(l,p,y,A,N){let V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);let K=Nd(l,p,A,N);return K>-1?(p=l[K],y||(p.fa=!1)):(p=new da(p,this.src,V,!!A,N),p.fa=y,l.push(p)),p};function Hi(l,p){let y=p.type;if(y in l.g){var A=l.g[y],N=Array.prototype.indexOf.call(A,p,void 0),V;(V=N>=0)&&Array.prototype.splice.call(A,N,1),V&&(ci(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Nd(l,p,y,A){for(let N=0;N<l.length;++N){let V=l[N];if(!V.da&&V.listener==p&&V.capture==!!y&&V.ha==A)return N}return-1}var Gi="closure_lm_"+(Math.random()*1e6|0),Od={};function Bp(l,p,y,A,N){if(A&&A.once)return $c(l,p,y,A,N);if(Array.isArray(p)){for(let V=0;V<p.length;V++)Bp(l,p[V],y,A,N);return null}return y=Wc(y),l&&l[On]?l.J(p,y,a(A)?!!A.capture:!!A,N):ha(l,p,y,!1,A,N)}function ha(l,p,y,A,N,V){if(!p)throw Error("Invalid event type");let K=a(N)?!!N.capture:!!N,ge=Gc(l);if(ge||(l[Gi]=ge=new jc(l)),y=ge.add(p,y,A,K,V),y.proxy)return y;if(A=zc(),y.proxy=A,A.src=l,A.listener=y,l.addEventListener)R||(N=K),N===void 0&&(N=!1),l.addEventListener(p.toString(),A,N);else if(l.attachEvent)l.attachEvent(Hc(p.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function zc(){function l(y){return p.call(l.src,l.listener,y)}let p=jp;return l}function $c(l,p,y,A,N){if(Array.isArray(p)){for(let V=0;V<p.length;V++)$c(l,p[V],y,A,N);return null}return y=Wc(y),l&&l[On]?l.K(p,y,a(A)?!!A.capture:!!A,N):ha(l,p,y,!0,A,N)}function qc(l,p,y,A,N){if(Array.isArray(p))for(var V=0;V<p.length;V++)qc(l,p[V],y,A,N);else A=a(A)?!!A.capture:!!A,y=Wc(y),l&&l[On]?(l=l.i,V=String(p).toString(),V in l.g&&(p=l.g[V],y=Nd(p,y,A,N),y>-1&&(ci(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[V],l.h--)))):l&&(l=Gc(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Nd(p,y,A,N)),(y=l>-1?p[l]:null)&&fa(y))}function fa(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[On])Hi(p.i,l);else{var y=l.type,A=l.proxy;p.removeEventListener?p.removeEventListener(y,A,l.capture):p.detachEvent?p.detachEvent(Hc(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=Gc(p))?(Hi(y,l),y.h==0&&(y.src=null,p[Gi]=null)):ci(l)}}}function Hc(l){return l in Od?Od[l]:Od[l]="on"+l}function jp(l,p){if(l.da)l=!0;else{p=new ft(p,this);let y=l.listener,A=l.ha||l.src;l.fa&&fa(l),l=y.call(A,p)}return l}function Gc(l){return l=l[Gi],l instanceof jc?l:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wc(l){return typeof l=="function"?l:(l[Ld]||(l[Ld]=function(p){return l.handleEvent(p)}),l[Ld])}function Ht(){C.call(this),this.i=new jc(this),this.M=this,this.G=null}g(Ht,C),Ht.prototype[On]=!0,Ht.prototype.removeEventListener=function(l,p,y,A){qc(this,l,p,y,A)};function Gt(l,p){var y,A=l.G;if(A)for(y=[];A;A=A.G)y.push(A);if(l=l.M,A=p.type||p,typeof p=="string")p=new T(p,l);else if(p instanceof T)p.target=p.target||l;else{var N=p;p=new T(A,l),qt(p,N)}N=!0;let V,K;if(y)for(K=y.length-1;K>=0;K--)V=p.g=y[K],N=pa(V,A,!0,p)&&N;if(V=p.g=l,N=pa(V,A,!0,p)&&N,N=pa(V,A,!1,p)&&N,y)for(K=0;K<y.length;K++)V=p.g=y[K],N=pa(V,A,!1,p)&&N}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let A=0;A<y.length;A++)ci(y[A]);delete l.g[p],l.h--}}this.G=null},Ht.prototype.J=function(l,p,y,A){return this.i.add(String(l),p,!1,y,A)},Ht.prototype.K=function(l,p,y,A){return this.i.add(String(l),p,!0,y,A)};function pa(l,p,y,A){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let V=0;V<p.length;++V){let K=p[V];if(K&&!K.da&&K.capture==y){let ge=K.listener,u=K.ha||K.src;K.fa&&Hi(l.i,K),N=ge.call(u,A)!==!1&&N}}return N&&!A.defaultPrevented}function lI(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function Kc(l){l.g=lI(()=>{l.g=null,l.i&&(l.i=!1,Kc(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class Fd extends C{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(l){C.call(this),this.h=l,this.g={}}g(Wi,C);var Wt=[];function rn(l){js(l.g,function(p,y){this.g.hasOwnProperty(y)&&fa(p)},l),l.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),rn(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=o.JSON.stringify,zp=o.JSON.parse,$p=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function qp(){}function $s(){}var qs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qc(){T.call(this,"d")}g(Qc,T);function ga(){T.call(this,"c")}g(ga,T);var Ki={},Hp=null;function Hs(){return Hp=Hp||new Ht}Ki.Ia="serverreachability";function Vd(l){T.call(this,Ki.Ia,l)}g(Vd,T);function Gs(l){let p=Hs();Gt(p,new Vd(p))}Ki.STAT_EVENT="statevent";function Ws(l,p){T.call(this,Ki.STAT_EVENT,l),this.stat=p}g(Ws,T);function Kt(l){let p=Hs();Gt(p,new Ws(p,l))}Ki.Ja="timingevent";function Yc(l,p){T.call(this,Ki.Ja,l),this.size=p}g(Yc,T);function Xn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Ks(){this.g=!0}Ks.prototype.ua=function(){this.g=!1};function Jc(l,p,y,A,N,V){l.info(function(){if(l.g)if(V){var K="",ge=V.split("&");for(let f=0;f<ge.length;f++){var u=ge[f].split("=");if(u.length>1){let m=u[0];u=u[1];let S=m.split("_");K=S.length>=2&&S[1]=="type"?K+(m+"="+u+"&"):K+(m+"=redacted&")}}}else K=null;else K=V;return"XMLHTTP REQ ("+A+") [attempt "+N+"]: "+p+`
`+y+`
`+K})}function Gp(l,p,y,A,N,V,K){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+N+"]: "+p+`
`+y+`
`+V+" "+K})}function gr(l,p,y,A){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+dn(l,y)+(A?" "+A:"")})}function Wp(l,p){l.info(function(){return"TIMEOUT: "+p})}Ks.prototype.info=function(){};function dn(l,p){if(!l.g)return p;if(!p)return null;try{let V=JSON.parse(p);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var y=V[l];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return zs(V)}catch{return p}}var ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ys;function Ud(){}g(Ud,qp),Ud.prototype.g=function(){return new XMLHttpRequest},Ys=new Ud;function ya(l){return encodeURIComponent(String(l))}function Js(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function ui(l,p,y,A){this.j=l,this.i=p,this.l=y,this.S=A||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kp}function Kp(){this.i=null,this.g="",this.h=!1}var _a={},Zc={};function va(l,p,y){l.M=1,l.A=ba(er(p)),l.u=y,l.R=!0,wa(l,null)}function wa(l,p){l.F=Date.now(),Zs(l),l.B=er(l.A);var y=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),eg(y.i,"t",A),l.C=0,y=l.j.L,l.h=new Kp,l.g=du(l.j,y?p:null,!l.u),l.P>0&&(l.O=new Fd(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,A=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Wt[0]=N.toString()),N=Wt);for(let V=0;V<N.length;V++){let K=Bp(y,N[V],A||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=l.J?Up(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Gs(),Jc(l.i,l.v,l.B,l.l,l.S,l.u)}ui.prototype.ba=function(l){l=l.target;let p=this.O;p&&Ze(l)==3?p.j():this.Y(l)},ui.prototype.Y=function(l){try{if(l==this.g)e:{let ge=Ze(this.g),u=this.g.ya(),f=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||ag(this.g)))){this.K||ge!=4||u==7||(u==8||f<=0?Gs(3):Gs(2)),eu(this);var p=this.g.ca();this.X=p;var y=li(this);if(this.o=p==200,Gp(this.i,this.v,this.B,this.l,this.S,ge,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,N=this.g;if((A=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(A)){var V=A;break t}}V=null}if(l=V)gr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eo(this,l);else{this.o=!1,this.m=3,Kt(12),Qi(this),Xs(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=Qp(this,y),m==Zc){ge==4&&(this.m=4,Kt(14),l=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==_a){this.m=4,Kt(15),gr(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else gr(this.i,this.l,m,null),eo(this,m);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||y.length!=0||this.h.h||(this.m=1,Kt(16),l=!1),this.o=this.o&&l,!l)gr(this.i,this.l,y,"[Invalid Chunked Response]"),Qi(this),Xs(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),cu(K),K.P=!0,Kt(11))}}else gr(this.i,this.l,y,null),eo(this,y);ge==4&&Qi(this),this.o&&!this.K&&(ge==4?Xd(this.j,this):(this.o=!1,Zs(this)))}else dI(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),Qi(this),Xs(this)}}}catch{}finally{}};function li(l){if(!Bd(l))return l.g.la();let p=ag(l.g);if(p==="")return"";let y="",A=p.length,N=Ze(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Qi(l),Xs(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<A;V++)l.h.h=!0,y+=l.h.i.decode(p[V],{stream:!(N&&V==A-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function Bd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Qp(l,p){var y=l.C,A=p.indexOf(`
`,y);return A==-1?Zc:(y=Number(p.substring(y,A)),isNaN(y)?_a:(A+=1,A+y>p.length?Zc:(p=p.slice(A,A+y),l.C=A+y,p)))}ui.prototype.cancel=function(){this.K=!0,Qi(this)};function Zs(l){l.T=Date.now()+l.H,Xc(l,l.H)}function Xc(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Xn(d(l.aa,l),p)}function eu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}ui.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(Wp(this.i,this.B),this.M!=2&&(Gs(),Kt(17)),Qi(this),this.m=2,Xs(this)):Xc(this,this.T-l)};function Xs(l){l.j.I==0||l.K||Xd(l.j,l)}function Qi(l){eu(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,rn(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function eo(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||Ia(y.h,l))){if(!l.L&&Ia(y.h,l)&&y.I==3){try{var A=y.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var N=A;if(N[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)uu(y),Yi(y);else break e;co(y),Kt(18)}}else y.xa=N[1],0<y.xa-y.K&&N[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Xn(d(y.Va,y),6e3));di(y.h)<=1&&y.ta&&(y.ta=void 0)}else fi(y,11)}else if((l.L||y.g==l)&&uu(y),!v(p))for(N=y.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let S=f[3];S!=null&&(y.ka=S,y.j.info("VER="+y.ka));let L=f[4];L!=null&&(y.za=L,y.j.info("SVER="+y.za));let U=f[5];U!=null&&typeof U=="number"&&U>0&&(A=1.5*U,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;let G=l.g;if(G){let Ke=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ke){var V=A.h;V.g||Ke.indexOf("spdy")==-1&&Ke.indexOf("quic")==-1&&Ke.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(jd(V,V.h),V.h=null))}if(A.G){let Mt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Mt&&(A.wa=Mt,it(A.J,A.G,Mt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var K=l;if(A.na=lu(A,A.L?A.ba:null,A.W),K.L){zd(A.h,K);var ge=K,u=A.O;u&&(ge.H=u),ge.D&&(eu(ge),Zs(ge)),A.g=K}else au(A);y.i.length>0&&Fn(y)}else f[0]!="stop"&&f[0]!="close"||fi(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?fi(y,7):ou(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}Gs(4)}catch{}}var Yp=class{constructor(l,p){this.g=l,this.map=p}};function tu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function to(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function di(l){return l.h?1:l.g?l.g.size:0}function Ia(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function jd(l,p){l.g?l.g.add(p):l.h=p}function zd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}tu.prototype.cancel=function(){if(this.i=$d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function $d(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return E(l.i)}var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hd(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let A=l[y].indexOf("="),N,V=null;A>=0?(N=l[y].substring(0,A),V=l[y].substring(A+1)):N=l[y],p(N,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function mr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof mr?(this.l=l.l,no(this,l.j),this.o=l.o,this.g=l.g,Ea(this,l.u),this.h=l.h,Gd(this,tg(l.i)),this.m=l.m):l&&(p=String(l).match(qd))?(this.l=!1,no(this,p[1]||"",!0),this.o=Ta(p[2]||""),this.g=Ta(p[3]||"",!0),Ea(this,p[4]),this.h=Ta(p[5]||"",!0),Gd(this,p[6]||"",!0),this.m=Ta(p[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}mr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(tr(p,Ca,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(tr(p,Ca,!0),"@"),l.push(ya(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(tr(y,y.charAt(0)=="/"?Jp:nu,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",tr(y,ru)),l.join("")},mr.prototype.resolve=function(l){let p=er(this),y=!!l.j;y?no(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var A=l.h;if(y)Ea(p,l.u);else if(y=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var N=p.h.lastIndexOf("/");N!=-1&&(A=p.h.slice(0,N+1)+A)}if(N=A,N==".."||N==".")A="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){A=N.lastIndexOf("/",0)==0,N=N.split("/");let V=[];for(let K=0;K<N.length;){let ge=N[K++];ge=="."?A&&K==N.length&&V.push(""):ge==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),A&&K==N.length&&V.push("")):(V.push(ge),A=!0)}A=V.join("/")}else A=N}return y?p.h=A:y=l.i.toString()!=="",y?Gd(p,tg(l.i)):y=!!l.m,y&&(p.m=l.m),p};function er(l){return new mr(l)}function no(l,p,y){l.j=y?Ta(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ea(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Gd(l,p,y){p instanceof Pr?(l.i=p,Da(l.i,l.l)):(y||(p=tr(p,ct)),l.i=new Pr(p,l.l))}function it(l,p,y){l.i.set(p,y)}function ba(l){return it(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ta(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function tr(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,Mr),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Mr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ca=/[#\/\?@]/g,nu=/[#\?:]/g,Jp=/[#\?]/g,ct=/[#\?@]/g,ru=/#/g;function Pr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function nr(l){l.g||(l.g=new Map,l.h=0,l.i&&Hd(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=Pr.prototype,n.add=function(l,p){nr(this),this.i=null,l=ro(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Zp(l,p){nr(l),p=ro(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Wd(l,p){return nr(l),p=ro(l,p),l.g.has(p)}n.forEach=function(l,p){nr(this),this.g.forEach(function(y,A){y.forEach(function(N){l.call(p,N,A,this)},this)},this)};function Xp(l,p){nr(l);let y=[];if(typeof p=="string")Wd(l,p)&&(y=y.concat(l.g.get(ro(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return nr(this),this.i=null,l=ro(this,l),Wd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=Xp(this,l),l.length>0?String(l[0]):p):p};function eg(l,p,y){Zp(l,p),y.length>0&&(l.i=null,l.g.set(ro(l,p),E(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var y=p[A];let N=ya(y);y=Xp(this,y);for(let V=0;V<y.length;V++){let K=N;y[V]!==""&&(K+="="+ya(y[V])),l.push(K)}}return this.i=l.join("&")};function tg(l){let p=new Pr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function ro(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Da(l,p){p&&!l.j&&(nr(l),l.i=null,l.g.forEach(function(y,A){let N=A.toLowerCase();A!=N&&(Zp(this,A),eg(this,N,y))},l)),l.j=p}function hi(l,p){let y=new Ks;if(o.Image){let A=new Image;A.onload=h(xr,y,"TestLoadImage: loaded",!0,p,A),A.onerror=h(xr,y,"TestLoadImage: error",!1,p,A),A.onabort=h(xr,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=h(xr,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else p(!1)}function ng(l,p){let y=new Ks,A=new AbortController,N=setTimeout(()=>{A.abort(),xr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:A.signal}).then(V=>{clearTimeout(N),V.ok?xr(y,"TestPingServer: ok",!0,p):xr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),xr(y,"TestPingServer: error",!1,p)})}function xr(l,p,y,A,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),A(y)}catch{}}function rg(){this.g=new $p}function kr(l){this.i=l.Sb||null,this.h=l.ab||!1}g(kr,qp),kr.prototype.g=function(){return new iu(this.i,this.h)};function iu(l,p){Ht.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(iu,Ht),n=iu.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Ln(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ig(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function ig(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Sa(this):Ln(this),this.readyState==3&&ig(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Sa(this))},n.Na=function(l){this.g&&(this.response=l,Sa(this))},n.ga=function(){this.g&&Sa(this)};function Sa(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Ln(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function Ln(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sg(l){let p="";return js(l,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Kd(l,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=sg(y),typeof l=="string"?y!=null&&ya(y):it(l,p,y))}function st(l){Ht.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(st,Ht);var su=/^https?$/i,og=["POST","PUT"];n=st.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ys.g(),this.g.onreadystatechange=I(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(V){io(this,V);return}if(l=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var N in A)y.set(N,A[N]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let V of A.keys())y.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(V=>V.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(og,p,void 0)>=0)||A||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,K]of y)this.g.setRequestHeader(V,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){io(this,V)}};function io(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,so(l),oo(l)}function so(l){l.A||(l.A=!0,Gt(l,"complete"),Gt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Gt(this,"complete"),Gt(this,"abort"),oo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oo(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qd(this):this.Xa())},n.Xa=function(){Qd(this)};function Qd(l){if(l.h&&typeof s<"u"){if(l.v&&Ze(l)==4)setTimeout(l.Ca.bind(l),0);else if(Gt(l,"readystatechange"),Ze(l)==4){l.h=!1;try{let V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=V===0){let K=String(l.D).match(qd)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!su.test(K?K.toLowerCase():"")}y=A}if(y)Gt(l,"complete"),Gt(l,"success");else{l.o=6;try{var N=Ze(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",so(l)}}finally{oo(l)}}}}function oo(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||Gt(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ze(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Ze(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),zp(p)}};function ag(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function dI(l){let p={};l=(l.g&&Ze(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(v(l[A]))continue;var y=Js(l[A]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let V=p[N]||[];p[N]=V,V.push(y)}Vp(p,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ao(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Yd(l){this.za=0,this.i=[],this.j=new Ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ao("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ao("baseRetryDelayMs",5e3,l),this.Za=ao("retryDelaySeedMs",1e4,l),this.Ta=ao("forwardChannelMaxRetries",2,l),this.va=ao("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new tu(l&&l.concurrentRequestLimit),this.Ba=new rg,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,A){Kt(0),this.W=l,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=lu(this,null,this.W),Fn(this)};function ou(l){if(Jd(l),l.I==3){var p=l.V++,y=er(l.J);if(it(y,"SID",l.M),it(y,"RID",p),it(y,"TYPE","terminate"),Nr(l,y),p=new ui(l,l.j,p),p.M=2,p.A=ba(er(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=du(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Zs(p)}eh(l)}function Yi(l){l.g&&(cu(l),l.g.cancel(),l.g=null)}function Jd(l){Yi(l),l.v&&(o.clearTimeout(l.v),l.v=null),uu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Fn(l){if(!to(l.h)&&!l.m){l.m=!0;var p=l.Ea;je||_(),le||(je(),le=!0),D.add(p,l),l.D=0}}function cg(l,p){return di(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Xn(d(l.Ea,l,p),uo(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new ui(this,this.j,l),V=this.o;if(this.U&&(V?(V=Up(V),qt(V,this.U)):V=this.U),this.u!==null||this.R||(N.J=V,V=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Zd(this,N,p),y=er(this.J),it(y,"RID",l),it(y,"CVER",22),this.G&&it(y,"X-HTTP-Session-Id",this.G),Nr(this,y),V&&(this.R?p="headers="+ya(sg(V))+"&"+p:this.u&&Kd(y,this.u,V)),jd(this.h,N),this.Ra&&it(y,"TYPE","init"),this.S?(it(y,"$req",p),it(y,"SID","null"),N.U=!0,va(N,y,null)):va(N,y,p),this.I=2}}else this.I==3&&(l?ug(this,l):this.i.length==0||to(this.h)||ug(this))};function ug(l,p){var y;p?y=p.l:y=l.V++;let A=er(l.J);it(A,"SID",l.M),it(A,"RID",y),it(A,"AID",l.K),Nr(l,A),l.u&&l.o&&Kd(A,l.u,l.o),y=new ui(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Zd(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),jd(l.h,y),va(y,A,p)}function Nr(l,p){l.H&&js(l.H,function(y,A){it(p,A,y)}),l.l&&js({},function(y,A){it(p,A,y)})}function Zd(l,p,y){y=Math.min(l.i.length,y);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ge=-1;for(;;){let u=["count="+y];ge==-1?y>0?(ge=N[0].g,u.push("ofs="+ge)):ge=0:u.push("ofs="+ge);let f=!0;for(let m=0;m<y;m++){var V=N[m].g;let S=N[m].map;if(V-=ge,V<0)ge=Math.max(0,N[m].g-100),f=!1;else try{V="req"+V+"_"||"";try{var K=S instanceof Map?S:Object.entries(S);for(let[L,U]of K){let G=U;a(U)&&(G=zs(U)),u.push(V+L+"="+encodeURIComponent(G))}}catch(L){throw u.push(V+"type="+encodeURIComponent("_badmap")),L}}catch{A&&A(S)}}if(f){K=u.join("&");break e}}K=void 0}return l=l.i.splice(0,y),p.G=l,K}function au(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;je||_(),le||(je(),le=!0),D.add(p,l),l.A=0}}function co(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Xn(d(l.Da,l),uo(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Aa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Xn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Yi(this),Aa(this))};function cu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Aa(l){l.g=new ui(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=er(l.na);it(p,"RID","rpc"),it(p,"SID",l.M),it(p,"AID",l.K),it(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&it(p,"TO",l.ia),it(p,"TYPE","xmlhttp"),Nr(l,p),l.u&&l.o&&Kd(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=ba(er(p)),y.u=null,y.R=!0,wa(y,l)}n.Va=function(){this.C!=null&&(this.C=null,Yi(this),co(this),Kt(19))};function uu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Xd(l,p){var y=null;if(l.g==p){uu(l),cu(l),l.g=null;var A=2}else if(Ia(l.h,p))y=p.G,zd(l.h,p),A=1;else return;if(l.I!=0){if(p.o)if(A==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;A=Hs(),Gt(A,new Yc(A,y)),Fn(l)}else au(l);else if(N=p.m,N==3||N==0&&p.X>0||!(A==1&&cg(l,p)||A==2&&co(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),N){case 1:fi(l,5);break;case 4:fi(l,10);break;case 3:fi(l,6);break;default:fi(l,2)}}}function uo(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function fi(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),A=l.Ua;let N=!A;A=new mr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||no(A,"https"),ba(A),N?hi(A.toString(),y):ng(A.toString(),y)}else Kt(2);l.I=0,l.l&&l.l.pa(p),eh(l),Jd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function eh(l){if(l.I=0,l.ja=[],l.l){let p=$d(l.h);(p.length!=0||l.i.length!=0)&&(M(l.ja,p),M(l.ja,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.oa()}}function lu(l,p,y){var A=y instanceof mr?er(y):new mr(y);if(A.g!="")p&&(A.g=p+"."+A.g),Ea(A,A.u);else{var N=o.location;A=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let V=new mr(null);A&&no(V,A),p&&(V.g=p),N&&Ea(V,N),y&&(V.h=y),A=V}return y=l.G,p=l.wa,y&&p&&it(A,y,p),it(A,"VER",l.ka),Nr(l,A),A}function du(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new st(new kr({ab:y})):new st(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ji(){}Ji.prototype.g=function(l,p){return new gn(l,p)};function gn(l,p){Ht.call(this),this.g=new Yd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Zi(this)}g(gn,Ht),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){ou(this.g)},gn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=zs(l),l=y);p.i.push(new Yp(p.Ya++,l)),p.I==3&&Fn(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,gn.Z.N.call(this)};function nh(l){Qc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(nh,Qc);function pi(){ga.call(this),this.status=1}g(pi,ga);function Zi(l){this.g=l}g(Zi,th),Zi.prototype.ra=function(){Gt(this.g,"a")},Zi.prototype.qa=function(l){Gt(this.g,new nh(l))},Zi.prototype.pa=function(l){Gt(this.g,new pi)},Zi.prototype.oa=function(){Gt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,KC=Ss.createWebChannelTransport=function(){return new Ji},WC=Ss.getStatEventTarget=function(){return Hs()},GC=Ss.Event=Ki,rv=Ss.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,Tf=Ss.ErrorCode=ma,Qs.COMPLETE="complete",HC=Ss.EventType=Qs,$s.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Sl=Ss.WebChannel=$s,TZ=Ss.FetchXmlHttpFactory=kr,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,qC=Ss.XhrIo=st}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var LV="@firebase/firestore",FV="4.9.2";var Tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");var Zl="12.3.0";var Ic=new zo("@firebase/firestore");function Al(){return Ic.logLevel}function ie(n,...e){if(Ic.logLevel<=Oe.DEBUG){let t=e.map(kS);Ic.debug(`Firestore (${Zl}): ${n}`,...t)}}function Ms(n,...e){if(Ic.logLevel<=Oe.ERROR){let t=e.map(kS);Ic.error(`Firestore (${Zl}): ${n}`,...t)}}function Pf(n,...e){if(Ic.logLevel<=Oe.WARN){let t=e.map(kS);Ic.warn(`Firestore (${Zl}): ${n}`,...t)}}function kS(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,C2(n,r,t)}function C2(n,e,t){let r=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ms(r),new Error(r)}function Et(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||C2(e,i,r)}function He(n,e){return n}var J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ue=class extends Cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ko=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var nD=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tn.UNAUTHENTICATED))}shutdown(){}};var iD=class{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ko,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ko)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new nD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}},sD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},oD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},aD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ws(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function CZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var lv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=CZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ze(n,e){return n<e?-1:n>e?1:0}function cD(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return QC(i)===QC(s)?ze(i,s):QC(i)?1:-1}return ze(n.length,e.length)}var DZ=55296,SZ=57343;function QC(n){let e=n.charCodeAt(0);return e>=DZ&&e<=SZ}function Bl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var VV="__name__",dv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ze(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):cD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}},tn=class n extends dv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},AZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=class n extends dv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return AZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VV}static keyField(){return new n([VV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var me=class n{constructor(e){this.path=e}static fromPath(e){return new n(tn.fromString(e))}static fromName(e){return new n(tn.fromString(e).popFirst(5))}static empty(){return new n(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tn(e.slice()))}};function RZ(n,e,t,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function PZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function YC(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=PZ(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Bt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Hf(n,e){if(!MZ(n))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ue(J.INVALID_ARGUMENT,t);return!0}var UV=-62135596800,BV=1e6,Nn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*BV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UV)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BV}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-UV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:Bt("string",Nn._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};var Se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Nn(0,0))}static max(){return new n(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xf=-1,uD=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};uD.UNKNOWN_ID=-1;function xZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Nn(t+1,0):new Nn(t,r));return new Ec(i,me.empty(),e)}function kZ(n){return new Ec(n.readTime,n.key,xf)}var Ec=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Se.min(),me.empty(),xf)}static max(){return new n(Se.max(),me.empty(),xf)}};function NZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}var OZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fv(n){return b(this,null,function*(){if(n.code!==J.FAILED_PRECONDITION||n.message!==OZ)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function LZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xl(n){return n.name==="IndexedDbTransactionError"}var NS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),FZ=-1;function Vv(n){return n==null}function hv(n){return n===0&&1/n==-1/0}var D2="";function VZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jV(e)),e=UZ(n.get(t),e);return jV(e)}function UZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case D2:t+="";break;default:t+=s}}return t}function jV(n){return n+D2+""}var BZ="remoteDocuments",S2="owner";var A2="mutationQueues";var R2="mutations";var M2="documentMutations",jZ="remoteDocumentsV14";var P2="remoteDocumentGlobal";var x2="targets";var k2="targetDocuments";var N2="targetGlobal",O2="collectionParents";var L2="clientMetadata";var F2="bundles";var V2="namedQueries";var zZ="indexConfiguration";var $Z="indexState";var qZ="indexEntries";var U2="documentOverlays";var HZ="globals";var GZ=[A2,R2,M2,BZ,x2,S2,N2,k2,L2,P2,O2,F2,V2],vIe=[...GZ,U2],WZ=[A2,R2,M2,jZ,x2,S2,N2,k2,L2,P2,O2,F2,V2,U2],KZ=WZ,QZ=[...KZ,zZ,$Z,qZ];var wIe=[...QZ,HZ];function zV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YZ(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Nt=class n{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xl(this.root,e,this.comparator,!0)}},xl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ni=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}};Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1;Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ni(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var un=class n{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},fv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mc=class n{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new n([])}unionWith(e){let t=new un(ni.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var pv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Cn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pv("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Cn.EMPTY_BYTE_STRING=new Cn("");var JZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(Et(!!n,39018),typeof n=="string"){let e=0,t=JZ.exec(n);if(Et(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?Cn.fromBase64String(n):Cn.fromUint8Array(n)}var B2="server_timestamp",j2="__type__",z2="__previous_value__",$2="__local_write_time__";function OS(n){return(n?.mapValue?.fields||{})[j2]?.stringValue===B2}function Uv(n){let e=n.mapValue.fields[z2];return OS(e)?Uv(e):e}function kf(n){let e=Ps(n.mapValue.fields[$2].timestampValue);return new Nn(e.seconds,e.nanos)}var dD=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},hD="(default)",gv=class n{constructor(e,t){this.projectId=e,this.database=t||hD}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===hD}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var q2="__type__",H2="__max__",iv={mapValue:{fields:{__type__:{stringValue:H2}}}},G2="__vector__",Nf="value";function Qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OS(n)?4:K2(n)?9007199254740991:W2(n)?10:11:Ie(28295,{value:n})}function Li(n,e){if(n===e)return!0;let t=Qo(n);if(t!==Qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kf(n).isEqual(kf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ps(i.timestampValue),a=Ps(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return xs(i.bytesValue).isEqual(xs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return vt(i.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(i.geoPointValue.longitude)===vt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vt(i.integerValue)===vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=vt(i.doubleValue),a=vt(s.doubleValue);return o===a?hv(o)===hv(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Bl(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zV(o)!==zV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Li(o[c],a[c])))return!1;return!0}(n,e);default:return Ie(52216,{left:n})}}function Of(n,e){return(n.values||[]).find(t=>Li(t,e))!==void 0}function jl(n,e){if(n===e)return 0;let t=Qo(n),r=Qo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=vt(s.integerValue||s.doubleValue),c=vt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return $V(n.timestampValue,e.timestampValue);case 4:return $V(kf(n),kf(e));case 5:return cD(n.stringValue,e.stringValue);case 6:return function(s,o){let a=xs(s),c=xs(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=ze(a[d],c[d]);if(h!==0)return h}return ze(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ze(vt(s.latitude),vt(o.latitude));return a!==0?a:ze(vt(s.longitude),vt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qV(n.arrayValue,e.arrayValue);case 10:return function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Nf]?.arrayValue,h=c[Nf]?.arrayValue,g=ze(d?.values?.length||0,h?.values?.length||0);return g!==0?g:qV(d,h)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===iv.mapValue&&o===iv.mapValue)return 0;if(s===iv.mapValue)return 1;if(o===iv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=cD(c[g],h[g]);if(I!==0)return I;let E=jl(a[c[g]],d[h[g]]);if(E!==0)return E}return ze(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function $V(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);let t=Ps(n),r=Ps(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function qV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=jl(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function zl(n){return fD(n)}function fD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ps(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=fD(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${fD(t.fields[o])}`;return i+"}"}(n.mapValue):Ie(61005,{value:n})}function av(n){switch(Qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Uv(n);return e?16+av(e):16;case 5:return 2*n.stringValue.length;case 6:return xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+av(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Gf(r.fields,(s,o)=>{i+=s.length+av(o)}),i}(n.mapValue);default:throw Ie(13486,{value:n})}}function pD(n){return!!n&&"integerValue"in n}function LS(n){return!!n&&"arrayValue"in n}function HV(n){return!!n&&"nullValue"in n}function GV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function JC(n){return!!n&&"mapValue"in n}function W2(n){return(n?.mapValue?.fields||{})[q2]?.stringValue===G2}function Df(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Df(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Df(n.arrayValue.values[t]);return e}return z({},n)}function K2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===H2}var EIe={mapValue:{fields:{[q2]:{stringValue:G2},[Nf]:{arrayValue:{}}}}};var As=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!JC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Df(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());JC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];JC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Df(this.value))}};var ri=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Se.min(),Se.min(),Se.min(),As.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Se.min(),Se.min(),As.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Se.min(),Se.min(),As.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $l=class{constructor(e,t){this.position=e,this.inclusive=t}};function WV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),t.key):r=jl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}var ql=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ZZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var mv=class{},nn=class n extends mv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mD(e,t,r):t==="array-contains"?new vD(e,r):t==="in"?new wD(e,r):t==="not-in"?new ID(e,r):t==="array-contains-any"?new ED(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yD(e,r):new _D(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jl(t,this.value)):t!==null&&Qo(this.value)===Qo(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fi=class n extends mv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Q2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Q2(n){return n.op==="and"}function Y2(n){return XZ(n)&&Q2(n)}function XZ(n){for(let e of n.filters)if(e instanceof Fi)return!1;return!0}function gD(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+zl(n.value);if(Y2(n))return n.filters.map(e=>gD(e)).join(",");{let e=n.filters.map(t=>gD(t)).join(",");return`${n.op}(${e})`}}function J2(n,e){return n instanceof nn?function(r,i){return i instanceof nn&&r.op===i.op&&r.field.isEqual(i.field)&&Li(r.value,i.value)}(n,e):n instanceof Fi?function(r,i){return i instanceof Fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&J2(o,i.filters[a]),!0):!1}(n,e):void Ie(19439)}function Z2(n){return n instanceof nn?function(t){return`${t.field.canonicalString()} ${t.op} ${zl(t.value)}`}(n):n instanceof Fi?function(t){return t.op.toString()+" {"+t.getFilters().map(Z2).join(" ,")+"}"}(n):"Filter"}var mD=class extends nn{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){let t=me.comparator(e.key,this.key);return this.matchesComparison(t)}},yD=class extends nn{constructor(e,t){super(e,"in",t),this.keys=X2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},_D=class extends nn{constructor(e,t){super(e,"not-in",t),this.keys=X2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function X2(n,e){return(e.arrayValue?.values||[]).map(t=>me.fromName(t.referenceValue))}var vD=class extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return LS(t)&&Of(t.arrayValue,this.value)}},wD=class extends nn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Of(this.value.arrayValue,t)}},ID=class extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Of(this.value.arrayValue,t)}},ED=class extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!LS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Of(this.value.arrayValue,r))}};var bD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function QV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new bD(n,e,t,r,i,s,o)}function FS(n){let e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zl(r)).join(",")),e.Te=t}return e.Te}function VS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!J2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KV(n.startAt,e.startAt)&&KV(n.endAt,e.endAt)}function TD(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function eX(n,e,t,r,i,s,o,a){return new Hl(n,e,t,r,i,s,o,a)}function US(n){return new Hl(n)}function YV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tX(n){return n.collectionGroup!==null}function Sf(n){let e=He(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new un(ni.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ql(s,r))}),t.has(ni.keyField().canonicalString())||e.Ie.push(new ql(ni.keyField(),r))}return e.Ie}function Oi(n){let e=He(n);return e.Ee||(e.Ee=nX(e,Sf(n))),e.Ee}function nX(n,e){if(n.limitType==="F")return QV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ql(i.field,s)});let t=n.endAt?new $l(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $l(n.startAt.position,n.startAt.inclusive):null;return QV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function CD(n,e,t){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bv(n,e){return VS(Oi(n),Oi(e))&&n.limitType===e.limitType}function eU(n){return`${FS(Oi(n))}|lt:${n.limitType}`}function Rl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Z2(i)).join(", ")}]`),Vv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>zl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>zl(i)).join(",")),`Target(${r})`}(Oi(n))}; limitType=${n.limitType})`}function jv(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):me.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Sf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let d=WV(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,Sf(r),i)||r.endAt&&!function(o,a,c){let d=WV(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,Sf(r),i))}(n,e)}function rX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tU(n){return(e,t)=>{let r=!1;for(let i of Sf(n)){let s=iX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iX(n,e,t){let r=n.field.isKeyField()?me.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?jl(c,d):Ie(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}var ks=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return YZ(this.inner)}size(){return this.innerSize}};var sX=new Nt(me.comparator);function Yo(){return sX}var nU=new Nt(me.comparator);function Cf(...n){let e=nU;for(let t of n)e=e.insert(t.key,t);return e}function oX(n){let e=nU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yc(){return Af()}function rU(){return Af()}function Af(){return new ks(n=>n.toString(),(n,e)=>n.isEqual(e))}var bIe=new Nt(me.comparator),aX=new un(me.comparator);function We(...n){let e=aX;for(let t of n)e=e.add(t);return e}var cX=new un(ze);function uX(){return cX}function lX(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hv(e)?"-0":e}}function dX(n){return{integerValue:""+n}}var Gl=class{constructor(){this._=void 0}};function hX(n,e,t){return n instanceof Lf?function(i,s){let o={fields:{[j2]:{stringValue:B2},[$2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&OS(s)&&(s=Uv(s)),s&&(o.fields[z2]=s),{mapValue:o}}(t,e):n instanceof Wl?iU(n,e):n instanceof Kl?sU(n,e):function(i,s){let o=pX(i,s),a=JV(o)+JV(i.Ae);return pD(o)&&pD(i.Ae)?dX(a):lX(i.serializer,a)}(n,e)}function fX(n,e,t){return n instanceof Wl?iU(n,e):n instanceof Kl?sU(n,e):t}function pX(n,e){return n instanceof Ff?function(r){return pD(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Lf=class extends Gl{},Wl=class extends Gl{constructor(e){super(),this.elements=e}};function iU(n,e){let t=oU(e);for(let r of n.elements)t.some(i=>Li(i,r))||t.push(r);return{arrayValue:{values:t}}}var Kl=class extends Gl{constructor(e){super(),this.elements=e}};function sU(n,e){let t=oU(e);for(let r of n.elements)t=t.filter(i=>!Li(i,r));return{arrayValue:{values:t}}}var Ff=class extends Gl{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function JV(n){return vt(n.integerValue||n.doubleValue)}function oU(n){return LS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gX(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Wl&&i instanceof Wl||r instanceof Kl&&i instanceof Kl?Bl(r.elements,i.elements,Li):r instanceof Ff&&i instanceof Ff?Li(r.Ae,i.Ae):r instanceof Lf&&i instanceof Lf}(n.transform,e.transform)}var Rf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vf=class{};function aU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new DD(n.key,Rf.none()):new Uf(n.key,n.data,Rf.none());{let t=n.data,r=As.empty(),i=new un(ni.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ql(n.key,r,new mc(i.toArray()),Rf.none())}}function mX(n,e,t){n instanceof Uf?function(i,s,o){let a=i.value.clone(),c=XV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ql?function(i,s,o){if(!cv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=XV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(cU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Mf(n,e,t,r){return n instanceof Uf?function(s,o,a,c){if(!cv(s.precondition,o))return a;let d=s.value.clone(),h=e2(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ql?function(s,o,a,c){if(!cv(s.precondition,o))return a;let d=e2(s.fieldTransforms,c,o),h=o.data;return h.setAll(cU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return cv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function ZV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bl(r,i,(s,o)=>gX(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Uf=class extends Vf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ql=class extends Vf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function cU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function XV(n,e,t){let r=new Map;Et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fX(o,a,t[i]))}return r}function e2(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,hX(s,o,e))}return r}var DD=class extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var SD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&mX(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=rU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=aU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(t,r)=>ZV(t,r))&&Bl(this.baseMutations,e.baseMutations,(t,r)=>ZV(t,r))}};var AD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var RD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Vt,qe;function uU(n){if(n===void 0)return Ms("GRPC error has no .code"),J.UNKNOWN;switch(n){case Vt.OK:return J.OK;case Vt.CANCELLED:return J.CANCELLED;case Vt.UNKNOWN:return J.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return J.INTERNAL;case Vt.UNAVAILABLE:return J.UNAVAILABLE;case Vt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Vt.NOT_FOUND:return J.NOT_FOUND;case Vt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Vt.ABORTED:return J.ABORTED;case Vt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Vt.DATA_LOSS:return J.DATA_LOSS;default:return Ie(39323,{code:n})}}(qe=Vt||(Vt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";var yX=null;function _X(){return new TextEncoder}var vX=new Ds([4294967295,4294967295],0);function t2(n){let e=_X().encode(n),t=new $C;return t.update(e),new Uint8Array(t.digest())}function n2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ds([t,r],0),new Ds([i,s],0)]}var MD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ds.fromNumber(r)));return i.compare(vX)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=t2(e),[r,i]=n2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=t2(e),[r,i]=n2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_c=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Bf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Se.min(),i,new Nt(ze),Yo(),We())}},Bf=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,We(),We(),We())}};var kl=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},_v=class{constructor(e,t){this.targetId=e,this.Ce=t}},vv=class{constructor(e,t,r=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},wv=class{constructor(){this.ve=0,this.Fe=r2(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}}),new Bf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=r2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},PD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yo(),this.Je=sv(),this.He=sv(),this.Ye=new Nt(ze)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(TD(s))if(r===0){let o=new me(s.path);this.et(t,o,ri.newNoDocument(o,Se.min()))}else Et(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}yX?.lt(function(h,g,I,E,M){let F={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},k=g.unchangedNames;return k&&(F.bloomFilter={applied:M===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:q=>E?.mightContain(q)??!1}),F}(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=xs(r).toUint8Array()}catch(c){if(c instanceof pv)return Pf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new MD(o,i,s)}catch(c){return Pf(c instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&TD(a.target)){let c=new me(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ri.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=We();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new yv(e,t,this.Ye,this.je,r);return this.je=Yo(),this.Je=sv(),this.He=sv(),this.Ye=new Nt(ze),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new un(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new un(ze),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function sv(){return new Nt(me.comparator)}function r2(){return new Nt(me.comparator)}var wX={asc:"ASCENDING",desc:"DESCENDING"},IX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EX={and:"AND",or:"OR"},xD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function kD(n,e){return n.useProto3Json||Vv(e)?e:{value:e}}function bX(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TX(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Nl(n){return Et(!!n,49232),Se.fromTimestamp(function(t){let r=Ps(t);return new Nn(r.seconds,r.nanos)}(n))}function CX(n,e){return ND(n,e).canonicalString()}function ND(n,e){let t=function(i){return new tn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lU(n){let e=tn.fromString(n);return Et(gU(e),10190,{key:e.toString()}),e}function ZC(n,e){let t=lU(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(hU(t))}function dU(n,e){return CX(n.databaseId,e)}function DX(n){let e=lU(n);return e.length===4?tn.emptyPath():hU(e)}function i2(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hU(n){return Et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function SX(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ie(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Et(h===void 0||typeof h=="string",58123),Cn.fromBase64String(h||"")):(Et(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Cn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){let h=d.code===void 0?J.UNKNOWN:uU(d.code);return new ue(h,d.message||"")}(o);t=new vv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ZC(n,r.document.name),s=Nl(r.document.updateTime),o=r.document.createTime?Nl(r.document.createTime):Se.min(),a=new As({mapValue:{fields:r.document.fields}}),c=ri.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new kl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ZC(n,r.document),s=r.readTime?Nl(r.readTime):Se.min(),o=ri.newNoDocument(i,s),a=r.removedTargetIds||[];t=new kl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ZC(n,r.document),s=r.removedTargetIds||[];t=new kl([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new RD(i,s),a=r.targetId;t=new _v(a,o)}}return t}function AX(n,e){return{documents:[dU(n,e.path)]}}function RX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dU(n,i);let s=function(d){if(d.length!==0)return pU(Fi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(I){return{field:Ml(I.field),direction:xX(I.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=kD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function MX(n){let e=DX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Et(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let I=fU(g);return I instanceof Fi&&Y2(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(M){return new ql(Pl(M.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,Vv(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,E=g.values||[];return new $l(E,I)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let I=!g.before,E=g.values||[];return new $l(E,I)}(t.endAt)),eX(e,i,o,s,a,"F",c,d)}function PX(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fU(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pl(t.unaryFilter.field);return nn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pl(t.unaryFilter.field);return nn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Pl(t.unaryFilter.field);return nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Pl(t.unaryFilter.field);return nn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(n):n.fieldFilter!==void 0?function(t){return nn.create(Pl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fi.create(t.compositeFilter.filters.map(r=>fU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(t.compositeFilter.op))}(n):Ie(30097,{filter:n})}function xX(n){return wX[n]}function kX(n){return IX[n]}function NX(n){return EX[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function Pl(n){return ni.fromServerFormat(n.fieldPath)}function pU(n){return n instanceof nn?function(t){if(t.op==="=="){if(GV(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(HV(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(GV(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(HV(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:kX(t.op),value:t.value}}}(n):n instanceof Fi?function(t){let r=t.getFilters().map(i=>pU(i));return r.length===1?r[0]:{compositeFilter:{op:NX(t.op),filters:r}}}(n):Ie(54877,{filter:n})}function gU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var jf=class n{constructor(e,t,r,i,s=Se.min(),o=Se.min(),a=Cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var OD=class{constructor(e){this.yt=e}};function OX(n){let e=MX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?CD(e,e.limit,"L"):e}var Iv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vt(e.integerValue));else if("doubleValue"in e){let r=vt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),hv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ps(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?K2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):W2(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Nf,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(vt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Iv.Kt=new Iv;var LD=class{constructor(){this.Cn=new FD}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ec.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ec.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},FD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(tn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(tn.comparator)).toArray()}};var TIe=new Uint8Array(0);var s2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mU=41943040,Sr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(mU,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);var zf=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var o2="LruGarbageCollector",LX=1048576;function a2([n,e],[t,r]){let i=ze(n,t);return i===0?ze(e,r):i}var VD=class{constructor(e){this.Ir=e,this.buffer=new un(a2),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();a2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},UD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(o2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xl(t)?ie(o2,"Ignoring IndexedDB error during garbage collection: ",t):yield Fv(t)}yield this.Vr(3e5)}))}},BD=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(NS.ce);let r=new VD(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(s2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s2):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Al()<=Oe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function FX(n,e){return new BD(n,e)}var jD=class{constructor(){this.changes=new ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $D=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mf(r.mutation,i,mc.empty(),Nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){let i=yc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Cf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=yc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Yo(),o=Af(),a=function(){return Af()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ql)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Mf(h.mutation,d,h.mutation.getFieldMask(),Nn.now())):o.set(d.key,mc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new zD(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Af(),i=new Nt((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||mc.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||We()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=rU();h.forEach(I=>{if(!s.has(I)){let E=aU(t.get(I),r.get(I));E!==null&&g.set(I,E),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tX(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve(yc()),a=xf,c=s;return o.next(d=>H.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,We())).next(h=>({batchId:a,changes:oX(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(r=>{let i=Cf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Cf();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,c=>{let d=function(g,I){return new Hl(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ri.newInvalidDocument(h)))});let a=Cf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Mf(h.mutation,d,mc.empty(),Nn.now()),jv(t,d)&&(a=a.insert(c,d))}),a})}};var qD=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Nl(i.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:OX(i.bundledQuery),readTime:Nl(i.readTime)}}(t)),H.resolve()}};var HD=class{constructor(){this.overlays=new Nt(me.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=yc();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=yc(),s=t.length+1,o=new me(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Nt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=yc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=yc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return H.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new AD(t,r));let s=this.qr.get(t);s===void 0&&(s=We(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var GD=class{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var $f=class{constructor(){this.Qr=new un(Ut.$r),this.Ur=new un(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ut(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ut(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new me(new tn([])),r=new Ut(t,e),i=new Ut(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new me(new tn([])),r=new Ut(t,e),i=new Ut(t,e+1),s=We();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ut(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ut=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||me.comparator(e.key,t.key)}};var WD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new un(Ut.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new SD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?FZ:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ut(t,0),i=new Ut(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(ze);return t.forEach(i=>{let s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;me.isDocumentKey(s)||(s=s.child(""));let o=new Ut(new me(s),0),a=new un(ze);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),H.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(t.mutations,i=>{let s=new Ut(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ut(t,0),i=this.Zr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var KD=class{constructor(e){this.ri=e,this.docs=function(){return new Nt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=Yo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ri.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Yo(),o=t.path,a=new me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||NZ(kZ(h),r)<=0||(i.has(h.key)||jv(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QD(this)}getSize(e){return H.resolve(this.size)}},QD=class extends jD{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var YD=class{constructor(e){this.persistence=e,this.si=new ks(t=>FS(t),VS),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=zf.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new zf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}};var Ev=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new NS(0),this.li=!1,this.li=!0,this.hi=new GD,this.referenceDelegate=e(this),this.Pi=new YD(this),this.indexManager=new LD,this.remoteDocumentCache=function(i){return new KD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new OD(t),this.Ii=new qD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new WD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new JD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return H.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},JD=class extends lD{constructor(e){super(),this.currentSequenceNumber=e}},ZD=class n{constructor(e){this.persistence=e,this.Ri=new $f,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,r=>{let i=me.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Se.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},bv=class n{constructor(e,t){this.persistence=e,this.pi=new ks(r=>VZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FX(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return H.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=av(e.data.value)),t}br(e,t,r){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var XD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=We(),i=We();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var eS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tS=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return eF()?8:LZ(hr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new eS;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Al()<=Oe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Al()<=Oe.DEBUG&&ie("QueryEngine","Query:",Rl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Al()<=Oe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):H.resolve())}ys(e,t){if(YV(t))return H.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=CD(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=We(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,CD(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return YV(t)||i.isEqual(Se.min())?H.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?H.resolve(null):(Al()<=Oe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rl(t)),this.vs(e,o,t,xZ(i,xf)).next(a=>a))})}Ds(e,t){let r=new un(tU(e));return t.forEach((i,s)=>{jv(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Al()<=Oe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.ps.getDocumentsMatchingQuery(e,t,Ec.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var BS="LocalStore",VX=3e8,nS=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Nt(ze),this.xs=new ks(s=>FS(s),VS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $D(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function UX(n,e,t,r){return new nS(n,e,t,r)}function yU(n,e){return b(this,null,function*(){let t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=We();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})})}function _U(n){let e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function BX(n,e){let t=He(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let E=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Cn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),function(F,k,q){return F.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=VX?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,E,h)&&a.push(t.Pi.updateTargetData(s,E))});let c=Yo(),d=We();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jX(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(Se.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function jX(n,e,t){let r=We(),i=We();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Yo();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(BS,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function zX(n,e){let t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new jf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function rS(n,e,t){return b(this,null,function*(){let r=He(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xl(o))throw o;ie(BS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function c2(n,e,t){let r=He(n),i=Se.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){let g=He(c),I=g.xs.get(h);return I!==void 0?H.resolve(g.Ms.get(I)):g.Pi.getTargetData(d,h)}(r,o,Oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Se.min(),t?s:We())).next(a=>($X(r,rX(e),a),{documents:a,Qs:s})))}function $X(n,e,t){let r=n.Os.get(e)||Se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var Tv=class{constructor(){this.activeTargetIds=uX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iS=class{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sS=class{Oo(e){}shutdown(){}};var u2="ConnectivityMonitor",Cv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(u2,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ie(u2,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ov=null;function oS(){return ov===null?ov=function(){return 268435456+Math.round(2147483648*Math.random())}():ov++,"0x"+ov.toString(16)}var XC="RestConnection",qX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aS=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===hD?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=oS(),a=this.zo(e,t.toUriEncodedString());ie(XC,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=df(d);return this.Jo(e,a,c,r,h).then(g=>(ie(XC,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Pf(XC,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=qX[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var cS=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var bn="WebChannelConnection",uS=class extends aS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=oS();return new Promise((a,c)=>{let d=new qC;d.setWithCredentials(!0),d.listenOnce(HC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Tf.NO_ERROR:let g=d.getResponseJson();ie(bn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Tf.TIMEOUT:ie(bn,`RPC '${e}' ${o} timed out`),c(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:let I=d.getStatus();if(ie(bn,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let M=E?.error;if(M&&M.status&&M.message){let F=function(q){let te=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN}(M.status);c(new ue(F,M.message))}else c(new ue(J.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(bn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ie(bn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=oS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KC(),a=WC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ie(bn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let I=!1,E=!1,M=new cS({Yo:k=>{E?ie(bn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(I||(ie(bn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),ie(bn,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),F=(k,q,te)=>{k.listen(q,Y=>{try{te(Y)}catch(oe){setTimeout(()=>{throw oe},0)}})};return F(g,Sl.EventType.OPEN,()=>{E||(ie(bn,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),F(g,Sl.EventType.CLOSE,()=>{E||(E=!0,ie(bn,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(g))}),F(g,Sl.EventType.ERROR,k=>{E||(E=!0,Pf(bn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),M.a_(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),F(g,Sl.EventType.MESSAGE,k=>{if(!E){let q=k.data[0];Et(!!q,16349);let te=q,Y=te?.error||te[0]?.error;if(Y){ie(bn,`RPC '${e}' stream ${i} received error:`,Y);let oe=Y.status,je=function(_){let w=Vt[_];if(w!==void 0)return uU(w)}(oe),le=Y.message;je===void 0&&(je=J.INTERNAL,le="Unknown error status: "+oe+" with message "+Y.message),E=!0,M.a_(new ue(je,le)),g.close()}else ie(bn,`RPC '${e}' stream ${i} received:`,q),M.u_(q)}}),F(a,GC.STAT_EVENT,k=>{k.stat===rv.PROXY?ie(bn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===rv.NOPROXY&&ie(bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function eD(){return typeof document<"u"?document:null}function vU(n){return new xD(n,!0)}var Dv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var l2="PersistentStream",lS=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return b(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return b(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return b(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Ms(t.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>b(this,null,function*(){this.state=0,this.start()}))}z_(e){return ie(l2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ie(l2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dS=class extends lS{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=SX(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Nl(o.readTime):Se.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=i2(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=TD(c)?{documents:AX(s,c)}:{query:RX(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TX(s,o.resumeToken);let d=kD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=bX(s,o.snapshotVersion.toTimestamp());let d=kD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=PX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=i2(this.serializer),t.removeTarget=e,this.q_(t)}};var hS=class{},fS=class extends hS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,ND(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(J.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,ND(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(J.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},pS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ms(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Yl="RemoteStore",gS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(()=>b(this,null,function*(){Kf(this)&&(ie(Yl,"Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let d=He(c);d.Ea.add(4),yield Wf(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield zv(d)})}(this))}))}),this.Ra=new pS(r,i)}};function zv(n){return b(this,null,function*(){if(Kf(n))for(let e of n.da)yield e(!0)})}function Wf(n){return b(this,null,function*(){for(let e of n.da)yield e(!1)})}function wU(n,e){let t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qS(t)?$S(t):ed(t).O_()&&zS(t,e))}function jS(n,e){let t=He(n),r=ed(t);t.Ia.delete(e),r.O_()&&IU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Kf(t)&&t.Ra.set("Unknown"))}function zS(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ed(n).Y_(e)}function IU(n,e){n.Va.Ue(e),ed(n).Z_(e)}function $S(n){n.Va=new PD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ed(n).start(),n.Ra.ua()}function qS(n){return Kf(n)&&!ed(n).x_()&&n.Ia.size>0}function Kf(n){return He(n).Ea.size===0}function EU(n){n.Va=void 0}function HX(n){return b(this,null,function*(){n.Ra.set("Online")})}function GX(n){return b(this,null,function*(){n.Ia.forEach((e,t)=>{zS(n,e)})})}function WX(n,e){return b(this,null,function*(){EU(n),qS(n)?(n.Ra.ha(e),$S(n)):n.Ra.set("Unknown")})}function KX(n,e,t){return b(this,null,function*(){if(n.Ra.set("Online"),e instanceof vv&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){ie(Yl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield d2(n,r)}else if(e instanceof kl?n.Va.Ze(e):e instanceof _v?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{let r=yield _U(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Cn.EMPTY_BYTE_STRING,h.snapshotVersion)),IU(s,c);let g=new jf(h.target,c,d,h.sequenceNumber);zS(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ie(Yl,"Failed to raise snapshot:",r),yield d2(n,r)}})}function d2(n,e,t){return b(this,null,function*(){if(!Xl(e))throw e;n.Ea.add(1),yield Wf(n),n.Ra.set("Offline"),t||(t=()=>_U(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){ie(Yl,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield zv(n)}))})}function h2(n,e){return b(this,null,function*(){let t=He(n);t.asyncQueue.verifyOperationInProgress(),ie(Yl,"RemoteStore received new credentials");let r=Kf(t);t.Ea.add(3),yield Wf(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield zv(t)})}function QX(n,e){return b(this,null,function*(){let t=He(n);e?(t.Ea.delete(2),yield zv(t)):e||(t.Ea.add(2),yield Wf(t),t.Ra.set("Unknown"))})}function ed(n){return n.ma||(n.ma=function(t,r,i){let s=He(t);return s.sa(),new dS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:HX.bind(null,n),t_:GX.bind(null,n),r_:WX.bind(null,n),H_:KX.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.ma.B_(),qS(n)?$S(n):n.Ra.set("Unknown")):(yield n.ma.stop(),EU(n))}))),n.ma}var mS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bU(n,e){if(Ms("AsyncQueue",`${e}: ${n}`),Xl(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}var Sv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=Cf(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Av=class{constructor(){this.ga=new Nt(me.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Jl=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Sv.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var yS=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},_S=class{constructor(){this.queries=f2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=He(t),s=i.queries;i.queries=f2(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ue(J.ABORTED,"Firestore shutting down"))}};function f2(){return new ks(n=>eU(n),Bv)}function YX(n,e){return b(this,null,function*(){let t=He(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new yS,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=bU(o,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&HS(t)})}function JX(n,e){return b(this,null,function*(){let t=He(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZX(n,e){let t=He(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&HS(t)}function XX(n,e,t){let r=He(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function HS(n){n.Ca.forEach(e=>{e.next()})}var vS,p2;(p2=vS||(vS={})).Ma="default",p2.Cache="cache";var wS=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vS.Cache}};var Rv=class{constructor(e){this.key=e}},Mv=class{constructor(e){this.key=e}},IS=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=tU(e),this.tu=new Sv(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Av,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),E=jv(this.query,g)?g:null,M=!!I&&this.mutatedKeys.has(I.key),F=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),k=!1;I&&E?I.data.isEqual(E.data)?M!==F&&(r.track({type:3,doc:E}),k=!0):this.su(I,E)||(r.track({type:2,doc:E}),k=!0,(c&&this.eu(E,c)>0||d&&this.eu(E,d)<0)&&(a=!0)):!I&&E?(r.track({type:0,doc:E}),k=!0):I&&!E&&(r.track({type:1,doc:I}),k=!0,(c||d)&&(a=!0)),k&&(E?(o=o.add(E),s=F?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>function(E,M){let F=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:k})}};return F(E)-F(M)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Jl(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Av,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=We(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Mv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Rv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=We();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},GS="SyncEngine",ES=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bS=class{constructor(e){this.key=e,this.hu=!1}},TS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ks(a=>eU(a),Bv),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(me.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=zf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function eee(n,e,t=!0){return b(this,null,function*(){let r=AU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield TU(r,e,t,!0),i})}function tee(n,e){return b(this,null,function*(){let t=AU(n);yield TU(t,e,!0,!1)})}function TU(n,e,t,r){return b(this,null,function*(){let i=yield zX(n.localStore,Oi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield nee(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&wU(n.remoteStore,i),a})}function nee(n,e,t,r,i){return b(this,null,function*(){n.pu=(g,I,E)=>function(F,k,q,te){return b(this,null,function*(){let Y=k.view.ru(q);Y.Cs&&(Y=yield c2(F.localStore,k.query,!1).then(({documents:D})=>k.view.ru(D,Y)));let oe=te&&te.targetChanges.get(k.targetId),je=te&&te.targetMismatches.get(k.targetId)!=null,le=k.view.applyChanges(Y,F.isPrimaryClient,oe,je);return m2(F,k.targetId,le.au),le.snapshot})}(n,g,I,E);let s=yield c2(n.localStore,e,!0),o=new IS(e,s.Qs),a=o.ru(s.documents),c=Bf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);m2(n,t,d.au);let h=new ES(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function ree(n,e,t){return b(this,null,function*(){let r=He(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Bv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&jS(r.remoteStore,i.targetId),CS(r,i.targetId)}).catch(Fv))):(CS(r,i.targetId),yield rS(r.localStore,i.targetId,!0))})}function iee(n,e){return b(this,null,function*(){let t=He(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jS(t.remoteStore,r.targetId))})}function CU(n,e){return b(this,null,function*(){let t=He(n);try{let r=yield BX(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Et(o.hu,14607):i.removedDocuments.size>0&&(Et(o.hu,42227),o.hu=!1))}),yield SU(t,r,e)}catch(r){yield Fv(r)}})}function g2(n,e,t){let r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=He(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.Sa)I.va(a)&&(d=!0)}),d&&HS(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function see(n,e,t){return b(this,null,function*(){let r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Nt(me.comparator);o=o.insert(s,ri.newNoDocument(s,Se.min()));let a=We().add(s),c=new yv(Se.min(),new Map,new Nt(ze),o,a);yield CU(r,c),r.du=r.du.remove(s),r.Au.delete(e),WS(r)}else yield rS(r.localStore,e,!1).then(()=>CS(r,e,t)).catch(Fv)})}function CS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||DU(n,r)})}function DU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(jS(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),WS(n))}function m2(n,e,t){for(let r of t)r instanceof Rv?(n.Ru.addReference(r.key,e),oee(n,r)):r instanceof Mv?(ie(GS,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||DU(n,r.key)):Ie(19791,{wu:r})}function oee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(GS,"New document in limbo: "+t),n.Eu.add(r),WS(n))}function WS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new me(tn.fromString(e)),r=n.fu.next();n.Au.set(r,new bS(t)),n.du=n.du.insert(t,r),wU(n.remoteStore,new jf(Oi(US(t.path)),r,"TargetPurposeLimboResolution",NS.ce))}}function SU(n,e,t){return b(this,null,function*(){let r=He(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=XD.As(c.targetId,d);s.push(h)}}))}),yield Promise.all(o),r.Pu.H_(i),yield function(c,d){return b(this,null,function*(){let h=He(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>H.forEach(d,I=>H.forEach(I.Es,E=>h.persistence.referenceDelegate.addReference(g,I.targetId,E)).next(()=>H.forEach(I.ds,E=>h.persistence.referenceDelegate.removeReference(g,I.targetId,E)))))}catch(g){if(!Xl(g))throw g;ie(BS,"Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let E=h.Ms.get(I),M=E.snapshotVersion,F=E.withLastLimboFreeSnapshotVersion(M);h.Ms=h.Ms.insert(I,F)}}})}(r.localStore,s))})}function aee(n,e){return b(this,null,function*(){let t=He(n);if(!t.currentUser.isEqual(e)){ie(GS,"User change. New user:",e.toKey());let r=yield yU(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ue(J.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield SU(t,r.Ls)}})}function cee(n,e){let t=He(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function AU(n){let e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=see.bind(null,e),e.Pu.H_=ZX.bind(null,e.eventManager),e.Pu.yu=XX.bind(null,e.eventManager),e}var RU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=vU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return UX(this.persistence,new tS,t.initialUser,this.serializer)}Cu(t){return new Ev(ZD.mi,this.serializer)}Du(t){return new iS}terminate(){return b(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),DS=class extends RU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Et(this.persistence.referenceDelegate instanceof bv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new UD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new Ev(r=>bv.mi(r,t),this.serializer)}};var uee=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>g2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aee.bind(null,this.syncEngine),yield QX(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _S}()}createDatastore(t){let r=vU(t.databaseInfo.databaseId),i=function(o){return new uS(o)}(t.databaseInfo);return function(o,a,c,d){return new fS(o,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new gS(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>g2(this.syncEngine,r,0),function(){return Cv.v()?new Cv:new sS}())}createSyncEngine(t,r){return function(s,o,a,c,d,h,g){let I=new TS(s,o,a,c,d,h);return g&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){yield function(r){return b(this,null,function*(){let i=He(r);ie(Yl,"RemoteStore shutting down."),i.Ea.add(5),yield Wf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var SS=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jo="FirestoreClient",AS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Tn.UNAUTHENTICATED,this.clientId=lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){ie(Jo,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(ie(Jo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bU(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function tD(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(Jo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield yU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function y2(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield lee(n);ie(Jo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>h2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>h2(e.remoteStore,i)),n._onlineComponents=e})}function lee(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Jo,"Using user provided OfflineComponentProvider");try{yield tD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Pf("Error using user provided cache. Falling back to memory cache: "+t),yield tD(n,new RU)}}else ie(Jo,"Using default OfflineComponentProvider"),yield tD(n,new DS(void 0));return n._offlineComponents})}function dee(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Jo,"Using user provided OnlineComponentProvider"),yield y2(n,n._uninitializedComponentsProvider._online)):(ie(Jo,"Using default OnlineComponentProvider"),yield y2(n,new uee))),n._onlineComponents})}function _2(n){return b(this,null,function*(){let e=yield dee(n),t=e.eventManager;return t.onListen=eee.bind(null,e.syncEngine),t.onUnlisten=ree.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iee.bind(null,e.syncEngine),t})}function MU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var v2=new Map;var hee="firestore.googleapis.com",w2=!0,Pv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hee,this.ssl=w2}else this.host=e.host,this.ssl=e.ssl??w2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LX)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},RS=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rD;switch(r.type){case"firstParty":return new oD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=v2.get(t);r&&(ie("ComponentProvider","Removing Datastore"),v2.delete(t),r.terminate())}(this),Promise.resolve()}};var xv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rs=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new MS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hf(t,n._jsonSchema))return new n(e,r||null,new me(tn.fromString(t.referencePath)))}};Rs._jsonSchemaVersion="firestore/documentReference/1.0",Rs._jsonSchema={type:Bt("string",Rs._jsonSchemaVersion),referencePath:Bt("string")};var MS=class n extends xv{constructor(e,t,r){super(e,t,US(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rs(this.firestore,null,new me(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var I2="AsyncQueue",kv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dv(this,"async_queue_retry"),this._c=()=>{let r=eD();r&&ie(I2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=eD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=eD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ko;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return b(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xl(e))throw e;ie(I2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ms("INTERNAL UNHANDLED ERROR: ",E2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=mS.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:E2(this.nc)})}verifyOperationInProgress(){}Tc(){return b(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function E2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function b2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var qf=class extends RS{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kv(e),this._firestoreClient=void 0,yield e}})}};function fee(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pee(n),n._firestoreClient}function pee(n){let e=n._freezeSettings(),t=function(i,s,o,a){return new dD(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,MU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new AS(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}}(n._componentsProvider))}var Ol=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Cn.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ol._jsonSchemaVersion="firestore/bytes/1.0",Ol._jsonSchema={type:Bt("string",Ol._jsonSchemaVersion),bytes:Bt("string")};var Nv=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ll=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Hf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ll._jsonSchemaVersion="firestore/geoPoint/1.0",Ll._jsonSchema={type:Bt("string",Ll._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};var Fl=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Fl._jsonSchemaVersion="firestore/vectorValue/1.0",Fl._jsonSchema={type:Bt("string",Fl._jsonSchemaVersion),vectorValues:Bt("object")};var gee=new RegExp("[~\\*/\\[\\]]");function mee(n,e,t){if(e.search(gee)>=0)throw T2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nv(...e.split("."))._internalPath}catch{throw T2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function T2(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ue(J.INVALID_ARGUMENT,a+n+c)}var Ov=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(PU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PS=class extends Ov{data(){return super.data()}};function PU(n,e){return typeof e=="string"?mee(n,e):e instanceof Nv?e._internalPath:e._delegate._internalPath}function yee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xS=class{convertValue(e,t="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Nf].arrayValue?.values?.map(r=>vt(r.doubleValue));return new Fl(t)}convertGeoPoint(e){return new Ll(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Uv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kf(e));default:return null}}convertTimestamp(e){let t=Ps(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tn.fromString(e);Et(gU(r),9688,{name:e});let i=new gv(r.get(1),r.get(3)),s=new me(r.popFirst(5));return i.isEqual(t)||Ms(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var vc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},wc=class n extends Ov{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(PU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",wc._jsonSchema={type:Bt("string",wc._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};var Vl=class extends wc{data(e={}){return super.data(e)}},Ul=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vl(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Vl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Vl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_ee(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _ee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}Ul._jsonSchemaVersion="firestore/querySnapshot/1.0",Ul._jsonSchema={type:Bt("string",Ul._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};var Lv=class extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}};function xU(n,...e){n=jo(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||b2(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(b2(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Rs)o=YC(n.firestore,qf),a=US(n._key.path),s={next:c=>{e[r]&&e[r](vee(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=YC(n,xv);o=YC(c.firestore,qf),a=c._query;let d=new Lv(o);s={next:h=>{e[r]&&e[r](new Ul(o,d,c,h))},error:e[r+1],complete:e[r+2]},yee(n._query)}return function(d,h,g,I){let E=new SS(I),M=new wS(h,E,g);return d.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return YX(yield _2(d),M)})),()=>{E.Nu(),d.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return JX(yield _2(d),M)}))}}(fee(o),a,i,s)}function vee(n,e,t){let r=t.docs.get(e._key),i=new Lv(n);return new wc(n,i,e._key,r,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Zl=i})(Il),$o(new ei("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new qf(new iD(r.getProvider("auth-internal")),new aD(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gv(d.options.projectId,h)}(o,i),o);return s=z({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_s(LV,FV,e),_s(LV,FV,"esm2020")})();var $v=function(){return $v=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$v.apply(this,arguments)};var wee={includeMetadataChanges:!1};function kU(n,e){return e===void 0&&(e=wee),new Me(function(t){var r=xU(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function NU(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:$v($v({},r),(t={},t[e.idField]=n.id,t))}function OU(n){return kU(n,{includeMetadataChanges:!0}).pipe(_e(function(e){return e.docs}))}function LU(n,e){return e===void 0&&(e={}),OU(n).pipe(_e(function(t){return t.map(function(r){return NU(r,e)})}))}var FU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VU={};var Zo,KS;(function(){var n;function e(D,_){function w(){}w.prototype=_.prototype,D.D=_.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(C,T,R){for(var v=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)v[ft-2]=arguments[ft];return _.prototype[T].apply(C,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,w){w||(w=0);var C=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)C[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)C[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=D.g[0],w=D.g[1],T=D.g[2];var R=D.g[3],v=_+(R^w&(T^R))+C[0]+3614090360&4294967295;_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[3]+3250441966&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[7]+4249261313&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[11]+2304563134&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[15]+1236535329&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(T^R&(w^T))+C[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[0]+3921069994&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[4]+3889429448&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[8]+1163531501&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[12]+2368359562&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(w^T^R)+C[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[14]+4259657740&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[10]+3200236656&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[6]+76029189&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[2]+3299628645&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(T^(w|~R))+C[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[5]+4237533241&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[1]+2240044497&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[13]+1309151649&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+R&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var w=_-this.blockSize,C=this.B,T=this.h,R=0;R<_;){if(T==0)for(;R<=w;)i(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<_;)if(C[T++]=D.charCodeAt(R++),T==this.blockSize){i(this,C),T=0;break}}else for(;R<_;)if(C[T++]=D[R++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var w=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=w&255,w/=256;for(this.u(D),D=Array(16),_=w=0;4>_;++_)for(var C=0;32>C;C+=8)D[w++]=this.g[_]>>>C&255;return D};function s(D,_){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=_(D)}function o(D,_){this.h=_;for(var w=[],C=!0,T=D.length-1;0<=T;T--){var R=D[T]|0;C&&R==_||(w[T]=R,C=!1)}this.g=w}var a={};function c(D){return-128<=D&&128>D?s(D,function(_){return new o([_|0],0>_?-1:0)}):new o([D|0],0>D?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return k(d(-D));for(var _=[],w=1,C=0;D>=w;C++)_[C]=D/w|0,w*=4294967296;return new o(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return k(h(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(_,8)),C=g,T=0;T<D.length;T+=8){var R=Math.min(8,D.length-T),v=parseInt(D.substring(T,T+R),_);8>R?(R=d(Math.pow(_,R)),C=C.j(R).add(d(v))):(C=C.j(w),C=C.add(d(v)))}return C}var g=c(0),I=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(F(this))return-k(this).m();for(var D=0,_=1,w=0;w<this.g.length;w++){var C=this.i(w);D+=(0<=C?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(F(this))return"-"+k(this).toString(D);for(var _=d(Math.pow(D,6)),w=this,C="";;){var T=oe(w,_).g;w=q(w,T.j(_));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=T,M(w))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function F(D){return D.h==-1}n.l=function(D){return D=q(this,D),F(D)?-1:M(D)?0:1};function k(D){for(var _=D.g.length,w=[],C=0;C<_;C++)w[C]=~D.g[C];return new o(w,~D.h).add(I)}n.abs=function(){return F(this)?k(this):this},n.add=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],C=0,T=0;T<=_;T++){var R=C+(this.i(T)&65535)+(D.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);C=v>>>16,R&=65535,v&=65535,w[T]=v<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function q(D,_){return D.add(k(_))}n.j=function(D){if(M(this)||M(D))return g;if(F(this))return F(D)?k(this).j(k(D)):k(k(this).j(D));if(F(D))return k(this.j(k(D)));if(0>this.l(E)&&0>D.l(E))return d(this.m()*D.m());for(var _=this.g.length+D.g.length,w=[],C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var T=0;T<D.g.length;T++){var R=this.i(C)>>>16,v=this.i(C)&65535,ft=D.i(T)>>>16,On=D.i(T)&65535;w[2*C+2*T]+=v*On,te(w,2*C+2*T),w[2*C+2*T+1]+=R*On,te(w,2*C+2*T+1),w[2*C+2*T+1]+=v*ft,te(w,2*C+2*T+1),w[2*C+2*T+2]+=R*ft,te(w,2*C+2*T+2)}for(C=0;C<_;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=_;C<2*_;C++)w[C]=0;return new o(w,0)};function te(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function Y(D,_){this.g=D,this.h=_}function oe(D,_){if(M(_))throw Error("division by zero");if(M(D))return new Y(g,g);if(F(D))return _=oe(k(D),_),new Y(k(_.g),k(_.h));if(F(_))return _=oe(D,k(_)),new Y(k(_.g),_.h);if(30<D.g.length){if(F(D)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var w=I,C=_;0>=C.l(D);)w=je(w),C=je(C);var T=le(w,1),R=le(C,1);for(C=le(C,2),w=le(w,2);!M(C);){var v=R.add(C);0>=v.l(D)&&(T=T.add(w),R=v),C=le(C,1),w=le(w,1)}return _=q(D,T.j(_)),new Y(T,_)}for(T=g;0<=D.l(_);){for(w=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=d(w),v=R.j(_);F(v)||0<v.l(D);)w-=C,R=d(w),v=R.j(_);M(R)&&(R=I),T=T.add(R),D=q(D,v)}return new Y(T,D)}n.A=function(D){return oe(this,D).h},n.and=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)&D.i(C);return new o(w,this.h&D.h)},n.or=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)|D.i(C);return new o(w,this.h|D.h)},n.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)^D.i(C);return new o(w,this.h^D.h)};function je(D){for(var _=D.g.length+1,w=[],C=0;C<_;C++)w[C]=D.i(C)<<1|D.i(C-1)>>>31;return new o(w,D.h)}function le(D,_){var w=_>>5;_%=32;for(var C=D.g.length-w,T=[],R=0;R<C;R++)T[R]=0<_?D.i(R+w)>>>_|D.i(R+w+1)<<32-_:D.i(R+w);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KS=VU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Zo=VU.Integer=o}).apply(typeof FU<"u"?FU:typeof self<"u"?self:typeof window<"u"?window:{});var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ns={};var QS,Iee,td,YS,Qf,Hv,JS,ZS,XS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qv=="object"&&qv];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in m))break e;m=m[L]}u=u[u.length-1],S=m[u],f=f(S),f!=S&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,S=!1,L={next:function(){if(!S&&m<u.length){var U=m++;return{value:f(U,u[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function I(u,f,m){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,I.apply(null,arguments)}function E(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function M(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(S,L,U){for(var G=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)G[Ke-2]=arguments[Ke];return f.prototype[L].apply(S,G)}}function F(u){let f=u.length;if(0<f){let m=Array(f);for(let S=0;S<f;S++)m[S]=u[S];return m}return[]}function k(u,f){for(let m=1;m<arguments.length;m++){let S=arguments[m];if(c(S)){let L=u.length||0,U=S.length||0;u.length=L+U;for(let G=0;G<U;G++)u[L+G]=S[G]}else u.push(S)}}class q{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function te(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var je=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function le(u,f,m){for(let S in u)f.call(m,u[S],S,u)}function D(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,f){let m,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(m in S)u[m]=S[m];for(let U=0;U<w.length;U++)m=w[U],Object.prototype.hasOwnProperty.call(S,m)&&(u[m]=S[m])}}function T(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function v(){var u=js;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ft{constructor(){this.h=this.g=null}add(f,m){let S=On.get();S.set(f,m),this.h?this.h.next=S:this.g=S,this.h=S}}var On=new q(()=>new uI,u=>u.reset());class uI{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let da,ci=!1,js=new ft,Vp=()=>{let u=a.Promise.resolve(void 0);da=()=>{u.then(Up)}};var Up=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){R(m)}var f=On;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ci=!1};function Rr(){this.s=this.s,this.C=this.C}Rr.prototype.s=!1,Rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var jc=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Hi(u,f){if(qt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(je){e:{try{oe(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Nd[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Hi.aa.h.call(this)}}M(Hi,qt);var Nd={2:"touch",3:"pen",4:"mouse"};Hi.prototype.h=function(){Hi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Gi="closure_listenable_"+(1e6*Math.random()|0),Od=0;function Bp(u,f,m,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!S,this.ha=L,this.key=++Od,this.da=this.fa=!1}function ha(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zc(u){this.src=u,this.g={},this.h=0}zc.prototype.add=function(u,f,m,S,L){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var G=qc(u,f,S,L);return-1<G?(f=u[G],m||(f.fa=!1)):(f=new Bp(f,this.src,U,!!S,L),f.fa=m,u.push(f)),f};function $c(u,f){var m=f.type;if(m in u.g){var S=u.g[m],L=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=L)&&Array.prototype.splice.call(S,L,1),U&&(ha(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function qc(u,f,m,S){for(var L=0;L<u.length;++L){var U=u[L];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==S)return L}return-1}var fa="closure_lm_"+(1e6*Math.random()|0),Hc={};function jp(u,f,m,S,L){if(S&&S.once)return Wc(u,f,m,S,L);if(Array.isArray(f)){for(var U=0;U<f.length;U++)jp(u,f[U],m,S,L);return null}return m=Wi(m),u&&u[Gi]?u.K(f,m,d(S)?!!S.capture:!!S,L):Gc(u,f,m,!1,S,L)}function Gc(u,f,m,S,L,U){if(!f)throw Error("Invalid event type");var G=d(L)?!!L.capture:!!L,Ke=Kc(u);if(Ke||(u[fa]=Ke=new zc(u)),m=Ke.add(f,m,S,G,U),m.proxy)return m;if(S=Ld(),m.proxy=S,S.src=u,S.listener=m,u.addEventListener)jc||(L=G),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(pa(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ld(){function u(m){return f.call(u.src,u.listener,m)}let f=lI;return u}function Wc(u,f,m,S,L){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Wc(u,f[U],m,S,L);return null}return m=Wi(m),u&&u[Gi]?u.L(f,m,d(S)?!!S.capture:!!S,L):Gc(u,f,m,!0,S,L)}function Ht(u,f,m,S,L){if(Array.isArray(f))for(var U=0;U<f.length;U++)Ht(u,f[U],m,S,L);else S=d(S)?!!S.capture:!!S,m=Wi(m),u&&u[Gi]?(u=u.i,f=String(f).toString(),f in u.g&&(U=u.g[f],m=qc(U,m,S,L),-1<m&&(ha(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[f],u.h--)))):u&&(u=Kc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=qc(f,m,S,L)),(m=-1<u?f[u]:null)&&Gt(m))}function Gt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Gi])$c(f.i,u);else{var m=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(m,S,u.capture):f.detachEvent?f.detachEvent(pa(m),S):f.addListener&&f.removeListener&&f.removeListener(S),(m=Kc(f))?($c(m,u),m.h==0&&(m.src=null,f[fa]=null)):ha(u)}}}function pa(u){return u in Hc?Hc[u]:Hc[u]="on"+u}function lI(u,f){if(u.da)u=!0;else{f=new Hi(f,this);var m=u.listener,S=u.ha||u.src;u.fa&&Gt(u),u=m.call(S,f)}return u}function Kc(u){return u=u[fa],u instanceof zc?u:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wi(u){return typeof u=="function"?u:(u[Fd]||(u[Fd]=function(f){return u.handleEvent(f)}),u[Fd])}function Wt(){Rr.call(this),this.i=new zc(this),this.M=this,this.F=null}M(Wt,Rr),Wt.prototype[Gi]=!0,Wt.prototype.removeEventListener=function(u,f,m,S){Ht(this,u,f,m,S)};function rn(u,f){var m,S=u.F;if(S)for(m=[];S;S=S.F)m.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new qt(f,u);else if(f instanceof qt)f.target=f.target||u;else{var L=f;f=new qt(S,u),C(f,L)}if(L=!0,m)for(var U=m.length-1;0<=U;U--){var G=f.g=m[U];L=zs(G,S,!0,f)&&L}if(G=f.g=u,L=zs(G,S,!0,f)&&L,L=zs(G,S,!1,f)&&L,m)for(U=0;U<m.length;U++)G=f.g=m[U],L=zs(G,S,!1,f)&&L}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],S=0;S<m.length;S++)ha(m[S]);delete u.g[f],u.h--}}this.F=null},Wt.prototype.K=function(u,f,m,S){return this.i.add(String(u),f,!1,m,S)},Wt.prototype.L=function(u,f,m,S){return this.i.add(String(u),f,!0,m,S)};function zs(u,f,m,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,U=0;U<f.length;++U){var G=f[U];if(G&&!G.da&&G.capture==m){var Ke=G.listener,Mt=G.ha||G.src;G.fa&&$c(u.i,G),L=Ke.call(Mt,S)!==!1&&L}}return L&&!S.defaultPrevented}function zp(u,f,m){if(typeof u=="function")m&&(u=I(u,m));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function $p(u){u.g=zp(()=>{u.g=null,u.i&&(u.i=!1,$p(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class qp extends Rr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$p(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(u){Rr.call(this),this.h=u,this.g={}}M($s,Rr);var qs=[];function Qc(u){le(u.g,function(f,m){this.g.hasOwnProperty(m)&&Gt(f)},u),u.g={}}$s.prototype.N=function(){$s.aa.N.call(this),Qc(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=a.JSON.stringify,Ki=a.JSON.parse,Hp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Hs(){}Hs.prototype.h=null;function Vd(u){return u.h||(u.h=u.i())}function Gs(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){qt.call(this,"d")}M(Kt,qt);function Yc(){qt.call(this,"c")}M(Yc,qt);var Xn={},Ks=null;function Jc(){return Ks=Ks||new Wt}Xn.La="serverreachability";function Gp(u){qt.call(this,Xn.La,u)}M(Gp,qt);function gr(u){let f=Jc();rn(f,new Gp(f))}Xn.STAT_EVENT="statevent";function Wp(u,f){qt.call(this,Xn.STAT_EVENT,u),this.stat=f}M(Wp,qt);function dn(u){let f=Jc();rn(f,new Wp(f,u))}Xn.Ma="timingevent";function ma(u,f){qt.call(this,Xn.Ma,u),this.size=f}M(ma,qt);function Qs(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function Ud(u,f,m,S,L,U){u.info(function(){if(u.g)if(U)for(var G="",Ke=U.split("&"),Mt=0;Mt<Ke.length;Mt++){var Qe=Ke[Mt].split("=");if(1<Qe.length){var mn=Qe[0];Qe=Qe[1];var yn=mn.split("_");G=2<=yn.length&&yn[1]=="type"?G+(mn+"="+Qe+"&"):G+(mn+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+m+`
`+G})}function ya(u,f,m,S,L,U,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+m+`
`+U+" "+G})}function Js(u,f,m,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Kp(u,m)+(S?" "+S:"")})}function ui(u,f){u.info(function(){return"TIMEOUT: "+f})}Ys.prototype.info=function(){};function Kp(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var S=m[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return ga(m)}catch{return f}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},va;function wa(){}M(wa,Hs),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},va=new wa;function li(u,f,m,S){this.j=u,this.i=f,this.l=m,this.R=S||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var Qp={},Zs={};function Xc(u,f,m){u.L=1,u.v=ru(Mr(f)),u.m=m,u.P=!0,eu(u,null)}function eu(u,f){u.F=Date.now(),eo(u),u.A=Mr(u.v);var m=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),rg(m.i,"t",S),u.C=0,m=u.j.J,u.h=new Bd,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new qp(I(u.Y,u,u.g),u.O)),f=u.U,m=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(qs[0]=L.toString()),L=qs);for(var U=0;U<L.length;U++){var G=jp(m,L[U],S||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),gr(),Ud(u.i,u.u,u.A,u.l,u.R,u.m)}li.prototype.ca=function(u){u=u.target;let f=this.M;f&&Fn(u)==3?f.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{let yn=Fn(this.g);var f=this.g.Ba();let hu=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||cg(this.g)))){this.J||yn!=4||f==7||(f==8||0>=hu?gr(3):gr(2)),tu(this);var m=this.g.Z();this.X=m;t:if(Xs(this)){var S=cg(this.g);u="";var L=S.length,U=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),to(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(U&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,ya(this.i,this.u,this.A,this.l,this.R,yn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Mt=this.g;if((Ke=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ke)){var Qe=Ke;break t}}Qe=null}if(m=Qe)Js(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ia(this,m);else{this.o=!1,this.s=3,dn(12),di(this),to(this);break e}}if(this.P){m=!0;let Or;for(;!this.J&&this.C<G.length;)if(Or=Qi(this,G),Or==Zs){yn==4&&(this.s=4,dn(14),m=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==Qp){this.s=4,dn(15),Js(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else Js(this.i,this.l,Or,null),Ia(this,Or);if(Xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||G.length!=0||this.h.h||(this.s=1,dn(16),m=!1),this.o=this.o&&m,!m)Js(this.i,this.l,G,"[Invalid Chunked Response]"),di(this),to(this);else if(0<G.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),du(mn),mn.M=!0,dn(11))}}else Js(this.i,this.l,G,null),Ia(this,G);yn==4&&di(this),this.o&&!this.J&&(yn==4?gn(this.j,this):(this.o=!1,eo(this)))}else ug(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),di(this),to(this)}}}catch{}finally{}};function Xs(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Qi(u,f){var m=u.C,S=f.indexOf(`
`,m);return S==-1?Zs:(m=Number(f.substring(m,S)),isNaN(m)?Qp:(S+=1,S+m>f.length?Zs:(f=f.slice(S,S+m),u.C=S+m,f)))}li.prototype.cancel=function(){this.J=!0,di(this)};function eo(u){u.S=Date.now()+u.I,Yp(u,u.I)}function Yp(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Qs(I(u.ba,u),f)}function tu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}li.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ui(this.i,this.A),this.L!=2&&(gr(),dn(17)),di(this),this.s=2,to(this)):Yp(this,this.S-u)};function to(u){u.j.G==0||u.J||gn(u.j,u)}function di(u){tu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Qc(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ia(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Hd(m.h,u))){if(!u.K&&Hd(m.h,u)&&m.G==3){try{var S=m.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ji(m),co(m);else break e;lu(m),dn(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Qs(I(m.Za,m),6e3));if(1>=qd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((u.K||m.g==u)&&Ji(m),!te(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let Qe=L[f];if(m.T=Qe[0],Qe=Qe[1],m.G==2)if(Qe[0]=="c"){m.K=Qe[1],m.ia=Qe[2];let mn=Qe[3];mn!=null&&(m.la=mn,m.j.info("VER="+m.la));let yn=Qe[4];yn!=null&&(m.Aa=yn,m.j.info("SVER="+m.Aa));let hu=Qe[5];hu!=null&&typeof hu=="number"&&0<hu&&(S=1.5*hu,m.L=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;let Or=u.g;if(Or){let lg=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lg){var U=S.h;U.g||lg.indexOf("spdy")==-1&&lg.indexOf("quic")==-1&&lg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(mr(U,U.h),U.h=null))}if(S.D){let hI=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;hI&&(S.ya=hI,ct(S.I,S.D,hI))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),S=m;var G=u;if(S.qa=l(S,S.J?S.ia:null,S.W),G.K){er(S.h,G);var Ke=G,Mt=S.L;Mt&&(Ke.I=Mt),Ke.B&&(tu(Ke),eo(Ke)),S.g=G}else eh(S);0<m.i.length&&Aa(m)}else Qe[0]!="stop"&&Qe[0]!="close"||pi(m,7);else m.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?pi(m,7):au(m):Qe[0]!="noop"&&m.l&&m.l.ta(Qe),m.v=0)}}gr(4)}catch{}}var jd=class{constructor(u,f){this.g=u,this.map=f}};function zd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $d(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qd(u){return u.h?1:u.g?u.g.size:0}function Hd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function mr(u,f){u.g?u.g.add(f):u.h=f}function er(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}zd.prototype.cancel=function(){if(this.i=no(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function no(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return F(u.i)}function Ea(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,S=0;S<m;S++)f.push(u[S]);return f}f=[],m=0;for(S in u)f[m++]=u[S];return f}function Gd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let S in u)f[m++]=S;return f}}}function it(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=Gd(u),S=Ea(u),L=S.length,U=0;U<L;U++)f.call(void 0,S[U],m&&m[U],u)}var ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var S=u[m].indexOf("="),L=null;if(0<=S){var U=u[m].substring(0,S);L=u[m].substring(S+1)}else U=u[m];f(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function tr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof tr){this.h=u.h,Ca(this,u.j),this.o=u.o,this.g=u.g,nu(this,u.s),this.l=u.l;var f=u.i,m=new Da;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Jp(this,m),this.m=u.m}else u&&(f=String(u).match(ba))?(this.h=!1,Ca(this,f[1]||"",!0),this.o=Pr(f[2]||""),this.g=Pr(f[3]||"",!0),nu(this,f[4]),this.l=Pr(f[5]||"",!0),Jp(this,f[6]||"",!0),this.m=Pr(f[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}tr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(nr(f,Wd,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(nr(f,Wd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(nr(m,m.charAt(0)=="/"?eg:Xp,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",nr(m,ro)),u.join("")};function Mr(u){return new tr(u)}function Ca(u,f,m){u.j=m?Pr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function nu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Jp(u,f,m){f instanceof Da?(u.i=f,iu(u.i,u.h)):(m||(f=nr(f,tg)),u.i=new Da(f,u.h))}function ct(u,f,m){u.i.set(f,m)}function ru(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nr(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Zp),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wd=/[#\/\?@]/g,Xp=/[#\?:]/g,eg=/[#\?]/g,tg=/[#\?@]/g,ro=/#/g;function Da(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Da.prototype,n.add=function(u,f){hi(this),this.i=null,u=kr(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function ng(u,f){hi(u),f=kr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function xr(u,f){return hi(u),f=kr(u,f),u.g.has(f)}n.forEach=function(u,f){hi(this),this.g.forEach(function(m,S){m.forEach(function(L){u.call(f,L,S,this)},this)},this)},n.na=function(){hi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let S=0;S<f.length;S++){let L=u[S];for(let U=0;U<L.length;U++)m.push(f[S])}return m},n.V=function(u){hi(this);let f=[];if(typeof u=="string")xr(this,u)&&(f=f.concat(this.g.get(kr(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return hi(this),this.i=null,u=kr(this,u),xr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function rg(u,f,m){ng(u,f),0<m.length&&(u.i=null,u.g.set(kr(u,f),F(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var S=f[m];let U=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var L=U;G[S]!==""&&(L+="="+encodeURIComponent(String(G[S]))),u.push(L)}}return this.i=u.join("&")};function kr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function iu(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(m,S){var L=S.toLowerCase();S!=L&&(ng(this,S),rg(this,L,m))},u)),u.j=f}function ig(u,f){let m=new Ys;if(a.Image){let S=new Image;S.onload=E(Ln,m,"TestLoadImage: loaded",!0,f,S),S.onerror=E(Ln,m,"TestLoadImage: error",!1,f,S),S.onabort=E(Ln,m,"TestLoadImage: abort",!1,f,S),S.ontimeout=E(Ln,m,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Sa(u,f){let m=new Ys,S=new AbortController,L=setTimeout(()=>{S.abort(),Ln(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(U=>{clearTimeout(L),U.ok?Ln(m,"TestPingServer: ok",!0,f):Ln(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ln(m,"TestPingServer: error",!1,f)})}function Ln(u,f,m,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(m)}catch{}}function sg(){this.g=new Hp}function Kd(u,f,m){let S=m||"";try{it(u,function(L,U){let G=L;d(L)&&(G=ga(L)),f.push(S+U+"="+encodeURIComponent(G))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function st(u){this.l=u.Ub||null,this.j=u.eb||!1}M(st,Hs),st.prototype.g=function(){return new su(this.l,this.j)},st.prototype.i=function(u){return function(){return u}}({});function su(u,f){Wt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(su,Wt),n=su.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,so(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,so(this)),this.g&&(this.readyState=3,so(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;og(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function og(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?io(this):so(this),this.readyState==3&&og(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,io(this))},n.Qa=function(u){this.g&&(this.response=u,io(this))},n.ga=function(){this.g&&io(this)};function io(u){u.readyState=4,u.l=null,u.j=null,u.v=null,so(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function so(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qd(u){let f="";return le(u,function(m,S){f+=S,f+=":",f+=m,f+=`\r
`}),f}function oo(u,f,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=Qd(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ct(u,f,m))}function Ze(u){Wt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ze,Wt);var ag=/^https?$/i,dI=["POST","PUT"];n=Ze.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():va.g(),this.v=this.o?Vd(this.o):Vd(va),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(U){ao(this,U);return}if(u=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)m.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let U of S.keys())m.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(dI,f,void 0))||S||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,G]of m)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jd(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){ao(this,U)}};function ao(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Yd(u),Yi(u)}function Yd(u){u.A||(u.A=!0,rn(u,"complete"),rn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rn(this,"complete"),rn(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ou(this):this.bb())},n.bb=function(){ou(this)};function ou(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Fn(u)!=4||u.Z()!=2)){if(u.u&&Fn(u)==4)zp(u.Ea,0,u);else if(rn(u,"readystatechange"),Fn(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var S;if(S=G===0){var L=String(u.D).match(ba)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!ag.test(L?L.toLowerCase():"")}m=S}if(m)rn(u,"complete"),rn(u,"success");else{u.m=6;try{var U=2<Fn(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",Yd(u)}}finally{Yi(u)}}}}function Yi(u,f){if(u.g){Jd(u);let m=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||rn(u,"ready");try{m.onreadystatechange=S}catch{}}}function Jd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Fn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ki(f)}};function cg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ug(u){let f={};u=(u.g&&2<=Fn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(te(u[S]))continue;var m=T(u[S]);let L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let U=f[L]||[];f[L]=U,U.push(m)}D(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Zd(u){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nr("baseRetryDelayMs",5e3,u),this.cb=Nr("retryDelaySeedMs",1e4,u),this.Wa=Nr("forwardChannelMaxRetries",2,u),this.wa=Nr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zd(u&&u.concurrentRequestLimit),this.Da=new sg,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zd.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,S){dn(0),this.W=u,this.H=f||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.I=l(this,null,this.W),Aa(this)};function au(u){if(cu(u),u.G==3){var f=u.U++,m=Mr(u.I);if(ct(m,"SID",u.K),ct(m,"RID",f),ct(m,"TYPE","terminate"),uo(u,m),f=new li(u,u.j,f),f.L=2,f.v=ru(Mr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),eo(f)}Zi(u)}function co(u){u.g&&(du(u),u.g.cancel(),u.g=null)}function cu(u){co(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ji(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Aa(u){if(!$d(u.h)&&!u.s){u.s=!0;var f=u.Ga;da||Vp(),ci||(da(),ci=!0),js.add(f,u),u.B=0}}function uu(u,f){return qd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Qs(I(u.Ga,u,f),nh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let L=new li(this,this.j,u),U=this.o;if(this.S&&(U?(U=_(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=fi(this,L,f),m=Mr(this.I),ct(m,"RID",u),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),uo(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Qd(U)))+"&"+f:this.m&&oo(m,this.m,U)),mr(this.h,L),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",f),ct(m,"SID","null"),L.T=!0,Xc(L,m,null)):Xc(L,m,f),this.G=2}}else this.G==3&&(u?Xd(this,u):this.i.length==0||$d(this.h)||Xd(this))};function Xd(u,f){var m;f?m=f.l:m=u.U++;let S=Mr(u.I);ct(S,"SID",u.K),ct(S,"RID",m),ct(S,"AID",u.T),uo(u,S),u.m&&u.o&&oo(S,u.m,u.o),m=new li(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=fi(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mr(u.h,m),Xc(m,S,f)}function uo(u,f){u.H&&le(u.H,function(m,S){ct(f,S,m)}),u.l&&it({},function(m,S){ct(f,S,m)})}function fi(u,f,m){m=Math.min(u.i.length,m);var S=u.l?I(u.l.Na,u.l,u):null;e:{var L=u.i;let U=-1;for(;;){let G=["count="+m];U==-1?0<m?(U=L[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Ke=!0;for(let Mt=0;Mt<m;Mt++){let Qe=L[Mt].g,mn=L[Mt].map;if(Qe-=U,0>Qe)U=Math.max(0,L[Mt].g-100),Ke=!1;else try{Kd(mn,G,"req"+Qe+"_")}catch{S&&S(mn)}}if(Ke){S=G.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,S}function eh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;da||Vp(),ci||(da(),ci=!0),js.add(f,u),u.v=0}}function lu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Qs(I(u.Fa,u),nh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qs(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),co(this),th(this))};function du(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function th(u){u.g=new li(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Mr(u.qa);ct(f,"RID","rpc"),ct(f,"SID",u.K),ct(f,"AID",u.T),ct(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(f,"TO",u.ja),ct(f,"TYPE","xmlhttp"),uo(u,f),u.m&&u.o&&oo(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ru(Mr(f)),m.m=null,m.P=!0,eu(m,u)}n.Za=function(){this.C!=null&&(this.C=null,co(this),lu(this),dn(19))};function Ji(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function gn(u,f){var m=null;if(u.g==f){Ji(u),du(u),u.g=null;var S=2}else if(Hd(u.h,f))m=f.D,er(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=Jc(),rn(S,new ma(S,m)),Aa(u)}else eh(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&uu(u,f)||S==2&&lu(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function nh(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function pi(u,f){if(u.j.info("Error code "+f),f==2){var m=I(u.fb,u),S=u.Xa;let L=!S;S=new tr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ca(S,"https"),ru(S),L?ig(S.toString(),m):Sa(S.toString(),m)}else dn(2);u.G=0,u.l&&u.l.sa(f),Zi(u),cu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function Zi(u){if(u.G=0,u.ka=[],u.l){let f=no(u.h);(f.length!=0||u.i.length!=0)&&(k(u.ka,f),k(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var S=m instanceof tr?Mr(m):new tr(m);if(S.g!="")f&&(S.g=f+"."+S.g),nu(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var U=new tr(null);S&&Ca(U,S),f&&(U.g=f),L&&nu(U,L),m&&(U.l=m),S=U}return m=u.D,f=u.ya,m&&f&&ct(S,m,f),ct(S,"VER",u.la),uo(u,S),S}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ze(new st({eb:m})):new Ze(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Wt.call(this),this.g=new Zd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!te(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!te(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ge(this)}M(N,Wt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){au(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ga(u),u=m);f.i.push(new jd(f.Ya++,u)),f.G==3&&Aa(f)},N.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,N.aa.N.call(this)};function V(u){Kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}M(V,Kt);function K(){Yc.call(this),this.status=1}M(K,Yc);function ge(u){this.g=u}M(ge,y),ge.prototype.ua=function(){rn(this.g,"a")},ge.prototype.ta=function(u){rn(this.g,new V(u))},ge.prototype.sa=function(u){rn(this.g,new K)},ge.prototype.ra=function(){rn(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,XS=Ns.createWebChannelTransport=function(){return new A},ZS=Ns.getStatEventTarget=function(){return Jc()},JS=Ns.Event=Xn,Hv=Ns.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Qf=Ns.ErrorCode=_a,Zc.COMPLETE="complete",YS=Ns.EventType=Zc,Gs.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,td=Ns.WebChannel=Gs,Iee=Ns.FetchXmlHttpFactory=st,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,QS=Ns.XhrIo=Ze}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var UU="@firebase/firestore";var ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");var wd="10.14.0";var Dc=new Lo("@firebase/firestore");function Yf(){return Dc.logLevel}function se(n,...e){if(Dc.logLevel<=Ue.DEBUG){let t=e.map(LR);Dc.debug(`Firestore (${wd}): ${n}`,...t)}}function Ls(n,...e){if(Dc.logLevel<=Ue.ERROR){let t=e.map(LR);Dc.error(`Firestore (${wd}): ${n}`,...t)}}function cd(n,...e){if(Dc.logLevel<=Ue.WARN){let t=e.map(LR);Dc.warn(`Firestore (${wd}): ${n}`,...t)}}function LR(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ye(n="Unexpected state"){let e=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+n;throw Ls(e),new Error(e)}function rt(n,e){n||ye()}function Ee(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ii=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Yv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}},sA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},oA=class{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ii,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ii)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string"),new Yv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new ln(e)}},aA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uA=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lA=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){rt(this.o===void 0);let r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string"),this.R=t.token,new uA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Eee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Jv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Eee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Je(n,e){return n<e?-1:n>e?1:0}function ud(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var fn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new fn(0,0))}static max(){return new n(new fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},bt=class n extends Zv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},bee=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pr=class n extends Zv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return bee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(bt.fromString(e))}static fromName(e){return new n(bt.fromString(e).popFirst(5))}static empty(){return new n(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new bt(e.slice()))}};var dA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};dA.UNKNOWN_ID=-1;function Tee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new fn(t+1,0):new fn(t,r));return new Sc(i,he.empty(),e)}function Cee(n){return new Sc(n.readTime,n.key,-1)}var Sc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ae.min(),he.empty(),-1)}static max(){return new n(Ae.max(),he.empty(),-1)}};function Dee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}var See="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mp(n){return b(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==See)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Aee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yp(n){return n.name==="IndexedDbTransactionError"}var vB=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Mw(n){return n==null}function np(n){return n===0&&1/n==-1/0}function Ree(n){return typeof n=="number"&&Number.isInteger(n)&&!np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Mee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KIe=[...Mee,"documentOverlays"],Pee=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xee=Pee,kee=[...xee,"indexConfiguration","indexState","indexEntries"];var QIe=[...kee,"globals"];function BU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var At=class n{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}},sd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ui=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();let e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}};Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Sn=class n{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ar=class n{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Sn(pr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ew=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var An=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ew("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};An.EMPTY_BYTE_STRING=new An("");var Nee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(n){if(rt(!!n),typeof n=="string"){let e=0,t=Nee.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ea(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}function FR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function VR(n){let e=n.mapValue.fields.__previous_value__;return FR(e)?VR(e):e}function rp(n){let e=Fs(n.mapValue.fields.__local_write_time__.timestampValue);return new fn(e.seconds,e.nanos)}var fA=class{constructor(e,t,r,i,s,o,a,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},tw=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FR(n)?4:EB(n)?9007199254740991:IB(n)?10:11:ye()}function zi(n,e){if(n===e)return!0;let t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Fs(i.timestampValue),a=Fs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ea(i.bytesValue).isEqual(ea(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return wt(i.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wt(i.integerValue)===wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=wt(i.doubleValue),a=wt(s.doubleValue);return o===a?np(o)===np(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ud(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(BU(o)!==BU(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!zi(o[c],a[c])))return!1;return!0}(n,e);default:return ye()}}function ip(n,e){return(n.values||[]).find(t=>zi(t,e))!==void 0}function ld(n,e){if(n===e)return 0;let t=Ac(n),r=Ac(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=wt(s.integerValue||s.doubleValue),c=wt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jU(n.timestampValue,e.timestampValue);case 4:return jU(rp(n),rp(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ea(s),c=ea(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Je(a[d],c[d]);if(h!==0)return h}return Je(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Je(wt(s.latitude),wt(o.latitude));return a!==0?a:Je(wt(s.longitude),wt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return zU(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,d,h;let g=s.fields||{},I=o.fields||{},E=(a=g.value)===null||a===void 0?void 0:a.arrayValue,M=(c=I.value)===null||c===void 0?void 0:c.arrayValue,F=Je(((d=E?.values)===null||d===void 0?void 0:d.length)||0,((h=M?.values)===null||h===void 0?void 0:h.length)||0);return F!==0?F:zU(E,M)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gv.mapValue&&o===Gv.mapValue)return 0;if(s===Gv.mapValue)return 1;if(o===Gv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=Je(c[g],h[g]);if(I!==0)return I;let E=ld(a[c[g]],d[h[g]]);if(E!==0)return E}return Je(c.length,h.length)}(n.mapValue,e.mapValue);default:throw ye()}}function jU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);let t=Fs(n),r=Fs(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function zU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ld(t[i],r[i]);if(s)return s}return Je(t.length,r.length)}function dd(n){return pA(n)}function pA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ea(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=pA(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${pA(t.fields[o])}`;return i+"}"}(n.mapValue):ye()}function $U(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gA(n){return!!n&&"integerValue"in n}function UR(n){return!!n&&"arrayValue"in n}function qU(n){return!!n&&"nullValue"in n}function HU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kv(n){return!!n&&"mapValue"in n}function IB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Zf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zf(t)}setAll(e){let t=pr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Kv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Zf(this.value))}};function bB(n){let e=[];return kc(n.fields,(t,r)=>{let i=new pr([t]);if(Kv(r)){let s=bB(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ar(e)}var si=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ae.min(),Ae.min(),Ae.min(),fr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ae.min(),Ae.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ae.min(),Ae.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hd=class{constructor(e,t){this.position=e,this.inclusive=t}};function GU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=ld(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function WU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}var Rc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Oee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nw=class{},$t=class n extends nw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yA(e,t,r):t==="array-contains"?new wA(e,r):t==="in"?new IA(e,r):t==="not-in"?new EA(e,r):t==="array-contains-any"?new bA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _A(e,r):new vA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ld(t,this.value)):t!==null&&Ac(this.value)===Ac(t)&&this.matchesComparison(ld(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oi=class n extends nw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return TB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function TB(n){return n.op==="and"}function CB(n){return Lee(n)&&TB(n)}function Lee(n){for(let e of n.filters)if(e instanceof oi)return!1;return!0}function mA(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+dd(n.value);if(CB(n))return n.filters.map(e=>mA(e)).join(",");{let e=n.filters.map(t=>mA(t)).join(",");return`${n.op}(${e})`}}function DB(n,e){return n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&zi(r.value,i.value)}(n,e):n instanceof oi?function(r,i){return i instanceof oi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DB(o,i.filters[a]),!0):!1}(n,e):void ye()}function SB(n){return n instanceof $t?function(t){return`${t.field.canonicalString()} ${t.op} ${dd(t.value)}`}(n):n instanceof oi?function(t){return t.op.toString()+" {"+t.getFilters().map(SB).join(" ,")+"}"}(n):"Filter"}var yA=class extends $t{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},_A=class extends $t{constructor(e,t){super(e,"in",t),this.keys=AB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vA=class extends $t{constructor(e,t){super(e,"not-in",t),this.keys=AB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}var wA=class extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return UR(t)&&ip(t.arrayValue,this.value)}},IA=class extends $t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ip(this.value.arrayValue,t)}},EA=class extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ip(this.value.arrayValue,t)}},bA=class extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!UR(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ip(this.value.arrayValue,r))}};var TA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function KU(n,e=null,t=[],r=[],i=null,s=null,o=null){return new TA(n,e,t,r,i,s,o)}function BR(n){let e=Ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dd(r)).join(",")),e.ue=t}return e.ue}function jR(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Oee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WU(n.startAt,e.startAt)&&WU(n.endAt,e.endAt)}function CA(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ta=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Fee(n,e,t,r,i,s,o,a){return new ta(n,e,t,r,i,s,o,a)}function zR(n){return new ta(n)}function QU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RB(n){return n.collectionGroup!==null}function Xf(n){let e=Ee(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Sn(pr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rc(s,r))}),t.has(pr.keyField().canonicalString())||e.ce.push(new Rc(pr.keyField(),r))}return e.ce}function Bi(n){let e=Ee(n);return e.le||(e.le=Vee(e,Xf(n))),e.le}function Vee(n,e){if(n.limitType==="F")return KU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Rc(i.field,s)});let t=n.endAt?new hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hd(n.startAt.position,n.startAt.inclusive):null;return KU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function DA(n,e){let t=n.filters.concat([e]);return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rw(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pw(n,e){return jR(Bi(n),Bi(e))&&n.limitType===e.limitType}function MB(n){return`${BR(Bi(n))}|lt:${n.limitType}`}function nd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SB(i)).join(", ")}]`),Mw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>dd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>dd(i)).join(",")),`Target(${r})`}(Bi(n))}; limitType=${n.limitType})`}function xw(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Xf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let d=GU(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,Xf(r),i)||r.endAt&&!function(o,a,c){let d=GU(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,Xf(r),i))}(n,e)}function Uee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PB(n){return(e,t)=>{let r=!1;for(let i of Xf(n)){let s=Bee(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Bee(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ld(c,d):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}var na=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return wB(this.inner)}size(){return this.innerSize}};var jee=new At(he.comparator);function Vs(){return jee}var xB=new At(he.comparator);function Jf(...n){let e=xB;for(let t of n)e=e.insert(t.key,t);return e}function kB(n){let e=xB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bc(){return ep()}function NB(){return ep()}function ep(){return new na(n=>n.toString(),(n,e)=>n.isEqual(e))}var zee=new At(he.comparator),$ee=new Sn(he.comparator);function Be(...n){let e=$ee;for(let t of n)e=e.add(t);return e}var qee=new Sn(Je);function Hee(){return qee}function $R(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function OB(n){return{integerValue:""+n}}function Gee(n,e){return Ree(e)?OB(e):$R(n,e)}var fd=class{constructor(){this._=void 0}};function Wee(n,e,t){return n instanceof pd?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&FR(s)&&(s=VR(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Mc?FB(n,e):n instanceof Pc?VB(n,e):function(i,s){let o=LB(i,s),a=YU(o)+YU(i.Pe);return gA(o)&&gA(i.Pe)?OB(a):$R(i.serializer,a)}(n,e)}function Kee(n,e,t){return n instanceof Mc?FB(n,e):n instanceof Pc?VB(n,e):t}function LB(n,e){return n instanceof gd?function(r){return gA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var pd=class extends fd{},Mc=class extends fd{constructor(e){super(),this.elements=e}};function FB(n,e){let t=UB(e);for(let r of n.elements)t.some(i=>zi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pc=class extends fd{constructor(e){super(),this.elements=e}};function VB(n,e){let t=UB(e);for(let r of n.elements)t=t.filter(i=>!zi(i,r));return{arrayValue:{values:t}}}var gd=class extends fd{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function YU(n){return wt(n.integerValue||n.doubleValue)}function UB(n){return UR(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Qee(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mc&&i instanceof Mc||r instanceof Pc&&i instanceof Pc?ud(r.elements,i.elements,zi):r instanceof gd&&i instanceof gd?zi(r.Pe,i.Pe):r instanceof pd&&i instanceof pd}(n.transform,e.transform)}var SA=class{constructor(e,t){this.version=e,this.transformResults=t}},Os=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Qv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var md=class{};function BB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sp(n.key,Os.none()):new xc(n.key,n.data,Os.none());{let t=n.data,r=fr.empty(),i=new Sn(pr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(n.key,r,new Ar(i.toArray()),Os.none())}}function Yee(n,e,t){n instanceof xc?function(i,s,o){let a=i.value.clone(),c=ZU(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof $i?function(i,s,o){if(!Qv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=ZU(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(jB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function tp(n,e,t,r){return n instanceof xc?function(s,o,a,c){if(!Qv(s.precondition,o))return a;let d=s.value.clone(),h=XU(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof $i?function(s,o,a,c){if(!Qv(s.precondition,o))return a;let d=XU(s.fieldTransforms,c,o),h=o.data;return h.setAll(jB(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return Qv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Jee(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=LB(r.transform,i||null);s!=null&&(t===null&&(t=fr.empty()),t.set(r.field,s))}return t||null}function JU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ud(r,i,(s,o)=>Qee(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xc=class extends md{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$i=class extends md{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function jB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ZU(n,e,t){let r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Kee(o,a,t[i]))}return r}function XU(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Wee(s,o,e))}return r}var sp=class extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},AA=class extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var RA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Yee(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=tp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=tp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=NB();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=BB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,(t,r)=>JU(t,r))&&ud(this.baseMutations,e.baseMutations,(t,r)=>JU(t,r))}},MA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=function(){return zee}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var PA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var jt,Ge;function Zee(n){switch(n){default:return ye();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function zB(n){if(n===void 0)return Ls("GRPC error has no .code"),$.UNKNOWN;switch(n){case jt.OK:return $.OK;case jt.CANCELLED:return $.CANCELLED;case jt.UNKNOWN:return $.UNKNOWN;case jt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case jt.INTERNAL:return $.INTERNAL;case jt.UNAVAILABLE:return $.UNAVAILABLE;case jt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case jt.NOT_FOUND:return $.NOT_FOUND;case jt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case jt.ABORTED:return $.ABORTED;case jt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case jt.DATA_LOSS:return $.DATA_LOSS;default:return ye()}}(Ge=jt||(jt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var eB=null;function Xee(){return new TextEncoder}var ete=new Zo([4294967295,4294967295],0);function tB(n){let e=Xee().encode(n),t=new KS;return t.update(e),new Uint8Array(t.digest())}function nB(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zo([t,r],0),new Zo([i,s],0)]}var kA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Zo.fromNumber(r)));return i.compare(ete)===1&&(i=new Zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=tB(e),[r,i]=nB(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=tB(e),[r,i]=nB(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Tc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var iw=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ae.min(),i,new At(Je),Vs(),Be())}},op=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Be(),Be(),Be())}};var od=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},sw=class{constructor(e,t){this.targetId=e,this.me=t}},ow=class{constructor(e,t,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},aw=class{constructor(){this.fe=0,this.ge=iB(),this.pe=An.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),t=Be(),r=Be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new op(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=iB()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},NA=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vs(),this.qe=rB(),this.Qe=new At(Je)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(CA(s))if(r===0){let o=new he(s.path);this.Ue(t,o,si.newNoDocument(o,Ae.min()))}else rt(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}eB?.et(function(h,g,I,E,M){var F,k,q,te,Y,oe;let je={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},le=g.unchangedNames;return le&&(je.bloomFilter={applied:M===0,hashCount:(F=le?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(te=(q=(k=le?.bits)===null||k===void 0?void 0:k.bitmap)===null||q===void 0?void 0:q.length)!==null&&te!==void 0?te:0,padding:(oe=(Y=le?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&oe!==void 0?oe:0,mightContain:D=>{var _;return(_=E?.mightContain(D))!==null&&_!==void 0&&_}}),je}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ea(r).toUint8Array()}catch(c){if(c instanceof ew)return cd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new kA(o,i,s)}catch(c){return cd(c instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&CA(a.target)){let c=new he(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,si.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new iw(e,t,this.Qe,this.ke,r);return this.ke=Vs(),this.qe=rB(),this.Qe=new At(Je),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new aw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Sn(Je),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new aw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function rB(){return new At(he.comparator)}function iB(){return new At(he.comparator)}var tte={asc:"ASCENDING",desc:"DESCENDING"},nte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rte={and:"AND",or:"OR"},OA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LA(n,e){return n.useProto3Json||Mw(e)?e:{value:e}}function cw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $B(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ite(n,e){return cw(n,e.toTimestamp())}function ji(n){return rt(!!n),Ae.fromTimestamp(function(t){let r=Fs(t);return new fn(r.seconds,r.nanos)}(n))}function qR(n,e){return FA(n,e).canonicalString()}function FA(n,e){let t=function(i){return new bt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qB(n){let e=bt.fromString(n);return rt(QB(e)),e}function VA(n,e){return qR(n.databaseId,e.path)}function eA(n,e){let t=qB(e);if(t.get(1)!==n.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(GB(t))}function HB(n,e){return qR(n.databaseId,e)}function ste(n){let e=qB(n);return e.length===4?bt.emptyPath():GB(e)}function UA(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GB(n){return rt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sB(n,e,t){return{name:VA(n,e),fields:t.value.mapValue.fields}}function ote(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(rt(h===void 0||typeof h=="string"),An.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),An.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){let h=d.code===void 0?$.UNKNOWN:zB(d.code);return new ee(h,d.message||"")}(o);t=new ow(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=eA(n,r.document.name),s=ji(r.document.updateTime),o=r.document.createTime?ji(r.document.createTime):Ae.min(),a=new fr({mapValue:{fields:r.document.fields}}),c=si.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new od(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=eA(n,r.document),s=r.readTime?ji(r.readTime):Ae.min(),o=si.newNoDocument(i,s),a=r.removedTargetIds||[];t=new od([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=eA(n,r.document),s=r.removedTargetIds||[];t=new od([],s,i,null)}else{if(!("filter"in e))return ye();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new xA(i,s),a=r.targetId;t=new sw(a,o)}}return t}function ate(n,e){let t;if(e instanceof xc)t={update:sB(n,e.key,e.value)};else if(e instanceof sp)t={delete:VA(n,e.key)};else if(e instanceof $i)t={update:sB(n,e.key,e.data),updateMask:mte(e.fieldMask)};else{if(!(e instanceof AA))return ye();t={verify:VA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof pd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ite(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye()}(n,e.precondition)),t}function cte(n,e){return n&&n.length>0?(rt(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ji(i.updateTime):ji(s);return o.isEqual(Ae.min())&&(o=ji(s)),new SA(o,i.transformResults||[])}(t,e))):[]}function ute(n,e){return{documents:[HB(n,e.path)]}}function lte(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HB(n,i);let s=function(d){if(d.length!==0)return KB(oi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(I){return{field:rd(I.field),direction:fte(I.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=LA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function dte(n){let e=ste(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){rt(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let I=WB(g);return I instanceof oi&&CB(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(M){return new Rc(id(M.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,Mw(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,E=g.values||[];return new hd(E,I)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let I=!g.before,E=g.values||[];return new hd(E,I)}(t.endAt)),Fee(e,i,o,s,a,"F",c,d)}function hte(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=id(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=id(t.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=id(t.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=id(t.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return $t.create(id(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return oi.create(t.compositeFilter.filters.map(r=>WB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function fte(n){return tte[n]}function pte(n){return nte[n]}function gte(n){return rte[n]}function rd(n){return{fieldPath:n.canonicalString()}}function id(n){return pr.fromServerFormat(n.fieldPath)}function KB(n){return n instanceof $t?function(t){if(t.op==="=="){if(HU(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NAN"}};if(qU(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(HU(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NOT_NAN"}};if(qU(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rd(t.field),op:pte(t.op),value:t.value}}}(n):n instanceof oi?function(t){let r=t.getFilters().map(i=>KB(i));return r.length===1?r[0]:{compositeFilter:{op:gte(t.op),filters:r}}}(n):ye()}function mte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ap=class n{constructor(e,t,r,i,s=Ae.min(),o=Ae.min(),a=An.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var BA=class{constructor(e){this.ct=e}};function yte(n){let e=dte({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rw(e,e.limit,"L"):e}var uw=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(wt(e.integerValue));else if("doubleValue"in e){let r=wt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),np(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Fs(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ea(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?EB(e)?this.dt(t,Number.MAX_SAFE_INTEGER):IB(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ye()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(wt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),he.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};uw.vt=new uw;var jA=class{constructor(){this.un=new zA}addToCollectionParentIndex(e,t){return this.un.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Sc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Sc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},zA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Sn(bt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(bt.comparator)).toArray()}};var JIe=new Uint8Array(0);var Vi=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);var cp=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var $A=class{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var HA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&tp(r.mutation,i,Ar.empty(),fn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){let i=bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Jf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vs(),o=ep(),a=function(){return ep()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof $i)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),tp(h.mutation,d,h.mutation.getFieldMask(),fn.now())):o.set(d.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new qA(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ep(),i=new At((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Ar.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Be()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=NB();h.forEach(I=>{if(!s.has(I)){let E=BB(t.get(I),r.get(I));E!==null&&g.set(I,E),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(bc()),a=-1,c=s;return o.next(d=>W.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Be())).next(h=>({batchId:a,changes:kB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=Jf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Jf();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=function(g,I){return new ta(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,si.newInvalidDocument(h)))});let a=Jf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&tp(h.mutation,d,Ar.empty(),fn.now()),xw(t,d)&&(a=a.insert(c,d))}),a})}};var GA=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return W.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ji(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:yte(i.bundledQuery),readTime:ji(i.readTime)}}(t)),W.resolve()}};var WA=class{constructor(){this.overlays=new At(he.comparator),this.Ir=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=bc(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=bc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=bc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PA(t,r));let s=this.Ir.get(t);s===void 0&&(s=Be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var KA=class{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var up=class{constructor(){this.Tr=new Sn(zt.Er),this.dr=new Sn(zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new zt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new zt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new he(new bt([])),r=new zt(t,e),i=new zt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new he(new bt([])),r=new zt(t,e),i=new zt(t,e+1),s=Be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new zt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},zt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return he.comparator(e.key,t.key)||Je(e.wr,t.wr)}static Ar(e,t){return Je(e.wr,t.wr)||he.comparator(e.key,t.key)}};var QA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Sn(zt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new RA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new zt(t,0),i=new zt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Je);return t.forEach(i=>{let s=new zt(i,0),o=new zt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));let o=new zt(new he(s),0),a=new Sn(Je);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},o),W.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(t.mutations,i=>{let s=new zt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new zt(t,0),i=this.br.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var YA=class{constructor(e){this.Mr=e,this.docs=function(){return new At(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():si.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vs(),o=t.path,a=new he(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Dee(Cee(h),r)<=0||(i.has(h.key)||xw(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ye()}Or(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JA(this)}getSize(e){return W.resolve(this.size)}},JA=class extends $A{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ZA=class{constructor(e){this.persistence=e,this.Nr=new na(t=>BR(t),jR),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new up,this.targetCount=0,this.kr=cp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),W.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new cp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Kn(t),W.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Br.containsKey(t))}};var XA=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new vB(0),this.Kr=!1,this.Kr=!0,this.$r=new KA,this.referenceDelegate=e(this),this.Ur=new ZA(this),this.indexManager=new jA,this.remoteDocumentCache=function(i){return new YA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BA(t),this.Gr=new GA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new QA(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new eR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},eR=class extends hA{constructor(e){super(),this.currentSequenceNumber=e}},tR=class n{constructor(e){this.persistence=e,this.Jr=new up,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),W.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{let i=he.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return W.or([()=>W.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var nR=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Be(),i=Be();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var rR=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iR=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pL()?8:Aee(cn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new rR;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Yf()<=Ue.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",nd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Yf()<=Ue.DEBUG&&se("QueryEngine","Query:",nd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Yf()<=Ue.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",nd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):W.resolve())}Yi(e,t){if(QU(t))return W.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=rw(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,a);return this.ns(t,d,o,c.readTime)?this.Yi(e,rw(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return QU(t)||i.isEqual(Ae.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?W.resolve(null):(Yf()<=Ue.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nd(t)),this.rs(e,o,t,Tee(i,-1)).next(a=>a))})}ts(e,t){let r=new Sn(PB(e));return t.forEach((i,s)=>{xw(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Yf()<=Ue.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",nd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Sc.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var sR=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(Je),this._s=new na(s=>BR(s),jR),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function _te(n,e,t,r){return new sR(n,e,t,r)}function YB(n,e){return b(this,null,function*(){let t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Be();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function vte(n,e){let t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){let g=d.batch,I=g.keys(),E=W.resolve();return I.forEach(M=>{E=E.next(()=>h.getEntry(c,M)).next(F=>{let k=d.docVersions.get(M);rt(k!==null),F.version.compareTo(k)<0&&(g.applyToRemoteDocument(F,d),F.isValidDocument()&&(F.setReadTime(d.commitVersion),h.addEntry(F)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Be();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function JB(n){let e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wte(n,e){let t=Ee(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,g)));let E=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(An.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),function(F,k,q){return F.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,E,h)&&a.push(t.Ur.updateTargetData(s,E))});let c=Vs(),d=Be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Ite(s,o,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(Ae.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.os=i,s))}function Ite(n,e,t){let r=Be(),i=Be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function Ete(n,e){let t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bte(n,e){let t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new ap(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function oR(n,e,t){return b(this,null,function*(){let r=Ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yp(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function oB(n,e,t){let r=Ee(n),i=Ae.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){let g=Ee(c),I=g._s.get(h);return I!==void 0?W.resolve(g.os.get(I)):g.Ur.getTargetData(d,h)}(r,o,Bi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Ae.min(),t?s:Be())).next(a=>(Tte(r,Uee(e),a),{documents:a,Ts:s})))}function Tte(n,e,t){let r=n.us.get(e)||Ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var lw=class{constructor(){this.activeTargetIds=Hee()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aR=class{constructor(){this.so=new lw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cR=class{_o(e){}shutdown(){}};var dw=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wv=null;function tA(){return Wv===null?Wv=function(){return 268435456+Math.round(2147483648*Math.random())}():Wv++,"0x"+Wv.toString(16)}var Cte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uR=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dn="WebChannelConnection",lR=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=tA(),c=this.xo(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,c,d,i).then(h=>(se("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw cd("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wd}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=Cte[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=tA();return new Promise((o,a)=>{let c=new QS;c.setWithCredentials(!0),c.listenOnce(YS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Qf.NO_ERROR:let h=c.getResponseJson();se(Dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Qf.TIMEOUT:se(Dn,`RPC '${e}' ${s} timed out`),a(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:let g=c.getStatus();if(se(Dn,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let I=c.getResponseJson();Array.isArray(I)&&(I=I[0]);let E=I?.error;if(E&&E.status&&E.message){let M=function(k){let q=k.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(E.status);a(new ee(M,E.message))}else a(new ee($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ee($.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{se(Dn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);se(Dn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=tA(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=XS(),a=ZS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");se(Dn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c),I=!1,E=!1,M=new uR({Io:k=>{E?se(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(I||(se(Dn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),se(Dn,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},To:()=>g.close()}),F=(k,q,te)=>{k.listen(q,Y=>{try{te(Y)}catch(oe){setTimeout(()=>{throw oe},0)}})};return F(g,td.EventType.OPEN,()=>{E||(se(Dn,`RPC '${e}' stream ${i} transport opened.`),M.yo())}),F(g,td.EventType.CLOSE,()=>{E||(E=!0,se(Dn,`RPC '${e}' stream ${i} transport closed`),M.So())}),F(g,td.EventType.ERROR,k=>{E||(E=!0,cd(Dn,`RPC '${e}' stream ${i} transport errored:`,k),M.So(new ee($.UNAVAILABLE,"The operation could not be completed")))}),F(g,td.EventType.MESSAGE,k=>{var q;if(!E){let te=k.data[0];rt(!!te);let Y=te,oe=Y.error||((q=Y[0])===null||q===void 0?void 0:q.error);if(oe){se(Dn,`RPC '${e}' stream ${i} received error:`,oe);let je=oe.status,le=function(w){let C=jt[w];if(C!==void 0)return zB(C)}(je),D=oe.message;le===void 0&&(le=$.INTERNAL,D="Unknown error status: "+je+" with message "+oe.message),E=!0,M.So(new ee(le,D)),g.close()}else se(Dn,`RPC '${e}' stream ${i} received:`,te),M.bo(te)}}),F(a,JS.STAT_EVENT,k=>{k.stat===Hv.PROXY?se(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Hv.NOPROXY&&se(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function nA(){return typeof document<"u"?document:null}function kw(n){return new OA(n,!0)}var hw=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var fw=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Ls(t.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dR=class extends fw{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=ote(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?ji(o.readTime):Ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=UA(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=CA(c)?{documents:ute(s,c)}:{query:lte(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$B(s,o.resumeToken);let d=LA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=cw(s,o.snapshotVersion.toTimestamp());let d=LA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=hte(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=UA(this.serializer),t.removeTarget=e,this.a_(t)}},hR=class extends fw{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=cte(e.writeResults,e.commitTime),r=ji(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=UA(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ate(this.serializer,r))};this.a_(t)}};var fR=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,FA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee($.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,FA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pR=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ls(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gR=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){Nc(this)&&(se("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let d=Ee(c);d.L_.add(4),yield _p(d),d.q_.set("Unknown"),d.L_.delete(4),yield Nw(d)})}(this))}))}),this.q_=new pR(r,i)}};function Nw(n){return b(this,null,function*(){if(Nc(n))for(let e of n.B_)yield e(!0)})}function _p(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ZB(n,e){let t=Ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),KR(t)?WR(t):Id(t).r_()&&GR(t,e))}function HR(n,e){let t=Ee(n),r=Id(t);t.N_.delete(e),r.r_()&&XB(t,e),t.N_.size===0&&(r.r_()?r.o_():Nc(t)&&t.q_.set("Unknown"))}function GR(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Id(n).A_(e)}function XB(n,e){n.Q_.xe(e),Id(n).R_(e)}function WR(n){n.Q_=new NA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Id(n).start(),n.q_.v_()}function KR(n){return Nc(n)&&!Id(n).n_()&&n.N_.size>0}function Nc(n){return Ee(n).L_.size===0}function ej(n){n.Q_=void 0}function Dte(n){return b(this,null,function*(){n.q_.set("Online")})}function Ste(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{GR(n,e)})})}function Ate(n,e){return b(this,null,function*(){ej(n),KR(n)?(n.q_.M_(e),WR(n)):n.q_.set("Unknown")})}function Rte(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof ow&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pw(n,r)}else if(e instanceof od?n.Q_.Ke(e):e instanceof sw?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{let r=yield JB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(An.EMPTY_BYTE_STRING,h.snapshotVersion)),XB(s,c);let g=new ap(h.target,c,d,h.sequenceNumber);GR(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){se("RemoteStore","Failed to raise snapshot:",r),yield pw(n,r)}})}function pw(n,e,t){return b(this,null,function*(){if(!yp(e))throw e;n.L_.add(1),yield _p(n),n.q_.set("Offline"),t||(t=()=>JB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){se("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Nw(n)}))})}function tj(n,e){return e().catch(t=>pw(n,t,e))}function Ow(n){return b(this,null,function*(){let e=Ee(n),t=ra(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Mte(e);)try{let i=yield Ete(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Pte(e,i)}catch(i){yield pw(e,i)}nj(e)&&rj(e)})}function Mte(n){return Nc(n)&&n.O_.length<10}function Pte(n,e){n.O_.push(e);let t=ra(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nj(n){return Nc(n)&&!ra(n).n_()&&n.O_.length>0}function rj(n){ra(n).start()}function xte(n){return b(this,null,function*(){ra(n).p_()})}function kte(n){return b(this,null,function*(){let e=ra(n);for(let t of n.O_)e.m_(t.mutations)})}function Nte(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=MA.from(r,e,t);yield tj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ow(n)})}function Ote(n,e){return b(this,null,function*(){e&&ra(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return Zee(o)&&o!==$.ABORTED}(i.code)){let s=r.O_.shift();ra(r).s_(),yield tj(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ow(r)}})}(n,e)),nj(n)&&rj(n)})}function aB(n,e){return b(this,null,function*(){let t=Ee(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");let r=Nc(t);t.L_.add(3),yield _p(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Nw(t)})}function Lte(n,e){return b(this,null,function*(){let t=Ee(n);e?(t.L_.delete(2),yield Nw(t)):e||(t.L_.add(2),yield _p(t),t.q_.set("Unknown"))})}function Id(n){return n.K_||(n.K_=function(t,r,i){let s=Ee(t);return s.w_(),new dR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Dte.bind(null,n),Ro:Ste.bind(null,n),mo:Ate.bind(null,n),d_:Rte.bind(null,n)}),n.B_.push(e=>b(null,null,function*(){e?(n.K_.s_(),KR(n)?WR(n):n.q_.set("Unknown")):(yield n.K_.stop(),ej(n))}))),n.K_}function ra(n){return n.U_||(n.U_=function(t,r,i){let s=Ee(t);return s.w_(),new hR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xte.bind(null,n),mo:Ote.bind(null,n),f_:kte.bind(null,n),g_:Nte.bind(null,n)}),n.B_.push(e=>b(null,null,function*(){e?(n.U_.s_(),yield Ow(n)):(yield n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var mR=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function QR(n,e){if(Ls("AsyncQueue",`${e}: ${n}`),yp(n))return new ee($.UNAVAILABLE,`${e}: ${n}`);throw n}var gw=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Jf(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var mw=class{constructor(){this.W_=new At(he.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},yd=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,gw.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var yR=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_R=class{constructor(){this.queries=cB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Ee(t),s=i.queries;i.queries=cB(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new ee($.ABORTED,"Firestore shutting down"))}};function cB(){return new na(n=>MB(n),Pw)}function ij(n,e){return b(this,null,function*(){let t=Ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new yR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=QR(o,`Initialization of query '${nd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&YR(t)})}function sj(n,e){return b(this,null,function*(){let t=Ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Fte(n,e){let t=Ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&YR(t)}function Vte(n,e,t){let r=Ee(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function YR(n){n.Y_.forEach(e=>{e.next()})}var vR,uB;(uB=vR||(vR={})).ea="default",uB.Cache="cache";var yw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new yd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vR.Cache}};var _w=class{constructor(e){this.key=e}},vw=class{constructor(e){this.key=e}},wR=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=PB(e),this.Ra=new gw(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new mw,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),E=xw(this.query,g)?g:null,M=!!I&&this.mutatedKeys.has(I.key),F=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),k=!1;I&&E?I.data.isEqual(E.data)?M!==F&&(r.track({type:3,doc:E}),k=!0):this.ga(I,E)||(r.track({type:2,doc:E}),k=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(a=!0)):!I&&E?(r.track({type:0,doc:E}),k=!0):I&&!E&&(r.track({type:1,doc:I}),k=!0,(c||d)&&(a=!0)),k&&(E?(o=o.add(E),s=F?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,g)=>function(E,M){let F=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return F(E)-F(M)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new yd(this.query,e.Ra,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new vw(r))}),this.da.forEach(r=>{e.has(r)||t.push(new _w(r))}),t}ba(e){this.Ta=e.Ts,this.da=Be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},IR=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ER=class{constructor(e){this.key=e,this.va=!1}},bR=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new na(a=>MB(a),Pw),this.Ma=new Map,this.xa=new Set,this.Oa=new At(he.comparator),this.Na=new Map,this.La=new up,this.Ba={},this.ka=new Map,this.qa=cp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Ute(n,e,t=!0){return b(this,null,function*(){let r=dj(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield oj(r,e,t,!0),i})}function Bte(n,e){return b(this,null,function*(){let t=dj(n);yield oj(t,e,!0,!1)})}function oj(n,e,t,r){return b(this,null,function*(){let i=yield bte(n.localStore,Bi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield jte(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&ZB(n.remoteStore,i),a})}function jte(n,e,t,r,i){return b(this,null,function*(){n.Ka=(g,I,E)=>function(F,k,q,te){return b(this,null,function*(){let Y=k.view.ma(q);Y.ns&&(Y=yield oB(F.localStore,k.query,!1).then(({documents:D})=>k.view.ma(D,Y)));let oe=te&&te.targetChanges.get(k.targetId),je=te&&te.targetMismatches.get(k.targetId)!=null,le=k.view.applyChanges(Y,F.isPrimaryClient,oe,je);return dB(F,k.targetId,le.wa),le.snapshot})}(n,g,I,E);let s=yield oB(n.localStore,e,!0),o=new wR(e,s.Ts),a=o.ma(s.documents),c=op.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);dB(n,t,d.wa);let h=new IR(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function zte(n,e,t){return b(this,null,function*(){let r=Ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Pw(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield oR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&HR(r.remoteStore,i.targetId),TR(r,i.targetId)}).catch(mp))):(TR(r,i.targetId),yield oR(r.localStore,i.targetId,!0))})}function $te(n,e){return b(this,null,function*(){let t=Ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),HR(t.remoteStore,r.targetId))})}function qte(n,e,t){return b(this,null,function*(){let r=Jte(n);try{let i=yield function(o,a){let c=Ee(o),d=fn.now(),h=a.reduce((E,M)=>E.add(M.key),Be()),g,I;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=Vs(),F=Be();return c.cs.getEntries(E,h).next(k=>{M=k,M.forEach((q,te)=>{te.isValidDocument()||(F=F.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,M)).next(k=>{g=k;let q=[];for(let te of a){let Y=Jee(te,g.get(te.key).overlayedDocument);Y!=null&&q.push(new $i(te.key,Y,bB(Y.value.mapValue),Os.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,q,a)}).next(k=>{I=k;let q=k.applyToLocalDocumentSet(g,F);return c.documentOverlayCache.saveOverlays(E,k.batchId,q)})}).then(()=>({batchId:I.batchId,changes:kB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new At(Je)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield vp(r,i.changes),yield Ow(r.remoteStore)}catch(i){let s=QR(i,"Failed to persist write");t.reject(s)}})}function aj(n,e){return b(this,null,function*(){let t=Ee(n);try{let r=yield wte(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?rt(o.va):i.removedDocuments.size>0&&(rt(o.va),o.va=!1))}),yield vp(t,r,e)}catch(r){yield mp(r)}})}function lB(n,e,t){let r=Ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Ee(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.j_)I.Z_(a)&&(d=!0)}),d&&YR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hte(n,e,t){return b(this,null,function*(){let r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new At(he.comparator);o=o.insert(s,si.newNoDocument(s,Ae.min()));let a=Be().add(s),c=new iw(Ae.min(),new Map,new At(Je),o,a);yield aj(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),JR(r)}else yield oR(r.localStore,e,!1).then(()=>TR(r,e,t)).catch(mp)})}function Gte(n,e){return b(this,null,function*(){let t=Ee(n),r=e.batch.batchId;try{let i=yield vte(t.localStore,e);uj(t,r,null),cj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vp(t,i)}catch(i){yield mp(i)}})}function Wte(n,e,t){return b(this,null,function*(){let r=Ee(n);try{let i=yield function(o,a){let c=Ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(rt(g!==null),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);uj(r,e,t),cj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vp(r,i)}catch(i){yield mp(i)}})}function cj(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function uj(n,e,t){let r=Ee(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function TR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||lj(n,r)})}function lj(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(HR(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),JR(n))}function dB(n,e,t){for(let r of t)r instanceof _w?(n.La.addReference(r.key,e),Kte(n,r)):r instanceof vw?(se("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||lj(n,r.key)):ye()}function Kte(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(r),JR(n))}function JR(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new he(bt.fromString(e)),r=n.qa.next();n.Na.set(r,new ER(t)),n.Oa=n.Oa.insert(t,r),ZB(n.remoteStore,new ap(Bi(zR(t.path)),r,"TargetPurposeLimboResolution",vB.oe))}}function vp(n,e,t){return b(this,null,function*(){let r=Ee(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=nR.Wi(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,d){return b(this,null,function*(){let h=Ee(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(d,I=>W.forEach(I.$i,E=>h.persistence.referenceDelegate.addReference(g,I.targetId,E)).next(()=>W.forEach(I.Ui,E=>h.persistence.referenceDelegate.removeReference(g,I.targetId,E)))))}catch(g){if(!yp(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let E=h.os.get(I),M=E.snapshotVersion,F=E.withLastLimboFreeSnapshotVersion(M);h.os=h.os.insert(I,F)}}})}(r.localStore,s))})}function Qte(n,e){return b(this,null,function*(){let t=Ee(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());let r=yield YB(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new ee($.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vp(t,r.hs)}})}function Yte(n,e){let t=Ee(n),r=t.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function dj(n){let e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yte.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hte.bind(null,e),e.Ca.d_=Fte.bind(null,e.eventManager),e.Ca.$a=Vte.bind(null,e.eventManager),e}function Jte(n){let e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wte.bind(null,e),e}var hB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=kw(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return _te(this.persistence,new iR,t.initialUser,this.serializer)}Ga(t){return new XA(tR.Zr,this.serializer)}Wa(t){return new aR}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Zte=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lB(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qte.bind(null,this.syncEngine),yield Lte(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _R}()}createDatastore(t){let r=kw(t.databaseInfo.databaseId),i=function(o){return new lR(o)}(t.databaseInfo);return function(o,a,c,d){return new fR(o,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new gR(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>lB(this.syncEngine,r,0),function(){return dw.D()?new dw:new cR}())}createSyncEngine(t,r){return function(s,o,a,c,d,h,g){let I=new bR(s,o,a,c,d,h);return g&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=Ee(s);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield _p(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ww=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var CR=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=Jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){se("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=QR(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rA(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield YB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function fB(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Xte(n);se("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aB(e.remoteStore,i)),n._onlineComponents=e})}function Xte(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;cd("Error using user provided cache. Falling back to memory cache: "+t),yield rA(n,new hB)}}else se("FirestoreClient","Using default OfflineComponentProvider"),yield rA(n,new hB);return n._offlineComponents})}function hj(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),yield fB(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),yield fB(n,new Zte))),n._onlineComponents})}function ene(n){return hj(n).then(e=>e.syncEngine)}function fj(n){return b(this,null,function*(){let e=yield hj(n),t=e.eventManager;return t.onListen=Ute.bind(null,e.syncEngine),t.onUnlisten=zte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Bte.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$te.bind(null,e.syncEngine),t})}function tne(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return function(s,o,a,c,d){let h=new ww({next:I=>{h.Za(),o.enqueueAndForget(()=>sj(s,g));let E=I.docs.has(a);!E&&I.fromCache?d.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&I.fromCache&&c&&c.source==="server"?d.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(I)},error:I=>d.reject(I)}),g=new yw(zR(a.path),h,{includeMetadataChanges:!0,_a:!0});return ij(s,g)}(yield fj(n),n.asyncQueue,e,t,r)})),r.promise}function nne(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return function(s,o,a,c,d){let h=new ww({next:I=>{h.Za(),o.enqueueAndForget(()=>sj(s,g)),I.fromCache&&c.source==="server"?d.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(I)},error:I=>d.reject(I)}),g=new yw(a,h,{includeMetadataChanges:!0,_a:!0});return ij(s,g)}(yield fj(n),n.asyncQueue,e,t,r)})),r.promise}function pj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pB=new Map;function gj(n,e,t){if(!t)throw new ee($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rne(n,e,t,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gB(n){if(!he.isDocumentKey(n))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mB(n){if(he.isDocumentKey(n))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function Us(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Lw(n);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ine(n,e){if(e<=0)throw new ee($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Iw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_d=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iA;switch(r.type){case"firstParty":return new cA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=pB.get(t);r&&(se("ComponentProvider","Removing Datastore"),pB.delete(t),r.terminate())}(this),Promise.resolve()}};function mj(n,e,t,r={}){var i;let s=(n=Us(n,_d))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&cd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ln.MOCK_USER;else{a=s_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ln(d)}n._authCredentials=new sA(new Yv(a,c))}}var ia=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xo=class n extends ia{constructor(e,t,r){super(e,t,zR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function yj(n,e,...t){if(n=ht(n),gj("collection","path",e),n instanceof _d){let r=bt.fromString(e,...t);return mB(r),new Xo(n,null,r)}{if(!(n instanceof Zn||n instanceof Xo))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(bt.fromString(e,...t));return mB(r),new Xo(n.firestore,null,r)}}function ZR(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Jv.newId()),gj("doc","path",e),n instanceof _d){let r=bt.fromString(e,...t);return gB(r),new Zn(n,null,new he(r))}{if(!(n instanceof Zn||n instanceof Xo))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(bt.fromString(e,...t));return gB(r),new Zn(n.firestore,n instanceof Xo?n.converter:null,new he(r))}}var Ew=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hw(this,"async_queue_retry"),this.Vu=()=>{let r=nA();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=nA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=nA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yp(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ls("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=mR.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ye()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var sa=class extends _d{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ew,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ew(e),this._firestoreClient=void 0,yield e}})}};function _j(n,e){let t=typeof n=="object"?n:Vo(),r=typeof n=="string"?n:e||"(default)",i=ic(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=i_("firestore");s&&mj(i,...s)}return i}function XR(n){if(n._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sne(n),n._firestoreClient}function sne(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,d,h){return new fA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pj(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new CR(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var lp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(An.fromBase64String(e))}catch(t){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dp=class{constructor(e){this._methodName=e}};var hp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}};var fp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var one=/^__.*__$/,DR=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}},bw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}var SR=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vj(this.Cu)&&one.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},AR=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kw(e)}Qu(e,t,r,i=!1){return new SR({Cu:e,methodName:t,qu:r,path:pr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function eM(n){let e=n._freezeSettings(),t=kw(n._databaseId);return new AR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ane(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);tM("Data must be an object, but it was:",o,r);let a=wj(r,o),c,d;if(s.merge)c=new Ar(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let I=RR(e,g,t);if(!o.contains(I))throw new ee($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Ej(h,I)||h.push(I)}c=new Ar(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new DR(new fr(a),c,d)}var Tw=class n extends dp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function cne(n,e,t,r){let i=n.Qu(1,e,t);tM("Data must be an object, but it was:",i,r);let s=[],o=fr.empty();kc(r,(c,d)=>{let h=nM(e,c,t);d=ht(d);let g=i.Nu(h);if(d instanceof Tw)s.push(h);else{let I=wp(d,g);I!=null&&(s.push(h),o.set(h,I))}});let a=new Ar(s);return new bw(o,a,i.fieldTransforms)}function une(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[RR(e,r,t)],c=[i];if(s.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)a.push(RR(e,s[I])),c.push(s[I+1]);let d=[],h=fr.empty();for(let I=a.length-1;I>=0;--I)if(!Ej(d,a[I])){let E=a[I],M=c[I];M=ht(M);let F=o.Nu(E);if(M instanceof Tw)d.push(E);else{let k=wp(M,F);k!=null&&(d.push(E),h.set(E,k))}}let g=new Ar(d);return new bw(h,g,o.fieldTransforms)}function lne(n,e,t,r=!1){return wp(t,n.Qu(r?4:3,e))}function wp(n,e){if(Ij(n=ht(n)))return tM("Unsupported field value:",e,n),wj(n,e);if(n instanceof dp)return function(r,i){if(!vj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=wp(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gee(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=fn.fromDate(r);return{timestampValue:cw(i.serializer,s)}}if(r instanceof fn){let s=new fn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cw(i.serializer,s)}}if(r instanceof hp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lp)return{bytesValue:$B(i.serializer,r._byteString)};if(r instanceof Zn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return $R(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Lw(r)}`)}(n,e)}function wj(n,e){let t={};return wB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(n,(r,i)=>{let s=wp(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Ij(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fn||n instanceof hp||n instanceof lp||n instanceof Zn||n instanceof dp||n instanceof fp)}function tM(n,e,t){if(!Ij(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Lw(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function RR(n,e,t){if((e=ht(e))instanceof vd)return e._internalPath;if(typeof e=="string")return nM(n,e);throw Cw("Field path arguments must be of type string or ",n,!1,void 0,t)}var dne=new RegExp("[~\\*/\\[\\]]");function nM(n,e,t){if(e.search(dne)>=0)throw Cw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch{throw Cw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ee($.INVALID_ARGUMENT,a+n+c)}function Ej(n,e){return n.some(t=>t.isEqual(e))}var Dw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Fw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},MR=class extends Dw{data(){return super.data()}};function Fw(n,e){return typeof e=="string"?nM(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}function hne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pp=class{},gp=class extends pp{};function bj(n,e,...t){let r=[];e instanceof pp&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof PR).length,a=s.filter(c=>c instanceof Sw).length;if(o>1||o>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Sw=class n extends gp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Sj(e._query,t),new ia(e.firestore,e.converter,DA(e._query,t))}_parse(e){let t=eM(e.firestore);return function(s,o,a,c,d,h,g){let I;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){_B(g,h);let E=[];for(let M of g)E.push(yB(c,s,M));I={arrayValue:{values:E}}}else I=yB(c,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||_B(g,h),I=lne(a,o,g,h==="in"||h==="not-in");return $t.create(d,h,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Tj(n,e,t){let r=e,i=Fw("where",n);return Sw._create(i,r,t)}var PR=class n extends pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Sj(o,c),o=DA(o,c)}(e._query,t),new ia(e.firestore,e.converter,DA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xR=class n extends gp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(s,o)}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ta(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Cj(n,e="asc"){let t=e,r=Fw("orderBy",n);return xR._create(r,t)}var kR=class n extends gp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ia(e.firestore,e.converter,rw(e._query,this._limit,this._limitType))}};function Dj(n){return ine("limit",n),kR._create("limit",n,"F")}function yB(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RB(e)&&t.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(bt.fromString(t));if(!he.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $U(n,new he(r))}if(t instanceof Zn)return $U(n,t._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lw(t)}.`)}function _B(n,e){if(!Array.isArray(n)||n.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sj(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var NR=class{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return kc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>wt(o.doubleValue));return new fp(s)}convertGeoPoint(e){return new hp(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=VR(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){let t=Fs(e);return new fn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=bt.fromString(e);rt(QB(r));let i=new tw(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||Ls(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function fne(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Cc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Aw=class extends Dw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Fw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ad=class extends Aw{data(e={}){return super.data(e)}},OR=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new Cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ad(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ad(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:pne(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function pne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function Aj(n){n=Us(n,Zn);let e=Us(n.firestore,sa);return tne(XR(e),n._key).then(t=>gne(e,n,t))}var Rw=class extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new lp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}};function Rj(n){n=Us(n,ia);let e=Us(n.firestore,sa),t=XR(e),r=new Rw(e);return hne(n._query),nne(t,n._query).then(i=>new OR(e,r,n,i))}function Mj(n,e,t,...r){n=Us(n,Zn);let i=Us(n.firestore,sa),s=eM(i),o;return o=typeof(e=ht(e))=="string"||e instanceof vd?une(s,"updateDoc",n._key,e,t,r):cne(s,"updateDoc",n._key,e),rM(i,[o.toMutation(n._key,Os.exists(!0))])}function Pj(n){return rM(Us(n.firestore,sa),[new sp(n._key,Os.none())])}function xj(n,e){let t=Us(n.firestore,sa),r=ZR(n),i=fne(n.converter,e);return rM(t,[ane(eM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Os.exists(!1))]).then(()=>r)}function rM(n,e){return function(r,i){let s=new ii;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return qte(yield ene(r),i,s)})),s.promise}(XR(n),e)}function gne(n,e,t){let r=t.docs.get(e._key),i=new Rw(n);return new Aw(n,i,e._key,r,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){wd=i})(Pi),Mi(new Jn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new sa(new oA(r.getProvider("auth-internal")),new lA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tw(d.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_t(UU,"4.7.3",e),_t(UU,"4.7.3","esm2017")})();var Oc=class{constructor(e){return e}},kj="firestore",iM=class{constructor(){return cc(kj)}};var sM=new Q("angularfire2.firestore-instances");function mne(n,e){let t=wl(kj,n,e);return t&&new Oc(t)}function yne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Oc(r)}}var _ne={provide:iM,deps:[[new Zt,sM]]},vne={provide:Oc,useFactory:mne,deps:[[new Zt,sM],Xr]};function Nj(n,...e){return _t("angularfire",gs.full,"fst"),vn([vne,_ne,{provide:sM,useFactory:yne(n),multi:!0,deps:[Pe,Dt,Bo,ms,[new Zt,gc],[new Zt,Uo],...e]}])}var Ip=nt(LU,!0);var Oj=nt(xj,!0);var Lc=nt(yj,!0);var Lj=nt(Pj,!0);var Ep=nt(ZR,!0);var Fj=nt(Aj,!0);var Vj=nt(Rj,!0);var Uj=nt(_j,!0);var oM=nt(Dj,!0);var Vw=nt(Cj,!0);var bp=nt(bj,!0);var aM=nt(Mj,!0);var Ed=nt(Tj,!0);var Gj="firebasestorage.googleapis.com",Wj="storageBucket",Ine=2*60*1e3,Ene=10*60*1e3;var Rt=class n extends kn{constructor(e,t,r=0){super(cM(e),`Firebase Storage: ${t} (${cM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ot=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ot||{});function cM(n){return"storage/"+n}function pM(){let n="An unknown error occurred, please check the error payload for server response.";return new Rt(Ot.UNKNOWN,n)}function bne(n){return new Rt(Ot.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Tne(n){return new Rt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Cne(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt(Ot.UNAUTHENTICATED,n)}function Dne(){return new Rt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Sne(n){return new Rt(Ot.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Ane(){return new Rt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rne(){return new Rt(Ot.CANCELED,"User canceled the upload/download.")}function Mne(n){return new Rt(Ot.INVALID_URL,"Invalid URL '"+n+"'.")}function Pne(n){return new Rt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function xne(){return new Rt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wj+"' property when initializing the app?")}function kne(){return new Rt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nne(){return new Rt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function One(n){return new Rt(Ot.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uM(n){return new Rt(Ot.INVALID_ARGUMENT,n)}function Kj(){return new Rt(Ot.APP_DELETED,"The Firebase app was deleted.")}function Lne(n){return new Rt(Ot.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cp(n,e){return new Rt(Ot.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Tp(n){throw new Rt(Ot.INTERNAL_ERROR,"Internal error: "+n)}var ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Pne(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${h}/b/${i}/o${I}`,"i"),M={bucket:1,path:3},F=t===Gj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",q=new RegExp(`^https?://${F}/${i}/${k}`,"i"),Y=[{regex:a,indices:c,postModify:s},{regex:E,indices:M,postModify:d},{regex:q,indices:{bucket:1,path:2},postModify:d}];for(let oe=0;oe<Y.length;oe++){let je=Y[oe],le=je.regex.exec(e);if(le){let D=le[je.indices.bucket],_=le[je.indices.path];_||(_=""),r=new n(D,_),je.postModify(r);break}}if(r==null)throw Mne(e);return r}},lM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Fne(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function g(k){i=setTimeout(()=>{i=null,n(E,c())},k)}function I(){s&&clearTimeout(s)}function E(k,...q){if(d){I();return}if(k){I(),h.call(null,k,...q);return}if(c()||o){I(),h.call(null,k,...q);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,g(Y)}let M=!1;function F(k){M||(M=!0,I(),!d&&(i!==null?(k||(a=2),clearTimeout(i),g(0)):k||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,F(!0)},t),F}function Vne(n){n(!1)}function Une(n){return n!==void 0}function Bne(n){return typeof n=="object"&&!Array.isArray(n)}function gM(n){return typeof n=="string"||n instanceof String}function Bj(n){return mM()&&n instanceof Blob}function mM(){return typeof Blob<"u"}function jj(n,e,t,r){if(r<e)throw uM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw uM(`Invalid value for '${n}'. Expected ${t} or less.`)}function yM(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Qj(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Td=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Td||{});function jne(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var dM=class{constructor(e,t,r,i,s,o,a,c,d,h,g,I=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,M)=>{this.resolve_=E,this.reject_=M,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new bd(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Td.NO_ERROR,c=s.getStatus();if(!a||jne(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Td.ABORT;r(!1,new bd(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new bd(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Une(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=pM();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Kj():Rne();o(c)}else{let c=Ane();o(c)}};this.canceled_?t(!1,new bd(!1,null,!0)):this.backoffId_=Fne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Vne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function zne(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $ne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qne(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Hne(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Gne(n,e,t,r,i,s,o=!0){let a=Qj(n.urlParams),c=n.url+a,d=Object.assign({},n.headers);return qne(d,e),zne(d,t),$ne(d,s),Hne(d,r),new dM(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function Wne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Kne(...n){let e=Wne();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(mM())return new Blob(n);throw new Rt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Qne(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Yne(n){if(typeof atob>"u")throw One("base-64");return atob(n)}var qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Dp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Jne(n,e){switch(n){case qi.RAW:return new Dp(Yj(e));case qi.BASE64:case qi.BASE64URL:return new Dp(Jj(n,e));case qi.DATA_URL:return new Dp(Xne(e),ere(e))}throw pM()}function Yj(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Zne(n){let e;try{e=decodeURIComponent(n)}catch{throw Cp(qi.DATA_URL,"Malformed data URL.")}return Yj(e)}function Jj(n,e){switch(n){case qi.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Cp(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Cp(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Yne(e)}catch(i){throw i.message.includes("polyfill")?i:Cp(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Bw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Cp(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=tre(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Xne(n){let e=new Bw(n);return e.base64?Jj(qi.BASE64,e.rest):Zne(e.rest)}function ere(n){return new Bw(n).contentType}function tre(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var jw=class n{constructor(e,t){let r=0,i="";Bj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Bj(this.data_)){let r=this.data_,i=Qne(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(mM()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Kne.apply(null,t))}else{let t=e.map(o=>gM(o)?Jne(qi.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function Zj(n){let e;try{e=JSON.parse(n)}catch{return null}return Bne(e)?e:null}function nre(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function rre(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Xj(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function ire(n,e){return e}var pn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ire}},Uw=null;function sre(n){return!gM(n)||n.length<2?n:Xj(n)}function ez(){if(Uw)return Uw;let n=[];n.push(new pn("bucket")),n.push(new pn("generation")),n.push(new pn("metageneration")),n.push(new pn("name","fullPath",!0));function e(s,o){return sre(o)}let t=new pn("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new pn("size");return i.xform=r,n.push(i),n.push(new pn("timeCreated")),n.push(new pn("updated")),n.push(new pn("md5Hash",null,!0)),n.push(new pn("cacheControl",null,!0)),n.push(new pn("contentDisposition",null,!0)),n.push(new pn("contentEncoding",null,!0)),n.push(new pn("contentLanguage",null,!0)),n.push(new pn("contentType",null,!0)),n.push(new pn("metadata","customMetadata",!0)),Uw=n,Uw}function ore(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new ai(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function are(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return ore(r,n),r}function tz(n,e,t){let r=Zj(e);return r===null?null:are(n,r,t)}function cre(n,e,t,r){let i=Zj(e);if(i===null||!gM(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(d=>{let h=n.bucket,g=n.fullPath,I="/b/"+o(h)+"/o/"+o(g),E=yM(I,t,r),M=Qj({alt:"media",token:d});return E+M})[0]}function ure(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var zw=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function nz(n){if(!n)throw pM()}function lre(n,e){function t(r,i){let s=tz(n,i,e);return nz(s!==null),s}return t}function dre(n,e){function t(r,i){let s=tz(n,i,e);return nz(s!==null),cre(s,i,n.host,n._protocol)}return t}function rz(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Dne():i=Cne():t.getStatus()===402?i=Tne(n.bucket):t.getStatus()===403?i=Sne(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function hre(n){let e=rz(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=bne(n.path)),s.serverResponse=i.serverResponse,s}return t}function fre(n,e,t){let r=e.fullServerUrl(),i=yM(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new zw(i,s,dre(n,t),o);return a.errorHandler=hre(e),a}function pre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function gre(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=pre(null,e)),r}function mre(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let Y="";for(let oe=0;oe<2;oe++)Y=Y+Math.random().toString().slice(2);return Y}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let d=gre(e,r,i),h=ure(d,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,I=`\r
--`+c+"--",E=jw.getBlob(g,r,I);if(E===null)throw kne();let M={name:d.fullPath},F=yM(s,n.host,n._protocol),k="POST",q=n.maxUploadRetryTime,te=new zw(F,k,lre(n,t),q);return te.urlParams=M,te.headers=o,te.body=E.uploadData(),te.errorHandler=rz(e),te}var Tbe=256*1024;var zj=null,hM=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Td.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Td.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Td.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Tp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},fM=class extends hM{initXhr(){this.xhr_.responseType="text"}};function iz(){return zj?zj():new fM}var Cd=class n{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xj(this._location.path)}get storage(){return this._service}get parent(){let e=nre(this._location.path);if(e===null)return null;let t=new ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Lne(e)}};function yre(n,e,t){n._throwIfRoot("uploadBytes");let r=mre(n.storage,n._location,ez(),new jw(e,!0),t);return n.storage.makeRequestWithTokens(r,iz).then(i=>({metadata:i,ref:n}))}function _re(n){n._throwIfRoot("getDownloadURL");let e=fre(n.storage,n._location,ez());return n.storage.makeRequestWithTokens(e,iz).then(t=>{if(t===null)throw Nne();return t})}function vre(n,e){let t=rre(n._location.path,e),r=new ai(n._location.bucket,t);return new Cd(n.storage,r)}function wre(n){return/^[A-Za-z]+:\/\//.test(n)}function Ire(n,e){return new Cd(n,e)}function sz(n,e){if(n instanceof Sp){let t=n;if(t._bucket==null)throw xne();let r=new Cd(t,t._bucket);return e!=null?sz(r,e):r}else return e!==void 0?vre(n,e):n}function Ere(n,e){if(e&&wre(e)){if(n instanceof Sp)return Ire(n,e);throw uM("To use ref(service, url), the first argument must be a Storage instance.")}else return sz(n,e)}function $j(n,e){let t=e?.[Wj];return t==null?null:ai.makeFromBucketSpec(t,n)}function bre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:s_(i,n.app.options.projectId))}var Sp=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ine,this._maxUploadRetryTime=Ene,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=$j(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=$j(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new lM(Kj());{let o=Gne(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},qj="@firebase/storage",Hj="0.13.2";var oz="storage";function az(n,e,t){return n=ht(n),yre(n,e,t)}function cz(n){return n=ht(n),_re(n)}function uz(n,e){return n=ht(n),Ere(n,e)}function lz(n=Vo(),e){n=ht(n);let r=ic(n,oz).getImmediate({identifier:e}),i=i_("storage");return i&&dz(r,...i),r}function dz(n,e,t,r={}){bre(n,e,t,r)}function Tre(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Sp(t,r,i,e,Pi)}function Cre(){Mi(new Jn(oz,Tre,"PUBLIC").setMultipleInstances(!0)),_t(qj,Hj,""),_t(qj,Hj,"esm2017")}Cre();var Fc=class{constructor(e){return e}},hz="storage",_M=class{constructor(){return cc(hz)}};var vM=new Q("angularfire2.storage-instances");function Dre(n,e){let t=wl(hz,n,e);return t&&new Fc(t)}function Sre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fc(r)}}var Are={provide:_M,deps:[[new Zt,vM]]},Rre={provide:Fc,useFactory:Dre,deps:[[new Zt,vM],Xr]};function fz(n,...e){return _t("angularfire",gs.full,"gcs"),vn([Rre,Are,{provide:vM,useFactory:Sre(n),multi:!0,deps:[Pe,Dt,Bo,ms,[new Zt,gc],[new Zt,Uo],...e]}])}var pz=nt(cz,!0);var gz=nt(lz,!0);var mz=nt(uz,!0);var yz=nt(az,!0);var Sz=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(ds),re(ur))};static \u0275dir=dt({type:n})}return n})(),bM=(()=>{class n extends Sz{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=dt({type:n,features:[Gr]})}return n})(),Yw=new Q("");var Pre={provide:Yw,useExisting:us(()=>aa),multi:!0};function xre(){let n=Er()?Er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var kre=new Q(""),aa=(()=>{class n extends Sz{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!xre())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(ds),re(ur),re(kre,8))};static \u0275dir=dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ce("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[hs([Pre]),Gr]})}return n})();function Nre(n){return n==null||Ore(n)===0}function Ore(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var TM=new Q(""),Az=new Q("");function Lre(n){return Nre(n.value)?{required:!0}:null}function _z(n){return null}function Rz(n){return n!=null}function Mz(n){return bo(n)?ot(n):n}function Pz(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function xz(n,e){return e.map(t=>t(n))}function Fre(n){return!n.validate}function kz(n){return n.map(e=>Fre(e)?e:t=>e.validate(t))}function Vre(n){if(!n)return null;let e=n.filter(Rz);return e.length==0?null:function(t){return Pz(xz(t,e))}}function CM(n){return n!=null?Vre(kz(n)):null}function Ure(n){if(!n)return null;let e=n.filter(Rz);return e.length==0?null:function(t){let r=xz(t,e).map(Mz);return BI(r).pipe(_e(Pz))}}function DM(n){return n!=null?Ure(kz(n)):null}function vz(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Bre(n){return n._rawValidators}function jre(n){return n._rawAsyncValidators}function wM(n){return n?Array.isArray(n)?n:[n]:[]}function qw(n,e){return Array.isArray(n)?n.includes(e):n===e}function wz(n,e){let t=wM(e);return wM(n).forEach(i=>{qw(t,i)||t.push(i)}),t}function Iz(n,e){return wM(e).filter(t=>!qw(n,t))}var Hw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ad=class extends Hw{name;get formDirective(){return null}get path(){return null}},kp=class extends Hw{_parent=null;name=null;valueAccessor=null},Gw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zre={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cTe=ae(z({},zre),{"[class.ng-submitted]":"isSubmitted"}),ca=(()=>{class n extends Gw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(kp,2))};static \u0275dir=dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Gr]})}return n})(),Rd=(()=>{class n extends Gw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(Ad,10))};static \u0275dir=dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Gr]})}return n})();var Ap="VALID",$w="INVALID",Dd="PENDING",Rp="DISABLED",oa=class{},Ww=class extends oa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pp=class extends oa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},xp=class extends oa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sd=class extends oa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},IM=class extends oa{source;constructor(e){super(),this.source=e}},EM=class extends oa{source;constructor(e){super(),this.source=e}};function Nz(n){return(Jw(n)?n.validators:n)||null}function $re(n){return Array.isArray(n)?CM(n):n||null}function Oz(n,e){return(Jw(e)?e.asyncValidators:n)||null}function qre(n){return Array.isArray(n)?DM(n):n||null}function Jw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Hre(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[t])throw new ne(1001,"")}function Gre(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ne(1002,"")})}var Kw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kr(this.statusReactive)}set status(e){Kr(()=>this.statusReactive.set(e))}_status=Ju(()=>this.statusReactive());statusReactive=Hu(void 0);get valid(){return this.status===Ap}get invalid(){return this.status===$w}get pending(){return this.status==Dd}get disabled(){return this.status===Rp}get enabled(){return this.status!==Rp}errors;get pristine(){return Kr(this.pristineReactive)}set pristine(e){Kr(()=>this.pristineReactive.set(e))}_pristine=Ju(()=>this.pristineReactive());pristineReactive=Hu(!0);get dirty(){return!this.pristine}get touched(){return Kr(this.touchedReactive)}set touched(e){Kr(()=>this.touchedReactive.set(e))}_touched=Ju(()=>this.touchedReactive());touchedReactive=Hu(!1);get untouched(){return!this.touched}_events=new Tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Iz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Iz(e,this._rawAsyncValidators))}hasValidator(e){return qw(this._rawValidators,e)}hasAsyncValidator(e){return qw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xp(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pp(!0,r))}markAsPending(e={}){this.status=Dd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rp,this.errors=null,this._forEachChild(i=>{i.disable(ae(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ww(this.value,r)),this._events.next(new Sd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ap,this._forEachChild(r=>{r.enable(ae(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ap||this.status===Dd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ww(this.value,t)),this._events.next(new Sd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rp:Ap}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Dd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Mz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?Rp:this.errors?$w:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dd)?Dd:this._anyControlsHaveStatus($w)?$w:Ap}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$re(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qre(this._rawAsyncValidators)}},Qw=class extends Kw{constructor(e,t,r){super(Nz(t),Oz(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Gre(this,!0,e),Object.keys(e).forEach(r=>{Hre(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var SM=new Q("",{providedIn:"root",factory:()=>AM}),AM="always";function Wre(n,e){return[...e.path,n]}function Lz(n,e,t=AM){Fz(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Qre(n,e),Jre(n,e),Yre(n,e),Kre(n,e)}function Ez(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Kre(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Fz(n,e){let t=Bre(n);e.validator!==null?n.setValidators(vz(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=jre(n);e.asyncValidator!==null?n.setAsyncValidators(vz(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ez(e._rawValidators,i),Ez(e._rawAsyncValidators,i)}function Qre(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Vz(n,e)})}function Yre(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Vz(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Vz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Jre(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Zre(n,e){n==null,Fz(n,e)}function Xre(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function eie(n){return Object.getPrototypeOf(n.constructor)===bM}function tie(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nie(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===aa?t=s:eie(s)?r=s:i=s}),i||r||t||null}var rie={provide:Ad,useExisting:us(()=>Vc)},Mp=Promise.resolve(),Vc=(()=>{class n extends Ad{callSetDisabledState;get submitted(){return Kr(this.submittedReactive)}_submitted=Ju(()=>this.submittedReactive());submittedReactive=Hu(!1);_directives=new Set;form;ngSubmit=new lt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Qw({},CM(t),DM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Mp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Lz(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Mp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Mp.then(()=>{let r=this._findContainer(t.path),i=new Qw({});Zre(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Mp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Mp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),tie(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new IM(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new EM(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(re(TM,10),re(Az,10),re(SM,8))};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ce("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[hs([rie]),Gr]})}return n})();function bz(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Tz(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var iie=class extends Kw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Nz(t),Oz(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Tz(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Tz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sie={provide:kp,useExisting:us(()=>Bs)},Cz=Promise.resolve(),Bs=(()=>{class n extends kp{_changeDetectorRef;callSetDisabledState;control=new iie;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new lt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nie(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xre(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Cz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&So(r);Cz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Wre(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(Ad,9),re(TM,10),re(Az,10),re(Yw,10),re(Do,8),re(SM,8))};static \u0275dir=dt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[hs([sie]),Gr,cr]})}return n})();var Md=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var oie={provide:Yw,useExisting:us(()=>Pd),multi:!0};function Uz(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function aie(n){return n.split(":")[0]}var Pd=(()=>{class n extends bM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Uz(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=aie(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ce("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hs([oie]),Gr]})}return n})(),Zw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Uz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(ur),re(ds),re(Pd,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),cie={provide:Yw,useExisting:us(()=>Bz),multi:!0};function Dz(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function uie(n){return n.split(":")[0]}var Bz=(()=>{class n extends bM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=uie(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ce("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hs([cie]),Gr]})}return n})(),Xw=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Dz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Dz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(ur),re(ds),re(Bz,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var lie=(()=>{class n{_validator=_z;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_z,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,features:[cr]})}return n})();var die={provide:TM,useExisting:us(()=>Uc),multi:!0};var Uc=(()=>{class n extends lie{required;inputName="required";normalizeInput=So;createValidator=t=>Lre;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Rh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[hs([die]),Gr]})}return n})();var hie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();var ua=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:SM,useValue:t.callSetDisabledState??AM}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({imports:[hie]})}return n})();var fie=["*"],Op=class{_ngZone;_pending=[];_listeners=[];_targetStream=new xt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(jn(t=>{let r=new Me(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let s=t.addListener(e,o=>{this._ngZone.run(()=>i.next(o))});if(!s){i.complete();return}return this._listeners.push(s),()=>s.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Np={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},jz="500px",zz="500px",tI=(()=>{class n{_elementRef=B(ur);_ngZone=B(Pe);_eventManager=new Op(B(Pe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=jz;width=zz;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||Np}_options=Np;mapInitialized=new lt;authFailure=new lt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=B(bi);if(this._isBrowser=cT(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(_n(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":$z(this.height)||jz,t.width=this.width===null?"":$z(this.width)||zz}}_combineOptions(){let t=this._options||{};return ae(z({},t),{center:this._center||t.center||Np.center,zoom:this._zoom??t.zoom??Np.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||Np.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=on({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[cr],ngContentSelectors:fie,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(TO(),Wr(0,"div",0),CO(1))},encapsulation:2,changeDetection:0})}return n})(),pie=/([A-Za-z%]+)$/;function $z(n){return n==null?"":pie.test(n)?n:`${n}px`}var qz=(()=>{class n{_googleMap=B(tI);_elementRef=B(ur);_ngZone=B(Pe);_eventManager=new Op(B(Pe));_options=new xt({});_position=new xt(void 0);_destroy=new Tt;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new lt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(_n(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let s=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==s||!s)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:s,shouldFocus:r}))}_combineOptions(){return xa([this._options,this._position]).pipe(_e(([t,r])=>ae(z({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Tu(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(Tu(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var gie=new Q("MAP_MARKER"),mie={position:{lat:37.421995,lng:-122.084092}},Hz=(()=>{class n{_googleMap=B(tI);_ngZone=B(Pe);_eventManager=new Op(B(Pe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new lt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:s,_label:o,_clickable:a,_icon:c,_visible:d}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&s&&r.setPosition(s),t.label&&o!==void 0&&r.setLabel(o),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&d!==void 0&&r.setVisible(d))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(_n(1)).toPromise()}_combineOptions(){let t=this._options||mie;return ae(z({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[hs([{provide:gie,useExisting:n}]),cr]})}return n})();var Gz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function _ie(n,e){n&1&&(P(0,"p",15),O(1," \u{1F4CD} Deine Position wird angezeigt "),x())}function vie(n,e){n&1&&(P(0,"p",16),O(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),x())}function wie(n,e){if(n&1){let t=Ft();P(0,"div",19)(1,"h4"),O(2),x(),P(3,"p")(4,"strong"),O(5),wr(6,"titlecase"),x()(),P(7,"p"),O(8),x(),P(9,"p"),O(10),x(),P(11,"button",20),Ce("click",function(){ke(t);let i=ve().$implicit,s=ve();return Ne(s.getDirections(i.shop))}),O(12," \u{1F697} Route berechnen "),x()()}if(n&2){let t=ve().$implicit;j(2),Xt(t.shop.name),j(3),Xt(Ir(6,4,t.shop.type)),j(3),pt("\u{1F4CD} ",t.shop.address.split(",")[0],""),j(2),pt("\u2B50 ",t.shop.rating,"/5")}}function Iie(n,e){n&1&&(P(0,"div",19)(1,"h4"),O(2,"\u{1F4CD} Deine Position"),x(),P(3,"p"),O(4,"Du bist hier"),x()())}function Eie(n,e){if(n&1){let t=Ft();P(0,"map-marker",17),Ce("mapClick",function(){let i=ke(t).$implicit,s=ve();return Ne(s.onMarkerClick(i))}),P(1,"map-info-window"),Ve(2,wie,13,6,"div",18)(3,Iie,5,0,"div",18),x()()}if(n&2){let t=e.$implicit,r=ve();Z("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),j(2),Z("ngIf",t.shop),j(),Z("ngIf",t.isUserLocation)}}var nI=class n{afroshops=[];userLocation=null;shopSelected=new lt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=ae(z({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=on({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[cr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"h3"),O(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),x(),Ve(4,_ie,2,0,"p",2)(5,vie,2,0,"p",3),x(),P(6,"google-map",4),Ve(7,Eie,4,5,"map-marker",5),x(),P(8,"div",6)(9,"h4"),O(10,"Legende"),x(),P(11,"div",7)(12,"div",8)(13,"span",9),O(14,"\u{1F37D}\uFE0F"),x(),P(15,"span"),O(16,"Restaurants"),x()(),P(17,"div",8)(18,"span",10),O(19,"\u{1F6D2}"),x(),P(20,"span"),O(21,"Lebensmittel"),x()(),P(22,"div",8)(23,"span",11),O(24,"\u2702\uFE0F"),x(),P(25,"span"),O(26,"Friseure"),x()(),P(27,"div",8)(28,"span",12),O(29,"\u{1F457}"),x(),P(30,"span"),O(31,"Mode"),x()(),P(32,"div",8)(33,"span",13),O(34,"\u{1F3E6}"),x(),P(35,"span"),O(36,"Services"),x()(),P(37,"div",8)(38,"span",14),O(39,"\u{1F4CD}"),x(),P(40,"span"),O(41,"Deine Position"),x()()()()()),t&2&&(j(4),Z("ngIf",r.userLocation),j(),Z("ngIf",!r.userLocation),j(),Z("options",r.mapOptions)("width","100%")("height","400px"),j(),Z("ngForOf",r.markers))},dependencies:[wn,Zu,xn,Ga,Gz,tI,qz,Hz],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var kd=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(s=>i.address.toLowerCase().includes(s.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var la=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=Lc(this.firestore,"afroshops");return ot(Vj(e)).pipe(_e(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(s=>{let o=s.data();o.id=s.id,r.push(o)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(s=>s.name));let i=r.map(s=>this.mapFirebaseDocToAfroshopData(s));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(s=>s.name)),i.sort((s,o)=>s.name.localeCompare(o.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=Lc(this.firestore,"afroshops"),r=bp(t,Ed("city","==",e.toLowerCase()),Vw("name"));return Ip(r,{idField:"id"})}getAfroshopsByType(e){let t=Lc(this.firestore,"afroshops"),r=bp(t,Ed("type","==",e),Vw("rating","desc"));return Ip(r,{idField:"id"})}getAfroshopById(e){return b(this,null,function*(){try{let t=Ep(this.firestore,"afroshops",e),r=yield Fj(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(ae(z({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return b(this,null,function*(){let t=Lc(this.firestore,"afroshops"),r=ae(z({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield Oj(t,r)).id})}updateAfroshop(e,t){return b(this,null,function*(){let r=Ep(this.firestore,"afroshops",e),i=ae(z({},t),{updatedAt:new Date});yield aM(r,i)})}deleteAfroshop(e){return b(this,null,function*(){let t=Ep(this.firestore,"afroshops",e);yield Lj(t)})}searchAfroshops(e){let t=Lc(this.firestore,"afroshops"),r=bp(t,Ed("name",">=",e),Ed("name","<=",e+"\uF8FF"),oM(20));return Ip(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=Lc(this.firestore,"afroshops"),r=bp(t,Ed("verified","==",!0),Vw("rating","desc"),oM(e));return Ip(r,{idField:"id"})}incrementViews(e){return b(this,null,function*(){try{let t=Ep(this.firestore,"afroshops",e);yield aM(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return b(this,null,function*(){try{let r=`afroshops/${Date.now()}_${e.name}`,i=mz(this.storage,r),s=yield yz(i,e);return yield pz(s.ref)}catch(t){throw console.error("Fehler beim Hochladen des Bildes:",t),new Error("Fehler beim Hochladen des Bildes")}})}static \u0275fac=function(t){return new(t||n)(ce(Oc),ce(Fc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rn=class n{constructor(e){this.auth=e;this.user$=SV(this.auth)}user$;register(e,t,r){return b(this,null,function*(){try{let i=yield AV(this.auth,e,t);return r&&i.user&&(yield kV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return b(this,null,function*(){try{let r=yield MV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return b(this,null,function*(){try{let e=new MC;e.setCustomParameters({prompt:"select_account"});let t=yield PV(this.auth,e);return{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("Erreur lors de la connexion Google:",e),this.handleAuthError(e)}})}logout(){return b(this,null,function*(){try{yield xV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Une erreur est survenue";if(e.code)switch(e.code){case"auth/email-already-in-use":t="Cette adresse email est d\xE9j\xE0 utilis\xE9e";break;case"auth/weak-password":t="Le mot de passe doit contenir au moins 6 caract\xE8res";break;case"auth/invalid-email":t="Adresse email invalide";break;case"auth/user-not-found":t="Aucun compte associ\xE9 \xE0 cette adresse email";break;case"auth/wrong-password":t="Mot de passe incorrect";break;case"auth/too-many-requests":t="Trop de tentatives. Veuillez r\xE9essayer plus tard";break;case"auth/user-disabled":t="Ce compte a \xE9t\xE9 d\xE9sactiv\xE9";break;case"auth/operation-not-allowed":t="Cette op\xE9ration n'est pas autoris\xE9e";break;case"auth/popup-closed-by-user":t="Connexion annul\xE9e par l'utilisateur";break;case"auth/popup-blocked":t="Popup bloqu\xE9e par le navigateur. Veuillez autoriser les popups";break;case"auth/cancelled-popup-request":t="Demande de connexion annul\xE9e";break;default:t=e.message||"Erreur d'authentification"}return new Error(t)}static \u0275fac=function(t){return new(t||n)(ce(pc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var rI=class n{constructor(){}getCurrentPosition(){return new Me(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new Me(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let s={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(s)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let o=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tie(n,e){if(n&1){let t=Ft();P(0,"div",42)(1,"button",43),Ce("click",function(){ke(t);let i=ve();return Ne(i.goToAddAfroshop())}),O(2," \u2795 Afroshop hinzuf\xFCgen "),x()()}}function Cie(n,e){if(n&1){let t=Ft();P(0,"div",42)(1,"button",44),Ce("click",function(){ke(t);let i=ve();return Ne(i.addNewAfroshop())}),O(2," \u{1F510} Anmelden zum Hinzuf\xFCgen "),x()()}}function Die(n,e){if(n&1&&(P(0,"span",50),O(1),x()),n&2){let t=ve(2);j(),pt("um ",t.getSelectedCityName(),"")}}function Sie(n,e){n&1&&(P(0,"span",51),O(1,"um deinen Standort"),x())}function Aie(n,e){if(n&1&&(P(0,"div",45)(1,"div",46),O(2," \u{1F3AF} Suche in 50km Umkreis "),Ve(3,Die,2,1,"span",47)(4,Sie,2,0,"span",48),x(),P(5,"div",49),O(6),x()()),n&2){let t=ve();j(3),Z("ngIf",t.selectedCity),j(),Z("ngIf",!t.selectedCity),j(2),Co(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function Rie(n,e){if(n&1){let t=Ft();P(0,"div",52)(1,"app-map",53),Ce("shopSelected",function(i){ke(t);let s=ve();return Ne(s.viewAfroshopDetail(i))}),x()()}if(n&2){let t=ve();j(),Z("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function Mie(n,e){if(n&1){let t=Ft();P(0,"button",71),Ce("click",function(i){ke(t);let s=ve().$implicit,o=ve(2);return Ne(o.editAfroshop(i,s.id))}),O(1," \u270F\uFE0F "),x()}}function Pie(n,e){if(n&1&&(P(0,"div",72),O(1),x()),n&2){let t=ve().$implicit,r=ve(2);j(),pt(" \u{1F4CD} ",r.getDistanceFromUser(t)," ")}}function xie(n,e){if(n&1){let t=Ft();P(0,"div",56)(1,"div",57),Ce("click",function(){let i=ke(t).$implicit,s=ve(2);return Ne(s.viewAfroshopDetail(i.id))}),P(2,"img",58),Ce("error",function(i){let s=ke(t).$implicit,o=ve(2);return Ne(o.onImageError(i,s.type))}),x(),P(3,"div",59),O(4),x(),Ve(5,Mie,2,0,"button",60),P(6,"div",61)(7,"h3"),O(8),x(),P(9,"p"),O(10),wr(11,"titlecase"),x(),P(12,"div",62),O(13),x(),Ve(14,Pie,2,1,"div",63),P(15,"span",64),O(16,"\u{1F4CD} Details ansehen"),x()()(),P(17,"div",65)(18,"h3",66),O(19),x(),P(20,"p",67),O(21),x(),P(22,"div",68)(23,"span",62),O(24),x(),P(25,"span",69),O(26),x(),P(27,"span",70),O(28),wr(29,"titlecase"),x()()()()}if(n&2){let t=e.$implicit,r=ve(2);j(2),Z("src",t.image||r.getDefaultImage(t.type),Eo)("alt",t.name),j(),py(t.type),j(),pt(" ",r.getTypeIcon(t.type)," "),j(),Z("ngIf",r.canEditAfroshop(t)),j(3),Xt(t.name),j(2),Co("",Ir(11,17,t.type)," \u2022 ",r.getLocationDisplay(t.address),""),j(3),Co(" \u2B50 ",t.rating," \u2022 ",r.getPriceLevel(t.priceLevel)," "),j(),Z("ngIf",r.userLocation),j(5),Xt(t.name),j(2),pt("\u{1F4CD} ",r.getLocationDisplay(t.address),""),j(3),pt("\u2B50 ",t.rating,""),j(2),Xt(r.getPriceLevel(t.priceLevel)),j(2),Xt(Ir(29,19,t.type))}}function kie(n,e){if(n&1&&(P(0,"div",54),Ve(1,xie,30,21,"div",55),x()),n&2){let t=ve();j(),Z("ngForOf",t.filteredAfroshops)}}function Nie(n,e){if(n&1){let t=Ft();P(0,"div",73)(1,"div",74)(2,"div",75),O(3,"\u{1F50D}"),x(),P(4,"h3"),O(5,"Kein Gesch\xE4ft gefunden"),x(),P(6,"p"),O(7,"Kein Afroshop entspricht deinen Suchkriterien"),x(),P(8,"button",76),Ce("click",function(){ke(t);let i=ve();return Ne(i.clearSearch())}),O(9," Alle Gesch\xE4fte anzeigen "),x()()()}}var iI=class n{constructor(e,t,r,i,s){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.router=i;this.geolocationService=s;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";showMap=!1;userLocation=null;user$;cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=e,this.filteredAfroshops=e,console.log(`\u{1F525} TOTAL AFROSHOPS: ${e.length}`),console.log("\u{1F525} NOMS:",e.map(r=>r.name));let t=e.find(r=>r.name.toLowerCase().includes("fouta"));t?console.log("\u2705 FOUTA TROUV\xC9:",t):console.log("\u274C FOUTA PAS TROUV\xC9")},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.filteredAfroshops.length>0?this.filteredAfroshops:this.allAfroshops;if(this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.filterAfroshopsByRadius(50),this.sortAfroshopsByDistance())}else this.filteredAfroshops=this.allAfroshops,this.applyFilters(),this.useCurrentLocation()}useCurrentLocation(){this.geolocationService.getCurrentPosition().subscribe({next:e=>{e?(this.userLocation={lat:e.lat,lng:e.lng},this.selectedCity="",this.filterAfroshopsByRadius(50),this.sortAfroshopsByDistance(),console.log("Position d\xE9tect\xE9e:",this.userLocation)):this.fallbackToDefaultLocation()},error:e=>{console.error("Erreur de g\xE9olocalisation:",e),this.fallbackToDefaultLocation()}})}fallbackToDefaultLocation(){this.userLocation=this.cityCoordinates.berlin,this.selectedCity="berlin",alert("Position non d\xE9tect\xE9e. Berlin s\xE9lectionn\xE9 par d\xE9faut.")}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}filterAfroshopsByRadius(e){if(!this.userLocation){console.log("Aucune position de r\xE9f\xE9rence d\xE9finie");return}let t=this.allAfroshops.filter(r=>r.coordinates.lat===0&&r.coordinates.lng===0?(console.log(`Afroshop avec coordonn\xE9es invalides inclus: ${r.name}`),!0):this.calculateDistance(this.userLocation.lat,this.userLocation.lng,r.coordinates.lat,r.coordinates.lng)<=e);this.filteredAfroshops=t,this.applyFilters(),console.log(`${t.length} Afroshops trouv\xE9s dans un rayon de ${e}km`)}calculateDistance(e,t,r,i){let o=this.toRad(r-e),a=this.toRad(i-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRad(e))*Math.cos(this.toRad(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}toRad(e){return e*(Math.PI/180)}applyAllFilters(){if(this.filteredAfroshops=this.allAfroshops,this.searchTerm){let e=this.afroshopService.searchAfroshops(this.searchTerm);this.filteredAfroshops=this.filteredAfroshops.filter(t=>e.some(r=>r.id===t.id))}this.selectedType&&(this.filteredAfroshops=this.filteredAfroshops.filter(e=>e.type===this.selectedType))}goToAddAfroshop(){this.addNewAfroshop()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}testFirebase(){console.log("\u{1F525}\u{1F525}\u{1F525} TEST FIREBASE DIRECT \u{1F525}\u{1F525}\u{1F525}"),this.firebaseService.getAllAfroshops().subscribe({next:e=>{console.log("\u2705 Firebase fonctionne! Nombre:",e.length),console.log("\u2705 Noms re\xE7us:",e.map(t=>t.name)),alert(`Firebase OK: ${e.length} Afroshops trouv\xE9s
Noms: ${e.map(t=>t.name).join(", ")}`)},error:e=>{console.error("\u274C Erreur Firebase:",e),alert("\u274C Erreur Firebase: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(re(kd),re(la),re(Rn),re(yt),re(rI))};static \u0275cmp=on({type:n,selectors:[["app-gallery"]],decls:83,vars:13,consts:[[1,"gallery-container"],[1,"gallery-header"],[1,"header-content"],[1,"header-text"],["class","header-actions",4,"ngIf"],[1,"filter-container"],["for","type-filter"],["id","type-filter",1,"type-filter",3,"ngModelChange","change","ngModel"],["value",""],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],[1,"location-container"],["for","city-selector"],[1,"location-controls"],["id","city-selector",1,"city-selector",3,"ngModelChange","change","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["value","bremen"],["value","dresden"],["value","hannover"],["value","n\xFCrnberg"],["value","mainz"],["value","karlsruhe"],["value","mannheim"],["value","werl"],["value","lippstadt"],["title","Meinen Standort verwenden",1,"location-btn",3,"click"],["class","radius-info",4,"ngIf"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"header-actions"],["title","Neuen Afroshop hinzuf\xFCgen",1,"add-afroshop-btn","primary",3,"click"],["title","Anmelden um einen Afroshop hinzuzuf\xFCgen",1,"add-afroshop-btn","disabled",3,"click"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"rating"],["class","distance",4,"ngIf"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"price"],[1,"type"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),O(5,"\u{1F30D} Afroshops & Restaurants in deiner N\xE4he"),x(),P(6,"p"),O(7),x()(),Ve(8,Tie,3,0,"div",4),wr(9,"async"),Ve(10,Cie,3,0,"div",4),wr(11,"async"),x(),P(12,"div",5)(13,"label",6),O(14,"Nach Typ filtern:"),x(),P(15,"select",7),mt("ngModelChange",function(s){return It(r.selectedType,s)||(r.selectedType=s),s}),Ce("change",function(){return r.onTypeFilterChange()}),P(16,"option",8),O(17,"Alle Typen"),x(),P(18,"option",9),O(19,"\u{1F37D}\uFE0F Restaurants"),x(),P(20,"option",10),O(21,"\u{1F6D2} Lebensmittelgesch\xE4fte"),x(),P(22,"option",11),O(23,"\u2702\uFE0F Friseure"),x(),P(24,"option",12),O(25,"\u{1F457} Mode"),x(),P(26,"option",13),O(27,"\u{1F3E6} Dienstleistungen"),x()()(),P(28,"div",14)(29,"label",15),O(30,"\u{1F4CD} Deine Stadt:"),x(),P(31,"div",16)(32,"select",17),mt("ngModelChange",function(s){return It(r.selectedCity,s)||(r.selectedCity=s),s}),Ce("change",function(){return r.onCityChange()}),P(33,"option",8),O(34,"Automatische Erkennung"),x(),P(35,"option",18),O(36,"Berlin"),x(),P(37,"option",19),O(38,"Hamburg"),x(),P(39,"option",20),O(40,"M\xFCnchen"),x(),P(41,"option",21),O(42,"K\xF6ln"),x(),P(43,"option",22),O(44,"Frankfurt am Main"),x(),P(45,"option",23),O(46,"Stuttgart"),x(),P(47,"option",24),O(48,"D\xFCsseldorf"),x(),P(49,"option",25),O(50,"Dortmund"),x(),P(51,"option",26),O(52,"Essen"),x(),P(53,"option",27),O(54,"Leipzig"),x(),P(55,"option",28),O(56,"Bremen"),x(),P(57,"option",29),O(58,"Dresden"),x(),P(59,"option",30),O(60,"Hannover"),x(),P(61,"option",31),O(62,"N\xFCrnberg"),x(),P(63,"option",32),O(64,"Mainz"),x(),P(65,"option",33),O(66,"Karlsruhe"),x(),P(67,"option",34),O(68,"Mannheim"),x(),P(69,"option",31),O(70,"N\xFCrnberg"),x(),P(71,"option",32),O(72,"Mainz"),x(),P(73,"option",35),O(74,"Werl"),x(),P(75,"option",36),O(76,"Lippstadt"),x()(),P(77,"button",37),Ce("click",function(){return r.useCurrentLocation()}),O(78," \u{1F4E1} Mein Standort "),x()(),Ve(79,Aie,7,4,"div",38),x()(),Ve(80,Rie,2,2,"div",39)(81,kie,2,1,"div",40)(82,Nie,10,0,"div",41),x()),t&2&&(j(7),pt("Entdecke ",r.filteredAfroshops.length," afrikanische Gesch\xE4fte in Deutschland"),j(),Z("ngIf",Ir(9,9,r.user$)),j(2),Z("ngIf",!Ir(11,11,r.user$)),j(5),gt("ngModel",r.selectedType),j(17),gt("ngModel",r.selectedCity),j(47),Z("ngIf",r.userLocation&&(r.selectedCity||r.filteredAfroshops.length<r.allAfroshops.length)),j(),Z("ngIf",r.showMap&&r.filteredAfroshops.length>0),j(),Z("ngIf",!r.showMap&&r.filteredAfroshops.length>0),j(),Z("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[wn,Zu,xn,xh,Ga,ua,Zw,Xw,Pd,ca,Bs,nI],styles:[".gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.location-controls[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:center;align-items:center}.city-selector[_ngcontent-%COMP%]{flex:1;max-width:300px;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.city-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.location-controls[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.city-selector[_ngcontent-%COMP%]{max-width:none}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,#000c);color:#fff;padding:var(--spacing-lg) var(--spacing-md) var(--spacing-md);transform:translateY(100%);transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:translateY(0)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:var(--spacing-xs);font-weight:600}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);opacity:.9}.click-hint[_ngcontent-%COMP%]{display:inline-block;background:var(--primary-color);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.9rem;font-weight:500}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-md)}.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}"]})};function Oie(n,e){if(n&1){let t=Ft();P(0,"button",21),Ce("click",function(){ke(t);let i=ve(2);return Ne(i.editAfroshop())}),O(1," \u270F\uFE0F Bearbeiten "),x()}}function Lie(n,e){if(n&1&&(P(0,"div",22),O(1),x()),n&2){let t=ve(2);j(),pt(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function Fie(n,e){if(n&1){let t=Ft();P(0,"div",2)(1,"div",3)(2,"button",4),Ce("click",function(){ke(t);let i=ve();return Ne(i.goBack())}),O(3," \u2190 Zur\xFCck zur \xDCbersicht "),x(),Ve(4,Oie,2,0,"button",5),x(),P(5,"div",6)(6,"div",7),Wr(7,"img",8),P(8,"div",9),O(9),wr(10,"titlecase"),x()(),P(11,"div",10)(12,"h1"),O(13),x(),P(14,"div",11)(15,"div",12),O(16),x(),Ve(17,Lie,2,1,"div",13),x(),P(18,"div",14)(19,"div",15)(20,"strong"),O(21,"\u{1F4CD} Adresse:"),x(),P(22,"p"),O(23),x()(),P(24,"div",15)(25,"strong"),O(26,"\u{1F4DE} Telefon:"),x(),P(27,"p")(28,"a",16),O(29),x()()(),P(30,"div",15)(31,"strong"),O(32,"\u{1F552} \xD6ffnungszeiten:"),x(),P(33,"p"),O(34),x()()(),P(35,"div",17)(36,"h3"),O(37,"\xDCber uns"),x(),P(38,"p"),O(39),x()(),P(40,"div",18)(41,"button",19),Ce("click",function(){ke(t);let i=ve();return Ne(i.callPhone(i.afroshop.phone))}),O(42," \u{1F4DE} Anrufen "),x(),P(43,"button",20),Ce("click",function(){ke(t);let i=ve();return Ne(i.goBack())}),O(44," \u2190 Zur\xFCck "),x()()()()()}if(n&2){let t=ve();j(4),Z("ngIf",t.canEdit()),j(3),Z("src",t.afroshop.image,Eo)("alt",t.afroshop.name),j(),py(t.afroshop.type),j(),Co(" ",t.getTypeIcon(t.afroshop.type)," ",Ir(10,17,t.afroshop.type)," "),j(4),Xt(t.afroshop.name),j(3),Co(" \u2B50 ",t.afroshop.rating,"/5 \u2022 ",t.getPriceLevel(t.afroshop.priceLevel)," "),j(),Z("ngIf",t.afroshop.cuisine),j(6),Xt(t.afroshop.address),j(5),Zb("href","tel:",t.afroshop.phone,"",Eo),j(),pt(" ",t.afroshop.phone," "),j(5),Xt(t.afroshop.hours),j(5),Xt(t.afroshop.description)}}function Vie(n,e){if(n&1){let t=Ft();P(0,"div",23)(1,"h2"),O(2,"\u274C Gesch\xE4ft nicht gefunden"),x(),P(3,"p"),O(4,"Das gesuchte Gesch\xE4ft existiert nicht."),x(),P(5,"button",4),Ce("click",function(){ke(t);let i=ve();return Ne(i.goBack())}),O(6," \u2190 Zur\xFCck zur \xDCbersicht "),x()()}}var sI=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=s}afroshop;shopId="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(re(In),re(yt),re(kd),re(la),re(Rn))};static \u0275cmp=on({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[1,"detail-image",3,"src","alt"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"cuisine-info"],[1,"error-container"]],template:function(t,r){t&1&&Ve(0,Fie,45,19,"div",0)(1,Vie,7,0,"div",1),t&2&&(Z("ngIf",r.afroshop),j(),Z("ngIf",!r.afroshop))},dependencies:[wn,xn,Ga],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}"]})};function Uie(n,e){n&1&&(P(0,"span"),O(1,"\u{1F4E5} Importieren"),x())}function Bie(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 L\xE4dt..."),x())}function jie(n,e){if(n&1&&(P(0,"div",50),O(1),x()),n&2){let t=ve();j(),pt(" \u2705 ",t.successMessage," ")}}function zie(n,e){if(n&1&&(P(0,"div",51),O(1),x()),n&2){let t=ve();j(),pt(" \u274C ",t.errorMessage," ")}}function $ie(n,e){n&1&&(P(0,"span"),O(1,"\u{1F4C1} Bild ausw\xE4hlen"),x())}function qie(n,e){n&1&&(P(0,"span"),O(1,"\u{1F504} Anderes Bild w\xE4hlen"),x())}function Hie(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 Wird komprimiert..."),x())}function Gie(n,e){if(n&1){let t=Ft();P(0,"div",52),Wr(1,"img",53),P(2,"button",54),Ce("click",function(){ke(t);let i=ve(),s=Xb(48);return i.imagePreview=null,i.selectedFile=null,Ne(s.value="")}),O(3," \u2715 "),x()()}if(n&2){let t=ve();j(),Z("src",t.imagePreview,Eo)}}function Wie(n,e){if(n&1){let t=Ft();P(0,"div",5)(1,"label",55),O(2,"K\xFCche"),x(),P(3,"input",56),mt("ngModelChange",function(i){ke(t);let s=ve();return It(s.afroshop.cuisine,i)||(s.afroshop.cuisine=i),Ne(i)}),x()()}if(n&2){let t=ve();j(3),gt("ngModel",t.afroshop.cuisine)}}function Kie(n,e){if(n&1&&(P(0,"span"),O(1),x()),n&2){let t=ve();j(),Xt(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function Qie(n,e){n&1&&(P(0,"span"),O(1,"\u{1F4E4} Bild wird hochgeladen..."),x())}function Yie(n,e){if(n&1&&(P(0,"span"),O(1),x()),n&2){let t=ve();j(),Xt(t.isEditMode?"\u2705 Speichern":"\u2705 Afroshop hinzuf\xFCgen")}}var Lp=class n{constructor(e,t,r,i){this.firebaseService=e;this.authService=t;this.router=r;this.route=i}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;successMessage="";errorMessage="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return b(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return b(this,null,function*(){let t=e.target.files[0];if(t){if(!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}let r=yield this.compressImage(t);this.selectedFile=r;let i=new FileReader;i.onload=s=>{this.imagePreview=s.target.result},i.readAsDataURL(r)}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target.result,o.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=1200,h=1200,g=o.width,I=o.height;g>I?g>d&&(I*=d/g,g=d):I>h&&(g*=h/I,I=h),a.width=g,a.height=I,c?.drawImage(o,0,0,g,I),a.toBlob(E=>{if(E){let M=new File([E],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(M.size/1024).toFixed(0)}KB`),t(M)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},o.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return b(this,null,function*(){if(!this.selectedFile)return this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload en cours... Taille: ${(this.selectedFile.size/1024).toFixed(0)}KB`);try{let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload r\xE9ussi!",e),e}catch(e){throw console.error("\u274C Fehler beim Hochladen des Bildes:",e),e}finally{this.isUploadingImage=!1}})}onSubmit(){return b(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage());let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=ae(z({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=ae(z({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Name ist erforderlich",!1)}setCoordinatesFromAddress(){if(this.afroshop.coordinates.lat===0&&this.afroshop.coordinates.lng===0){let e={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}},t=this.afroshop.address.toLowerCase();for(let[r,i]of Object.entries(e))if(t.includes(r)){this.afroshop.coordinates=i,console.log(`Coordonn\xE9es d\xE9finies automatiquement pour ${r}:`,i);break}}}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return b(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return b(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return b(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|münchen|köln|frankfurt|dortmund|essen|düsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return b(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(s=>s&&s!=="www.facebook.com"&&s!=="facebook.com"&&s!=="p"&&!s.match(/^\d+$/)&&s.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return b(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(re(la),re(Rn),re(yt),re(In))};static \u0275cmp=on({type:n,selectors:[["app-add-afroshop"]],decls:104,vars:28,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["for","hours"],["type","text","id","hours","name","hours","placeholder","z.B. Mo-So: 12:00-22:00",1,"form-input",3,"ngModelChange","ngModel"],["for","website"],["type","url","id","website","name","website","placeholder","https://example.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],["type","url","id","image","name","image","placeholder","https://beispiel.com/bild.jpg",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[1,"message","success"],[1,"message","error"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische",1,"form-input",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=Ft();P(0,"div",1)(1,"div",2)(2,"h2"),O(3),x(),P(4,"p"),O(5),x()(),P(6,"form",3),Ce("ngSubmit",function(){return ke(i),Ne(r.onSubmit())}),P(7,"div",4)(8,"h3"),O(9,"\u{1F517} Schnell hinzuf\xFCgen"),x(),P(10,"p"),O(11,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),x(),P(12,"div",5)(13,"label",6),O(14,"Google Maps, Facebook, Nextdoor oder Website URL"),x(),P(15,"div",7)(16,"input",8),mt("ngModelChange",function(o){return ke(i),It(r.importUrl,o)||(r.importUrl=o),Ne(o)}),x(),P(17,"button",9),Ce("click",function(){return ke(i),Ne(r.importFromUrl())}),Ve(18,Uie,2,0,"span",10)(19,Bie,2,0,"span",10),x()()(),P(20,"div",11)(21,"span"),O(22,"oder manuell eingeben"),x()()(),Ve(23,jie,2,1,"div",12)(24,zie,2,1,"div",13),P(25,"div",5)(26,"label",14),O(27,"Name des Gesch\xE4fts *"),x(),P(28,"input",15),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.name,o)||(r.afroshop.name=o),Ne(o)}),x()(),P(29,"div",5)(30,"label",16),O(31,"Typ *"),x(),P(32,"select",17),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.type,o)||(r.afroshop.type=o),Ne(o)}),P(33,"option",18),O(34,"\u{1F37D}\uFE0F Restaurant"),x(),P(35,"option",19),O(36,"\u{1F6D2} Lebensmittelgesch\xE4ft"),x(),P(37,"option",20),O(38,"\u2702\uFE0F Friseur"),x(),P(39,"option",21),O(40,"\u{1F457} Mode"),x(),P(41,"option",22),O(42,"\u{1F3E6} Dienstleistungen"),x()()(),P(43,"div",5)(44,"label",23),O(45,"\u{1F4F8} Bild hochladen"),x(),P(46,"div",24)(47,"input",25,0),Ce("change",function(o){return ke(i),Ne(r.onFileSelected(o))}),x(),P(49,"button",26),Ce("click",function(){ke(i);let o=Xb(48);return Ne(o.click())}),Ve(50,$ie,2,0,"span",10)(51,qie,2,0,"span",10)(52,Hie,2,0,"span",10),x(),Ve(53,Gie,4,1,"div",27),P(54,"small",28),O(55,"Max. 5MB - Wird automatisch komprimiert und optimiert"),x()()(),P(56,"div",5)(57,"label",29),O(58,"Adresse *"),x(),P(59,"input",30),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.address,o)||(r.afroshop.address=o),Ne(o)}),x(),P(60,"small"),O(61,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),x()(),P(62,"div",5)(63,"label",31),O(64,"Telefon *"),x(),P(65,"input",32),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.phone,o)||(r.afroshop.phone=o),Ne(o)}),x()(),P(66,"div",5)(67,"label",33),O(68,"Beschreibung *"),x(),P(69,"textarea",34),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.description,o)||(r.afroshop.description=o),Ne(o)}),x()(),Ve(70,Wie,4,1,"div",35),P(71,"div",5)(72,"label",36),O(73,"\xD6ffnungszeiten"),x(),P(74,"input",37),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.hours,o)||(r.afroshop.hours=o),Ne(o)}),x()(),P(75,"div",5)(76,"label",38),O(77,"Website"),x(),P(78,"input",39),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.website,o)||(r.afroshop.website=o),Ne(o)}),x()(),P(79,"div",5)(80,"label",40),O(81,"Preisstufe"),x(),P(82,"select",41),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.priceLevel,o)||(r.afroshop.priceLevel=o),Ne(o)}),P(83,"option",42),O(84,"\u20AC - G\xFCnstig"),x(),P(85,"option",43),O(86,"\u20AC\u20AC - Moderat"),x(),P(87,"option",44),O(88,"\u20AC\u20AC\u20AC - Gehoben"),x(),P(89,"option",45),O(90,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig"),x()()(),P(91,"div",5)(92,"label",23),O(93,"Bild URL"),x(),P(94,"input",46),mt("ngModelChange",function(o){return ke(i),It(r.afroshop.image,o)||(r.afroshop.image=o),Ne(o)}),x(),P(95,"small"),O(96,"Optional: Link zu einem Bild des Gesch\xE4fts"),x()(),P(97,"div",47)(98,"button",48),Ce("click",function(){return ke(i),Ne(r.goBack())}),O(99," Abbrechen "),x(),P(100,"button",49),Ve(101,Kie,2,1,"span",10)(102,Qie,2,0,"span",10)(103,Yie,2,1,"span",10),x()()()()}t&2&&(j(3),Xt(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),j(2),Xt(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),j(11),gt("ngModel",r.importUrl),j(),Z("disabled",!r.importUrl||r.isImporting),j(),Z("ngIf",!r.isImporting),j(),Z("ngIf",r.isImporting),j(4),Z("ngIf",r.successMessage),j(),Z("ngIf",r.errorMessage),j(4),gt("ngModel",r.afroshop.name),j(4),gt("ngModel",r.afroshop.type),j(17),Z("disabled",r.isUploadingImage),j(),Z("ngIf",!r.imagePreview&&!r.isUploadingImage),j(),Z("ngIf",r.imagePreview&&!r.isUploadingImage),j(),Z("ngIf",r.isUploadingImage),j(),Z("ngIf",r.imagePreview),j(6),gt("ngModel",r.afroshop.address),j(6),gt("ngModel",r.afroshop.phone),j(4),gt("ngModel",r.afroshop.description),j(),Z("ngIf",r.afroshop.type==="restaurant"),j(4),gt("ngModel",r.afroshop.hours),j(4),gt("ngModel",r.afroshop.website),j(4),gt("ngModel",r.afroshop.priceLevel),j(12),gt("ngModel",r.afroshop.image),j(4),Z("disabled",r.isSubmitting||r.isUploadingImage),j(2),Z("disabled",r.isSubmitting||r.isUploadingImage),j(),Z("ngIf",r.isSubmitting&&!r.isUploadingImage),j(),Z("ngIf",r.isUploadingImage),j(),Z("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[wn,xn,ua,Md,Zw,Xw,aa,Pd,ca,Rd,Uc,Bs,Vc],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:center;margin-top:var(--spacing-xl)}.btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 12px #ff7b004d}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--gray-400);cursor:not-allowed;transform:none;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--gray-200);color:var(--text-primary)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-300)}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}']})};function Jie(n,e){if(n&1&&(P(0,"div",16),O(1),x()),n&2){let t=ve();j(),pt(" ",t.errorMessage," ")}}function Zie(n,e){n&1&&(P(0,"span"),O(1,"Se connecter"),x())}function Xie(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 Connexion..."),x())}function ese(n,e){n&1&&(P(0,"span"),O(1,"\u{1F50D} Continuer avec Google"),x())}function tse(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 Connexion Google..."),x())}var oI=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return b(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Veuillez remplir tous les champs";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle();let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(re(Rn),re(yt),re(In))};static \u0275cmp=on({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","votre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),O(4,"\u{1F510} Connexion"),x(),P(5,"p"),O(6,"Connectez-vous \xE0 votre compte AfroConnect"),x()(),P(7,"form",3),Ce("ngSubmit",function(){return r.onSubmit()}),P(8,"div",4)(9,"label",5),O(10,"Adresse email"),x(),P(11,"input",6),mt("ngModelChange",function(s){return It(r.email,s)||(r.email=s),s}),x()(),P(12,"div",4)(13,"label",7),O(14,"Mot de passe"),x(),P(15,"input",8),mt("ngModelChange",function(s){return It(r.password,s)||(r.password=s),s}),x()(),Ve(16,Jie,2,1,"div",9),P(17,"button",10),Ve(18,Zie,2,0,"span",11)(19,Xie,2,0,"span",11),x()(),P(20,"div",12)(21,"span"),O(22,"ou"),x()(),P(23,"button",13),Ce("click",function(){return r.loginWithGoogle()}),Ve(24,ese,2,0,"span",11)(25,tse,2,0,"span",11),x(),P(26,"div",14)(27,"p"),O(28,"Pas encore de compte ? "),P(29,"a",15),O(30,"S'inscrire"),x()()()()()),t&2&&(j(11),gt("ngModel",r.email),Z("disabled",r.isLoading),j(4),gt("ngModel",r.password),Z("disabled",r.isLoading),j(),Z("ngIf",r.errorMessage),j(),Z("disabled",r.isLoading||!r.email||!r.password),j(),Z("ngIf",!r.isLoading),j(),Z("ngIf",r.isLoading),j(4),Z("disabled",r.isLoading),j(),Z("ngIf",!r.isLoading),j(),Z("ngIf",r.isLoading))},dependencies:[wn,xn,ua,Md,aa,ca,Rd,Uc,Bs,Vc,ec,Oo],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function nse(n,e){if(n&1&&(P(0,"div",20),O(1),x()),n&2){let t=ve();j(),pt(" ",t.errorMessage," ")}}function rse(n,e){n&1&&(P(0,"span"),O(1,"S'inscrire"),x())}function ise(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 Inscription..."),x())}function sse(n,e){n&1&&(P(0,"span"),O(1,"\u{1F50D} Continuer avec Google"),x())}function ose(n,e){n&1&&(P(0,"span"),O(1,"\u23F3 Connexion Google..."),x())}var aI=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return b(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Veuillez remplir tous les champs";return}if(this.password!==this.confirmPassword){this.errorMessage="Les mots de passe ne correspondent pas";return}if(this.password.length<6){this.errorMessage="Le mot de passe doit contenir au moins 6 caract\xE8res";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(re(Rn),re(yt))};static \u0275cmp=on({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Votre nom","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","votre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),O(4,"\u{1F4DD} Inscription"),x(),P(5,"p"),O(6,"Cr\xE9ez votre compte AfroConnect"),x()(),P(7,"form",3),Ce("ngSubmit",function(){return r.onSubmit()}),P(8,"div",4)(9,"label",5),O(10,"Nom d'affichage"),x(),P(11,"input",6),mt("ngModelChange",function(s){return It(r.displayName,s)||(r.displayName=s),s}),x()(),P(12,"div",4)(13,"label",7),O(14,"Adresse email"),x(),P(15,"input",8),mt("ngModelChange",function(s){return It(r.email,s)||(r.email=s),s}),x()(),P(16,"div",4)(17,"label",9),O(18,"Mot de passe"),x(),P(19,"input",10),mt("ngModelChange",function(s){return It(r.password,s)||(r.password=s),s}),x()(),P(20,"div",4)(21,"label",11),O(22,"Confirmer le mot de passe"),x(),P(23,"input",12),mt("ngModelChange",function(s){return It(r.confirmPassword,s)||(r.confirmPassword=s),s}),x()(),Ve(24,nse,2,1,"div",13),P(25,"button",14),Ve(26,rse,2,0,"span",15)(27,ise,2,0,"span",15),x()(),P(28,"div",16)(29,"span"),O(30,"ou"),x()(),P(31,"button",17),Ce("click",function(){return r.loginWithGoogle()}),Ve(32,sse,2,0,"span",15)(33,ose,2,0,"span",15),x(),P(34,"div",18)(35,"p"),O(36,"D\xE9j\xE0 un compte ? "),P(37,"a",19),O(38,"Se connecter"),x()()()()()),t&2&&(j(11),gt("ngModel",r.displayName),Z("disabled",r.isLoading),j(4),gt("ngModel",r.email),Z("disabled",r.isLoading),j(4),gt("ngModel",r.password),Z("disabled",r.isLoading),j(4),gt("ngModel",r.confirmPassword),Z("disabled",r.isLoading),j(),Z("ngIf",r.errorMessage),j(),Z("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),j(),Z("ngIf",!r.isLoading),j(),Z("ngIf",r.isLoading),j(4),Z("disabled",r.isLoading),j(),Z("ngIf",!r.isLoading),j(),Z("ngIf",r.isLoading))},dependencies:[wn,xn,ua,Md,aa,ca,Rd,Uc,Bs,Vc,ec,Oo],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var Fp=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(_n(1),_e(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(ce(Rn),ce(yt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kz=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:iI},{path:"afroshop/:id",component:sI},{path:"add-afroshop",component:Lp,canActivate:[Fp]},{path:"edit-afroshop/:id",component:Lp,canActivate:[Fp]},{path:"login",component:oI},{path:"register",component:aI},{path:"**",redirectTo:"/gallery"}];var Qz={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"}};var Yz={providers:[xO({eventCoalescing:!0}),KT(Kz),o1(s1()),zL(()=>$L(Qz.firebase)),Nj(()=>Uj()),DV(()=>RV()),fz(()=>gz())]};function ase(n,e){if(n&1){let t=Ft();P(0,"div",10)(1,"span",11),O(2),x(),P(3,"button",12),Ce("click",function(){ke(t);let i=ve();return Ne(i.logout())}),O(4," \u{1F6AA} Abmelden "),x()()}if(n&2){let t=e.ngIf;j(2),pt("Hallo, ",t.displayName||t.email,"!")}}function cse(n,e){n&1&&(P(0,"div",13)(1,"a",14),O(2,"\u{1F510} Anmelden"),x(),P(3,"a",15),O(4,"\u{1F4DD} Registrieren"),x()())}var cI=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return b(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(re(Rn),re(yt))};static \u0275cmp=on({type:n,selectors:[["app-root"]],decls:18,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1"),O(5,"\u{1F30D} AfroConnect"),x(),P(6,"p",4),O(7,"Finde die besten Afroshops in deiner N\xE4he"),x()(),P(8,"div",5),Ve(9,ase,5,1,"div",6),wr(10,"async"),Ve(11,cse,5,0,"div",7),wr(12,"async"),x()()(),P(13,"main",8),Wr(14,"router-outlet"),x(),P(15,"footer",9)(16,"p"),O(17,"\xA9 2024 AfroConnect - Verbinde dich mit deiner Community"),x()()()),t&2&&(j(9),Z("ngIf",Ir(10,2,r.user$)),j(2),Z("ngIf",!Ir(12,4,r.user$)))},dependencies:[wn,xn,xh,ef,ec,Oo],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}.app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};yT(cI,Yz).catch(n=>console.error(n));
