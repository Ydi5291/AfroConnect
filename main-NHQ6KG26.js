var j5=Object.defineProperty,z5=Object.defineProperties;var $5=Object.getOwnPropertyDescriptors;var $g=Object.getOwnPropertySymbols,H5=Object.getPrototypeOf,SR=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable,q5=Reflect.get;var TR=(n,e,t)=>e in n?j5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})SR.call(e,t)&&TR(n,t,e[t]);if($g)for(var t of $g(e))AR.call(e,t)&&TR(n,t,e[t]);return n},fe=(n,e)=>z5(n,$5(e));var xh=(n,e)=>{var t={};for(var r in n)SR.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&$g)for(var r of $g(n))e.indexOf(r)<0&&AR.call(n,r)&&(t[r]=n[r]);return t};var Ai=(n,e,t)=>q5(H5(n),t,e);var S=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(u){i(u)}},o=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function tE(n,e){return Object.is(n,e)}var rn=null,Hg=!1,nE=1,Sr=Symbol("SIGNAL");function qe(n){let e=rn;return rn=n,e}function rE(){return rn}var Oh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nh(n){if(Hg)throw new Error("");if(rn===null)return;rn.consumerOnSignalRead(n);let e=rn.nextProducerIndex++;if(Kg(rn),e<rn.producerNode.length&&rn.producerNode[e]!==n&&kh(rn)){let t=rn.producerNode[e];Wg(t,rn.producerIndexOfThis[e])}rn.producerNode[e]!==n&&(rn.producerNode[e]=n,rn.producerIndexOfThis[e]=kh(rn)?MR(n,rn,e):0),rn.producerLastReadVersion[e]=n.version}function DR(){nE++}function iE(n){if(!(kh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===nE)){if(!n.producerMustRecompute(n)&&!cE(n)){eE(n);return}n.producerRecomputeValue(n),eE(n)}}function sE(n){if(n.liveConsumerNode===void 0)return;let e=Hg;Hg=!0;try{for(let t of n.liveConsumerNode)t.dirty||G5(t)}finally{Hg=e}}function oE(){return rn?.consumerAllowSignalWrites!==!1}function G5(n){n.dirty=!0,sE(n),n.consumerMarkedDirty?.(n)}function eE(n){n.dirty=!1,n.lastCleanEpoch=nE}function Gg(n){return n&&(n.nextProducerIndex=0),qe(n)}function aE(n,e){if(qe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(kh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Wg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function cE(n){Kg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(iE(t),r!==t.version))return!0}return!1}function lE(n){if(Kg(n),kh(n))for(let e=0;e<n.producerNode.length;e++)Wg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function MR(n,e,t){if(RR(n),n.liveConsumerNode.length===0&&PR(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=MR(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Wg(n,e){if(RR(n),n.liveConsumerNode.length===1&&PR(n))for(let r=0;r<n.producerNode.length;r++)Wg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kg(i),i.producerIndexOfThis[r]=e}}function kh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function RR(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function PR(n){return n.producerNode!==void 0}function uE(n,e){let t=Object.create(W5);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(iE(t),Nh(t),t.value===qg)throw t.error;return t.value};return r[Sr]=t,r}var Zw=Symbol("UNSET"),Xw=Symbol("COMPUTING"),qg=Symbol("ERRORED"),W5=fe($({},Oh),{value:Zw,dirty:!0,error:null,equal:tE,kind:"computed",producerMustRecompute(n){return n.value===Zw||n.value===Xw},producerRecomputeValue(n){if(n.value===Xw)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Xw;let t=Gg(n),r,i=!1;try{r=n.computation(),qe(null),i=e!==Zw&&e!==qg&&r!==qg&&n.equal(e,r)}catch(s){r=qg,n.error=s}finally{aE(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function K5(){throw new Error}var xR=K5;function kR(n){xR(n)}function dE(n){xR=n}var Q5=null;function hE(n,e){let t=Object.create(Qg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Nh(t),t.value);return r[Sr]=t,r}function Lh(n,e){oE()||kR(n),n.equal(n.value,e)||(n.value=e,Y5(n))}function fE(n,e){oE()||kR(n),Lh(n,e(n.value))}var Qg=fe($({},Oh),{equal:tE,value:void 0,kind:"signal"});function Y5(n){n.version++,DR(),sE(n),Q5?.()}function pE(n){let e=qe(null);try{return n()}finally{qe(e)}}var gE;function Fh(){return gE}function Es(n){let e=gE;return gE=n,e}var Yg=Symbol("NotFound");function Pe(n){return typeof n=="function"}function jl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Jg=jl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Za(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Pe(r))try{r()}catch(s){e=s instanceof Jg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{OR(s)}catch(o){e=e??[],o instanceof Jg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Jg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)OR(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Za(t,e)}remove(e){let{_finalizers:t}=this;t&&Za(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var mE=Mt.EMPTY;function Zg(n){return n instanceof Mt||n&&"closed"in n&&Pe(n.remove)&&Pe(n.add)&&Pe(n.unsubscribe)}function OR(n){Pe(n)?n():n.unsubscribe()}var Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zl={setTimeout(n,e,...t){let{delegate:r}=zl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xg(n){zl.setTimeout(()=>{let{onUnhandledError:e}=Kr;if(e)e(n);else throw n})}function Vh(){}var NR=yE("C",void 0,void 0);function LR(n){return yE("E",void 0,n)}function FR(n){return yE("N",n,void 0)}function yE(n,e,t){return{kind:n,value:e,error:t}}var Xa=null;function $l(n){if(Kr.useDeprecatedSynchronousErrorHandling){let e=!Xa;if(e&&(Xa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xa;if(Xa=null,t)throw r}}else n()}function VR(n){Kr.useDeprecatedSynchronousErrorHandling&&Xa&&(Xa.errorThrown=!0,Xa.error=n)}var ec=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zg(e)&&e.add(this)):this.destination=n6}static create(e,t,r){return new Hl(e,t,r)}next(e){this.isStopped?vE(FR(e),this):this._next(e)}error(e){this.isStopped?vE(LR(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vE(NR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},e6=Function.prototype.bind;function _E(n,e){return e6.call(n,e)}var wE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){em(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){em(r)}else em(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){em(t)}}},Hl=class extends ec{constructor(e,t,r){super();let i;if(Pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Kr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_E(e.next,s),error:e.error&&_E(e.error,s),complete:e.complete&&_E(e.complete,s)}):i=e}this.destination=new wE(i)}};function em(n){Kr.useDeprecatedSynchronousErrorHandling?VR(n):Xg(n)}function t6(n){throw n}function vE(n,e){let{onStoppedNotification:t}=Kr;t&&zl.setTimeout(()=>t(n,e))}var n6={closed:!0,next:Vh,error:t6,complete:Vh};var ql=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lr(n){return n}function tm(...n){return EE(n)}function EE(n){return n.length===0?lr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=i6(t)?t:new Hl(t,r,i);return $l(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=UR(r),new r((i,s)=>{let o=new Hl({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ql](){return this}pipe(...t){return EE(t)(this)}toPromise(t){return t=UR(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function UR(n){var e;return(e=n??Kr.Promise)!==null&&e!==void 0?e:Promise}function r6(n){return n&&Pe(n.next)&&Pe(n.error)&&Pe(n.complete)}function i6(n){return n&&n instanceof ec||r6(n)&&Zg(n)}function IE(n){return Pe(n?.lift)}function Qe(n){return e=>{if(IE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ge(n,e,t,r,i){return new bE(n,e,t,r,i)}var bE=class extends ec{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gl(){return Qe((n,e)=>{let t=null;n._refCount++;let r=Ge(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Wl=class extends be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,IE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(Ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return Gl()(this)}};var BR=jl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pt=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new nm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new BR}next(t){$l(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$l(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$l(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?mE:(this.currentObservers=null,s.push(t),new Mt(()=>{this.currentObservers=null,Za(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new be;return t.source=this,t}}return n.create=(e,t)=>new nm(e,t),n})(),nm=class extends Pt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:mE}};var Lt=class extends Pt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var CE={now(){return(CE.delegate||Date).now()},delegate:void 0};var rm=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Uh={setInterval(n,e,...t){let{delegate:r}=Uh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Uh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Kl=class extends rm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Uh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Uh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Za(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ql=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ql.now=CE.now;var Yl=class extends Ql{constructor(e,t=Ql.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var TE=new Yl(Kl);var im=class extends Kl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var sm=class extends Yl{};var SE=new sm(im);var qn=new be(n=>n.complete());function jR(n){return n&&Pe(n.schedule)}function zR(n){return n[n.length-1]}function om(n){return Pe(zR(n))?n.pop():void 0}function No(n){return jR(zR(n))?n.pop():void 0}function am(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function HR(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(g){o(g)}}function c(h){try{u(r.throw(h))}catch(g){o(g)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function $R(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tc(n){return this instanceof tc?(this.v=n,this):new tc(n)}function qR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(T){return function(k){return Promise.resolve(k).then(T,g)}}function a(T,k){r[T]&&(i[T]=function(L){return new Promise(function(O,q){s.push([T,L,O,q])>1||c(T,L)})},k&&(i[T]=k(i[T])))}function c(T,k){try{u(r[T](k))}catch(L){I(s[0][3],L)}}function u(T){T.value instanceof tc?Promise.resolve(T.value.v).then(h,g):I(s[0][2],T)}function h(T){c("next",T)}function g(T){c("throw",T)}function I(T,k){T(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function GR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $R=="function"?$R(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var cm=n=>n&&typeof n.length=="number"&&typeof n!="function";function lm(n){return Pe(n?.then)}function um(n){return Pe(n[ql])}function dm(n){return Symbol.asyncIterator&&Pe(n?.[Symbol.asyncIterator])}function hm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fm=s6();function pm(n){return Pe(n?.[fm])}function gm(n){return qR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield tc(t.read());if(i)return yield tc(void 0);yield yield tc(r)}}finally{t.releaseLock()}})}function mm(n){return Pe(n?.getReader)}function Bt(n){if(n instanceof be)return n;if(n!=null){if(um(n))return o6(n);if(cm(n))return a6(n);if(lm(n))return c6(n);if(dm(n))return WR(n);if(pm(n))return l6(n);if(mm(n))return u6(n)}throw hm(n)}function o6(n){return new be(e=>{let t=n[ql]();if(Pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a6(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function c6(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xg)})}function l6(n){return new be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function WR(n){return new be(e=>{d6(n,e).catch(t=>e.error(t))})}function u6(n){return WR(gm(n))}function d6(n,e){var t,r,i,s;return HR(this,void 0,void 0,function*(){try{for(t=GR(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Gn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Lo(n,e=0){return Qe((t,r)=>{t.subscribe(Ge(r,i=>Gn(r,n,()=>r.next(i),e),()=>Gn(r,n,()=>r.complete(),e),i=>Gn(r,n,()=>r.error(i),e)))})}function Fo(n,e=0){return Qe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function KR(n,e){return Bt(n).pipe(Fo(e),Lo(e))}function QR(n,e){return Bt(n).pipe(Fo(e),Lo(e))}function YR(n,e){return new be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function JR(n,e){return new be(t=>{let r;return Gn(t,e,()=>{r=n[fm](),Gn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Pe(r?.return)&&r.return()})}function ym(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{Gn(t,e,()=>{let r=n[Symbol.asyncIterator]();Gn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZR(n,e){return ym(gm(n),e)}function XR(n,e){if(n!=null){if(um(n))return KR(n,e);if(cm(n))return YR(n,e);if(lm(n))return QR(n,e);if(dm(n))return ym(n,e);if(pm(n))return JR(n,e);if(mm(n))return ZR(n,e)}throw hm(n)}function at(n,e){return e?XR(n,e):Bt(n)}function pe(...n){let e=No(n);return at(n,e)}function Jl(n,e){let t=Pe(n)?n:()=>n,r=i=>i.error(t());return new be(e?i=>e.schedule(r,0,i):r)}function AE(n){return!!n&&(n instanceof be||Pe(n.lift)&&Pe(n.subscribe))}var Is=jl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return Qe((t,r)=>{let i=0;t.subscribe(Ge(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:h6}=Array;function f6(n,e){return h6(e)?n(...e):n(e)}function _m(n){return me(e=>f6(n,e))}var{isArray:p6}=Array,{getPrototypeOf:g6,prototype:m6,keys:y6}=Object;function vm(n){if(n.length===1){let e=n[0];if(p6(e))return{args:e,keys:null};if(_6(e)){let t=y6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _6(n){return n&&typeof n=="object"&&g6(n)===m6}function wm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function nc(...n){let e=No(n),t=om(n),{args:r,keys:i}=vm(n);if(r.length===0)return at([],e);let s=new be(v6(r,e,i?o=>wm(i,o):lr));return t?s.pipe(_m(t)):s}function v6(n,e,t=lr){return r=>{eP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)eP(e,()=>{let u=at(n[c],e),h=!1;u.subscribe(Ge(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function eP(n,e,t){n?Gn(t,n,e):e()}function tP(n,e,t,r,i,s,o,a){let c=[],u=0,h=0,g=!1,I=()=>{g&&!c.length&&!u&&e.complete()},T=L=>u<r?k(L):c.push(L),k=L=>{s&&e.next(L),u++;let O=!1;Bt(t(L,h++)).subscribe(Ge(e,q=>{i?.(q),s?T(q):e.next(q)},()=>{O=!0},void 0,()=>{if(O)try{for(u--;c.length&&u<r;){let q=c.shift();o?Gn(e,o,()=>k(q)):k(q)}I()}catch(q){e.error(q)}}))};return n.subscribe(Ge(e,T,()=>{g=!0,I()})),()=>{a?.()}}function Ft(n,e,t=1/0){return Pe(e)?Ft((r,i)=>me((s,o)=>e(r,s,i,o))(Bt(n(r,i))),t):(typeof e=="number"&&(t=e),Qe((r,i)=>tP(r,i,n,t)))}function Zl(n=1/0){return Ft(lr,n)}function nP(){return Zl(1)}function Xl(...n){return nP()(at(n,No(n)))}function Em(n){return new be(e=>{Bt(n()).subscribe(e)})}function DE(...n){let e=om(n),{args:t,keys:r}=vm(n),i=new be(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let h=0;h<o;h++){let g=!1;Bt(t[h]).subscribe(Ge(s,I=>{g||(g=!0,u--),a[h]=I},()=>c--,void 0,()=>{(!c||!g)&&(u||s.next(r?wm(r,a):a),s.complete())}))}});return e?i.pipe(_m(e)):i}function Rn(n,e){return Qe((t,r)=>{let i=0;t.subscribe(Ge(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ur(n){return Qe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ge(t,void 0,void 0,o=>{s=Bt(n(o,ur(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function rP(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Ge(o,h=>{let g=u++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Di(n,e){return Pe(e)?Ft(n,e,1):Ft(n,1)}function Vo(n){return Qe((e,t)=>{let r=!1;e.subscribe(Ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pn(n){return n<=0?()=>qn:Qe((e,t)=>{let r=0;e.subscribe(Ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Im(n=w6){return Qe((e,t)=>{let r=!1;e.subscribe(Ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function w6(){return new Is}function rc(n){return Qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function bs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Rn((i,s)=>n(i,s,r)):lr,Pn(1),t?Vo(e):Im(()=>new Is))}function eu(n){return n<=0?()=>qn:Qe((e,t)=>{let r=[];e.subscribe(Ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ME(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Rn((i,s)=>n(i,s,r)):lr,eu(1),t?Vo(e):Im(()=>new Is))}function bm(n,e){return Qe(rP(n,e,arguments.length>=2,!0))}function Cm(...n){let e=No(n);return Qe((t,r)=>{(e?Xl(n,t,e):Xl(n,t)).subscribe(r)})}function xn(n,e){return Qe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ge(r,c=>{i?.unsubscribe();let u=0,h=s++;Bt(n(c,h)).subscribe(i=Ge(r,g=>r.next(e?e(c,g,h,u++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function tu(n){return Qe((e,t)=>{Bt(n).subscribe(Ge(t,()=>t.complete(),Vh)),!t.closed&&e.subscribe(t)})}function sn(n,e,t){let r=Pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Qe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ge(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):lr}var OE={JSACTION:"jsaction"},NE={JSACTION:"__jsaction",OWNER:"__owner"},aP={};function E6(n){return n[NE.JSACTION]}function iP(n,e){n[NE.JSACTION]=e}function I6(n){return aP[n]}function b6(n,e){aP[n]=e}var ve={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},C6=[ve.MOUSEENTER,ve.MOUSELEAVE,"pointerenter","pointerleave"],$pe=[ve.CLICK,ve.DBLCLICK,ve.FOCUSIN,ve.FOCUSOUT,ve.KEYDOWN,ve.KEYUP,ve.KEYPRESS,ve.MOUSEOVER,ve.MOUSEOUT,ve.SUBMIT,ve.TOUCHSTART,ve.TOUCHEND,ve.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],T6=[ve.FOCUS,ve.BLUR,ve.ERROR,ve.LOAD,ve.TOGGLE],LE=n=>T6.indexOf(n)>=0;function S6(n){return n===ve.MOUSEENTER?ve.MOUSEOVER:n===ve.MOUSELEAVE?ve.MOUSEOUT:n===ve.POINTERENTER?ve.POINTEROVER:n===ve.POINTERLEAVE?ve.POINTEROUT:n}function A6(n,e,t,r){let i=!1;LE(e)&&(i=!0);let s=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,s),{eventType:e,handler:t,capture:i,passive:r}}function D6(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function M6(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var sP=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function R6(n){return n.which===2||n.which==null&&n.button===4}function P6(n){return sP&&n.metaKey||!sP&&n.ctrlKey||R6(n)||n.shiftKey}function x6(n,e,t){let r=n.relatedTarget;return(n.type===ve.MOUSEOVER&&e===ve.MOUSEENTER||n.type===ve.MOUSEOUT&&e===ve.MOUSELEAVE||n.type===ve.POINTEROVER&&e===ve.POINTERENTER||n.type===ve.POINTEROUT&&e===ve.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function k6(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,s=n[i];typeof s!="function"&&(t[i]=s)}return n.type===ve.MOUSEOVER?t.type=ve.MOUSEENTER:n.type===ve.MOUSEOUT?t.type=ve.MOUSELEAVE:n.type===ve.POINTEROVER?t.type=ve.POINTERENTER:t.type=ve.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var O6=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Dm=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){O6&&(this.element.style.cursor="pointer"),this.handlerInfos.push(A6(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)D6(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},N6={EVENT_ACTION_SEPARATOR:":"};function Uo(n){return n.eventType}function FE(n,e){n.eventType=e}function Sm(n){return n.event}function cP(n,e){n.event=e}function lP(n){return n.targetElement}function uP(n,e){n.targetElement=e}function dP(n){return n.eic}function L6(n,e){n.eic=e}function F6(n){return n.timeStamp}function V6(n,e){n.timeStamp=e}function Am(n){return n.eia}function hP(n,e,t){n.eia=[e,t]}function RE(n){n.eia=void 0}function Tm(n){return n[1]}function U6(n){return n.eirp}function fP(n,e){n.eirp=e}function pP(n){return n.eir}function gP(n,e){n.eir=e}function mP(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function B6(n,e,t,r,i,s,o,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:s,eirp:o,eiack:a}}var PE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Uo(this.eventInfo)}setEventType(e){FE(this.eventInfo,e)}getEvent(){return Sm(this.eventInfo)}setEvent(e){cP(this.eventInfo,e)}getTargetElement(){return lP(this.eventInfo)}setTargetElement(e){uP(this.eventInfo,e)}getContainer(){return dP(this.eventInfo)}setContainer(e){L6(this.eventInfo,e)}getTimestamp(){return F6(this.eventInfo)}setTimestamp(e){V6(this.eventInfo,e)}getAction(){let e=Am(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){RE(this.eventInfo);return}hP(this.eventInfo,e.name,e.element)}getIsReplay(){return U6(this.eventInfo)}setIsReplay(e){fP(this.eventInfo,e)}getResolved(){return pP(this.eventInfo)}setResolved(e){gP(this.eventInfo,e)}clone(){return new n(mP(this.eventInfo))}},j6={},z6=/\s*;\s*/,$6=ve.CLICK,xE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Uo(e)===ve.CLICK&&P6(Sm(e))?FE(e,ve.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){pP(e)||(this.populateAction(e,lP(e)),gP(e,!0))}resolveParentAction(e){let t=Am(e),r=t&&Tm(t);RE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==dP(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Am(e));)r=this.getParentNode(r);let i=Am(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Uo(e)===ve.MOUSEENTER||Uo(e)===ve.MOUSELEAVE||Uo(e)===ve.POINTERENTER||Uo(e)===ve.POINTERLEAVE)))if(x6(Sm(e),Uo(e),Tm(i))){let s=k6(Sm(e),Tm(i));cP(e,s),uP(e,Tm(i))}else RE(e)}getParentNode(e){let t=e[NE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Uo(t)];i!==void 0&&hP(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=E6(e);if(!t){let r=e.getAttribute(OE.JSACTION);if(!r)t=j6,iP(e,t);else{if(t=I6(r),!t){t={};let i=r.split(z6);for(let s=0;s<i.length;s++){let o=i[s];if(!o)continue;let a=o.indexOf(N6.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?o.substr(0,a).trim():$6,h=c?o.substr(a+1).trim():o;t[u]=h}b6(r,t)}iP(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},yP=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(yP||{}),kE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new PE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&H6(r.element,t)&&M6(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function H6(n,e){return n.tagName==="A"&&(e.getEventType()===ve.CLICK||e.getEventType()===ve.CLICKMOD)}var _P=Symbol.for("propagationStopped"),VE={REPLAY:101};var q6="`preventDefault` called during event replay.";var G6="`composedPath` called during event replay.",Mm=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new xE({clickModSupport:t}),this.dispatcher=new kE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&Q6(e),W6(e);e.getAction();){if(Y6(e),LE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),K6(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function W6(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[_P]=!0,t()};ic(e,"stopPropagation",r),ic(e,"stopImmediatePropagation",r)}function K6(n){return!!n.getEvent()[_P]}function Q6(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);ic(e,"target",t),ic(e,"eventPhase",VE.REPLAY),ic(e,"preventDefault",()=>{throw r(),new Error(q6+"")}),ic(e,"composedPath",()=>{throw new Error(G6+"")})}function Y6(n){let e=n.getEvent(),t=n.getAction()?.element;t&&ic(e,"currentTarget",t,{configurable:!0})}function ic(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function vP(n,e){n.ecrd(t=>{e.dispatch(t)},yP.I_AM_THE_JSACTION_FRAMEWORK)}function J6(n){return n?.q??[]}function Z6(n){n&&(oP(n.c,n.et,n.h),oP(n.c,n.etc,n.h,!0))}function oP(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var X6=!1,wP=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=X6;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let s=B6(t,r,r.target,i,Date.now());this.handleEventInfo(s)}handleEventInfo(t){if(!this.dispatcher){fP(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&C6.indexOf(t)>=0)return;let s=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[t]=s;let o=S6(r||t);if(o!==t){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(t),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>c=>{s(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),Z6(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],s=this.getEventTypesForBrowserEventType(i.eventType);for(let o=0;o<s.length;o++){let a=mP(i);FE(a,s[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function EP(n,e=window){return J6(e._ejsas?.[n])}function UE(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var vx="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,t){super(vy(e,t)),this.code=e}};function ez(n){return`NG0${Math.abs(n)}`}function vy(n,e){return`${ez(n)}${e?": "+e:""}`}var wx=Symbol("InputSignalNode#UNSET"),tz=fe($({},Qg),{transformFn:void 0,applyValueToInputSignal(n,e){Lh(n,e)}});function Ex(n,e){let t=Object.create(tz);t.value=n,t.transformFn=e?.transform;function r(){if(Nh(t),t.value===wx){let i=null;throw new ie(-950,i)}return t.value}return r[Sr]=t,r}function Yh(n){return{toString:n}.toString()}var Rm="__parameters__";function nz(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Ix(n,e,t){return Yh(()=>{let r=nz(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,h){let g=c.hasOwnProperty(Rm)?c[Rm]:Object.defineProperty(c,Rm,{value:[]})[Rm];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var zm=globalThis;function mt(n){for(let e in n)if(n[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function rz(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Qn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function rI(n,e){return n?e?`${n} ${e}`:n:e||""}var iz=mt({__forward_ref__:mt});function Ni(n){return n.__forward_ref__=Ni,n.toString=function(){return Qn(this())},n}function Un(n){return bx(n)?n():n}function bx(n){return typeof n=="function"&&n.hasOwnProperty(iz)&&n.__forward_ref__===Ni}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function wy(n){return IP(n,Tx)||IP(n,Sx)}function Cx(n){return wy(n)!==null}function IP(n,e){return n.hasOwnProperty(e)?n[e]:null}function sz(n){let e=n&&(n[Tx]||n[Sx]);return e||null}function bP(n){return n&&(n.hasOwnProperty(CP)||n.hasOwnProperty(oz))?n[CP]:null}var Tx=mt({\u0275prov:mt}),CP=mt({\u0275inj:mt}),Sx=mt({ngInjectableDef:mt}),oz=mt({ngInjectorDef:mt}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ax(n){return n&&!!n.\u0275providers}var az=mt({\u0275cmp:mt}),cz=mt({\u0275dir:mt}),lz=mt({\u0275pipe:mt}),uz=mt({\u0275mod:mt}),$m=mt({\u0275fac:mt}),$h=mt({__NG_ELEMENT_ID__:mt}),TP=mt({__NG_ENV_ID__:mt});function du(n){return typeof n=="string"?n:n==null?"":String(n)}function dz(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():du(n)}function Dx(n,e){throw new ie(-200,n)}function WI(n,e){throw new ie(-201,!1)}var Fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Fe||{}),iI;function Mx(){return iI}function Wn(n){let e=iI;return iI=n,e}function Rx(n,e,t){let r=wy(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Fe.Optional)return null;if(e!==void 0)return e;WI(n,"Injector")}var hz={},sc=hz,sI="__NG_DI_FLAG__",Hm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Yg:sc,r)}},qm="ngTempTokenPath",fz="ngTokenPath",pz=/\n/gm,gz="\u0275",SP="__source";function mz(n,e=Fe.Default){if(Fh()===void 0)throw new ie(-203,!1);if(Fh()===null)return Rx(n,void 0,e);{let t=Fh(),r;return t instanceof Hm?r=t.injector:r=t,r.get(n,e&Fe.Optional?null:void 0,e)}}function ue(n,e=Fe.Default){return(Mx()||mz)(Un(n),e)}function j(n,e=Fe.Default){return ue(n,Ey(e))}function Ey(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function oI(n){let e=[];for(let t=0;t<n.length;t++){let r=Un(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=Fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=yz(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ue(i,s))}else e.push(ue(r))}return e}function Px(n,e){return n[sI]=e,n.prototype[sI]=e,n}function yz(n){return n[sI]}function _z(n,e,t,r){let i=n[qm];throw e[SP]&&i.unshift(e[SP]),n.message=vz(`
`+n.message,i,t,r),n[fz]=i,n[qm]=null,n}function vz(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==gz?n.slice(2):n;let i=Qn(e);if(Array.isArray(e))i=e.map(Qn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Qn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(pz,`
  `)}`}var cn=Px(Ix("Optional"),8);var wz=Px(Ix("SkipSelf"),4);function ac(n,e){let t=n.hasOwnProperty($m);return t?n[$m]:null}function KI(n,e){n.forEach(t=>Array.isArray(t)?KI(t,e):e(t))}function xx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ez(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Iz(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function QI(n,e,t){let r=Jh(n,e);return r>=0?n[r|1]=t:(r=~r,Iz(n,r,e,t)),r}function BE(n,e){let t=Jh(n,e);if(t>=0)return n[t|1]}function Jh(n,e){return bz(n,e,1)}function bz(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var cc={},Kn=[],jo=new J(""),kx=new J("",-1),Ox=new J(""),Wm=class{get(e,t=sc){if(t===sc){let r=new Error(`NullInjectorError: No provider for ${Qn(e)}!`);throw r.name="NullInjectorError",r}return t}};function Nx(n,e){let t=n[uz]||null;if(!t&&e===!0)throw new Error(`Type ${Qn(n)} does not have '\u0275mod' property.`);return t}function zo(n){return n[az]||null}function Lx(n){return n[cz]||null}function Fx(n){return n[lz]||null}function En(n){return{\u0275providers:n}}function Cz(...n){return{\u0275providers:YI(!0,n),\u0275fromNgModule:!0}}function YI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return KI(e,o=>{let a=o;aI(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Vx(i,s),t}function Vx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];JI(i,s=>{e(s,r)})}}function aI(n,e,t,r){if(n=Un(n),!n)return!1;let i=null,s=bP(n),o=!s&&zo(n);if(!s&&!o){let c=n.ngModule;if(s=bP(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)aI(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{KI(s.imports,h=>{aI(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&Vx(u,e)}if(!a){let u=ac(i)||(()=>new i);e({provide:i,useFactory:u,deps:Kn},i),e({provide:Ox,useValue:i,multi:!0},i),e({provide:jo,useValue:()=>ue(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;JI(c,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function JI(n,e){for(let t of n)Ax(t)&&(t=t.\u0275providers),Array.isArray(t)?JI(t,e):e(t)}var Tz=mt({provide:String,useValue:mt});function Ux(n){return n!==null&&typeof n=="object"&&Tz in n}function Sz(n){return!!(n&&n.useExisting)}function Az(n){return!!(n&&n.useFactory)}function hu(n){return typeof n=="function"}function Dz(n){return!!n.useClass}var Iy=new J(""),Nm={},AP={},jE;function ZI(){return jE===void 0&&(jE=new Wm),jE}var an=class{},Hh=class extends an{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,lI(e,o=>this.processProvider(o)),this.records.set(kx,nu(void 0,this)),i.has("environment")&&this.records.set(an,nu(void 0,this));let s=this.records.get(Iy);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ox,Kn,Fe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Yg:sc,r)}destroy(){jh(this),this._destroyed=!0;let e=qe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),qe(e)}}onDestroy(e){return jh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){jh(this);let t=Es(this),r=Wn(void 0),i;try{return e()}finally{Es(t),Wn(r)}}get(e,t=sc,r=Fe.Default){if(jh(this),e.hasOwnProperty(TP))return e[TP](this);r=Ey(r);let i,s=Es(this),o=Wn(void 0);try{if(!(r&Fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=kz(e)&&wy(e);u&&this.injectableDefInScope(u)?c=nu(cI(e),Nm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Fe.Self?ZI():this.parent;return t=r&Fe.Optional&&t===sc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[qm]=a[qm]||[]).unshift(Qn(e)),s)throw a;return _z(a,e,"R3InjectorError",this.source)}else throw a}finally{Wn(o),Es(s)}}resolveInjectorInitializers(){let e=qe(null),t=Es(this),r=Wn(void 0),i;try{let s=this.get(jo,Kn,Fe.Self);for(let o of s)o()}finally{Es(t),Wn(r),qe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Qn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Un(e);let t=hu(e)?e:Un(e&&e.provide),r=Rz(e);if(!hu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=nu(void 0,Nm,!0),i.factory=()=>oI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=qe(null);try{return t.value===AP?Dx(Qn(e)):t.value===Nm&&(t.value=AP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&xz(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{qe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Un(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function cI(n){let e=wy(n),t=e!==null?e.factory:ac(n);if(t!==null)return t;if(n instanceof J)throw new ie(204,!1);if(n instanceof Function)return Mz(n);throw new ie(204,!1)}function Mz(n){if(n.length>0)throw new ie(204,!1);let t=sz(n);return t!==null?()=>t.factory(n):()=>new n}function Rz(n){if(Ux(n))return nu(void 0,n.useValue);{let e=Bx(n);return nu(e,Nm)}}function Bx(n,e,t){let r;if(hu(n)){let i=Un(n);return ac(i)||cI(i)}else if(Ux(n))r=()=>Un(n.useValue);else if(Az(n))r=()=>n.useFactory(...oI(n.deps||[]));else if(Sz(n))r=(i,s)=>ue(Un(n.useExisting),s!==void 0&&s&Fe.Optional?Fe.Optional:void 0);else{let i=Un(n&&(n.useClass||n.provide));if(Pz(n))r=()=>new i(...oI(n.deps));else return ac(i)||cI(i)}return r}function jh(n){if(n.destroyed)throw new ie(205,!1)}function nu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Pz(n){return!!n.deps}function xz(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function kz(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function lI(n,e){for(let t of n)Array.isArray(t)?lI(t,e):t&&Ax(t)?lI(t.\u0275providers,e):e(t)}function gn(n,e){let t;n instanceof Hh?(jh(n),t=n):t=new Hm(n);let r,i=Es(t),s=Wn(void 0);try{return e()}finally{Es(i),Wn(s)}}function jx(){return Mx()!==void 0||Fh()!=null}function by(n){if(!jx())throw new ie(-203,!1)}function Oz(n){return typeof n=="function"}var fr=0,De=1,xe=2,pn=3,Jr=4,Xn=5,Xr=6,Km=7,Yn=8,Ri=9,Ts=10,ft=11,qh=12,DP=13,vu=14,Jn=15,fu=16,ru=17,pu=18,Cy=19,zx=20,Bo=21,zE=22,Qm=23,Ar=24,au=25,xt=26,$x=1,Ss=6,As=7,Ym=8,Jm=9,hr=10;function Zr(n){return Array.isArray(n)&&typeof n[$x]=="object"}function Li(n){return Array.isArray(n)&&n[$x]===!0}function Hx(n){return(n.flags&4)!==0}function pc(n){return n.componentOffset>-1}function XI(n){return(n.flags&1)===1}function Pi(n){return!!n.template}function Gh(n){return(n[xe]&512)!==0}function gc(n){return(n[xe]&256)===256}var uI=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var pr=(()=>{let n=()=>Gx;return n.ngInherit=!0,n})();function Gx(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lz),Nz}function Nz(){let n=Kx(this),e=n?.current;if(e){let t=n.previous;if(t===cc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Lz(n,e,t,r,i){let s=this.declaredInputs[r],o=Kx(n)||Fz(n,{previous:cc,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new uI(u&&u.currentValue,t,c===cc),qx(n,e,i,t)}var Wx="__ngSimpleChanges__";function Kx(n){return n[Wx]||null}function Fz(n,e){return n[Wx]=e}var MP=null;var ct=function(n,e=null,t){MP?.(n,e,t)},Vz="svg",Uz="math";function ei(n){for(;Array.isArray(n);)n=n[fr];return n}function Qx(n,e){return ei(e[n])}function ti(n,e){return ei(e[n.index])}function Ty(n,e){return n.data[e]}function Yx(n,e){return n[e]}function Bz(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xi(n,e){let t=e[n];return Zr(t)?t:t[fr]}function eb(n){return(n[xe]&128)===128}function jz(n){return Li(n[pn])}function Zm(n,e){return e==null?null:n[e]}function Jx(n){n[ru]=0}function Zx(n){n[xe]&1024||(n[xe]|=1024,eb(n)&&Zh(n))}function zz(n,e){for(;n>0;)e=e[vu],n--;return e}function Sy(n){return!!(n[xe]&9216||n[Ar]?.dirty)}function dI(n){n[Ts].changeDetectionScheduler?.notify(8),n[xe]&64&&(n[xe]|=1024),Sy(n)&&Zh(n)}function Zh(n){n[Ts].changeDetectionScheduler?.notify(0);let e=lc(n);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!eb(e)));)e=lc(e)}function Xx(n,e){if(gc(n))throw new ie(911,!1);n[Bo]===null&&(n[Bo]=[]),n[Bo].push(e)}function $z(n,e){if(n[Bo]===null)return;let t=n[Bo].indexOf(e);t!==-1&&n[Bo].splice(t,1)}function lc(n){let e=n[pn];return Li(e)?e[pn]:e}function ek(n){return n[Km]??=[]}function tk(n){return n.cleanup??=[]}var Ue={lFrame:uk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hI=!1;function Hz(){return Ue.lFrame.elementDepthCount}function qz(){Ue.lFrame.elementDepthCount++}function Gz(){Ue.lFrame.elementDepthCount--}function nk(){return Ue.bindingsEnabled}function wu(){return Ue.skipHydrationRootTNode!==null}function Wz(n){return Ue.skipHydrationRootTNode===n}function Kz(n){Ue.skipHydrationRootTNode=n}function Qz(){Ue.skipHydrationRootTNode=null}function nt(){return Ue.lFrame.lView}function In(){return Ue.lFrame.tView}function se(n){return Ue.lFrame.contextLView=n,n[Yn]}function oe(n){return Ue.lFrame.contextLView=null,n}function er(){let n=rk();for(;n!==null&&n.type===64;)n=n.parent;return n}function rk(){return Ue.lFrame.currentTNode}function Yz(){let n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xh(n,e){let t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function ik(){return Ue.lFrame.isParent}function sk(){Ue.lFrame.isParent=!1}function Jz(){return Ue.lFrame.contextLView}function ok(){return hI}function RP(n){let e=hI;return hI=n,e}function Zz(){let n=Ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xz(){return Ue.lFrame.bindingIndex}function e9(n){return Ue.lFrame.bindingIndex=n}function Ay(){return Ue.lFrame.bindingIndex++}function tb(n){let e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function t9(){return Ue.lFrame.inI18n}function n9(n,e){let t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,fI(e)}function r9(){return Ue.lFrame.currentDirectiveIndex}function fI(n){Ue.lFrame.currentDirectiveIndex=n}function i9(n){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ak(n){Ue.lFrame.currentQueryIndex=n}function s9(n){let e=n[De];return e.type===2?e.declTNode:e.type===1?n[Xn]:null}function ck(n,e,t){if(t&Fe.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Fe.Host);)if(i=s9(s),i===null||(s=s[vu],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ue.lFrame=lk();return r.currentTNode=e,r.lView=n,!0}function nb(n){let e=lk(),t=n[De];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lk(){let n=Ue.lFrame,e=n===null?null:n.child;return e===null?uk(n):e}function uk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function dk(){let n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var hk=dk;function rb(){let n=dk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function o9(n){return(Ue.lFrame.contextLView=zz(n,Ue.lFrame.contextLView))[Yn]}function Ho(){return Ue.lFrame.selectedIndex}function uc(n){Ue.lFrame.selectedIndex=n}function Dy(){let n=Ue.lFrame;return Ty(n.tView,n.selectedIndex)}function fk(){return Ue.lFrame.currentNamespace}var pk=!0;function ib(){return pk}function qo(n){pk=n}function a9(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Gx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function gk(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Lm(n,e,t){mk(n,e,3,t)}function Fm(n,e,t,r){(n[xe]&3)===t&&mk(n,e,t,r)}function $E(n,e){let t=n[xe];(t&3)===e&&(t&=16383,t+=1,n[xe]=t)}function mk(n,e,t,r){let i=r!==void 0?n[ru]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ru]+=65536),(a<s||s==-1)&&(c9(n,t,e,c),n[ru]=(n[ru]&4294901760)+c+2),c++}function PP(n,e){ct(4,n,e);let t=qe(null);try{e.call(n)}finally{qe(t),ct(5,n,e)}}function c9(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[xe]>>14<n[ru]>>16&&(n[xe]&3)===e&&(n[xe]+=16384,PP(a,s)):PP(a,s)}var cu=-1,dc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function l9(n){return(n.flags&8)!==0}function u9(n){return(n.flags&16)!==0}function d9(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];h9(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function yk(n){return n===3||n===4||n===6}function h9(n){return n.charCodeAt(0)===64}function Wh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?xP(n,t,i,null,e[++r]):xP(n,t,i,null,null))}}return n}function xP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function _k(n){return n!==cu}function Xm(n){return n&32767}function f9(n){return n>>16}function ey(n,e){let t=f9(n),r=e;for(;t>0;)r=r[vu],t--;return r}var pI=!0;function ty(n){let e=pI;return pI=n,e}var p9=256,vk=p9-1,wk=5,g9=0,Mi={};function m9(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($h)&&(r=t[$h]),r==null&&(r=t[$h]=g9++);let i=r&vk,s=1<<i;e.data[n+(i>>wk)]|=s}function ny(n,e){let t=Ek(n,e);if(t!==-1)return t;let r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,HE(r.data,n),HE(e,null),HE(r.blueprint,null));let i=sb(n,e),s=n.injectorIndex;if(_k(i)){let o=Xm(i),a=ey(i,e),c=a[De].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function HE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ek(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function sb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Sk(i),r===null)return cu;if(t++,i=i[vu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return cu}function gI(n,e,t){m9(n,e,t)}function y9(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(yk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Ik(n,e,t){if(t&Fe.Optional||n!==void 0)return n;WI(e,"NodeInjector")}function bk(n,e,t,r){if(t&Fe.Optional&&r===void 0&&(r=null),(t&(Fe.Self|Fe.Host))===0){let i=n[Ri],s=Wn(void 0);try{return i?i.get(e,r,t&Fe.Optional):Rx(e,r,t&Fe.Optional)}finally{Wn(s)}}return Ik(r,e,t)}function Ck(n,e,t,r=Fe.Default,i){if(n!==null){if(e[xe]&2048&&!(r&Fe.Self)){let o=I9(n,e,t,r,Mi);if(o!==Mi)return o}let s=Tk(n,e,t,r,Mi);if(s!==Mi)return s}return bk(e,t,r,i)}function Tk(n,e,t,r,i){let s=w9(t);if(typeof s=="function"){if(!ck(e,n,r))return r&Fe.Host?Ik(i,t,r):bk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Fe.Optional))WI(t);else return o}finally{hk()}}else if(typeof s=="number"){let o=null,a=Ek(n,e),c=cu,u=r&Fe.Host?e[Jn][Xn]:null;for((a===-1||r&Fe.SkipSelf)&&(c=a===-1?sb(n,e):e[a+8],c===cu||!OP(r,!1)?a=-1:(o=e[De],a=Xm(c),e=ey(c,e)));a!==-1;){let h=e[De];if(kP(s,a,h.data)){let g=_9(a,e,t,o,r,u);if(g!==Mi)return g}c=e[a+8],c!==cu&&OP(r,e[De].data[a+8]===u)&&kP(s,a,e)?(o=h,a=Xm(c),e=ey(c,e)):a=-1}}return i}function _9(n,e,t,r,i,s){let o=e[De],a=o.data[n+8],c=r==null?pc(a)&&pI:r!=o&&(a.type&3)!==0,u=i&Fe.Host&&s===a,h=v9(a,o,t,c,u);return h!==null?ry(e,o,h,a,i):Mi}function v9(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,h=s>>20,g=r?a:a+h,I=i?a+h:u;for(let T=g;T<I;T++){let k=o[T];if(T<c&&t===k||T>=c&&k.type===t)return T}if(i){let T=o[c];if(T&&Pi(T)&&T.type===t)return c}return null}function ry(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof dc){let a=s;a.resolving&&Dx(dz(o[t]));let c=ty(a.canSeeViewProviders);a.resolving=!0;let u,h=a.injectImpl?Wn(a.injectImpl):null,g=ck(n,r,Fe.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&a9(t,o[t],e)}finally{h!==null&&Wn(h),ty(c),a.resolving=!1,hk()}}return s}function w9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($h)?n[$h]:void 0;return typeof e=="number"?e>=0?e&vk:E9:e}function kP(n,e,t){let r=1<<n;return!!(t[e+(n>>wk)]&r)}function OP(n,e){return!(n&Fe.Self)&&!(n&Fe.Host&&e)}var oc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ck(this._tNode,this._lView,e,Ey(r),t)}};function E9(){return new oc(er(),nt())}function Rs(n){return Yh(()=>{let e=n.prototype.constructor,t=e[$m]||mI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[$m]||mI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function mI(n){return bx(n)?()=>{let e=mI(Un(n));return e&&e()}:ac(n)}function I9(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[xe]&2048&&!Gh(o);){let a=Tk(s,o,t,r|Fe.Self,Mi);if(a!==Mi)return a;let c=s.parent;if(!c){let u=o[zx];if(u){let h=u.get(t,Mi,r);if(h!==Mi)return h}c=Sk(o),o=o[vu]}s=c}return i}function Sk(n){let e=n[De],t=e.type;return t===2?e.declTNode:t===1?n[Xn]:null}function ob(n){return y9(er(),n)}function NP(n,e=null,t=null,r){let i=Ak(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ak(n,e=null,t=null,r,i=new Set){let s=[t||Kn,Cz(n)];return r=r||(typeof n=="object"?void 0:Qn(n)),new Hh(s,e||ZI(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=sc;static NULL=new Wm;static create(e,t){if(Array.isArray(e))return NP({name:""},t,e,"");{let r=e.name??"";return NP({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>ue(kx)});static __NG_ELEMENT_ID__=-1};var b9=new J("");b9.__NG_ELEMENT_ID__=n=>{let e=er();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&Fe.Optional)return null;throw new ie(204,!1)};var Dk=!1,mc=(()=>{class n{static __NG_ELEMENT_ID__=C9;static __NG_ENV_ID__=t=>t}return n})(),yI=class extends mc{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return gc(t)?(e(),()=>{}):(Xx(t,e),()=>$z(t,e))}};function C9(){return new yI(nt())}var hc=class{},My=new J("",{providedIn:"root",factory:()=>!1});var Mk=new J(""),Rk=new J(""),Fi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Lt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),ef=(()=>{class n{internalPendingTasks=j(Fi);scheduler=j(hc);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return S(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),_I=class extends Pt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,jx()&&(this.destroyRef=j(mc,{optional:!0})??void 0,this.pendingTasks=j(Fi,{optional:!0})??void 0)}emit(e){let t=qe(null);try{super.next(e)}finally{qe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=_I;function iy(...n){}function Pk(n){let e,t;function r(){n=iy;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function LP(n){return queueMicrotask(()=>n()),()=>{n=iy}}var ab="isAngularZone",sy=ab+"_ID",T9=0,Oe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Dk}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,D9(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ab)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,S9,iy,iy);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},S9={};function cb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function A9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Pk(()=>{n.callbackScheduled=!1,vI(n),n.isCheckStableRunning=!0,cb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),vI(n)}function D9(n){let e=()=>{A9(n)},t=T9++;n._inner=n._inner.fork({name:"angular",properties:{[ab]:!0,[sy]:t,[sy+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(M9(c))return r.invokeTask(s,o,a,c);try{return FP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),VP(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return FP(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!R9(c)&&e(),VP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,vI(n),cb(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function vI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function FP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VP(n){n._nesting--,cb(n)}var wI=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function M9(n){return xk(n,"__ignore_ng_zone__")}function R9(n){return xk(n,"__scheduler_tick__")}function xk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ki=class{_console=console;handleError(e){this._console.error("ERROR",e)}},P9=new J("",{providedIn:"root",factory:()=>{let n=j(Oe),e=j(ki);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function UP(n,e){return Ex(n,e)}function x9(n){return Ex(wx,n)}var kk=(UP.required=x9,UP);function k9(){return Ry(er(),nt())}function Ry(n,e){return new gr(ti(n,e))}var gr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=k9}return n})();function O9(n){return typeof n=="function"&&n[Sr]!==void 0}function yc(n,e){let t=hE(n,e?.equal),r=t[Sr];return t.set=i=>Lh(r,i),t.update=i=>fE(r,i),t.asReadonly=N9.bind(t),t}function N9(){let n=this[Sr];if(n.readonlyFn===void 0){let e=()=>this();e[Sr]=n,n.readonlyFn=e}return n.readonlyFn}function Ok(n){return O9(n)&&typeof n.set=="function"}var L9="ngSkipHydration",F9="ngskiphydration";function Nk(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===F9)return!0}return!1}function Lk(n){return n.hasAttribute(L9)}function oy(n){return(n.flags&128)===128}function V9(n){if(oy(n))return!0;let e=n.parent;for(;e;){if(oy(n)||Nk(e))return!0;e=e.parent}return!1}var Fk=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fk||{}),Vk=new Map,U9=0;function B9(){return U9++}function j9(n){Vk.set(n[Cy],n)}function EI(n){Vk.delete(n[Cy])}var BP="__ngContext__";function tf(n,e){Zr(e)?(n[BP]=e[Cy],j9(e)):n[BP]=e}function Uk(n){return jk(n[qh])}function Bk(n){return jk(n[Jr])}function jk(n){for(;n!==null&&!Li(n);)n=n[Jr];return n}var II;function zk(n){II=n}function Py(){if(II!==void 0)return II;if(typeof document<"u")return document;throw new ie(210,!1)}var Cs=new J("",{providedIn:"root",factory:()=>z9}),z9="ng",lb=new J(""),Vi=new J("",{providedIn:"platform",factory:()=>"unknown"});var ub=new J("",{providedIn:"root",factory:()=>Py().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function $9(){let n=new Eu;return n.store=H9(Py(),j(Cs)),n}var Eu=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:$9});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function H9(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var $k="h",Hk="b",q9="f",G9="n",W9="e",K9="t",db="c",qk="x",ay="r",Q9="i",Y9="n",Gk="d";var J9="di",Z9="s",X9="p";var Pm=new J(""),Wk=!1,Kk=new J("",{providedIn:"root",factory:()=>Wk});var Qk=new J(""),e8=!1,t8=new J(""),jP=new J("",{providedIn:"root",factory:()=>new Map}),hb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(hb||{}),Iu=new J(""),zP=new Set;function Ui(n){zP.has(n)||(zP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Yk=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=n8}return n})();function n8(){return new Yk(nt(),er())}var iu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(iu||{}),Jk=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),r8=[iu.EarlyRead,iu.Write,iu.MixedReadWrite,iu.Read],i8=(()=>{class n{ngZone=j(Oe);scheduler=j(hc);errorHandler=j(ki,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Iu,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ct(16),this.executing=!0;for(let r of r8)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ct(17)}register(t){let{view:r}=t;r!==void 0?((r[au]??=[]).push(t),Zh(r),r[xe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(hb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),bI=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[au];e&&(this.view[au]=e.filter(t=>t!==this))}};function xy(n,e){!e?.injector&&by(xy);let t=e?.injector??j(Tt);return Ui("NgAfterNextRender"),o8(n,t,e,!0)}function s8(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function o8(n,e,t,r){let i=e.get(Jk);i.impl??=e.get(i8);let s=e.get(Iu,null,{optional:!0}),o=t?.phase??iu.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(mc):null,c=e.get(Yk,null,{optional:!0}),u=new bI(i.impl,s8(n,o),c?.view,r,a,s?.snapshot(null));return i.impl.register(u),u}var dr=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(dr||{}),$P=0,a8=1,on=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(on||{});var c8=0,ky=1;var l8=4,u8=5;var d8=7,lu=8,h8=9,Zk=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(Zk||{});function Vm(n,e){let t=p8(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function f8(n){Vm(1,n),Vm(0,n),Vm(2,n)}function p8(n){let e=l8;return n===1?e=u8:n===2&&(e=h8),e}function Xk(n){return n+1}function nf(n,e){let t=n[De],r=Xk(e.index);return n[r]}function Oy(n,e){let t=Xk(e.index);return n.data[t]}function g8(n,e,t){let r=e[De],i=Oy(r,t);switch(n){case on.Complete:return i.primaryTmplIndex;case on.Loading:return i.loadingTmplIndex;case on.Error:return i.errorTmplIndex;case on.Placeholder:return i.placeholderTmplIndex;default:return null}}function HP(n,e){return e===on.Placeholder?n.placeholderBlockConfig?.[$P]??null:e===on.Loading?n.loadingBlockConfig?.[$P]??null:null}function m8(n){return n.loadingBlockConfig?.[a8]??null}function qP(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function y8(n,e){let t=e.primaryTmplIndex+xt;return Ty(n,t)}var Ny="ngb";var _8=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,s=i.get(e)??[];s.push(t),i.set(e,s),r.__jsaction_fns=i},v8=(n,e)=>{let t=n,r=t.getAttribute(Ny)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var w8=n=>{n.removeAttribute(OE.JSACTION),n.removeAttribute(Ny),n.__jsaction_fns=void 0},E8=new J("",{providedIn:"root",factory:()=>({})});function eO(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var CI=new Map;function I8(n,e){return CI.set(n,e),()=>CI.delete(n)}var GP=!1,tO=(n,e,t,r)=>{};function b8(n,e,t,r){tO(n,e,t,r)}function C8(){GP||(tO=(n,e,t,r)=>{let i=n[Ri].get(Cs);CI.get(i)?.(e,t,r)},GP=!0)}var fb=new J("");var T8="__nghData__",nO=T8,S8="__nghDeferData__",A8=S8,qE="ngh",D8="nghm",rO=()=>null;function M8(n,e,t=!1){let r=n.getAttribute(qE);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let h=e.get(Eu,null,{optional:!0});h!==null&&(c=h.get(nO,[])[Number(r)])}let u={data:c,firstChild:n.firstChild??null};return t&&(u.firstChild=n,Ly(u,0,n.nextSibling)),a?n.setAttribute(qE,a):n.removeAttribute(qE),u}function R8(){rO=M8}function iO(n,e,t=!1){return rO(n,e,t)}function P8(n){let e=n._lView;return e[De].type===2?null:(Gh(e)&&(e=e[xt]),e)}function x8(n){return n.textContent?.replace(/\s/gm,"")}function k8(n){let e=Py(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=x8(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Ly(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function TI(n,e){return n.segmentHeads?.[e]??null}function O8(n){return n.get(t8,!1,{optional:!0})}function N8(n,e){let t=n.data,r=t[W9]?.[e]??null;return r===null&&t[db]?.[e]&&(r=pb(n,e)),r}function sO(n,e){return n.data[db]?.[e]??null}function pb(n,e){let t=sO(n,e)??[],r=0;for(let i of t)r+=i[ay]*(i[qk]??1);return r}function L8(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[Gk];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function rf(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[Gk];n.disconnectedNodes=t?new Set(t):null}return!!L8(n)?.has(e)}function F8(n,e){let t=e.get(fb),i=e.get(Eu).get(A8,{}),s=!1,o=n,a=null,c=[];for(;!s&&o;){s=t.has(o);let u=t.hydrating.get(o);if(a===null&&u!=null){a=u.promise;break}c.unshift(o),o=i[o][X9]}return{parentBlockPromise:a,hydrationQueue:c}}function GE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===D8}function WP(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function V8(n){for(let r of n.body.childNodes)if(GE(r))return;let e=WP(n.body.previousSibling);if(GE(e))return;let t=WP(n.head.lastChild);if(!GE(t))throw new ie(-507,!1)}function oO(n,e){let t=n.contentQueries;if(t!==null){let r=qe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ak(s),a.contentQueries(2,e[o],o)}}}finally{qe(r)}}}function SI(n,e,t){ak(0);let r=qe(null);try{e(n,t)}finally{qe(r)}}function aO(n,e,t){if(Hx(e)){let r=qe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{qe(r)}}}var Oi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Oi||{});var xm;function U8(){if(xm===void 0&&(xm=null,zm.trustedTypes))try{xm=zm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xm}function KP(n){return U8()?.createScriptURL(n)||n}var cy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vx})`}};function bu(n){return n instanceof cy?n.changingThisBreaksApplicationSecurity:n}function gb(n,e){let t=B8(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vx})`)}return t===e}function B8(n){return n instanceof cy&&n.getTypeName()||null}var j8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cO(n){return n=String(n),n.match(j8)?n:"unsafe:"+n}var Fy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fy||{});function Go(n){let e=uO();return e?e.sanitize(Fy.URL,n)||"":gb(n,"URL")?bu(n):cO(du(n))}function z8(n){let e=uO();if(e)return KP(e.sanitize(Fy.RESOURCE_URL,n)||"");if(gb(n,"ResourceURL"))return KP(bu(n));throw new ie(904,!1)}function $8(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?z8:Go}function lO(n,e,t){return $8(e,t)(n)}function uO(){let n=nt();return n&&n[Ts].sanitizer}var H8=/^>|^->|<!--|-->|--!>|<!-$/g,q8=/(<|>)/g,G8="\u200B$1\u200B";function W8(n){return n.replace(H8,e=>e.replace(q8,G8))}function K8(n){return n.ownerDocument.body}function dO(n){return n instanceof Function?n():n}function Q8(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var hO="ng-template";function Y8(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Q8(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mb(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function mb(n){return n.type===4&&n.value!==hO}function J8(n,e,t){let r=n.type===4&&!t?hO:n.value;return e===r}function Z8(n,e,t){let r=4,i=n.attrs,s=i!==null?t$(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qr(r)&&!Qr(c))return!1;if(o&&Qr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!J8(n,c,t)||c===""&&e.length===1){if(Qr(r))return!1;o=!0}}else if(r&8){if(i===null||!Y8(n,i,c,t)){if(Qr(r))return!1;o=!0}}else{let u=e[++a],h=X8(c,i,mb(n),t);if(h===-1){if(Qr(r))return!1;o=!0;continue}if(u!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&u!==g){if(Qr(r))return!1;o=!0}}}}return Qr(r)||o}function Qr(n){return(n&1)===0}function X8(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return n$(e,n)}function fO(n,e,t=!1){for(let r=0;r<e.length;r++)if(Z8(n,e[r],t))return!0;return!1}function e$(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function t$(n){for(let e=0;e<n.length;e++){let t=n[e];if(yk(t))return e}return n.length}function n$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function r$(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function QP(n,e){return n?":not("+e.trim()+")":e}function i$(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qr(o)&&(e+=QP(s,i),i=""),r=o,s=s||!Qr(r);t++}return i!==""&&(e+=QP(s,i)),e}function s$(n){return n.map(i$).join(",")}function o$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Qr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Mr={};function pO(n,e){return n.createText(e)}function a$(n,e,t){n.setValue(e,t)}function gO(n,e){return n.createComment(W8(e))}function yb(n,e,t){return n.createElement(e,t)}function ly(n,e,t,r,i){n.insertBefore(e,t,r,i)}function mO(n,e,t){n.appendChild(e,t)}function YP(n,e,t,r,i){r!==null?ly(n,e,t,r,i):mO(n,e,t)}function _b(n,e,t){n.removeChild(null,e,t)}function yO(n){n.textContent=""}function c$(n,e,t){n.setAttribute(e,"style",t)}function l$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _O(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&d9(n,e,r),i!==null&&l$(n,e,i),s!==null&&c$(n,e,s)}function vb(n,e,t,r,i,s,o,a,c,u,h){let g=xt+r,I=g+i,T=u$(g,I),k=typeof u=="function"?u():u;return T[De]={type:n,blueprint:T,template:t,queries:null,viewQuery:a,declTNode:e,data:T.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function u$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Mr);return t}function d$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wb(n,e,t,r,i,s,o,a,c,u,h){let g=e.blueprint.slice();return g[fr]=i,g[xe]=r|4|128|8|64|1024,(u!==null||n&&n[xe]&2048)&&(g[xe]|=2048),Jx(g),g[pn]=g[vu]=n,g[Yn]=t,g[Ts]=o||n&&n[Ts],g[ft]=a||n&&n[ft],g[Ri]=c||n&&n[Ri]||null,g[Xn]=s,g[Cy]=B9(),g[Xr]=h,g[zx]=u,g[Jn]=e.type==2?n[Jn]:g,g}function h$(n,e,t){let r=ti(e,n),i=d$(t),s=n[Ts].rendererFactory,o=Eb(n,wb(n,i,null,vO(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function vO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function wO(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Eb(n,e){return n[qh]?n[DP][Jr]=e:n[qh]=e,n[DP]=e,e}function N(n=1){EO(In(),nt(),Ho()+n,!1)}function EO(n,e,t,r){if(!r)if((e[xe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Lm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Fm(e,s,0,t)}uc(t)}var Vy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Vy||{});function AI(n,e,t,r){let i=qe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Vy.SignalBased)!==0&&(c=e[s][Sr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):qx(e,c,s,r)}finally{qe(i)}}function IO(n,e,t,r,i){let s=Ho(),o=r&2;try{uc(-1),o&&e.length>xt&&EO(n,e,xt,!1),ct(o?2:0,i),t(r,i)}finally{uc(s),ct(o?3:1,i)}}function Ib(n,e,t){v$(n,e,t),(t.flags&64)===64&&w$(n,e,t)}function bO(n,e,t=ti){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function f$(n,e,t,r){let s=r.get(Kk,Wk)||t===Oi.ShadowDom,o=n.selectRootElement(e,s);return p$(o),o}function p$(n){CO(n)}var CO=()=>null;function g$(n){Lk(n)?yO(n):k8(n)}function m$(){CO=g$}function y$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bb(n,e,t,r,i,s,o,a){if(!a&&Tb(e,n,t,r,i)){pc(e)&&_$(t,e.index);return}if(e.type&3){let c=ti(e,t);r=y$(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)}else e.type&12}function _$(n,e){let t=xi(e,n);t[xe]&16||(t[xe]|=64)}function v$(n,e,t){let r=t.directiveStart,i=t.directiveEnd;pc(t)&&h$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ny(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=ry(e,n,o,t);if(tf(c,e),s!==null&&C$(e,o-r,c,a,t,s),Pi(a)){let u=xi(t.index,e);u[Yn]=ry(e,n,o,t)}}}function w$(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=r9();try{uc(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];fI(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&E$(c,u)}}finally{uc(-1),fI(o)}}function E$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function TO(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];fO(e,s.selectors,!1)&&(r??=[],Pi(s)?r.unshift(s):r.push(s))}return r}function I$(n,e,t,r,i,s){let o=ti(n,e);b$(e[ft],o,s,n.value,t,r,i)}function b$(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?du(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function C$(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];AI(r,t,c,u)}}function Cb(n,e){let t=n[Ri],r=t?t.get(ki,null):null;r&&r.handleError(e)}function Tb(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],h=o[c+1],g=e.data[u];AI(g,t[u],h,i),a=!0}if(s)for(let c of s){let u=t[c],h=e.data[c];AI(h,u,r,i),a=!0}return a}function T$(n,e){let t=xi(e,n),r=t[De];S$(r,t);let i=t[fr];i!==null&&t[Xr]===null&&(t[Xr]=iO(i,t[Ri])),ct(18),Sb(r,t,t[Yn]),ct(19,t[Yn])}function S$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Sb(n,e,t){nb(e);try{let r=n.viewQuery;r!==null&&SI(1,r,t);let i=n.template;i!==null&&IO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pu]?.finishViewCreation(n),n.staticContentQueries&&oO(n,e),n.staticViewQueries&&SI(2,n.viewQuery,t);let s=n.components;s!==null&&A$(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[xe]&=-5,rb()}}function A$(n,e){for(let t=0;t<e.length;t++)T$(n,e[t])}function Ab(n,e,t,r){let i=qe(null);try{let s=e.tView,a=n[xe]&4096?4096:16,c=wb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[fu]=u;let h=n[pu];return h!==null&&(c[pu]=h.createEmbeddedView(s)),Sb(s,c,t),c}finally{qe(i)}}function uy(n,e){return!e||e.firstChild===null||oy(n)}var D$;function Db(n,e){return D$(n,e)}var Ds=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ds||{});function _c(n){return(n.flags&32)===32}function su(n,e,t,r,i){if(r!=null){let s,o=!1;Li(r)?s=r:Zr(r)&&(o=!0,r=r[fr]);let a=ei(r);n===0&&t!==null?i==null?mO(e,t,a):ly(e,t,a,i||null,!0):n===1&&t!==null?ly(e,t,a,i||null,!0):n===2?_b(e,a,o):n===3&&e.destroyNode(a),s!=null&&V$(e,n,s,t,i)}}function M$(n,e){SO(n,e),e[fr]=null,e[Xn]=null}function R$(n,e,t,r,i,s){r[fr]=i,r[Xn]=e,Uy(n,r,t,1,i,s)}function SO(n,e){e[Ts].changeDetectionScheduler?.notify(9),Uy(n,e,e[ft],2,null,null)}function P$(n){let e=n[qh];if(!e)return WE(n[De],n);for(;e;){let t=null;if(Zr(e))t=e[qh];else{let r=e[hr];r&&(t=r)}if(!t){for(;e&&!e[Jr]&&e!==n;)Zr(e)&&WE(e[De],e),e=e[pn];e===null&&(e=n),Zr(e)&&WE(e[De],e),t=e&&e[Jr]}e=t}}function Mb(n,e){let t=n[Jm],r=t.indexOf(e);t.splice(r,1)}function Rb(n,e){if(gc(e))return;let t=e[ft];t.destroyNode&&Uy(n,e,t,3,null,null),P$(e)}function WE(n,e){if(gc(e))return;let t=qe(null);try{e[xe]&=-129,e[xe]|=256,e[Ar]&&lE(e[Ar]),k$(n,e),x$(n,e),e[De].type===1&&e[ft].destroy();let r=e[fu];if(r!==null&&Li(e[pn])){r!==e[pn]&&Mb(r,e);let i=e[pu];i!==null&&i.detachView(n)}EI(e)}finally{qe(t)}}function x$(n,e){let t=n.cleanup,r=e[Km];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Km]=null);let i=e[Bo];if(i!==null){e[Bo]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Qm];if(s!==null){e[Qm]=null;for(let o of s)o.destroy()}}function k$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof dc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ct(4,a,c);try{c.call(a)}finally{ct(5,a,c)}}else{ct(4,i,s);try{s.call(i)}finally{ct(5,i,s)}}}}}function AO(n,e,t){return O$(n,e.parent,t)}function O$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[fr];if(pc(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Oi.None||i===Oi.Emulated)return null}return ti(r,t)}function DO(n,e,t){return L$(n,e,t)}function N$(n,e,t){return n.type&40?ti(n,t):null}var L$=N$,JP;function Pb(n,e,t,r){let i=AO(n,r,e),s=e[ft],o=r.parent||e[Xn],a=DO(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)YP(s,i,t[c],a,!1);else YP(s,i,t,a,!1);JP!==void 0&&JP(s,r,e,t,i)}function zh(n,e){if(e!==null){let t=e.type;if(t&3)return ti(e,n);if(t&4)return DI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return zh(n,r);{let i=n[e.index];return Li(i)?DI(-1,i):ei(i)}}else{if(t&128)return zh(n,e.next);if(t&32)return Db(e,n)()||ei(n[e.index]);{let r=MO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=lc(n[Jn]);return zh(i,r)}else return zh(n,e.next)}}}return null}function MO(n,e){if(e!==null){let r=n[Jn][Xn],i=e.projection;return r.projection[i]}return null}function DI(n,e){let t=hr+n+1;if(t<e.length){let r=e[t],i=r[De].firstChild;if(i!==null)return zh(r,i)}return e[As]}function xb(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&tf(ei(a),r),t.flags|=2),!_c(t))if(c&8)xb(n,e,t.child,r,i,s,!1),su(e,n,i,a,s);else if(c&32){let u=Db(t,r),h;for(;h=u();)su(e,n,i,h,s);su(e,n,i,a,s)}else c&16?RO(n,e,r,t,i,s):su(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Uy(n,e,t,r,i,s){xb(t,r,n.firstChild,e,i,s,!1)}function F$(n,e,t){let r=e[ft],i=AO(n,t,e),s=t.parent||e[Xn],o=DO(s,t,e);RO(r,0,e,t,i,o)}function RO(n,e,t,r,i,s){let o=t[Jn],c=o[Xn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];su(e,n,i,h,s)}else{let u=c,h=o[pn];oy(r)&&(u.flags|=128),xb(n,e,u,h,i,s,!0)}}function V$(n,e,t,r,i){let s=t[As],o=ei(t);s!==o&&su(e,n,r,s,i);for(let a=hr;a<t.length;a++){let c=t[a];Uy(c[De],c,n,e,r,s)}}function U$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ds.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ds.Important),n.setStyle(t,r,i,s))}}function dy(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ei(s)),Li(s)&&B$(s,r);let o=t.type;if(o&8)dy(n,e,t.child,r);else if(o&32){let a=Db(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=MO(e,t);if(Array.isArray(a))r.push(...a);else{let c=lc(e[Jn]);dy(c[De],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function B$(n,e){for(let t=hr;t<n.length;t++){let r=n[t],i=r[De].firstChild;i!==null&&dy(r[De],r,i,e)}n[As]!==n[fr]&&e.push(n[As])}function PO(n){if(n[au]!==null){for(let e of n[au])e.impl.addSequence(e);n[au].length=0}}var xO=[];function j$(n){return n[Ar]??z$(n)}function z$(n){let e=xO.pop()??Object.create(H$);return e.lView=n,e}function $$(n){n.lView[Ar]!==n&&(n.lView=null,xO.push(n))}var H$=fe($({},Oh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Zh(n.lView)},consumerOnSignalRead(){this.lView[Ar]=this}});function q$(n){let e=n[Ar]??Object.create(G$);return e.lView=n,e}var G$=fe($({},Oh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=lc(n.lView);for(;e&&!kO(e[De]);)e=lc(e);e&&Zx(e)},consumerOnSignalRead(){this.lView[Ar]=this}});function kO(n){return n.type!==2}function OO(n){if(n[Qm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Qm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[xe]&8192)}}var W$=100;function NO(n,e=!0,t=0){let i=n[Ts].rendererFactory,s=!1;s||i.begin?.();try{K$(n,t)}catch(o){throw e&&Cb(n,o),o}finally{s||i.end?.()}}function K$(n,e){let t=ok();try{RP(!0),MI(n,e);let r=0;for(;Sy(n);){if(r===W$)throw new ie(103,!1);r++,MI(n,1)}}finally{RP(t)}}function Q$(n,e,t,r){if(gc(e))return;let i=e[xe],s=!1,o=!1;nb(e);let a=!0,c=null,u=null;s||(kO(n)?(u=j$(e),c=Gg(u)):rE()===null?(a=!1,u=q$(e),c=Gg(u)):e[Ar]&&(lE(e[Ar]),e[Ar]=null));try{Jx(e),e9(n.bindingStartIndex),t!==null&&IO(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let T=n.preOrderCheckHooks;T!==null&&Lm(e,T,null)}else{let T=n.preOrderHooks;T!==null&&Fm(e,T,0,null),$E(e,0)}if(o||Y$(e),OO(e),LO(e,0),n.contentQueries!==null&&oO(n,e),!s)if(h){let T=n.contentCheckHooks;T!==null&&Lm(e,T)}else{let T=n.contentHooks;T!==null&&Fm(e,T,1),$E(e,1)}Z$(n,e);let g=n.components;g!==null&&VO(e,g,0);let I=n.viewQuery;if(I!==null&&SI(2,I,r),!s)if(h){let T=n.viewCheckHooks;T!==null&&Lm(e,T)}else{let T=n.viewHooks;T!==null&&Fm(e,T,2),$E(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zE]){for(let T of e[zE])T();e[zE]=null}s||(PO(e),e[xe]&=-73)}catch(h){throw s||Zh(e),h}finally{u!==null&&(aE(u,c),a&&$$(u)),rb()}}function LO(n,e){for(let t=Uk(n);t!==null;t=Bk(t))for(let r=hr;r<t.length;r++){let i=t[r];FO(i,e)}}function Y$(n){for(let e=Uk(n);e!==null;e=Bk(e)){if(!(e[xe]&2))continue;let t=e[Jm];for(let r=0;r<t.length;r++){let i=t[r];Zx(i)}}}function J$(n,e,t){ct(18);let r=xi(e,n);FO(r,t),ct(19,r[Yn])}function FO(n,e){eb(n)&&MI(n,e)}function MI(n,e){let r=n[De],i=n[xe],s=n[Ar],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&cE(s)),o||=!1,s&&(s.dirty=!1),n[xe]&=-9217,o)Q$(r,n,r.template,n[Yn]);else if(i&8192){OO(n),LO(n,1);let a=r.components;a!==null&&VO(n,a,1),PO(n)}}function VO(n,e,t){for(let r=0;r<e.length;r++)J$(n,e[r],t)}function Z$(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)uc(~i);else{let s=i,o=t[++r],a=t[++r];n9(o,s);let c=e[s];ct(24,c),a(2,c),ct(25,c)}}}finally{uc(-1)}}function By(n,e){let t=ok()?64:1088;for(n[Ts].changeDetectionScheduler?.notify(e);n;){n[xe]|=t;let r=lc(n);if(Gh(n)&&!r)return n;n=r}return null}function UO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function kb(n,e,t,r=!0){let i=e[De];if(eH(i,e,n,t),r){let o=DI(t,n),a=e[ft],c=a.parentNode(n[As]);c!==null&&R$(i,n[Xn],a,e,c,o)}let s=e[Xr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function X$(n,e){let t=hy(n,e);return t!==void 0&&Rb(t[De],t),t}function hy(n,e){if(n.length<=hr)return;let t=hr+e,r=n[t];if(r){let i=r[fu];i!==null&&i!==n&&Mb(i,r),e>0&&(n[t-1][Jr]=r[Jr]);let s=Gm(n,hr+e);M$(r[De],r);let o=s[pu];o!==null&&o.detachView(s[De]),r[pn]=null,r[Jr]=null,r[xe]&=-129}return r}function eH(n,e,t,r){let i=hr+r,s=t.length;r>0&&(t[i-1][Jr]=e),r<s-hr?(e[Jr]=t[i],xx(t,hr+r,e)):(t.push(e),e[Jr]=null),e[pn]=t;let o=e[fu];o!==null&&t!==o&&BO(o,e);let a=e[pu];a!==null&&a.insertView(n),dI(e),e[xe]|=128}function BO(n,e){let t=n[Jm],r=e[pn];if(Zr(r))n[xe]|=2;else{let i=r[pn][Jn];e[Jn]!==i&&(n[xe]|=2)}t===null?n[Jm]=[e]:t.push(e)}var Kh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[De];return dy(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Yn]}set context(e){this._lView[Yn]=e}get destroyed(){return gc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pn];if(Li(e)){let t=e[Ym],r=t?t.indexOf(this):-1;r>-1&&(hy(e,r),Gm(t,r))}this._attachedToViewContainer=!1}Rb(this._lView[De],this._lView)}onDestroy(e){Xx(this._lView,e)}markForCheck(){By(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){dI(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,NO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Gh(this._lView),t=this._lView[fu];t!==null&&!e&&Mb(t,this._lView),SO(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=Gh(this._lView),r=this._lView[fu];r!==null&&!t&&BO(r,this._lView),dI(this._lView)}};var jy=(()=>{class n{static __NG_ELEMENT_ID__=rH}return n})(),tH=jy,nH=class extends tH{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ab(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Kh(i)}};function rH(){return jO(er(),nt())}function jO(n,e){return n.type&4?new nH(e,n,Ry(n,e)):null}function zy(n,e,t,r,i){let s=n.data[e];if(s===null)s=iH(n,e,t,r,i),t9()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Yz();s.injectorIndex=o===null?-1:o.injectorIndex}return Xh(s,!0),s}function iH(n,e,t,r,i){let s=rk(),o=ik(),a=o?s:s&&s.parent,c=n.data[e]=oH(n,a,t,e,r,i);return sH(n,c,s,o),c}function sH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function oH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return wu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var aH=new RegExp(`^(\\d+)*(${Hk}|${$k})*(.*)`);function cH(n){let e=n.match(aH),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,u,h]of s.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(u,g)}return[o,...a]}function lH(n){return!n.prev&&n.parent?.type===8}function KE(n){return n.index-xt}function uH(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function $y(n,e,t,r){let i=KE(r),s=uH(n,i);if(s===void 0){let o=n.data[Y9];if(o?.[i])s=hH(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(lH(r)){let u=KE(r.parent);s=TI(n,u)}else{let u=ti(c,t);if(a)s=u.firstChild;else{let h=KE(c),g=TI(n,h);if(c.type===2&&g){let T=pb(n,h)+1;s=Hy(T,g)}else s=u.nextSibling}}}}return s}function Hy(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function dH(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case q9:t=t.firstChild;break;case G9:t=t.nextSibling;break}}return t}function hH(n,e){let[t,...r]=cH(n),i;if(t===$k)i=e[Jn][fr];else if(t===Hk)i=K8(e[Jn][fr]);else{let s=Number(t);i=ei(e[s+xt])}return dH(i,r)}var fH=!1;function pH(n){fH=n}function gH(n){let e=n[Xr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ft];for(let s of r.values())mH(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function mH(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-xt);i&&_b(n,i,!1)}}function zO(n){let e=n[Ss]??[],r=n[pn][ft],i=[];for(let s of e)s.data[J9]!==void 0?i.push(s):$O(s,r);n[Ss]=i}function yH(n){let{lContainer:e}=n,t=e[Ss];if(t===null)return;let i=e[pn][ft];for(let s of t)$O(s,i)}function $O(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[ay];for(;t<i;){let s=r.nextSibling;_b(e,r,!1),r=s,t++}}}function qy(n){zO(n);let e=n[fr];Zr(e)&&fy(e);for(let t=hr;t<n.length;t++)fy(n[t])}function fy(n){gH(n);let e=n[De];for(let t=xt;t<e.bindingStartIndex;t++)if(Li(n[t])){let r=n[t];qy(r)}else Zr(n[t])&&fy(n[t])}function HO(n){let e=n._views;for(let t of e){let r=P8(t);r!==null&&r[fr]!==null&&(Zr(r)?fy(r):qy(r))}}function _H(n,e,t,r){n!==null&&(t.cleanup(e),qy(n.lContainer),HO(r))}function vH(n,e){let t=[];for(let r of e)for(let i=0;i<(r[qk]??1);i++){let s={data:r,firstChild:null};r[ay]>0&&(s.firstChild=n,n=Hy(r[ay],n)),t.push(s)}return[n,t]}var qO=()=>null;function wH(n,e){let t=n[Ss];return!e||t===null||t.length===0?null:t[0].data[Q9]===e?t.shift():(zO(n),null)}function EH(){qO=wH}function RI(n,e){return qO(n,e)}var IH=class{},GO=class{},PI=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Qn(e)}.`)}},Gy=class{static NULL=new PI},gu=class{},Ps=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>bH()}return n})();function bH(){let n=nt(),e=er(),t=xi(e.index,n);return(Zr(t)?t:n)[ft]}var CH=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var QE={},uu=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ey(r);let i=this.injector.get(e,QE,r);return i!==QE||t===QE?i:this.parentInjector.get(e,t,r)}};function ZP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=rI(i,a);else if(s==2){let c=a,u=e[++o];r=rI(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function te(n,e=Fe.Default){let t=nt();if(t===null)return ue(n,e);let r=er();return Ck(r,t,Un(n),e)}function WO(){let n="invalid";throw new Error(n)}function KO(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,c=null,u=null,h=SH(o);h===null?a=o:[a,c,u]=h,MH(n,e,t,a,s,c,u)}s!==null&&r!==null&&TH(t,r,s)}function TH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}function SH(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&Pi(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,AH(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function AH(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function DH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function MH(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let I=0;I<a;I++){let T=r[I];!c&&Pi(T)&&(c=!0,DH(n,t,I)),gI(ny(t,e),n,T.type)}NH(t,n.data.length,a);for(let I=0;I<a;I++){let T=r[I];T.providersResolver&&T.providersResolver(T)}let u=!1,h=!1,g=wO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let T=r[I];if(t.mergedAttrs=Wh(t.mergedAttrs,T.hostAttrs),PH(n,t,e,g,T),OH(g,T,i),o!==null&&o.has(T)){let[L,O]=o.get(T);t.directiveToIndex.set(T.type,[g,L+t.directiveStart,O+t.directiveStart])}else(s===null||!s.has(T))&&t.directiveToIndex.set(T.type,g);T.contentQueries!==null&&(t.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(t.flags|=64);let k=T.type.prototype;!u&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}RH(n,t,s)}function RH(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))XP(0,e,i,r),XP(1,e,i,r),tx(e,r,!1);else{let s=t.get(i);ex(0,e,s,r),ex(1,e,s,r),tx(e,r,!0)}}}function XP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),QO(e,s)}}function ex(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),QO(e,o)}}function QO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function tx(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||mb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){o??=[],o.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function PH(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ac(i.type,!0)),o=new dc(s,Pi(i),te);n.blueprint[r]=o,t[r]=o,xH(n,e,r,wO(n,t,i.hostVars,Mr),i)}function xH(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;kH(o)!=a&&o.push(a),o.push(t,r,s)}}function kH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function OH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pi(e)&&(t[""]=n)}}function NH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function YO(n,e,t,r,i,s,o,a){let c=e.consts,u=Zm(c,o),h=zy(e,n,2,r,u);return s&&KO(e,t,h,Zm(c,a),i),h.mergedAttrs=Wh(h.mergedAttrs,h.attrs),h.attrs!==null&&ZP(h,h.attrs,!1),h.mergedAttrs!==null&&ZP(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function JO(n,e){gk(n,e),Hx(e)&&n.queries.elementEnd(e)}var py=class extends Gy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zo(e);return new mu(t,this.ngModule)}};function LH(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Vy.SignalBased)!==0};return i&&(s.transform=i),s})}function FH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function VH(n,e,t){let r=e instanceof an?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new uu(t,r):t}function UH(n){let e=n.get(gu,null);if(e===null)throw new ie(407,!1);let t=n.get(CH,null),r=n.get(hc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function BH(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return yb(e,t,t==="svg"?Vz:t==="math"?Uz:null)}var mu=class extends GO{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=FH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=s$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){ct(22);let s=qe(null);try{let o=this.componentDef,a=r?["ng-version","19.2.15"]:o$(this.componentDef.selectors[0]),c=vb(0,null,null,1,0,null,null,null,null,[a],null),u=VH(o,i||this.ngModule,e),h=UH(u),g=h.rendererFactory.createRenderer(null,o),I=r?f$(g,r,o.encapsulation,u):BH(o,g),T=wb(null,c,null,512|vO(o),null,null,h,g,u,null,iO(I,u,!0));T[xt]=I,nb(T);let k=null;try{let L=YO(xt,c,T,"#host",()=>[this.componentDef],!0,0);I&&(_O(g,I,L),tf(I,T)),Ib(c,T,L),aO(c,L,T),JO(c,L),t!==void 0&&jH(L,this.ngContentSelectors,t),k=xi(L.index,T),T[Yn]=k[Yn],Sb(c,T,null)}catch(L){throw k!==null&&EI(k),EI(T),L}finally{ct(23),rb()}return new xI(this.componentType,T)}finally{qe(s)}}},xI=class extends IH{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Ty(t[De],xt),this.location=Ry(this._tNode,t),this.instance=xi(this._tNode.index,t)[Yn],this.hostView=this.changeDetectorRef=new Kh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Tb(r,i[De],i,e,t);this.previousInputValues.set(e,t);let o=xi(r.index,i);By(o,1)}get injector(){return new oc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Cu=(()=>{class n{static __NG_ELEMENT_ID__=zH}return n})();function zH(){let n=er();return HH(n,nt())}var $H=Cu,ZO=class extends $H{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ry(this._hostTNode,this._hostLView)}get injector(){return new oc(this._hostTNode,this._hostLView)}get parentInjector(){let e=sb(this._hostTNode,this._hostLView);if(_k(e)){let t=ey(e,this._hostLView),r=Xm(e),i=t[De].data[r+8];return new oc(i,t)}else return new oc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=nx(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=RI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,uy(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!Oz(e),a;if(o)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef}let c=o?e:new mu(zo(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let L=(o?u:this.parentInjector).get(an,null);L&&(s=L)}let h=zo(c.componentType??{}),g=RI(this._lContainer,h?.id??null),I=g?.firstChild??null,T=c.create(u,i,I,s);return this.insertImpl(T.hostView,a,uy(this._hostTNode,g)),T}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(jz(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pn],u=new ZO(c,c[Xn],c[pn]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return kb(o,i,s,r),e.attachToViewContainerRef(),xx(YE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=nx(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hy(this._lContainer,t);r&&(Gm(YE(this._lContainer),t),Rb(r[De],r))}detach(e){let t=this._adjustIndex(e,-1),r=hy(this._lContainer,t);return r&&Gm(YE(this._lContainer),t)!=null?new Kh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function nx(n){return n[Ym]}function YE(n){return n[Ym]||(n[Ym]=[])}function HH(n,e){let t,r=e[n.index];return Li(r)?t=r:(t=UO(r,e,null,n),e[n.index]=t,Eb(e,t)),XO(t,e,n,r),new ZO(t,n,e)}function qH(n,e){let t=n[ft],r=t.createComment(""),i=ti(e,n),s=t.parentNode(i);return ly(t,s,r,t.nextSibling(i),!1),r}var XO=eN,Ob=()=>!1;function GH(n,e,t){return Ob(n,e,t)}function eN(n,e,t,r){if(n[As])return;let i;t.type&8?i=ei(r):i=qH(e,t),n[As]=i}function WH(n,e,t){if(n[As]&&n[Ss])return!0;let r=t[Xr],i=e.index-xt;if(!r||V9(e)||rf(r,i))return!1;let o=TI(r,i),a=r.data[db]?.[i],[c,u]=vH(o,a);return n[As]=c,n[Ss]=u,!0}function KH(n,e,t,r){Ob(n,t,e)||eN(n,e,t,r)}function QH(){XO=KH,Ob=WH}var yu=class{},Nb=class{};var kI=class extends yu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new py(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Nx(e);this._bootstrapComponents=dO(s.bootstrap),this._r3Injector=Ak(e,t,[{provide:yu,useValue:this},{provide:Gy,useValue:this.componentFactoryResolver},...r],Qn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},OI=class extends Nb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new kI(this.moduleType,e,[])}};var gy=class extends yu{injector;componentFactoryResolver=new py(this);instance=null;constructor(e){super();let t=new Hh([...e.providers,{provide:yu,useValue:this},{provide:Gy,useValue:this.componentFactoryResolver}],e.parent||ZI(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tu(n,e,t=null){return new gy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var YH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=YI(!1,t.type),i=r.length>0?Tu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(ue(an))})}return n})();function wt(n){return Yh(()=>{let e=tN(n),t=fe($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(YH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Oi.Emulated,styles:n.styles||Kn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ui("NgStandalone"),nN(t);let r=n.dependencies;return t.directiveDefs=rx(r,!1),t.pipeDefs=rx(r,!0),t.id=tq(t),t})}function JH(n){return zo(n)||Lx(n)}function ZH(n){return n!==null}function Rr(n){return Yh(()=>({type:n.type,bootstrap:n.bootstrap||Kn,declarations:n.declarations||Kn,imports:n.imports||Kn,exports:n.exports||Kn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function XH(n,e){if(n==null)return cc;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Vy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function eq(n){if(n==null)return cc;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Et(n){return Yh(()=>{let e=tN(n);return nN(e),e})}function Lb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function tN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||cc,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XH(n.inputs,e),outputs:eq(n.outputs),debugInfo:null}}function nN(n){n.features?.forEach(e=>e(n))}function rx(n,e){if(!n)return null;let t=e?Fx:JH;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ZH)}function tq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nq(n){return Object.getPrototypeOf(n.prototype).constructor}function Pr(n){let e=nq(n.type),t=!0,r=[n];for(;e;){let i;if(Pi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=JE(n.inputs),o.declaredInputs=JE(n.declaredInputs),o.outputs=JE(n.outputs);let a=i.hostBindings;a&&aq(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&sq(n,c),u&&oq(n,u),rq(n,i),rz(n.outputs,i.outputs),Pi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Pr&&(t=!1)}}e=Object.getPrototypeOf(e)}iq(r)}function rq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function iq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wh(i.hostAttrs,t=Wh(t,i.hostAttrs))}}function JE(n){return n===cc?{}:n===Kn?[]:n}function sq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function oq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function aq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function rN(n){return lq(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function cq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function lq(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uq(n,e,t){return n[e]=t}function Ms(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dq(n,e,t,r){let i=Ms(n,e,t);return Ms(n,e+1,r)||i}function hq(n,e,t,r,i,s,o,a,c){let u=e.consts,h=zy(e,n,4,o||null,a||null);nk()&&KO(e,t,h,Zm(u,c),TO),h.mergedAttrs=Wh(h.mergedAttrs,h.attrs),gk(e,h);let g=h.tView=vb(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function iN(n,e,t,r,i,s,o,a,c,u){let h=t+xt,g=e.firstCreatePass?hq(h,e,n,r,i,s,o,a,c):e.data[h];Xh(g,!1);let I=sN(e,n,g,t);ib()&&Pb(e,n,I,g),tf(I,n);let T=UO(I,n,I,g);return n[h]=T,Eb(n,T),GH(T,g,n),XI(g)&&Ib(e,n,g),c!=null&&bO(n,g,u),g}function ae(n,e,t,r,i,s,o,a){let c=nt(),u=In(),h=Zm(u.consts,s);return iN(c,u,n,e,t,r,i,h,o,a),ae}var sN=oN;function oN(n,e,t,r){return qo(!0),e[ft].createComment("")}function fq(n,e,t,r){let i=e[Xr],s=!i||wu()||_c(t)||rf(i,r);if(qo(s),s)return oN(n,e);let o=i.data[K9]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=$y(i,n,e,t);Ly(i,r,a);let c=pb(i,r);return Hy(c,a)}function pq(){sN=fq}var gq=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,s){if(!this.cachedInjectors.has(t)){let o=i.length>0?Tu(i,r,s):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var mq=new J("");function ZE(n,e,t){return n.get(gq).getOrCreateInjector(e,n,t,"")}function yq(n,e,t){if(n instanceof uu){let i=n.injector,s=n.parentInjector,o=ZE(s,e,t);return new uu(i,o)}let r=n.get(an);if(r!==n){let i=ZE(r,e,t);return new uu(n,i)}return ZE(n,e,t)}function ou(n,e,t,r=!1){let i=t[pn],s=i[De];if(gc(i))return;let o=nf(i,e),a=o[ky],c=o[d8];if(!(c!==null&&n<c)&&ix(a,n)&&ix(o[c8]??-1,n)){let u=Oy(s,e),g=!r&&!0&&(m8(u)!==null||HP(u,on.Loading)!==null||HP(u,on.Placeholder))?wq:vq;try{g(n,o,t,e,i)}catch(I){Cb(i,I)}}}function _q(n,e){let t=n[Ss]?.findIndex(i=>i.data[Z9]===e[ky])??-1;return{dehydratedView:t>-1?n[Ss][t]:null,dehydratedViewIx:t}}function vq(n,e,t,r,i){ct(20);let s=g8(n,i,r);if(s!==null){e[ky]=n;let o=i[De],a=s+xt,c=Ty(o,a),u=0;X$(t,u);let h;if(n===on.Complete){let k=Oy(o,r),L=k.providers;L&&L.length>0&&(h=yq(i[Ri],k,L))}let{dehydratedView:g,dehydratedViewIx:I}=_q(t,e),T=Ab(i,c,null,{injector:h,dehydratedView:g});if(kb(t,T,u,uy(c,g)),By(T,2),I>-1&&t[Ss]?.splice(I,1),(n===on.Complete||n===on.Error)&&Array.isArray(e[lu])){for(let k of e[lu])k();e[lu]=null}}ct(21)}function ix(n,e){return n<e}function sx(n,e,t){n.loadingPromise.then(()=>{n.loadingState===dr.COMPLETE?ou(on.Complete,e,t):n.loadingState===dr.FAILED&&ou(on.Error,e,t)})}var wq=null;var Fb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var aN=new J("");var Eq=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new NI})}return n})(),NI=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Wo(n){return!!n&&typeof n.then=="function"}function Vb(n){return!!n&&typeof n.subscribe=="function"}var cN=new J("");function Ub(n){return En([{provide:cN,multi:!0,useValue:n}])}var lN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(cN,{optional:!0})??[];injector=j(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=gn(this.injector,i);if(Wo(s))t.push(s);else if(Vb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ko=new J("");function Iq(){dE(()=>{throw new ie(600,!1)})}function bq(n){return n.isBoundToModule}var Cq=10;var Zn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(P9);afterRenderManager=j(Jk);zonelessEnabled=j(My);rootEffectScheduler=j(Eq);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Pt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=j(Fi).hasPendingTasks.pipe(me(t=>!t));constructor(){j(Iu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(an);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tt.NULL){ct(10);let s=t instanceof GO;if(!this._injector.get(lN).done){let T="";throw new ie(405,T)}let a;s?a=t:a=this._injector.get(Gy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=bq(a)?void 0:this._injector.get(yu),u=r||a.selector,h=a.create(i,[],u,c),g=h.location.nativeElement,I=h.injector.get(aN,null);return I?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),Um(this.components,h),I?.unregisterApplication(g)}),this._loadComponent(h),ct(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ct(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ie(101,!1);let t=qe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,qe(t),this.afterTick.next(),ct(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gu,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Cq;)ct(14),this.synchronizeOnce(),ct(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Tq(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Sy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Um(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ko,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Um(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Um(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Tq(n,e,t,r){if(!t&&!Sy(n))return;NO(n,e,t&&!r?0:1)}function Sq(n,e,t){let r=e[Ri],i=e[De];if(n.loadingState!==dr.NOT_STARTED)return n.loadingPromise??Promise.resolve();let s=nf(e,t),o=y8(i,n);n.loadingState=dr.IN_PROGRESS,Vm(1,s);let a=n.dependencyResolverFn,c=r.get(ef).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let h=!1,g=[],I=[];for(let T of u)if(T.status==="fulfilled"){let k=T.value,L=zo(k)||Lx(k);if(L)g.push(L);else{let O=Fx(k);O&&I.push(O)}}else{h=!0;break}if(h){if(n.loadingState=dr.FAILED,n.errorTmplIndex===null){let T="",k=new ie(-750,!1);Cb(e,k)}}else{n.loadingState=dr.COMPLETE;let T=o.tView;if(g.length>0){T.directiveRegistry=qP(T.directiveRegistry,g);let k=g.map(O=>O.type),L=YI(!1,...k);n.providers=L}I.length>0&&(T.pipeRegistry=qP(T.pipeRegistry,I))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=dr.COMPLETE,c()}),n.loadingPromise)}function Aq(n,e){return e[Ri].get(mq,null,{optional:!0})?.behavior!==Zk.Manual}function Dq(n,e,t){let r=e[De],i=e[t.index];if(!Aq(n,e))return;let s=nf(e,t),o=Oy(r,t);switch(f8(s),o.loadingState){case dr.NOT_STARTED:ou(on.Loading,t,i),Sq(o,e,t),o.loadingState===dr.IN_PROGRESS&&sx(o,t,i);break;case dr.IN_PROGRESS:ou(on.Loading,t,i),sx(o,t,i);break;case dr.COMPLETE:ou(on.Complete,t,i);break;case dr.FAILED:ou(on.Error,t,i);break;default:}}function Mq(n,e,t){return S(this,null,function*(){let r=n.get(fb);if(r.hydrating.has(e))return;let{parentBlockPromise:s,hydrationQueue:o}=F8(e,n);if(o.length===0)return;s!==null&&o.shift(),xq(r,o),s!==null&&(yield s);let a=o[0];r.has(a)?yield ox(n,o,t):r.awaitParentBlock(a,()=>S(null,null,function*(){return yield ox(n,o,t)}))})}function ox(n,e,t){return S(this,null,function*(){let r=n.get(fb),i=r.hydrating,s=n.get(Fi),o=s.add();for(let c=0;c<e.length;c++){let u=e[c],h=r.get(u);if(h!=null){if(yield Oq(h),yield kq(n),Rq(h)){yH(h),ax(e.slice(c),r);break}i.get(u).resolve()}else{Pq(c,e,r),ax(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,s.remove(o),t&&t(e),_H(r.get(a),e,r,n.get(Zn))})}function Rq(n){return nf(n.lView,n.tNode)[ky]===on.Error}function Pq(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&qy(i.lContainer)}function ax(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function xq(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function kq(n){return new Promise(e=>xy(e,{injector:n}))}function Oq(n){return S(this,null,function*(){let{tNode:e,lView:t}=n,r=nf(t,e);return new Promise(i=>{Nq(r,i),Dq(2,t,e)})})}function Nq(n,e){Array.isArray(n[lu])||(n[lu]=[]),n[lu].push(e)}function sf(n,e,t,r){let i=nt(),s=Ay();if(Ms(i,s,e)){let o=In(),a=Dy();I$(a,i,n,e,t,r)}return sf}function uN(n,e,t,r){return Ms(n,Ay(),t)?e+du(t)+r:Mr}function Lq(n,e,t,r,i,s){let o=Xz(),a=dq(n,o,t,i);return tb(2),a?e+du(t)+r+du(i)+s:Mr}function km(n,e){return n<<17|e<<2}function fc(n){return n>>17&32767}function Fq(n){return(n&2)==2}function Vq(n,e){return n&131071|e<<17}function LI(n){return n|2}function _u(n){return(n&131068)>>2}function XE(n,e){return n&-131069|e<<2}function Uq(n){return(n&1)===1}function FI(n){return n|1}function Bq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=fc(o),c=_u(o);n[r]=t;let u=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Jh(g,h)>0)&&(u=!0)}else h=t;if(i)if(c!==0){let I=fc(n[a+1]);n[r+1]=km(I,a),I!==0&&(n[I+1]=XE(n[I+1],r)),n[a+1]=Vq(n[a+1],r)}else n[r+1]=km(a,0),a!==0&&(n[a+1]=XE(n[a+1],r)),a=r;else n[r+1]=km(c,0),a===0?a=r:n[c+1]=XE(n[c+1],r),c=r;u&&(n[r+1]=LI(n[r+1])),cx(n,h,r,!0),cx(n,h,r,!1),jq(e,h,n,r,s),o=km(a,c),s?e.classBindings=o:e.styleBindings=o}function jq(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Jh(s,e)>=0&&(t[r+1]=FI(t[r+1]))}function cx(n,e,t,r){let i=n[t+1],s=e===null,o=r?fc(i):_u(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];zq(c,e)&&(a=!0,n[o+1]=r?FI(u):LI(u)),o=r?fc(u):_u(u)}a&&(n[t+1]=r?LI(i):FI(i))}function zq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Jh(n,e)>=0:!1}var Yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $q(n){return n.substring(Yr.key,Yr.keyEnd)}function Hq(n){return qq(n),dN(n,hN(n,0,Yr.textEnd))}function dN(n,e){let t=Yr.textEnd;return t===e?-1:(e=Yr.keyEnd=Gq(n,Yr.key=e,t),hN(n,e,t))}function qq(n){Yr.key=0,Yr.keyEnd=0,Yr.value=0,Yr.valueEnd=0,Yr.textEnd=n.length}function hN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Gq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function z(n,e,t){let r=nt(),i=Ay();if(Ms(r,i,e)){let s=In(),o=Dy();bb(s,o,r,n,e,r[ft],t,!1)}return z}function VI(n,e,t,r,i){Tb(e,n,t,i?"class":"style",r)}function vc(n,e){return Kq(n,e,null,!0),vc}function Qo(n){Qq(tG,Wq,n,!0)}function Wq(n,e){for(let t=Hq(e);t>=0;t=dN(e,t))QI(n,$q(e),!0)}function Kq(n,e,t,r){let i=nt(),s=In(),o=tb(2);if(s.firstUpdatePass&&pN(s,n,o,r),e!==Mr&&Ms(i,o,e)){let a=s.data[Ho()];gN(s,a,i,i[ft],n,i[o+1]=rG(e,t),r,o)}}function Qq(n,e,t,r){let i=In(),s=tb(2);i.firstUpdatePass&&pN(i,null,s,r);let o=nt();if(t!==Mr&&Ms(o,s,t)){let a=i.data[Ho()];if(mN(a,r)&&!fN(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=rI(c,t||"")),VI(i,a,o,t,r)}else nG(i,a,o,o[ft],o[s+1],o[s+1]=eG(n,e,t),r,s)}}function fN(n,e){return e>=n.expandoStartIndex}function pN(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ho()],o=fN(n,t);mN(s,r)&&e===null&&!o&&(e=!1),e=Yq(i,s,e,r),Bq(i,s,e,t,o,r)}}function Yq(n,e,t,r){let i=i9(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=eI(null,n,e,t,r),t=Qh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=eI(i,n,e,t,r),s===null){let c=Jq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=eI(null,n,e,c[1],r),c=Qh(c,e.attrs,r),Zq(n,e,r,c))}else s=Xq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Jq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_u(r)!==0)return n[fc(r)]}function Zq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fc(i)]=r}function Xq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Qh(r,o,t)}return Qh(r,e.attrs,t)}function eI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Qh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Qh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),QI(n,o,t?!0:e[++s]))}return n===void 0?null:n}function eG(n,e,t){if(t==null||t==="")return Kn;let r=[],i=bu(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function tG(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&QI(n,r,t)}function nG(n,e,t,r,i,s,o,a){i===Mr&&(i=Kn);let c=0,u=0,h=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;h!==null||g!==null;){let I=c<i.length?i[c+1]:void 0,T=u<s.length?s[u+1]:void 0,k=null,L;h===g?(c+=2,u+=2,I!==T&&(k=g,L=T)):g===null||h!==null&&h<g?(c+=2,k=h):(u+=2,k=g,L=T),k!==null&&gN(n,e,t,r,k,L,o,a),h=c<i.length?i[c]:null,g=u<s.length?s[u]:null}}function gN(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],h=Uq(u)?lx(c,e,t,i,_u(u),o):void 0;if(!my(h)){my(s)||Fq(u)&&(s=lx(c,null,t,i,a,o));let g=Qx(Ho(),t);U$(r,o,g,i,s)}}function lx(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),h=u?c[1]:c,g=h===null,I=t[i+1];I===Mr&&(I=g?Kn:void 0);let T=g?BE(I,r):h===r?I:void 0;if(u&&!my(T)&&(T=BE(c,r)),my(T)&&(a=T,o))return a;let k=n[i+1];i=o?fc(k):_u(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=BE(c,r))}return a}function my(n){return n!==void 0}function rG(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Qn(bu(n)))),n}function mN(n,e){return(n.flags&(e?8:16))!==0}function m(n,e,t,r){let i=nt(),s=In(),o=xt+n,a=i[ft],c=s.firstCreatePass?YO(o,s,i,e,TO,nk(),t,r):s.data[o],u=yN(s,i,c,a,e,n);i[o]=u;let h=XI(c);return Xh(c,!0),_O(a,u,c),!_c(c)&&ib()&&Pb(s,i,u,c),(Hz()===0||h)&&tf(u,i),qz(),h&&(Ib(s,i,c),aO(s,c,i)),r!==null&&bO(i,c),m}function y(){let n=er();ik()?sk():(n=n.parent,Xh(n,!1));let e=n;Wz(e)&&Qz(),Gz();let t=In();return t.firstCreatePass&&JO(t,e),e.classesWithoutHost!=null&&l9(e)&&VI(t,e,nt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&u9(e)&&VI(t,e,nt(),e.stylesWithoutHost,!1),y}function pt(n,e,t,r){return m(n,e,t,r),y(),pt}var yN=(n,e,t,r,i,s)=>(qo(!0),yb(r,i,fk()));function iG(n,e,t,r,i,s){let o=e[Xr],a=!o||wu()||_c(t)||rf(o,s);if(qo(a),a)return yb(r,i,fk());let c=$y(o,n,e,t);return sO(o,s)&&Ly(o,s,c.nextSibling),o&&(Nk(t)||Lk(c))&&pc(t)&&(Kz(t),yO(c)),c}function sG(){yN=iG}var oG=(n,e,t,r)=>(qo(!0),gO(e[ft],""));function aG(n,e,t,r){let i,s=e[Xr],o=!s||wu()||rf(s,r)||_c(t);if(qo(o),o)return gO(e[ft],"");let a=$y(s,n,e,t),c=N8(s,r);return Ly(s,r,a),i=Hy(c,a),i}function cG(){oG=aG}function ze(){return nt()}var yy="en-US";var lG=yy;function uG(n){typeof n=="string"&&(lG=n.toLowerCase().replace(/_/g,"-"))}function ux(n,e,t){return function r(i){if(i===Function)return t;let s=pc(n)?xi(n.index,e):e;By(s,5);let o=e[Yn],a=dx(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=dx(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function dx(n,e,t,r){let i=qe(null);try{return ct(6,e,t),t(r)!==!1}catch(s){return dG(n,s),!1}finally{ct(7,e,t),qe(i)}}function dG(n,e){let t=n[Ri],r=t?t.get(ki,null):null;r&&r.handleError(e)}function hx(n,e,t,r,i,s){let o=e[t],a=e[De],u=a.data[t].outputs[r],h=o[u],g=a.firstCreatePass?tk(a):null,I=ek(e),T=h.subscribe(s),k=I.length;I.push(s,T),g&&g.push(i,n.index,k,-(k+1))}function de(n,e,t,r){let i=nt(),s=In(),o=er();return _N(s,i,i[ft],o,n,e,r),de}function hG(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Km],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function _N(n,e,t,r,i,s,o){let a=XI(r),u=n.firstCreatePass?tk(n):null,h=ek(e),g=!0;if(r.type&3||o){let I=ti(r,e),T=o?o(I):I,k=h.length,L=o?q=>o(ei(q[r.index])):r.index,O=null;if(!o&&a&&(O=hG(n,e,i,r.index)),O!==null){let q=O.__ngLastListenerFn__||O;q.__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,g=!1}else{s=ux(r,e,s),b8(e,T,i,s);let q=t.listen(T,i,s);h.push(s,q),u&&u.push(i,L,k,k+1)}}else s=ux(r,e,s);if(g){let I=r.outputs?.[i],T=r.hostDirectiveOutputs?.[i];if(T&&T.length)for(let k=0;k<T.length;k+=2){let L=T[k],O=T[k+1];hx(r,e,L,O,i,s)}if(I&&I.length)for(let k of I)hx(r,e,k,i,i,s)}}function G(n=1){return o9(n)}function fG(n,e){let t=null,r=e$(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?fO(n,s,!0):r$(r,s))return i}return t}function vN(n){let e=nt()[Jn][Xn];if(!e.projection){let t=n?n.length:1,r=e.projection=Ez(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?fG(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function wN(n,e=0,t,r,i,s){let o=nt(),a=In(),c=r?n+1:null;c!==null&&iN(o,a,c,r,i,s,null,t);let u=zy(a,xt+n,16,null,t||null);u.projection===null&&(u.projection=e),sk();let g=!o[Xr]||wu();o[Jn][Xn].projection[u.projection]===null&&c!==null?pG(o,a,c):g&&!_c(u)&&F$(a,o,u)}function pG(n,e,t){let r=xt+t,i=e.data[r],s=n[r],o=RI(s,i.tView.ssrId),a=Ab(n,i,void 0,{dehydratedView:o});kb(s,a,0,uy(i,o))}function Bb(n,e,t,r,i){let s=nt(),o=uN(s,e,t,r);if(o!==Mr){let a=In(),c=Dy();bb(a,c,s,n,o,s[ft],i,!1)}return Bb}function of(n){let e=Jz();return Yx(e,xt+n)}function v(n,e=""){let t=nt(),r=In(),i=n+xt,s=r.firstCreatePass?zy(r,i,1,e,null):r.data[i],o=EN(r,t,s,e,n);t[i]=o,ib()&&Pb(r,t,o,s),Xh(s,!1)}var EN=(n,e,t,r,i)=>(qo(!0),pO(e[ft],r));function gG(n,e,t,r,i){let s=e[Xr],o=!s||wu()||_c(t)||rf(s,i);return qo(o),o?pO(e[ft],r):$y(s,n,e,t)}function mG(){EN=gG}function yt(n){return Ve("",n,""),yt}function Ve(n,e,t){let r=nt(),i=uN(r,n,e,t);return i!==Mr&&IN(r,Ho(),i),Ve}function mr(n,e,t,r,i){let s=nt(),o=Lq(s,n,e,t,r,i);return o!==Mr&&IN(s,Ho(),o),mr}function IN(n,e,t){let r=Qx(e,n);a$(n[ft],r,t)}function Te(n,e,t){Ok(e)&&(e=e());let r=nt(),i=Ay();if(Ms(r,i,e)){let s=In(),o=Dy();bb(s,o,r,n,e,r[ft],t,!1)}return Te}function Ae(n,e){let t=Ok(n);return t&&n.set(e),t}function Se(n,e){let t=nt(),r=In(),i=er();return _N(r,t,t[ft],i,n,e),Se}function yG(n,e,t){let r=In();if(r.firstCreatePass){let i=Pi(n);UI(t,r.data,r.blueprint,i,!0),UI(e,r.data,r.blueprint,i,!1)}}function UI(n,e,t,r,i){if(n=Un(n),Array.isArray(n))for(let s=0;s<n.length;s++)UI(n[s],e,t,r,i);else{let s=In(),o=nt(),a=er(),c=hu(n)?n:Un(n.provide),u=Bx(n),h=a.providerIndexes&1048575,g=a.directiveStart,I=a.providerIndexes>>20;if(hu(n)||!n.multi){let T=new dc(u,i,te),k=nI(c,e,i?h:h+I,g);k===-1?(gI(ny(a,o),s,c),tI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),o.push(T)):(t[k]=T,o[k]=T)}else{let T=nI(c,e,h+I,g),k=nI(c,e,h,h+I),L=T>=0&&t[T],O=k>=0&&t[k];if(i&&!O||!i&&!L){gI(ny(a,o),s,c);let q=wG(i?vG:_G,t.length,i,r,u);!i&&O&&(t[k].providerFactory=q),tI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),o.push(q)}else{let q=bN(t[i?k:T],u,!i&&r);tI(s,n,T>-1?T:k,q)}!i&&r&&O&&t[k].componentProviders++}}}function tI(n,e,t,r){let i=hu(e),s=Dz(e);if(i||s){let c=(s?Un(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function bN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function _G(n,e,t,r,i){return BI(this.multi,[])}function vG(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ry(r,r[De],this.providerFactory.index,i);o=c.slice(0,a),BI(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],BI(s,o);return o}function BI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wG(n,e,t,r,i){let s=new dc(n,t,te);return s.multi=[],s.index=e,s.componentProviders=0,bN(s,i,r&&!t),s}function Bi(n,e=[]){return t=>{t.providersResolver=(r,i)=>yG(r,i?i(n):n,e)}}function EG(n,e){let t=n[e];return t===Mr?void 0:t}function IG(n,e,t,r,i,s){let o=e+t;return Ms(n,o,i)?uq(n,o+1,s?r.call(s,i):r(i)):EG(n,o+1)}function ni(n,e){let t=In(),r,i=n+xt;t.firstCreatePass?(r=bG(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=ac(r.type,!0)),o,a=Wn(te);try{let c=ty(!1),u=s();return ty(c),Bz(t,nt(),i,u),u}finally{Wn(a)}}function bG(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ri(n,e,t){let r=n+xt,i=nt(),s=Yx(i,r);return CG(i,r)?IG(i,Zz(),e,s.transform,t,s):s.transform(t)}function CG(n,e){return n[De].data[e].pure}function CN(n,e){return jO(n,e)}var $o=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},TN=new $o("19.2.15"),jI=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},SN=(()=>{class n{compileModuleSync(t){return new OI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Nx(t),s=dO(i.declarations).reduce((o,a)=>{let c=zo(a);return c&&o.push(new mu(c)),o},[]);return new jI(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TG=(()=>{class n{zone=j(Oe);changeDetectionScheduler=j(hc);applicationRef=j(Zn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SG=new J("",{factory:()=>!1});function AN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(fe($({},MN()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:jo,multi:!0,useFactory:()=>{let r=j(TG,{optional:!0});return()=>r.initialize()}},{provide:jo,multi:!0,useFactory:()=>{let r=j(AG);return()=>{r.initialize()}}},e===!0?{provide:Mk,useValue:!0}:[],{provide:Rk,useValue:t??Dk}]}function DN(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=AN({ngZoneFactory:()=>{let i=MN(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ui("NgZone_CoalesceEvent"),new Oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return En([{provide:SG,useValue:!0},{provide:My,useValue:!1},r])}function MN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var AG=(()=>{class n{subscription=new Mt;initialized=!1;zone=j(Oe);pendingTasks=j(Fi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DG=(()=>{class n{appRef=j(Zn);taskService=j(Fi);ngZone=j(Oe);zonelessEnabled=j(My);tracing=j(Iu,{optional:!0});disableScheduling=j(Mk,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(Rk,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wI||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?LP:Pk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,LP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MG(){return typeof $localize<"u"&&$localize.locale||yy}var jb=new J("",{providedIn:"root",factory:()=>j(jb,Fe.Optional|Fe.SkipSelf)||MG()});var zI=new J(""),RG=new J("");function Bh(n){return!n.moduleRef}function PG(n){let e=Bh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{Bh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ki,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Bh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(zI);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(zI);o.add(s),n.moduleRef.onDestroy(()=>{Um(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return kG(r,t,()=>{let s=e.get(lN);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(jb,yy);if(uG(o||yy),!e.get(RG,!0))return Bh(n)?e.get(Zn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Bh(n)){let c=e.get(Zn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return xG(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function xG(n,e){let t=n.injector.get(Zn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}function kG(n,e,t){try{let r=t();return Wo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Bm=null;function OG(n=[],e){return Tt.create({name:e,providers:[{provide:Iy,useValue:"platform"},{provide:zI,useValue:new Set([()=>Bm=null])},...n]})}function NG(n=[]){if(Bm)return Bm;let e=OG(n);return Bm=e,Iq(),LG(e),e}function LG(n){let e=n.get(lb,null);gn(n,()=>{e?.forEach(t=>t())})}function zb(){return!1}var Yo=(()=>{class n{static __NG_ELEMENT_ID__=FG}return n})();function FG(n){return VG(er(),nt(),(n&16)===16)}function VG(n,e,t){if(pc(n)&&!t){let r=xi(n.index,e);return new Kh(r,r)}else if(n.type&175){let r=e[Jn];return new Kh(r,e)}return null}var $I=class{constructor(){}supports(e){return rN(e)}create(e){return new HI(e)}},UG=(n,e)=>e,HI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||UG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<fx(r,i,s)?t:r,a=fx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,h=c-i;if(u!=h){for(let I=0;I<u;I++){let T=I<s.length?s[I]:s[I]=0,k=T+I;h<=k&&k<u&&(s[I]=T+1)}let g=o.previousIndex;s[g]=h-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!rN(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,cq(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new qI(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _y),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _y),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},qI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},GI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_y=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new GI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function px(){return new $b([new $I])}var $b=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:px});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||px()),deps:[[n,new wz,new cn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function RN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ct(8);try{let s=i?.injector??NG(r),o=[AN({}),{provide:hc,useExisting:DG},...t||[]],a=new gy({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return PG({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ct(9)}}var Om=new WeakSet,gx="",jm=[];function mx(n){return n.get(Qk,e8)}function PN(){let n=[{provide:Qk,useFactory:()=>{let e=!0;{let t=j(Cs);e=!!window._ejsas?.[t]}return e&&Ui("NgEventReplay"),e}}];return n.push({provide:jo,useValue:()=>{let e=j(Zn),{injector:t}=e;if(!Om.has(e)){let r=j(jP);if(mx(t)){C8();let i=t.get(Cs),s=I8(i,(o,a,c)=>{o.nodeType===Node.ELEMENT_NODE&&(_8(o,a,c),v8(o,r))});e.onDestroy(s)}}},multi:!0},{provide:Ko,useFactory:()=>{let e=j(Zn),{injector:t}=e;return()=>{!mx(t)||Om.has(e)||(Om.add(e),e.onDestroy(()=>{Om.delete(e);{let r=t.get(Cs);UE(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(E8);BG(r,t);let i=t.get(jP);i.get(gx)?.forEach(w8),i.delete(gx);let s=r.instance;O8(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()}))}},multi:!0}),n}var BG=(n,e)=>{let t=e.get(Cs),r=window._ejsas[t],i=n.instance=new wP(new Dm(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let s=EP(t);i.replayEarlyEventInfos(s),UE(t);let o=new Mm(a=>{jG(e,a,a.currentTarget)});vP(i,o)};function jG(n,e,t){let r=(t&&t.getAttribute(Ny))??"";/d\d+/.test(r)?zG(r,n,e,t):e.eventPhase===VE.REPLAY&&eO(e,t)}function zG(n,e,t,r){jm.push({event:t,currentTarget:r}),Mq(e,n,$G)}function $G(n){let e=[...jm],t=new Set(n);jm=[];for(let{event:r,currentTarget:i}of e){let s=i.getAttribute(Ny);t.has(s)?eO(r,i):jm.push({event:r,currentTarget:i})}}var yx=!1;function HG(){yx||(yx=!0,R8(),sG(),mG(),cG(),pq(),QH(),EH(),m$())}function qG(n){return n.whenStable()}function xN(){let n=[{provide:Pm,useFactory:()=>{let e=!0;return e=!!j(Eu,{optional:!0})?.get(nO,null),e&&Ui("NgHydration"),e}},{provide:jo,useValue:()=>{pH(!1),j(Pm)&&(V8(Py()),HG())},multi:!0}];return n.push({provide:Kk,useFactory:()=>j(Pm)},{provide:Ko,useFactory:()=>{if(j(Pm)){let e=j(Zn);return()=>{qG(e).then(()=>{e.destroyed||HO(e)})}}return()=>{}},multi:!0}),En(n)}function Jo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xr(n){return pE(n)}function wc(n,e){return uE(n,e?.equal)}var _x=class{[Sr];constructor(e){this[Sr]=e}destroy(){this[Sr].destroy()}};function kN(n){let e=zo(n);if(!e)return null;let t=new mu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jt=new J("");var LN=null;function kr(){return LN}function Hb(n){LN??=n}var af=class{},cf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(FN),providedIn:"platform"})}return n})(),qb=new J(""),FN=(()=>{class n extends cf{_location;_history;_doc=j(jt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kr().getBaseHref(this._doc)}onPopState(t){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Wy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function ON(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ii(n){return n&&n[0]!=="?"?`?${n}`:n}var si=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(Qy),providedIn:"root"})}return n})(),Ky=new J(""),Qy=(()=>{class n extends si{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ii(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ii(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ii(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(cf),ue(Ky,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zo=(()=>{class n{_subject=new Pt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=KG(ON(NN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ii(r))}normalize(t){return n.stripTrailingSlash(WG(this._basePath,NN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ii(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ii(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ii;static joinWithSlash=Wy;static stripTrailingSlash=ON;static \u0275fac=function(r){return new(r||n)(ue(si))};static \u0275prov=X({token:n,factory:()=>GG(),providedIn:"root"})}return n})();function GG(){return new Zo(ue(si))}function WG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function NN(n){return n.replace(/\/index.html$/,"")}function KG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Kb=(()=>{class n extends si{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Wy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ii(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ii(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(cf),ue(Ky,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var Yy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},tr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),VN(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);VN(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Cu),te(jy),te($b))};static \u0275dir=Et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function VN(n,e){n.context.$implicit=e.item}var ln=(()=>{class n{_viewContainer;_context=new Jy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){UN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){UN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Cu),te(jy))};static \u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Jy=class{$implicit=null;ngIf=null};function UN(n,e){if(n&&!n.createEmbeddedView)throw new ie(2020,!1)}function BN(n,e){return new ie(2100,!1)}var Gb=class{createSubscription(e,t){return xr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){xr(()=>e.unsubscribe())}},Wb=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},QG=new Wb,YG=new Gb,lf=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Wo(t))return QG;if(Vb(t))return YG;throw BN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(te(Yo,16))};static \u0275pipe=Lb({name:"async",type:n,pure:!1})}return n})();var JG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ec=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw BN(n,t);return t.replace(JG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Lb({name:"titlecase",type:n,pure:!0})}return n})();var zt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Dr({})}return n})();function uf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Zy="browser",jN="server";function Qb(n){return n===Zy}function Xy(n){return n===jN}var Ic=class{};var zN=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new Yb(j(jt),window)})}return n})(),Yb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=ZG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function ZG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var n_=new J(""),eC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ue(n_),ue(Oe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),df=class{_doc;constructor(e){this._doc=e}manager},e_="ng-app-id";function $N(n){for(let e of n)e.remove()}function HN(n,e){let t=e.createElement("style");return t.textContent=n,t}function XG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${e_}="${e}"],link[${e_}="${e}"]`);if(i)for(let s of i)s.removeAttribute(e_),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Zb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var tC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Xy(s),XG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,HN);r?.forEach(i=>this.addUsage(i,this.external,Zb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&($N(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])$N(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,HN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Zb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(e_,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ue(jt),ue(Cs),ue(ub,8),ue(Vi))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Jb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nC=/%COMP%/g;var GN="%COMP%",e7=`_nghost-${GN}`,t7=`_ngcontent-${GN}`,n7=!0,r7=new J("",{providedIn:"root",factory:()=>n7});function i7(n){return t7.replace(nC,n)}function s7(n){return e7.replace(nC,n)}function WN(n,e){return e.map(t=>t.replace(nC,n))}var rC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=h,this.platformIsServer=Xy(a),this.defaultRenderer=new hf(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Oi.ShadowDom&&(r=fe($({},r),{encapsulation:Oi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof t_?i.applyToHost(t):i instanceof ff&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Oi.Emulated:s=new t_(c,u,r,this.appId,h,o,a,g,I);break;case Oi.ShadowDom:return new Xb(c,u,t,r,o,a,this.nonce,g,I);default:s=new ff(c,u,r,h,o,a,g,I);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ue(eC),ue(tC),ue(Cs),ue(r7),ue(jt),ue(Vi),ue(Oe),ue(ub),ue(Iu,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),hf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Jb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Jb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Jb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ds.DashCase|Ds.Important)?e.style.setProperty(t,r,i&Ds.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ds.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kr().getGlobalEventTarget(this.doc,e),!e))throw new ie(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function qN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xb=class extends hf{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=WN(i.id,h);for(let I of h){let T=document.createElement("style");a&&T.setAttribute("nonce",a),T.textContent=I,this.shadowRoot.appendChild(T)}let g=i.getExternalStyles?.();if(g)for(let I of g){let T=Zb(I,s);a&&T.setAttribute("nonce",a),this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ff=class extends hf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?WN(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},t_=class extends ff{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,u,h),this.contentAttr=i7(h),this.hostAttr=s7(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var r_=class n extends af{supportsDOMEvents=!0;static makeCurrent(){Hb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=o7();return t==null?null:a7(t)}resetBaseElement(){pf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uf(document.cookie,e)}},pf=null;function o7(){return pf=pf||document.head.querySelector("base"),pf?pf.getAttribute("href"):null}function a7(n){return new URL(n,document.baseURI).pathname}var c7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),QN=(()=>{class n extends df{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),KN=["alt","control","meta","shift"],l7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},u7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},YN=(()=>{class n extends df{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),KN.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=l7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KN.forEach(o=>{if(o!==i){let a=u7[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function iC(n,e,t){return RN($({rootComponent:n,platformRef:t?.platformRef},d7(e)))}function d7(n){return{appProviders:[...m7,...n?.providers??[]],platformProviders:g7}}function h7(){r_.makeCurrent()}function f7(){return new ki}function p7(){return zk(document),document}var g7=[{provide:Vi,useValue:Zy},{provide:lb,useValue:h7,multi:!0},{provide:jt,useFactory:p7}];var m7=[{provide:Iy,useValue:"root"},{provide:ki,useFactory:f7},{provide:n_,useClass:QN,multi:!0,deps:[jt]},{provide:n_,useClass:YN,multi:!0,deps:[jt]},rC,tC,eC,{provide:gu,useExisting:rC},{provide:Ic,useClass:c7},[]];var Au=class{},gf=class{},ks=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var s_=class{encodeKey(e){return JN(e)}encodeValue(e){return JN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function y7(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var _7=/%(\d[a-f0-9])/gi,v7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JN(n){return encodeURIComponent(n).replace(_7,(e,t)=>v7[t]??e)}function i_(n){return`${n}`}var xs=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new s_,e.fromString){if(e.fromObject)throw new ie(2805,!1);this.map=y7(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(i_):[i_(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(i_(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(i_(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var o_=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function w7(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ZN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function XN(n){return typeof Blob<"u"&&n instanceof Blob}function eL(n){return typeof FormData<"u"&&n instanceof FormData}function E7(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var tL="Content-Type",nL="Accept",rL="X-Request-URL",iL="text/plain",sL="application/json",I7=`${sL}, ${iL}, */*`,Su=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(w7(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ks,this.context??=new o_,!this.params)this.params=new xs,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ZN(this.body)||XN(this.body)||eL(this.body)||E7(this.body)?this.body:this.body instanceof xs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eL(this.body)?null:XN(this.body)?this.body.type||null:ZN(this.body)?null:typeof this.body=="string"?iL:this.body instanceof xs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?sL:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((I,T)=>I.set(T,e.setHeaders[T]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((I,T)=>I.set(T,e.setParams[T]),h)),new n(t,r,o,{params:h,headers:u,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},bc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(bc||{}),Du=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new ks,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},a_=class n extends Du{constructor(e={}){super(e)}type=bc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cc=class n extends Du{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=bc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},mf=class extends Du{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},b7=200,C7=204;function sC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var l_=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Su)s=t;else{let c;i.headers instanceof ks?c=i.headers:c=new ks(i.headers);let u;i.params&&(i.params instanceof xs?u=i.params:u=new xs({fromObject:i.params})),s=new Su(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=pe(s).pipe(Di(c=>this.handler.handle(c)));if(t instanceof Su||i.observe==="events")return o;let a=o.pipe(Rn(c=>c instanceof Cc));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ie(2806,!1);return c.body}));case"blob":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ie(2807,!1);return c.body}));case"text":return a.pipe(me(c=>{if(c.body!==null&&typeof c.body!="string")throw new ie(2808,!1);return c.body}));case"json":default:return a.pipe(me(c=>c.body))}case"response":return a;default:throw new ie(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new xs().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sC(i,r))}post(t,r,i={}){return this.request("POST",t,sC(i,r))}put(t,r,i={}){return this.request("PUT",t,sC(i,r))}static \u0275fac=function(r){return new(r||n)(ue(Au))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var T7=new J("");function S7(n,e){return e(n)}function A7(n,e,t){return(r,i)=>gn(t,()=>e(r,s=>n(s,i)))}var oL=new J(""),aC=new J(""),aL=new J("",{providedIn:"root",factory:()=>!0});var c_=(()=>{class n extends Au{backend;injector;chain=null;pendingTasks=j(Fi);contributeToStability=j(aL);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(oL),...this.injector.get(aC,[])]));this.chain=r.reduceRight((i,s)=>A7(i,s,this.injector),S7)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(rc(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ue(gf),ue(an))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var D7=/^\)\]\}',?\n/,M7=RegExp(`^${rL}:`,"m");function R7(n){return"responseURL"in n&&n.responseURL?n.responseURL:M7.test(n.getAllResponseHeaders())?n.getResponseHeader(rL):null}var oC=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ie(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?at(r.\u0275loadImpl()):pe(null)).pipe(xn(()=>new be(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((L,O)=>o.setRequestHeader(L,O.join(","))),t.headers.has(nL)||o.setRequestHeader(nL,I7),!t.headers.has(tL)){let L=t.detectContentTypeHeader();L!==null&&o.setRequestHeader(tL,L)}if(t.responseType){let L=t.responseType.toLowerCase();o.responseType=L!=="json"?L:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let L=o.statusText||"OK",O=new ks(o.getAllResponseHeaders()),q=R7(o)||t.url;return c=new a_({headers:O,status:o.status,statusText:L,url:q}),c},h=()=>{let{headers:L,status:O,statusText:q,url:ee}=u(),K=null;O!==C7&&(K=typeof o.response>"u"?o.responseText:o.response),O===0&&(O=K?b7:0);let he=O>=200&&O<300;if(t.responseType==="json"&&typeof K=="string"){let je=K;K=K.replace(D7,"");try{K=K!==""?JSON.parse(K):null}catch(ge){K=je,he&&(he=!1,K={error:ge,text:K})}}he?(s.next(new Cc({body:K,headers:L,status:O,statusText:q,url:ee||void 0})),s.complete()):s.error(new mf({error:K,headers:L,status:O,statusText:q,url:ee||void 0}))},g=L=>{let{url:O}=u(),q=new mf({error:L,status:o.status||0,statusText:o.statusText||"Unknown Error",url:O||void 0});s.error(q)},I=!1,T=L=>{I||(s.next(u()),I=!0);let O={type:bc.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(O.total=L.total),t.responseType==="text"&&o.responseText&&(O.partialText=o.responseText),s.next(O)},k=L=>{let O={type:bc.UploadProgress,loaded:L.loaded};L.lengthComputable&&(O.total=L.total),s.next(O)};return o.addEventListener("load",h),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",T),a!==null&&o.upload&&o.upload.addEventListener("progress",k)),o.send(a),s.next({type:bc.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",h),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",T),a!==null&&o.upload&&o.upload.removeEventListener("progress",k)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(ue(Ic))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),cL=new J(""),P7="XSRF-TOKEN",x7=new J("",{providedIn:"root",factory:()=>P7}),k7="X-XSRF-TOKEN",O7=new J("",{providedIn:"root",factory:()=>k7}),yf=class{},N7=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=uf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ue(jt),ue(x7))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function L7(n,e){let t=n.url.toLowerCase();if(!j(cL)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=j(yf).getToken(),i=j(O7);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function cC(...n){let e=[l_,oC,c_,{provide:Au,useExisting:c_},{provide:gf,useFactory:()=>j(T7,{optional:!0})??j(oC)},{provide:oL,useValue:L7,multi:!0},{provide:cL,useValue:!0},{provide:yf,useClass:N7}];for(let t of n)e.push(...t.\u0275providers);return En(e)}var F7=new J(""),V7="b",U7="h",B7="s",j7="st",z7="u",$7="rt",lC=new J(""),H7=["GET","HEAD"];function q7(n,e){let I=j(lC),{isCacheActive:t}=I,r=xh(I,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!H7.includes(s)||!r.includeRequestsWithAuthHeaders&&G7(n)||r.filter?.(n)===!1)return e(n);let o=j(Eu);if(j(F7,{optional:!0}))throw new ie(2803,!1);let c=n.url,u=W7(n,c),h=o.get(u,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[V7]:T,[$7]:k,[U7]:L,[B7]:O,[j7]:q,[z7]:ee}=h,K=T;switch(k){case"arraybuffer":K=new TextEncoder().encode(T).buffer;break;case"blob":K=new Blob([T]);break}let he=new ks(L);return pe(new Cc({body:K,headers:he,status:O,statusText:q,url:ee}))}return e(n).pipe(sn(T=>{T instanceof Cc}))}function G7(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function lL(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function W7(n,e){let{params:t,method:r,responseType:i}=n,s=lL(t),o=n.serializeBody();o instanceof URLSearchParams?o=lL(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=K7(a);return c}function K7(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function uL(n){return[{provide:lC,useFactory:()=>(Ui("NgHttpTransferCache"),$({isCacheActive:!0},n))},{provide:aC,useValue:q7,multi:!0},{provide:Ko,multi:!0,useFactory:()=>{let e=j(Zn),t=j(lC);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var dL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(u_||{});function Y7(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function hL(){return Y7(u_.EventReplay,PN())}function fL(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);let r=t.has(u_.HttpTransferCacheOptions);return En([[],xN(),t.has(u_.NoHttpTransferCache)||r?[]:uL({}),e])}var Ne="primary",Rf=Symbol("RouteTitle"),pC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ac(n){return new pC(n)}function EL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Z7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}function zi(n,e){let t=n?gC(n):void 0,r=e?gC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!IL(n[i],e[i]))return!1;return!0}function gC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function IL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function bL(n){return n.length>0?n[n.length-1]:null}function ra(n){return AE(n)?n:Wo(n)?at(Promise.resolve(n)):pe(n)}var X7={exact:TL,subset:SL},CL={exact:eW,subset:tW,ignored:()=>!0};function pL(n,e,t){return X7[t.paths](n.root,e.root,t.matrixParams)&&CL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function eW(n,e){return zi(n,e)}function TL(n,e,t){if(!Tc(n.segments,e.segments)||!f_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!TL(n.children[r],e.children[r],t))return!1;return!0}function tW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IL(n[t],e[t]))}function SL(n,e,t){return AL(n,e,e.segments,t)}function AL(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Tc(i,t)||e.hasChildren()||!f_(i,t,r))}else if(n.segments.length===t.length){if(!Tc(n.segments,t)||!f_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SL(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Tc(n.segments,i)||!f_(n.segments,i,r)||!n.children[Ne]?!1:AL(n.children[Ne],e,s,r)}}function f_(n,e,t){return e.every((r,i)=>CL[t](n[i].parameters,r.parameters))}var Hi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new st([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ac(this.queryParams),this._queryParamMap}toString(){return iW.serialize(this)}},st=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return p_(this)}},Xo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ac(this.parameters),this._parameterMap}toString(){return ML(this)}};function nW(n,e){return Tc(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}function Tc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function rW(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ne&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ne&&(t=t.concat(e(i,r)))}),t}var Dc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new ea,providedIn:"root"})}return n})(),ea=class{parse(e){let t=new yC(e);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_f(e.root,!0)}`,r=aW(e.queryParams),i=typeof e.fragment=="string"?`#${sW(e.fragment)}`:"";return`${t}${r}${i}`}},iW=new ea;function p_(n){return n.segments.map(e=>ML(e)).join("/")}function _f(n,e){if(!n.hasChildren())return p_(n);if(e){let t=n.children[Ne]?_f(n.children[Ne],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ne&&r.push(`${i}:${_f(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=rW(n,(r,i)=>i===Ne?[_f(n.children[Ne],!1)]:[`${i}:${_f(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ne]!=null?`${p_(n)}/${t[0]}`:`${p_(n)}/(${t.join("//")})`}}function DL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function d_(n){return DL(n).replace(/%3B/gi,";")}function sW(n){return encodeURI(n)}function mC(n){return DL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g_(n){return decodeURIComponent(n)}function gL(n){return g_(n.replace(/\+/g,"%20"))}function ML(n){return`${mC(n.path)}${oW(n.parameters)}`}function oW(n){return Object.entries(n).map(([e,t])=>`;${mC(e)}=${mC(t)}`).join("")}function aW(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${d_(t)}=${d_(i)}`).join("&"):`${d_(t)}=${d_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var cW=/^[^\/()?;#]+/;function uC(n){let e=n.match(cW);return e?e[0]:""}var lW=/^[^\/()?;=#]+/;function uW(n){let e=n.match(lW);return e?e[0]:""}var dW=/^[^=?&#]+/;function hW(n){let e=n.match(dW);return e?e[0]:""}var fW=/^[^&#]+/;function pW(n){let e=n.match(fW);return e?e[0]:""}var yC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ne]=new st(e,t)),r}parseSegment(){let e=uC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Xo(g_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=uC(this.remaining);i&&(r=i,this.capture(r))}e[g_(t)]=g_(r)}parseQueryParam(e){let t=hW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=pW(this.remaining);o&&(r=o,this.capture(r))}let i=gL(t),s=gL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ne);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Ne]:new st([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function RL(n){return n.segments.length>0?new st([],{[Ne]:n}):n}function PL(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=PL(i);if(r===Ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new st(n.segments,e);return gW(t)}function gW(n){if(n.numberOfChildren===1&&n.children[Ne]){let e=n.children[Ne];return new st(n.segments.concat(e.segments),e.children)}return n}function ta(n){return n instanceof Hi}function xL(n,e,t=null,r=null){let i=kL(n);return OL(i,e,t,r)}function kL(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new st(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=RL(r);return e??i}function OL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return dC(i,i,i,t,r);let s=mW(e);if(s.toRoot())return dC(i,i,new st([],{}),t,r);let o=yW(s,i,n),a=o.processChildren?wf(o.segmentGroup,o.index,s.commands):LL(o.segmentGroup,o.index,s.commands);return dC(i,o.segmentGroup,a,t,r)}function y_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function If(n){return typeof n=="object"&&n!=null&&n.outlets}function dC(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;n===e?o=t:o=NL(n,e,t);let a=RL(PL(o));return new Hi(a,s,i)}function NL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=NL(s,e,t)}),new st(n.segments,r)}var __=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&y_(r[0]))throw new ie(4003,!1);let i=r.find(If);if(i&&i!==bL(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mW(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new __(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new __(t,e,r)}var Pu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function yW(n,e,t){if(n.isAbsolute)return new Pu(e,!0,0);if(!t)return new Pu(e,!1,NaN);if(t.parent===null)return new Pu(t,!0,0);let r=y_(n.commands[0])?0:1,i=t.segments.length-1+r;return _W(t,i,n.numberOfDoubleDots)}function _W(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Pu(r,!1,i-s)}function vW(n){return If(n[0])?n[0].outlets:{[Ne]:n}}function LL(n,e,t){if(n??=new st([],{}),n.segments.length===0&&n.hasChildren())return wf(n,e,t);let r=wW(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new st(n.segments.slice(0,r.pathIndex),{});return s.children[Ne]=new st(n.segments.slice(r.pathIndex),n.children),wf(s,0,i)}else return r.match&&i.length===0?new st(n.segments,{}):r.match&&!n.hasChildren()?_C(n,e,t):r.match?wf(n,0,i):_C(n,e,t)}function wf(n,e,t){if(t.length===0)return new st(n.segments,{});{let r=vW(t),i={};if(Object.keys(r).some(s=>s!==Ne)&&n.children[Ne]&&n.numberOfChildren===1&&n.children[Ne].segments.length===0){let s=wf(n.children[Ne],e,t);return new st(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=LL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new st(n.segments,i)}}function wW(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(If(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!yL(c,u,o))return s;r+=2}else{if(!yL(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _C(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(If(s)){let c=EW(s.outlets);return new st(r,c)}if(i===0&&y_(t[0])){let c=n.segments[e];r.push(new Xo(c.path,mL(t[0]))),i++;continue}let o=If(s)?s.outlets[Ne]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&y_(a)?(r.push(new Xo(o,mL(a))),i+=2):(r.push(new Xo(o,{})),i++)}return new st(r,{})}function EW(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=_C(new st([],{}),0,r))}),e}function mL(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yL(n,e,t){return n==t.path&&zi(e,t.parameters)}var m_="imperative",un=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(un||{}),_r=class{id;url;constructor(e,t){this.id=e,this.url=t}},na=class extends _r{type=un.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends _r{urlAfterRedirects;type=un.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nr||{}),ku=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ku||{}),$i=class extends _r{reason;code;type=un.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qi=class extends _r{reason;code;type=un.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ou=class extends _r{error;target;type=un.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bf=class extends _r{urlAfterRedirects;state;type=un.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends _r{urlAfterRedirects;state;type=un.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w_=class extends _r{urlAfterRedirects;state;shouldActivate;type=un.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},E_=class extends _r{urlAfterRedirects;state;type=un.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I_=class extends _r{urlAfterRedirects;state;type=un.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class{route;type=un.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},C_=class{route;type=un.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},T_=class{snapshot;type=un.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{snapshot;type=un.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A_=class{snapshot;type=un.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},D_=class{snapshot;type=un.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nu=class{routerEvent;position;anchor;type=un.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Cf=class{},Lu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function IW(n,e){return n.providers&&!n._injector&&(n._injector=Tu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function oi(n){return n.outlet||Ne}function bW(n,e){let t=n.filter(r=>oi(r)===e);return t.push(...n.filter(r=>oi(r)!==e)),t}function Pf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var M_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Pf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Mc(this.rootInjector)}},Mc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ue(an))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=wC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wC(e,this._root).map(t=>t.value)}};function vC(n,e){if(n===e.value)return e;for(let t of e.children){let r=vC(n,t);if(r)return r}return null}function wC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=wC(n,t);if(r.length)return r.unshift(e),r}return[]}var yr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ru(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Tf=class extends R_{snapshot;constructor(e,t){super(e),this.snapshot=t,DC(this,e)}toString(){return this.snapshot.toString()}};function FL(n){let e=CW(n),t=new Lt([new Xo("",{})]),r=new Lt({}),i=new Lt({}),s=new Lt({}),o=new Lt(""),a=new kn(t,r,s,o,i,Ne,n,e.root);return a.snapshot=e.root,new Tf(new yr(a,[]),e)}function CW(n){let e={},t={},r={},i="",s=new Sc([],e,r,i,t,Ne,n,null,{});return new Sf("",new yr(s,[]))}var kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(me(u=>u[Rf]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Ac(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Ac(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function P_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&UL(i)&&(r.resolve[Rf]=i.title),r}var Sc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rf]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ac(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ac(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Sf=class extends R_{url;constructor(e,t){super(t),this.url=e,DC(this,t)}toString(){return VL(this._root)}};function DC(n,e){e.value._routerState=n,e.children.forEach(t=>DC(n,t))}function VL(n){let e=n.children.length>0?` { ${n.children.map(VL).join(", ")} } `:"";return`${n.value}${e}`}function hC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zi(e.params,t.params)||n.paramsSubject.next(t.params),Z7(e.url,t.url)||n.urlSubject.next(t.url),zi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function EC(n,e){let t=zi(n.params,e.params)&&nW(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||EC(n.parent,e.parent))}function UL(n){return typeof n.title=="string"||n.title===null}var BL=new J(""),xf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ne;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=kk(void 0);parentContexts=j(Mc);location=j(Cu);changeDetector=j(Yo);inputBinder=j(kf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new IC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pr]})}return n})(),IC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===kn?this.route:e===Mc?this.childContexts:e===BL?this.outletData:this.parent.get(e,t)}},kf=new J(""),MC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=nc([r.queryParams,r.params,r.data]).pipe(xn(([s,o,a],c)=>(a=$($($({},s),o),a),c===0?pe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=kN(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),RC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&pt(0,"router-outlet")},dependencies:[xf],encapsulation:2})}return n})();function PC(n){let e=n.children&&n.children.map(PC),t=e?fe($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=RC),t}function TW(n,e,t){let r=Af(n,e._root,t?t._root:void 0);return new Tf(r,e)}function Af(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=SW(n,e,t);return new yr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Af(n,a)),o}}let r=AW(e.value),i=e.children.map(s=>Af(n,s));return new yr(r,i)}}function SW(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Af(n,r,i);return Af(n,r)})}function AW(n){return new kn(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var Fu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jL="ngNavigationCancelingError";function x_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=zL(!1,nr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function zL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jL]=!0,t.cancellationCode=e,t}function DW(n){return $L(n)&&ta(n.url)}function $L(n){return!!n&&n[jL]}var MW=(n,e,t,r)=>me(i=>(new bC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),bC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ru(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ru(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ru(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ru(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new D_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new S_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(hC(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hC(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},k_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function RW(n,e,t){let r=n._root,i=e?e._root:null;return vf(r,i,t,[r.value])}function PW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Uu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Cx(n)?n:e.get(n):r}function vf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ru(e);return n.children.forEach(o=>{xW(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ef(a,t.getContext(o),i)),i}function xW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=kW(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new k_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?vf(n,e,a?a.children:null,r,i):vf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xu(a.outlet.component,o))}else o&&Ef(e,a,i),i.canActivateChecks.push(new k_(r)),s.component?vf(n,null,a?a.children:null,r,i):vf(n,null,t,r,i);return i}function kW(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tc(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!EC(n,e)||!zi(n.queryParams,e.queryParams);case"paramsChange":default:return!EC(n,e)}}function Ef(n,e,t){let r=Ru(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ef(o,e.children.getContext(s),t):Ef(o,null,t):Ef(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xu(e.outlet.component,i)):t.canDeactivateChecks.push(new xu(null,i)):t.canDeactivateChecks.push(new xu(null,i))}function Of(n){return typeof n=="function"}function OW(n){return typeof n=="boolean"}function NW(n){return n&&Of(n.canLoad)}function LW(n){return n&&Of(n.canActivate)}function FW(n){return n&&Of(n.canActivateChild)}function VW(n){return n&&Of(n.canDeactivate)}function UW(n){return n&&Of(n.canMatch)}function HL(n){return n instanceof Is||n?.name==="EmptyError"}var h_=Symbol("INITIAL_VALUE");function Vu(){return xn(n=>nc(n.map(e=>e.pipe(Pn(1),Cm(h_)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===h_)return h_;if(t===!1||BW(t))return t}return!0}),Rn(e=>e!==h_),Pn(1)))}function BW(n){return ta(n)||n instanceof Fu}function jW(n,e){return Ft(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?pe(fe($({},t),{guardsResult:!0})):zW(o,r,i,n).pipe(Ft(a=>a&&OW(a)?$W(r,s,n,e):pe(a)),me(a=>fe($({},t),{guardsResult:a})))})}function zW(n,e,t,r){return at(n).pipe(Ft(i=>KW(i.component,i.route,t,e,r)),bs(i=>i!==!0,!0))}function $W(n,e,t,r){return at(e).pipe(Di(i=>Xl(qW(i.route.parent,r),HW(i.route,r),WW(n,i.path,t),GW(n,i.route,t))),bs(i=>i!==!0,!0))}function HW(n,e){return n!==null&&e&&e(new A_(n)),pe(!0)}function qW(n,e){return n!==null&&e&&e(new T_(n)),pe(!0)}function GW(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(s=>Em(()=>{let o=Pf(e)??t,a=Uu(s,o),c=LW(a)?a.canActivate(e,n):gn(o,()=>a(e,n));return ra(c).pipe(bs())}));return pe(i).pipe(Vu())}function WW(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>PW(o)).filter(o=>o!==null).map(o=>Em(()=>{let a=o.guards.map(c=>{let u=Pf(o.node)??t,h=Uu(c,u),g=FW(h)?h.canActivateChild(r,n):gn(u,()=>h(r,n));return ra(g).pipe(bs())});return pe(a).pipe(Vu())}));return pe(s).pipe(Vu())}function KW(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return pe(!0);let o=s.map(a=>{let c=Pf(e)??i,u=Uu(a,c),h=VW(u)?u.canDeactivate(n,e,t,r):gn(c,()=>u(n,e,t,r));return ra(h).pipe(bs())});return pe(o).pipe(Vu())}function QW(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let s=i.map(o=>{let a=Uu(o,n),c=NW(a)?a.canLoad(e,t):gn(n,()=>a(e,t));return ra(c)});return pe(s).pipe(Vu(),qL(r))}function qL(n){return tm(sn(e=>{if(typeof e!="boolean")throw x_(n,e)}),me(e=>e===!0))}function YW(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let s=i.map(o=>{let a=Uu(o,n),c=UW(a)?a.canMatch(e,t):gn(n,()=>a(e,t));return ra(c)});return pe(s).pipe(Vu(),qL(r))}var Df=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Mf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Mu(n){return Jl(new Df(n))}function JW(n){return Jl(new ie(4e3,!1))}function ZW(n){return Jl(zL(!1,nr.GuardRejected))}var CC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Ne])return JW(`${e.redirectTo}`);i=i.children[Ne]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:h,url:g,outlet:I,params:T,data:k,title:L}=i,O=gn(s,()=>a({params:T,data:k,queryParams:c,fragment:u,routeConfig:h,url:g,outlet:I,title:L}));if(O instanceof Hi)throw new Mf(O);t=O}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Mf(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Hi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new st(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},TC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XW(n,e,t,r,i){let s=GL(n,e,t);return s.matched?(r=IW(e,r),YW(r,e,t,i).pipe(me(o=>o===!0?s:$({},TC)))):pe(s)}function GL(n,e,t){if(e.path==="**")return eK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},TC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EL)(t,n,e);if(!i)return $({},TC);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function eK(n){return{matched:!0,parameters:n.length>0?bL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _L(n,e,t,r){return t.length>0&&rK(n,t,r)?{segmentGroup:new st(e,nK(r,new st(t,n.children))),slicedSegments:[]}:t.length===0&&iK(n,t,r)?{segmentGroup:new st(n.segments,tK(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new st(n.segments,n.children),slicedSegments:t}}function tK(n,e,t,r){let i={};for(let s of t)if(N_(n,e,s)&&!r[oi(s)]){let o=new st([],{});i[oi(s)]=o}return $($({},r),i)}function nK(n,e){let t={};t[Ne]=e;for(let r of n)if(r.path===""&&oi(r)!==Ne){let i=new st([],{});t[oi(r)]=i}return t}function rK(n,e,t){return t.some(r=>N_(n,e,r)&&oi(r)!==Ne)}function iK(n,e,t){return t.some(r=>N_(n,e,r))}function N_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sK(n,e,t){return e.length===0&&!n.children[t]}var SC=class{};function oK(n,e,t,r,i,s,o="emptyOnly"){return new AC(n,e,t,r,i,o,s).recognize()}var aK=31,AC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new CC(this.urlSerializer,this.urlTree)}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=_L(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new yr(r,t),s=new Sf("",i),o=xL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Sc([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ne,t).pipe(me(r=>({children:r,rootSnapshot:t})),ur(r=>{if(r instanceof Mf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Df?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(me(o=>o instanceof yr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return at(s).pipe(Di(o=>{let a=r.children[o],c=bW(t,o);return this.processSegmentGroup(e,c,a,o,i)}),bm((o,a)=>(o.push(...a),o)),Vo(null),ME(),Ft(o=>{if(o===null)return Mu(r);let a=WL(o);return cK(a),pe(a)}))}processSegment(e,t,r,i,s,o,a){return at(t).pipe(Di(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ur(u=>{if(u instanceof Df)return pe(null);throw u}))),bs(c=>!!c),ur(c=>{if(HL(c))return sK(r,i,s)?pe(new SC):Mu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return oi(r)!==o&&(o===Ne||!N_(i,s,r))?Mu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Mu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:g,remainingSegments:I}=GL(t,i,s);if(!c)return Mu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aK&&(this.allowRedirects=!1));let T=new Sc(s,u,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,vL(i),oi(i),i.component??i._loadedComponent??null,i,wL(i)),k=P_(T,a,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let L=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,T,e);return this.applyRedirects.lineralizeSegments(i,L).pipe(Ft(O=>this.processSegment(e,r,t,O.concat(I),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=XW(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(xn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xn(({routes:u})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:T}=c,k=new Sc(I,g,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,vL(r),oi(r),r.component??r._loadedComponent??null,r,wL(r)),L=P_(k,o,this.paramsInheritanceStrategy);k.params=Object.freeze(L.params),k.data=Object.freeze(L.data);let{segmentGroup:O,slicedSegments:q}=_L(t,I,T,u);if(q.length===0&&O.hasChildren())return this.processChildren(h,u,O,k).pipe(me(K=>new yr(k,K)));if(u.length===0&&q.length===0)return pe(new yr(k,[]));let ee=oi(r)===s;return this.processSegment(h,u,O,q,ee?Ne:s,!0,k).pipe(me(K=>new yr(k,K instanceof yr?[K]:[])))}))):Mu(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):QW(e,t,r,this.urlSerializer).pipe(Ft(i=>i?this.configLoader.loadChildren(e,t).pipe(sn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):ZW(t))):pe({routes:[],injector:e})}};function cK(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}function lK(n){let e=n.value.routeConfig;return e&&e.path===""}function WL(n){let e=[],t=new Set;for(let r of n){if(!lK(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=WL(r.children);e.push(new yr(r.value,i))}return e.filter(r=>!t.has(r))}function vL(n){return n.data||{}}function wL(n){return n.resolve||{}}function uK(n,e,t,r,i,s){return Ft(o=>oK(n,e,t,r,o.extractedUrl,i,s).pipe(me(({state:a,tree:c})=>fe($({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function dK(n,e){return Ft(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of KL(c))o.add(u);let a=0;return at(o).pipe(Di(c=>s.has(c)?hK(c,r,n,e):(c.data=P_(c,c.parent,n).resolve,pe(void 0))),sn(()=>a++),eu(1),Ft(c=>a===o.size?pe(t):qn))})}function KL(n){let e=n.children.map(t=>KL(t)).flat();return[n,...e]}function hK(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!UL(i)&&(s[Rf]=i.title),fK(s,n,e,r).pipe(me(o=>(n._resolvedData=o,n.data=P_(n,n.parent,t).resolve,null)))}function fK(n,e,t,r){let i=gC(n);if(i.length===0)return pe({});let s={};return at(i).pipe(Ft(o=>pK(n[o],e,t,r).pipe(bs(),sn(a=>{if(a instanceof Fu)throw x_(new ea,a);s[o]=a}))),eu(1),me(()=>s),ur(o=>HL(o)?qn:Jl(o)))}function pK(n,e,t,r){let i=Pf(e)??r,s=Uu(n,i),o=s.resolve?s.resolve(e,t):gn(i,()=>s(e,t));return ra(o)}function fC(n){return xn(e=>{let t=n(e);return t?at(t).pipe(me(()=>e)):pe(e)})}var xC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ne);return r}getResolvedTitleForRoute(t){return t.data[Rf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(QL),providedIn:"root"})}return n})(),QL=(()=>{class n extends xC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ue(dL))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rc=new J("",{providedIn:"root",factory:()=>({})}),Pc=new J(""),L_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(SN);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ra(t.loadComponent()).pipe(me(JL),sn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),rc(()=>{this.componentLoaders.delete(t)})),i=new Wl(r,()=>new Pt).pipe(Gl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=YL(r,this.compiler,t,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(r)})),o=new Wl(s,()=>new Pt).pipe(Gl());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YL(n,e,t,r){return ra(n.loadChildren()).pipe(me(JL),Ft(i=>i instanceof Nb||Array.isArray(i)?pe(i):at(e.compileModuleAsync(i))),me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Pc,[],{optional:!0,self:!0}).flat()),{routes:o.map(PC),injector:s}}))}function gK(n){return n&&typeof n=="object"&&"default"in n}function JL(n){return gK(n)?n.default:n}var F_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(mK),providedIn:"root"})}return n})(),mK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kC=new J(""),OC=new J("");function ZL(n,e,t){let r=n.get(OC),i=n.get(jt);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),yK(n))),{onViewTransitionCreated:c}=r;return c&&gn(n,()=>c({transition:a,from:e,to:t})),o})}function yK(n){return new Promise(e=>{xy({read:()=>setTimeout(e)},{injector:n})})}var NC=new J(""),V_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Pt;transitionAbortSubject=new Pt;configLoader=j(L_);environmentInjector=j(an);destroyRef=j(mc);urlSerializer=j(Dc);rootContexts=j(Mc);location=j(Zo);inputBindingEnabled=j(kf,{optional:!0})!==null;titleStrategy=j(xC);options=j(Rc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(F_);createViewTransition=j(kC,{optional:!0});navigationErrorHandler=j(NC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new b_(i)),r=i=>this.events.next(new C_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Lt(null),this.transitions.pipe(Rn(r=>r!==null),xn(r=>{let i=!1,s=!1;return pe(r).pipe(xn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),qn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?fe($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new qi(o.id,this.urlSerializer.serialize(o.rawUrl),u,ku.IgnoredSameUrlNavigation)),o.resolve(!1),qn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return pe(o).pipe(xn(u=>(this.events.next(new na(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?qn:Promise.resolve(u))),uK(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=fe($({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new bf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:h,source:g,restoredState:I,extras:T}=o,k=new na(u,this.urlSerializer.serialize(h),g,I);this.events.next(k);let L=FL(this.rootComponentType).snapshot;return this.currentTransition=r=fe($({},o),{targetSnapshot:L,urlAfterRedirects:h,extras:fe($({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,pe(r)}else{let u="";return this.events.next(new qi(o.id,this.urlSerializer.serialize(o.extractedUrl),u,ku.IgnoredByUrlHandlingStrategy)),o.resolve(!1),qn}}),sn(o=>{let a=new v_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),me(o=>(this.currentTransition=r=fe($({},o),{guards:RW(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),jW(this.environmentInjector,o=>this.events.next(o)),sn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw x_(this.urlSerializer,o.guardsResult);let a=new w_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Rn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",nr.GuardRejected),!1)),fC(o=>{if(o.guards.canActivateChecks.length!==0)return pe(o).pipe(sn(a=>{let c=new E_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),xn(a=>{let c=!1;return pe(a).pipe(dK(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",nr.NoDataFromResolver)}}))}),sn(a=>{let c=new I_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),fC(o=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(sn(h=>{c.component=h}),me(()=>{})));for(let h of c.children)u.push(...a(h));return u};return nc(a(o.targetSnapshot.root)).pipe(Vo(null),Pn(1))}),fC(()=>this.afterPreactivation()),xn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?at(c).pipe(me(()=>r)):pe(r)}),me(o=>{let a=TW(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=fe($({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),sn(()=>{this.events.next(new Cf)}),MW(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Pn(1),sn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),tu(this.transitionAbortSubject.pipe(sn(o=>{throw o}))),rc(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ur(o=>{if(this.destroyed)return r.resolve(!1),qn;if(s=!0,$L(o))this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),DW(o)?this.events.next(new Lu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ou(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=gn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Fu){let{message:u,cancellationCode:h}=x_(this.urlSerializer,c);this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new Lu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return qn}))}))}cancelNavigationTransition(t,r,i){let s=new $i(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _K(n){return n!==m_}var XL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(vK),providedIn:"root"})}return n})(),O_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},vK=(()=>{class n extends O_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eF=(()=>{class n{urlSerializer=j(Dc);options=j(Rc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Zo);urlHandlingStrategy=j(F_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Hi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Hi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=FL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(wK),providedIn:"root"})}return n})(),wK=(()=>{class n extends eF{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof na?this.updateStateMemento():t instanceof qi?this.commitTransition(r):t instanceof bf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Cf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof $i&&(t.code===nr.GuardRejected||t.code===nr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ou?this.restoreHistory(r,!0):t instanceof Or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=$($({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U_(n,e){n.events.pipe(Rn(t=>t instanceof Or||t instanceof $i||t instanceof Ou||t instanceof qi),me(t=>t instanceof Or||t instanceof qi?0:(t instanceof $i?t.code===nr.Redirect||t.code===nr.SupersededByNewNavigation:!1)?2:1),Rn(t=>t!==2),Pn(1)).subscribe(()=>{e()})}var EK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},It=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(Fb);stateManager=j(eF);options=j(Rc,{optional:!0})||{};pendingTasks=j(Fi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(V_);urlSerializer=j(Dc);location=j(Zo);urlHandlingStrategy=j(F_);_events=new Pt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(XL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Pc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(kf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof $i&&r.code!==nr.Redirect&&r.code!==nr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Or)this.navigated=!0;else if(r instanceof Lu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_K(i.source)},o);this.scheduleNavigation(a,m_,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}CK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),m_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(PC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=kL(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return OL(g,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ta(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,m_,null,r)}navigate(t,r={skipLocationChange:!1}){return bK(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},EK):r===!1?i=$({},IK):i=r,ta(t))return pL(this.currentUrlTree,t,i);let s=this.parseUrl(t);return pL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((g,I)=>{a=g,c=I});let h=this.pendingTasks.add();return U_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bK(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function CK(n){return!(n instanceof Cf)&&!(n instanceof Lu)}var rr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pt;constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Or&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ta(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:lO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ta(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(te(It),te(kn),ob("tabindex"),te(Ps),te(gr),te(si))};static \u0275dir=Et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&de("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&sf("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Jo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Jo],replaceUrl:[2,"replaceUrl","replaceUrl",Jo],routerLink:"routerLink"},features:[pr]})}return n})();var Nf=class{};var tF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Rn(t=>t instanceof Or),Di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Tu(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return at(i).pipe(Zl())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let s=i.pipe(Ft(o=>o===null?pe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return at([s,o]).pipe(Zl())}else return s})}static \u0275fac=function(r){return new(r||n)(ue(It),ue(an),ue(Nf),ue(L_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nF=new J(""),DK=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof na?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qi&&t.code===ku.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Nu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){WO()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function FC(n,...e){return En([{provide:Pc,multi:!0,useValue:n},[],{provide:kn,useFactory:rF,deps:[It]},{provide:Ko,multi:!0,useFactory:iF},e.map(t=>t.\u0275providers)])}function rF(n){return n.routerState.root}function Lf(n,e){return{\u0275kind:n,\u0275providers:e}}function iF(){let n=j(Tt);return e=>{let t=n.get(Zn);if(e!==t.components[0])return;let r=n.get(It),i=n.get(sF);n.get(VC)===1&&r.initialNavigation(),n.get(cF,null,Fe.Optional)?.setUpPreloading(),n.get(nF,null,Fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sF=new J("",{factory:()=>new Pt}),VC=new J("",{providedIn:"root",factory:()=>1});function oF(){let n=[{provide:VC,useValue:0},Ub(()=>{let e=j(Tt);return e.get(qb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(It),s=e.get(sF);U_(i,()=>{r(!0)}),e.get(V_).afterPreactivation=()=>(r(!0),s.closed?pe(void 0):s),i.initialNavigation()}))})];return Lf(2,n)}function aF(){let n=[Ub(()=>{j(It).setUpLocationChangeListener()}),{provide:VC,useValue:2}];return Lf(3,n)}var cF=new J("");function lF(n){return Lf(0,[{provide:cF,useExisting:tF},{provide:Nf,useExisting:n}])}function uF(){return Lf(8,[MC,{provide:kf,useExisting:MC}])}function dF(n){Ui("NgRouterViewTransitions");let e=[{provide:kC,useValue:ZL},{provide:OC,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return Lf(9,e)}var hF=[Zo,{provide:Dc,useClass:ea},It,Mc,{provide:kn,useFactory:rF,deps:[It]},L_,[]],vr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[hF,[],{provide:Pc,multi:!0,useValue:t},[],r?.errorHandler?{provide:NC,useValue:r.errorHandler}:[],{provide:Rc,useValue:r||{}},r?.useHash?RK():PK(),MK(),r?.preloadingStrategy?lF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?xK(r):[],r?.bindToComponentInputs?uF().\u0275providers:[],r?.enableViewTransitions?dF().\u0275providers:[],kK()]}}static forChild(t){return{ngModule:n,providers:[{provide:Pc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Dr({})}return n})();function MK(){return{provide:nF,useFactory:()=>{let n=j(zN),e=j(Oe),t=j(Rc),r=j(V_),i=j(Dc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DK(i,r,n,e,t)}}}function RK(){return{provide:si,useClass:Kb}}function PK(){return{provide:si,useClass:Qy}}function xK(n){return[n.initialNavigation==="disabled"?aF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?oF().\u0275providers:[]]}var LC=new J("");function kK(){return[{provide:LC,useFactory:iF},{provide:Ko,multi:!0,useExisting:LC}]}var fF=()=>{};var mF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},OK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},B_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,o||(I=64)),r.push(t[h],t[g],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):OK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||g==null)throw new BC;let I=s<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),g!==64){let k=u<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},BC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},NK=function(n){let e=mF(n);return B_.encodeByteArray(e,!0)},Vf=function(n){return NK(n).replace(/\./g,"")},j_=function(n){try{return B_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LK=()=>zC().__FIREBASE_DEFAULTS__,FK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&j_(n[1]);return e&&JSON.parse(e)},z_=()=>{try{return fF()||LK()||FK()||VK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$C=n=>{var e,t;return(t=(e=z_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$_=n=>{let e=$C(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},HC=()=>{var n;return(n=z_())===null||n===void 0?void 0:n.config},qC=n=>{var e;return(e=z_())===null||e===void 0?void 0:e[`_${n}`]};var xc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ci(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Bu(n){return S(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function H_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vf(JSON.stringify(t)),Vf(JSON.stringify(o)),""].join(".")}var Ff={};function UK(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ff))Ff[e]?n.emulator.push(e):n.prod.push(e);return n}function BK(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var pF=!1;function ju(n,e){if(typeof window>"u"||typeof document>"u"||!ci(window.location.host)||Ff[n]===e||Ff[n]||pF)return;Ff[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",s=UK().prod.length>0;function o(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,T){I.setAttribute("width","24"),I.setAttribute("id",T),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function u(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{pF=!0,o()},I}function h(I,T){I.setAttribute("id",T),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function g(){let I=BK(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),L=t("learnmore"),O=document.getElementById(L)||document.createElement("a"),q=t("preprendIcon"),ee=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let K=I.element;a(K),h(O,L);let he=u();c(ee,q),K.append(ee,k,O,he),document.body.appendChild(K)}s?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function jK(){var n;let e=(n=z_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _F(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EF(){let n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IF(){return!jK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uf(){try{return typeof indexedDB=="object"}catch{return!1}}function bF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var zK="FirebaseError",Bn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ai.prototype.create)}},ai=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$K(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Bn(i,a,r)}};function $K(n,e){return n.replace(HK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HK=/\{\$([^}]+)}/g;function CF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(gF(s)&&gF(o)){if(!Gi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function gF(n){return n!==null&&typeof n=="object"}function zu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $u(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TF(n,e){let t=new jC(n,e);return t.subscribe.bind(t)}var jC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=UC),i.error===void 0&&(i.error=UC),i.complete===void 0&&(i.complete=UC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function qK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function UC(){}var Qve=4*60*60*1e3;function bt(n){return n&&n._delegate?n._delegate:n}var bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var kc="[DEFAULT]";var GC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new xc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WK(e))try{this.getOrInitializeService({instanceIdentifier:kc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=kc){return this.instances.has(e)}getOptions(e=kc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GK(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kc){return this.component?this.component.multipleInstances?e:kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GK(n){return n===kc?void 0:n}function WK(n){return n.instantiationMode==="EAGER"}var q_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new GC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KK=[],$e=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}($e||{}),QK={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},YK=$e.INFO,JK={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},ZK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wi=class{constructor(e){this.name=e,this._logLevel=YK,this._logHandler=ZK,this._userLogHandler=null,KK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}};var XK=(n,e)=>e.some(t=>n instanceof t),SF,AF;function eQ(){return SF||(SF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tQ(){return AF||(AF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var DF=new WeakMap,KC=new WeakMap,MF=new WeakMap,WC=new WeakMap,YC=new WeakMap;function nQ(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ki(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&DF.set(t,n)}).catch(()=>{}),YC.set(e,n),e}function rQ(n){if(KC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});KC.set(n,e)}var QC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return KC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RF(n){QC=n(QC)}function iQ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(G_(this),e,...t);return MF.set(r,e.sort?e.sort():[e]),Ki(r)}:tQ().includes(n)?function(...e){return n.apply(G_(this),e),Ki(DF.get(this))}:function(...e){return Ki(n.apply(G_(this),e))}}function sQ(n){return typeof n=="function"?iQ(n):(n instanceof IDBTransaction&&rQ(n),XK(n,eQ())?new Proxy(n,QC):n)}function Ki(n){if(n instanceof IDBRequest)return nQ(n);if(WC.has(n))return WC.get(n);let e=sQ(n);return e!==n&&(WC.set(n,e),YC.set(e,n)),e}var G_=n=>YC.get(n);function W_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ki(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ki(o.result),c.oldVersion,c.newVersion,Ki(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var oQ=["get","getKey","getAll","getAllKeys","count"],aQ=["put","add","delete","clear"],JC=new Map;function PF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(JC.get(e))return JC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=aQ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oQ.includes(t)))return;let s=function(o,...a){return S(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return JC.set(e,s),s}RF(n=>fe($({},n),{get:(e,t,r)=>PF(e,t)||n.get(e,t,r),has:(e,t)=>!!PF(e,t)||n.has(e,t)}));var XC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cQ(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cQ(n){let e=n.getComponent();return e?.type==="VERSION"}var eT="@firebase/app",xF="0.13.2";var Ns=new Wi("@firebase/app"),lQ="@firebase/app-compat",uQ="@firebase/analytics-compat",dQ="@firebase/analytics",hQ="@firebase/app-check-compat",fQ="@firebase/app-check",pQ="@firebase/auth",gQ="@firebase/auth-compat",mQ="@firebase/database",yQ="@firebase/data-connect",_Q="@firebase/database-compat",vQ="@firebase/functions",wQ="@firebase/functions-compat",EQ="@firebase/installations",IQ="@firebase/installations-compat",bQ="@firebase/messaging",CQ="@firebase/messaging-compat",TQ="@firebase/performance",SQ="@firebase/performance-compat",AQ="@firebase/remote-config",DQ="@firebase/remote-config-compat",MQ="@firebase/storage",RQ="@firebase/storage-compat",PQ="@firebase/firestore",xQ="@firebase/ai",kQ="@firebase/firestore-compat",OQ="firebase",NQ="11.10.0";var tT="[DEFAULT]",LQ={[eT]:"fire-core",[lQ]:"fire-core-compat",[dQ]:"fire-analytics",[uQ]:"fire-analytics-compat",[fQ]:"fire-app-check",[hQ]:"fire-app-check-compat",[pQ]:"fire-auth",[gQ]:"fire-auth-compat",[mQ]:"fire-rtdb",[yQ]:"fire-data-connect",[_Q]:"fire-rtdb-compat",[vQ]:"fire-fn",[wQ]:"fire-fn-compat",[EQ]:"fire-iid",[IQ]:"fire-iid-compat",[bQ]:"fire-fcm",[CQ]:"fire-fcm-compat",[TQ]:"fire-perf",[SQ]:"fire-perf-compat",[AQ]:"fire-rc",[DQ]:"fire-rc-compat",[MQ]:"fire-gcs",[RQ]:"fire-gcs-compat",[PQ]:"fire-fst",[kQ]:"fire-fst-compat",[xQ]:"fire-vertex","fire-js":"fire-js",[OQ]:"fire-js-all"};var Bf=new Map,FQ=new Map,nT=new Map;function kF(n,e){try{n.container.addComponent(e)}catch(t){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wr(n){let e=n.name;if(nT.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;nT.set(e,n);for(let t of Bf.values())kF(t,n);for(let t of FQ.values())kF(t,n);return!0}function sa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cn(n){return n==null?!1:n.settings!==void 0}var VQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new ai("app","Firebase",VQ);var rT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}};var Qi=NQ;function oT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:tT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ia.create("bad-app-name",{appName:String(i)});if(t||(t=HC()),!t)throw ia.create("no-options");let s=Bf.get(i);if(s){if(Gi(t,s.options)&&Gi(r,s.config))return s;throw ia.create("duplicate-app",{appName:i})}let o=new q_(i);for(let c of nT.values())o.addComponent(c);let a=new rT(t,r,o);return Bf.set(i,a),a}function Ls(n=tT){let e=Bf.get(n);if(!e&&n===tT&&HC())return oT();if(!e)throw ia.create("no-app",{appName:n});return e}function K_(){return Array.from(Bf.values())}function _t(n,e,t){var r;let i=(r=LQ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(a.join(" "));return}wr(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UQ="firebase-heartbeat-database",BQ=1,jf="firebase-heartbeat-store",ZC=null;function FF(){return ZC||(ZC=W_(UQ,BQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),ZC}function jQ(n){return S(this,null,function*(){try{let t=(yield FF()).transaction(jf),r=yield t.objectStore(jf).get(VF(n));return yield t.done,r}catch(e){if(e instanceof Bn)Ns.warn(e.message);else{let t=ia.create("idb-get",{originalErrorMessage:e?.message});Ns.warn(t.message)}}})}function OF(n,e){return S(this,null,function*(){try{let r=(yield FF()).transaction(jf,"readwrite");yield r.objectStore(jf).put(e,VF(n)),yield r.done}catch(t){if(t instanceof Bn)Ns.warn(t.message);else{let r=ia.create("idb-set",{originalErrorMessage:t?.message});Ns.warn(r.message)}}})}function VF(n){return`${n.name}!${n.options.appId}`}var zQ=1024,$Q=30,iT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new sT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>$Q){let o=qQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ns.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=NF(),{heartbeatsToSend:r,unsentEntries:i}=HQ(this._heartbeatsCache.heartbeats),s=Vf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ns.warn(t),""}})}};function NF(){return new Date().toISOString().substring(0,10)}function HQ(n,e=zQ){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var sT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Uf()?bF().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield jQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function LF(n){return Vf(JSON.stringify({version:2,heartbeats:n})).length}function qQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GQ(n){wr(new bn("platform-logger",e=>new XC(e),"PRIVATE")),wr(new bn("heartbeat",e=>new iT(e),"PRIVATE")),_t(eT,xF,n),_t(eT,xF,"esm2017"),_t("fire-js","")}GQ("");var WQ="firebase",KQ="11.10.0";_t(WQ,KQ,"app");function aT(n){n===void 0&&(by(aT),n=j(Tt));let e=n.get(ef);return t=>new be(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Yi=new $o("ANGULARFIRE2_VERSION");function Nc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var oa=(n,e)=>{let t=e?[e]:K_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},qu=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(qu||{}),UF=zb()&&typeof Zone<"u"?qu.WARN:qu.SILENT;var Q_=class{zone;delegate;constructor(e,t=SE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Ji=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(Oe);this.outsideAngular=t.runOutsideAngular(()=>new Q_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Q_(typeof Zone>"u"?void 0:Zone.current,TE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BF=!1;function QQ(n,e){!BF&&(UF>qu.SILENT||zb())&&(BF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),UF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function YQ(n){let e=j(Oe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Oc(n){let e=j(Oe,{optional:!0});return e?e.run(()=>n()):n()}var JQ=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),gn(t,()=>Oc(()=>n.apply(void 0,r)))),lt=(n,e,t)=>(t||=e?qu.WARN:qu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(Ji),o=j(ef),a=j(an)}catch{return QQ(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Oc(()=>o.add())),i[u]=JQ(i[u],r,a));let c=YQ(()=>n.apply(this,i));return e?c instanceof be?c.pipe(Fo(s.outsideAngular),Lo(s.insideAngular),aT(a)):c instanceof Promise?Oc(()=>new Promise((u,h)=>{o.run(()=>c).then(g=>gn(a,()=>Oc(()=>u(g))),g=>gn(a,()=>Oc(()=>h(g))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Oc(()=>c):c instanceof be?c.pipe(Fo(s.outsideAngular),Lo(s.insideAngular)):Oc(()=>c)});var li=class{constructor(e){return e}},Fs=class{constructor(){return K_()}};function ZQ(n){return n&&n.length===1?n[0]:new li(Ls())}var cT=new J("angularfire2._apps"),XQ={provide:li,useFactory:ZQ,deps:[[new cn,cT]]},eY={provide:Fs,deps:[[new cn,cT]]};function tY(n){return(e,t)=>{let r=t.get(Vi);_t("angularfire",Yi.full,"core"),_t("angularfire",Yi.full,"app"),_t("angular",TN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new li(i)}}function jF(n,...e){return En([XQ,eY,{provide:cT,useFactory:tY(n),multi:!0,deps:[Oe,Tt,Ji,...e]}])}var zF=lt(oT,!0);var nY=new Map,rY={activated:!1,tokenObservers:[]},iY={initialized:!1,enabled:!1};function ui(n){return nY.get(n)||Object.assign({},rY)}function GF(){return iY}var sY="https://content-firebaseappcheck.googleapis.com/v1";var oY="exchangeDebugToken",$F={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},twe=24*60*60*1e3;var dT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new xc,this.pending.promise.catch(t=>{}),yield aY(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new xc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aY(n){return new Promise(e=>{setTimeout(e,n)})}var cY={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},aa=new ai("appCheck","AppCheck",cY);function WF(n){if(!ui(n).activated)throw aa.create("use-before-activation",{appName:n.name})}function KF(r,i){return S(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let T=yield o.getHeartbeatsHeader();T&&(s["X-Firebase-Client"]=T)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(T){throw aa.create("fetch-network-error",{originalErrorMessage:T?.message})}if(c.status!==200)throw aa.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(T){throw aa.create("fetch-parse-error",{originalErrorMessage:T?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw aa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let g=Number(h[1])*1e3,I=Date.now();return{token:u.token,expireTimeMillis:I+g,issuedAtTimeMillis:I}})}function QF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sY}/projects/${t}/apps/${r}:${oY}?key=${i}`,body:{debug_token:e}}}var lY="firebase-app-check-database",uY=1,hT="firebase-app-check-store";var Y_=null;function dY(){return Y_||(Y_=new Promise((n,e)=>{try{let t=indexedDB.open(lY,uY);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(aa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hT,{keyPath:"compositeKey"})}}}catch(t){e(aa.create("storage-open",{originalErrorMessage:t?.message}))}}),Y_)}function hY(n,e){return fY(pY(n),e)}function fY(n,e){return S(this,null,function*(){let r=(yield dY()).transaction(hT,"readwrite"),s=r.objectStore(hT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(aa.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function pY(n){return`${n.options.appId}-${n.name}`}var zf=new Wi("@firebase/app-check");function lT(n,e){return Uf()?hY(n,e).catch(t=>{zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YF(){return GF().enabled}function JF(){return S(this,null,function*(){let n=GF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gY={error:"UNKNOWN_ERROR"};function mY(n){return B_.encodeString(JSON.stringify(n),!1)}function fT(n,e=!1,t=!1){return S(this,null,function*(){let r=n.app;WF(r);let i=ui(r),s=i.token,o;if(s&&!$f(s)&&(i.token=void 0,s=void 0),!s){let u=yield i.cachedTokenPromise;u&&($f(u)?s=u:yield lT(r,void 0))}if(!e&&s&&$f(s))return{token:s.token};let a=!1;if(YF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=KF(QF(r,yield JF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield lT(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?zf.warn(u.message):t&&zf.error(u),uT(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield ui(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?zf.warn(u.message):t&&zf.error(u),o=u}let c;return s?o?$f(s)?c={token:s.token,internalError:o}:c=uT(o):(c={token:s.token},i.token=s,yield lT(r,s)):c=uT(o),a&&wY(r,c),c})}function yY(n){return S(this,null,function*(){let e=n.app;WF(e);let{provider:t}=ui(e);if(YF()){let r=yield JF(),{token:i}=yield KF(QF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function _Y(n,e,t,r){let{app:i}=n,s=ui(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&$f(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),HF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>HF(n))}function ZF(n,e){let t=ui(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HF(n){let{app:e}=n,t=ui(e),r=t.tokenRefresher;r||(r=vY(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vY(n){let{app:e}=n;return new dT(()=>S(null,null,function*(){let t=ui(e),r;if(t.token?r=yield fT(n,!0):r=yield fT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ui(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$F.RETRIAL_MIN_WAIT,$F.RETRIAL_MAX_WAIT)}function wY(n,e){let t=ui(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function $f(n){return n.expireTimeMillis-Date.now()>0}function uT(n){return{token:mY(gY),error:n}}var pT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ui(this.app);for(let t of e)ZF(this.app,t.next);return Promise.resolve()}};function EY(n,e){return new pT(n,e)}function IY(n){return{getToken:e=>fT(n,e),getLimitedUseToken:()=>yY(n),addTokenListener:e=>_Y(n,"INTERNAL",e),removeTokenListener:e=>ZF(n.app,e)}}var bY="@firebase/app-check",CY="0.10.1";var TY="app-check",qF="app-check-internal";function SY(){wr(new bn(TY,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return EY(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qF).initialize()})),wr(new bn(qF,n=>{let e=n.getProvider("app-check").getImmediate();return IY(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_t(bY,CY)}SY();var AY="app-check";var ca=class{constructor(){return oa(AY)}};var DY=["localhost","0.0.0.0","127.0.0.1"],pwe=typeof window<"u"&&DY.includes(window.location.hostname);var XF=()=>{};var e2=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},MY=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},t2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,o||(I=64)),r.push(t[h],t[g],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(e2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MY(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||g==null)throw new mT;let I=s<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),g!==64){let k=u<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},mT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},RY=function(n){let e=e2(n);return t2.encodeByteArray(e,!0)},_T=function(n){return RY(n).replace(/\./g,"")},J_=function(n){try{return t2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function n2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PY=()=>n2().__FIREBASE_DEFAULTS__,xY=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kY=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&J_(n[1]);return e&&JSON.parse(e)},r2=()=>{try{return XF()||PY()||xY()||kY()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var i2=n=>r2()?.[`_${n}`];function Hf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function OY(){let n=r2()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a2(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function c2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l2(){return!OY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vT(){try{return typeof indexedDB=="object"}catch{return!1}}function u2(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var NY="FirebaseError",Nr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NY,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vs.prototype.create)}},Vs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LY(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nr(i,a,r)}};function LY(n,e){return n.replace(FY,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var FY=/\{\$([^}]+)}/g;function wT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function d2(n,e){let t=new yT(n,e);return t.subscribe.bind(t)}var yT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");VY(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=gT),i.error===void 0&&(i.error=gT),i.complete===void 0&&(i.complete=gT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function VY(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gT(){}var vwe=4*60*60*1e3;function la(n){return n&&n._delegate?n._delegate:n}var di=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var UY=[],He=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(He||{}),BY={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},jY=He.INFO,zY={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},$Y=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zY[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ua=class{constructor(e){this.name=e,this._logLevel=jY,this._logHandler=$Y,this._userLogHandler=null,UY.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}};var IT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HY(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function HY(n){return n.getComponent()?.type==="VERSION"}var bT="@firebase/app",h2="0.14.4";var Bs=new ua("@firebase/app"),qY="@firebase/app-compat",GY="@firebase/analytics-compat",WY="@firebase/analytics",KY="@firebase/app-check-compat",QY="@firebase/app-check",YY="@firebase/auth",JY="@firebase/auth-compat",ZY="@firebase/database",XY="@firebase/data-connect",eJ="@firebase/database-compat",tJ="@firebase/functions",nJ="@firebase/functions-compat",rJ="@firebase/installations",iJ="@firebase/installations-compat",sJ="@firebase/messaging",oJ="@firebase/messaging-compat",aJ="@firebase/performance",cJ="@firebase/performance-compat",lJ="@firebase/remote-config",uJ="@firebase/remote-config-compat",dJ="@firebase/storage",hJ="@firebase/storage-compat",fJ="@firebase/firestore",pJ="@firebase/ai",gJ="@firebase/firestore-compat",mJ="firebase",yJ="12.4.0";var _J={[bT]:"fire-core",[qY]:"fire-core-compat",[WY]:"fire-analytics",[GY]:"fire-analytics-compat",[QY]:"fire-app-check",[KY]:"fire-app-check-compat",[YY]:"fire-auth",[JY]:"fire-auth-compat",[ZY]:"fire-rtdb",[XY]:"fire-data-connect",[eJ]:"fire-rtdb-compat",[tJ]:"fire-fn",[nJ]:"fire-fn-compat",[rJ]:"fire-iid",[iJ]:"fire-iid-compat",[sJ]:"fire-fcm",[oJ]:"fire-fcm-compat",[aJ]:"fire-perf",[cJ]:"fire-perf-compat",[lJ]:"fire-rc",[uJ]:"fire-rc-compat",[dJ]:"fire-gcs",[hJ]:"fire-gcs-compat",[fJ]:"fire-fst",[gJ]:"fire-fst-compat",[pJ]:"fire-vertex","fire-js":"fire-js",[mJ]:"fire-js-all"};var vJ=new Map,wJ=new Map,f2=new Map;function p2(n,e){try{n.container.addComponent(e)}catch(t){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function da(n){let e=n.name;if(f2.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;f2.set(e,n);for(let t of vJ.values())p2(t,n);for(let t of wJ.values())p2(t,n);return!0}function js(n){return n==null?!1:n.settings!==void 0}var EJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ST=new Vs("app","Firebase",EJ);var Gu=yJ;function Us(n,e,t){let r=_J[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(o.join(" "));return}da(new di(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var IJ="firebase-heartbeat-database",bJ=1,qf="firebase-heartbeat-store",ET=null;function v2(){return ET||(ET=W_(IJ,bJ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ST.create("idb-open",{originalErrorMessage:n.message})})),ET}function CJ(n){return S(this,null,function*(){try{let t=(yield v2()).transaction(qf),r=yield t.objectStore(qf).get(w2(n));return yield t.done,r}catch(e){if(e instanceof Nr)Bs.warn(e.message);else{let t=ST.create("idb-get",{originalErrorMessage:e?.message});Bs.warn(t.message)}}})}function g2(n,e){return S(this,null,function*(){try{let r=(yield v2()).transaction(qf,"readwrite");yield r.objectStore(qf).put(e,w2(n)),yield r.done}catch(t){if(t instanceof Nr)Bs.warn(t.message);else{let r=ST.create("idb-set",{originalErrorMessage:t?.message});Bs.warn(r.message)}}})}function w2(n){return`${n.name}!${n.options.appId}`}var TJ=1024,SJ=30,CT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new TT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=m2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>SJ){let i=DJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bs.warn(e)}})}getHeartbeatsHeader(){return S(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=m2(),{heartbeatsToSend:t,unsentEntries:r}=AJ(this._heartbeatsCache.heartbeats),i=_T(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Bs.warn(e),""}})}};function m2(){return new Date().toISOString().substring(0,10)}function AJ(n,e=TJ){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),y2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var TT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return vT()?u2().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield CJ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return g2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return g2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function y2(n){return _T(JSON.stringify({version:2,heartbeats:n})).length}function DJ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function MJ(n){da(new di("platform-logger",e=>new IT(e),"PRIVATE")),da(new di("heartbeat",e=>new CT(e),"PRIVATE")),Us(bT,h2,n),Us(bT,h2,"esm2020"),Us("fire-js","")}MJ("");function D2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var M2=D2,R2=new Vs("auth","Firebase",D2());var tv=new ua("@firebase/auth");function OJ(n,...e){tv.logLevel<=He.WARN&&tv.warn(`Auth (${Gu}): ${n}`,...e)}function X_(n,...e){tv.logLevel<=He.ERROR&&tv.error(`Auth (${Gu}): ${n}`,...e)}function E2(n,...e){throw VT(n,...e)}function FT(n,...e){return VT(n,...e)}function P2(n,e,t){let r=fe($({},M2()),{[e]:t});return new Vs("auth","Firebase",r).create(e,{appName:n.name})}function ev(n){return P2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return R2.create(n,...e)}function ot(n,e,...t){if(!n)throw VT(e,...t)}function Gf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw X_(e),new Error(e)}function nv(n,e){n||Gf(e)}function NJ(){return I2()==="http:"||I2()==="https:"}function I2(){return typeof self<"u"&&self.location?.protocol||null}function LJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NJ()||a2()||"connection"in navigator)?navigator.onLine:!0}function FJ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,nv(t>e,"Short delay should be less than long delay!"),this.isMobile=s2()||c2()}get(){return LJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function VJ(n,e){nv(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var rv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jJ=new Vc(3e4,6e4);function x2(n,e){return n.tenantId&&!e.tenantId?fe($({},e),{tenantId:n.tenantId}):e}function cv(s,o,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return k2(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let g=wT($({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=$({method:e,headers:I},u);return o2()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&Hf(n.emulatorConfig.host)&&(T.credentials="include"),rv.fetch()(yield O2(n,n.config.apiHost,t,g),T)}))})}function k2(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=$($({},UJ),e);try{let i=new MT(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Z_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Z_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Z_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Z_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw P2(n,h,u);E2(n,h)}}catch(i){if(i instanceof Nr)throw i;E2(n,"network-request-failed",{message:String(i)})}})}function O2(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?VJ(n.config,i):`${n.config.apiScheme}://${i}`;return BJ.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var MT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(FT(this.auth,"network-request-failed")),jJ.get())})}};function Z_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=FT(n,e,r);return i.customData._tokenResponse=t,i}function zJ(n,e){return S(this,null,function*(){return cv(n,"POST","/v1/accounts:delete",e)})}function iv(n,e){return S(this,null,function*(){return cv(n,"POST","/v1/accounts:lookup",e)})}function Wf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function N2(n,e=!1){return S(this,null,function*(){let t=la(n),r=yield t.getIdToken(e),i=L2(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wf(AT(i.auth_time)),issuedAtTime:Wf(AT(i.iat)),expirationTime:Wf(AT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function AT(n){return Number(n)*1e3}function L2(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return X_("JWT malformed, contained fewer than 3 sections"),null;try{let i=J_(t);return i?JSON.parse(i):(X_("Failed to decode base64 JWT payload"),null)}catch(i){return X_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function b2(n){let e=L2(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function RT(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nr&&$J(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function $J({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var PT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Qf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wf(this.lastLoginAt),this.creationTime=Wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sv(n){return S(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield RT(n,iv(e,{idToken:t}));ot(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?V2(i.providerUserInfo):[],o=HJ(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function F2(n){return S(this,null,function*(){let e=la(n);yield sv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HJ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V2(n){return n.map(r=>{var i=r,{providerId:e}=i,t=xh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function qJ(n,e){return S(this,null,function*(){let t=yield k2(n,{},()=>S(null,null,function*(){let r=wT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield O2(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Hf(n.emulatorConfig.host)&&(c.credentials="include"),rv.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GJ(n,e){return S(this,null,function*(){return cv(n,"POST","/v2/accounts:revokeToken",x2(n,e))})}var Kf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");let t=b2(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield qJ(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ot(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ot(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Gf("not implemented")}};function ha(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Lc=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=xh(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield RT(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return N2(this,e)}reload(){return F2(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(fe($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield sv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(js(this.auth.app))return Promise.reject(ev(this.auth));let e=yield this.getIdToken();return yield RT(this,zJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return fe($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:I,isAnonymous:T,providerData:k,stsTokenManager:L}=t;ot(g&&L,e,"internal-error");let O=Kf.fromJSON(this.name,L);ot(typeof g=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),ot(typeof I=="boolean",e,"internal-error"),ot(typeof T=="boolean",e,"internal-error"),ha(s,e.name),ha(o,e.name),ha(a,e.name),ha(c,e.name),ha(u,e.name),ha(h,e.name);let q=new n({uid:g,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:T,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:O,createdAt:u,lastLoginAt:h});return k&&Array.isArray(k)&&(q.providerData=k.map(ee=>$({},ee))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new Kf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sv(s),s})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];ot(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?V2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Kf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var C2=new Map;function Fc(n){nv(n instanceof Function,"Expected a class definition");let e=C2.get(n);return e?(nv(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,C2.set(n,e),e)}var WJ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),xT=WJ;function DT(n,e,t){return`firebase:${n}:${e}:${t}`}var ov=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=DT(this.userKey,i.apiKey,s),this.fullPersistenceKey=DT("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield iv(this.auth,{idToken:e}).catch(()=>{});return t?Lc._fromGetAccountInfoResponse(this.auth,t,e):null}return Lc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(Fc(xT),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Fc(xT),o=DT(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(o);if(h){let g;if(typeof h=="string"){let I=yield iv(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield Lc._fromGetAccountInfoResponse(e,I,h)}else g=Lc._fromJSON(e,h);u!==s&&(a=g),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,r))})}};function T2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JJ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KJ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XJ(e))return"Blackberry";if(eZ(e))return"Webos";if(QJ(e))return"Safari";if((e.includes("chrome/")||YJ(e))&&!e.includes("edge/"))return"Chrome";if(ZJ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KJ(n=Er()){return/firefox\//i.test(n)}function QJ(n=Er()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YJ(n=Er()){return/crios\//i.test(n)}function JJ(n=Er()){return/iemobile/i.test(n)}function ZJ(n=Er()){return/android/i.test(n)}function XJ(n=Er()){return/blackberry/i.test(n)}function eZ(n=Er()){return/webos/i.test(n)}function U2(n,e=[]){let t;switch(n){case"Browser":t=T2(Er());break;case"Worker":t=`${T2(Er())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gu}/${r}`}var kT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function tZ(t){return S(this,arguments,function*(n,e={}){return cv(n,"GET","/v2/passwordPolicy",x2(n,e))})}var nZ=6,OT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nZ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var NT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new av(this),this.idTokenSubscription=new av(this),this.beforeStateQueue=new kT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fc(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield ov.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield iv(this,{idToken:e}),r=yield Lc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){if(js(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield sv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=FJ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(js(this.app))return Promise.reject(ev(this));let t=e?la(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return js(this.app)?Promise.reject(ev(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return js(this.app)?Promise.reject(ev(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Fc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield tZ(this),t=new OT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield GJ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Fc(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=yield ov.create(this,[Fc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return S(this,null,function*(){if(js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&OJ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function rZ(n){return la(n)}var av=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=d2(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iZ={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sZ(n){iZ=n}function oZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function aZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function UT(n,e,t,r){return la(n).onAuthStateChanged(e,t,r)}var Qwe=oZ("rcb"),Ywe=new Vc(3e4,6e4);var Jwe=new Vc(2e3,1e4);var Zwe=10*60*1e3;var Xwe=new Vc(3e4,6e4);var eEe=new Vc(5e3,15e3);var tEe=encodeURIComponent("fac");var S2="@firebase/auth",A2="1.11.0";var LT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lZ(n){da(new di("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ot(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U2(n)},u=new NT(r,i,s,c);return aZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),da(new di("auth-internal",e=>{let t=rZ(e.getProvider("auth").getImmediate());return(r=>new LT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(S2,A2,cZ(n)),Us(S2,A2,"esm2020")}var uZ=5*60,nEe=i2("authIdTokenMaxAge")||uZ;function dZ(){return document.getElementsByTagName("head")?.[0]??document}sZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=FT("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",dZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lZ("Browser");function B2(n){return new be(function(e){var t=UT(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function nV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rV=nV,iV=new ai("auth","Firebase",nV());var pv=new Wi("@firebase/auth");function pZ(n,...e){pv.logLevel<=$e.WARN&&pv.warn(`Auth (${Qi}): ${n}`,...e)}function uv(n,...e){pv.logLevel<=$e.ERROR&&pv.error(`Auth (${Qi}): ${n}`,...e)}function Lr(n,...e){throw cS(n,...e)}function hi(n,...e){return cS(n,...e)}function aS(n,e,t){let r=Object.assign(Object.assign({},rV()),{[e]:t});return new ai("auth","Firebase",r).create(e,{appName:n.name})}function Hs(n){return aS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gZ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(n,"argument-error"),aS(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iV.create(n,...e)}function Ee(n,e,...t){if(!n)throw cS(e,...t)}function zs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw uv(e),new Error(e)}function qs(n,e){n||zs(e)}function zT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function mZ(){return j2()==="http:"||j2()==="https:"}function j2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function yZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mZ()||vF()||"connection"in navigator)?navigator.onLine:!0}function _Z(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Uc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qs(t>e,"Short delay should be less than long delay!"),this.isMobile=yF()||wF()}get(){return yZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lS(n,e){qs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var gv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var vZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var wZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EZ=new Uc(3e4,6e4);function ga(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Gs(s,o,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return sV(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let g=zu(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=Object.assign({method:e,headers:I},u);return _F()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&ci(n.emulatorConfig.host)&&(T.credentials="include"),gv.fetch()(yield oV(n,n.config.apiHost,t,g),T)}))})}function sV(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},vZ),e);try{let i=new $T(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw lv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw lv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw lv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aS(n,h,u);Lr(n,h)}}catch(i){if(i instanceof Bn)throw i;Lr(n,"network-request-failed",{message:String(i)})}})}function rp(s,o,a,c){return S(this,arguments,function*(n,e,t,r,i={}){let u=yield Gs(n,e,t,r,i);return"mfaPendingCredential"in u&&Lr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function oV(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?lS(n.config,i):`${n.config.apiScheme}://${i}`;return wZ.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function IZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var $T=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),EZ.get())})}};function lv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=hi(n,e,r);return i.customData._tokenResponse=t,i}function z2(n){return n!==void 0&&n.enterprise!==void 0}var HT=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IZ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function bZ(n,e){return S(this,null,function*(){return Gs(n,"GET","/v2/recaptchaConfig",ga(n,e))})}function CZ(n,e){return S(this,null,function*(){return Gs(n,"POST","/v1/accounts:delete",e)})}function mv(n,e){return S(this,null,function*(){return Gs(n,"POST","/v1/accounts:lookup",e)})}function Jf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function uS(n,e=!1){return S(this,null,function*(){let t=bt(n),r=yield t.getIdToken(e),i=dS(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Jf(BT(i.auth_time)),issuedAtTime:Jf(BT(i.iat)),expirationTime:Jf(BT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function BT(n){return Number(n)*1e3}function dS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return uv("JWT malformed, contained fewer than 3 sections"),null;try{let i=j_(t);return i?JSON.parse(i):(uv("Failed to decode base64 JWT payload"),null)}catch(i){return uv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $2(n){let e=dS(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ku(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Bn&&TZ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function TZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var qT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jf(this.lastLoginAt),this.creationTime=Jf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yv(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ku(n,mv(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aV(s.providerUserInfo):[],a=SZ(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,h=c?u:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function hS(n){return S(this,null,function*(){let e=bt(n);yield yv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function SZ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aV(n){return n.map(e=>{var{providerId:t}=e,r=am(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AZ(n,e){return S(this,null,function*(){let t=yield sV(n,{},()=>S(null,null,function*(){let r=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield oV(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ci(n.emulatorConfig.host)&&(c.credentials="include"),gv.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function DZ(n,e){return S(this,null,function*(){return Gs(n,"POST","/v2/accounts:revokeToken",ga(n,e))})}var Zf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=$2(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield AZ(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return zs("not implemented")}};function fa(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xf(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield Ku(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return uS(this,e)}reload(){return hS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Cn(this.auth.app))return Promise.reject(Hs(this.auth));let e=yield this.getIdToken();return yield Ku(this,CZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,T=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,L=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ee=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:he,isAnonymous:je,providerData:ge,stsTokenManager:M}=t;Ee(K&&M,e,"internal-error");let E=Zf.fromJSON(this.name,M);Ee(typeof K=="string",e,"internal-error"),fa(g,e.name),fa(I,e.name),Ee(typeof he=="boolean",e,"internal-error"),Ee(typeof je=="boolean",e,"internal-error"),fa(T,e.name),fa(k,e.name),fa(L,e.name),fa(O,e.name),fa(q,e.name),fa(ee,e.name);let C=new n({uid:K,auth:e,email:I,emailVerified:he,displayName:g,isAnonymous:je,photoURL:k,phoneNumber:T,tenantId:L,stsTokenManager:E,createdAt:q,lastLoginAt:ee});return ge&&Array.isArray(ge)&&(C.providerData=ge.map(D=>Object.assign({},D))),O&&(C._redirectEventId=O),C}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new Zf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yv(s),s})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?aV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Zf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var H2=new Map;function $s(n){qs(n instanceof Function,"Expected a class definition");let e=H2.get(n);return e?(qs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,H2.set(n,e),e)}var MZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),GT=MZ;function dv(n,e,t){return`firebase:${n}:${e}:${t}`}var _v=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=dv(this.userKey,i.apiKey,s),this.fullPersistenceKey=dv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield mv(this.auth,{idToken:e}).catch(()=>{});return t?pa._fromGetAccountInfoResponse(this.auth,t,e):null}return pa._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n($s(GT),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||$s(GT),o=dv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(o);if(h){let g;if(typeof h=="string"){let I=yield mv(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield pa._fromGetAccountInfoResponse(e,I,h)}else g=pa._fromJSON(e,h);u!==s&&(a=g),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,r))})}};function q2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fV(e))return"Blackberry";if(pV(e))return"Webos";if(lV(e))return"Safari";if((e.includes("chrome/")||uV(e))&&!e.includes("edge/"))return"Chrome";if(hV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function cV(n=mn()){return/firefox\//i.test(n)}function lV(n=mn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uV(n=mn()){return/crios\//i.test(n)}function dV(n=mn()){return/iemobile/i.test(n)}function hV(n=mn()){return/android/i.test(n)}function fV(n=mn()){return/blackberry/i.test(n)}function pV(n=mn()){return/webos/i.test(n)}function fS(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RZ(n=mn()){var e;return fS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PZ(){return EF()&&document.documentMode===10}function gV(n=mn()){return fS(n)||hV(n)||pV(n)||fV(n)||/windows phone/i.test(n)||dV(n)}function mV(n,e=[]){let t;switch(n){case"Browser":t=q2(mn());break;case"Worker":t=`${q2(mn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qi}/${r}`}var WT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function xZ(t){return S(this,arguments,function*(n,e={}){return Gs(n,"GET","/v2/passwordPolicy",ga(n,e))})}var kZ=6,KT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:kZ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var QT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new WT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$s(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield _v.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield mv(this,{idToken:e}),r=yield pa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Cn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield yv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=_Z()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Cn(this.app))return Promise.reject(Hs(this));let t=e?bt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Cn(this.app)?Promise.reject(Hs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Cn(this.app)?Promise.reject(Hs(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence($s(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield xZ(this),t=new KT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ai("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield DZ(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$s(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield _v.create(this,[$s(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&pZ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ma(n){return bt(n)}var vv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TF(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OZ(n){Dv=n}function yV(n){return Dv.loadJS(n)}function NZ(){return Dv.recaptchaEnterpriseScript}function LZ(){return Dv.gapiScript}function _V(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var YT=class{constructor(){this.enterprise=new JT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},JT=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var FZ="recaptcha-enterprise",vV="NO_RECAPTCHA",ZT=class{constructor(e){this.type=FZ,this.auth=ma(e)}verify(e="verify",t=!1){return S(this,null,function*(){function r(s){return S(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>S(null,null,function*(){bZ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new HT(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;z2(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(vV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YT().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&z2(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=NZ();c.length!==0&&(c+=a),yV(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})})}};function Yf(n,e,t,r=!1,i=!1){return S(this,null,function*(){let s=new ZT(n),o;if(i)o=vV;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function XT(n,e,t,r,i){return S(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Yf(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>S(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Yf(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield Yf(n,e,t);return r(n,a).catch(c=>S(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Yf(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Yf(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function pS(n,e){let t=sa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Gi(s,e??{}))return i;Lr(i,"already-initialized")}return t.initialize({options:e})}function VZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($s);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gS(n,e,t){let r=ma(n);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=wV(e),{host:o,port:a}=UZ(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Gi(u,r.config.emulator)&&Gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ci(o)?(Bu(`${s}//${o}${c}`),ju("Auth",!0)):i||BZ()}function wV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UZ(n){let e=wV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:G2(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:G2(o)}}}function G2(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function BZ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,t){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}};function jZ(n,e){return S(this,null,function*(){return Gs(n,"POST","/v1/accounts:signUp",e)})}function zZ(n,e){return S(this,null,function*(){return rp(n,"POST","/v1/accounts:signInWithPassword",ga(n,e))})}function $Z(n,e){return S(this,null,function*(){return rp(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))})}function HZ(n,e){return S(this,null,function*(){return rp(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))})}var ep=class n extends Qu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return XT(e,t,"signInWithPassword",zZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $Z(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return XT(e,r,"signUpPassword",jZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HZ(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Wu(n,e){return S(this,null,function*(){return rp(n,"POST","/v1/accounts:signInWithIdp",ga(n,e))})}var qZ="http://localhost",wv=class n extends Qu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=am(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Wu(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Wu(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Wu(e,t)}buildRequest(){let e={requestUri:qZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zu(t)}return e}};function GZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WZ(n){let e=$u(Hu(n)).link,t=e?$u(Hu(e)).deep_link_id:null,r=$u(Hu(n)).deep_link_id;return(r?$u(Hu(r)).link:null)||r||t||e||n}var Ev=class n{constructor(e){var t,r,i,s,o,a;let c=$u(Hu(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=GZ((i=c.mode)!==null&&i!==void 0?i:null);Ee(u&&h&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=WZ(e);try{return new n(t)}catch{return null}}};var EV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ep._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ev.parseLink(r);return Ee(i,"argument-error"),ep._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),tp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Iv=class extends tp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var mS=(()=>{class n extends Iv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return wv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function KZ(n,e){return S(this,null,function*(){return rp(n,"POST","/v1/accounts:signUp",ga(n,e))})}var Yu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return S(this,null,function*(){let s=yield pa._fromIdTokenResponse(e,r,i),o=W2(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return S(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=W2(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function W2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var eS=class n extends Bn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function IV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?eS._fromErrorAndOperation(n,s,e,r):s})}function QZ(n,e,t=!1){return S(this,null,function*(){let r=yield Ku(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Yu._forOperation(n,"link",r)})}function YZ(n,e,t=!1){return S(this,null,function*(){let{auth:r}=n;if(Cn(r.app))return Promise.reject(Hs(r));let i="reauthenticate";try{let s=yield Ku(n,IV(r,i,e,n),t);Ee(s.idToken,r,"internal-error");let o=dS(s.idToken);Ee(o,r,"internal-error");let{sub:a}=o;return Ee(n.uid===a,r,"user-mismatch"),Yu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Lr(r,"user-mismatch"),s}})}function bV(n,e,t=!1){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(Hs(n));let r="signIn",i=yield IV(n,r,e),s=yield Yu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function yS(n,e){return S(this,null,function*(){return bV(ma(n),e)})}function CV(n){return S(this,null,function*(){let e=ma(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function _S(n,e,t){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(Hs(n));let r=ma(n),o=yield XT(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KZ,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CV(n),c}),a=yield Yu._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function vS(n,e,t){return Cn(n.app)?Promise.reject(Hs(n)):yS(bt(n),EV.credential(e,t)).catch(r=>S(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&CV(n),r}))}function JZ(n,e){return S(this,null,function*(){return Gs(n,"POST","/v1/accounts:update",e)})}function wS(r,i){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=bt(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Ku(s,JZ(s.auth,a));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let u=s.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=s.displayName,u.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function ES(n,e,t,r){return bt(n).onIdTokenChanged(e,t,r)}function IS(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function bS(n){return bt(n).signOut()}var bv="__sak";var Cv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bv,"1"),this.storage.removeItem(bv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ZZ=1e3,XZ=10,eX=(()=>{class n extends Cv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);PZ()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,XZ):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},ZZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return S(this,null,function*(){yield Ai(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return S(this,null,function*(){let r=yield Ai(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return S(this,null,function*(){yield Ai(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),TV=eX;var tX=(()=>{class n extends Cv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),CS=tX;function nX(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var rX=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>S(this,null,function*(){return h(r.origin,o)})),u=yield nX(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function TS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return S(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=TS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===u)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Zi(){return window}function iX(n){Zi().location.href=n}function SV(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}function sX(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function oX(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function aX(){return SV()?self:null}var AV="firebaseLocalStorageDb",cX=1,Tv="firebaseLocalStorage",DV="fbase_key",Bc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Mv(n,e){return n.transaction([Tv],e?"readwrite":"readonly").objectStore(Tv)}function lX(){let n=indexedDB.deleteDatabase(AV);return new Bc(n).toPromise()}function nS(){let n=indexedDB.open(AV,cX);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Tv,{keyPath:DV})}catch(i){t(i)}}),n.addEventListener("success",()=>S(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Tv)?e(r):(r.close(),yield lX(),e(yield nS()))}))})}function K2(n,e,t){return S(this,null,function*(){let r=Mv(n,!0).put({[DV]:e,value:t});return new Bc(r).toPromise()})}function uX(n,e){return S(this,null,function*(){let t=Mv(n,!1).get(e),r=yield new Bc(t).toPromise();return r===void 0?null:r.value})}function Q2(n,e){let t=Mv(n,!0).delete(e);return new Bc(t).toPromise()}var dX=800,hX=3,fX=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield nS(),this.db)})}_withRetries(t){return S(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>hX)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return SV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=rX._getInstance(aX()),this.receiver._subscribe("keyChanged",(t,r)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,r;if(this.activeServiceWorker=yield sX(),!this.activeServiceWorker)return;this.sender=new tS(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||oX()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nS();return yield K2(t,bv,"1"),yield Q2(t,bv),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>K2(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let r=yield this._withRetries(i=>uX(i,t));return this.localCache[t]=r,r})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>Q2(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(s=>{let o=Mv(s,!1).getAll();return new Bc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),dX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),MV=fX;var qIe=_V("rcb"),GIe=new Uc(3e4,6e4);function RV(n,e){return e?$s(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var np=class extends Qu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function pX(n){return bV(n.auth,new np(n),n.bypassAuthState)}function gX(n){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),YZ(t,new np(n),n.bypassAuthState)}function mX(n){return S(this,null,function*(){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),QZ(t,new np(n),n.bypassAuthState)})}var Sv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pX;case"linkViaPopup":case"linkViaRedirect":return mX;case"reauthViaPopup":case"reauthViaRedirect":return gX;default:Lr(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var yX=new Uc(2e3,1e4);function SS(n,e,t){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(hi(n,"operation-not-supported-in-this-environment"));let r=ma(n);gZ(n,e,tp);let i=RV(r,t);return new _X(r,"signInViaPopup",e,i).executeNotNull()})}var _X=(()=>{class n extends Sv{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return Ee(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){qs(this.filter.length===1,"Popup operations only handle one event");let t=TS();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yX.get())};t()}}n.currentPopupAction=null;return n})(),vX="pendingRedirect",hv=new Map,rS=class n extends Sv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return S(this,null,function*(){let e=hv.get(this.auth._key());if(!e){try{let r=(yield wX(this.resolver,this.auth))?yield Ai(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}hv.set(this.auth._key(),e)}return this.bypassAuthState||hv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return Ai(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ai(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function wX(n,e){return S(this,null,function*(){let t=bX(e),r=IX(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function EX(n,e){hv.set(n._key(),e)}function IX(n){return $s(n._redirectPersistence)}function bX(n){return dv(vX,n.config.apiKey,n.name)}function CX(n,e,t=!1){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(Hs(n));let r=ma(n),i=RV(r,e),o=yield new rS(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var TX=10*60*1e3,iS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!PV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(hi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TX&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y2(e))}saveEventToCache(e){this.cachedEventUids.add(Y2(e)),this.lastProcessedEventTime=Date.now()}};function Y2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function SX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PV(n);default:return!1}}function AX(t){return S(this,arguments,function*(n,e={}){return Gs(n,"GET","/v1/projects",e)})}var DX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MX=/^https?/;function RX(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield AX(n);for(let t of e)try{if(PX(t))return}catch{}Lr(n,"unauthorized-domain")})}function PX(n){let e=zT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!MX.test(t))return!1;if(DX.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var xX=new Uc(3e4,6e4);function J2(){let n=Zi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kX(n){return new Promise((e,t)=>{var r,i,s;function o(){J2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J2(),t(hi(n,"network-request-failed"))},timeout:xX.get()})}if(!((i=(r=Zi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zi().gapi)===null||s===void 0)&&s.load)o();else{let a=_V("iframefcb");return Zi()[a]=()=>{gapi.load?o():t(hi(n,"network-request-failed"))},yV(`${LZ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw fv=null,e})}var fv=null;function OX(n){return fv=fv||kX(n),fv}var NX=new Uc(5e3,15e3),LX="__/auth/iframe",FX="emulator/auth/iframe",VX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BX(n){let e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lS(e,FX):`https://${n.config.authDomain}/${LX}`,r={apiKey:e.apiKey,appName:n.name,v:Qi},i=UX.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zu(r).slice(1)}`}function jX(n){return S(this,null,function*(){let e=yield OX(n),t=Zi().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:BX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VX,dontclear:!0},r=>new Promise((i,s)=>S(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=hi(n,"network-request-failed"),a=Zi().setTimeout(()=>{s(o)},NX.get());function c(){Zi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var zX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$X=500,HX=600,qX="_blank",GX="http://localhost",Av=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function WX(n,e,t,r=$X,i=HX){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},zX),{width:r.toString(),height:i.toString(),top:s,left:o}),u=mn().toLowerCase();t&&(a=uV(u)?qX:t),cV(u)&&(e=e||GX,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[T,k])=>`${I}${T}=${k},`,"");if(RZ(u)&&a!=="_self")return KX(e||"",a),new Av(null);let g=window.open(e||"",a,h);Ee(g,n,"popup-blocked");try{g.focus()}catch{}return new Av(g)}function KX(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var QX="__/auth/handler",YX="emulator/auth/handler",JX=encodeURIComponent("fac");function Z2(n,e,t,r,i,s){return S(this,null,function*(){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qi,eventId:i};if(e instanceof tp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",CF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof Iv){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),u=c?`#${JX}=${encodeURIComponent(c)}`:"";return`${ZX(n)}?${zu(a).slice(1)}${u}`})}function ZX({config:n}){return n.emulator?lS(n,YX):`https://${n.authDomain}/${QX}`}var jT="webStorageSupport",sS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CS,this._completeRedirectFn=CX,this._overrideRedirectResult=EX}_openPopup(e,t,r,i){return S(this,null,function*(){var s;qs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Z2(e,t,r,zT(),i);return WX(e,o,TS())})}_openRedirect(e,t,r,i){return S(this,null,function*(){yield this._originValidation(e);let s=yield Z2(e,t,r,zT(),i);return iX(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(qs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return S(this,null,function*(){let t=yield jX(e),r=new iS(e);return t.register("authEvent",i=>(Ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jT,{type:jT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[jT];o!==void 0&&t(!!o),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gV()||lV()||fS()}},xV=sS;var X2="@firebase/auth",eV="1.10.8";var oS=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function XX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eee(n){wr(new bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mV(n)},u=new QT(r,i,s,c);return VZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wr(new bn("auth-internal",e=>{let t=ma(e.getProvider("auth").getImmediate());return(r=>new oS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(X2,eV,XX(n)),_t(X2,eV,"esm2017")}var tee=5*60,nee=qC("authIdTokenMaxAge")||tee,tV=null,ree=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>nee)return;let i=t?.token;tV!==i&&(tV=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function AS(n=Ls()){let e=sa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pS(n,{popupRedirectResolver:xV,persistence:[MV,TV,CS]}),r=qC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=ree(s.toString());IS(t,o,()=>o(t.currentUser)),ES(t,a=>o(a))}}let i=$C("auth");return i&&gS(t,`http://${i}`),t}function iee(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}OZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=hi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",iee().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eee("Browser");var kV="auth",jc=class{constructor(e){return e}},zc=class{constructor(){return oa(kV)}};var DS=new J("angularfire2.auth-instances");function qee(n,e){let t=Nc(kV,n,e);return t&&new jc(t)}function Gee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jc(r)}}var Wee={provide:zc,deps:[[new cn,DS]]},Kee={provide:jc,useFactory:qee,deps:[[new cn,DS],li]};function OV(n,...e){return _t("angularfire",Yi.full,"auth"),En([Kee,Wee,{provide:DS,useFactory:Gee(n),multi:!0,deps:[Oe,Tt,Ji,Fs,[new cn,ca],...e]}])}var NV=lt(B2,!0);var LV=lt(_S,!0,2);var FV=lt(AS,!0);var VV=lt(vS,!0,2);var UV=lt(SS,!0,2);var BV=lt(bS,!0,2);var jV=lt(wS,!0,2);var zV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$V={};var Ws,MS;(function(){var n;function e(M,E){function C(){}C.prototype=E.prototype,M.F=E.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(D,A,x){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,E,C){C||(C=0);let D=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;A<16;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=M.g[0],C=M.g[1],A=M.g[2];let x=M.g[3],b;b=E+(x^C&(A^x))+D[0]+3614090360&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[1]+3905402710&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[2]+606105819&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[5]+1200080426&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[6]+2821735955&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[9]+2336552879&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[10]+4294925233&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[13]+4254626195&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[14]+2792965006&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^x&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[6]+3225465664&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[11]+643717713&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[10]+38016083&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[15]+3634488961&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[14]+3275163606&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[3]+4107603335&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[2]+4243563512&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[7]+1735328473&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^x)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[8]+2272392833&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[11]+1839030562&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[4]+1272893353&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[7]+4139469664&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[0]+3936430074&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[3]+3572445317&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[12]+3873151461&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[15]+530742520&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~x))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[7]+1126891415&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[14]+2878612391&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[3]+2399980690&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[10]+4293915773&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[15]+4264355552&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[6]+2734768916&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[11]+3174756917&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[2]+718787259&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+x&4294967295}r.prototype.v=function(M,E){E===void 0&&(E=M.length);let C=E-this.blockSize,D=this.C,A=this.h,x=0;for(;x<E;){if(A==0)for(;x<=C;)i(this,M,x),x+=this.blockSize;if(typeof M=="string"){for(;x<E;)if(D[A++]=M.charCodeAt(x++),A==this.blockSize){i(this,D),A=0;break}}else for(;x<E;)if(D[A++]=M[x++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;E=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=E&255,E/=256;for(this.v(M),M=Array(16),E=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)M[E++]=this.g[C]>>>D&255;return M};function s(M,E){var C=a;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=E(M)}function o(M,E){this.h=E;let C=[],D=!0;for(let A=M.length-1;A>=0;A--){let x=M[A]|0;D&&x==E||(C[A]=x,D=!1)}this.g=C}var a={};function c(M){return-128<=M&&M<128?s(M,function(E){return new o([E|0],E<0?-1:0)}):new o([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return g;if(M<0)return O(u(-M));let E=[],C=1;for(let D=0;M>=C;D++)E[D]=M/C|0,C*=4294967296;return new o(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return O(h(M.substring(1),E));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');let C=u(Math.pow(E,8)),D=g;for(let x=0;x<M.length;x+=8){var A=Math.min(8,M.length-x);let b=parseInt(M.substring(x,x+A),E);A<8?(A=u(Math.pow(E,A)),D=D.j(A).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var g=c(0),I=c(1),T=c(16777216);n=o.prototype,n.m=function(){if(L(this))return-O(this).m();let M=0,E=1;for(let C=0;C<this.g.length;C++){let D=this.i(C);M+=(D>=0?D:4294967296+D)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(L(this))return"-"+O(this).toString(M);let E=u(Math.pow(M,6));var C=this;let D="";for(;;){let A=he(C,E).g;C=q(C,A.j(E));let x=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=A,k(C))return x+D;for(;x.length<6;)x="0"+x;D=x+D}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=q(this,M),L(M)?-1:k(M)?0:1};function O(M){let E=M.g.length,C=[];for(let D=0;D<E;D++)C[D]=~M.g[D];return new o(C,~M.h).add(I)}n.abs=function(){return L(this)?O(this):this},n.add=function(M){let E=Math.max(this.g.length,M.g.length),C=[],D=0;for(let A=0;A<=E;A++){let x=D+(this.i(A)&65535)+(M.i(A)&65535),b=(x>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);D=b>>>16,x&=65535,b&=65535,C[A]=b<<16|x}return new o(C,C[C.length-1]&-2147483648?-1:0)};function q(M,E){return M.add(O(E))}n.j=function(M){if(k(this)||k(M))return g;if(L(this))return L(M)?O(this).j(O(M)):O(O(this).j(M));if(L(M))return O(this.j(O(M)));if(this.l(T)<0&&M.l(T)<0)return u(this.m()*M.m());let E=this.g.length+M.g.length,C=[];for(var D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let A=0;A<M.g.length;A++){let x=this.i(D)>>>16,b=this.i(D)&65535,Ct=M.i(A)>>>16,zn=M.i(A)&65535;C[2*D+2*A]+=b*zn,ee(C,2*D+2*A),C[2*D+2*A+1]+=x*zn,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=x*Ct,ee(C,2*D+2*A+2)}for(M=0;M<E;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=E;M<2*E;M++)C[M]=0;return new o(C,0)};function ee(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function K(M,E){this.g=M,this.h=E}function he(M,E){if(k(E))throw Error("division by zero");if(k(M))return new K(g,g);if(L(M))return E=he(O(M),E),new K(O(E.g),O(E.h));if(L(E))return E=he(M,O(E)),new K(O(E.g),E.h);if(M.g.length>30){if(L(M)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;D.l(M)<=0;)C=je(C),D=je(D);var A=ge(C,1),x=ge(D,1);for(D=ge(D,2),C=ge(C,2);!k(D);){var b=x.add(D);b.l(M)<=0&&(A=A.add(C),x=b),D=ge(D,1),C=ge(C,1)}return E=q(M,A.j(E)),new K(A,E)}for(A=g;M.l(E)>=0;){for(C=Math.max(1,Math.floor(M.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),x=u(C),b=x.j(E);L(b)||b.l(M)>0;)C-=D,x=u(C),b=x.j(E);k(x)&&(x=I),A=A.add(x),M=q(M,b)}return new K(A,M)}n.B=function(M){return he(this,M).h},n.and=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)&M.i(D);return new o(C,this.h&M.h)},n.or=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)|M.i(D);return new o(C,this.h|M.h)},n.xor=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)^M.i(D);return new o(C,this.h^M.h)};function je(M){let E=M.g.length+1,C=[];for(let D=0;D<E;D++)C[D]=M.i(D)<<1|M.i(D-1)>>>31;return new o(C,M.h)}function ge(M,E){let C=E>>5;E%=32;let D=M.g.length-C,A=[];for(let x=0;x<D;x++)A[x]=E>0?M.i(x+C)>>>E|M.i(x+C+1)<<32-E:M.i(x+C);return new o(A,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,MS=$V.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ws=$V.Integer=o}).apply(typeof zV<"u"?zV:typeof self<"u"?self:typeof window<"u"?window:{});var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ks={};var RS,Yee,Ju,PS,ip,Pv,xS,kS,OS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rv=="object"&&Rv];for(var p=0;p<d.length;++p){var w=d[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,p){if(p)e:{var w=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var F=d[P];if(!(F in w))break e;w=w[F]}d=d[d.length-1],P=w[d],p=p(P),p!=P&&p!=null&&e(w,d,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(p){var w=[],P;for(P in p)Object.prototype.hasOwnProperty.call(p,P)&&w.push([P,p[P]]);return w}});var s=s||{},o=this||self;function a(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function c(d,p,w){return d.call.apply(d.bind,arguments)}function u(d,p,w){return u=c,u.apply(null,arguments)}function h(d,p){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function g(d,p){function w(){}w.prototype=p.prototype,d.Z=p.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(P,F,U){for(var Z=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Z[Ie-2]=arguments[Ie];return p.prototype[F].apply(P,Z)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){let p=d.length;if(p>0){let w=Array(p);for(let P=0;P<p;P++)w[P]=d[P];return w}return[]}function k(d,p){for(let P=1;P<arguments.length;P++){let F=arguments[P];var w=typeof F;if(w=w!="object"?w:F?Array.isArray(F)?"array":w:"null",w=="array"||w=="object"&&typeof F.length=="number"){w=d.length||0;let U=F.length||0;d.length=w+U;for(let Z=0;Z<U;Z++)d[w+Z]=F[Z]}else d.push(F)}}class L{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function O(d){o.setTimeout(()=>{throw d},0)}function q(){var d=M;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,w){let P=K.get();P.set(p,w),this.h?this.h.next=P:this.g=P,this.h=P}}var K=new L(()=>new he,d=>d.reset());class he{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let je,ge=!1,M=new ee,E=()=>{let d=Promise.resolve(void 0);je=()=>{d.then(C)}};function C(){for(var d;d=q();){try{d.h.call(d.g)}catch(w){O(w)}var p=K;p.j(d),p.h<100&&(p.h++,d.next=p.g,p.g=d)}ge=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let w=()=>{};o.addEventListener("test",w,p),o.removeEventListener("test",w,p)}catch{}return d}();function b(d){return/^[\s\xa0]*$/.test(d)}function Ct(d,p){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,p)}g(Ct,A),Ct.prototype.init=function(d,p){let w=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget,p||(w=="mouseover"?p=d.fromElement:w=="mouseout"&&(p=d.toElement)),this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);let d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var zn="closure_listenable_"+(Math.random()*1e6|0),Kw=0;function Oa(d,p,w,P,F){this.listener=d,this.proxy=null,this.src=p,this.type=w,this.capture=!!P,this.ha=F,this.key=++Kw,this.da=this.fa=!1}function wi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ho(d,p,w){for(let P in d)p.call(w,d[P],P,d)}function mg(d,p){for(let w in d)p.call(void 0,d[w],w,d)}function yg(d){let p={};for(let w in d)p[w]=d[w];return p}let jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(d,p){let w,P;for(let F=1;F<arguments.length;F++){P=arguments[F];for(w in P)d[w]=P[w];for(let U=0;U<jr.length;U++)w=jr[U],Object.prototype.hasOwnProperty.call(P,w)&&(d[w]=P[w])}}function gl(d){this.src=d,this.g={},this.h=0}gl.prototype.add=function(d,p,w,P,F){let U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);let Z=lh(d,p,P,F);return Z>-1?(p=d[Z],w||(p.fa=!1)):(p=new Oa(p,this.src,U,!!P,F),p.fa=w,d.push(p)),p};function fs(d,p){let w=p.type;if(w in d.g){var P=d.g[w],F=Array.prototype.indexOf.call(P,p,void 0),U;(U=F>=0)&&Array.prototype.splice.call(P,F,1),U&&(wi(p),d.g[w].length==0&&(delete d.g[w],d.h--))}}function lh(d,p,w,P){for(let F=0;F<d.length;++F){let U=d[F];if(!U.da&&U.listener==p&&U.capture==!!w&&U.ha==P)return F}return-1}var ps="closure_lm_"+(Math.random()*1e6|0),uh={};function _g(d,p,w,P,F){if(P&&P.once)return yl(d,p,w,P,F);if(Array.isArray(p)){for(let U=0;U<p.length;U++)_g(d,p[U],w,P,F);return null}return w=El(w),d&&d[zn]?d.J(p,w,a(P)?!!P.capture:!!P,F):Na(d,p,w,!1,P,F)}function Na(d,p,w,P,F,U){if(!p)throw Error("Invalid event type");let Z=a(F)?!!F.capture:!!F,Ie=wl(d);if(Ie||(d[ps]=Ie=new gl(d)),w=Ie.add(p,w,P,Z,U),w.proxy)return w;if(P=ml(),w.proxy=P,P.src=d,P.listener=w,d.addEventListener)x||(F=Z),F===void 0&&(F=!1),d.addEventListener(p.toString(),P,F);else if(d.attachEvent)d.attachEvent(vl(p.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ml(){function d(w){return p.call(d.src,d.listener,w)}let p=vg;return d}function yl(d,p,w,P,F){if(Array.isArray(p)){for(let U=0;U<p.length;U++)yl(d,p[U],w,P,F);return null}return w=El(w),d&&d[zn]?d.K(p,w,a(P)?!!P.capture:!!P,F):Na(d,p,w,!0,P,F)}function _l(d,p,w,P,F){if(Array.isArray(p))for(var U=0;U<p.length;U++)_l(d,p[U],w,P,F);else P=a(P)?!!P.capture:!!P,w=El(w),d&&d[zn]?(d=d.i,U=String(p).toString(),U in d.g&&(p=d.g[U],w=lh(p,w,P,F),w>-1&&(wi(p[w]),Array.prototype.splice.call(p,w,1),p.length==0&&(delete d.g[U],d.h--)))):d&&(d=wl(d))&&(p=d.g[p.toString()],d=-1,p&&(d=lh(p,w,P,F)),(w=d>-1?p[d]:null)&&La(w))}function La(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[zn])fs(p.i,d);else{var w=d.type,P=d.proxy;p.removeEventListener?p.removeEventListener(w,P,d.capture):p.detachEvent?p.detachEvent(vl(w),P):p.addListener&&p.removeListener&&p.removeListener(P),(w=wl(p))?(fs(w,d),w.h==0&&(w.src=null,p[ps]=null)):wi(d)}}}function vl(d){return d in uh?uh[d]:uh[d]="on"+d}function vg(d,p){if(d.da)d=!0;else{p=new Ct(p,this);let w=d.listener,P=d.ha||d.src;d.fa&&La(d),d=w.call(P,p)}return d}function wl(d){return d=d[ps],d instanceof gl?d:null}var dh="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(d){return typeof d=="function"?d:(d[dh]||(d[dh]=function(p){return d.handleEvent(p)}),d[dh])}function Xt(){D.call(this),this.i=new gl(this),this.M=this,this.G=null}g(Xt,D),Xt.prototype[zn]=!0,Xt.prototype.removeEventListener=function(d,p,w,P){_l(this,d,p,w,P)};function en(d,p){var w,P=d.G;if(P)for(w=[];P;P=P.G)w.push(P);if(d=d.M,P=p.type||p,typeof p=="string")p=new A(p,d);else if(p instanceof A)p.target=p.target||d;else{var F=p;p=new A(P,d),Zt(p,F)}F=!0;let U,Z;if(w)for(Z=w.length-1;Z>=0;Z--)U=p.g=w[Z],F=Fa(U,P,!0,p)&&F;if(U=p.g=d,F=Fa(U,P,!0,p)&&F,F=Fa(U,P,!1,p)&&F,w)for(Z=0;Z<w.length;Z++)U=p.g=w[Z],F=Fa(U,P,!1,p)&&F}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var d=this.i;for(let p in d.g){let w=d.g[p];for(let P=0;P<w.length;P++)wi(w[P]);delete d.g[p],d.h--}}this.G=null},Xt.prototype.J=function(d,p,w,P){return this.i.add(String(d),p,!1,w,P)},Xt.prototype.K=function(d,p,w,P){return this.i.add(String(d),p,!0,w,P)};function Fa(d,p,w,P){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();let F=!0;for(let U=0;U<p.length;++U){let Z=p[U];if(Z&&!Z.da&&Z.capture==w){let Ie=Z.listener,l=Z.ha||Z.src;Z.fa&&fs(d.i,Z),F=Ie.call(l,P)!==!1&&F}}return F&&!P.defaultPrevented}function Qw(d,p){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(d,p||0)}function Il(d){d.g=Qw(()=>{d.g=null,d.i&&(d.i=!1,Il(d))},d.l);let p=d.h;d.h=null,d.m.apply(null,p)}class hh extends D{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(d){D.call(this),this.h=d,this.g={}}g(gs,D);var tn=[];function fn(d){ho(d.g,function(p,w){this.g.hasOwnProperty(w)&&La(p)},d),d.g={}}gs.prototype.N=function(){gs.Z.N.call(this),fn(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=o.JSON.stringify,wg=o.JSON.parse,Eg=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Ig(){}function po(){}var go={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bl(){A.call(this,"d")}g(bl,A);function Va(){A.call(this,"c")}g(Va,A);var ms={},bg=null;function mo(){return bg=bg||new Xt}ms.Ia="serverreachability";function fh(d){A.call(this,ms.Ia,d)}g(fh,A);function yo(d){let p=mo();en(p,new fh(p))}ms.STAT_EVENT="statevent";function _o(d,p){A.call(this,ms.STAT_EVENT,d),this.stat=p}g(_o,A);function nn(d){let p=mo();en(p,new _o(p,d))}ms.Ja="timingevent";function Cl(d,p){A.call(this,ms.Ja,d),this.size=p}g(Cl,A);function sr(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},p)}function vo(){this.g=!0}vo.prototype.ua=function(){this.g=!1};function Tl(d,p,w,P,F,U){d.info(function(){if(d.g)if(U){var Z="",Ie=U.split("&");for(let f=0;f<Ie.length;f++){var l=Ie[f].split("=");if(l.length>1){let _=l[0];l=l[1];let R=_.split("_");Z=R.length>=2&&R[1]=="type"?Z+(_+"="+l+"&"):Z+(_+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+P+") [attempt "+F+"]: "+p+`
`+w+`
`+Z})}function Cg(d,p,w,P,F,U,Z){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+F+"]: "+p+`
`+w+`
`+U+" "+Z})}function Cr(d,p,w,P){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+wn(d,w)+(P?" "+P:"")})}function Tg(d,p){d.info(function(){return"TIMEOUT: "+p})}vo.prototype.info=function(){};function wn(d,p){if(!d.g)return p;if(!p)return null;try{let U=JSON.parse(p);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var w=U[d];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var F=P[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<P.length;Z++)P[Z]=""}}}}return fo(U)}catch{return p}}var Ua={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Eo;function ph(){}g(ph,Ig),ph.prototype.g=function(){return new XMLHttpRequest},Eo=new ph;function Ba(d){return encodeURIComponent(String(d))}function Io(d){var p=1;d=d.split(":");let w=[];for(;p>0&&d.length;)w.push(d.shift()),p--;return d.length&&w.push(d.join(":")),w}function Ei(d,p,w,P){this.j=d,this.i=p,this.l=w,this.S=P||1,this.V=new gs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sg}function Sg(){this.i=null,this.g="",this.h=!1}var ja={},Sl={};function za(d,p,w){d.M=1,d.A=Ga(or(p)),d.u=w,d.R=!0,$a(d,null)}function $a(d,p){d.F=Date.now(),bo(d),d.B=or(d.A);var w=d.B,P=d.S;Array.isArray(P)||(P=[String(P)]),xg(w.i,"t",P),d.C=0,w=d.j.L,d.h=new Sg,d.g=Ul(d.j,w?p:null,!d.u),d.P>0&&(d.O=new hh(u(d.Y,d,d.g),d.P)),p=d.V,w=d.g,P=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(tn[0]=F.toString()),F=tn);for(let U=0;U<F.length;U++){let Z=_g(w,F[U],P||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=d.J?yg(d.J):{},d.u?(d.v||(d.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,p)):(d.v="GET",d.g.ea(d.B,d.v,null,p)),yo(),Tl(d.i,d.v,d.B,d.l,d.S,d.u)}Ei.prototype.ba=function(d){d=d.target;let p=this.O;p&&rt(d)==3?p.j():this.Y(d)},Ei.prototype.Y=function(d){try{if(d==this.g)e:{let Ie=rt(this.g),l=this.g.ya(),f=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ug(this.g)))){this.K||Ie!=4||l==7||(l==8||f<=0?yo(3):yo(2)),Dl(this);var p=this.g.ca();this.X=p;var w=Ii(this);if(this.o=p==200,Cg(this.i,this.v,this.B,this.l,this.S,Ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var P,F=this.g;if((P=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(P)){var U=P;break t}}U=null}if(d=U)Cr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,To(this,d);else{this.o=!1,this.m=3,nn(12),ys(this),Co(this);break e}}if(this.R){d=!0;let _;for(;!this.K&&this.C<w.length;)if(_=Ag(this,w),_==Sl){Ie==4&&(this.m=4,nn(14),d=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(_==ja){this.m=4,nn(15),Cr(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Cr(this.i,this.l,_,null),To(this,_);if(gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,nn(16),d=!1),this.o=this.o&&d,!d)Cr(this.i,this.l,w,"[Invalid Chunked Response]"),ys(this),Co(this);else if(w.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ll(Z),Z.P=!0,nn(11))}}else Cr(this.i,this.l,w,null),To(this,w);Ie==4&&ys(this),this.o&&!this.K&&(Ie==4?Dh(this.j,this):(this.o=!1,bo(this)))}else Yw(this.g),p==400&&w.indexOf("Unknown SID")>0?(this.m=3,nn(12)):(this.m=0,nn(13)),ys(this),Co(this)}}}catch{}finally{}};function Ii(d){if(!gh(d))return d.g.la();let p=Ug(d.g);if(p==="")return"";let w="",P=p.length,F=rt(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ys(d),Co(d),"";d.h.i=new o.TextDecoder}for(let U=0;U<P;U++)d.h.h=!0,w+=d.h.i.decode(p[U],{stream:!(F&&U==P-1)});return p.length=0,d.h.g+=w,d.C=0,d.h.g}function gh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ag(d,p){var w=d.C,P=p.indexOf(`
`,w);return P==-1?Sl:(w=Number(p.substring(w,P)),isNaN(w)?ja:(P+=1,P+w>p.length?Sl:(p=p.slice(P,P+w),d.C=P+w,p)))}Ei.prototype.cancel=function(){this.K=!0,ys(this)};function bo(d){d.T=Date.now()+d.H,Al(d,d.H)}function Al(d,p){if(d.D!=null)throw Error("WatchDog timer not null");d.D=sr(u(d.aa,d),p)}function Dl(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Ei.prototype.aa=function(){this.D=null;let d=Date.now();d-this.T>=0?(Tg(this.i,this.B),this.M!=2&&(yo(),nn(17)),ys(this),this.m=2,Co(this)):Al(this,this.T-d)};function Co(d){d.j.I==0||d.K||Dh(d.j,d)}function ys(d){Dl(d);var p=d.O;p&&typeof p.dispose=="function"&&p.dispose(),d.O=null,fn(d.V),d.g&&(p=d.g,d.g=null,p.abort(),p.dispose())}function To(d,p){try{var w=d.j;if(w.I!=0&&(w.g==d||Ha(w.h,d))){if(!d.L&&Ha(w.h,d)&&w.I==3){try{var P=w.Ba.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var F=P;if(F[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Fl(w),_s(w);else break e;ko(w),nn(18)}}else w.xa=F[1],0<w.xa-w.K&&F[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=sr(u(w.Va,w),6e3));bi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ti(w,11)}else if((d.L||w.g==d)&&Fl(w),!b(p))for(F=w.Ba.g.parse(p),p=0;p<F.length;p++){let f=F[p],_=f[0];if(!(_<=w.K))if(w.K=_,f=f[1],w.I==2)if(f[0]=="c"){w.M=f[1],w.ba=f[2];let R=f[3];R!=null&&(w.ka=R,w.j.info("VER="+w.ka));let V=f[4];V!=null&&(w.za=V,w.j.info("SVER="+w.za));let B=f[5];B!=null&&typeof B=="number"&&B>0&&(P=1.5*B,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;let Y=d.g;if(Y){let et=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(et){var U=P.h;U.g||et.indexOf("spdy")==-1&&et.indexOf("quic")==-1&&et.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(mh(U,U.h),U.h=null))}if(P.G){let Nt=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Nt&&(P.wa=Nt,dt(P.J,P.G,Nt))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var Z=d;if(P.na=Vl(P,P.L?P.ba:null,P.W),Z.L){yh(P.h,Z);var Ie=Z,l=P.O;l&&(Ie.H=l),Ie.D&&(Dl(Ie),bo(Ie)),P.g=Z}else Nl(P);w.i.length>0&&Hn(w)}else f[0]!="stop"&&f[0]!="close"||Ti(w,7);else w.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Ti(w,7):Ol(w):f[0]!="noop"&&w.l&&w.l.qa(f),w.A=0)}}yo(4)}catch{}}var Dg=class{constructor(d,p){this.g=d,this.map=p}};function Ml(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function So(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function bi(d){return d.h?1:d.g?d.g.size:0}function Ha(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function mh(d,p){d.g?d.g.add(p):d.h=p}function yh(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}Ml.prototype.cancel=function(){if(this.i=_h(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function _h(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let p=d.i;for(let w of d.g.values())p=p.concat(w.G);return p}return T(d.i)}var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wh(d,p){if(d){d=d.split("&");for(let w=0;w<d.length;w++){let P=d[w].indexOf("="),F,U=null;P>=0?(F=d[w].substring(0,P),U=d[w].substring(P+1)):F=d[w],p(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Tr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;d instanceof Tr?(this.l=d.l,Ao(this,d.j),this.o=d.o,this.g=d.g,qa(this,d.u),this.h=d.h,Eh(this,kg(d.i)),this.m=d.m):d&&(p=String(d).match(vh))?(this.l=!1,Ao(this,p[1]||"",!0),this.o=Wa(p[2]||""),this.g=Wa(p[3]||"",!0),qa(this,p[4]),this.h=Wa(p[5]||"",!0),Eh(this,p[6]||"",!0),this.m=Wa(p[7]||"")):(this.l=!1,this.i=new $r(null,this.l))}Tr.prototype.toString=function(){let d=[];var p=this.j;p&&d.push(ar(p,Ka,!0),":");var w=this.g;return(w||p=="file")&&(d.push("//"),(p=this.o)&&d.push(ar(p,Ka,!0),"@"),d.push(Ba(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(ar(w,w.charAt(0)=="/"?Mg:Rl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",ar(w,Pl)),d.join("")},Tr.prototype.resolve=function(d){let p=or(this),w=!!d.j;w?Ao(p,d.j):w=!!d.o,w?p.o=d.o:w=!!d.g,w?p.g=d.g:w=d.u!=null;var P=d.h;if(w)qa(p,d.u);else if(w=!!d.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var F=p.h.lastIndexOf("/");F!=-1&&(P=p.h.slice(0,F+1)+P)}if(F=P,F==".."||F==".")P="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){P=F.lastIndexOf("/",0)==0,F=F.split("/");let U=[];for(let Z=0;Z<F.length;){let Ie=F[Z++];Ie=="."?P&&Z==F.length&&U.push(""):Ie==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),P&&Z==F.length&&U.push("")):(U.push(Ie),P=!0)}P=U.join("/")}else P=F}return w?p.h=P:w=d.i.toString()!=="",w?Eh(p,kg(d.i)):w=!!d.m,w&&(p.m=d.m),p};function or(d){return new Tr(d)}function Ao(d,p,w){d.j=w?Wa(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function qa(d,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);d.u=p}else d.u=null}function Eh(d,p,w){p instanceof $r?(d.i=p,Qa(d.i,d.l)):(w||(p=ar(p,gt)),d.i=new $r(p,d.l))}function dt(d,p,w){d.i.set(p,w)}function Ga(d){return dt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Wa(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ar(d,p,w){return typeof d=="string"?(d=encodeURI(d).replace(p,zr),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function zr(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ka=/[#\/\?@]/g,Rl=/[#\?:]/g,Mg=/[#\?]/g,gt=/[#\?@]/g,Pl=/#/g;function $r(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function cr(d){d.g||(d.g=new Map,d.h=0,d.i&&wh(d.i,function(p,w){d.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}n=$r.prototype,n.add=function(d,p){cr(this),this.i=null,d=Do(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(p),this.h+=1,this};function Rg(d,p){cr(d),p=Do(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function Ih(d,p){return cr(d),p=Do(d,p),d.g.has(p)}n.forEach=function(d,p){cr(this),this.g.forEach(function(w,P){w.forEach(function(F){d.call(p,F,P,this)},this)},this)};function Pg(d,p){cr(d);let w=[];if(typeof p=="string")Ih(d,p)&&(w=w.concat(d.g.get(Do(d,p))));else for(d=Array.from(d.g.values()),p=0;p<d.length;p++)w=w.concat(d[p]);return w}n.set=function(d,p){return cr(this),this.i=null,d=Do(this,d),Ih(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},n.get=function(d,p){return d?(d=Pg(this,d),d.length>0?String(d[0]):p):p};function xg(d,p,w){Rg(d,p),w.length>0&&(d.i=null,d.g.set(Do(d,p),T(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],p=Array.from(this.g.keys());for(let P=0;P<p.length;P++){var w=p[P];let F=Ba(w);w=Pg(this,w);for(let U=0;U<w.length;U++){let Z=F;w[U]!==""&&(Z+="="+Ba(w[U])),d.push(Z)}}return this.i=d.join("&")};function kg(d){let p=new $r;return p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),p}function Do(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function Qa(d,p){p&&!d.j&&(cr(d),d.i=null,d.g.forEach(function(w,P){let F=P.toLowerCase();P!=F&&(Rg(this,P),xg(this,F,w))},d)),d.j=p}function Ci(d,p){let w=new vo;if(o.Image){let P=new Image;P.onload=h(Hr,w,"TestLoadImage: loaded",!0,p,P),P.onerror=h(Hr,w,"TestLoadImage: error",!1,p,P),P.onabort=h(Hr,w,"TestLoadImage: abort",!1,p,P),P.ontimeout=h(Hr,w,"TestLoadImage: timeout",!1,p,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else p(!1)}function Og(d,p){let w=new vo,P=new AbortController,F=setTimeout(()=>{P.abort(),Hr(w,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:P.signal}).then(U=>{clearTimeout(F),U.ok?Hr(w,"TestPingServer: ok",!0,p):Hr(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Hr(w,"TestPingServer: error",!1,p)})}function Hr(d,p,w,P,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),P(w)}catch{}}function Ng(){this.g=new Eg}function qr(d){this.i=d.Sb||null,this.h=d.ab||!1}g(qr,Ig),qr.prototype.g=function(){return new xl(this.i,this.h)};function xl(d,p){Xt.call(this),this.H=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(xl,Xt),n=xl.prototype,n.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=p,this.readyState=1,$n(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(p.body=d),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lg(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lg(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Ya(this):$n(this),this.readyState==3&&Lg(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ya(this))},n.Na=function(d){this.g&&(this.response=d,Ya(this))},n.ga=function(){this.g&&Ya(this)};function Ya(d){d.readyState=4,d.l=null,d.j=null,d.B=null,$n(d)}n.setRequestHeader=function(d,p){this.A.append(d,p)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=p.next();return d.join(`\r
`)};function $n(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Fg(d){let p="";return ho(d,function(w,P){p+=P,p+=":",p+=w,p+=`\r
`}),p}function bh(d,p,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=Fg(w),typeof d=="string"?w!=null&&Ba(w):dt(d,p,w))}function ht(d){Xt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ht,Xt);var kl=/^https?$/i,Vg=["POST","PUT"];n=ht.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,p,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Eo.g(),this.g.onreadystatechange=I(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(U){Mo(this,U);return}if(d=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var F in P)w.set(F,P[F]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(let U of P.keys())w.set(U,P.get(U));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(U=>U.toLowerCase()=="content-type"),F=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(Vg,p,void 0)>=0)||P||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Z]of w)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Mo(this,U)}};function Mo(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.o=5,Ro(d),Po(d)}function Ro(d){d.A||(d.A=!0,en(d,"complete"),en(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,en(this,"complete"),en(this,"abort"),Po(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Po(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ch(this):this.Xa())},n.Xa=function(){Ch(this)};function Ch(d){if(d.h&&typeof s<"u"){if(d.v&&rt(d)==4)setTimeout(d.Ca.bind(d),0);else if(en(d,"readystatechange"),rt(d)==4){d.h=!1;try{let U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var P;if(P=U===0){let Z=String(d.D).match(vh)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),P=!kl.test(Z?Z.toLowerCase():"")}w=P}if(w)en(d,"complete"),en(d,"success");else{d.o=6;try{var F=rt(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Ro(d)}}finally{Po(d)}}}}function Po(d,p){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);let w=d.g;d.g=null,p||en(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rt(d){return d.g?d.g.readyState:0}n.ca=function(){try{return rt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),wg(p)}};function Ug(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Yw(d){let p={};d=(d.g&&rt(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(b(d[P]))continue;var w=Io(d[P]);let F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let U=p[F]||[];p[F]=U,U.push(w)}mg(p,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(d,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||p}function Th(d){this.za=0,this.i=[],this.j=new vo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xo("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xo("baseRetryDelayMs",5e3,d),this.Za=xo("retryDelaySeedMs",1e4,d),this.Ta=xo("forwardChannelMaxRetries",2,d),this.va=xo("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ml(d&&d.concurrentRequestLimit),this.Ba=new Ng,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Th.prototype,n.ka=8,n.I=1,n.connect=function(d,p,w,P){nn(0),this.W=d,this.H=p||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=Vl(this,null,this.W),Hn(this)};function Ol(d){if(Sh(d),d.I==3){var p=d.V++,w=or(d.J);if(dt(w,"SID",d.M),dt(w,"RID",p),dt(w,"TYPE","terminate"),Gr(d,w),p=new Ei(d,d.j,p),p.M=2,p.A=Ga(or(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=p.A,w=!0),w||(p.g=Ul(p.j,null),p.g.ea(p.A)),p.F=Date.now(),bo(p)}Mh(d)}function _s(d){d.g&&(Ll(d),d.g.cancel(),d.g=null)}function Sh(d){_s(d),d.v&&(o.clearTimeout(d.v),d.v=null),Fl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Hn(d){if(!So(d.h)&&!d.m){d.m=!0;var p=d.Ea;je||E(),ge||(je(),ge=!0),M.add(p,d),d.D=0}}function Bg(d,p){return bi(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=p.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=sr(u(d.Ea,d,p),Oo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;let F=new Ei(this,this.j,d),U=this.o;if(this.U&&(U?(U=yg(U),Zt(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,p>4096){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=Ah(this,F,p),w=or(this.J),dt(w,"RID",d),dt(w,"CVER",22),this.G&&dt(w,"X-HTTP-Session-Id",this.G),Gr(this,w),U&&(this.R?p="headers="+Ba(Fg(U))+"&"+p:this.u&&bh(w,this.u,U)),mh(this.h,F),this.Ra&&dt(w,"TYPE","init"),this.S?(dt(w,"$req",p),dt(w,"SID","null"),F.U=!0,za(F,w,null)):za(F,w,p),this.I=2}}else this.I==3&&(d?jg(this,d):this.i.length==0||So(this.h)||jg(this))};function jg(d,p){var w;p?w=p.l:w=d.V++;let P=or(d.J);dt(P,"SID",d.M),dt(P,"RID",w),dt(P,"AID",d.K),Gr(d,P),d.u&&d.o&&bh(P,d.u,d.o),w=new Ei(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),p&&(d.i=p.G.concat(d.i)),p=Ah(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),mh(d.h,w),za(w,P,p)}function Gr(d,p){d.H&&ho(d.H,function(w,P){dt(p,P,w)}),d.l&&ho({},function(w,P){dt(p,P,w)})}function Ah(d,p,w){w=Math.min(d.i.length,w);let P=d.l?u(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ie=-1;for(;;){let l=["count="+w];Ie==-1?w>0?(Ie=F[0].g,l.push("ofs="+Ie)):Ie=0:l.push("ofs="+Ie);let f=!0;for(let _=0;_<w;_++){var U=F[_].g;let R=F[_].map;if(U-=Ie,U<0)Ie=Math.max(0,F[_].g-100),f=!1;else try{U="req"+U+"_"||"";try{var Z=R instanceof Map?R:Object.entries(R);for(let[V,B]of Z){let Y=B;a(B)&&(Y=fo(B)),l.push(U+V+"="+encodeURIComponent(Y))}}catch(V){throw l.push(U+"type="+encodeURIComponent("_badmap")),V}}catch{P&&P(R)}}if(f){Z=l.join("&");break e}}Z=void 0}return d=d.i.splice(0,w),p.G=d,Z}function Nl(d){if(!d.g&&!d.v){d.Y=1;var p=d.Da;je||E(),ge||(je(),ge=!0),M.add(p,d),d.A=0}}function ko(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=sr(u(d.Da,d),Oo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Ja(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=sr(u(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nn(10),_s(this),Ja(this))};function Ll(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Ja(d){d.g=new Ei(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var p=or(d.na);dt(p,"RID","rpc"),dt(p,"SID",d.M),dt(p,"AID",d.K),dt(p,"CI",d.F?"0":"1"),!d.F&&d.ia&&dt(p,"TO",d.ia),dt(p,"TYPE","xmlhttp"),Gr(d,p),d.u&&d.o&&bh(p,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ga(or(p)),w.u=null,w.R=!0,$a(w,d)}n.Va=function(){this.C!=null&&(this.C=null,_s(this),ko(this),nn(19))};function Fl(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Dh(d,p){var w=null;if(d.g==p){Fl(d),Ll(d),d.g=null;var P=2}else if(Ha(d.h,p))w=p.G,yh(d.h,p),P=1;else return;if(d.I!=0){if(p.o)if(P==1){w=p.u?p.u.length:0,p=Date.now()-p.F;var F=d.D;P=mo(),en(P,new Cl(P,w)),Hn(d)}else Nl(d);else if(F=p.m,F==3||F==0&&p.X>0||!(P==1&&Bg(d,p)||P==2&&ko(d)))switch(w&&w.length>0&&(p=d.h,p.i=p.i.concat(w)),F){case 1:Ti(d,5);break;case 4:Ti(d,10);break;case 3:Ti(d,6);break;default:Ti(d,2)}}}function Oo(d,p){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*p}function Ti(d,p){if(d.j.info("Error code "+p),p==2){var w=u(d.bb,d),P=d.Ua;let F=!P;P=new Tr(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ao(P,"https"),Ga(P),F?Ci(P.toString(),w):Og(P.toString(),w)}else nn(2);d.I=0,d.l&&d.l.pa(p),Mh(d),Sh(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Mh(d){if(d.I=0,d.ja=[],d.l){let p=_h(d.h);(p.length!=0||d.i.length!=0)&&(k(d.ja,p),k(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function Vl(d,p,w){var P=w instanceof Tr?or(w):new Tr(w);if(P.g!="")p&&(P.g=p+"."+P.g),qa(P,P.u);else{var F=o.location;P=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;let U=new Tr(null);P&&Ao(U,P),p&&(U.g=p),F&&qa(U,F),w&&(U.h=w),P=U}return w=d.G,p=d.wa,w&&p&&dt(P,w,p),dt(P,"VER",d.ka),Gr(d,P),P}function Ul(d,p,w){if(p&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Aa&&!d.ma?new ht(new qr({ab:w})):new ht(d.ma),p.Fa(d.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}n=Rh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vs(){}vs.prototype.g=function(d,p){return new An(d,p)};function An(d,p){Xt.call(this),this.g=new Th(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(d?d["X-WebChannel-Client-Profile"]=p.sa:d={"X-WebChannel-Client-Profile":p.sa}),this.g.U=d,(d=p&&p.Qb)&&!b(d)&&(this.g.u=d),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!b(p)&&(this.g.G=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new ws(this)}g(An,Xt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Ol(this.g)},An.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=fo(d),d=w);p.i.push(new Dg(p.Ya++,d)),p.I==3&&Hn(p)},An.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,An.Z.N.call(this)};function Ph(d){bl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(let w in p){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}g(Ph,bl);function Si(){Va.call(this),this.status=1}g(Si,Va);function ws(d){this.g=d}g(ws,Rh),ws.prototype.ra=function(){en(this.g,"a")},ws.prototype.qa=function(d){en(this.g,new Ph(d))},ws.prototype.pa=function(d){en(this.g,new Si)},ws.prototype.oa=function(){en(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,OS=Ks.createWebChannelTransport=function(){return new vs},kS=Ks.getStatEventTarget=function(){return mo()},xS=Ks.Event=ms,Pv=Ks.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,ip=Ks.ErrorCode=Ua,wo.COMPLETE="complete",PS=Ks.EventType=wo,po.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,Ju=Ks.WebChannel=po,Yee=Ks.FetchXmlHttpFactory=qr,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,RS=Ks.XhrIo=ht}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var HV="@firebase/firestore",qV="4.9.2";var Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");var Id="12.3.0";var Kc=new ua("@firebase/firestore");function Zu(){return Kc.logLevel}function le(n,...e){if(Kc.logLevel<=He.DEBUG){let t=e.map(vD);Kc.debug(`Firestore (${Id}): ${n}`,...t)}}function Js(n,...e){if(Kc.logLevel<=He.ERROR){let t=e.map(vD);Kc.error(`Firestore (${Id}): ${n}`,...t)}}function dp(n,...e){if(Kc.logLevel<=He.WARN){let t=e.map(vD);Kc.warn(`Firestore (${Id}): ${n}`,...t)}}function vD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,kU(n,r,t)}function kU(n,e,t){let r=`FIRESTORE (${Id}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Js(r),new Error(r)}function Rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||kU(e,i,r)}function Je(n,e){return n}var ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ye=class extends Nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ya=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var zS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$S=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nn.UNAUTHENTICATED))}shutdown(){}};var HS=class{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ya,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ya)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new zS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}},qS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},GS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},WS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,js(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Rt(this.o===void 0,3512);let r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Jee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Vv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Jee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ke(n,e){return n<e?-1:n>e?1:0}function KS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return NS(i)===NS(s)?Ke(i,s):NS(i)?1:-1}return Ke(n.length,e.length)}var Zee=55296,Xee=57343;function NS(n){let e=n.charCodeAt(0);return e>=Zee&&e<=Xee}function ud(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var GV="__name__",Uv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ke(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):KS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}},dn=class n extends Uv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},ete=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fi=class n extends Uv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return ete.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GV}static keyField(){return new n([GV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ye(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ye(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(dn.fromString(e))}static fromName(e){return new n(dn.fromString(e).popFirst(5))}static empty(){return new n(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new dn(e.slice()))}};function tte(n,e,t,r){if(e===!0&&r===!0)throw new ye(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nte(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rte(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function LS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=rte(n);throw new ye(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Tp(n,e){if(!nte(n))throw new ye(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ye(ne.INVALID_ARGUMENT,t);return!0}var WV=-62135596800,KV=1e6,jn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*KV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<WV)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KV}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-WV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};jn._jsonSchemaVersion="firestore/timestamp/1.0",jn._jsonSchema={type:qt("string",jn._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};var Le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new jn(0,0))}static max(){return new n(new jn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hp=-1,QS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};QS.UNKNOWN_ID=-1;function ite(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new jn(t+1,0):new jn(t,r));return new Qc(i,Ce.empty(),e)}function ste(n){return new Qc(n.readTime,n.key,hp)}var Qc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Le.min(),Ce.empty(),hp)}static max(){return new n(Le.max(),Ce.empty(),hp)}};function ote(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}var ate="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",YS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function d0(n){return S(this,null,function*(){if(n.code!==ne.FAILED_PRECONDITION||n.message!==ate)throw n;le("LocalStore","Unexpectedly lost primary lease")})}var Q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function cte(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bd(n){return n.name==="IndexedDbTransactionError"}var wD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),lte=-1;function h0(n){return n==null}function Bv(n){return n===0&&1/n==-1/0}var OU="";function ute(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QV(e)),e=dte(n.get(t),e);return QV(e)}function dte(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case OU:t+="";break;default:t+=s}}return t}function QV(n){return n+OU+""}var hte="remoteDocuments",NU="owner";var LU="mutationQueues";var FU="mutations";var VU="documentMutations",fte="remoteDocumentsV14";var UU="remoteDocumentGlobal";var BU="targets";var jU="targetDocuments";var zU="targetGlobal",$U="collectionParents";var HU="clientMetadata";var qU="bundles";var GU="namedQueries";var pte="indexConfiguration";var gte="indexState";var mte="indexEntries";var WU="documentOverlays";var yte="globals";var _te=[LU,FU,VU,hte,BU,NU,zU,jU,HU,UU,$U,qU,GU],Kbe=[..._te,WU],vte=[LU,FU,VU,fte,BU,NU,zU,jU,HU,UU,$U,qU,GU,WU],wte=vte,Ete=[...wte,pte,gte,mte];var Qbe=[...Ete,yte];function YV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sp(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ite(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Vt=class n{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}},nd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}};Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1;Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yn=class n{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $c=class n{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new n([])}unionWith(e){let t=new yn(fi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zv("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ln.EMPTY_BYTE_STRING=new Ln("");var bte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(n){if(Rt(!!n,39018),typeof n=="string"){let e=0,t=bte.exec(n);if(Rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}var KU="server_timestamp",QU="__type__",YU="__previous_value__",JU="__local_write_time__";function ED(n){return(n?.mapValue?.fields||{})[QU]?.stringValue===KU}function f0(n){let e=n.mapValue.fields[YU];return ED(e)?f0(e):e}function fp(n){let e=Zs(n.mapValue.fields[JU].timestampValue);return new jn(e.seconds,e.nanos)}var JS=class{constructor(e,t,r,i,s,o,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},ZS="(default)",$v=class n{constructor(e,t){this.projectId=e,this.database=t||ZS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ZS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ZU="__type__",XU="__max__",xv={mapValue:{fields:{__type__:{stringValue:XU}}}},e4="__vector__",pp="value";function _a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ED(n)?4:n4(n)?9007199254740991:t4(n)?10:11:Me(28295,{value:n})}function ts(n,e){if(n===e)return!0;let t=_a(n);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fp(n).isEqual(fp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Zs(i.timestampValue),a=Zs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Xs(i.bytesValue).isEqual(Xs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=St(i.doubleValue),a=St(s.doubleValue);return o===a?Bv(o)===Bv(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ud(n.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(YV(o)!==YV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ts(o[c],a[c])))return!1;return!0}(n,e);default:return Me(52216,{left:n})}}function gp(n,e){return(n.values||[]).find(t=>ts(t,e))!==void 0}function dd(n,e){if(n===e)return 0;let t=_a(n),r=_a(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=St(s.integerValue||s.doubleValue),c=St(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return JV(n.timestampValue,e.timestampValue);case 4:return JV(fp(n),fp(e));case 5:return KS(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Xs(s),c=Xs(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Ke(a[u],c[u]);if(h!==0)return h}return Ke(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ke(St(s.latitude),St(o.latitude));return a!==0?a:Ke(St(s.longitude),St(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZV(n.arrayValue,e.arrayValue);case 10:return function(s,o){let a=s.fields||{},c=o.fields||{},u=a[pp]?.arrayValue,h=c[pp]?.arrayValue,g=Ke(u?.values?.length||0,h?.values?.length||0);return g!==0?g:ZV(u,h)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xv.mapValue&&o===xv.mapValue)return 0;if(s===xv.mapValue)return 1;if(o===xv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=KS(c[g],h[g]);if(I!==0)return I;let T=dd(a[c[g]],u[h[g]]);if(T!==0)return T}return Ke(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function JV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);let t=Zs(n),r=Zs(e),i=Ke(t.seconds,r.seconds);return i!==0?i:Ke(t.nanos,r.nanos)}function ZV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=dd(t[i],r[i]);if(s)return s}return Ke(t.length,r.length)}function hd(n){return XS(n)}function XS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Zs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=XS(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${XS(t.fields[o])}`;return i+"}"}(n.mapValue):Me(61005,{value:n})}function Nv(n){switch(_a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=f0(n);return e?16+Nv(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Nv(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Sp(r.fields,(s,o)=>{i+=s.length+Nv(o)}),i}(n.mapValue);default:throw Me(13486,{value:n})}}function eA(n){return!!n&&"integerValue"in n}function ID(n){return!!n&&"arrayValue"in n}function XV(n){return!!n&&"nullValue"in n}function eU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function FS(n){return!!n&&"mapValue"in n}function t4(n){return(n?.mapValue?.fields||{})[ZU]?.stringValue===e4}function op(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Sp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=op(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=op(n.arrayValue.values[t]);return e}return $({},n)}function n4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XU}var Jbe={mapValue:{fields:{[ZU]:{stringValue:e4},[pp]:{arrayValue:{}}}}};var Qs=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!FS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=op(t)}setAll(e){let t=fi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=op(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());FS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];FS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sp(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(op(this.value))}};var pi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Le.min(),Le.min(),Le.min(),Qs.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Le.min(),Le.min(),Qs.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Le.min(),Le.min(),Qs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fd=class{constructor(e,t){this.position=e,this.inclusive=t}};function tU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),t.key):r=dd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ts(n.position[t],e.position[t]))return!1;return!0}var pd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Cte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Hv=class{},hn=class n extends Hv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nA(e,t,r):t==="array-contains"?new sA(e,r):t==="in"?new oA(e,r):t==="not-in"?new aA(e,r):t==="array-contains-any"?new cA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rA(e,r):new iA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(dd(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ns=class n extends Hv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return r4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function r4(n){return n.op==="and"}function i4(n){return Tte(n)&&r4(n)}function Tte(n){for(let e of n.filters)if(e instanceof ns)return!1;return!0}function tA(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+hd(n.value);if(i4(n))return n.filters.map(e=>tA(e)).join(",");{let e=n.filters.map(t=>tA(t)).join(",");return`${n.op}(${e})`}}function s4(n,e){return n instanceof hn?function(r,i){return i instanceof hn&&r.op===i.op&&r.field.isEqual(i.field)&&ts(r.value,i.value)}(n,e):n instanceof ns?function(r,i){return i instanceof ns&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&s4(o,i.filters[a]),!0):!1}(n,e):void Me(19439)}function o4(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${hd(t.value)}`}(n):n instanceof ns?function(t){return t.op.toString()+" {"+t.getFilters().map(o4).join(" ,")+"}"}(n):"Filter"}var nA=class extends hn{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){let t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}},rA=class extends hn{constructor(e,t){super(e,"in",t),this.keys=a4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iA=class extends hn{constructor(e,t){super(e,"not-in",t),this.keys=a4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function a4(n,e){return(e.arrayValue?.values||[]).map(t=>Ce.fromName(t.referenceValue))}var sA=class extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ID(t)&&gp(t.arrayValue,this.value)}},oA=class extends hn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gp(this.value.arrayValue,t)}},aA=class extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gp(this.value.arrayValue,t)}},cA=class extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ID(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gp(this.value.arrayValue,r))}};var lA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function rU(n,e=null,t=[],r=[],i=null,s=null,o=null){return new lA(n,e,t,r,i,s,o)}function bD(n){let e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),h0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hd(r)).join(",")),e.Te=t}return e.Te}function CD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Cte(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nU(n.startAt,e.startAt)&&nU(n.endAt,e.endAt)}function uA(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var gd=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Ste(n,e,t,r,i,s,o,a){return new gd(n,e,t,r,i,s,o,a)}function TD(n){return new gd(n)}function iU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ate(n){return n.collectionGroup!==null}function ap(n){let e=Je(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new yn(fi.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new pd(s,r))}),t.has(fi.keyField().canonicalString())||e.Ie.push(new pd(fi.keyField(),r))}return e.Ie}function es(n){let e=Je(n);return e.Ee||(e.Ee=Dte(e,ap(n))),e.Ee}function Dte(n,e){if(n.limitType==="F")return rU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new pd(i.field,s)});let t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return rU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dA(n,e,t){return new gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function p0(n,e){return CD(es(n),es(e))&&n.limitType===e.limitType}function c4(n){return`${bD(es(n))}|lt:${n.limitType}`}function Xu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>o4(i)).join(", ")}]`),h0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hd(i)).join(",")),`Target(${r})`}(es(n))}; limitType=${n.limitType})`}function g0(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ap(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=tU(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ap(r),i)||r.endAt&&!function(o,a,c){let u=tU(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ap(r),i))}(n,e)}function Mte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function l4(n){return(e,t)=>{let r=!1;for(let i of ap(n)){let s=Rte(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Rte(n,e,t){let r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?dd(c,u):Me(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:n.dir})}}var eo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sp(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Ite(this.inner)}size(){return this.innerSize}};var Pte=new Vt(Ce.comparator);function va(){return Pte}var u4=new Vt(Ce.comparator);function sp(...n){let e=u4;for(let t of n)e=e.insert(t.key,t);return e}function xte(n){let e=u4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hc(){return cp()}function d4(){return cp()}function cp(){return new eo(n=>n.toString(),(n,e)=>n.isEqual(e))}var Zbe=new Vt(Ce.comparator),kte=new yn(Ce.comparator);function Xe(...n){let e=kte;for(let t of n)e=e.add(t);return e}var Ote=new yn(Ke);function Nte(){return Ote}function Lte(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bv(e)?"-0":e}}function Fte(n){return{integerValue:""+n}}var md=class{constructor(){this._=void 0}};function Vte(n,e,t){return n instanceof mp?function(i,s){let o={fields:{[QU]:{stringValue:KU},[JU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ED(s)&&(s=f0(s)),s&&(o.fields[YU]=s),{mapValue:o}}(t,e):n instanceof yd?h4(n,e):n instanceof _d?f4(n,e):function(i,s){let o=Bte(i,s),a=sU(o)+sU(i.Ae);return eA(o)&&eA(i.Ae)?Fte(a):Lte(i.serializer,a)}(n,e)}function Ute(n,e,t){return n instanceof yd?h4(n,e):n instanceof _d?f4(n,e):t}function Bte(n,e){return n instanceof yp?function(r){return eA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var mp=class extends md{},yd=class extends md{constructor(e){super(),this.elements=e}};function h4(n,e){let t=p4(e);for(let r of n.elements)t.some(i=>ts(i,r))||t.push(r);return{arrayValue:{values:t}}}var _d=class extends md{constructor(e){super(),this.elements=e}};function f4(n,e){let t=p4(e);for(let r of n.elements)t=t.filter(i=>!ts(i,r));return{arrayValue:{values:t}}}var yp=class extends md{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function sU(n){return St(n.integerValue||n.doubleValue)}function p4(n){return ID(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof yd&&i instanceof yd||r instanceof _d&&i instanceof _d?ud(r.elements,i.elements,ts):r instanceof yp&&i instanceof yp?ts(r.Ae,i.Ae):r instanceof mp&&i instanceof mp}(n.transform,e.transform)}var lp=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var _p=class{};function g4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hA(n.key,lp.none()):new vp(n.key,n.data,lp.none());{let t=n.data,r=Qs.empty(),i=new yn(fi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vd(n.key,r,new $c(i.toArray()),lp.none())}}function zte(n,e,t){n instanceof vp?function(i,s,o){let a=i.value.clone(),c=aU(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vd?function(i,s,o){if(!Lv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=aU(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(m4(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function up(n,e,t,r){return n instanceof vp?function(s,o,a,c){if(!Lv(s.precondition,o))return a;let u=s.value.clone(),h=cU(s.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof vd?function(s,o,a,c){if(!Lv(s.precondition,o))return a;let u=cU(s.fieldTransforms,c,o),h=o.data;return h.setAll(m4(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return Lv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function oU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ud(r,i,(s,o)=>jte(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vp=class extends _p{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vd=class extends _p{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function m4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function aU(n,e,t){let r=new Map;Rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ute(o,a,t[i]))}return r}function cU(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Vte(s,o,e))}return r}var hA=class extends _p{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var fA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&zte(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=d4();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=g4(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,(t,r)=>oU(t,r))&&ud(this.baseMutations,e.baseMutations,(t,r)=>oU(t,r))}};var pA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Ye;function y4(n){if(n===void 0)return Js("GRPC error has no .code"),ne.UNKNOWN;switch(n){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return Me(39323,{code:n})}}(Ye=$t||($t={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var $te=null;function Hte(){return new TextEncoder}var qte=new Ws([4294967295,4294967295],0);function lU(n){let e=Hte().encode(n),t=new MS;return t.update(e),new Uint8Array(t.digest())}function uU(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([t,r],0),new Ws([i,s],0)]}var mA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qc(`Invalid padding: ${t}`);if(r<0)throw new qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ws.fromNumber(r)));return i.compare(qte)===1&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=lU(e),[r,i]=uU(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=lU(e),[r,i]=uU(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},qc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Le.min(),i,new Vt(Ke),va(),Xe())}},wp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Xe(),Xe(),Xe())}};var rd=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Gv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Wv=class{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kv=class{constructor(){this.ve=0,this.Fe=dU(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),r=Xe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me(38017,{changeType:s})}}),new wp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=dU()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},yA=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=va(),this.Je=kv(),this.He=kv(),this.Ye=new Vt(Ke)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(uA(s))if(r===0){let o=new Ce(s.path);this.et(t,o,pi.newNoDocument(o,Le.min()))}else Rt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}$te?.lt(function(h,g,I,T,k){let L={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},O=g.unchangedNames;return O&&(L.bloomFilter={applied:k===0,hashCount:O?.hashCount??0,bitmapLength:O?.bits?.bitmap?.length??0,padding:O?.bits?.padding??0,mightContain:q=>T?.mightContain(q)??!1}),L}(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Xs(r).toUint8Array()}catch(c){if(c instanceof zv)return dp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mA(o,i,s)}catch(c){return dp(c instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&uA(a.target)){let c=new Ce(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pi.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Xe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new qv(e,t,this.Ye,this.je,r);return this.je=va(),this.Je=kv(),this.He=kv(),this.Ye=new Vt(Ke),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Kv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new yn(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new yn(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function kv(){return new Vt(Ce.comparator)}function dU(){return new Vt(Ce.comparator)}var Gte={asc:"ASCENDING",desc:"DESCENDING"},Wte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kte={and:"AND",or:"OR"},_A=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function vA(n,e){return n.useProto3Json||h0(e)?e:{value:e}}function Qte(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yte(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function id(n){return Rt(!!n,49232),Le.fromTimestamp(function(t){let r=Zs(t);return new jn(r.seconds,r.nanos)}(n))}function Jte(n,e){return wA(n,e).canonicalString()}function wA(n,e){let t=function(i){return new dn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _4(n){let e=dn.fromString(n);return Rt(b4(e),10190,{key:e.toString()}),e}function VS(n,e){let t=_4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(w4(t))}function v4(n,e){return Jte(n.databaseId,e)}function Zte(n){let e=_4(n);return e.length===4?dn.emptyPath():w4(e)}function hU(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w4(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Xte(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Me(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Rt(h===void 0||typeof h=="string",58123),Ln.fromBase64String(h||"")):(Rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ln.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let h=u.code===void 0?ne.UNKNOWN:y4(u.code);return new ye(h,u.message||"")}(o);t=new Wv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=VS(n,r.document.name),s=id(r.document.updateTime),o=r.document.createTime?id(r.document.createTime):Le.min(),a=new Qs({mapValue:{fields:r.document.fields}}),c=pi.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new rd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=VS(n,r.document),s=r.readTime?id(r.readTime):Le.min(),o=pi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=VS(n,r.document),s=r.removedTargetIds||[];t=new rd([],s,i,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new gA(i,s),a=r.targetId;t=new Gv(a,o)}}return t}function ene(n,e){return{documents:[v4(n,e.path)]}}function tne(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=v4(n,i);let s=function(u){if(u.length!==0)return I4(ns.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:ed(I.field),direction:ine(I.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=vA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function nne(n){let e=Zte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Rt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let I=E4(g);return I instanceof ns&&i4(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(k){return new pd(td(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,h0(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,T=g.values||[];return new fd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let I=!g.before,T=g.values||[];return new fd(T,I)}(t.endAt)),Ste(e,i,o,s,a,"F",c,u)}function rne(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function E4(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=td(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=td(t.unaryFilter.field);return hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=td(t.unaryFilter.field);return hn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=td(t.unaryFilter.field);return hn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create(td(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ns.create(t.compositeFilter.filters.map(r=>E4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(t.compositeFilter.op))}(n):Me(30097,{filter:n})}function ine(n){return Gte[n]}function sne(n){return Wte[n]}function one(n){return Kte[n]}function ed(n){return{fieldPath:n.canonicalString()}}function td(n){return fi.fromServerFormat(n.fieldPath)}function I4(n){return n instanceof hn?function(t){if(t.op==="=="){if(eU(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NAN"}};if(XV(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eU(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NAN"}};if(XV(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(t.field),op:sne(t.op),value:t.value}}}(n):n instanceof ns?function(t){let r=t.getFilters().map(i=>I4(i));return r.length===1?r[0]:{compositeFilter:{op:one(t.op),filters:r}}}(n):Me(54877,{filter:n})}function b4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ep=class n{constructor(e,t,r,i,s=Le.min(),o=Le.min(),a=Ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var EA=class{constructor(e){this.yt=e}};function ane(n){let e=nne({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dA(e,e.limit,"L"):e}var Qv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){let r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Bv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Zs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Xs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?n4(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):t4(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=pp,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Qv.Kt=new Qv;var IA=class{constructor(){this.Cn=new bA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Qc.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Qc.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},bA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yn(dn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(dn.comparator)).toArray()}};var Xbe=new Uint8Array(0);var fU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C4=41943040,Fr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(C4,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var Ip=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var pU="LruGarbageCollector",cne=1048576;function gU([n,e],[t,r]){let i=Ke(n,t);return i===0?Ke(e,r):i}var CA=class{constructor(e){this.Ir=e,this.buffer=new yn(gU),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();gU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},TA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(pU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){bd(t)?le(pU,"Ignoring IndexedDB error during garbage collection: ",t):yield d0(t)}yield this.Vr(3e5)}))}},SA=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(wD.ce);let r=new CA(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(fU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fU):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),Zu()<=He.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function lne(n,e){return new SA(n,e)}var AA=class{constructor(){this.changes=new eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var MA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&up(r.mutation,i,$c.empty(),jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){let i=Hc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=sp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Hc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=va(),o=cp(),a=function(){return cp()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof vd)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),up(h.mutation,u,h.mutation.getFieldMask(),jn.now())):o.set(u.key,$c.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>a.set(u,new DA(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=cp(),i=new Vt((o,a)=>o-a),s=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||$c.empty();h=a.applyToLocalView(u,h),r.set(c,h);let g=(i.get(a.batchId)||Xe()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,g=d4();h.forEach(I=>{if(!s.has(I)){let T=g4(t.get(I),r.get(I));T!==null&&g.set(I,T),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ate(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Q.resolve(Hc()),a=hp,c=s;return o.next(u=>Q.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Xe())).next(h=>({batchId:a,changes:xte(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let i=sp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=sp();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,c=>{let u=function(g,I){return new gd(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,pi.newInvalidDocument(h)))});let a=sp();return o.forEach((c,u)=>{let h=s.get(c);h!==void 0&&up(h.mutation,u,$c.empty(),jn.now()),g0(t,u)&&(a=a.insert(c,u))}),a})}};var RA=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:id(i.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:ane(i.bundledQuery),readTime:id(i.readTime)}}(t)),Q.resolve()}};var PA=class{constructor(){this.overlays=new Vt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hc();return Q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){let i=Hc(),s=t.length+1,o=new Ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Vt((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Hc(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Hc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pA(t,r));let s=this.qr.get(t);s===void 0&&(s=Xe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var xA=class{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}};var bp=class{constructor(){this.Qr=new yn(Ht.$r),this.Ur=new yn(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Ce(new dn([])),r=new Ht(t,e),i=new Ht(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ce(new dn([])),r=new Ht(t,e),i=new Ht(t,e+1),s=Xe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ht=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}};var kA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new yn(Ht.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new fA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?lte:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Ke);return t.forEach(i=>{let s=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Ce.isDocumentKey(s)||(s=s.child(""));let o=new Ht(new Ce(s),0),a=new yn(Ke);return this.Zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},o),Q.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(t.mutations,i=>{let s=new Ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var OA=class{constructor(e){this.ri=e,this.docs=function(){return new Vt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let r=va();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pi.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=va(),o=t.path,a=new Ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ote(ste(h),r)<=0||(i.has(h.key)||g0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Me(9500)}ii(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new NA(this)}getSize(e){return Q.resolve(this.size)}},NA=class extends AA{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var LA=class{constructor(e){this.persistence=e,this.si=new eo(t=>bD(t),CD),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new bp,this.targetCount=0,this.ai=Ip.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Ip(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}};var Yv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new wD(0),this.li=!1,this.li=!0,this.hi=new xA,this.referenceDelegate=e(this),this.Pi=new LA(this),this.indexManager=new IA,this.remoteDocumentCache=function(i){return new OA(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new EA(t),this.Ii=new RA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new kA(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);let i=new FA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},FA=class extends YS{constructor(e){super(),this.currentSequenceNumber=e}},VA=class n{constructor(e){this.persistence=e,this.Ri=new bp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{let i=Ce.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Jv=class n{constructor(e,t){this.persistence=e,this.pi=new eo(r=>ute(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lne(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?Q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nv(e.data.value)),t}br(e,t,r){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var UA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Xe(),i=Xe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var BA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var jA=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return l2()?8:cte(Er())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new BA;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Zu()<=He.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Xu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Zu()<=He.DEBUG&&le("QueryEngine","Query:",Xu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Zu()<=He.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Xu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):Q.resolve())}ys(e,t){if(iU(t))return Q.resolve(null);let r=es(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=dA(t,null,"F"),r=es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Xe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Ds(t,a);return this.Cs(t,u,o,c.readTime)?this.ys(e,dA(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,r,i){return iU(t)||i.isEqual(Le.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?Q.resolve(null):(Zu()<=He.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xu(t)),this.vs(e,o,t,ite(i,hp)).next(a=>a))})}Ds(e,t){let r=new yn(l4(e));return t.forEach((i,s)=>{g0(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Zu()<=He.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.ps.getDocumentsMatchingQuery(e,t,Qc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var SD="LocalStore",une=3e8,zA=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(Ke),this.xs=new eo(s=>bD(s),CD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function dne(n,e,t,r){return new zA(n,e,t,r)}function T4(n,e){return S(this,null,function*(){let t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Xe();for(let u of i){o.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of s){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})})}function S4(n){let e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function hne(n,e){let t=Je(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let T=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Ln.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(g,T),function(L,O,q){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=une?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.Pi.updateTargetData(s,T))});let c=va(),u=Xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(fne(s,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Le.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Ms=i,s))}function fne(n,e,t){let r=Xe(),i=Xe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=va();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):le(SD,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function pne(n,e){let t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Ep(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function $A(n,e,t){return S(this,null,function*(){let r=Je(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!bd(o))throw o;le(SD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function mU(n,e,t){let r=Je(n),i=Le.min(),s=Xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){let g=Je(c),I=g.xs.get(h);return I!==void 0?Q.resolve(g.Ms.get(I)):g.Pi.getTargetData(u,h)}(r,o,es(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Le.min(),t?s:Xe())).next(a=>(gne(r,Mte(e),a),{documents:a,Qs:s})))}function gne(n,e,t){let r=n.Os.get(e)||Le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var Zv=class{constructor(){this.activeTargetIds=Nte()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var HA=class{constructor(){this.Mo=new Zv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var qA=class{Oo(e){}shutdown(){}};var yU="ConnectivityMonitor",Xv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(yU,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){le(yU,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ov=null;function GA(){return Ov===null?Ov=function(){return 268435456+Math.round(2147483648*Math.random())}():Ov++,"0x"+Ov.toString(16)}var US="RestConnection",mne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},WA=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ZS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=GA(),a=this.zo(e,t.toUriEncodedString());le(US,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:u}=new URL(a),h=Hf(u);return this.Jo(e,a,c,r,h).then(g=>(le(US,`Received RPC '${e}' ${o}: `,g),g),g=>{throw dp(US,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Id}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=mne[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var KA=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var On="WebChannelConnection",QA=class extends WA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=GA();return new Promise((a,c)=>{let u=new RS;u.setWithCredentials(!0),u.listenOnce(PS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ip.NO_ERROR:let g=u.getResponseJson();le(On,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case ip.TIMEOUT:le(On,`RPC '${e}' ${o} timed out`),c(new ye(ne.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:let I=u.getStatus();if(le(On,`RPC '${e}' ${o} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ee)>=0?ee:ne.UNKNOWN}(k.status);c(new ye(L,k.message))}else c(new ye(ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(ne.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{le(On,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);le(On,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",h,r,15)})}T_(e,t,r){let i=GA(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OS(),a=kS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");le(On,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let I=!1,T=!1,k=new KA({Yo:O=>{T?le(On,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(le(On,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),le(On,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),L=(O,q,ee)=>{O.listen(q,K=>{try{ee(K)}catch(he){setTimeout(()=>{throw he},0)}})};return L(g,Ju.EventType.OPEN,()=>{T||(le(On,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),L(g,Ju.EventType.CLOSE,()=>{T||(T=!0,le(On,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(g))}),L(g,Ju.EventType.ERROR,O=>{T||(T=!0,dp(On,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),k.a_(new ye(ne.UNAVAILABLE,"The operation could not be completed")))}),L(g,Ju.EventType.MESSAGE,O=>{if(!T){let q=O.data[0];Rt(!!q,16349);let ee=q,K=ee?.error||ee[0]?.error;if(K){le(On,`RPC '${e}' stream ${i} received error:`,K);let he=K.status,je=function(E){let C=$t[E];if(C!==void 0)return y4(C)}(he),ge=K.message;je===void 0&&(je=ne.INTERNAL,ge="Unknown error status: "+he+" with message "+K.message),T=!0,k.a_(new ye(je,ge)),g.close()}else le(On,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}}),L(a,xS.STAT_EVENT,O=>{O.stat===Pv.PROXY?le(On,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Pv.NOPROXY&&le(On,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function BS(){return typeof document<"u"?document:null}function A4(n){return new _A(n,!0)}var e0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var _U="PersistentStream",YA=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new e0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return S(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return S(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Js(t.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ye(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>S(this,null,function*(){this.state=0,this.start()}))}z_(e){return le(_U,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(le(_U,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},JA=class extends YA{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Xte(this.serializer,e),r=function(s){if(!("targetChange"in s))return Le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?id(o.readTime):Le.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=hU(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=uA(c)?{documents:ene(s,c)}:{query:tne(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Yte(s,o.resumeToken);let u=vA(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Qte(s,o.snapshotVersion.toTimestamp());let u=vA(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=rne(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=hU(this.serializer),t.removeTarget=e,this.q_(t)}};var ZA=class{},XA=class extends ZA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,wA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ne.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,wA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ne.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},eD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Js(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var wd="RemoteStore",tD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(()=>S(this,null,function*(){Dp(this)&&(le(wd,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Je(c);u.Ea.add(4),yield Ap(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield m0(u)})}(this))}))}),this.Ra=new eD(r,i)}};function m0(n){return S(this,null,function*(){if(Dp(n))for(let e of n.da)yield e(!0)})}function Ap(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function D4(n,e){let t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),RD(t)?MD(t):Cd(t).O_()&&DD(t,e))}function AD(n,e){let t=Je(n),r=Cd(t);t.Ia.delete(e),r.O_()&&M4(t,e),t.Ia.size===0&&(r.O_()?r.L_():Dp(t)&&t.Ra.set("Unknown"))}function DD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cd(n).Y_(e)}function M4(n,e){n.Va.Ue(e),Cd(n).Z_(e)}function MD(n){n.Va=new yA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Cd(n).start(),n.Ra.ua()}function RD(n){return Dp(n)&&!Cd(n).x_()&&n.Ia.size>0}function Dp(n){return Je(n).Ea.size===0}function R4(n){n.Va=void 0}function yne(n){return S(this,null,function*(){n.Ra.set("Online")})}function _ne(n){return S(this,null,function*(){n.Ia.forEach((e,t)=>{DD(n,e)})})}function vne(n,e){return S(this,null,function*(){R4(n),RD(n)?(n.Ra.ha(e),MD(n)):n.Ra.set("Unknown")})}function wne(n,e,t){return S(this,null,function*(){if(n.Ra.set("Online"),e instanceof Wv&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){le(wd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vU(n,r)}else if(e instanceof rd?n.Va.Ze(e):e instanceof Gv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{let r=yield S4(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Ln.EMPTY_BYTE_STRING,h.snapshotVersion)),M4(s,c);let g=new Ep(h.target,c,u,h.sequenceNumber);DD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){le(wd,"Failed to raise snapshot:",r),yield vU(n,r)}})}function vU(n,e,t){return S(this,null,function*(){if(!bd(e))throw e;n.Ea.add(1),yield Ap(n),n.Ra.set("Offline"),t||(t=()=>S4(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){le(wd,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield m0(n)}))})}function wU(n,e){return S(this,null,function*(){let t=Je(n);t.asyncQueue.verifyOperationInProgress(),le(wd,"RemoteStore received new credentials");let r=Dp(t);t.Ea.add(3),yield Ap(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield m0(t)})}function Ene(n,e){return S(this,null,function*(){let t=Je(n);e?(t.Ea.delete(2),yield m0(t)):e||(t.Ea.add(2),yield Ap(t),t.Ra.set("Unknown"))})}function Cd(n){return n.ma||(n.ma=function(t,r,i){let s=Je(t);return s.sa(),new JA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:yne.bind(null,n),t_:_ne.bind(null,n),r_:vne.bind(null,n),H_:wne.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.B_(),RD(n)?MD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),R4(n))}))),n.ma}var nD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function P4(n,e){if(Js("AsyncQueue",`${e}: ${n}`),bd(n))return new ye(ne.UNAVAILABLE,`${e}: ${n}`);throw n}var t0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=sp(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var n0=class{constructor(){this.ga=new Vt(Ce.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Ed=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,t0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var rD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},iD=class{constructor(){this.queries=EU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Je(t),s=i.queries;i.queries=EU(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ye(ne.ABORTED,"Firestore shutting down"))}};function EU(){return new eo(n=>c4(n),p0)}function Ine(n,e){return S(this,null,function*(){let t=Je(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new rD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=P4(o,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&PD(t)})}function bne(n,e){return S(this,null,function*(){let t=Je(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Cne(n,e){let t=Je(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&PD(t)}function Tne(n,e,t){let r=Je(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function PD(n){n.Ca.forEach(e=>{e.next()})}var sD,IU;(IU=sD||(sD={})).Ma="default",IU.Cache="cache";var oD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sD.Cache}};var r0=class{constructor(e){this.key=e}},i0=class{constructor(e){this.key=e}},aD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=l4(e),this.tu=new t0(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new n0,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),T=g0(this.query,g)?g:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),O=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),O=!0):this.su(I,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.eu(T,c)>0||u&&this.eu(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),O=!0):I&&!T&&(r.track({type:1,doc:I}),O=!0,(c||u)&&(a=!0)),O&&(T?(o=o.add(T),s=L?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>function(T,k){let L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:O})}};return L(T)-L(k)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Ed(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new i0(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new r0(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Xe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ed.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},xD="SyncEngine",cD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},lD=class{constructor(e){this.key=e,this.hu=!1}},uD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new eo(a=>c4(a),p0),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Ce.comparator),this.Au=new Map,this.Ru=new bp,this.Vu={},this.mu=new Map,this.fu=Ip.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Sne(n,e,t=!0){return S(this,null,function*(){let r=L4(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield x4(r,e,t,!0),i})}function Ane(n,e){return S(this,null,function*(){let t=L4(n);yield x4(t,e,!0,!1)})}function x4(n,e,t,r){return S(this,null,function*(){let i=yield pne(n.localStore,es(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Dne(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&D4(n.remoteStore,i),a})}function Dne(n,e,t,r,i){return S(this,null,function*(){n.pu=(g,I,T)=>function(L,O,q,ee){return S(this,null,function*(){let K=O.view.ru(q);K.Cs&&(K=yield mU(L.localStore,O.query,!1).then(({documents:M})=>O.view.ru(M,K)));let he=ee&&ee.targetChanges.get(O.targetId),je=ee&&ee.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(K,L.isPrimaryClient,he,je);return CU(L,O.targetId,ge.au),ge.snapshot})}(n,g,I,T);let s=yield mU(n.localStore,e,!0),o=new aD(e,s.Qs),a=o.ru(s.documents),c=wp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);CU(n,t,u.au);let h=new cD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Mne(n,e,t){return S(this,null,function*(){let r=Je(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!p0(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $A(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&AD(r.remoteStore,i.targetId),dD(r,i.targetId)}).catch(d0))):(dD(r,i.targetId),yield $A(r.localStore,i.targetId,!0))})}function Rne(n,e){return S(this,null,function*(){let t=Je(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),AD(t.remoteStore,r.targetId))})}function k4(n,e){return S(this,null,function*(){let t=Je(n);try{let r=yield hne(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Rt(o.hu,14607):i.removedDocuments.size>0&&(Rt(o.hu,42227),o.hu=!1))}),yield N4(t,r,e)}catch(r){yield d0(r)}})}function bU(n,e,t){let r=Je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Je(o);c.onlineState=a;let u=!1;c.queries.forEach((h,g)=>{for(let I of g.Sa)I.va(a)&&(u=!0)}),u&&PD(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Pne(n,e,t){return S(this,null,function*(){let r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Vt(Ce.comparator);o=o.insert(s,pi.newNoDocument(s,Le.min()));let a=Xe().add(s),c=new qv(Le.min(),new Map,new Vt(Ke),o,a);yield k4(r,c),r.du=r.du.remove(s),r.Au.delete(e),kD(r)}else yield $A(r.localStore,e,!1).then(()=>dD(r,e,t)).catch(d0)})}function dD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||O4(n,r)})}function O4(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(AD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),kD(n))}function CU(n,e,t){for(let r of t)r instanceof r0?(n.Ru.addReference(r.key,e),xne(n,r)):r instanceof i0?(le(xD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||O4(n,r.key)):Me(19791,{wu:r})}function xne(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(xD,"New document in limbo: "+t),n.Eu.add(r),kD(n))}function kD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ce(dn.fromString(e)),r=n.fu.next();n.Au.set(r,new lD(t)),n.du=n.du.insert(t,r),D4(n.remoteStore,new Ep(es(TD(t.path)),r,"TargetPurposeLimboResolution",wD.ce))}}function N4(n,e,t){return S(this,null,function*(){let r=Je(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=UA.As(c.targetId,u);s.push(h)}}))}),yield Promise.all(o),r.Pu.H_(i),yield function(c,u){return S(this,null,function*(){let h=Je(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(u,I=>Q.forEach(I.Es,T=>h.persistence.referenceDelegate.addReference(g,I.targetId,T)).next(()=>Q.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(g,I.targetId,T)))))}catch(g){if(!bd(g))throw g;le(SD,"Failed to update sequence numbers: "+g)}for(let g of u){let I=g.targetId;if(!g.fromCache){let T=h.Ms.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(I,L)}}})}(r.localStore,s))})}function kne(n,e){return S(this,null,function*(){let t=Je(n);if(!t.currentUser.isEqual(e)){le(xD,"User change. New user:",e.toKey());let r=yield T4(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ye(ne.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield N4(t,r.Ls)}})}function One(n,e){let t=Je(n),r=t.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let i=Xe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function L4(n){let e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=k4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=One.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pne.bind(null,e),e.Pu.H_=Cne.bind(null,e.eventManager),e.Pu.yu=Tne.bind(null,e.eventManager),e}var F4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=A4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return dne(this.persistence,new jA,t.initialUser,this.serializer)}Cu(t){return new Yv(VA.mi,this.serializer)}Du(t){return new HA}terminate(){return S(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),hD=class extends F4{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Rt(this.persistence.referenceDelegate instanceof Jv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new TA(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new Yv(r=>Jv.mi(r,t),this.serializer)}};var Nne=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kne.bind(null,this.syncEngine),yield Ene(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new iD}()}createDatastore(t){let r=A4(t.databaseInfo.databaseId),i=function(o){return new QA(o)}(t.databaseInfo);return function(o,a,c,u){return new XA(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new tD(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>bU(this.syncEngine,r,0),function(){return Xv.v()?new Xv:new qA}())}createSyncEngine(t,r){return function(s,o,a,c,u,h,g){let I=new uD(s,o,a,c,u,h);return g&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){yield function(r){return S(this,null,function*(){let i=Je(r);le(wd,"RemoteStore shutting down."),i.Ea.add(5),yield Ap(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var fD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wa="FirestoreClient",pD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=Vv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){le(wa,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(le(wa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=P4(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function jS(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),le(wa,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield T4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function TU(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Lne(n);le(wa,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wU(e.remoteStore,i)),n._onlineComponents=e})}function Lne(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(wa,"Using user provided OfflineComponentProvider");try{yield jS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dp("Error using user provided cache. Falling back to memory cache: "+t),yield jS(n,new F4)}}else le(wa,"Using default OfflineComponentProvider"),yield jS(n,new hD(void 0));return n._offlineComponents})}function Fne(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(wa,"Using user provided OnlineComponentProvider"),yield TU(n,n._uninitializedComponentsProvider._online)):(le(wa,"Using default OnlineComponentProvider"),yield TU(n,new Nne))),n._onlineComponents})}function SU(n){return S(this,null,function*(){let e=yield Fne(n),t=e.eventManager;return t.onListen=Sne.bind(null,e.syncEngine),t.onUnlisten=Mne.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ane.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rne.bind(null,e.syncEngine),t})}function V4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var AU=new Map;var Vne="firestore.googleapis.com",DU=!0,s0=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vne,this.ssl=DU}else this.host=e.host,this.ssl=e.ssl??DU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cne)throw new ye(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V4(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},gD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $S;switch(r.type){case"firstParty":return new GS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=AU.get(t);r&&(le("ComponentProvider","Removing Datastore"),AU.delete(t),r.terminate())}(this),Promise.resolve()}};var o0=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ys=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Tp(t,n._jsonSchema))return new n(e,r||null,new Ce(dn.fromString(t.referencePath)))}};Ys._jsonSchemaVersion="firestore/documentReference/1.0",Ys._jsonSchema={type:qt("string",Ys._jsonSchemaVersion),referencePath:qt("string")};var mD=class n extends o0{constructor(e,t,r){super(e,t,TD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ys(this.firestore,null,new Ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var MU="AsyncQueue",a0=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new e0(this,"async_queue_retry"),this._c=()=>{let r=BS();r&&le(MU,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=BS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=BS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new ya;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return S(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bd(e))throw e;le(MU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Js("INTERNAL UNHANDLED ERROR: ",RU(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=nD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Me(47125,{Pc:RU(this.nc)})}verifyOperationInProgress(){}Tc(){return S(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function RU(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function PU(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Cp=class extends gD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new a0,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,yield e}})}};function Une(n){if(n._terminated)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Bne(n),n._firestoreClient}function Bne(n){let e=n._freezeSettings(),t=function(i,s,o,a){return new JS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,V4(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new pD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}}(n._componentsProvider))}var sd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ln.fromBase64String(e))}catch(t){throw new ye(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};sd._jsonSchemaVersion="firestore/bytes/1.0",sd._jsonSchema={type:qt("string",sd._jsonSchemaVersion),bytes:qt("string")};var c0=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var od=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Tp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};od._jsonSchemaVersion="firestore/geoPoint/1.0",od._jsonSchema={type:qt("string",od._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};var ad=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ye(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ad._jsonSchemaVersion="firestore/vectorValue/1.0",ad._jsonSchema={type:qt("string",ad._jsonSchemaVersion),vectorValues:qt("object")};var jne=new RegExp("[~\\*/\\[\\]]");function zne(n,e,t){if(e.search(jne)>=0)throw xU(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new c0(...e.split("."))._internalPath}catch{throw xU(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xU(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ye(ne.INVALID_ARGUMENT,a+n+c)}var l0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(U4("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yD=class extends l0{data(){return super.data()}};function U4(n,e){return typeof e=="string"?zne(n,e):e instanceof c0?e._internalPath:e._delegate._internalPath}function $ne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _D=class{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Sp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[pp].arrayValue?.values?.map(r=>St(r.doubleValue));return new ad(t)}convertGeoPoint(e){return new od(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=f0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fp(e));default:return null}}convertTimestamp(e){let t=Zs(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=dn.fromString(e);Rt(b4(r),9688,{name:e});let i=new $v(r.get(1),r.get(3)),s=new Ce(r.popFirst(5));return i.isEqual(t)||Js(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Gc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wc=class n extends l0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(U4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wc._jsonSchema={type:qt("string",Wc._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};var cd=class extends Wc{data(e={}){return super.data(e)}},ld=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cd(this._firestore,this._userDataWriter,r.key,r,new Gc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Hne(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Hne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}ld._jsonSchemaVersion="firestore/querySnapshot/1.0",ld._jsonSchema={type:qt("string",ld._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};var u0=class extends _D{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,t)}};function B4(n,...e){n=la(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||PU(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(PU(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Ys)o=LS(n.firestore,Cp),a=TD(n._key.path),s={next:c=>{e[r]&&e[r](qne(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=LS(n,o0);o=LS(c.firestore,Cp),a=c._query;let u=new u0(o);s={next:h=>{e[r]&&e[r](new ld(o,u,c,h))},error:e[r+1],complete:e[r+2]},$ne(n._query)}return function(u,h,g,I){let T=new fD(I),k=new oD(h,T,g);return u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Ine(yield SU(u),k)})),()=>{T.Nu(),u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return bne(yield SU(u),k)}))}}(Une(o),a,i,s)}function qne(n,e,t){let r=t.docs.get(e._key),i=new u0(n);return new Wc(n,i,e._key,r,new Gc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Id=i})(Gu),da(new di("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Cp(new HS(r.getProvider("auth-internal")),new WS(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $v(u.options.projectId,h)}(o,i),o);return s=$({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Us(HV,qV,e),Us(HV,qV,"esm2020")})();var y0=function(){return y0=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},y0.apply(this,arguments)};var Gne={includeMetadataChanges:!1};function j4(n,e){return e===void 0&&(e=Gne),new be(function(t){var r=B4(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function z4(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:y0(y0({},r),(t={},t[e.idField]=n.id,t))}function $4(n){return j4(n,{includeMetadataChanges:!0}).pipe(me(function(e){return e.docs}))}function H4(n,e){return e===void 0&&(e={}),$4(n).pipe(me(function(t){return t.map(function(r){return z4(r,e)})}))}var q4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G4={};var to,OD;(function(){var n;function e(M,E){function C(){}C.prototype=E.prototype,M.D=E.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(D,A,x){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,E,C){C||(C=0);var D=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;16>A;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=M.g[0],C=M.g[1],A=M.g[2];var x=M.g[3],b=E+(x^C&(A^x))+D[0]+3614090360&4294967295;E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[1]+3905402710&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[2]+606105819&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[5]+1200080426&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[6]+2821735955&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[9]+2336552879&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[10]+4294925233&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(x^C&(A^x))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=x+(A^E&(C^A))+D[13]+4254626195&4294967295,x=E+(b<<12&4294967295|b>>>20),b=A+(C^x&(E^C))+D[14]+2792965006&4294967295,A=x+(b<<17&4294967295|b>>>15),b=C+(E^A&(x^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^x&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[6]+3225465664&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[11]+643717713&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[10]+38016083&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[15]+3634488961&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[14]+3275163606&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[3]+4107603335&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^x&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=x+(C^A&(E^C))+D[2]+4243563512&4294967295,x=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(x^E))+D[7]+1735328473&4294967295,A=x+(b<<14&4294967295|b>>>18),b=C+(x^E&(A^x))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^x)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[8]+2272392833&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[11]+1839030562&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[4]+1272893353&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[7]+4139469664&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[0]+3936430074&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[3]+3572445317&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^x)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=x+(E^C^A)+D[12]+3873151461&4294967295,x=E+(b<<11&4294967295|b>>>21),b=A+(x^E^C)+D[15]+530742520&4294967295,A=x+(b<<16&4294967295|b>>>16),b=C+(A^x^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~x))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[7]+1126891415&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[14]+2878612391&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[3]+2399980690&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[10]+4293915773&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[15]+4264355552&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[6]+2734768916&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~x))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=x+(C^(E|~A))+D[11]+3174756917&4294967295,x=E+(b<<10&4294967295|b>>>22),b=A+(E^(x|~C))+D[2]+718787259&4294967295,A=x+(b<<15&4294967295|b>>>17),b=C+(x^(A|~E))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+x&4294967295}r.prototype.u=function(M,E){E===void 0&&(E=M.length);for(var C=E-this.blockSize,D=this.B,A=this.h,x=0;x<E;){if(A==0)for(;x<=C;)i(this,M,x),x+=this.blockSize;if(typeof M=="string"){for(;x<E;)if(D[A++]=M.charCodeAt(x++),A==this.blockSize){i(this,D),A=0;break}}else for(;x<E;)if(D[A++]=M[x++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;var C=8*this.o;for(E=M.length-8;E<M.length;++E)M[E]=C&255,C/=256;for(this.u(M),M=Array(16),E=C=0;4>E;++E)for(var D=0;32>D;D+=8)M[C++]=this.g[E]>>>D&255;return M};function s(M,E){var C=a;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=E(M)}function o(M,E){this.h=E;for(var C=[],D=!0,A=M.length-1;0<=A;A--){var x=M[A]|0;D&&x==E||(C[A]=x,D=!1)}this.g=C}var a={};function c(M){return-128<=M&&128>M?s(M,function(E){return new o([E|0],0>E?-1:0)}):new o([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return O(u(-M));for(var E=[],C=1,D=0;M>=C;D++)E[D]=M/C|0,C*=4294967296;return new o(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return O(h(M.substring(1),E));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(E,8)),D=g,A=0;A<M.length;A+=8){var x=Math.min(8,M.length-A),b=parseInt(M.substring(A,A+x),E);8>x?(x=u(Math.pow(E,x)),D=D.j(x).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var g=c(0),I=c(1),T=c(16777216);n=o.prototype,n.m=function(){if(L(this))return-O(this).m();for(var M=0,E=1,C=0;C<this.g.length;C++){var D=this.i(C);M+=(0<=D?D:4294967296+D)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(L(this))return"-"+O(this).toString(M);for(var E=u(Math.pow(M,6)),C=this,D="";;){var A=he(C,E).g;C=q(C,A.j(E));var x=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=A,k(C))return x+D;for(;6>x.length;)x="0"+x;D=x+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=q(this,M),L(M)?-1:k(M)?0:1};function O(M){for(var E=M.g.length,C=[],D=0;D<E;D++)C[D]=~M.g[D];return new o(C,~M.h).add(I)}n.abs=function(){return L(this)?O(this):this},n.add=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0,A=0;A<=E;A++){var x=D+(this.i(A)&65535)+(M.i(A)&65535),b=(x>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);D=b>>>16,x&=65535,b&=65535,C[A]=b<<16|x}return new o(C,C[C.length-1]&-2147483648?-1:0)};function q(M,E){return M.add(O(E))}n.j=function(M){if(k(this)||k(M))return g;if(L(this))return L(M)?O(this).j(O(M)):O(O(this).j(M));if(L(M))return O(this.j(O(M)));if(0>this.l(T)&&0>M.l(T))return u(this.m()*M.m());for(var E=this.g.length+M.g.length,C=[],D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<M.g.length;A++){var x=this.i(D)>>>16,b=this.i(D)&65535,Ct=M.i(A)>>>16,zn=M.i(A)&65535;C[2*D+2*A]+=b*zn,ee(C,2*D+2*A),C[2*D+2*A+1]+=x*zn,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=x*Ct,ee(C,2*D+2*A+2)}for(D=0;D<E;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=E;D<2*E;D++)C[D]=0;return new o(C,0)};function ee(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function K(M,E){this.g=M,this.h=E}function he(M,E){if(k(E))throw Error("division by zero");if(k(M))return new K(g,g);if(L(M))return E=he(O(M),E),new K(O(E.g),O(E.h));if(L(E))return E=he(M,O(E)),new K(O(E.g),E.h);if(30<M.g.length){if(L(M)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;0>=D.l(M);)C=je(C),D=je(D);var A=ge(C,1),x=ge(D,1);for(D=ge(D,2),C=ge(C,2);!k(D);){var b=x.add(D);0>=b.l(M)&&(A=A.add(C),x=b),D=ge(D,1),C=ge(C,1)}return E=q(M,A.j(E)),new K(A,E)}for(A=g;0<=M.l(E);){for(C=Math.max(1,Math.floor(M.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),x=u(C),b=x.j(E);L(b)||0<b.l(M);)C-=D,x=u(C),b=x.j(E);k(x)&&(x=I),A=A.add(x),M=q(M,b)}return new K(A,M)}n.A=function(M){return he(this,M).h},n.and=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)&M.i(D);return new o(C,this.h&M.h)},n.or=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)|M.i(D);return new o(C,this.h|M.h)},n.xor=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)^M.i(D);return new o(C,this.h^M.h)};function je(M){for(var E=M.g.length+1,C=[],D=0;D<E;D++)C[D]=M.i(D)<<1|M.i(D-1)>>>31;return new o(C,M.h)}function ge(M,E){var C=E>>5;E%=32;for(var D=M.g.length-C,A=[],x=0;x<D;x++)A[x]=0<E?M.i(x+C)>>>E|M.i(x+C+1)<<32-E:M.i(x+C);return new o(A,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OD=G4.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,to=G4.Integer=o}).apply(typeof q4<"u"?q4:typeof self<"u"?self:typeof window<"u"?window:{});var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},no={};var ND,Wne,Td,LD,Mp,v0,FD,VD,UD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,_){return l==Array.prototype||l==Object.prototype||(l[f]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _0=="object"&&_0];for(var f=0;f<l.length;++f){var _=l[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var _=r;l=l.split(".");for(var R=0;R<l.length-1;R++){var V=l[R];if(!(V in _))break e;_=_[V]}l=l[l.length-1],R=_[l],f=f(R),f!=R&&f!=null&&e(_,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var _=0,R=!1,V={next:function(){if(!R&&_<l.length){var B=_++;return{value:f(B,l[B]),done:!1}}return R=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,_){return _})}});var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,_){return l.call.apply(l.bind,arguments)}function g(l,f,_){if(!l)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,R),l.apply(f,V)}}return function(){return l.apply(f,arguments)}}function I(l,f,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,I.apply(null,arguments)}function T(l,f){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),l.apply(this,R)}}function k(l,f){function _(){}_.prototype=f.prototype,l.aa=f.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(R,V,B){for(var Y=Array(arguments.length-2),et=2;et<arguments.length;et++)Y[et-2]=arguments[et];return f.prototype[V].apply(R,Y)}}function L(l){let f=l.length;if(0<f){let _=Array(f);for(let R=0;R<f;R++)_[R]=l[R];return _}return[]}function O(l,f){for(let _=1;_<arguments.length;_++){let R=arguments[_];if(c(R)){let V=l.length||0,B=R.length||0;l.length=V+B;for(let Y=0;Y<B;Y++)l[V+Y]=R[Y]}else l.push(R)}}class q{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ee(l){return/^[\s\xa0]*$/.test(l)}function K(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function he(l){return he[" "](l),l}he[" "]=function(){};var je=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ge(l,f,_){for(let R in l)f.call(_,l[R],R,l)}function M(l,f){for(let _ in l)f.call(void 0,l[_],_,l)}function E(l){let f={};for(let _ in l)f[_]=l[_];return f}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,f){let _,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(_ in R)l[_]=R[_];for(let B=0;B<C.length;B++)_=C[B],Object.prototype.hasOwnProperty.call(R,_)&&(l[_]=R[_])}}function A(l){var f=1;l=l.split(":");let _=[];for(;0<f&&l.length;)_.push(l.shift()),f--;return l.length&&_.push(l.join(":")),_}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=ho;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ct{constructor(){this.h=this.g=null}add(f,_){let R=zn.get();R.set(f,_),this.h?this.h.next=R:this.g=R,this.h=R}}var zn=new q(()=>new Kw,l=>l.reset());class Kw{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Oa,wi=!1,ho=new Ct,mg=()=>{let l=a.Promise.resolve(void 0);Oa=()=>{l.then(yg)}};var yg=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(_){x(_)}var f=zn;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}wi=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Zt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var gl=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let _=()=>{};a.addEventListener("test",_,f),a.removeEventListener("test",_,f)}catch{}return l}();function fs(l,f){if(Zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,R=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(je){e:{try{he(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else _=="mouseover"?f=l.fromElement:_=="mouseout"&&(f=l.toElement);this.relatedTarget=f,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:lh[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fs.aa.h.call(this)}}k(fs,Zt);var lh={2:"touch",3:"pen",4:"mouse"};fs.prototype.h=function(){fs.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ps="closure_listenable_"+(1e6*Math.random()|0),uh=0;function _g(l,f,_,R,V){this.listener=l,this.proxy=null,this.src=f,this.type=_,this.capture=!!R,this.ha=V,this.key=++uh,this.da=this.fa=!1}function Na(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ml(l){this.src=l,this.g={},this.h=0}ml.prototype.add=function(l,f,_,R,V){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var Y=_l(l,f,R,V);return-1<Y?(f=l[Y],_||(f.fa=!1)):(f=new _g(f,this.src,B,!!R,V),f.fa=_,l.push(f)),f};function yl(l,f){var _=f.type;if(_ in l.g){var R=l.g[_],V=Array.prototype.indexOf.call(R,f,void 0),B;(B=0<=V)&&Array.prototype.splice.call(R,V,1),B&&(Na(f),l.g[_].length==0&&(delete l.g[_],l.h--))}}function _l(l,f,_,R){for(var V=0;V<l.length;++V){var B=l[V];if(!B.da&&B.listener==f&&B.capture==!!_&&B.ha==R)return V}return-1}var La="closure_lm_"+(1e6*Math.random()|0),vl={};function vg(l,f,_,R,V){if(R&&R.once)return El(l,f,_,R,V);if(Array.isArray(f)){for(var B=0;B<f.length;B++)vg(l,f[B],_,R,V);return null}return _=gs(_),l&&l[ps]?l.K(f,_,u(R)?!!R.capture:!!R,V):wl(l,f,_,!1,R,V)}function wl(l,f,_,R,V,B){if(!f)throw Error("Invalid event type");var Y=u(V)?!!V.capture:!!V,et=Il(l);if(et||(l[La]=et=new ml(l)),_=et.add(f,_,R,Y,B),_.proxy)return _;if(R=dh(),_.proxy=R,R.src=l,R.listener=_,l.addEventListener)gl||(V=Y),V===void 0&&(V=!1),l.addEventListener(f.toString(),R,V);else if(l.attachEvent)l.attachEvent(Fa(f.toString()),R);else if(l.addListener&&l.removeListener)l.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function dh(){function l(_){return f.call(l.src,l.listener,_)}let f=Qw;return l}function El(l,f,_,R,V){if(Array.isArray(f)){for(var B=0;B<f.length;B++)El(l,f[B],_,R,V);return null}return _=gs(_),l&&l[ps]?l.L(f,_,u(R)?!!R.capture:!!R,V):wl(l,f,_,!0,R,V)}function Xt(l,f,_,R,V){if(Array.isArray(f))for(var B=0;B<f.length;B++)Xt(l,f[B],_,R,V);else R=u(R)?!!R.capture:!!R,_=gs(_),l&&l[ps]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],_=_l(B,_,R,V),-1<_&&(Na(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Il(l))&&(f=l.g[f.toString()],l=-1,f&&(l=_l(f,_,R,V)),(_=-1<l?f[l]:null)&&en(_))}function en(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ps])yl(f.i,l);else{var _=l.type,R=l.proxy;f.removeEventListener?f.removeEventListener(_,R,l.capture):f.detachEvent?f.detachEvent(Fa(_),R):f.addListener&&f.removeListener&&f.removeListener(R),(_=Il(f))?(yl(_,l),_.h==0&&(_.src=null,f[La]=null)):Na(l)}}}function Fa(l){return l in vl?vl[l]:vl[l]="on"+l}function Qw(l,f){if(l.da)l=!0;else{f=new fs(f,this);var _=l.listener,R=l.ha||l.src;l.fa&&en(l),l=_.call(R,f)}return l}function Il(l){return l=l[La],l instanceof ml?l:null}var hh="__closure_events_fn_"+(1e9*Math.random()>>>0);function gs(l){return typeof l=="function"?l:(l[hh]||(l[hh]=function(f){return l.handleEvent(f)}),l[hh])}function tn(){jr.call(this),this.i=new ml(this),this.M=this,this.F=null}k(tn,jr),tn.prototype[ps]=!0,tn.prototype.removeEventListener=function(l,f,_,R){Xt(this,l,f,_,R)};function fn(l,f){var _,R=l.F;if(R)for(_=[];R;R=R.F)_.push(R);if(l=l.M,R=f.type||f,typeof f=="string")f=new Zt(f,l);else if(f instanceof Zt)f.target=f.target||l;else{var V=f;f=new Zt(R,l),D(f,V)}if(V=!0,_)for(var B=_.length-1;0<=B;B--){var Y=f.g=_[B];V=fo(Y,R,!0,f)&&V}if(Y=f.g=l,V=fo(Y,R,!0,f)&&V,V=fo(Y,R,!1,f)&&V,_)for(B=0;B<_.length;B++)Y=f.g=_[B],V=fo(Y,R,!1,f)&&V}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var _=l.g[f],R=0;R<_.length;R++)Na(_[R]);delete l.g[f],l.h--}}this.F=null},tn.prototype.K=function(l,f,_,R){return this.i.add(String(l),f,!1,_,R)},tn.prototype.L=function(l,f,_,R){return this.i.add(String(l),f,!0,_,R)};function fo(l,f,_,R){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,B=0;B<f.length;++B){var Y=f[B];if(Y&&!Y.da&&Y.capture==_){var et=Y.listener,Nt=Y.ha||Y.src;Y.fa&&yl(l.i,Y),V=et.call(Nt,R)!==!1&&V}}return V&&!R.defaultPrevented}function wg(l,f,_){if(typeof l=="function")_&&(l=I(l,_));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Eg(l){l.g=wg(()=>{l.g=null,l.i&&(l.i=!1,Eg(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Ig extends jr{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Eg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(l){jr.call(this),this.h=l,this.g={}}k(po,jr);var go=[];function bl(l){ge(l.g,function(f,_){this.g.hasOwnProperty(_)&&en(f)},l),l.g={}}po.prototype.N=function(){po.aa.N.call(this),bl(this)},po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Va=a.JSON.stringify,ms=a.JSON.parse,bg=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function mo(){}mo.prototype.h=null;function fh(l){return l.h||(l.h=l.i())}function yo(){}var _o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){Zt.call(this,"d")}k(nn,Zt);function Cl(){Zt.call(this,"c")}k(Cl,Zt);var sr={},vo=null;function Tl(){return vo=vo||new tn}sr.La="serverreachability";function Cg(l){Zt.call(this,sr.La,l)}k(Cg,Zt);function Cr(l){let f=Tl();fn(f,new Cg(f))}sr.STAT_EVENT="statevent";function Tg(l,f){Zt.call(this,sr.STAT_EVENT,l),this.stat=f}k(Tg,Zt);function wn(l){let f=Tl();fn(f,new Tg(f,l))}sr.Ma="timingevent";function Ua(l,f){Zt.call(this,sr.Ma,l),this.size=f}k(Ua,Zt);function wo(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function ph(l,f,_,R,V,B){l.info(function(){if(l.g)if(B)for(var Y="",et=B.split("&"),Nt=0;Nt<et.length;Nt++){var tt=et[Nt].split("=");if(1<tt.length){var Dn=tt[0];tt=tt[1];var Mn=Dn.split("_");Y=2<=Mn.length&&Mn[1]=="type"?Y+(Dn+"="+tt+"&"):Y+(Dn+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+f+`
`+_+`
`+Y})}function Ba(l,f,_,R,V,B,Y){l.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+f+`
`+_+`
`+B+" "+Y})}function Io(l,f,_,R){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Sg(l,_)+(R?" "+R:"")})}function Ei(l,f){l.info(function(){return"TIMEOUT: "+f})}Eo.prototype.info=function(){};function Sg(l,f){if(!l.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var R=_[l];if(!(2>R.length)){var V=R[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return Va(_)}catch{return f}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},za;function $a(){}k($a,mo),$a.prototype.g=function(){return new XMLHttpRequest},$a.prototype.i=function(){return{}},za=new $a;function Ii(l,f,_,R){this.j=l,this.i=f,this.l=_,this.R=R||1,this.U=new po(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var Ag={},bo={};function Al(l,f,_){l.L=1,l.v=Pl(zr(f)),l.m=_,l.P=!0,Dl(l,null)}function Dl(l,f){l.F=Date.now(),To(l),l.A=zr(l.v);var _=l.A,R=l.R;Array.isArray(R)||(R=[String(R)]),Ng(_.i,"t",R),l.C=0,_=l.j.J,l.h=new gh,l.g=p(l.j,_?f:null,!l.m),0<l.O&&(l.M=new Ig(I(l.Y,l,l.g),l.O)),f=l.U,_=l.g,R=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(go[0]=V.toString()),V=go);for(var B=0;B<V.length;B++){var Y=vg(_,V[B],R||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Cr(),ph(l.i,l.u,l.A,l.l,l.R,l.m)}Ii.prototype.ca=function(l){l=l.target;let f=this.M;f&&Hn(l)==3?f.j():this.Y(l)},Ii.prototype.Y=function(l){try{if(l==this.g)e:{let Mn=Hn(this.g);var f=this.g.Ba();let Bl=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||Bg(this.g)))){this.J||Mn!=4||f==7||(f==8||0>=Bl?Cr(3):Cr(2)),Ml(this);var _=this.g.Z();this.X=_;t:if(Co(this)){var R=Bg(this.g);l="";var V=R.length,B=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bi(this),So(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,l+=this.h.i.decode(R[f],{stream:!(B&&f==V-1)});R.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=_==200,Ba(this.i,this.u,this.A,this.l,this.R,Mn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Nt=this.g;if((et=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(et)){var tt=et;break t}}tt=null}if(_=tt)Io(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,_);else{this.o=!1,this.s=3,wn(12),bi(this),So(this);break e}}if(this.P){_=!0;let Wr;for(;!this.J&&this.C<Y.length;)if(Wr=ys(this,Y),Wr==bo){Mn==4&&(this.s=4,wn(14),_=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==Ag){this.s=4,wn(15),Io(this.i,this.l,Y,"[Invalid Chunk]"),_=!1;break}else Io(this.i,this.l,Wr,null),Ha(this,Wr);if(Co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||Y.length!=0||this.h.h||(this.s=1,wn(16),_=!1),this.o=this.o&&_,!_)Io(this.i,this.l,Y,"[Invalid Chunked Response]"),bi(this),So(this);else if(0<Y.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Ul(Dn),Dn.M=!0,wn(11))}}else Io(this.i,this.l,Y,null),Ha(this,Y);Mn==4&&bi(this),this.o&&!this.J&&(Mn==4?An(this.j,this):(this.o=!1,To(this)))}else jg(this.g),_==400&&0<Y.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),bi(this),So(this)}}}catch{}finally{}};function Co(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ys(l,f){var _=l.C,R=f.indexOf(`
`,_);return R==-1?bo:(_=Number(f.substring(_,R)),isNaN(_)?Ag:(R+=1,R+_>f.length?bo:(f=f.slice(R,R+_),l.C=R+_,f)))}Ii.prototype.cancel=function(){this.J=!0,bi(this)};function To(l){l.S=Date.now()+l.I,Dg(l,l.I)}function Dg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wo(I(l.ba,l),f)}function Ml(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ii.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Ei(this.i,this.A),this.L!=2&&(Cr(),wn(17)),bi(this),this.s=2,So(this)):Dg(this,this.S-l)};function So(l){l.j.G==0||l.J||An(l.j,l)}function bi(l){Ml(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,bl(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ha(l,f){try{var _=l.j;if(_.G!=0&&(_.g==l||wh(_.h,l))){if(!l.K&&wh(_.h,l)&&_.G==3){try{var R=_.Da.g.parse(f)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)vs(_),ko(_);else break e;Vl(_),wn(18)}}else _.za=V[1],0<_.za-_.T&&37500>V[2]&&_.F&&_.v==0&&!_.C&&(_.C=wo(I(_.Za,_),6e3));if(1>=vh(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Si(_,11)}else if((l.K||_.g==l)&&vs(_),!ee(f))for(V=_.Da.g.parse(f),f=0;f<V.length;f++){let tt=V[f];if(_.T=tt[0],tt=tt[1],_.G==2)if(tt[0]=="c"){_.K=tt[1],_.ia=tt[2];let Dn=tt[3];Dn!=null&&(_.la=Dn,_.j.info("VER="+_.la));let Mn=tt[4];Mn!=null&&(_.Aa=Mn,_.j.info("SVER="+_.Aa));let Bl=tt[5];Bl!=null&&typeof Bl=="number"&&0<Bl&&(R=1.5*Bl,_.L=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;let Wr=l.g;if(Wr){let zg=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zg){var B=R.h;B.g||zg.indexOf("spdy")==-1&&zg.indexOf("quic")==-1&&zg.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Tr(B,B.h),B.h=null))}if(R.D){let Jw=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jw&&(R.ya=Jw,gt(R.I,R.D,Jw))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),R=_;var Y=l;if(R.qa=d(R,R.J?R.ia:null,R.W),Y.K){or(R.h,Y);var et=Y,Nt=R.L;Nt&&(et.I=Nt),et.B&&(Ml(et),To(et)),R.g=Y}else Mh(R);0<_.i.length&&Ja(_)}else tt[0]!="stop"&&tt[0]!="close"||Si(_,7);else _.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Si(_,7):Nl(_):tt[0]!="noop"&&_.l&&_.l.ta(tt),_.v=0)}}Cr(4)}catch{}}var mh=class{constructor(l,f){this.g=l,this.map=f}};function yh(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _h(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vh(l){return l.h?1:l.g?l.g.size:0}function wh(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Tr(l,f){l.g?l.g.add(f):l.h=f}function or(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}yh.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Ao(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let _ of l.g.values())f=f.concat(_.D);return f}return L(l.i)}function qa(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],_=l.length,R=0;R<_;R++)f.push(l[R]);return f}f=[],_=0;for(R in l)f[_++]=l[R];return f}function Eh(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var _=0;_<l;_++)f.push(_);return f}f=[],_=0;for(let R in l)f[_++]=R;return f}}}function dt(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var _=Eh(l),R=qa(l),V=R.length,B=0;B<V;B++)f.call(void 0,R[B],_&&_[B],l)}var Ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(l,f){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var R=l[_].indexOf("="),V=null;if(0<=R){var B=l[_].substring(0,R);V=l[_].substring(R+1)}else B=l[_];f(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ka(this,l.j),this.o=l.o,this.g=l.g,Rl(this,l.s),this.l=l.l;var f=l.i,_=new Qa;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),Mg(this,_),this.m=l.m}else l&&(f=String(l).match(Ga))?(this.h=!1,Ka(this,f[1]||"",!0),this.o=$r(f[2]||""),this.g=$r(f[3]||"",!0),Rl(this,f[4]),this.l=$r(f[5]||"",!0),Mg(this,f[6]||"",!0),this.m=$r(f[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(cr(f,Ih,!0),":");var _=this.g;return(_||f=="file")&&(l.push("//"),(f=this.o)&&l.push(cr(f,Ih,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(cr(_,_.charAt(0)=="/"?xg:Pg,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",cr(_,Do)),l.join("")};function zr(l){return new ar(l)}function Ka(l,f,_){l.j=_?$r(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Rl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Mg(l,f,_){f instanceof Qa?(l.i=f,xl(l.i,l.h)):(_||(f=cr(f,kg)),l.i=new Qa(f,l.h))}function gt(l,f,_){l.i.set(f,_)}function Pl(l){return gt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $r(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function cr(l,f,_){return typeof l=="string"?(l=encodeURI(l).replace(f,Rg),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Rg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ih=/[#\/\?@]/g,Pg=/[#\?:]/g,xg=/[#\?]/g,kg=/[#\?@]/g,Do=/#/g;function Qa(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Ci(l){l.g||(l.g=new Map,l.h=0,l.i&&Wa(l.i,function(f,_){l.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}n=Qa.prototype,n.add=function(l,f){Ci(this),this.i=null,l=qr(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(f),this.h+=1,this};function Og(l,f){Ci(l),f=qr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Hr(l,f){return Ci(l),f=qr(l,f),l.g.has(f)}n.forEach=function(l,f){Ci(this),this.g.forEach(function(_,R){_.forEach(function(V){l.call(f,V,R,this)},this)},this)},n.na=function(){Ci(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let R=0;R<f.length;R++){let V=l[R];for(let B=0;B<V.length;B++)_.push(f[R])}return _},n.V=function(l){Ci(this);let f=[];if(typeof l=="string")Hr(this,l)&&(f=f.concat(this.g.get(qr(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)f=f.concat(l[_])}return f},n.set=function(l,f){return Ci(this),this.i=null,l=qr(this,l),Hr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Ng(l,f,_){Og(l,f),0<_.length&&(l.i=null,l.g.set(qr(l,f),L(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var R=f[_];let B=encodeURIComponent(String(R)),Y=this.V(R);for(R=0;R<Y.length;R++){var V=B;Y[R]!==""&&(V+="="+encodeURIComponent(String(Y[R]))),l.push(V)}}return this.i=l.join("&")};function qr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function xl(l,f){f&&!l.j&&(Ci(l),l.i=null,l.g.forEach(function(_,R){var V=R.toLowerCase();R!=V&&(Og(this,R),Ng(this,V,_))},l)),l.j=f}function Lg(l,f){let _=new Eo;if(a.Image){let R=new Image;R.onload=T($n,_,"TestLoadImage: loaded",!0,f,R),R.onerror=T($n,_,"TestLoadImage: error",!1,f,R),R.onabort=T($n,_,"TestLoadImage: abort",!1,f,R),R.ontimeout=T($n,_,"TestLoadImage: timeout",!1,f,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=l}else f(!1)}function Ya(l,f){let _=new Eo,R=new AbortController,V=setTimeout(()=>{R.abort(),$n(_,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:R.signal}).then(B=>{clearTimeout(V),B.ok?$n(_,"TestPingServer: ok",!0,f):$n(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),$n(_,"TestPingServer: error",!1,f)})}function $n(l,f,_,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(_)}catch{}}function Fg(){this.g=new bg}function bh(l,f,_){let R=_||"";try{dt(l,function(V,B){let Y=V;u(V)&&(Y=Va(V)),f.push(R+B+"="+encodeURIComponent(Y))})}catch(V){throw f.push(R+"type="+encodeURIComponent("_badmap")),V}}function ht(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ht,mo),ht.prototype.g=function(){return new kl(this.l,this.j)},ht.prototype.i=function(l){return function(){return l}}({});function kl(l,f){tn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(kl,tn),n=kl.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Ro(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Mo(this):Ro(this),this.readyState==3&&Vg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Mo(this))},n.Qa=function(l){this.g&&(this.response=l,Mo(this))},n.ga=function(){this.g&&Mo(this)};function Mo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ro(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=f.next();return l.join(`\r
`)};function Ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ch(l){let f="";return ge(l,function(_,R){f+=R,f+=":",f+=_,f+=`\r
`}),f}function Po(l,f,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=Ch(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):gt(l,f,_))}function rt(l){tn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rt,tn);var Ug=/^https?$/i,Yw=["POST","PUT"];n=rt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():za.g(),this.v=this.o?fh(this.o):fh(za),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){xo(this,B);return}if(l=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)_.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(let B of R.keys())_.set(B,R.get(B));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Yw,f,void 0))||R||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Y]of _)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sh(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){xo(this,B)}};function xo(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Th(l),_s(l)}function Th(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),_s(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_s(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ol(this):this.bb())},n.bb=function(){Ol(this)};function Ol(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Hn(l)!=4||l.Z()!=2)){if(l.u&&Hn(l)==4)wg(l.Ea,0,l);else if(fn(l,"readystatechange"),Hn(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var _;if(!(_=f)){var R;if(R=Y===0){var V=String(l.D).match(Ga)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),R=!Ug.test(V?V.toLowerCase():"")}_=R}if(_)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var B=2<Hn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Th(l)}}finally{_s(l)}}}}function _s(l,f){if(l.g){Sh(l);let _=l.g,R=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||fn(l,"ready");try{_.onreadystatechange=R}catch{}}}function Sh(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Hn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ms(f)}};function Bg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function jg(l){let f={};l=(l.g&&2<=Hn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<l.length;R++){if(ee(l[R]))continue;var _=A(l[R]);let V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let B=f[V]||[];f[V]=B,B.push(_)}M(f,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(l,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||f}function Ah(l){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,l),this.cb=Gr("retryDelaySeedMs",1e4,l),this.Wa=Gr("forwardChannelMaxRetries",2,l),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yh(l&&l.concurrentRequestLimit),this.Da=new Fg,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ah.prototype,n.la=8,n.G=1,n.connect=function(l,f,_,R){wn(0),this.W=l,this.H=f||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.I=d(this,null,this.W),Ja(this)};function Nl(l){if(Ll(l),l.G==3){var f=l.U++,_=zr(l.I);if(gt(_,"SID",l.K),gt(_,"RID",f),gt(_,"TYPE","terminate"),Oo(l,_),f=new Ii(l,l.j,f),f.L=2,f.v=Pl(zr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=f.v,_=!0),_||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),To(f)}ws(l)}function ko(l){l.g&&(Ul(l),l.g.cancel(),l.g=null)}function Ll(l){ko(l),l.u&&(a.clearTimeout(l.u),l.u=null),vs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ja(l){if(!_h(l.h)&&!l.s){l.s=!0;var f=l.Ga;Oa||mg(),wi||(Oa(),wi=!0),ho.add(f,l),l.B=0}}function Fl(l,f){return vh(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wo(I(l.Ga,l,f),Ph(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new Ii(this,this.j,l),B=this.o;if(this.S&&(B?(B=E(B),D(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var f=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(f+=R,4096<f){f=_;break e}if(f===4096||_===this.i.length-1){f=_+1;break e}}f=1e3}else f=1e3;f=Ti(this,V,f),_=zr(this.I),gt(_,"RID",l),gt(_,"CVER",22),this.D&&gt(_,"X-HTTP-Session-Id",this.D),Oo(this,_),B&&(this.O?f="headers="+encodeURIComponent(String(Ch(B)))+"&"+f:this.m&&Po(_,this.m,B)),Tr(this.h,V),this.Ua&&gt(_,"TYPE","init"),this.P?(gt(_,"$req",f),gt(_,"SID","null"),V.T=!0,Al(V,_,null)):Al(V,_,f),this.G=2}}else this.G==3&&(l?Dh(this,l):this.i.length==0||_h(this.h)||Dh(this))};function Dh(l,f){var _;f?_=f.l:_=l.U++;let R=zr(l.I);gt(R,"SID",l.K),gt(R,"RID",_),gt(R,"AID",l.T),Oo(l,R),l.m&&l.o&&Po(R,l.m,l.o),_=new Ii(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ti(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Tr(l.h,_),Al(_,R,f)}function Oo(l,f){l.H&&ge(l.H,function(_,R){gt(f,R,_)}),l.l&&dt({},function(_,R){gt(f,R,_)})}function Ti(l,f,_){_=Math.min(l.i.length,_);var R=l.l?I(l.l.Na,l.l,l):null;e:{var V=l.i;let B=-1;for(;;){let Y=["count="+_];B==-1?0<_?(B=V[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let et=!0;for(let Nt=0;Nt<_;Nt++){let tt=V[Nt].g,Dn=V[Nt].map;if(tt-=B,0>tt)B=Math.max(0,V[Nt].g-100),et=!1;else try{bh(Dn,Y,"req"+tt+"_")}catch{R&&R(Dn)}}if(et){R=Y.join("&");break e}}}return l=l.i.splice(0,_),f.D=l,R}function Mh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Oa||mg(),wi||(Oa(),wi=!0),ho.add(f,l),l.v=0}}function Vl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wo(I(l.Fa,l),Ph(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Rh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wo(I(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),ko(this),Rh(this))};function Ul(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Rh(l){l.g=new Ii(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=zr(l.qa);gt(f,"RID","rpc"),gt(f,"SID",l.K),gt(f,"AID",l.T),gt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&gt(f,"TO",l.ja),gt(f,"TYPE","xmlhttp"),Oo(l,f),l.m&&l.o&&Po(f,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Pl(zr(f)),_.m=null,_.P=!0,Dl(_,l)}n.Za=function(){this.C!=null&&(this.C=null,ko(this),Vl(this),wn(19))};function vs(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function An(l,f){var _=null;if(l.g==f){vs(l),Ul(l),l.g=null;var R=2}else if(wh(l.h,f))_=f.D,or(l.h,f),R=1;else return;if(l.G!=0){if(f.o)if(R==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var V=l.B;R=Tl(),fn(R,new Ua(R,_)),Ja(l)}else Mh(l);else if(V=f.s,V==3||V==0&&0<f.X||!(R==1&&Fl(l,f)||R==2&&Vl(l)))switch(_&&0<_.length&&(f=l.h,f.i=f.i.concat(_)),V){case 1:Si(l,5);break;case 4:Si(l,10);break;case 3:Si(l,6);break;default:Si(l,2)}}}function Ph(l,f){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*f}function Si(l,f){if(l.j.info("Error code "+f),f==2){var _=I(l.fb,l),R=l.Xa;let V=!R;R=new ar(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ka(R,"https"),Pl(R),V?Lg(R.toString(),_):Ya(R.toString(),_)}else wn(2);l.G=0,l.l&&l.l.sa(f),ws(l),Ll(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function ws(l){if(l.G=0,l.ka=[],l.l){let f=Ao(l.h);(f.length!=0||l.i.length!=0)&&(O(l.ka,f),O(l.ka,l.i),l.h.i.length=0,L(l.i),l.i.length=0),l.l.ra()}}function d(l,f,_){var R=_ instanceof ar?zr(_):new ar(_);if(R.g!="")f&&(R.g=f+"."+R.g),Rl(R,R.s);else{var V=a.location;R=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var B=new ar(null);R&&Ka(B,R),f&&(B.g=f),V&&Rl(B,V),_&&(B.l=_),R=B}return _=l.D,f=l.ya,_&&f&&gt(R,_,f),gt(R,"VER",l.la),Oo(l,R),R}function p(l,f,_){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new rt(new ht({eb:_})):new rt(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function w(){}n=w.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function P(){}P.prototype.g=function(l,f){return new F(l,f)};function F(l,f){tn.call(this),this.g=new Ah(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ee(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ee(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ie(this)}k(F,tn),F.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},F.prototype.close=function(){Nl(this.g)},F.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Va(l),l=_);f.i.push(new mh(f.Ya++,l)),f.G==3&&Ja(f)},F.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,F.aa.N.call(this)};function U(l){nn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let _ in f){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(U,nn);function Z(){Cl.call(this),this.status=1}k(Z,Cl);function Ie(l){this.g=l}k(Ie,w),Ie.prototype.ua=function(){fn(this.g,"a")},Ie.prototype.ta=function(l){fn(this.g,new U(l))},Ie.prototype.sa=function(l){fn(this.g,new Z)},Ie.prototype.ra=function(){fn(this.g,"b")},P.prototype.createWebChannel=P.prototype.g,F.prototype.send=F.prototype.o,F.prototype.open=F.prototype.m,F.prototype.close=F.prototype.close,UD=no.createWebChannelTransport=function(){return new P},VD=no.getStatEventTarget=function(){return Tl()},FD=no.Event=sr,v0=no.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,Mp=no.ErrorCode=ja,Sl.COMPLETE="complete",LD=no.EventType=Sl,yo.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Td=no.WebChannel=yo,Wne=no.FetchXmlHttpFactory=ht,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,ND=no.XhrIo=rt}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var W4="@firebase/firestore",K4="4.8.0";var _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");var Gd="11.10.0";var el=new Wi("@firebase/firestore");function Sd(){return el.logLevel}function ce(n,...e){if(el.logLevel<=$e.DEBUG){let t=e.map(AM);el.debug(`Firestore (${Gd}): ${n}`,...t)}}function io(n,...e){if(el.logLevel<=$e.ERROR){let t=e.map(AM);el.error(`Firestore (${Gd}): ${n}`,...t)}}function Ta(n,...e){if(el.logLevel<=$e.WARN){let t=e.map(AM);el.warn(`Firestore (${Gd}): ${n}`,...t)}}function AM(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,U3(n,r,t)}function U3(n,e,t){let r=`FIRESTORE (${Gd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw io(r),new Error(r)}function ut(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||U3(e,i,r)}function Re(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},re=class extends Bn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var S0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},HD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}},qD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},GD=class{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gi,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gi)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new S0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new _n(e)}},WD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},KD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},A0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);let r=s=>{s.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new A0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Kne(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function B3(){return new TextEncoder}var Np=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Kne(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Be(n,e){return n<e?-1:n>e?1:0}function YD(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Be(r,i);{let s=B3(),o=Qne(s.encode(Q4(n,t)),s.encode(Q4(e,t)));return o!==0?o:Be(r,i)}}t+=r>65535?2:1}return Be(n.length,e.length)}function Q4(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Qne(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Be(n[t],e[t]);return Be(n.length,e.length)}function Od(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Y4="__name__",D0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):YD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}},Dt=class n extends D0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Yne=/^[_a-zA-Z][_a-zA-Z0-9]*$/,br=class n extends D0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Yne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y4}static keyField(){return new n([Y4])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var _e=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};function j3(n,e,t){if(!t)throw new re(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jne(n,e,t,r){if(e===!0&&r===!0)throw new re(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function J4(n){if(!_e.isDocumentKey(n))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z4(n){if(_e.isDocumentKey(n))throw new re(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function z3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function so(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cw(n);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zne(n,e){if(e<=0)throw new re(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Qt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Kp(n,e){if(!z3(n))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new re(H.INVALID_ARGUMENT,t);return!0}var X4=-62135596800,e3=1e6,Yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*e3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<X4)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e3}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-X4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Qt("string",Yt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Yt(0,0))}static max(){return new n(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lp=-1,JD=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};JD.UNKNOWN_ID=-1;function Xne(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Yt(t+1,0):new Yt(t,r));return new tl(i,_e.empty(),e)}function ere(n){return new tl(n.readTime,n.key,Lp)}var tl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),_e.empty(),Lp)}static max(){return new n(ke.max(),_e.empty(),Lp)}};function tre(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}var nre="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Wd(n){return S(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==nre)throw n;ce("LocalStore","Unexpectedly lost primary lease")})}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function rre(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kd(n){return n.name==="IndexedDbTransactionError"}var DM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),MM=-1;function lw(n){return n==null}function Fp(n){return n===0&&1/n==-1/0}function ire(n){return typeof n=="number"&&Number.isInteger(n)&&!Fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var $3="";function sre(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=t3(e)),e=ore(n.get(t),e);return t3(e)}function ore(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case $3:t+="";break;default:t+=s}}return t}function t3(n){return n+$3+""}var are="remoteDocuments",H3="owner";var q3="mutationQueues";var G3="mutations";var W3="documentMutations",cre="remoteDocumentsV14";var K3="remoteDocumentGlobal";var Q3="targets";var Y3="targetDocuments";var J3="targetGlobal",Z3="collectionParents";var X3="clientMetadata";var eB="bundles";var tB="namedQueries";var lre="indexConfiguration";var ure="indexState";var dre="indexEntries";var nB="documentOverlays";var hre="globals";var fre=[q3,G3,W3,are,Q3,H3,J3,Y3,X3,K3,Z3,eB,tB],CCe=[...fre,nB],pre=[q3,G3,W3,cre,Q3,H3,J3,Y3,X3,K3,Z3,eB,tB,nB],gre=pre,mre=[...gre,lre,ure,dre];var TCe=[...mre,hre];function n3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kt=class n{constructor(e,t){this.comparator=e,this.root=t||rs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rd(this.root,e,this.comparator,!0)}},Rd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1;rs.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new rs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vn=class n{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M0(this.data.getIterator())}getIteratorFrom(e){return new M0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},M0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ur=class n{constructor(e){this.fields=e,e.sort(br.comparator)}static empty(){return new n([])}unionWith(e){let t=new vn(br.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Od(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var R0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Vn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new R0("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Vn.EMPTY_BYTE_STRING=new Vn("");var yre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(n){if(ut(!!n,39018),typeof n=="string"){let e=0,t=yre.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ao(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}var iB="server_timestamp",sB="__type__",oB="__previous_value__",aB="__local_write_time__";function RM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sB])===null||t===void 0?void 0:t.stringValue)===iB}function uw(n){let e=n.mapValue.fields[oB];return RM(e)?uw(e):e}function Vp(n){let e=oo(n.mapValue.fields[aB].timestampValue);return new Yt(e.seconds,e.nanos)}var XD=class{constructor(e,t,r,i,s,o,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},P0="(default)",x0=class n{constructor(e,t){this.projectId=e,this.database=t||P0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===P0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var PM="__type__",cB="__max__",w0={mapValue:{fields:{__type__:{stringValue:cB}}}},xM="__vector__",Nd="value";function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RM(n)?4:uB(n)?9007199254740991:lB(n)?10:11:we(28295,{value:n})}function os(n,e){if(n===e)return!0;let t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vp(n).isEqual(Vp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=oo(i.timestampValue),a=oo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ao(i.bytesValue).isEqual(ao(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=At(i.doubleValue),a=At(s.doubleValue);return o===a?Fp(o)===Fp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Od(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(n3(o)!==n3(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!os(o[c],a[c])))return!1;return!0}(n,e);default:return we(52216,{left:n})}}function Up(n,e){return(n.values||[]).find(t=>os(t,e))!==void 0}function Ld(n,e){if(n===e)return 0;let t=Sa(n),r=Sa(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=At(s.integerValue||s.doubleValue),c=At(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return r3(n.timestampValue,e.timestampValue);case 4:return r3(Vp(n),Vp(e));case 5:return YD(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ao(s),c=ao(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Be(a[u],c[u]);if(h!==0)return h}return Be(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Be(At(s.latitude),At(o.latitude));return a!==0?a:Be(At(s.longitude),At(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return i3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,h;let g=s.fields||{},I=o.fields||{},T=(a=g[Nd])===null||a===void 0?void 0:a.arrayValue,k=(c=I[Nd])===null||c===void 0?void 0:c.arrayValue,L=Be(((u=T?.values)===null||u===void 0?void 0:u.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return L!==0?L:i3(T,k)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===w0.mapValue&&o===w0.mapValue)return 0;if(s===w0.mapValue)return 1;if(o===w0.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=YD(c[g],h[g]);if(I!==0)return I;let T=Ld(a[c[g]],u[h[g]]);if(T!==0)return T}return Be(c.length,h.length)}(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function r3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);let t=oo(n),r=oo(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function i3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ld(t[i],r[i]);if(s)return s}return Be(t.length,r.length)}function Fd(n){return e1(n)}function e1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=oo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ao(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=e1(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${e1(t.fields[o])}`;return i+"}"}(n.mapValue):we(61005,{value:n})}function b0(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=uw(n);return e?16+b0(e):16;case 5:return 2*n.stringValue.length;case 6:return ao(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+b0(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return xa(r.fields,(s,o)=>{i+=s.length+b0(o)}),i}(n.mapValue);default:throw we(13486,{value:n})}}function s3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function t1(n){return!!n&&"integerValue"in n}function kM(n){return!!n&&"arrayValue"in n}function o3(n){return!!n&&"nullValue"in n}function a3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function C0(n){return!!n&&"mapValue"in n}function lB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PM])===null||t===void 0?void 0:t.stringValue)===xM}function Pp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cB}var ACe={mapValue:{fields:{[PM]:{stringValue:xM},[Nd]:{arrayValue:{}}}}};var Ir=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!C0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=br.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());C0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];C0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xa(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Pp(this.value))}};function dB(n){let e=[];return xa(n.fields,(t,r)=>{let i=new br([t]);if(C0(r)){let s=dB(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ur(e)}var mi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vd=class{constructor(e,t){this.position=e,this.inclusive=t}};function c3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),t.key):r=Ld(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function l3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}var nl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function _re(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var k0=class{},Kt=class n extends k0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new r1(e,t,r):t==="array-contains"?new o1(e,r):t==="in"?new a1(e,r):t==="not-in"?new c1(e,r):t==="array-contains-any"?new l1(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new i1(e,r):new s1(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ld(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(Ld(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yi=class n extends k0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return hB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function hB(n){return n.op==="and"}function fB(n){return vre(n)&&hB(n)}function vre(n){for(let e of n.filters)if(e instanceof yi)return!1;return!0}function n1(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+Fd(n.value);if(fB(n))return n.filters.map(e=>n1(e)).join(",");{let e=n.filters.map(t=>n1(t)).join(",");return`${n.op}(${e})`}}function pB(n,e){return n instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&os(r.value,i.value)}(n,e):n instanceof yi?function(r,i){return i instanceof yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&pB(o,i.filters[a]),!0):!1}(n,e):void we(19439)}function gB(n){return n instanceof Kt?function(t){return`${t.field.canonicalString()} ${t.op} ${Fd(t.value)}`}(n):n instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(gB).join(" ,")+"}"}(n):"Filter"}var r1=class extends Kt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){let t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}},i1=class extends Kt{constructor(e,t){super(e,"in",t),this.keys=mB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},s1=class extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=mB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function mB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}var o1=class extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return kM(t)&&Up(t.arrayValue,this.value)}},a1=class extends Kt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Up(this.value.arrayValue,t)}},c1=class extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Up(this.value.arrayValue,t)}},l1=class extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!kM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Up(this.value.arrayValue,r))}};var u1=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function u3(n,e=null,t=[],r=[],i=null,s=null,o=null){return new u1(n,e,t,r,i,s,o)}function OM(n){let e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>n1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),e.Pe=t}return e.Pe}function NM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_re(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!l3(n.startAt,e.startAt)&&l3(n.endAt,e.endAt)}function d1(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Aa=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function wre(n,e,t,r,i,s,o,a){return new Aa(n,e,t,r,i,s,o,a)}function LM(n){return new Aa(n)}function d3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yB(n){return n.collectionGroup!==null}function xp(n){let e=Re(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vn(br.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new nl(s,r))}),t.has(br.keyField().canonicalString())||e.Te.push(new nl(br.keyField(),r))}return e.Te}function is(n){let e=Re(n);return e.Ie||(e.Ie=Ere(e,xp(n))),e.Ie}function Ere(n,e){if(n.limitType==="F")return u3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new nl(i.field,s)});let t=n.endAt?new Vd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vd(n.startAt.position,n.startAt.inclusive):null;return u3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function h1(n,e){let t=n.filters.concat([e]);return new Aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function O0(n,e,t){return new Aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dw(n,e){return NM(is(n),is(e))&&n.limitType===e.limitType}function _B(n){return`${OM(is(n))}|lt:${n.limitType}`}function Ad(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>gB(i)).join(", ")}]`),lw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fd(i)).join(",")),`Target(${r})`}(is(n))}; limitType=${n.limitType})`}function hw(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of xp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=c3(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,xp(r),i)||r.endAt&&!function(o,a,c){let u=c3(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,xp(r),i))}(n,e)}function Ire(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vB(n){return(e,t)=>{let r=!1;for(let i of xp(n)){let s=bre(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bre(n,e,t){let r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Ld(c,u):we(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var co=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rB(this.inner)}size(){return this.innerSize}};var Cre=new kt(_e.comparator);function lo(){return Cre}var wB=new kt(_e.comparator);function Rp(...n){let e=wB;for(let t of n)e=e.insert(t.key,t);return e}function EB(n){let e=wB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yc(){return kp()}function IB(){return kp()}function kp(){return new co(n=>n.toString(),(n,e)=>n.isEqual(e))}var Tre=new kt(_e.comparator),Sre=new vn(_e.comparator);function We(...n){let e=Sre;for(let t of n)e=e.add(t);return e}var Are=new vn(Be);function Dre(){return Are}function FM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function bB(n){return{integerValue:""+n}}function Mre(n,e){return ire(e)?bB(e):FM(n,e)}var Ud=class{constructor(){this._=void 0}};function Rre(n,e,t){return n instanceof Bd?function(i,s){let o={fields:{[sB]:{stringValue:iB},[aB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&RM(s)&&(s=uw(s)),s&&(o.fields[oB]=s),{mapValue:o}}(t,e):n instanceof rl?TB(n,e):n instanceof il?SB(n,e):function(i,s){let o=CB(i,s),a=h3(o)+h3(i.Ee);return t1(o)&&t1(i.Ee)?bB(a):FM(i.serializer,a)}(n,e)}function Pre(n,e,t){return n instanceof rl?TB(n,e):n instanceof il?SB(n,e):t}function CB(n,e){return n instanceof jd?function(r){return t1(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Bd=class extends Ud{},rl=class extends Ud{constructor(e){super(),this.elements=e}};function TB(n,e){let t=AB(e);for(let r of n.elements)t.some(i=>os(i,r))||t.push(r);return{arrayValue:{values:t}}}var il=class extends Ud{constructor(e){super(),this.elements=e}};function SB(n,e){let t=AB(e);for(let r of n.elements)t=t.filter(i=>!os(i,r));return{arrayValue:{values:t}}}var jd=class extends Ud{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function h3(n){return At(n.integerValue||n.doubleValue)}function AB(n){return kM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xre(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof rl&&i instanceof rl||r instanceof il&&i instanceof il?Od(r.elements,i.elements,os):r instanceof jd&&i instanceof jd?os(r.Ee,i.Ee):r instanceof Bd&&i instanceof Bd}(n.transform,e.transform)}var f1=class{constructor(e,t){this.version=e,this.transformResults=t}},ro=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function T0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zd=class{};function DB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,ro.none()):new sl(n.key,n.data,ro.none());{let t=n.data,r=Ir.empty(),i=new vn(br.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new as(n.key,r,new Ur(i.toArray()),ro.none())}}function kre(n,e,t){n instanceof sl?function(i,s,o){let a=i.value.clone(),c=p3(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof as?function(i,s,o){if(!T0(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=p3(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(MB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Op(n,e,t,r){return n instanceof sl?function(s,o,a,c){if(!T0(s.precondition,o))return a;let u=s.value.clone(),h=g3(s.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof as?function(s,o,a,c){if(!T0(s.precondition,o))return a;let u=g3(s.fieldTransforms,c,o),h=o.data;return h.setAll(MB(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return T0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Ore(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=CB(r.transform,i||null);s!=null&&(t===null&&(t=Ir.empty()),t.set(r.field,s))}return t||null}function f3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Od(r,i,(s,o)=>xre(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var sl=class extends zd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},as=class extends zd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function MB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function p3(n,e,t){let r=new Map;ut(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Pre(o,a,t[i]))}return r}function g3(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Rre(s,o,e))}return r}var Bp=class extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},p1=class extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var g1=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&kre(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=IB();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=DB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Od(this.mutations,e.mutations,(t,r)=>f3(t,r))&&Od(this.baseMutations,e.baseMutations,(t,r)=>f3(t,r))}},m1=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ut(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Tre}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var y1=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _1=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Gt,Ze;function Nre(n){switch(n){case H.OK:return we(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function RB(n){if(n===void 0)return io("GRPC error has no .code"),H.UNKNOWN;switch(n){case Gt.OK:return H.OK;case Gt.CANCELLED:return H.CANCELLED;case Gt.UNKNOWN:return H.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return H.INTERNAL;case Gt.UNAVAILABLE:return H.UNAVAILABLE;case Gt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Gt.NOT_FOUND:return H.NOT_FOUND;case Gt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Gt.ABORTED:return H.ABORTED;case Gt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Gt.DATA_LOSS:return H.DATA_LOSS;default:return we(39323,{code:n})}}(Ze=Gt||(Gt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";var m3=null;var Lre=new to([4294967295,4294967295],0);function y3(n){let e=B3().encode(n),t=new OD;return t.update(e),new Uint8Array(t.digest())}function _3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new to([t,r],0),new to([i,s],0)]}var v1=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Jc(`Invalid padding: ${t}`);if(r<0)throw new Jc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=to.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(to.fromNumber(r)));return i.compare(Lre)===1&&(i=new to([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=y3(e),[r,i]=_3(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=y3(e),[r,i]=_3(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Jc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var N0=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new kt(Be),lo(),We())}},jp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,We(),We(),We())}};var Pd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},L0=class{constructor(e,t){this.targetId=e,this.De=t}},F0=class{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},V0=class{constructor(){this.ve=0,this.Ce=v3(),this.Fe=Vn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),t=We(),r=We();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}}),new jp(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=v3()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},w1=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=lo(),this.je=E0(),this.Je=E0(),this.He=new kt(Be)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(d1(s))if(r===0){let o=new _e(s.path);this.Xe(t,o,mi.newNoDocument(o,ke.min()))}else ut(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}m3?.ct(function(h,g,I,T,k){var L,O,q,ee,K,he;let je={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},ge=g.unchangedNames;return ge&&(je.bloomFilter={applied:k===0,hashCount:(L=ge?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(ee=(q=(O=ge?.bits)===null||O===void 0?void 0:O.bitmap)===null||q===void 0?void 0:q.length)!==null&&ee!==void 0?ee:0,padding:(he=(K=ge?.bits)===null||K===void 0?void 0:K.padding)!==null&&he!==void 0?he:0,mightContain:M=>{var E;return(E=T?.mightContain(M))!==null&&E!==void 0&&E}}),je}(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ao(r).toUint8Array()}catch(c){if(c instanceof R0)return Ta("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new v1(o,i,s)}catch(c){return Ta(c instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&d1(a.target)){let c=new _e(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,mi.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=We();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new N0(e,t,this.He,this.ze,r);return this.ze=lo(),this.je=E0(),this.Je=E0(),this.He=new kt(Be),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new V0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new vn(Be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new vn(Be),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new V0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function E0(){return new kt(_e.comparator)}function v3(){return new kt(_e.comparator)}var Fre={asc:"ASCENDING",desc:"DESCENDING"},Vre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ure={and:"AND",or:"OR"},E1=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function I1(n,e){return n.useProto3Json||lw(e)?e:{value:e}}function U0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Bre(n,e){return U0(n,e.toTimestamp())}function ss(n){return ut(!!n,49232),ke.fromTimestamp(function(t){let r=oo(t);return new Yt(r.seconds,r.nanos)}(n))}function VM(n,e){return b1(n,e).canonicalString()}function b1(n,e){let t=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function xB(n){let e=Dt.fromString(n);return ut(FB(e),10190,{key:e.toString()}),e}function C1(n,e){return VM(n.databaseId,e.path)}function BD(n,e){let t=xB(e);if(t.get(1)!==n.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(OB(t))}function kB(n,e){return VM(n.databaseId,e)}function jre(n){let e=xB(n);return e.length===4?Dt.emptyPath():OB(e)}function T1(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OB(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function w3(n,e,t){return{name:C1(n,e),fields:t.value.mapValue.fields}}function zre(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ut(h===void 0||typeof h=="string",58123),Vn.fromBase64String(h||"")):(ut(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let h=u.code===void 0?H.UNKNOWN:RB(u.code);return new re(h,u.message||"")}(o);t=new F0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=BD(n,r.document.name),s=ss(r.document.updateTime),o=r.document.createTime?ss(r.document.createTime):ke.min(),a=new Ir({mapValue:{fields:r.document.fields}}),c=mi.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Pd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=BD(n,r.document),s=r.readTime?ss(r.readTime):ke.min(),o=mi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Pd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=BD(n,r.document),s=r.removedTargetIds||[];t=new Pd([],s,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new _1(i,s),a=r.targetId;t=new L0(a,o)}}return t}function $re(n,e){let t;if(e instanceof sl)t={update:w3(n,e.key,e.value)};else if(e instanceof Bp)t={delete:C1(n,e.key)};else if(e instanceof as)t={update:w3(n,e.key,e.data),updateMask:Zre(e.fieldMask)};else{if(!(e instanceof p1))return we(16599,{Rt:e.type});t={verify:C1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw we(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Bre(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)}(n,e.precondition)),t}function Hre(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?ss(i.updateTime):ss(s);return o.isEqual(ke.min())&&(o=ss(s)),new f1(o,i.transformResults||[])}(t,e))):[]}function qre(n,e){return{documents:[kB(n,e.path)]}}function Gre(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kB(n,i);let s=function(u){if(u.length!==0)return LB(yi.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:Dd(I.field),direction:Qre(I.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=I1(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function Wre(n){let e=jre(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ut(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let I=NB(g);return I instanceof yi&&fB(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(k){return new nl(Md(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,lw(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,T=g.values||[];return new Vd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let I=!g.before,T=g.values||[];return new Vd(T,I)}(t.endAt)),wre(e,i,o,s,a,"F",c,u)}function Kre(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Md(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Md(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Md(t.unaryFilter.field);return Kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Md(t.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(n):n.fieldFilter!==void 0?function(t){return Kt.create(Md(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yi.create(t.compositeFilter.filters.map(r=>NB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(t.compositeFilter.op))}(n):we(30097,{filter:n})}function Qre(n){return Fre[n]}function Yre(n){return Vre[n]}function Jre(n){return Ure[n]}function Dd(n){return{fieldPath:n.canonicalString()}}function Md(n){return br.fromServerFormat(n.fieldPath)}function LB(n){return n instanceof Kt?function(t){if(t.op==="=="){if(a3(t.value))return{unaryFilter:{field:Dd(t.field),op:"IS_NAN"}};if(o3(t.value))return{unaryFilter:{field:Dd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a3(t.value))return{unaryFilter:{field:Dd(t.field),op:"IS_NOT_NAN"}};if(o3(t.value))return{unaryFilter:{field:Dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dd(t.field),op:Yre(t.op),value:t.value}}}(n):n instanceof yi?function(t){let r=t.getFilters().map(i=>LB(i));return r.length===1?r[0]:{compositeFilter:{op:Jre(t.op),filters:r}}}(n):we(54877,{filter:n})}function Zre(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zp=class n{constructor(e,t,r,i,s=ke.min(),o=ke.min(),a=Vn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var S1=class{constructor(e){this.gt=e}};function Xre(n){let e=Wre({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?O0(e,e.limit,"L"):e}var B0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Fp(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=oo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ao(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?uB(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):lB(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):we(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Nd,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(At(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),_e.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};B0.Ut=new B0;var A1=class{constructor(){this.Dn=new D1}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(tl.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},D1=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Dt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Dt.comparator)).toArray()}};var DCe=new Uint8Array(0);var E3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VB=41943040,Vr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(VB,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);var $p=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var I3="LruGarbageCollector",eie=1048576;function b3([n,e],[t,r]){let i=Be(n,t);return i===0?Be(e,r):i}var M1=class{constructor(e){this.Tr=e,this.buffer=new vn(b3),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();b3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},R1=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(I3,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kd(t)?ce(I3,"Ignoring IndexedDB error during garbage collection: ",t):yield Wd(t)}yield this.Rr(3e5)}))}},P1=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(DM.ue);let r=new M1(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(E3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E3):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),Sd()<=$e.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function tie(n,e){return new P1(n,e)}var x1=class{constructor(){this.changes=new co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var k1=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var O1=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Op(r.mutation,i,Ur.empty(),Yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){let i=Yc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Rp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Yc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=lo(),o=kp(),a=function(){return kp()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof as)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Op(h.mutation,u,h.mutation.getFieldMask(),Yt.now())):o.set(u.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new k1(h,(g=o.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kp(),i=new kt((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||Ur.empty();h=a.applyToLocalView(u,h),r.set(c,h);let g=(i.get(a.batchId)||We()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,g=IB();h.forEach(I=>{if(!s.has(I)){let T=DB(t.get(I),r.get(I));T!==null&&g.set(I,T),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Yc()),a=Lp,c=s;return o.next(u=>W.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,We())).next(h=>({batchId:a,changes:EB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Rp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Rp();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let u=function(g,I){return new Aa(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,mi.newInvalidDocument(h)))});let a=Rp();return o.forEach((c,u)=>{let h=s.get(c);h!==void 0&&Op(h.mutation,u,Ur.empty(),Yt.now()),hw(t,u)&&(a=a.insert(c,u))}),a})}};var N1=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ss(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:Xre(i.bundledQuery),readTime:ss(i.readTime)}}(t)),W.resolve()}};var L1=class{constructor(){this.overlays=new kt(_e.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Yc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=Yc(),s=t.length+1,o=new _e(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kt((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Yc(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Yc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new y1(t,r));let s=this.kr.get(t);s===void 0&&(s=We(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var F1=class{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var Hp=class{constructor(){this.qr=new vn(Wt.Qr),this.$r=new vn(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Wt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Wt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new _e(new Dt([])),r=new Wt(t,e),i=new Wt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new _e(new Dt([])),r=new Wt(t,e),i=new Wt(t,e+1),s=We();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Wt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Wt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}};var V1=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new vn(Wt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new g1(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?MM:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Be);return t.forEach(i=>{let s=new Wt(i,0),o=new Wt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;_e.isDocumentKey(s)||(s=s.child(""));let o=new Wt(new _e(s),0),a=new vn(Be);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ut(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new Wt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Wt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var U1=class{constructor(e){this.ni=e,this.docs=function(){return new kt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():mi.newInvalidDocument(t))}getEntries(e,t){let r=lo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=lo(),o=t.path,a=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tre(ere(h),r)<=0||(i.has(h.key)||hw(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new B1(this)}getSize(e){return W.resolve(this.size)}},B1=class extends x1{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var j1=class{constructor(e){this.persistence=e,this.ii=new co(t=>OM(t),NM),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new Hp,this.targetCount=0,this._i=$p.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new $p(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var j0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new DM(0),this.ci=!1,this.ci=!0,this.li=new F1,this.referenceDelegate=e(this),this.hi=new j1(this),this.indexManager=new A1,this.remoteDocumentCache=function(i){return new U1(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new S1(t),this.Ti=new N1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new V1(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);let i=new z1(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},z1=class extends ZD{constructor(e){super(),this.currentSequenceNumber=e}},$1=class n{constructor(e){this.persistence=e,this.Ai=new Hp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=_e.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},z0=class n{constructor(e,t){this.persistence=e,this.gi=new co(r=>sre(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tie(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ke.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=b0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var H1=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=We(),i=We();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var q1=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var G1=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return IF()?8:rre(mn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new q1;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Sd()<=$e.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ad(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Sd()<=$e.DEBUG&&ce("QueryEngine","Query:",Ad(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Sd()<=$e.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ad(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(t))):W.resolve())}ps(e,t){if(d3(t))return W.resolve(null);let r=is(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=O0(t,null,"F"),r=is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=We(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,O0(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return d3(t)||i.isEqual(ke.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Sd()<=$e.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ad(t)),this.vs(e,o,t,Xne(i,Lp)).next(a=>a))})}bs(e,t){let r=new vn(vB(e));return t.forEach((i,s)=>{hw(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Sd()<=$e.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ad(t)),this.gs.getDocumentsMatchingQuery(e,t,tl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var UM="LocalStore",nie=3e8,W1=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kt(Be),this.Ms=new co(s=>OM(s),NM),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O1(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function rie(n,e,t,r){return new W1(n,e,t,r)}function UB(n,e){return S(this,null,function*(){let t=Re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=We();for(let u of i){o.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of s){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function iie(n,e){let t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let g=u.batch,I=g.keys(),T=W.resolve();return I.forEach(k=>{T=T.next(()=>h.getEntry(c,k)).next(L=>{let O=u.docVersions.get(k);ut(O!==null,48541),L.version.compareTo(O)<0&&(g.applyToRemoteDocument(L,u),L.isValidDocument()&&(L.setReadTime(u.commitVersion),h.addEntry(L)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=We();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function BB(n){let e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function sie(n,e){let t=Re(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,g)));let T=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(g,T),function(L,O,q){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=nie?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.hi.updateTargetData(s,T))});let c=lo(),u=We();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(oie(s,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(ke.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(g=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function oie(n,e,t){let r=We(),i=We();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=lo();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ce(UM,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function aie(n,e){let t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=MM),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cie(n,e){let t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new zp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function K1(n,e,t){return S(this,null,function*(){let r=Re(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Kd(o))throw o;ce(UM,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function C3(n,e,t){let r=Re(n),i=ke.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){let g=Re(c),I=g.Ms.get(h);return I!==void 0?W.resolve(g.Fs.get(I)):g.hi.getTargetData(u,h)}(r,o,is(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ke.min(),t?s:We())).next(a=>(lie(r,Ire(e),a),{documents:a,qs:s})))}function lie(n,e,t){let r=n.xs.get(e)||ke.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var $0=class{constructor(){this.activeTargetIds=Dre()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Q1=class{constructor(){this.Fo=new $0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Y1=class{xo(e){}shutdown(){}};var T3="ConnectivityMonitor",H0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(T3,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ce(T3,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var I0=null;function J1(){return I0===null?I0=function(){return 268435456+Math.round(2147483648*Math.random())}():I0++,"0x"+I0.toString(16)}var jD="RestConnection",uie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Z1=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===P0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=J1(),a=this.Go(e,t.toUriEncodedString());ce(jD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),h=ci(u);return this.jo(e,a,c,r,h).then(g=>(ce(jD,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Ta(jD,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=uie[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var X1=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Fn="WebChannelConnection",eM=class extends Z1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=J1();return new Promise((a,c)=>{let u=new ND;u.setWithCredentials(!0),u.listenOnce(LD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Mp.NO_ERROR:let g=u.getResponseJson();ce(Fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Mp.TIMEOUT:ce(Fn,`RPC '${e}' ${o} timed out`),c(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case Mp.HTTP_ERROR:let I=u.getStatus();if(ce(Fn,`RPC '${e}' ${o} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN}(k.status);c(new re(L,k.message))}else c(new re(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new re(H.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ce(Fn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ce(Fn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",h,r,15)})}P_(e,t,r){let i=J1(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UD(),a=VD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ce(Fn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let I=!1,T=!1,k=new X1({Ho:O=>{T?ce(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(ce(Fn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),ce(Fn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Yo:()=>g.close()}),L=(O,q,ee)=>{O.listen(q,K=>{try{ee(K)}catch(he){setTimeout(()=>{throw he},0)}})};return L(g,Td.EventType.OPEN,()=>{T||(ce(Fn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),L(g,Td.EventType.CLOSE,()=>{T||(T=!0,ce(Fn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(g))}),L(g,Td.EventType.ERROR,O=>{T||(T=!0,Ta(Fn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),k.__(new re(H.UNAVAILABLE,"The operation could not be completed")))}),L(g,Td.EventType.MESSAGE,O=>{var q;if(!T){let ee=O.data[0];ut(!!ee,16349);let K=ee,he=K?.error||((q=K[0])===null||q===void 0?void 0:q.error);if(he){ce(Fn,`RPC '${e}' stream ${i} received error:`,he);let je=he.status,ge=function(C){let D=Gt[C];if(D!==void 0)return RB(D)}(je),M=he.message;ge===void 0&&(ge=H.INTERNAL,M="Unknown error status: "+je+" with message "+he.message),T=!0,k.__(new re(ge,M)),g.close()}else ce(Fn,`RPC '${e}' stream ${i} received:`,ee),k.a_(ee)}}),L(a,FD.STAT_EVENT,O=>{O.stat===v0.PROXY?ce(Fn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===v0.NOPROXY&&ce(Fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function zD(){return typeof document<"u"?document:null}function fw(n){return new E1(n,!0)}var q0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var S3="PersistentStream",G0=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new q0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return S(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return S(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new re(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>S(this,null,function*(){this.state=0,this.start()}))}G_(e){return ce(S3,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ce(S3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},tM=class extends G0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=zre(this.serializer,e),r=function(s){if(!("targetChange"in s))return ke.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?ss(o.readTime):ke.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=T1(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=d1(c)?{documents:qre(s,c)}:{query:Gre(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PB(s,o.resumeToken);let u=I1(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=U0(s,o.snapshotVersion.toTimestamp());let u=I1(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=Kre(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=T1(this.serializer),t.removeTarget=e,this.k_(t)}},nM=class extends G0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Hre(e.writeResults,e.commitTime),r=ss(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=T1(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>$re(this.serializer,r))};this.k_(t)}};var rM=class{},iM=class extends rM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,b1(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(H.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,b1(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(H.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},sM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(io(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ol="RemoteStore",oM=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(()=>S(this,null,function*(){al(this)&&(ce(ol,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Re(c);u.Ia.add(4),yield Qp(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield pw(u)})}(this))}))}),this.Aa=new sM(r,i)}};function pw(n){return S(this,null,function*(){if(al(n))for(let e of n.da)yield e(!0)})}function Qp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function jB(n,e){let t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),$M(t)?zM(t):Qd(t).x_()&&jM(t,e))}function BM(n,e){let t=Re(n),r=Qd(t);t.Ta.delete(e),r.x_()&&zB(t,e),t.Ta.size===0&&(r.x_()?r.B_():al(t)&&t.Aa.set("Unknown"))}function jM(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qd(n).H_(e)}function zB(n,e){n.Ra.$e(e),Qd(n).Y_(e)}function zM(n){n.Ra=new w1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Qd(n).start(),n.Aa.aa()}function $M(n){return al(n)&&!Qd(n).M_()&&n.Ta.size>0}function al(n){return Re(n).Ia.size===0}function $B(n){n.Ra=void 0}function die(n){return S(this,null,function*(){n.Aa.set("Online")})}function hie(n){return S(this,null,function*(){n.Ta.forEach((e,t)=>{jM(n,e)})})}function fie(n,e){return S(this,null,function*(){$B(n),$M(n)?(n.Aa.la(e),zM(n)):n.Aa.set("Unknown")})}function pie(n,e,t){return S(this,null,function*(){if(n.Aa.set("Online"),e instanceof F0&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){ce(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield W0(n,r)}else if(e instanceof Pd?n.Ra.Ye(e):e instanceof L0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{let r=yield BB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(u);h&&s.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(Vn.EMPTY_BYTE_STRING,h.snapshotVersion)),zB(s,c);let g=new zp(h.target,c,u,h.sequenceNumber);jM(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce(ol,"Failed to raise snapshot:",r),yield W0(n,r)}})}function W0(n,e,t){return S(this,null,function*(){if(!Kd(e))throw e;n.Ia.add(1),yield Qp(n),n.Aa.set("Offline"),t||(t=()=>BB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){ce(ol,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield pw(n)}))})}function HB(n,e){return e().catch(t=>W0(n,t,e))}function gw(n){return S(this,null,function*(){let e=Re(n),t=Da(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:MM;for(;gie(e);)try{let i=yield aie(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,mie(e,i)}catch(i){yield W0(e,i)}qB(e)&&GB(e)})}function gie(n){return al(n)&&n.Pa.length<10}function mie(n,e){n.Pa.push(e);let t=Da(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function qB(n){return al(n)&&!Da(n).M_()&&n.Pa.length>0}function GB(n){Da(n).start()}function yie(n){return S(this,null,function*(){Da(n).na()})}function _ie(n){return S(this,null,function*(){let e=Da(n);for(let t of n.Pa)e.X_(t.mutations)})}function vie(n,e,t){return S(this,null,function*(){let r=n.Pa.shift(),i=m1.from(r,e,t);yield HB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gw(n)})}function wie(n,e){return S(this,null,function*(){e&&Da(n).Z_&&(yield function(r,i){return S(this,null,function*(){if(function(o){return Nre(o)&&o!==H.ABORTED}(i.code)){let s=r.Pa.shift();Da(r).N_(),yield HB(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield gw(r)}})}(n,e)),qB(n)&&GB(n)})}function A3(n,e){return S(this,null,function*(){let t=Re(n);t.asyncQueue.verifyOperationInProgress(),ce(ol,"RemoteStore received new credentials");let r=al(t);t.Ia.add(3),yield Qp(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield pw(t)})}function Eie(n,e){return S(this,null,function*(){let t=Re(n);e?(t.Ia.delete(2),yield pw(t)):e||(t.Ia.add(2),yield Qp(t),t.Aa.set("Unknown"))})}function Qd(n){return n.Va||(n.Va=function(t,r,i){let s=Re(t);return s.ia(),new tM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Zo:die.bind(null,n),e_:hie.bind(null,n),n_:fie.bind(null,n),J_:pie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.Va.N_(),$M(n)?zM(n):n.Aa.set("Unknown")):(yield n.Va.stop(),$B(n))}))),n.Va}function Da(n){return n.ma||(n.ma=function(t,r,i){let s=Re(t);return s.ia(),new nM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:yie.bind(null,n),n_:wie.bind(null,n),ea:_ie.bind(null,n),ta:vie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.N_(),yield gw(n)):(yield n.ma.stop(),n.Pa.length>0&&(ce(ol,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var aM=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function HM(n,e){if(io("AsyncQueue",`${e}: ${n}`),Kd(n))return new re(H.UNAVAILABLE,`${e}: ${n}`);throw n}var K0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Rp(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Q0=class{constructor(){this.fa=new kt(_e.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},$d=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,K0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var cM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},lM=class{constructor(){this.queries=D3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Re(t),s=i.queries;i.queries=D3(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new re(H.ABORTED,"Firestore shutting down"))}};function D3(){return new co(n=>_B(n),dw)}function WB(n,e){return S(this,null,function*(){let t=Re(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new cM,r=e.ba()?0:1);try{switch(r){case 0:s.ya=yield t.onListen(i,!0);break;case 1:s.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=HM(o,`Initialization of query '${Ad(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&qM(t)})}function KB(n,e){return S(this,null,function*(){let t=Re(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Iie(n,e){let t=Re(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&qM(t)}function bie(n,e,t){let r=Re(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function qM(n){n.Da.forEach(e=>{e.next()})}var uM,M3;(M3=uM||(uM={})).Fa="default",M3.Cache="cache";var Y0=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uM.Cache}};var J0=class{constructor(e){this.key=e}},Z0=class{constructor(e){this.key=e}},dM=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=vB(e),this.eu=new K0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Q0,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),T=hw(this.query,g)?g:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),O=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),O=!0):this.iu(I,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.Xa(T,c)>0||u&&this.Xa(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),O=!0):I&&!T&&(r.track({type:1,doc:I}),O=!0,(c||u)&&(a=!0)),O&&(T?(o=o.add(T),s=L?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,g)=>function(T,k){let L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:O})}};return L(T)-L(k)}(h.type,g.type)||this.Xa(h.doc,g.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new $d(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Q0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=We(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Z0(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new J0(r))}),t}uu(e){this.Ha=e.qs,this.Za=We();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $d.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},GM="SyncEngine",hM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},fM=class{constructor(e){this.key=e,this.lu=!1}},pM=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new co(a=>_B(a),dw),this.Tu=new Map,this.Iu=new Set,this.du=new kt(_e.comparator),this.Eu=new Map,this.Au=new Hp,this.Ru={},this.Vu=new Map,this.mu=$p.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Cie(n,e,t=!0){return S(this,null,function*(){let r=ej(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=yield QB(r,e,t,!0),i})}function Tie(n,e){return S(this,null,function*(){let t=ej(n);yield QB(t,e,!0,!1)})}function QB(n,e,t,r){return S(this,null,function*(){let i=yield cie(n.localStore,is(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Sie(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&jB(n.remoteStore,i),a})}function Sie(n,e,t,r,i){return S(this,null,function*(){n.gu=(g,I,T)=>function(L,O,q,ee){return S(this,null,function*(){let K=O.view.nu(q);K.Ds&&(K=yield C3(L.localStore,O.query,!1).then(({documents:M})=>O.view.nu(M,K)));let he=ee&&ee.targetChanges.get(O.targetId),je=ee&&ee.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(K,L.isPrimaryClient,he,je);return P3(L,O.targetId,ge._u),ge.snapshot})}(n,g,I,T);let s=yield C3(n.localStore,e,!0),o=new dM(e,s.qs),a=o.nu(s.documents),c=jp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);P3(n,t,u._u);let h=new hM(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function Aie(n,e,t){return S(this,null,function*(){let r=Re(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!dw(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield K1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&BM(r.remoteStore,i.targetId),gM(r,i.targetId)}).catch(Wd))):(gM(r,i.targetId),yield K1(r.localStore,i.targetId,!0))})}function Die(n,e){return S(this,null,function*(){let t=Re(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),BM(t.remoteStore,r.targetId))})}function Mie(n,e,t){return S(this,null,function*(){let r=Lie(n);try{let i=yield function(o,a){let c=Re(o),u=Yt.now(),h=a.reduce((T,k)=>T.add(k.key),We()),g,I;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=lo(),L=We();return c.Os.getEntries(T,h).next(O=>{k=O,k.forEach((q,ee)=>{ee.isValidDocument()||(L=L.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,k)).next(O=>{g=O;let q=[];for(let ee of a){let K=Ore(ee,g.get(ee.key).overlayedDocument);K!=null&&q.push(new as(ee.key,K,dB(K.value.mapValue),ro.exists(!0)))}return c.mutationQueue.addMutationBatch(T,u,q,a)}).next(O=>{I=O;let q=O.applyToLocalDocumentSet(g,L);return c.documentOverlayCache.saveOverlays(T,O.batchId,q)})}).then(()=>({batchId:I.batchId,changes:EB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new kt(Be)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Yp(r,i.changes),yield gw(r.remoteStore)}catch(i){let s=HM(i,"Failed to persist write");t.reject(s)}})}function YB(n,e){return S(this,null,function*(){let t=Re(n);try{let r=yield sie(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ut(o.lu,14607):i.removedDocuments.size>0&&(ut(o.lu,42227),o.lu=!1))}),yield Yp(t,r,e)}catch(r){yield Wd(r)}})}function R3(n,e,t){let r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Re(o);c.onlineState=a;let u=!1;c.queries.forEach((h,g)=>{for(let I of g.wa)I.va(a)&&(u=!0)}),u&&qM(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rie(n,e,t){return S(this,null,function*(){let r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new kt(_e.comparator);o=o.insert(s,mi.newNoDocument(s,ke.min()));let a=We().add(s),c=new N0(ke.min(),new Map,new kt(Be),o,a);yield YB(r,c),r.du=r.du.remove(s),r.Eu.delete(e),WM(r)}else yield K1(r.localStore,e,!1).then(()=>gM(r,e,t)).catch(Wd)})}function Pie(n,e){return S(this,null,function*(){let t=Re(n),r=e.batch.batchId;try{let i=yield iie(t.localStore,e);ZB(t,r,null),JB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Yp(t,i)}catch(i){yield Wd(i)}})}function xie(n,e,t){return S(this,null,function*(){let r=Re(n);try{let i=yield function(o,a){let c=Re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(g=>(ut(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(u,g))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);ZB(r,e,t),JB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Yp(r,i)}catch(i){yield Wd(i)}})}function JB(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function ZB(n,e,t){let r=Re(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function gM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||XB(n,r)})}function XB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(BM(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),WM(n))}function P3(n,e,t){for(let r of t)r instanceof J0?(n.Au.addReference(r.key,e),kie(n,r)):r instanceof Z0?(ce(GM,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||XB(n,r.key)):we(19791,{yu:r})}function kie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ce(GM,"New document in limbo: "+t),n.Iu.add(r),WM(n))}function WM(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new _e(Dt.fromString(e)),r=n.mu.next();n.Eu.set(r,new fM(t)),n.du=n.du.insert(t,r),jB(n.remoteStore,new zp(is(LM(t.path)),r,"TargetPurposeLimboResolution",DM.ue))}}function Yp(n,e,t){return S(this,null,function*(){let r=Re(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let g=u?!u.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(u){i.push(u);let g=H1.Es(c.targetId,u);s.push(g)}}))}),yield Promise.all(o),r.hu.J_(i),yield function(c,u){return S(this,null,function*(){let h=Re(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(u,I=>W.forEach(I.Is,T=>h.persistence.referenceDelegate.addReference(g,I.targetId,T)).next(()=>W.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(g,I.targetId,T)))))}catch(g){if(!Kd(g))throw g;ce(UM,"Failed to update sequence numbers: "+g)}for(let g of u){let I=g.targetId;if(!g.fromCache){let T=h.Fs.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(I,L)}}})}(r.localStore,s))})}function Oie(n,e){return S(this,null,function*(){let t=Re(n);if(!t.currentUser.isEqual(e)){ce(GM,"User change. New user:",e.toKey());let r=yield UB(t.localStore,e);t.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new re(H.CANCELLED,o))})}),s.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yp(t,r.Bs)}})}function Nie(n,e){let t=Re(n),r=t.Eu.get(e);if(r&&r.lu)return We().add(r.key);{let i=We(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function ej(n){let e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rie.bind(null,e),e.hu.J_=Iie.bind(null,e.eventManager),e.hu.pu=bie.bind(null,e.eventManager),e}function Lie(n){let e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xie.bind(null,e),e}var tj=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=fw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return rie(this.persistence,new G1,t.initialUser,this.serializer)}Du(t){return new j0($1.Vi,this.serializer)}bu(t){return new Q1}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),mM=class extends tj{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ut(this.persistence.referenceDelegate instanceof z0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new R1(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new j0(r=>z0.Vi(r,t),this.serializer)}};var Fie=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>R3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oie.bind(null,this.syncEngine),yield Eie(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new lM}()}createDatastore(t){let r=fw(t.databaseInfo.databaseId),i=function(o){return new eM(o)}(t.databaseInfo);return function(o,a,c,u){return new iM(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new oM(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>R3(this.syncEngine,r,0),function(){return H0.C()?new H0:new Y1}())}createSyncEngine(t,r){return function(s,o,a,c,u,h,g){let I=new pM(s,o,a,c,u,h);return g&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(s){return S(this,null,function*(){let o=Re(s);ce(ol,"RemoteStore shutting down."),o.Ia.add(5),yield Qp(o),o.Ea.shutdown(),o.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var X0=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ma="FirestoreClient",yM=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_n.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){ce(Ma,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(ce(Ma,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=HM(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $D(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ce(Ma,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield UB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ta("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ta("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function x3(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Vie(n);ce(Ma,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>A3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>A3(e.remoteStore,i)),n._onlineComponents=e})}function Vie(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Ma,"Using user provided OfflineComponentProvider");try{yield $D(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),yield $D(n,new tj)}}else ce(Ma,"Using default OfflineComponentProvider"),yield $D(n,new mM(void 0));return n._offlineComponents})}function nj(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Ma,"Using user provided OnlineComponentProvider"),yield x3(n,n._uninitializedComponentsProvider._online)):(ce(Ma,"Using default OnlineComponentProvider"),yield x3(n,new Fie))),n._onlineComponents})}function Uie(n){return nj(n).then(e=>e.syncEngine)}function rj(n){return S(this,null,function*(){let e=yield nj(n),t=e.eventManager;return t.onListen=Cie.bind(null,e.syncEngine),t.onUnlisten=Aie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Tie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Die.bind(null,e.syncEngine),t})}function Bie(n,e,t={}){let r=new gi;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(s,o,a,c,u){let h=new X0({next:I=>{h.Ou(),o.enqueueAndForget(()=>KB(s,g));let T=I.docs.has(a);!T&&I.fromCache?u.reject(new re(H.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&I.fromCache&&c&&c.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(I)},error:I=>u.reject(I)}),g=new Y0(LM(a.path),h,{includeMetadataChanges:!0,ka:!0});return WB(s,g)}(yield rj(n),n.asyncQueue,e,t,r)})),r.promise}function jie(n,e,t={}){let r=new gi;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(s,o,a,c,u){let h=new X0({next:I=>{h.Ou(),o.enqueueAndForget(()=>KB(s,g)),I.fromCache&&c.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(I)},error:I=>u.reject(I)}),g=new Y0(a,h,{includeMetadataChanges:!0,ka:!0});return WB(s,g)}(yield rj(n),n.asyncQueue,e,t,r)})),r.promise}function ij(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var k3=new Map;var sj="firestore.googleapis.com",O3=!0,ew=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sj,this.ssl=O3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:O3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eie)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ij((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HD;switch(r.type){case"firstParty":return new KD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=k3.get(t);r&&(ce("ComponentProvider","Removing Datastore"),k3.delete(t),r.terminate())}(this),Promise.resolve()}};function oj(n,e,t,r={}){var i;n=so(n,Hd);let s=ci(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Bu(`https://${c}`),ju("Firestore",!0)),o.host!==sj&&o.host!==c&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Gi(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=_n.MOCK_USER;else{h=H_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new _n(I)}n._authCredentials=new qD(new S0(h,g))}}var Ra=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kp(t,n._jsonSchema))return new n(e,r||null,new _e(Dt.fromString(t.referencePath)))}};Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Qt("string",Tn._jsonSchemaVersion),referencePath:Qt("string")};var Ea=class n extends Ra{constructor(e,t,r){super(e,t,LM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new _e(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function aj(n,e,...t){if(n=bt(n),j3("collection","path",e),n instanceof Hd){let r=Dt.fromString(e,...t);return Z4(r),new Ea(n,null,r)}{if(!(n instanceof Tn||n instanceof Ea))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return Z4(r),new Ea(n.firestore,null,r)}}function KM(n,e,...t){if(n=bt(n),arguments.length===1&&(e=Np.newId()),j3("doc","path",e),n instanceof Hd){let r=Dt.fromString(e,...t);return J4(r),new Tn(n,null,new _e(r))}{if(!(n instanceof Tn||n instanceof Ea))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return J4(r),new Tn(n.firestore,n instanceof Ea?n.converter:null,new _e(r))}}var N3="AsyncQueue",tw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new q0(this,"async_queue_retry"),this.oc=()=>{let r=zD();r&&ce(N3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=zD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=zD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new gi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return S(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kd(e))throw e;ce(N3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,io("INTERNAL UNHANDLED ERROR: ",L3(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=aM.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:L3(this.tc)})}verifyOperationInProgress(){}Pc(){return S(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function L3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Pa=class extends Hd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tw,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tw(e),this._firestoreClient=void 0,yield e}})}};function cj(n,e){let t=typeof n=="object"?n:Ls(),r=typeof n=="string"?n:e||P0,i=sa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=$_("firestore");s&&oj(i,...s)}return i}function QM(n){if(n._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zie(n),n._firestoreClient}function zie(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,u,h){return new XD(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ij(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new yM(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Ia=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Vn.fromBase64String(e))}catch(t){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ia._jsonSchemaVersion="firestore/bytes/1.0",Ia._jsonSchema={type:Qt("string",Ia._jsonSchemaVersion),bytes:Qt("string")};var qd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qp=class{constructor(e){this._methodName=e}};var ba=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:Qt("string",ba._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};var Ca=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ca._jsonSchemaVersion="firestore/vectorValue/1.0",Ca._jsonSchema={type:Qt("string",Ca._jsonSchemaVersion),vectorValues:Qt("object")};var $ie=/^__.*__$/,_M=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}},nw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new as(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}var vM=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return iw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(lj(this.Ec)&&$ie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},wM=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fw(e)}Dc(e,t,r,i=!1){return new vM({Ec:e,methodName:t,bc:r,path:br.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function YM(n){let e=n._freezeSettings(),t=fw(n._databaseId);return new wM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hie(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);JM("Data must be an object, but it was:",o,r);let a=uj(r,o),c,u;if(s.merge)c=new Ur(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let I=EM(e,g,t);if(!o.contains(I))throw new re(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);hj(h,I)||h.push(I)}c=new Ur(h),u=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,u=o.fieldTransforms;return new _M(new Ir(a),c,u)}var rw=class n extends qp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function qie(n,e,t,r){let i=n.Dc(1,e,t);JM("Data must be an object, but it was:",i,r);let s=[],o=Ir.empty();xa(r,(c,u)=>{let h=ZM(e,c,t);u=bt(u);let g=i.gc(h);if(u instanceof rw)s.push(h);else{let I=Jp(u,g);I!=null&&(s.push(h),o.set(h,I))}});let a=new Ur(s);return new nw(o,a,i.fieldTransforms)}function Gie(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[EM(e,r,t)],c=[i];if(s.length%2!=0)throw new re(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)a.push(EM(e,s[I])),c.push(s[I+1]);let u=[],h=Ir.empty();for(let I=a.length-1;I>=0;--I)if(!hj(u,a[I])){let T=a[I],k=c[I];k=bt(k);let L=o.gc(T);if(k instanceof rw)u.push(T);else{let O=Jp(k,L);O!=null&&(u.push(T),h.set(T,O))}}let g=new Ur(u);return new nw(h,g,o.fieldTransforms)}function Wie(n,e,t,r=!1){return Jp(t,n.Dc(r?4:3,e))}function Jp(n,e){if(dj(n=bt(n)))return JM("Unsupported field value:",e,n),uj(n,e);if(n instanceof qp)return function(r,i){if(!lj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Jp(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mre(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Yt.fromDate(r);return{timestampValue:U0(i.serializer,s)}}if(r instanceof Yt){let s=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:U0(i.serializer,s)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:PB(i.serializer,r._byteString)};if(r instanceof Tn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:VM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ca)return function(o,a){return{mapValue:{fields:{[PM]:{stringValue:xM},[Nd]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return FM(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${cw(r)}`)}(n,e)}function uj(n,e){let t={};return rB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(n,(r,i)=>{let s=Jp(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function dj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof ba||n instanceof Ia||n instanceof Tn||n instanceof qp||n instanceof Ca)}function JM(n,e,t){if(!dj(t)||!z3(t)){let r=cw(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function EM(n,e,t){if((e=bt(e))instanceof qd)return e._internalPath;if(typeof e=="string")return ZM(n,e);throw iw("Field path arguments must be of type string or ",n,!1,void 0,t)}var Kie=new RegExp("[~\\*/\\[\\]]");function ZM(n,e,t){if(e.search(Kie)>=0)throw iw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw iw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new re(H.INVALID_ARGUMENT,a+n+c)}function hj(n,e){return n.some(t=>t.isEqual(e))}var sw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new IM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(mw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},IM=class extends sw{data(){return super.data()}};function mw(n,e){return typeof e=="string"?ZM(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}function Qie(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gp=class{},Wp=class extends Gp{};function fj(n,e,...t){let r=[];e instanceof Gp&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof bM).length,a=s.filter(c=>c instanceof ow).length;if(o>1||o>0&&a>0)throw new re(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ow=class n extends Wp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return yj(e._query,t),new Ra(e.firestore,e.converter,h1(e._query,t))}_parse(e){let t=YM(e.firestore);return function(s,o,a,c,u,h,g){let I;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){V3(g,h);let k=[];for(let L of g)k.push(F3(c,s,L));I={arrayValue:{values:k}}}else I=F3(c,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||V3(g,h),I=Wie(a,o,g,h==="in"||h==="not-in");return Kt.create(u,h,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function pj(n,e,t){let r=e,i=mw("where",n);return ow._create(i,r,t)}var bM=class n extends Gp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)yj(o,c),o=h1(o,c)}(e._query,t),new Ra(e.firestore,e.converter,h1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var CM=class n extends Wp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nl(s,o)}(e._query,this._field,this._direction);return new Ra(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Aa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function gj(n,e="asc"){let t=e,r=mw("orderBy",n);return CM._create(r,t)}var TM=class n extends Wp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ra(e.firestore,e.converter,O0(e._query,this._limit,this._limitType))}};function mj(n){return Zne("limit",n),TM._create("limit",n,"F")}function F3(n,e,t){if(typeof(t=bt(t))=="string"){if(t==="")throw new re(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yB(e)&&t.indexOf("/")!==-1)throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!_e.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s3(n,new _e(r))}if(t instanceof Tn)return s3(n,t._key);throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cw(t)}.`)}function V3(n,e){if(!Array.isArray(n)||n.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yj(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SM=class{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Nd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>At(o.doubleValue));return new Ca(s)}convertGeoPoint(e){return new ba(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=uw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vp(e));default:return null}}convertTimestamp(e){let t=oo(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);ut(FB(r),9688,{name:e});let i=new x0(r.get(1),r.get(3)),s=new _e(r.popFirst(5));return i.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Yie(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xc=class n extends sw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(mw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xc._jsonSchema={type:Qt("string",Xc._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};var xd=class extends Xc{data(e={}){return super.data(e)}},kd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xd(this._firestore,this._userDataWriter,r.key,r,new Zc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new xd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new xd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Jie(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Jie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function _j(n){n=so(n,Tn);let e=so(n.firestore,Pa);return Bie(QM(e),n._key).then(t=>Zie(e,n,t))}kd._jsonSchemaVersion="firestore/querySnapshot/1.0",kd._jsonSchema={type:Qt("string",kd._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};var aw=class extends SM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}};function vj(n){n=so(n,Ra);let e=so(n.firestore,Pa),t=QM(e),r=new aw(e);return Qie(n._query),jie(t,n._query).then(i=>new kd(e,r,n,i))}function wj(n,e,t,...r){n=so(n,Tn);let i=so(n.firestore,Pa),s=YM(i),o;return o=typeof(e=bt(e))=="string"||e instanceof qd?Gie(s,"updateDoc",n._key,e,t,r):qie(s,"updateDoc",n._key,e),XM(i,[o.toMutation(n._key,ro.exists(!0))])}function Ej(n){return XM(so(n.firestore,Pa),[new Bp(n._key,ro.none())])}function Ij(n,e){let t=so(n.firestore,Pa),r=KM(n),i=Yie(n.converter,e);return XM(t,[Hie(YM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ro.exists(!1))]).then(()=>r)}function XM(n,e){return function(r,i){let s=new gi;return r.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Mie(yield Uie(r),i,s)})),s.promise}(QM(n),e)}function Zie(n,e,t){let r=t.docs.get(e._key),i=new aw(n);return new Xc(n,i,e._key,r,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Gd=i})(Qi),wr(new bn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Pa(new GD(r.getProvider("auth-internal")),new QD(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x0(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_t(W4,K4,e),_t(W4,K4,"esm2017")})();var cl=class{constructor(e){return e}},bj="firestore",eR=class{constructor(){return oa(bj)}};var tR=new J("angularfire2.firestore-instances");function Xie(n,e){let t=Nc(bj,n,e);return t&&new cl(t)}function ese(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new cl(r)}}var tse={provide:eR,deps:[[new cn,tR]]},nse={provide:cl,useFactory:Xie,deps:[[new cn,tR],li]};function Cj(n,...e){return _t("angularfire",Yi.full,"fst"),En([nse,tse,{provide:tR,useFactory:ese(n),multi:!0,deps:[Oe,Tt,Ji,Fs,[new cn,zc],[new cn,ca],...e]}])}var Zp=lt(H4,!0);var Tj=lt(Ij,!0,2);var ll=lt(aj,!0,2);var Sj=lt(Ej,!0,2);var Xp=lt(KM,!0,2);var Aj=lt(_j,!0);var Dj=lt(vj,!0);var Mj=lt(cj,!0);var nR=lt(mj,!0,2);var yw=lt(gj,!0,2),eg=lt(fj,!0,2);var rR=lt(wj,!0,2);var Yd=lt(pj,!0,2);var Lj="firebasestorage.googleapis.com",Fj="storageBucket",ise=2*60*1e3,sse=10*60*1e3;var Ot=class n extends Bn{constructor(e,t,r=0){super(iR(e),`Firebase Storage: ${t} (${iR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ut=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ut||{});function iR(n){return"storage/"+n}function uR(){let n="An unknown error occurred, please check the error payload for server response.";return new Ot(Ut.UNKNOWN,n)}function ose(n){return new Ot(Ut.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ase(n){return new Ot(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cse(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Ut.UNAUTHENTICATED,n)}function lse(){return new Ot(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function use(n){return new Ot(Ut.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function dse(){return new Ot(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hse(){return new Ot(Ut.CANCELED,"User canceled the upload/download.")}function fse(n){return new Ot(Ut.INVALID_URL,"Invalid URL '"+n+"'.")}function pse(n){return new Ot(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gse(){return new Ot(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fj+"' property when initializing the app?")}function mse(){return new Ot(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yse(){return new Ot(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _se(n){return new Ot(Ut.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sR(n){return new Ot(Ut.INVALID_ARGUMENT,n)}function Vj(){return new Ot(Ut.APP_DELETED,"The Firebase app was deleted.")}function vse(n){return new Ot(Ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ng(n,e){return new Ot(Ut.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function tg(n){throw new Ot(Ut.INTERNAL_ERROR,"Internal error: "+n)}var _i=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw pse(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(he){he.path_=decodeURIComponent(he.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",T=new RegExp(`^https?://${g}/${h}/b/${i}/o${I}`,"i"),k={bucket:1,path:3},L=t===Lj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",q=new RegExp(`^https?://${L}/${i}/${O}`,"i"),K=[{regex:a,indices:c,postModify:s},{regex:T,indices:k,postModify:u},{regex:q,indices:{bucket:1,path:2},postModify:u}];for(let he=0;he<K.length;he++){let je=K[he],ge=je.regex.exec(e);if(ge){let M=ge[je.indices.bucket],E=ge[je.indices.path];E||(E=""),r=new n(M,E),je.postModify(r);break}}if(r==null)throw fse(e);return r}},oR=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function wse(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...O){u||(u=!0,e.apply(null,O))}function g(O){i=setTimeout(()=>{i=null,n(T,c())},O)}function I(){s&&clearTimeout(s)}function T(O,...q){if(u){I();return}if(O){I(),h.call(null,O,...q);return}if(c()||o){I(),h.call(null,O,...q);return}r<64&&(r*=2);let K;a===1?(a=2,K=0):K=(r+Math.random())*1e3,g(K)}let k=!1;function L(O){k||(k=!0,I(),!u&&(i!==null?(O||(a=2),clearTimeout(i),g(0)):O||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,L(!0)},t),L}function Ese(n){n(!1)}function Ise(n){return n!==void 0}function bse(n){return typeof n=="object"&&!Array.isArray(n)}function dR(n){return typeof n=="string"||n instanceof String}function Rj(n){return hR()&&n instanceof Blob}function hR(){return typeof Blob<"u"}function Pj(n,e,t,r){if(r<e)throw sR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sR(`Invalid value for '${n}'. Expected ${t} or less.`)}function fR(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Uj(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Zd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Zd||{});function Cse(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var aR=class{constructor(e,t,r,i,s,o,a,c,u,h,g,I=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=g,this.retry=I,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Jd(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Zd.NO_ERROR,c=s.getStatus();if(!a||Cse(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Zd.ABORT;r(!1,new Jd(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Jd(u,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Ise(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=uR();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Vj():hse();o(c)}else{let c=dse();o(c)}};this.canceled_?t(!1,new Jd(!1,null,!0)):this.backoffId_=wse(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ese(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Jd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Tse(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Sse(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ase(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Dse(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Mse(n,e,t,r,i,s,o=!0,a=!1){let c=Uj(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return Ase(h,e),Tse(h,t),Sse(h,s),Dse(h,r),new aR(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}function Rse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pse(...n){let e=Rse();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(hR())return new Blob(n);throw new Ot(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xse(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function kse(n){if(typeof atob>"u")throw _se("base-64");return atob(n)}var cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rg=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Ose(n,e){switch(n){case cs.RAW:return new rg(Bj(e));case cs.BASE64:case cs.BASE64URL:return new rg(jj(n,e));case cs.DATA_URL:return new rg(Lse(e),Fse(e))}throw uR()}function Bj(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Nse(n){let e;try{e=decodeURIComponent(n)}catch{throw ng(cs.DATA_URL,"Malformed data URL.")}return Bj(e)}function jj(n,e){switch(n){case cs.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ng(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ng(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=kse(e)}catch(i){throw i.message.includes("polyfill")?i:ng(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var vw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw ng(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Vse(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Lse(n){let e=new vw(n);return e.base64?jj(cs.BASE64,e.rest):Nse(e.rest)}function Fse(n){return new vw(n).contentType}function Vse(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var ww=class n{constructor(e,t){let r=0,i="";Rj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Rj(this.data_)){let r=this.data_,i=xse(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(hR()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Pse.apply(null,t))}else{let t=e.map(o=>dR(o)?Ose(cs.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function zj(n){let e;try{e=JSON.parse(n)}catch{return null}return bse(e)?e:null}function Use(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Bse(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function $j(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function jse(n,e){return e}var Sn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||jse}},_w=null;function zse(n){return!dR(n)||n.length<2?n:$j(n)}function Hj(){if(_w)return _w;let n=[];n.push(new Sn("bucket")),n.push(new Sn("generation")),n.push(new Sn("metageneration")),n.push(new Sn("name","fullPath",!0));function e(s,o){return zse(o)}let t=new Sn("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new Sn("size");return i.xform=r,n.push(i),n.push(new Sn("timeCreated")),n.push(new Sn("updated")),n.push(new Sn("md5Hash",null,!0)),n.push(new Sn("cacheControl",null,!0)),n.push(new Sn("contentDisposition",null,!0)),n.push(new Sn("contentEncoding",null,!0)),n.push(new Sn("contentLanguage",null,!0)),n.push(new Sn("contentType",null,!0)),n.push(new Sn("metadata","customMetadata",!0)),_w=n,_w}function $se(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new _i(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function Hse(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return $se(r,n),r}function qj(n,e,t){let r=zj(e);return r===null?null:Hse(n,r,t)}function qse(n,e,t,r){let i=zj(e);if(i===null||!dR(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let h=n.bucket,g=n.fullPath,I="/b/"+o(h)+"/o/"+o(g),T=fR(I,t,r),k=Uj({alt:"media",token:u});return T+k})[0]}function Gse(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Ew=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Gj(n){if(!n)throw uR()}function Wse(n,e){function t(r,i){let s=qj(n,i,e);return Gj(s!==null),s}return t}function Kse(n,e){function t(r,i){let s=qj(n,i,e);return Gj(s!==null),qse(s,i,n.host,n._protocol)}return t}function Wj(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=lse():i=cse():t.getStatus()===402?i=ase(n.bucket):t.getStatus()===403?i=use(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Qse(n){let e=Wj(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=ose(n.path)),s.serverResponse=i.serverResponse,s}return t}function Yse(n,e,t){let r=e.fullServerUrl(),i=fR(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new Ew(i,s,Kse(n,t),o);return a.errorHandler=Qse(e),a}function Jse(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Zse(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Jse(null,e)),r}function Xse(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let K="";for(let he=0;he<2;he++)K=K+Math.random().toString().slice(2);return K}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let u=Zse(e,r,i),h=Gse(u,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,I=`\r
--`+c+"--",T=ww.getBlob(g,r,I);if(T===null)throw mse();let k={name:u.fullPath},L=fR(s,n.host,n._protocol),O="POST",q=n.maxUploadRetryTime,ee=new Ew(L,O,Wse(n,t),q);return ee.urlParams=k,ee.headers=o,ee.body=T.uploadData(),ee.errorHandler=Wj(e),ee}var HTe=256*1024;var xj=null,cR=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,s){if(this.sent_)throw tg("cannot .send() more than once");if(ci(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},lR=class extends cR{initXhr(){this.xhr_.responseType="text"}};function Kj(){return xj?xj():new lR}var Xd=class n{constructor(e,t){this._service=e,t instanceof _i?this._location=t:this._location=_i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new _i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $j(this._location.path)}get storage(){return this._service}get parent(){let e=Use(this._location.path);if(e===null)return null;let t=new _i(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw vse(e)}};function eoe(n,e,t){n._throwIfRoot("uploadBytes");let r=Xse(n.storage,n._location,Hj(),new ww(e,!0),t);return n.storage.makeRequestWithTokens(r,Kj).then(i=>({metadata:i,ref:n}))}function toe(n){n._throwIfRoot("getDownloadURL");let e=Yse(n.storage,n._location,Hj());return n.storage.makeRequestWithTokens(e,Kj).then(t=>{if(t===null)throw yse();return t})}function noe(n,e){let t=Bse(n._location.path,e),r=new _i(n._location.bucket,t);return new Xd(n.storage,r)}function roe(n){return/^[A-Za-z]+:\/\//.test(n)}function ioe(n,e){return new Xd(n,e)}function Qj(n,e){if(n instanceof ig){let t=n;if(t._bucket==null)throw gse();let r=new Xd(t,t._bucket);return e!=null?Qj(r,e):r}else return e!==void 0?noe(n,e):n}function soe(n,e){if(e&&roe(e)){if(n instanceof ig)return ioe(n,e);throw sR("To use ref(service, url), the first argument must be a Storage instance.")}else return Qj(n,e)}function kj(n,e){let t=e?.[Fj];return t==null?null:_i.makeFromBucketSpec(t,n)}function ooe(n,e,t,r={}){n.host=`${e}:${t}`;let i=ci(e);i&&(Bu(`https://${n.host}/b`),ju("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:H_(s,n.app.options.projectId))}var ig=class{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Lj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ise,this._maxUploadRetryTime=sse,this._requests=new Set,i!=null?this._bucket=_i.makeFromBucketSpec(i,this._host):this._bucket=kj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_i.makeFromBucketSpec(this._url,e):this._bucket=kj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new oR(Vj());{let o=Mse(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return S(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Oj="@firebase/storage",Nj="0.13.14";var Yj="storage";function Jj(n,e,t){return n=bt(n),eoe(n,e,t)}function Zj(n){return n=bt(n),toe(n)}function Xj(n,e){return n=bt(n),soe(n,e)}function e5(n=Ls(),e){n=bt(n);let r=sa(n,Yj).getImmediate({identifier:e}),i=$_("storage");return i&&t5(r,...i),r}function t5(n,e,t,r={}){ooe(n,e,t,r)}function aoe(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ig(t,r,i,e,Qi)}function coe(){wr(new bn(Yj,aoe,"PUBLIC").setMultipleInstances(!0)),_t(Oj,Nj,""),_t(Oj,Nj,"esm2017")}coe();var ul=class{constructor(e){return e}},n5="storage",pR=class{constructor(){return oa(n5)}};var gR=new J("angularfire2.storage-instances");function loe(n,e){let t=Nc(n5,n,e);return t&&new ul(t)}function uoe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ul(r)}}var doe={provide:pR,deps:[[new cn,gR]]},hoe={provide:ul,useFactory:loe,deps:[[new cn,gR],li]};function r5(n,...e){return _t("angularfire",Yi.full,"gcs"),En([hoe,doe,{provide:gR,useFactory:uoe(n),multi:!0,deps:[Oe,Tt,Ji,Fs,[new cn,zc],[new cn,ca],...e]}])}var i5=lt(Zj,!0);var s5=lt(e5,!0);var o5=lt(Xj,!0,2);var a5=lt(Jj,!0);var y5=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(te(Ps),te(gr))};static \u0275dir=Et({type:n})}return n})(),Mw=(()=>{class n extends y5{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275dir=Et({type:n,features:[Pr]})}return n})(),dg=new J(""),poe={provide:dg,useExisting:Ni(()=>vR),multi:!0},vR=(()=>{class n extends Mw{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Bi([poe]),Pr]})}return n})(),goe={provide:dg,useExisting:Ni(()=>Br),multi:!0};function moe(){let n=kr()?kr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var yoe=new J(""),Br=(()=>{class n extends y5{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!moe())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(te(Ps),te(gr),te(yoe,8))};static \u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&de("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Bi([goe]),Pr]})}return n})();function _oe(n){return n==null||voe(n)===0}function voe(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var wR=new J(""),_5=new J("");function woe(n){return _oe(n.value)?{required:!0}:null}function c5(n){return null}function v5(n){return n!=null}function w5(n){return Wo(n)?at(n):n}function E5(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function I5(n,e){return e.map(t=>t(n))}function Eoe(n){return!n.validate}function b5(n){return n.map(e=>Eoe(e)?e:t=>e.validate(t))}function Ioe(n){if(!n)return null;let e=n.filter(v5);return e.length==0?null:function(t){return E5(I5(t,e))}}function ER(n){return n!=null?Ioe(b5(n)):null}function boe(n){if(!n)return null;let e=n.filter(v5);return e.length==0?null:function(t){let r=I5(t,e).map(w5);return DE(r).pipe(me(E5))}}function IR(n){return n!=null?boe(b5(n)):null}function l5(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Coe(n){return n._rawValidators}function Toe(n){return n._rawAsyncValidators}function mR(n){return n?Array.isArray(n)?n:[n]:[]}function bw(n,e){return Array.isArray(n)?n.includes(e):n===e}function u5(n,e){let t=mR(e);return mR(n).forEach(i=>{bw(t,i)||t.push(i)}),t}function d5(n,e){return mR(e).filter(t=>!bw(n,t))}var Cw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ER(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},nh=class extends Cw{name;get formDirective(){return null}get path(){return null}},ug=class extends Cw{_parent=null;name=null;valueAccessor=null},Tw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Soe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},MSe=fe($({},Soe),{"[class.ng-submitted]":"isSubmitted"}),ls=(()=>{class n extends Tw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(ug,2))};static \u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Pr]})}return n})(),rh=(()=>{class n extends Tw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(nh,10))};static \u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Pr]})}return n})();var sg="VALID",Iw="INVALID",eh="PENDING",og="DISABLED",ka=class{},Sw=class extends ka{value;source;constructor(e,t){super(),this.value=e,this.source=t}},cg=class extends ka{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},lg=class extends ka{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},th=class extends ka{status;source;constructor(e,t){super(),this.status=e,this.source=t}},yR=class extends ka{source;constructor(e){super(),this.source=e}},_R=class extends ka{source;constructor(e){super(),this.source=e}};function C5(n){return(Rw(n)?n.validators:n)||null}function Aoe(n){return Array.isArray(n)?ER(n):n||null}function T5(n,e){return(Rw(e)?e.asyncValidators:n)||null}function Doe(n){return Array.isArray(n)?IR(n):n||null}function Rw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Moe(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function Roe(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var Aw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xr(this.statusReactive)}set status(e){xr(()=>this.statusReactive.set(e))}_status=wc(()=>this.statusReactive());statusReactive=yc(void 0);get valid(){return this.status===sg}get invalid(){return this.status===Iw}get pending(){return this.status==eh}get disabled(){return this.status===og}get enabled(){return this.status!==og}errors;get pristine(){return xr(this.pristineReactive)}set pristine(e){xr(()=>this.pristineReactive.set(e))}_pristine=wc(()=>this.pristineReactive());pristineReactive=yc(!0);get dirty(){return!this.pristine}get touched(){return xr(this.touchedReactive)}set touched(e){xr(()=>this.touchedReactive.set(e))}_touched=wc(()=>this.touchedReactive());touchedReactive=yc(!1);get untouched(){return!this.touched}_events=new Pt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(u5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(u5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(d5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(d5(e,this._rawAsyncValidators))}hasValidator(e){return bw(this._rawValidators,e)}hasAsyncValidator(e){return bw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lg(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new lg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cg(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new cg(!0,r))}markAsPending(e={}){this.status=eh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new th(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=og,this.errors=null,this._forEachChild(i=>{i.disable(fe($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sw(this.value,r)),this._events.next(new th(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sg,this._forEachChild(r=>{r.enable(fe($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sg||this.status===eh)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sw(this.value,t)),this._events.next(new th(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?og:sg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=eh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=w5(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new th(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?og:this.errors?Iw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eh)?eh:this._anyControlsHaveStatus(Iw)?Iw:sg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new cg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new lg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Aoe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Doe(this._rawAsyncValidators)}},Dw=class extends Aw{constructor(e,t,r){super(C5(t),T5(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Roe(this,!0,e),Object.keys(e).forEach(r=>{Moe(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var bR=new J("",{providedIn:"root",factory:()=>CR}),CR="always";function Poe(n,e){return[...e.path,n]}function S5(n,e,t=CR){A5(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),koe(n,e),Noe(n,e),Ooe(n,e),xoe(n,e)}function h5(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xoe(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function A5(n,e){let t=Coe(n);e.validator!==null?n.setValidators(l5(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Toe(n);e.asyncValidator!==null?n.setAsyncValidators(l5(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();h5(e._rawValidators,i),h5(e._rawAsyncValidators,i)}function koe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&D5(n,e)})}function Ooe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&D5(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function D5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Noe(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Loe(n,e){n==null,A5(n,e)}function Foe(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Voe(n){return Object.getPrototypeOf(n.constructor)===Mw}function Uoe(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Boe(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Br?t=s:Voe(s)?r=s:i=s}),i||r||t||null}var joe={provide:nh,useExisting:Ni(()=>dl)},ag=Promise.resolve(),dl=(()=>{class n extends nh{callSetDisabledState;get submitted(){return xr(this.submittedReactive)}_submitted=wc(()=>this.submittedReactive());submittedReactive=yc(!1);_directives=new Set;form;ngSubmit=new vt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Dw({},ER(t),IR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ag.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),S5(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ag.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ag.then(()=>{let r=this._findContainer(t.path),i=new Dw({});Loe(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ag.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ag.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Uoe(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new yR(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new _R(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(te(wR,10),te(_5,10),te(bR,8))};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&de("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bi([joe]),Pr]})}return n})();function f5(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function p5(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var zoe=class extends Aw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(C5(t),T5(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(p5(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){p5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $oe={provide:ug,useExisting:Ni(()=>vi)},g5=Promise.resolve(),vi=(()=>{class n extends ug{_changeDetectorRef;callSetDisabledState;control=new zoe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Boe(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Foe(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){S5(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){g5.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Jo(r);g5.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Poe(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(te(nh,9),te(wR,10),te(_5,10),te(dg,10),te(Yo,8),te(bR,8))};static \u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bi([$oe]),Pr,pr]})}return n})();var ih=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Hoe={provide:dg,useExisting:Ni(()=>sh),multi:!0};function M5(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qoe(n){return n.split(":")[0]}var sh=(()=>{class n extends Mw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=M5(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=qoe(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&de("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bi([Hoe]),Pr]})}return n})(),Pw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(M5(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(gr),te(Ps),te(sh,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Goe={provide:dg,useExisting:Ni(()=>R5),multi:!0};function m5(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Woe(n){return n.split(":")[0]}var R5=(()=>{class n extends Mw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],u=this._getOptionValue(c.value);i.push(u)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Woe(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bi([Goe]),Pr]})}return n})(),xw=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(m5(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(m5(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(gr),te(Ps),te(R5,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Koe=(()=>{class n{_validator=c5;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):c5,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,features:[pr]})}return n})();var Qoe={provide:wR,useExisting:Ni(()=>hl),multi:!0};var hl=(()=>{class n extends Koe{required;inputName="required";normalizeInput=Jo;createValidator=t=>woe;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rs(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&sf("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Bi([Qoe]),Pr]})}return n})();var Yoe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Dr({})}return n})();var us=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bR,useValue:t.callSetDisabledState??CR}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Dr({imports:[Yoe]})}return n})();var Joe=["*"],pg=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Lt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(xn(t=>{let r=new be(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let s=t.addListener(e,o=>{this._ngZone.run(()=>i.next(o))});if(!s){i.complete();return}return this._listeners.push(s),()=>s.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},fg={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},P5="500px",x5="500px",kw=(()=>{class n{_elementRef=j(gr);_ngZone=j(Oe);_eventManager=new pg(j(Oe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=P5;width=x5;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||fg}_options=fg;mapInitialized=new vt;authFailure=new vt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=j(Vi);if(this._isBrowser=Qb(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Pn(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":k5(this.height)||P5,t.width=this.width===null?"":k5(this.width)||x5}}_combineOptions(){let t=this._options||{};return fe($({},t),{center:this._center||t.center||fg.center,zoom:this._zoom??t.zoom??fg.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||fg.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wt({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[pr],ngContentSelectors:Joe,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(vN(),pt(0,"div",0),wN(1))},encapsulation:2,changeDetection:0})}return n})(),Zoe=/([A-Za-z%]+)$/;function k5(n){return n==null?"":Zoe.test(n)?n:`${n}px`}var O5=(()=>{class n{_googleMap=j(kw);_elementRef=j(gr);_ngZone=j(Oe);_eventManager=new pg(j(Oe));_options=new Lt({});_position=new Lt(void 0);_destroy=new Pt;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new vt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(Pn(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let s=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==s||!s)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:s,shouldFocus:r}))}_combineOptions(){return nc([this._options,this._position]).pipe(me(([t,r])=>fe($({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(tu(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(tu(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var Xoe=new J("MAP_MARKER"),eae={position:{lat:37.421995,lng:-122.084092}},N5=(()=>{class n{_googleMap=j(kw);_ngZone=j(Oe);_eventManager=new pg(j(Oe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new vt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:s,_label:o,_clickable:a,_icon:c,_visible:u}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&s&&r.setPosition(s),t.label&&o!==void 0&&r.setLabel(o),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&u!==void 0&&r.setVisible(u))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(Pn(1)).toPromise()}_combineOptions(){let t=this._options||eae;return fe($({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[Bi([{provide:Xoe,useExisting:n}]),pr]})}return n})();var L5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=Dr({})}return n})();function nae(n,e){n&1&&(m(0,"p",15),v(1," \u{1F4CD} Deine Position wird angezeigt "),y())}function rae(n,e){n&1&&(m(0,"p",16),v(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),y())}function iae(n,e){if(n&1){let t=ze();m(0,"div",19)(1,"h4"),v(2),y(),m(3,"p")(4,"strong"),v(5),ni(6,"titlecase"),y()(),m(7,"p"),v(8),y(),m(9,"p"),v(10),y(),m(11,"button",20),de("click",function(){se(t);let i=G().$implicit,s=G();return oe(s.getDirections(i.shop))}),v(12," \u{1F697} Route berechnen "),y()()}if(n&2){let t=G().$implicit;N(2),yt(t.shop.name),N(3),yt(ri(6,4,t.shop.type)),N(3),Ve("\u{1F4CD} ",t.shop.address.split(",")[0],""),N(2),Ve("\u2B50 ",t.shop.rating,"/5")}}function sae(n,e){n&1&&(m(0,"div",19)(1,"h4"),v(2,"\u{1F4CD} Deine Position"),y(),m(3,"p"),v(4,"Du bist hier"),y()())}function oae(n,e){if(n&1){let t=ze();m(0,"map-marker",17),de("mapClick",function(){let i=se(t).$implicit,s=G();return oe(s.onMarkerClick(i))}),m(1,"map-info-window"),ae(2,iae,13,6,"div",18)(3,sae,5,0,"div",18),y()()}if(n&2){let t=e.$implicit,r=G();z("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),N(2),z("ngIf",t.shop),N(),z("ngIf",t.isUserLocation)}}var Ow=class n{afroshops=[];userLocation=null;shopSelected=new vt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=fe($({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[pr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h3"),v(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),y(),ae(4,nae,2,0,"p",2)(5,rae,2,0,"p",3),y(),m(6,"google-map",4),ae(7,oae,4,5,"map-marker",5),y(),m(8,"div",6)(9,"h4"),v(10,"Legende"),y(),m(11,"div",7)(12,"div",8)(13,"span",9),v(14,"\u{1F37D}\uFE0F"),y(),m(15,"span"),v(16,"Restaurants"),y()(),m(17,"div",8)(18,"span",10),v(19,"\u{1F6D2}"),y(),m(20,"span"),v(21,"Lebensmittel"),y()(),m(22,"div",8)(23,"span",11),v(24,"\u2702\uFE0F"),y(),m(25,"span"),v(26,"Friseure"),y()(),m(27,"div",8)(28,"span",12),v(29,"\u{1F457}"),y(),m(30,"span"),v(31,"Mode"),y()(),m(32,"div",8)(33,"span",13),v(34,"\u{1F3E6}"),y(),m(35,"span"),v(36,"Dienstleistungen"),y()(),m(37,"div",8)(38,"span",14),v(39,"\u{1F4CD}"),y(),m(40,"span"),v(41,"Deine Position"),y()()()()()),t&2&&(N(4),z("ngIf",r.userLocation),N(),z("ngIf",!r.userLocation),N(),z("options",r.mapOptions)("width","100%")("height","400px"),N(),z("ngForOf",r.markers))},dependencies:[zt,tr,ln,Ec,L5,kw,O5,N5],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var oh=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(s=>i.address.toLowerCase().includes(s.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ir=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=ll(this.firestore,"afroshops");return at(Dj(e)).pipe(me(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(s=>{let o=s.data();o.id=s.id,r.push(o)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(s=>s.name));let i=r.map(s=>this.mapFirebaseDocToAfroshopData(s));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(s=>s.name)),i.sort((s,o)=>s.name.localeCompare(o.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=ll(this.firestore,"afroshops"),r=eg(t,Yd("city","==",e.toLowerCase()),yw("name"));return Zp(r,{idField:"id"})}getAfroshopsByType(e){let t=ll(this.firestore,"afroshops"),r=eg(t,Yd("type","==",e),yw("rating","desc"));return Zp(r,{idField:"id"})}getAfroshopById(e){return S(this,null,function*(){try{let t=Xp(this.firestore,"afroshops",e),r=yield Aj(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(fe($({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return S(this,null,function*(){let t=ll(this.firestore,"afroshops"),r=fe($({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield Tj(t,r)).id})}updateAfroshop(e,t){return S(this,null,function*(){let r=Xp(this.firestore,"afroshops",e),i=fe($({},t),{updatedAt:new Date});yield rR(r,i)})}deleteAfroshop(e){return S(this,null,function*(){let t=Xp(this.firestore,"afroshops",e);yield Sj(t)})}searchAfroshops(e){let t=ll(this.firestore,"afroshops"),r=eg(t,Yd("name",">=",e),Yd("name","<=",e+"\uF8FF"),nR(20));return Zp(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=ll(this.firestore,"afroshops"),r=eg(t,Yd("verified","==",!0),yw("rating","desc"),nR(e));return Zp(r,{idField:"id"})}incrementViews(e){return S(this,null,function*(){try{let t=Xp(this.firestore,"afroshops",e);yield rR(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return S(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let s=o5(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",s),console.log("\u2B06\uFE0F Upload en cours...");let o=yield a5(s,e);console.log("\u2705 Upload termin\xE9, snapshot:",o),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield i5(o.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(ue(cl),ue(ul))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var hs=class n{businessTypeTranslations={restaurant:"Restaurant",epicerie:"Lebensmittelgesch\xE4ft",coiffeur:"Friseur",vetement:"Modegesch\xE4ft",services:"Dienstleistungen"};businessTypePlural={restaurant:"Restaurants",epicerie:"Lebensmittelgesch\xE4fte",coiffeur:"Friseure",vetement:"Modegesch\xE4fte",services:"Dienstleistungen"};businessTypeIcons={restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"};errorMessages={"auth/user-not-found":"Benutzer nicht gefunden","auth/wrong-password":"Falsches Passwort","auth/email-already-in-use":"E-Mail-Adresse wird bereits verwendet","auth/weak-password":"Passwort ist zu schwach","auth/invalid-email":"Ung\xFCltige E-Mail-Adresse","auth/popup-blocked":"Popup wurde blockiert. Bitte erlauben Sie Popups f\xFCr diese Website.","auth/popup-closed-by-user":"Anmeldung wurde abgebrochen","auth/cancelled-popup-request":"Anmeldung wurde abgebrochen","popup-blocked":"Popup wurde von Ihrem Browser blockiert","connection-error":"Verbindungsfehler. \xDCberpr\xFCfen Sie Ihre Internetverbindung.","general-error":"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut."};generalMessages={"login-success":"Erfolgreich angemeldet!","logout-success":"Erfolgreich abgemeldet!","registration-success":"Konto erfolgreich erstellt!","data-saved":"Daten erfolgreich gespeichert!","data-deleted":"Daten erfolgreich gel\xF6scht!",loading:"Wird geladen...",saving:"Wird gespeichert...","confirma-delete":"Sind Sie sicher, dass Sie dies l\xF6schen m\xF6chten?"};getBusinessTypeName(e,t=!1){return t?this.businessTypePlural[e]||e:this.businessTypeTranslations[e]||e}getBusinessTypeIcon(e){return this.businessTypeIcons[e]||"\u{1F3EA}"}getBusinessTypeDisplay(e,t=!1){let r=this.getBusinessTypeIcon(e),i=this.getBusinessTypeName(e,t);return`${r} ${i}`}getErrorMessage(e){return this.errorMessages[e]||this.errorMessages["general-error"]}getMessage(e){return this.generalMessages[e]||e}getAllBusinessTypes(){return Object.keys(this.businessTypeTranslations).map(e=>({value:e,label:this.businessTypeTranslations[e],icon:this.businessTypeIcons[e]}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jt=class n{constructor(e,t){this.auth=e;this.translationService=t;this.user$=NV(this.auth)}user$;register(e,t,r){return S(this,null,function*(){try{let i=yield LV(this.auth,e,t);return r&&i.user&&(yield jV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return S(this,null,function*(){try{let r=yield VV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return S(this,null,function*(){try{console.log("\u{1F680} Initialisation du provider Google...");let e=new mS;e.setCustomParameters({prompt:"select_account"}),console.log("\u{1F50D} V\xE9rification du support des popups..."),this.checkPopupSupport(),console.log("\u{1F510} Tentative de connexion avec popup...");let t=yield UV(this.auth,e);return console.log("\u2705 Connexion r\xE9ussie, utilisateur:",t.user.email),{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("\u274C Erreur d\xE9taill\xE9e:",{name:e.name,code:e.code,message:e.message,customData:e.customData}),e.code==="auth/popup-blocked"?console.log("\u{1F6AB} Popup bloqu\xE9e d\xE9tect\xE9e"):e.code==="auth/popup-closed-by-user"?console.log("\u{1F44B} Popup ferm\xE9e par l'utilisateur"):e.code==="auth/cancelled-popup-request"&&console.log("\u{1F504} Requ\xEAte popup annul\xE9e"),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return S(this,null,function*(){try{yield BV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Ein Fehler ist aufgetreten";if(e.code)switch(e.code){case"auth/email-already-in-use":t=this.translationService.getErrorMessage("auth/email-already-in-use");break;case"auth/weak-password":t=this.translationService.getErrorMessage("auth/weak-password");break;case"auth/invalid-email":t=this.translationService.getErrorMessage("auth/invalid-email");break;case"auth/user-not-found":t=this.translationService.getErrorMessage("auth/user-not-found");break;case"auth/wrong-password":t=this.translationService.getErrorMessage("auth/wrong-password");break;case"auth/too-many-requests":t="Zu viele Versuche. Bitte versuchen Sie es sp\xE4ter erneut";break;case"auth/user-disabled":t="Dieses Konto wurde deaktiviert";break;case"auth/operation-not-allowed":t="Diese Operation ist nicht erlaubt";break;case"auth/popup-closed-by-user":t=this.translationService.getErrorMessage("auth/popup-closed-by-user");break;case"auth/popup-blocked":t=this.translationService.getErrorMessage("auth/popup-blocked");break;case"popup-blocked":t=this.translationService.getErrorMessage("popup-blocked");break;case"auth/cancelled-popup-request":t=this.translationService.getErrorMessage("auth/cancelled-popup-request");break;default:t=this.translationService.getErrorMessage("general-error")}return new Error(t)}static \u0275fac=function(t){return new(t||n)(ue(jc),ue(hs))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lw=class n{constructor(){}getCurrentPosition(){return new be(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new be(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let s={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(s)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let o=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function cae(n,e){if(n&1){let t=ze();m(0,"button",42),de("click",function(){se(t);let i=G(2);return oe(i.goToAdmin())}),v(1," \u2699\uFE0F "),y()}}function lae(n,e){if(n&1){let t=ze();m(0,"div",39)(1,"button",40),de("click",function(){se(t);let i=G();return oe(i.goToAddAfroshop())}),v(2," \u2795 Afroshop hinzuf\xFCgen "),y(),ae(3,cae,2,0,"button",41),y()}if(n&2){let t=e.ngIf,r=G();N(3),z("ngIf",r.isAdminUser(t))}}function uae(n,e){if(n&1){let t=ze();m(0,"div",39)(1,"button",43),de("click",function(){se(t);let i=G();return oe(i.addNewAfroshop())}),v(2," \u{1F510} Anmelden zum Hinzuf\xFCgen "),y()()}}function dae(n,e){if(n&1&&(m(0,"option",44),v(1),y()),n&2){let t=e.$implicit;z("value",t.value),N(),mr(" ",t.icon," ",t.label," ")}}function hae(n,e){if(n&1&&(m(0,"span",50),v(1),y()),n&2){let t=G(2);N(),Ve("um ",t.getSelectedCityName(),"")}}function fae(n,e){n&1&&(m(0,"span",51),v(1,"um deinen Standort"),y())}function pae(n,e){if(n&1&&(m(0,"div",45)(1,"div",46),v(2," \u{1F3AF} Suche in 50km Umkreis "),ae(3,hae,2,1,"span",47)(4,fae,2,0,"span",48),y(),m(5,"div",49),v(6),y()()),n&2){let t=G();N(3),z("ngIf",t.selectedCity),N(),z("ngIf",!t.selectedCity),N(2),mr(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function gae(n,e){if(n&1){let t=ze();m(0,"div",52)(1,"app-map",53),de("shopSelected",function(i){se(t);let s=G();return oe(s.viewAfroshopDetail(i))}),y()()}if(n&2){let t=G();N(),z("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function mae(n,e){if(n&1){let t=ze();m(0,"button",71),de("click",function(i){se(t);let s=G().$implicit,o=G(2);return oe(o.editAfroshop(i,s.id))}),v(1," \u270F\uFE0F "),y()}}function yae(n,e){if(n&1&&(m(0,"div",72),v(1),y()),n&2){let t=G().$implicit,r=G(2);N(),Ve(" \u{1F3AF} ",r.getDistanceFromUser(t)," ")}}function _ae(n,e){if(n&1){let t=ze();m(0,"div",56)(1,"div",57),de("click",function(){let i=se(t).$implicit,s=G(2);return oe(s.viewAfroshopDetail(i.id))}),m(2,"img",58),de("error",function(i){let s=se(t).$implicit,o=G(2);return oe(o.onImageError(i,s.type))}),y(),m(3,"div",59),v(4),y(),ae(5,mae,2,0,"button",60),m(6,"div",61)(7,"span",62),v(8,"\u{1F4CD} Details ansehen"),y()()(),m(9,"div",63)(10,"h3",64),v(11),y(),m(12,"p",65),v(13),y(),m(14,"div",66)(15,"span",67),v(16),y(),m(17,"span",68),v(18),y(),m(19,"span",69),v(20),ni(21,"titlecase"),y()(),ae(22,yae,2,1,"div",70),y()()}if(n&2){let t=e.$implicit,r=G(2);N(2),z("src",t.image||r.getDefaultImage(t.type),Go)("alt",t.name),N(),Qo(t.type),N(),Ve(" ",r.getBusinessTypeDisplay(t.type)," "),N(),z("ngIf",r.canEditAfroshop(t)),N(6),yt(t.name),N(2),Ve("\u{1F4CD} ",r.getLocationDisplay(t.address),""),N(3),Ve("\u2B50 ",t.rating,""),N(2),yt(r.getPriceLevel(t.priceLevel)),N(2),yt(ri(21,12,t.type)),N(2),z("ngIf",r.userLocation)}}function vae(n,e){if(n&1&&(m(0,"div",54),ae(1,_ae,23,14,"div",55),y()),n&2){let t=G();N(),z("ngForOf",t.filteredAfroshops)}}function wae(n,e){if(n&1){let t=ze();m(0,"div",73)(1,"div",74)(2,"div",75),v(3,"\u{1F50D}"),y(),m(4,"h3"),v(5,"Kein Gesch\xE4ft gefunden"),y(),m(6,"p"),v(7,"Kein Afroshop entspricht deinen Suchkriterien"),y(),m(8,"button",76),de("click",function(){se(t);let i=G();return oe(i.clearSearch())}),v(9," Alle Gesch\xE4fte anzeigen "),y()()()}}var Fw=class n{constructor(e,t,r,i,s,o){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.translationService=i;this.router=s;this.geolocationService=o;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){this.userLocation=this.cityCoordinates.berlin,this.selectedCity="berlin",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\uFFFD Standard-Standort aktiviert

Berlin wurde als dein Standort gew\xE4hlt.

\u{1F3AF} Du kannst jederzeit:
\u2022 Eine andere Stadt suchen
\u2022 Aus der Liste w\xE4hlen
\u2022 "\u{1F4E1} Mein Standort" nochmal probieren`)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}isAdminUser(e){return!e||!e.email?!1:["youssoufdiamaldiallo@gmail.com","admin@afroconnect.de","contact@afroconnect.de"].includes(e.email)}goToAdmin(){this.router.navigate(["/admin"])}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}getBusinessTypeDisplay(e){return this.translationService.getBusinessTypeDisplay(e)}getBusinessTypeIcon(e){return this.translationService.getBusinessTypeIcon(e)}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return S(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],s=parseFloat(i.lat),o=parseFloat(i.lon);if(!isNaN(s)&&!isNaN(o)){this.userLocation={lat:s,lng:o},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${s.toFixed(4)}, ${o.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return fe($({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=fe($({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[s,o]of Object.entries(r))if(t.includes(s))return o;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[s,o]of Object.entries(i))if(e.includes(s))return o;return null}static \u0275fac=function(t){return new(t||n)(te(oh),te(ir),te(Jt),te(hs),te(It),te(Lw))};static \u0275cmp=wt({type:n,selectors:[["app-gallery"]],decls:65,vars:17,consts:[[1,"gallery-container"],[1,"gallery-header"],[1,"header-content"],[1,"header-text"],["class","header-actions",4,"ngIf"],[1,"controls-desktop-layout"],[1,"filter-container","unified-control-group"],["for","type-filter",1,"unified-label"],[1,"unified-input-group"],["id","type-filter",1,"unified-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"unified-spacer"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"desktop-city-controls"],[1,"city-search-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt...",1,"unified-input","city-input-compact",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn","search-btn",3,"click","disabled"],[1,"quick-cities-group"],[1,"unified-select","city-select-compact",3,"ngModelChange","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn","confirm-btn",3,"click","disabled"],[1,"gps-group"],["title","GPS aktivieren und Standort verwenden",1,"location-btn","gps-btn-desktop",3,"click"],[1,"location-hint","mobile-only"],["class","radius-info",4,"ngIf"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"header-actions"],["title","Neuen Afroshop hinzuf\xFCgen",1,"add-afroshop-btn","primary",3,"click"],["class","admin-link-btn","title","Administration",3,"click",4,"ngIf"],["title","Administration",1,"admin-link-btn",3,"click"],["title","Anmelden um einen Afroshop hinzuzuf\xFCgen",1,"add-afroshop-btn","disabled",3,"click"],[3,"value"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),v(5),y()(),ae(6,lae,4,1,"div",4),ni(7,"async"),ae(8,uae,3,0,"div",4),ni(9,"async"),y(),m(10,"div",5)(11,"div",6)(12,"label",7),v(13,"Nach Typ filtern:"),y(),m(14,"div",8)(15,"select",9),Se("ngModelChange",function(s){return Ae(r.selectedType,s)||(r.selectedType=s),s}),de("change",function(){return r.onTypeFilterChange()}),m(16,"option",10),v(17,"Alle Typen"),y(),ae(18,dae,2,3,"option",11),y(),pt(19,"div",12),y()(),m(20,"div",13)(21,"label",14),v(22,"\u{1F4CD} Deine Stadt:"),y(),m(23,"div",15)(24,"div",16)(25,"div",8)(26,"input",17),Se("ngModelChange",function(s){return Ae(r.customCityName,s)||(r.customCityName=s),s}),de("keyup.enter",function(){return r.searchCity()}),y(),m(27,"button",18),de("click",function(){return r.searchCity()}),v(28," \u{1F50D} Suchen "),y()()(),m(29,"div",19)(30,"div",8)(31,"select",20),Se("ngModelChange",function(s){return Ae(r.selectedCity,s)||(r.selectedCity=s),s}),m(32,"option",10),v(33,"Beliebte St\xE4dte..."),y(),m(34,"option",21),v(35,"Berlin"),y(),m(36,"option",22),v(37,"Hamburg"),y(),m(38,"option",23),v(39,"M\xFCnchen"),y(),m(40,"option",24),v(41,"K\xF6ln"),y(),m(42,"option",25),v(43,"Frankfurt am Main"),y(),m(44,"option",26),v(45,"Stuttgart"),y(),m(46,"option",27),v(47,"D\xFCsseldorf"),y(),m(48,"option",28),v(49,"Dortmund"),y(),m(50,"option",29),v(51,"Essen"),y(),m(52,"option",30),v(53,"Leipzig"),y()(),m(54,"button",31),de("click",function(){return r.onCityChange()}),v(55," \u2713 Best\xE4tigen "),y()()(),m(56,"div",32)(57,"button",33),de("click",function(){return r.useCurrentLocation()}),v(58," \u{1F4E1} GPS aktivieren "),y()()(),m(59,"small",34),v(60," \u{1F3AF} Findet automatisch Afroshops in deiner N\xE4he "),y()()(),ae(61,pae,7,4,"div",35),y()(),ae(62,gae,2,2,"div",36)(63,vae,2,1,"div",37)(64,wae,10,0,"div",38)),t&2&&(N(5),Ve("\u{1F30D} Entdecke ",r.filteredAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he"),N(),z("ngIf",ri(7,13,r.user$)),N(2),z("ngIf",!ri(9,15,r.user$)),N(7),Te("ngModel",r.selectedType),N(3),z("ngForOf",r.getAllBusinessTypes()),N(8),Te("ngModel",r.customCityName),N(),z("disabled",!r.customCityName||!r.customCityName.trim()),N(4),Te("ngModel",r.selectedCity),N(23),z("disabled",!r.selectedCity),N(7),z("ngIf",r.userLocation&&(r.selectedCity||r.filteredAfroshops.length<r.allAfroshops.length)),N(),z("ngIf",r.showMap&&r.filteredAfroshops.length>0),N(),z("ngIf",!r.showMap&&r.filteredAfroshops.length>0),N(),z("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[zt,tr,ln,lf,Ec,us,Pw,xw,Br,sh,ls,vi,Ow],styles:[`.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box;display:flex;align-items:center;line-height:1.2}.unified-select[_ngcontent-%COMP%]{appearance:none;background-image:url("data:image/svg+xml;charset=US-ASCII,<svg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'><path fill='%23666' d='M2 0L0 2h4zm0 5L0 3h4z'/></svg>");background-repeat:no-repeat;background-position:right 12px center;background-size:12px;padding-right:40px}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:flex-start;max-width:100%;padding-left:0}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:280px;min-width:180px;margin:0 0 0 8rem;text-align:center;padding:var(--spacing-sm) var(--spacing-lg);vertical-align:middle;padding-top:calc(var(--spacing-sm) + 2px)}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-label[_ngcontent-%COMP%]{margin-left:10rem;text-align:left}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.controls-desktop-layout[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:24px;margin-bottom:32px;box-shadow:0 8px 32px #00000014}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(250px,300px) 1fr;gap:40px;align-items:start}.filter-container[_ngcontent-%COMP%]{margin:0;text-align:left}.filter-container[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{padding-left:0}.location-container[_ngcontent-%COMP%]{margin:0}.desktop-city-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 2fr 1fr;gap:20px;align-items:end;width:100%}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.city-input-compact[_ngcontent-%COMP%]{min-width:200px;flex:1;max-width:300px}.city-select-compact[_ngcontent-%COMP%]{min-width:180px;flex:1;max-width:250px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:90px;flex-shrink:0}.gps-btn-desktop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #28a7454d;white-space:nowrap;width:100%;min-height:48px}.gps-btn-desktop[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #28a74566}.mobile-only[_ngcontent-%COMP%], .quick-cities[_ngcontent-%COMP%]   .unified-label[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1023px){.controls-desktop-layout[_ngcontent-%COMP%]{padding:20px}.desktop-city-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.city-input-compact[_ngcontent-%COMP%], .city-select-compact[_ngcontent-%COMP%]{flex:1}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px;flex-shrink:0}.gps-group[_ngcontent-%COMP%]{width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{width:100%;padding:14px}}@media (max-width: 767px){.controls-desktop-layout[_ngcontent-%COMP%]{background:none;border:none;padding:0;box-shadow:none}.desktop-city-controls[_ngcontent-%COMP%]{display:block}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{margin-bottom:16px}.gps-btn-desktop[_ngcontent-%COMP%]{background:var(--primary-color);width:100%;margin-top:0;padding:14px}.mobile-only[_ngcontent-%COMP%]{display:block}}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.admin-link-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);color:#fff;border:none;padding:8px 12px;border-radius:50%;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000001a;margin-left:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.admin-link-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7f8c8d,#95a5a6);transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #00000026}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}@media (min-width: 1400px){.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:320px;min-width:200px}.city-input-compact[_ngcontent-%COMP%]{max-width:350px;min-width:220px}.city-select-compact[_ngcontent-%COMP%]{max-width:280px;min-width:200px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px}}`]})};function Eae(n,e){if(n&1){let t=ze();m(0,"button",26),de("click",function(){se(t);let i=G(2);return oe(i.editAfroshop())}),v(1," \u270F\uFE0F Bearbeiten "),y()}}function Iae(n,e){if(n&1){let t=ze();m(0,"div")(1,"img",27),de("error",function(i){se(t);let s=G(2);return oe(s.onImageError(i))}),y()()}if(n&2){let t=G(2);N(),z("src",t.afroshop.image,Go)("alt",t.afroshop.name)}}function bae(n,e){if(n&1&&(m(0,"div",28)(1,"div",29),v(2,"\u{1F4F7}"),y(),m(3,"p"),v(4,"Kein Bild verf\xFCgbar"),y(),m(5,"small"),v(6),y()()),n&2){let t=G(2);N(6),yt(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function Cae(n,e){if(n&1&&(m(0,"div",30),v(1),y()),n&2){let t=G(2);N(),Ve(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function Tae(n,e){if(n&1&&(m(0,"div",31)(1,"span",32),v(2),y(),m(3,"span",33),v(4),y()()),n&2){let t=e.$implicit;vc("closed",!t.isOpen)("open",t.isOpen),N(2),Ve("",t.day,":"),N(),vc("closed-text",!t.isOpen),N(),Ve(" ",t.hours," ")}}function Sae(n,e){if(n&1){let t=ze();m(0,"div",3)(1,"div",4)(2,"button",5),de("click",function(){se(t);let i=G();return oe(i.goBack())}),v(3," \u2190 Zur\xFCck zur \xDCbersicht "),y(),ae(4,Eae,2,0,"button",6),y(),m(5,"div",7)(6,"div",8),ae(7,Iae,2,2,"div",9)(8,bae,7,1,"ng-template",null,0,CN),m(10,"div",10),v(11),ni(12,"titlecase"),y()(),m(13,"div",11)(14,"h1"),v(15),y(),m(16,"div",12)(17,"div",13),v(18),y(),ae(19,Cae,2,1,"div",14),y(),m(20,"div",15)(21,"div",16)(22,"strong"),v(23,"\u{1F4CD} Adresse:"),y(),m(24,"p"),v(25),y()(),m(26,"div",16)(27,"strong"),v(28,"\u{1F4DE} Telefon:"),y(),m(29,"p")(30,"a",17),v(31),y()()(),m(32,"div",16)(33,"strong"),v(34,"\u{1F552} \xD6ffnungszeiten:"),y(),m(35,"div",18),ae(36,Tae,5,8,"div",19),y()()(),m(37,"div",20)(38,"h3"),v(39,"\xDCber uns"),y(),m(40,"p"),v(41),y()(),m(42,"div",21)(43,"button",22),de("click",function(){se(t);let i=G();return oe(i.callPhone(i.afroshop.phone))}),v(44," \u{1F4DE} Anrufen "),y(),m(45,"button",23),de("click",function(){se(t);let i=G();return oe(i.openInMaps())}),v(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),y(),m(47,"button",24),de("click",function(){se(t);let i=G();return oe(i.getDirections())}),v(48," \u{1F9ED} Route "),y(),m(49,"button",25),de("click",function(){se(t);let i=G();return oe(i.goBack())}),v(50," \u2190 Zur\xFCck "),y()()()()()}if(n&2){let t=of(9),r=G();N(4),z("ngIf",r.canEdit()),N(3),z("ngIf",r.afroshop.image)("ngIfElse",t),N(3),Qo(r.afroshop.type),N(),mr(" ",r.getTypeIcon(r.afroshop.type)," ",ri(12,17,r.afroshop.type)," "),N(4),yt(r.afroshop.name),N(3),mr(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),N(),z("ngIf",r.afroshop.cuisine),N(6),yt(r.afroshop.address),N(5),Bb("href","tel:",r.afroshop.phone,"",Go),N(),Ve(" ",r.afroshop.phone," "),N(5),z("ngForOf",r.formattedHours),N(5),yt(r.afroshop.description)}}function Aae(n,e){if(n&1){let t=ze();m(0,"div",34)(1,"h2"),v(2,"\u274C Gesch\xE4ft nicht gefunden"),y(),m(3,"p"),v(4,"Das gesuchte Gesch\xE4ft existiert nicht."),y(),m(5,"button",5),de("click",function(){se(t);let i=G();return oe(i.goBack())}),v(6," \u2190 Zur\xFCck zur \xDCbersicht "),y()()}}var Vw=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=s}afroshop;shopId="";formattedHours=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop),this.parseOpeningHours(this.afroshop.hours||"")):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getDirections(){if(this.afroshop){let e=`https://www.google.com/maps/dir/?api=1&destination=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}parseOpeningHours(e){if(this.formattedHours=[],!e)return;let t={Mo:"Montag",Di:"Dienstag",Mi:"Mittwoch",Do:"Donnerstag",Fr:"Freitag",Sa:"Samstag",So:"Sonntag"},r=e.split(",").map(o=>o.trim()),i=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],s={};i.forEach(o=>{s[o]={isOpen:!1,hours:"Geschlossen"}}),r.forEach(o=>{let a=o.indexOf(":");if(a===-1)return;let c=o.substring(0,a).trim(),u=o.substring(a+1).trim();if(c.includes("-")){let[h,g]=c.split("-").map(k=>k.trim()),I=t[h],T=t[g];if(I&&T){let k=i.indexOf(I),L=i.indexOf(T);if(k!==-1&&L!==-1)if(k<=L)for(let O=k;O<=L;O++)s[i[O]]={isOpen:!0,hours:u};else{for(let O=k;O<i.length;O++)s[i[O]]={isOpen:!0,hours:u};for(let O=0;O<=L;O++)s[i[O]]={isOpen:!0,hours:u}}}}else{let h=t[c];h&&(s[h]={isOpen:!0,hours:u})}}),i.forEach(o=>{this.formattedHours.push({day:o,hours:s[o].hours,isOpen:s[o].isOpen})})}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(te(kn),te(It),te(oh),te(ir),te(Jt))};static \u0275cmp=wt({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"opening-hours-display"],["class","day-row",3,"closed","open",4,"ngFor","ngForOf"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"day-row"],[1,"day-name"],[1,"day-hours"],[1,"error-container"]],template:function(t,r){t&1&&ae(0,Sae,51,19,"div",1)(1,Aae,7,0,"div",2),t&2&&(z("ngIf",r.afroshop),N(),z("ngIf",!r.afroshop))},dependencies:[zt,tr,ln,Ec],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md)}.image-section[_ngcontent-%COMP%]{order:1}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.contact-item[_ngcontent-%COMP%]{text-align:left}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}.opening-hours-display[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);background:var(--surface-color);border-radius:var(--border-radius);padding:var(--spacing-md);border:1px solid var(--border-color)}.day-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-xs) 0;border-bottom:1px solid var(--border-light);transition:all var(--transition-normal)}.day-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.day-row.open[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf500d,#4caf5005)}.day-row.closed[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f443360d,#f4433605)}.day-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);min-width:100px;font-size:.95rem}.day-hours[_ngcontent-%COMP%]{color:#4caf50;font-weight:500;font-size:.95rem;text-align:right}.day-hours.closed-text[_ngcontent-%COMP%]{color:#f44336;font-style:italic}@media (max-width: 768px){.opening-hours-display[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.day-row[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.day-name[_ngcontent-%COMP%]{min-width:80px;font-size:.9rem}.day-hours[_ngcontent-%COMP%]{font-size:.9rem}}"]})};var ch=class n{constructor(e){this.http=e}GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY";GEOCODING_URL="https://maps.googleapis.com/maps/api/geocode/json";CITY_COORDINATES={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},munich:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},cologne:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767},nuremberg:{lat:49.4521,lng:11.0767},mannheim:{lat:49.4875,lng:8.466},karlsruhe:{lat:49.0069,lng:8.4037},wiesbaden:{lat:50.0782,lng:8.2398},m\u00FCnster:{lat:51.9607,lng:7.6261},augsburg:{lat:48.3705,lng:10.8978},m\u00F6nchengladbach:{lat:51.1805,lng:6.4428},braunschweig:{lat:52.2689,lng:10.5268},kiel:{lat:54.3233,lng:10.1228},aachen:{lat:50.7753,lng:6.0839},halle:{lat:51.4969,lng:11.9695},magdeburg:{lat:52.1205,lng:11.6276},freiburg:{lat:47.999,lng:7.8421},krefeld:{lat:51.3388,lng:6.5853},mainz:{lat:49.9929,lng:8.2473},l\u00FCbeck:{lat:53.8655,lng:10.6866},erfurt:{lat:50.9848,lng:11.0299},rostock:{lat:54.0887,lng:12.1446},kassel:{lat:51.3127,lng:9.4797},hagen:{lat:51.367,lng:7.4637},potsdam:{lat:52.3906,lng:13.0645},saarbr\u00FCcken:{lat:49.2401,lng:6.9969},hamm:{lat:51.68,lng:7.8137},soest:{lat:51.5671,lng:8.1065},lippstadt:{lat:51.6738,lng:8.3435},paderborn:{lat:51.7189,lng:8.7545},g\u00FCtersloh:{lat:51.9067,lng:8.3858},bielefeld:{lat:52.0302,lng:8.5325},detmold:{lat:51.9386,lng:8.8795},minden:{lat:52.2897,lng:8.9157},herford:{lat:52.1166,lng:8.671}};geocodeAddress(e){if(!e||e.trim().length===0)return pe(null);let t=e.trim();return console.log(`\u{1F5FA}\uFE0F G\xE9ocodage de l'adresse: "${t}"`),this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"?this.geocodeWithGoogleMaps(t).pipe(ur(r=>(console.warn("\u274C \xC9chec du g\xE9ocodage Google Maps, utilisation du fallback:",r),pe(this.geocodeWithFallback(t))))):(console.log("\u{1F527} Utilisation du syst\xE8me de g\xE9ocodage fallback (coordonn\xE9es pr\xE9d\xE9finies)"),pe(this.geocodeWithFallback(t)))}geocodeWithGoogleMaps(e){let t={address:e,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:t}).pipe(me(r=>{if(r.status==="OK"&&r.results&&r.results.length>0){let i=r.results[0],s=i.geometry.location;return console.log("\u2705 G\xE9ocodage Google Maps r\xE9ussi:",{address:i.formatted_address,coordinates:s}),{lat:s.lat,lng:s.lng,formatted_address:i.formatted_address,place_id:i.place_id,accuracy:i.geometry.location_type}}else return console.warn("\u274C Aucun r\xE9sultat trouv\xE9 pour:",e),null}),ur(r=>{throw console.error("\u274C Erreur API Google Maps:",r),r}))}geocodeWithFallback(e){let t=e.toLowerCase(),r=Object.entries(this.CITY_COORDINATES).sort((s,o)=>o[0].length-s[0].length);for(let[s,o]of r)if(new RegExp(`\\b${s}\\b`,"i").test(t))return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour ${s}:`,o),{lat:o.lat,lng:o.lng,formatted_address:`${s.charAt(0).toUpperCase()+s.slice(1)}, Deutschland`,accuracy:"APPROXIMATE"};let i=e.match(/\b(\d{5})\b/);if(i){let s=i[1],o=this.getCoordinatesFromPostalCode(s);if(o)return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour code postal ${s}:`,o),{lat:o.lat,lng:o.lng,formatted_address:`${s}, Deutschland`,accuracy:"APPROXIMATE"}}return console.warn("\u274C Impossible de g\xE9ocoder l'adresse:",e),null}getCoordinatesFromPostalCode(e){let t=parseInt(e);return t>=1e4&&t<=19999?{lat:52.52,lng:13.405}:t>=2e4&&t<=29999?{lat:53.5511,lng:9.9937}:t>=3e4&&t<=39999?{lat:52.3759,lng:9.732}:t>=4e4&&t<=49999?{lat:51.2277,lng:6.7735}:t>=5e4&&t<=59999?{lat:50.9375,lng:6.9603}:t>=6e4&&t<=69999?{lat:50.1109,lng:8.6821}:t>=7e4&&t<=79999?{lat:48.7758,lng:9.1829}:t>=8e4&&t<=89999?{lat:48.1351,lng:11.582}:t>=9e4&&t<=99999?{lat:49.4521,lng:11.0767}:null}reverseGeocode(e,t){if(this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"){let r={latlng:`${e},${t}`,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:r}).pipe(me(i=>{if(i.status==="OK"&&i.results&&i.results.length>0){let s=i.results[0];return{address:s.formatted_address,components:this.parseAddressComponents(s.address_components)}}return null}),ur(i=>(console.error("\u274C Erreur g\xE9ocodage inverse:",i),pe(null))))}else return pe({address:`${e.toFixed(4)}, ${t.toFixed(4)}`,components:{}})}parseAddressComponents(e){let t={};return e.forEach(r=>{let i=r.types;i.includes("street_number")?t.street_number=r.long_name:i.includes("route")?t.route=r.long_name:i.includes("locality")?t.locality=r.long_name:i.includes("postal_code")?t.postal_code=r.long_name:i.includes("country")&&(t.country=r.long_name)}),t}isValidCoordinates(e,t){return e!==0&&t!==0&&e>=-90&&e<=90&&t>=-180&&t<=180}calculateDistance(e,t,r,i){let o=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}deg2rad(e){return e*(Math.PI/180)}static \u0275fac=function(t){return new(t||n)(ue(l_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Dae(n,e){n&1&&(m(0,"a",71),v(1," \u2190 Admin "),y())}function Mae(n,e){n&1&&(m(0,"span"),v(1,"\u{1F4E5} Importieren"),y())}function Rae(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 L\xE4dt..."),y())}function Pae(n,e){if(n&1&&(m(0,"div",72),v(1),y()),n&2){let t=G();N(),Ve(" \u2705 ",t.successMessage," ")}}function xae(n,e){if(n&1&&(m(0,"div",73),v(1),y()),n&2){let t=G();N(),Ve(" \u274C ",t.errorMessage," ")}}function kae(n,e){if(n&1&&(m(0,"option",74),v(1),y()),n&2){let t=e.$implicit;z("value",t.value),N(),mr(" ",t.icon," ",t.label," ")}}function Oae(n,e){n&1&&(m(0,"span"),v(1,"\u{1F4C1} Bild ausw\xE4hlen"),y())}function Nae(n,e){n&1&&(m(0,"span"),v(1,"\u{1F504} Anderes Bild w\xE4hlen"),y())}function Lae(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Wird bearbeitet..."),y())}function Fae(n,e){n&1&&(m(0,"div",75)(1,"div",76),pt(2,"div",77),y(),m(3,"small"),v(4,"Bild wird komprimiert und vorbereitet..."),y()())}function Vae(n,e){if(n&1){let t=ze();m(0,"div",78),pt(1,"img",79),m(2,"button",80),de("click",function(){se(t);let i=G(),s=of(47);return i.imagePreview=null,i.selectedFile=null,oe(s.value="")}),v(3," \u2715 "),y()()}if(n&2){let t=G();N(),z("src",t.imagePreview,Go)}}function Uae(n,e){n&1&&(m(0,"div",81),v(1," \u{1F5FA}\uFE0F Adresse wird georeferenziert... "),y())}function Bae(n,e){if(n&1&&(m(0,"div",82),v(1),y()),n&2){let t=G();N(),mr(" \u2705 Standort gefunden: ",t.afroshop.coordinates.lat.toFixed(4),", ",t.afroshop.coordinates.lng.toFixed(4)," ")}}function jae(n,e){if(n&1){let t=ze();m(0,"div",10)(1,"label",83),v(2,"K\xFCche"),y(),m(3,"input",84),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.afroshop.cuisine,i)||(s.afroshop.cuisine=i),oe(i)}),y(),m(4,"small",31),v(5,"Spezifizieren Sie die Art der afrikanischen K\xFCche"),y()()}if(n&2){let t=G();N(3),Te("ngModel",t.afroshop.cuisine)}}function zae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",86),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.monday.open,i)||(s.openingHours.monday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",95),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.monday.close,i)||(s.openingHours.monday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.monday.open),N(17),Te("ngModel",t.openingHours.monday.close)}}function $ae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",104),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.tuesday.open,i)||(s.openingHours.tuesday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",105),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.tuesday.close,i)||(s.openingHours.tuesday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.tuesday.open),N(17),Te("ngModel",t.openingHours.tuesday.close)}}function Hae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",106),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.wednesday.open,i)||(s.openingHours.wednesday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",107),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.wednesday.close,i)||(s.openingHours.wednesday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.wednesday.open),N(17),Te("ngModel",t.openingHours.wednesday.close)}}function qae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",108),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.thursday.open,i)||(s.openingHours.thursday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",109),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.thursday.close,i)||(s.openingHours.thursday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.thursday.open),N(17),Te("ngModel",t.openingHours.thursday.close)}}function Gae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",110),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.friday.open,i)||(s.openingHours.friday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",111),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.friday.close,i)||(s.openingHours.friday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.friday.open),N(17),Te("ngModel",t.openingHours.friday.close)}}function Wae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",112),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.saturday.open,i)||(s.openingHours.saturday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",113),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.saturday.close,i)||(s.openingHours.saturday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.saturday.open),N(17),Te("ngModel",t.openingHours.saturday.close)}}function Kae(n,e){if(n&1){let t=ze();m(0,"div",85)(1,"select",114),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.sunday.open,i)||(s.openingHours.sunday.open=i),oe(i)}),m(2,"option",87),v(3,"06:00"),y(),m(4,"option",88),v(5,"07:00"),y(),m(6,"option",89),v(7,"08:00"),y(),m(8,"option",90),v(9,"09:00"),y(),m(10,"option",91),v(11,"10:00"),y(),m(12,"option",92),v(13,"11:00"),y(),m(14,"option",93),v(15,"12:00"),y()(),m(16,"span",94),v(17,"bis"),y(),m(18,"select",115),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.openingHours.sunday.close,i)||(s.openingHours.sunday.close=i),oe(i)}),m(19,"option",96),v(20,"16:00"),y(),m(21,"option",97),v(22,"17:00"),y(),m(23,"option",98),v(24,"18:00"),y(),m(25,"option",99),v(26,"19:00"),y(),m(27,"option",100),v(28,"20:00"),y(),m(29,"option",101),v(30,"21:00"),y(),m(31,"option",102),v(32,"22:00"),y(),m(33,"option",103),v(34,"23:00"),y()()()}if(n&2){let t=G();N(),Te("ngModel",t.openingHours.sunday.open),N(17),Te("ngModel",t.openingHours.sunday.close)}}function Qae(n,e){n&1&&(m(0,"span"),v(1,"\u274C Abbrechen"),y())}function Yae(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Warten..."),y())}function Jae(n,e){if(n&1&&(m(0,"span"),v(1),y()),n&2){let t=G();N(),yt(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function Zae(n,e){n&1&&(m(0,"span"),v(1,"\u{1F4E4} Bild wird hochgeladen..."),y())}function Xae(n,e){if(n&1&&(m(0,"span"),v(1),y()),n&2){let t=G();N(),yt(t.isEditMode?"\u{1F4BE} \xC4nderungen speichern":"\u{1F3EA} Afroshop hinzuf\xFCgen")}}var gg=class n{constructor(e,t,r,i,s,o){this.firebaseService=e;this.authService=t;this.translationService=r;this.geocodingService=i;this.router=s;this.route=o}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:0,hours:"",website:""};openingHours={monday:{isOpen:!1,open:"09:00",close:"18:00"},tuesday:{isOpen:!1,open:"09:00",close:"18:00"},wednesday:{isOpen:!1,open:"09:00",close:"18:00"},thursday:{isOpen:!1,open:"09:00",close:"18:00"},friday:{isOpen:!1,open:"09:00",close:"18:00"},saturday:{isOpen:!1,open:"10:00",close:"16:00"},sunday:{isOpen:!1,open:"12:00",close:"16:00"}};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;isGeocoding=!1;isAdmin=!1;successMessage="";errorMessage="";ngOnInit(){this.authService.user$.subscribe(t=>{this.isAdmin=t?.email==="youssoufdiamaldiallo@gmail.com"});let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return S(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null,this.parseOpeningHoursFromString(t.hours||"")):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return S(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=s=>{this.imagePreview=s.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return S(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(o=>{e.toBlob(a=>o(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let s=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",s),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target.result,o.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),u=1200,h=1200,g=o.width,I=o.height;g>I?g>u&&(I*=u/g,g=u):I>h&&(g*=h/I,I=h),a.width=g,a.height=I,c?.drawImage(o,0,0,g,I),a.toBlob(T=>{if(T){let k=new File([T],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},o.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return S(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return S(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage()),(!this.afroshop.priceLevel||this.afroshop.priceLevel===0)&&(this.afroshop.priceLevel=2),this.afroshop.website=this.afroshop.website?.trim()||"",this.afroshop.cuisine=this.afroshop.cuisine?.trim()||"",this.afroshop.hours=this.convertOpeningHoursToString();let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=fe($({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=fe($({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?this.afroshop.address.trim()?this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)?this.afroshop.phone.trim()?this.afroshop.description.trim()?this.afroshop.website&&this.afroshop.website.trim()&&!/^https?:\/\/.+/.test(this.afroshop.website)?(this.errorMessage="Website URL muss mit http:// oder https:// beginnen",!1):(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Beschreibung ist erforderlich",!1):(this.errorMessage="Telefonnummer ist erforderlich",!1):(this.errorMessage="Adresse konnte nicht georeferenziert werden. Bitte \xFCberpr\xFCfen Sie die Adresse.",console.warn("\u274C Coordonn\xE9es invalides:",this.afroshop.coordinates),!1):(this.errorMessage="Adresse ist erforderlich",!1):(this.errorMessage="Name ist erforderlich",!1)}onAddressChange(){this.geocodeTimeout&&clearTimeout(this.geocodeTimeout),this.geocodeTimeout=setTimeout(()=>{this.setCoordinatesFromAddress()},1e3)}geocodeTimeout=null;setCoordinatesFromAddress(){if(!this.afroshop.address||this.afroshop.address.trim().length===0){console.log("\u274C Adresse vide, impossible de g\xE9ocoder"),this.isGeocoding=!1;return}if(this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)){console.log("\u2705 Coordonn\xE9es d\xE9j\xE0 valides:",this.afroshop.coordinates),this.isGeocoding=!1;return}console.log("\u{1F5FA}\uFE0F D\xE9marrage du g\xE9ocodage pour:",this.afroshop.address),this.isGeocoding=!0,this.geocodingService.geocodeAddress(this.afroshop.address).subscribe({next:e=>{this.isGeocoding=!1,e?(this.afroshop.coordinates={lat:e.lat,lng:e.lng},console.log("\u2705 G\xE9ocodage r\xE9ussi:",{address:this.afroshop.address,coordinates:this.afroshop.coordinates,formatted_address:e.formatted_address}),e.formatted_address&&e.accuracy!=="APPROXIMATE"&&(this.afroshop.address=e.formatted_address)):(console.warn("\u274C G\xE9ocodage \xE9chou\xE9 pour:",this.afroshop.address),this.afroshop.coordinates={lat:0,lng:0})},error:e=>{this.isGeocoding=!1,console.error("\u274C Erreur lors du g\xE9ocodage:",e),this.afroshop.coordinates={lat:0,lng:0}}})}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return S(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return S(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return S(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|münchen|köln|frankfurt|dortmund|essen|düsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return S(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(s=>s&&s!=="www.facebook.com"&&s!=="facebook.com"&&s!=="p"&&!s.match(/^\d+$/)&&s.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return S(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}convertOpeningHoursToString(){let e=[{key:"monday",name:"Mo"},{key:"tuesday",name:"Di"},{key:"wednesday",name:"Mi"},{key:"thursday",name:"Do"},{key:"friday",name:"Fr"},{key:"saturday",name:"Sa"},{key:"sunday",name:"So"}],t=[];return e.forEach(r=>{let i=this.openingHours[r.key];i.isOpen&&t.push(`${r.name}: ${i.open}-${i.close}`)}),t.length>0?t.join(", "):"\xD6ffnungszeiten nicht angegeben"}parseOpeningHoursFromString(e){if(!e||e==="\xD6ffnungszeiten nicht angegeben")return;this.openingHours.monday.isOpen=!1,this.openingHours.tuesday.isOpen=!1,this.openingHours.wednesday.isOpen=!1,this.openingHours.thursday.isOpen=!1,this.openingHours.friday.isOpen=!1,this.openingHours.saturday.isOpen=!1,this.openingHours.sunday.isOpen=!1,e.split(",").forEach(r=>{let s=r.trim().match(/^(\w+):\s*(\d{2}:\d{2})-(\d{2}:\d{2})$/);if(s){let[,o,a,c]=s;switch(o.toLowerCase()){case"mo":this.openingHours.monday={isOpen:!0,open:a,close:c};break;case"di":this.openingHours.tuesday={isOpen:!0,open:a,close:c};break;case"mi":this.openingHours.wednesday={isOpen:!0,open:a,close:c};break;case"do":this.openingHours.thursday={isOpen:!0,open:a,close:c};break;case"fr":this.openingHours.friday={isOpen:!0,open:a,close:c};break;case"sa":this.openingHours.saturday={isOpen:!0,open:a,close:c};break;case"so":this.openingHours.sunday={isOpen:!0,open:a,close:c};break}}})}goBack(){this.router.navigate(["/"])}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}static \u0275fac=function(t){return new(t||n)(te(ir),te(Jt),te(hs),te(ch),te(It),te(kn))};static \u0275cmp=wt({type:n,selectors:[["app-add-afroshop"]],decls:163,vars:47,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"header-content"],[1,"header-text"],[1,"header-actions"],["routerLink","/admin","class","back-btn",4,"ngIf"],["routerLink","/gallery",1,"back-btn"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","geocoding-indicator",4,"ngIf"],["class","geocoding-success",4,"ngIf"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"opening-hours-container"],[1,"day-hours"],[1,"day-label"],[1,"hours-controls"],["type","checkbox","id","mon-open","name","mon-open",3,"ngModelChange","ngModel"],["for","mon-open",1,"checkbox-label"],["class","time-selectors",4,"ngIf"],["type","checkbox","id","tue-open","name","tue-open",3,"ngModelChange","ngModel"],["for","tue-open",1,"checkbox-label"],["type","checkbox","id","wed-open","name","wed-open",3,"ngModelChange","ngModel"],["for","wed-open",1,"checkbox-label"],["type","checkbox","id","thu-open","name","thu-open",3,"ngModelChange","ngModel"],["for","thu-open",1,"checkbox-label"],["type","checkbox","id","fri-open","name","fri-open",3,"ngModelChange","ngModel"],["for","fri-open",1,"checkbox-label"],["type","checkbox","id","sat-open","name","sat-open",3,"ngModelChange","ngModel"],["for","sat-open",1,"checkbox-label"],["type","checkbox","id","sun-open","name","sun-open",3,"ngModelChange","ngModel"],["for","sun-open",1,"checkbox-label"],["for","website"],["type","url","id","website","name","website","placeholder","https://www.beispiel.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/admin",1,"back-btn"],[1,"message","success"],[1,"message","error"],[3,"value"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],[1,"geocoding-indicator"],[1,"geocoding-success"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische, Nigerianische, Senegalesische",1,"form-input",3,"ngModelChange","ngModel"],[1,"time-selectors"],["name","mon-open-time",1,"time-select",3,"ngModelChange","ngModel"],["value","06:00"],["value","07:00"],["value","08:00"],["value","09:00"],["value","10:00"],["value","11:00"],["value","12:00"],[1,"time-separator"],["name","mon-close-time",1,"time-select",3,"ngModelChange","ngModel"],["value","16:00"],["value","17:00"],["value","18:00"],["value","19:00"],["value","20:00"],["value","21:00"],["value","22:00"],["value","23:00"],["name","tue-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-close-time",1,"time-select",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=ze();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),v(5),y(),m(6,"p"),v(7),y()(),m(8,"div",5),ae(9,Dae,2,0,"a",6),m(10,"a",7),v(11," \u2190 Galerie "),y()()()(),m(12,"form",8),de("ngSubmit",function(){return se(i),oe(r.onSubmit())}),m(13,"div",9)(14,"h3"),v(15,"\u{1F517} Schnell hinzuf\xFCgen"),y(),m(16,"p"),v(17,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),y(),m(18,"div",10)(19,"label",11),v(20,"Google Maps, Facebook, Nextdoor oder Website URL"),y(),m(21,"div",12)(22,"input",13),Se("ngModelChange",function(o){return se(i),Ae(r.importUrl,o)||(r.importUrl=o),oe(o)}),y(),m(23,"button",14),de("click",function(){return se(i),oe(r.importFromUrl())}),ae(24,Mae,2,0,"span",15)(25,Rae,2,0,"span",15),y()()(),m(26,"div",16)(27,"span"),v(28,"oder manuell eingeben"),y()()(),ae(29,Pae,2,1,"div",17)(30,xae,2,1,"div",18),m(31,"div",10)(32,"label",19),v(33,"Name des Gesch\xE4fts *"),y(),m(34,"input",20),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.name,o)||(r.afroshop.name=o),oe(o)}),y()(),m(35,"div",10)(36,"label",21),v(37,"Typ *"),y(),m(38,"select",22),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.type,o)||(r.afroshop.type=o),oe(o)}),m(39,"option",23),v(40,"Typ ausw\xE4hlen"),y(),ae(41,kae,2,3,"option",24),y()(),m(42,"div",10)(43,"label",25),v(44,"\u{1F4F8} Bild hochladen"),y(),m(45,"div",26)(46,"input",27,0),de("change",function(o){return se(i),oe(r.onFileSelected(o))}),y(),m(48,"button",28),de("click",function(){se(i);let o=of(47);return oe(o.click())}),ae(49,Oae,2,0,"span",15)(50,Nae,2,0,"span",15)(51,Lae,2,0,"span",15),y(),ae(52,Fae,5,0,"div",29)(53,Vae,4,1,"div",30),m(54,"small",31),v(55,"Max. 5MB - Wird automatisch komprimiert und optimiert"),y()()(),m(56,"div",10)(57,"label",32),v(58,"Adresse *"),y(),m(59,"input",33),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.address,o)||(r.afroshop.address=o),oe(o)}),de("ngModelChange",function(){return se(i),oe(r.onAddressChange())}),y(),m(60,"small"),v(61,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),y(),ae(62,Uae,2,0,"div",34)(63,Bae,2,2,"div",35),y(),m(64,"div",10)(65,"label",36),v(66,"Telefon *"),y(),m(67,"input",37),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.phone,o)||(r.afroshop.phone=o),oe(o)}),y()(),m(68,"div",10)(69,"label",38),v(70,"Beschreibung *"),y(),m(71,"textarea",39),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.description,o)||(r.afroshop.description=o),oe(o)}),y()(),ae(72,jae,6,1,"div",40),m(73,"div",10)(74,"label"),v(75,"\xD6ffnungszeiten"),y(),m(76,"div",41)(77,"div",42)(78,"div",43),v(79,"Montag:"),y(),m(80,"div",44)(81,"input",45),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.monday.isOpen,o)||(r.openingHours.monday.isOpen=o),oe(o)}),y(),m(82,"label",46),v(83,"Ge\xF6ffnet"),y(),ae(84,zae,35,2,"div",47),y()(),m(85,"div",42)(86,"div",43),v(87,"Dienstag:"),y(),m(88,"div",44)(89,"input",48),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.tuesday.isOpen,o)||(r.openingHours.tuesday.isOpen=o),oe(o)}),y(),m(90,"label",49),v(91,"Ge\xF6ffnet"),y(),ae(92,$ae,35,2,"div",47),y()(),m(93,"div",42)(94,"div",43),v(95,"Mittwoch:"),y(),m(96,"div",44)(97,"input",50),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.wednesday.isOpen,o)||(r.openingHours.wednesday.isOpen=o),oe(o)}),y(),m(98,"label",51),v(99,"Ge\xF6ffnet"),y(),ae(100,Hae,35,2,"div",47),y()(),m(101,"div",42)(102,"div",43),v(103,"Donnerstag:"),y(),m(104,"div",44)(105,"input",52),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.thursday.isOpen,o)||(r.openingHours.thursday.isOpen=o),oe(o)}),y(),m(106,"label",53),v(107,"Ge\xF6ffnet"),y(),ae(108,qae,35,2,"div",47),y()(),m(109,"div",42)(110,"div",43),v(111,"Freitag:"),y(),m(112,"div",44)(113,"input",54),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.friday.isOpen,o)||(r.openingHours.friday.isOpen=o),oe(o)}),y(),m(114,"label",55),v(115,"Ge\xF6ffnet"),y(),ae(116,Gae,35,2,"div",47),y()(),m(117,"div",42)(118,"div",43),v(119,"Samstag:"),y(),m(120,"div",44)(121,"input",56),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.saturday.isOpen,o)||(r.openingHours.saturday.isOpen=o),oe(o)}),y(),m(122,"label",57),v(123,"Ge\xF6ffnet"),y(),ae(124,Wae,35,2,"div",47),y()(),m(125,"div",42)(126,"div",43),v(127,"Sonntag:"),y(),m(128,"div",44)(129,"input",58),Se("ngModelChange",function(o){return se(i),Ae(r.openingHours.sunday.isOpen,o)||(r.openingHours.sunday.isOpen=o),oe(o)}),y(),m(130,"label",59),v(131,"Ge\xF6ffnet"),y(),ae(132,Kae,35,2,"div",47),y()(),m(133,"small",31),v(134,"W\xE4hlen Sie f\xFCr jeden Tag, ob das Gesch\xE4ft ge\xF6ffnet ist und die \xD6ffnungszeiten"),y()()(),m(135,"div",10)(136,"label",60),v(137,"Website"),y(),m(138,"input",61),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.website,o)||(r.afroshop.website=o),oe(o)}),y(),m(139,"small",31),v(140,"Optional: Offizielle Website oder Social Media Profil"),y()(),m(141,"div",10)(142,"label",62),v(143,"Preisstufe"),y(),m(144,"select",63),Se("ngModelChange",function(o){return se(i),Ae(r.afroshop.priceLevel,o)||(r.afroshop.priceLevel=o),oe(o)}),m(145,"option",23),v(146,"-- Bitte w\xE4hlen --"),y(),m(147,"option",64),v(148,"\u20AC - G\xFCnstig (unter 10\u20AC)"),y(),m(149,"option",65),v(150,"\u20AC\u20AC - Moderat (10-20\u20AC)"),y(),m(151,"option",66),v(152,"\u20AC\u20AC\u20AC - Gehoben (20-40\u20AC)"),y(),m(153,"option",67),v(154,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig (\xFCber 40\u20AC)"),y()()(),m(155,"div",68)(156,"button",69),de("click",function(){return se(i),oe(r.goBack())}),ae(157,Qae,2,0,"span",15)(158,Yae,2,0,"span",15),y(),m(159,"button",70),ae(160,Jae,2,1,"span",15)(161,Zae,2,0,"span",15)(162,Xae,2,1,"span",15),y()()()()}t&2&&(N(5),yt(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),N(2),yt(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),N(2),z("ngIf",r.isAdmin),N(13),Te("ngModel",r.importUrl),N(),z("disabled",!r.importUrl||r.isImporting),N(),z("ngIf",!r.isImporting),N(),z("ngIf",r.isImporting),N(4),z("ngIf",r.successMessage),N(),z("ngIf",r.errorMessage),N(4),Te("ngModel",r.afroshop.name),N(4),Te("ngModel",r.afroshop.type),N(3),z("ngForOf",r.getAllBusinessTypes()),N(7),z("disabled",r.isUploadingImage),N(),z("ngIf",!r.imagePreview&&!r.isUploadingImage),N(),z("ngIf",r.imagePreview&&!r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",r.imagePreview),N(6),Te("ngModel",r.afroshop.address),N(3),z("ngIf",r.isGeocoding),N(),z("ngIf",r.afroshop.coordinates.lat!==0&&r.afroshop.coordinates.lng!==0),N(4),Te("ngModel",r.afroshop.phone),N(4),Te("ngModel",r.afroshop.description),N(),z("ngIf",r.afroshop.type==="restaurant"),N(9),Te("ngModel",r.openingHours.monday.isOpen),N(3),z("ngIf",r.openingHours.monday.isOpen),N(5),Te("ngModel",r.openingHours.tuesday.isOpen),N(3),z("ngIf",r.openingHours.tuesday.isOpen),N(5),Te("ngModel",r.openingHours.wednesday.isOpen),N(3),z("ngIf",r.openingHours.wednesday.isOpen),N(5),Te("ngModel",r.openingHours.thursday.isOpen),N(3),z("ngIf",r.openingHours.thursday.isOpen),N(5),Te("ngModel",r.openingHours.friday.isOpen),N(3),z("ngIf",r.openingHours.friday.isOpen),N(5),Te("ngModel",r.openingHours.saturday.isOpen),N(3),z("ngIf",r.openingHours.saturday.isOpen),N(5),Te("ngModel",r.openingHours.sunday.isOpen),N(3),z("ngIf",r.openingHours.sunday.isOpen),N(6),Te("ngModel",r.afroshop.website),N(6),Te("ngModel",r.afroshop.priceLevel),N(12),z("disabled",r.isSubmitting||r.isUploadingImage),N(),z("ngIf",!r.isSubmitting&&!r.isUploadingImage),N(),z("ngIf",r.isSubmitting||r.isUploadingImage),N(),z("disabled",r.isSubmitting||r.isUploadingImage),N(),z("ngIf",r.isSubmitting&&!r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[zt,tr,ln,us,ih,Pw,xw,Br,vR,sh,ls,rh,hl,vi,dl,vr,rr],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.geocoding-indicator[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e3f2fd;color:#1976d2;border-radius:6px;font-size:.9em;border-left:4px solid #2196f3;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.geocoding-success[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e8f5e8;color:#2e7d32;border-radius:6px;font-size:.9em;border-left:4px solid #4caf50}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl);padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px;box-shadow:0 10px 30px #667eea4d}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.back-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;padding:8px 15px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px);text-decoration:none;color:#fff}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding:20px 0}.btn[_ngcontent-%COMP%]{padding:16px 32px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;display:inline-flex;align-items:center;justify-content:center;text-align:center;min-width:160px;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;transform:translateY(0)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722,#e64a19);color:#fff;box-shadow:0 6px 20px #ff7b0066;border:2px solid transparent}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8f00,#ff6f00,#f57c00);transform:translateY(-3px);box-shadow:0 12px 30px #ff7b0080}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #ff7b0099}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#bdbdbd,#9e9e9e);color:#fff;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a;opacity:.7;animation:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled){animation:_ngcontent-%COMP%_gentle-pulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gentle-pulse{0%,to{box-shadow:0 6px 20px #ff7b0066}50%{box-shadow:0 6px 25px #ff7b0099}}.btn-primary[_ngcontent-%COMP%]:hover{animation:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;box-shadow:0 4px 15px #0000001a;border:2px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#adb5bd}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 10px #0003}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.url-input[_ngcontent-%COMP%]{width:100%}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:20px 0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;font-size:16px;padding:18px 24px;min-width:auto}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg)}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.image-preview-container[_ngcontent-%COMP%]{max-width:100%}.image-preview[_ngcontent-%COMP%]{max-height:200px}}.opening-hours-container[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;margin-top:10px}.day-hours[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.day-hours[_ngcontent-%COMP%]:last-child{margin-bottom:0}.day-label[_ngcontent-%COMP%]{width:100px;font-weight:600;color:#495057;flex-shrink:0}.hours-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex:1}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;cursor:pointer;margin:0;padding:0}.time-selectors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:10px}.time-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;background:#fff;color:#495057;font-size:14px;cursor:pointer;transition:all .2s}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff7b00;box-shadow:0 0 0 3px #ff7b001a}.time-separator[_ngcontent-%COMP%]{color:#6c757d;font-weight:500;margin:0 5px}@media (max-width: 768px){.day-hours[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.day-label[_ngcontent-%COMP%]{width:auto;margin-bottom:5px}.hours-controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.time-selectors[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}}@media (max-width: 480px){.opening-hours-container[_ngcontent-%COMP%]{padding:15px}.time-selectors[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.time-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function ece(n,e){if(n&1&&(m(0,"div",16),v(1),y()),n&2){let t=G();N(),Ve(" ",t.errorMessage," ")}}function tce(n,e){n&1&&(m(0,"span"),v(1,"Anmelden"),y())}function nce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Anmeldung..."),y())}function rce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F50D} Mit Google fortfahren"),y())}function ice(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Google-Anmeldung..."),y())}var Uw=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{console.log("\u{1F510} Tentative de connexion Google...");let e=yield this.authService.loginWithGoogle();console.log("\u2705 Connexion Google r\xE9ussie:",e);let t=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([t])}catch(e){console.error("\u274C Erreur connexion Google:",e);let t=e.message;e instanceof Error&&(console.log("Type d'erreur:",e.name),console.log("Code d'erreur:",e.code),console.log("Message complet:",e.message)),t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")||t.includes("popup-closed-by-user")||t.includes("cancelled")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")||t.includes("popup-blocked")?this.showPopupBlockedDialog():this.errorMessage=`Erreur de connexion: ${t}`}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It),te(kn))};static \u0275cmp=wt({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),v(4,"\u{1F510} Anmeldung"),y(),m(5,"p"),v(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),y()(),m(7,"form",3),de("ngSubmit",function(){return r.onSubmit()}),m(8,"div",4)(9,"label",5),v(10,"E-Mail-Adresse"),y(),m(11,"input",6),Se("ngModelChange",function(s){return Ae(r.email,s)||(r.email=s),s}),y()(),m(12,"div",4)(13,"label",7),v(14,"Passwort"),y(),m(15,"input",8),Se("ngModelChange",function(s){return Ae(r.password,s)||(r.password=s),s}),y()(),ae(16,ece,2,1,"div",9),m(17,"button",10),ae(18,tce,2,0,"span",11)(19,nce,2,0,"span",11),y()(),m(20,"div",12)(21,"span"),v(22,"oder"),y()(),m(23,"button",13),de("click",function(){return r.loginWithGoogle()}),ae(24,rce,2,0,"span",11)(25,ice,2,0,"span",11),y(),m(26,"div",14)(27,"p"),v(28,"Noch kein Konto? "),m(29,"a",15),v(30,"Registrieren"),y()()()()()),t&2&&(N(11),Te("ngModel",r.email),z("disabled",r.isLoading),N(4),Te("ngModel",r.password),z("disabled",r.isLoading),N(),z("ngIf",r.errorMessage),N(),z("disabled",r.isLoading||!r.email||!r.password),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading),N(4),z("disabled",r.isLoading),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading))},dependencies:[zt,ln,us,ih,Br,ls,rh,hl,vi,dl,vr,rr],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function sce(n,e){if(n&1&&(m(0,"div",20),v(1),y()),n&2){let t=G();N(),Ve(" ",t.errorMessage," ")}}function oce(n,e){n&1&&(m(0,"span"),v(1,"Registrieren"),y())}function ace(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Registrierung..."),y())}function cce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F50D} Mit Google fortfahren"),y())}function lce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Google-Anmeldung..."),y())}var Bw=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),v(4,"\u{1F4DD} Registrierung"),y(),m(5,"p"),v(6,"Erstellen Sie Ihr AfroConnect-Konto"),y()(),m(7,"form",3),de("ngSubmit",function(){return r.onSubmit()}),m(8,"div",4)(9,"label",5),v(10,"Anzeigename"),y(),m(11,"input",6),Se("ngModelChange",function(s){return Ae(r.displayName,s)||(r.displayName=s),s}),y()(),m(12,"div",4)(13,"label",7),v(14,"E-Mail-Adresse"),y(),m(15,"input",8),Se("ngModelChange",function(s){return Ae(r.email,s)||(r.email=s),s}),y()(),m(16,"div",4)(17,"label",9),v(18,"Passwort"),y(),m(19,"input",10),Se("ngModelChange",function(s){return Ae(r.password,s)||(r.password=s),s}),y()(),m(20,"div",4)(21,"label",11),v(22,"Passwort best\xE4tigen"),y(),m(23,"input",12),Se("ngModelChange",function(s){return Ae(r.confirmPassword,s)||(r.confirmPassword=s),s}),y()(),ae(24,sce,2,1,"div",13),m(25,"button",14),ae(26,oce,2,0,"span",15)(27,ace,2,0,"span",15),y()(),m(28,"div",16)(29,"span"),v(30,"oder"),y()(),m(31,"button",17),de("click",function(){return r.loginWithGoogle()}),ae(32,cce,2,0,"span",15)(33,lce,2,0,"span",15),y(),m(34,"div",18)(35,"p"),v(36,"Bereits ein Konto? "),m(37,"a",19),v(38,"Anmelden"),y()()()()()),t&2&&(N(11),Te("ngModel",r.displayName),z("disabled",r.isLoading),N(4),Te("ngModel",r.email),z("disabled",r.isLoading),N(4),Te("ngModel",r.password),z("disabled",r.isLoading),N(4),Te("ngModel",r.confirmPassword),z("disabled",r.isLoading),N(),z("ngIf",r.errorMessage),N(),z("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading),N(4),z("disabled",r.isLoading),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading))},dependencies:[zt,ln,us,ih,Br,ls,rh,hl,vi,dl,vr,rr],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var jw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-privacy"]],decls:108,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h1"),v(3,"Datenschutzerkl\xE4rung"),y(),m(4,"p",2),v(5),y(),m(6,"section")(7,"h2"),v(8,"1. Verantwortlicher"),y(),m(9,"p"),v(10," AfroConnect"),pt(11,"br"),v(12," [Ihre Adresse]"),pt(13,"br"),v(14," [Ihre Stadt, PLZ]"),pt(15,"br"),v(16," Deutschland"),pt(17,"br"),v(18," E-Mail: contact@afroconnect.de "),y()(),m(19,"section")(20,"h2"),v(21,"2. Erhobene Daten"),y(),m(22,"h3"),v(23,"2.1 Nutzungsdaten"),y(),m(24,"ul")(25,"li"),v(26,"IP-Adresse"),y(),m(27,"li"),v(28,"Browser-Informationen"),y(),m(29,"li"),v(30,"Zugriffszeitpunkt"),y(),m(31,"li"),v(32,"Besuchte Seiten"),y()(),m(33,"h3"),v(34,"2.2 Standortdaten"),y(),m(35,"p"),v(36," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),y(),m(37,"h3"),v(38,"2.3 Registrierungsdaten"),y(),m(39,"ul")(40,"li"),v(41,"E-Mail-Adresse"),y(),m(42,"li"),v(43,"Benutzername"),y(),m(44,"li"),v(45,"Passwort (verschl\xFCsselt)"),y()()(),m(46,"section")(47,"h2"),v(48,"3. Zweck der Datenverarbeitung"),y(),m(49,"ul")(50,"li"),v(51,"Bereitstellung der App-Funktionen"),y(),m(52,"li"),v(53,"Benutzerauthentifizierung"),y(),m(54,"li"),v(55,"Anzeige lokaler Afroshops"),y(),m(56,"li"),v(57,"Verbesserung der Nutzererfahrung"),y()()(),m(58,"section")(59,"h2"),v(60,"4. Rechtsgrundlage"),y(),m(61,"p"),v(62," Die Verarbeitung erfolgt auf Grundlage von: "),y(),m(63,"ul")(64,"li"),v(65,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),y(),m(66,"li"),v(67,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),y(),m(68,"li"),v(69,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),y()()(),m(70,"section")(71,"h2"),v(72,"5. Datenweitergabe"),y(),m(73,"p"),v(74," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),y(),m(75,"ul")(76,"li"),v(77,"Google Firebase (Hosting und Datenbank)"),y(),m(78,"li"),v(79,"Bei gesetzlicher Verpflichtung"),y()()(),m(80,"section")(81,"h2"),v(82,"6. Speicherdauer"),y(),m(83,"p"),v(84," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),y()(),m(85,"section")(86,"h2"),v(87,"7. Ihre Rechte"),y(),m(88,"ul")(89,"li"),v(90,"Auskunft \xFCber gespeicherte Daten"),y(),m(91,"li"),v(92,"Berichtigung falscher Daten"),y(),m(93,"li"),v(94,"L\xF6schung Ihrer Daten"),y(),m(95,"li"),v(96,"Einschr\xE4nkung der Verarbeitung"),y(),m(97,"li"),v(98,"Daten\xFCbertragbarkeit"),y(),m(99,"li"),v(100,"Widerspruch gegen Verarbeitung"),y()()(),m(101,"section")(102,"h2"),v(103,"8. Kontakt"),y(),m(104,"p"),v(105," Bei Fragen zum Datenschutz kontaktieren Sie uns unter:"),pt(106,"br"),v(107," E-Mail: privacy@afroconnect.de "),y()()()()),t&2&&(N(5),Ve("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var zw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-terms"]],decls:94,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h1"),v(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),y(),m(4,"p",2),v(5),y(),m(6,"section")(7,"h2"),v(8,"\xA7 1 Geltungsbereich"),y(),m(9,"p"),v(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),y()(),m(11,"section")(12,"h2"),v(13,"\xA7 2 Beschreibung der Dienstleistung"),y(),m(14,"p"),v(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),y(),m(16,"h3"),v(17,"2.1 Funktionen"),y(),m(18,"ul")(19,"li"),v(20,"Suche nach Afroshops in der N\xE4he"),y(),m(21,"li"),v(22,"Detailinformationen zu Gesch\xE4ften"),y(),m(23,"li"),v(24,"Bewertungen und Kommentare"),y(),m(25,"li"),v(26,"Kartenansicht und Navigation"),y()()(),m(27,"section")(28,"h2"),v(29,"\xA7 3 Nutzerkonto"),y(),m(30,"h3"),v(31,"3.1 Registrierung"),y(),m(32,"p"),v(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),y(),m(34,"h3"),v(35,"3.2 Passwort und Sicherheit"),y(),m(36,"p"),v(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),y()(),m(38,"section")(39,"h2"),v(40,"\xA7 4 Nutzungsregeln"),y(),m(41,"p"),v(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),y(),m(43,"ul")(44,"li"),v(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),y(),m(46,"li"),v(47,"Keine beleidigenden oder diskriminierenden Inhalte"),y(),m(48,"li"),v(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),y(),m(50,"li"),v(51,"Die Rechte Dritter zu respektieren"),y()()(),m(52,"section")(53,"h2"),v(54,"\xA7 5 Inhalte und Urheberrecht"),y(),m(55,"h3"),v(56,"5.1 Nutzergenerierte Inhalte"),y(),m(57,"p"),v(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),y(),m(59,"h3"),v(60,"5.2 Verantwortung"),y(),m(61,"p"),v(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),y()(),m(63,"section")(64,"h2"),v(65,"\xA7 6 Haftung"),y(),m(66,"p"),v(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),y()(),m(68,"section")(69,"h2"),v(70,"\xA7 7 \xC4nderungen der AGB"),y(),m(71,"p"),v(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),y()(),m(73,"section")(74,"h2"),v(75,"\xA7 8 K\xFCndigung"),y(),m(76,"p"),v(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),y()(),m(78,"section")(79,"h2"),v(80,"\xA7 9 Anwendbares Recht"),y(),m(81,"p"),v(82," Es gilt deutsches Recht. Gerichtsstand ist [Ihre Stadt], Deutschland. "),y()(),m(83,"section")(84,"h2"),v(85,"\xA7 10 Kontakt"),y(),m(86,"p"),v(87," AfroConnect"),pt(88,"br"),v(89," [Ihre Adresse]"),pt(90,"br"),v(91," Deutschland"),pt(92,"br"),v(93," E-Mail: legal@afroconnect.de "),y()()()()),t&2&&(N(5),Ve("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var $w=class n{constructor(e){this.firebaseService=e}getExistingAfroshops(){return S(this,null,function*(){return new Promise(e=>{this.firebaseService.getAllAfroshops().subscribe({next:t=>e(t),error:t=>{console.warn("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es existantes:",t),e([])}})})})}cleanDuplicates(){return S(this,null,function*(){try{console.log("\u{1F9F9} Nettoyage des doublons en cours...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops trouv\xE9s en base`);let t=new Map;e.forEach(s=>{let o=`${s.name}|${s.address}`;t.has(o)||t.set(o,[]),t.get(o).push(s)});let r=0,i=0;for(let[s,o]of t)if(o.length>1){console.log(`\u{1F50D} Doublon trouv\xE9: ${o[0].name} (${o.length} copies)`),i++;for(let a=1;a<o.length;a++)try{yield this.firebaseService.deleteAfroshop(o[a].id),r++,console.log(`\u{1F5D1}\uFE0F Supprim\xE9: ${o[a].name} (ID: ${o[a].id})`),yield this.delay(100)}catch(c){console.error(`\u274C Erreur suppression ${o[a].id}:`,c)}}else i++;return console.log(`\u2705 Nettoyage termin\xE9: ${r} supprim\xE9s, ${i} conserv\xE9s`),{removed:r,kept:i}}catch(e){throw console.error("\u274C Erreur lors du nettoyage:",e),e}})}afroshopsData=[{name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches westafrikanisches Restaurant mit traditionellen Gerichten aus Ghana und Nigeria. Spezialit\xE4ten: Jollof Rice, Fufu, Kelewele.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Fr: 12:00-22:00, Sa: 14:00-23:00, So: 14:00-21:00",website:"https://mama-afrika-berlin.de"},{name:"Ethiopian Queen Restaurant",type:"restaurant",address:"Kreuzbergstra\xDFe 45, 10965 Berlin",coordinates:{lat:52.4995,lng:13.3883},phone:"+49 30 23456789",description:"Traditionelle \xE4thiopische K\xFCche in gem\xFCtlicher Atmosph\xE4re. Injera, Doro Wat und vegetarische Optionen.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:"https://ethiopian-queen.de"},{name:"Afro Hair Salon Berlin",type:"coiffeur",address:"Hermannstra\xDFe 89, 12049 Berlin",coordinates:{lat:52.4755,lng:13.4324},phone:"+49 30 34567890",description:"Spezialist f\xFCr afroamerikanische Haarpflege. Braids, Weaves, Natural Hair Care und chemische Behandlungen.",rating:4.7,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Afrika Market Berlin",type:"epicerie",address:"Turmstra\xDFe 234, 10551 Berlin",coordinates:{lat:52.5252,lng:13.3415},phone:"+49 30 45678901",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Berlin. Yams, Kochbananen, Palm\xF6l, Gew\xFCrze und Fleischspezialit\xE4ten.",rating:4.2,image:"https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Sa: 08:00-20:00, So: 10:00-18:00",website:"https://afrika-market-berlin.de"},{name:"Senegal Restaurant Hamburg",type:"restaurant",address:"Reeperbahn 456, 20359 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 12345678",description:"Authentische senegalesische K\xFCche. Thieboudienne, Yassa Poulet und frische Meeresfr\xFCchte.",rating:4.4,image:"https://images.unsplash.com/photo-1547592180-85f173990554?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mo-Fr: 18:00-24:00, Sa-So: 17:00-01:00",website:"https://senegal-restaurant-hh.de"},{name:"Afro Style Hamburg",type:"coiffeur",address:"Steindamm 123, 20099 Hamburg",coordinates:{lat:53.553,lng:10.0061},phone:"+49 40 23456789",description:"Moderner Afro-Friseursalon mit internationalen Stylisten. Cuts, Farben und Extensions.",rating:4.6,image:"https://images.unsplash.com/photo-1521490878783-35eb2c52f3b7?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-20:00, Sa: 09:00-18:00",website:""},{name:"Kamerun Eck M\xFCnchen",type:"restaurant",address:"Maximilianstra\xDFe 78, 80539 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 12345678",description:"Kamerunische Spezialit\xE4ten in bayerischer Atmosph\xE4re. Ndol\xE9, Poulet DG und Kochbananen.",rating:4.1,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Kamerunische",priceLevel:2,hours:"Mo-Sa: 11:30-22:00",website:""},{name:"Nigerianisches Restaurant K\xF6ln",type:"restaurant",address:"Z\xFClpicher Stra\xDFe 234, 50937 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 12345678",description:"Authentische nigerianische K\xFCche. Jollof Rice, Suya, Pounded Yam und Egusi Soup.",rating:4.3,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Nigerianische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa-So: 14:00-22:00",website:"https://nigerian-restaurant-koeln.de"},{name:"Eritrea Restaurant Frankfurt",type:"restaurant",address:"Berger Stra\xDFe 145, 60316 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 12345678",description:"Eritreische und \xE4thiopische K\xFCche. Injera, Zigni und traditionelle Kaffeezeremonie.",rating:4.5,image:"https://images.unsplash.com/photo-1554978991-33ef7f31d658?w=800&h=600&fit=crop",cuisine:"Eritreische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:""},{name:"Afrika Laden Stuttgart",type:"epicerie",address:"K\xF6nigstra\xDFe 89, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 12345678",description:"Afrikanische Lebensmittel und Gew\xFCrze. Maniok, Kochbananen, Palm\xF6l und traditionelle Snacks.",rating:4,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Marokkanisches Restaurant D\xFCsseldorf",type:"restaurant",address:"Immermannstra\xDFe 23, 40210 D\xFCsseldorf",coordinates:{lat:51.2277,lng:6.7735},phone:"+49 211 12345678",description:"Nordafrikanische K\xFCche. Tajine, Couscous, Pastilla und marokkanische Tees.",rating:4.2,image:"https://images.unsplash.com/photo-1539353130027-9532750e7146?w=800&h=600&fit=crop",cuisine:"Marokkanische",priceLevel:3,hours:"Mo-So: 17:00-24:00",website:"https://marokko-restaurant-dus.de"},{name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 12345678",description:"Westafrikanische und zentralafrikanische K\xFCche in modernem Ambiente.",rating:4.1,image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Sa: 12:00-22:00",website:""},{name:"African Beauty Salon Essen",type:"coiffeur",address:"Kettwiger Stra\xDFe 67, 45127 Essen",coordinates:{lat:51.4556,lng:7.0116},phone:"+49 201 12345678",description:"Kompletter Service f\xFCr afrikanisches Haar. Relaxer, Braids, Weaves und Naturhaar-Styling.",rating:4.4,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-18:00, Sa: 08:00-16:00",website:""},{name:"\xC4thiopisches Restaurant Leipzig",type:"restaurant",address:"Karl-Liebknecht-Stra\xDFe 123, 04107 Leipzig",coordinates:{lat:51.3397,lng:12.3731},phone:"+49 341 12345678",description:"Traditionelle \xE4thiopische Gerichte in famili\xE4rer Atmosph\xE4re.",rating:4.3,image:"https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-Sa: 17:00-22:00",website:""},{name:"Afrika Shop Bremen",type:"epicerie",address:"Osterstra\xDFe 234, 28199 Bremen",coordinates:{lat:53.0793,lng:8.8017},phone:"+49 421 12345678",description:"Afrikanische Spezialit\xE4ten und Kosmetik. Shea-Butter, schwarze Seife und exotische Fr\xFCchte.",rating:4.1,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-17:00",website:""},{name:"Sudanesisches Restaurant Dresden",type:"restaurant",address:"Prager Stra\xDFe 89, 01069 Dresden",coordinates:{lat:51.0504,lng:13.7373},phone:"+49 351 12345678",description:"Sudanesische und ostafriikanische K\xFCche. Ful Medames, Kisra und Bamya.",rating:4,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"Sudanesische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa: 14:00-22:00",website:""},{name:"African Fashion Hannover",type:"vetement",address:"Georgstra\xDFe 156, 30159 Hannover",coordinates:{lat:52.3759,lng:9.732},phone:"+49 511 12345678",description:"Afrikanische Mode und Accessoires. Dashiki, Kente-Stoffe und handgemachter Schmuck.",rating:4.2,image:"https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-18:00",website:"https://african-fashion-hannover.de"},{name:"Westafrica N\xFCrnberg",type:"restaurant",address:"K\xF6nigstra\xDFe 234, 90402 N\xFCrnberg",coordinates:{lat:49.4521,lng:11.0767},phone:"+49 911 12345678",description:"Ghanaische und ivorische K\xFCche. Banku, Atti\xE9k\xE9 und Palm Nut Soup.",rating:4.4,image:"https://images.unsplash.com/photo-1551218808-94e220e084d2?w=800&h=600&fit=crop",cuisine:"Ghanaische",priceLevel:2,hours:"Mo-Sa: 11:00-22:00",website:""}];kleinestadtAfroshops=[{name:"Afrika Imbiss Soest",type:"restaurant",address:"Thom\xE4stra\xDFe 12, 59494 Soest",coordinates:{lat:51.5671,lng:8.1067},phone:"+49 2921 123456",description:"Kleiner gem\xFCtlicher Imbiss mit westafrikanischen Spezialit\xE4ten. Hausgemachtes Jollof Rice.",rating:4.2,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:1,hours:"Mo-Fr: 11:00-20:00, Sa: 12:00-21:00",website:""},{name:"Afro Hair Werl",type:"coiffeur",address:"Hammer Stra\xDFe 34, 59457 Werl",coordinates:{lat:51.5531,lng:7.9119},phone:"+49 2922 234567",description:"Spezialisiert auf afrikanische Frisuren in ruhiger Kleinstadt-Atmosph\xE4re.",rating:4.5,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-18:00, Sa: 09:00-15:00",website:""}];seedDatabase(){return S(this,null,function*(){try{console.log("\u{1F331} D\xE9but du peuplement de la base de donn\xE9es...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops d\xE9j\xE0 en base`);let r=[...this.afroshopsData,...this.kleinestadtAfroshops].filter(o=>!e.some(a=>a.name===o.name&&a.address===o.address));if(console.log(`\u2728 ${r.length} nouveaux Afroshops \xE0 ajouter`),r.length===0)throw new Error("\u26A0\uFE0F Tous les Afroshops sont d\xE9j\xE0 en base ! Aucun nouvel ajout n\xE9cessaire.");let i=0,s=0;for(let o of r)try{let a=fe($({},o),{city:this.extractCityFromAddress(o.address),verified:!0,createdBy:"system",createdByName:"System Import",views:Math.floor(Math.random()*100)+10,likes:Math.floor(Math.random()*20)+5});yield this.firebaseService.addAfroshop(a),i++,console.log(`\u2705 ${o.name} ajout\xE9 avec succ\xE8s`),yield this.delay(100)}catch(a){s++,console.error(`\u274C Erreur lors de l'ajout de ${o.name}:`,a)}console.log(`\u{1F389} Import termin\xE9: ${i} ajout\xE9s, ${s} erreurs`)}catch(e){console.error("\u{1F4A5} Erreur g\xE9n\xE9rale lors du seeding:",e)}})}extractCityFromAddress(e){let t=e.split(",");if(t.length>=2){let r=t[t.length-1].trim(),i=r.match(/\d+\s+(.+)/);return i?i[1].toLowerCase():r.toLowerCase()}return""}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||n)(ue(ir))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var fl={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"},adminConfig:{adminEmails:["youssoufdiamaldiallo@gmail.com"]}};var Hw=class n{constructor(){}isAdminUser(e){return!e||!e.email?!1:fl.production?(console.warn("\u{1F6AB} Admin check disabled in production - use server-side verification"),!1):(fl.adminConfig?.adminEmails||[]).includes(e.email)}getSecurityMessage(){return fl.production?"Administration d\xE9sactiv\xE9e en production pour des raisons de s\xE9curit\xE9. Contactez l'administrateur syst\xE8me.":"Mode d\xE9veloppement - Acc\xE8s admin disponible."}shouldHideAdminInterface(){return fl.production}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function hce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F680} Datenbank mit Afroshops f\xFCllen"),y())}function fce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Import l\xE4uft..."),y())}function pce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F9F9} Doublons entfernen"),y())}function gce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Nettoyage l\xE4uft..."),y())}function mce(n,e){n&1&&(m(0,"div",22),pt(1,"div",23),m(2,"p"),v(3,"Afroshops werden hinzugef\xFCgt... Bitte warten."),y()())}function yce(n,e){n&1&&(m(0,"div",22),pt(1,"div",23),m(2,"p"),v(3,"Doublons werden entfernt... Bitte warten."),y()())}function _ce(n,e){if(n&1&&(m(0,"div",24),v(1),y()),n&2){let t=G(2);Qo(t.seedingMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.seedingMessage," ")}}function vce(n,e){if(n&1&&(m(0,"div",24),v(1),y()),n&2){let t=G(2);Qo(t.cleaningMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.cleaningMessage," ")}}function wce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F504} Actualiser"),y())}function Ece(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Chargement..."),y())}function Ice(n,e){if(n&1){let t=ze();m(0,"div",29)(1,"div",30)(2,"div",31)(3,"h4"),v(4),y(),m(5,"p",32),v(6),y(),m(7,"p",33),v(8),y()(),m(9,"div",34)(10,"span",35),v(11),y()()(),m(12,"div",36)(13,"button",37),de("click",function(){let i=se(t).$implicit,s=G(3);return oe(s.editAfroshop(i))}),v(14," \u270F\uFE0F Bearbeiten "),y(),m(15,"button",38),de("click",function(){let i=se(t).$implicit,s=G(3);return oe(s.confirmDelete(i))}),v(16," \u{1F5D1}\uFE0F L\xF6schen "),y()()()}if(n&2){let t=e.$implicit,r=G(3);N(4),yt(t.name),N(2),yt(r.getGermanBusinessType(t.type)),N(2),Ve("\u{1F4CD} ",t.address,""),N(3),Ve("ID: ",t.id,""),N(4),z("disabled",r.isDeleting)}}function bce(n,e){if(n&1){let t=ze();m(0,"div",25)(1,"div",26)(2,"h3"),v(3),y(),m(4,"button",27),de("click",function(){se(t);let i=G(2);return oe(i.loadAfroshops())}),ae(5,wce,2,0,"span",10)(6,Ece,2,0,"span",10),y()(),ae(7,Ice,17,5,"div",28),y()}if(n&2){let t=G(2);N(3),Ve("\u{1F4CB} Liste des Afroshops (",t.afroshops.length,")"),N(),z("disabled",t.isLoading),N(),z("ngIf",!t.isLoading),N(),z("ngIf",t.isLoading),N(),z("ngForOf",t.afroshops)("ngForTrackBy",t.trackByAfroshop)}}function Cce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F4CB} Afroshops anzeigen"),y())}function Tce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Wird geladen..."),y())}function Sce(n,e){if(n&1){let t=ze();m(0,"div",39)(1,"button",40),de("click",function(){se(t);let i=G(2);return oe(i.loadAfroshops())}),ae(2,Cce,2,0,"span",10)(3,Tce,2,0,"span",10),y()()}if(n&2){let t=G(2);N(),z("disabled",t.isLoading),N(),z("ngIf",!t.isLoading),N(),z("ngIf",t.isLoading)}}function Ace(n,e){if(n&1&&(m(0,"div",24),v(1),y()),n&2){let t=G(2);Qo(t.deleteMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.deleteMessage," ")}}function Dce(n,e){if(n&1){let t=ze();m(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2"),v(4,"\u{1F331} Peuplement de la base de donn\xE9es"),y(),m(5,"p"),v(6,"Ajouter des Afroshops dans toute l'Allemagne pour donner vie \xE0 l'application"),y()(),m(7,"div",7)(8,"h3"),v(9,"\u{1F4CA} Donn\xE9es incluses:"),y(),m(10,"ul")(11,"li"),v(12,"\u{1F3D9}\uFE0F "),m(13,"strong"),v(14,"Grandes villes:"),y(),v(15," Berlin, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf, Dortmund, Essen"),y(),m(16,"li"),v(17,"\u{1F3D8}\uFE0F "),m(18,"strong"),v(19,"Villes moyennes:"),y(),v(20," Leipzig, Bremen, Dresden, Hannover, N\xFCrnberg"),y(),m(21,"li"),v(22,"\u{1F3E1} "),m(23,"strong"),v(24,"Petites villes & Kreise:"),y(),v(25," Soest, Werl (Kreis Soest) et autres"),y(),m(26,"li"),v(27,"\u{1F37D}\uFE0F "),m(28,"strong"),v(29,"Types:"),y(),v(30," Restaurants, Friseure, Lebensmittelgesch\xE4fte, Mode, Services"),y(),m(31,"li"),v(32,"\u{1F30D} "),m(33,"strong"),v(34,"Cuisines:"),y(),v(35," Westafrikanische, \xC4thiopische, Senegalesische, Kamerunische, Nigerianische, etc."),y()()(),m(36,"div",8)(37,"button",9),de("click",function(){se(t);let i=G();return oe(i.seedDatabase())}),ae(38,hce,2,0,"span",10)(39,fce,2,0,"span",10),y(),m(40,"button",11),de("click",function(){se(t);let i=G();return oe(i.cleanDuplicates())}),ae(41,pce,2,0,"span",10)(42,gce,2,0,"span",10),y(),ae(43,mce,4,0,"div",12)(44,yce,4,0,"div",12),y(),ae(45,_ce,2,3,"div",13)(46,vce,2,3,"div",13),y(),m(47,"div",14)(48,"div",6)(49,"h2"),v(50,"\u{1F5D1}\uFE0F Gestion des Afroshops"),y(),m(51,"p"),v(52,"Supprimer individuellement des Afroshops de la base de donn\xE9es"),y()(),ae(53,bce,8,6,"div",15)(54,Sce,4,3,"div",16)(55,Ace,2,3,"div",13),y(),m(56,"div",17)(57,"div",6)(58,"h2"),v(59,"\u{1F527} Diagnostic Technique"),y(),m(60,"p"),v(61,"Outils de diagnostic pour r\xE9soudre les probl\xE8mes de g\xE9ocodage et coordonn\xE9es"),y()(),m(62,"div",8)(63,"a",18),v(64," \u{1F5FA}\uFE0F Diagnostic du G\xE9ocodage "),y(),m(65,"p",19),v(66," Testez le syst\xE8me de coordonn\xE9es, auditez les Afroshops existants et corrigez les probl\xE8mes de g\xE9olocalisation. "),y()()(),m(67,"div",20)(68,"button",21),de("click",function(){se(t);let i=G();return oe(i.goToGallery())}),v(69," \u{1F3EA} Voir la galerie "),y()()()}if(n&2){let t=G();N(37),z("disabled",t.isSeeding||t.isCleaning),N(),z("ngIf",!t.isSeeding),N(),z("ngIf",t.isSeeding),N(),z("disabled",t.isCleaning||t.isSeeding),N(),z("ngIf",!t.isCleaning),N(),z("ngIf",t.isCleaning),N(),z("ngIf",t.isSeeding),N(),z("ngIf",t.isCleaning),N(),z("ngIf",t.seedingMessage),N(),z("ngIf",t.cleaningMessage),N(7),z("ngIf",t.afroshops.length>0),N(),z("ngIf",t.afroshops.length===0),N(),z("ngIf",t.deleteMessage)}}function Mce(n,e){n&1&&(m(0,"div",41)(1,"h2"),v(2,"\u{1F510} Authentification requise"),y(),m(3,"p"),v(4,"Vous devez \xEAtre connect\xE9 pour acc\xE9der aux outils d'administration."),y()())}var qw=class n{constructor(e,t,r,i,s,o){this.dataSeedingService=e;this.authService=t;this.firebaseAfroshopService=r;this.translationService=i;this.adminSecurity=s;this.router=o;this.authService.user$.subscribe(a=>{if(!a){this.router.navigate(["/login"]);return}this.checkAdminAccess(a)})}isSeeding=!1;isCleaning=!1;seedingMessage="";cleaningMessage="";isAuthenticated=!1;afroshops=[];isLoading=!1;isDeleting=!1;deleteMessage="";checkAdminAccess(e){this.isAuthenticated=this.adminSecurity.isAdminUser(e),this.isAuthenticated||(console.warn("\u{1F6AB} Acc\xE8s admin refus\xE9:",this.adminSecurity.getSecurityMessage()),this.router.navigate(["/gallery"]))}seedDatabase(){return S(this,null,function*(){if(!this.isAuthenticated){this.seedingMessage="\u274C Vous devez \xEAtre connect\xE9 pour effectuer cette action";return}if(!(this.isSeeding||!confirm(`\u{1F6A8} ACHTUNG!

Diese Aktion wird etwa 50+ neue Afroshops in die Datenbank hinzuf\xFCgen.

\u{1F50D} Bereits vorhandene Gesch\xE4fte werden automatisch \xFCbersprungen.

M\xF6chten Sie fortfahren?`))){this.isSeeding=!0,this.seedingMessage="\u{1F331} Import l\xE4uft... Dies kann einige Minuten dauern.";try{yield this.dataSeedingService.seedDatabase(),this.seedingMessage="\u2705 Datenbank erfolgreich mit neuen Afroshops gef\xFCllt!"}catch(t){console.error("Fehler beim Seeding:",t),this.seedingMessage="\u274C Fehler beim Import. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isSeeding=!1}}})}editAfroshop(e){this.router.navigate(["/edit-afroshop",e.id])}goToGallery(){this.router.navigate(["/gallery"])}cleanDuplicates(){return S(this,null,function*(){if(!this.isAuthenticated){this.cleaningMessage="\u274C Sie m\xFCssen angemeldet sein, um diese Aktion durchzuf\xFChren";return}if(!(this.isCleaning||!confirm(`\u{1F9F9} DOUBLONS NETTOYAGE

Diese Aktion wird alle doppelten Afroshops l\xF6schen.

\u26A0\uFE0F Nur das erste Exemplar jedes Gesch\xE4fts wird beibehalten.

M\xF6chten Sie fortfahren?`))){this.isCleaning=!0,this.cleaningMessage="\u{1F9F9} Doublons werden entfernt... Bitte warten.";try{let t=yield this.dataSeedingService.cleanDuplicates();this.cleaningMessage=`\u2705 Nettoyage abgeschlossen! ${t.removed} Doublons entfernt, ${t.kept} Afroshops beibehalten.`}catch(t){console.error("Fehler beim Nettoyage:",t),this.cleaningMessage="\u274C Fehler beim Nettoyage. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isCleaning=!1}}})}loadAfroshops(){return S(this,null,function*(){this.isLoading=!0,this.deleteMessage="";try{this.firebaseAfroshopService.getAllAfroshops().subscribe({next:e=>{this.afroshops=e.sort((t,r)=>t.name.localeCompare(r.name)),this.isLoading=!1},error:e=>{console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}catch(e){console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}confirmDelete(e){return S(this,null,function*(){confirm(`\u{1F5D1}\uFE0F Afroshop l\xF6schen

Name: ${e.name}
Typ: ${this.getGermanBusinessType(e.type)}
Adresse: ${e.address}

\u26A0\uFE0F Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden!

M\xF6chten Sie "${e.name}" wirklich l\xF6schen?`)&&(yield this.deleteAfroshop(e))})}deleteAfroshop(e){return S(this,null,function*(){this.isDeleting=!0,this.deleteMessage=`\u{1F5D1}\uFE0F "${e.name}" wird gel\xF6scht...`;try{yield this.firebaseAfroshopService.deleteAfroshop(e.id.toString()),this.afroshops=this.afroshops.filter(t=>t.id!==e.id),this.deleteMessage=`\u2705 "${e.name}" wurde erfolgreich gel\xF6scht.`,setTimeout(()=>{this.deleteMessage=""},3e3)}catch(t){console.error("Erreur lors de la suppression:",t),this.deleteMessage=`\u274C Fehler beim L\xF6schen von "${e.name}". Details in der Konsole.`}finally{this.isDeleting=!1}})}getGermanBusinessType(e){return this.translationService.getBusinessTypeName(e)}formatDate(e){if(!e)return"Datum unbekannt";try{let t;return e.toDate?t=e.toDate():e.seconds?t=new Date(e.seconds*1e3):t=new Date(e),t.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Erreur formatage date:",t),"Datum fehler"}}trackByAfroshop(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(te($w),te(Jt),te(ir),te(hs),te(Hw),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-admin"]],decls:8,vars:2,consts:[[1,"admin-container"],[1,"admin-header"],["class","admin-panel",4,"ngIf"],["class","auth-required",4,"ngIf"],[1,"admin-panel"],[1,"seeding-section"],[1,"section-header"],[1,"data-info"],[1,"action-section"],[1,"seed-btn",3,"click","disabled"],[4,"ngIf"],[1,"clean-btn",3,"click","disabled"],["class","progress-indicator",4,"ngIf"],["class","message",3,"class",4,"ngIf"],[1,"management-section"],["class","afroshops-list",4,"ngIf"],["class","load-button",4,"ngIf"],[1,"diagnostic-section"],["routerLink","/geocoding-diagnostic",1,"diagnostic-btn"],[1,"diagnostic-desc"],[1,"navigation-section"],[1,"nav-btn",3,"click"],[1,"progress-indicator"],[1,"spinner"],[1,"message"],[1,"afroshops-list"],[1,"list-header"],[1,"refresh-btn",3,"click","disabled"],["class","afroshop-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"afroshop-item"],[1,"afroshop-info"],[1,"basic-info"],[1,"type"],[1,"location"],[1,"meta-info"],[1,"id"],[1,"actions"],["title","Afroshop bearbeiten",1,"edit-btn",3,"click"],["title","Afroshop l\xF6schen",1,"delete-btn",3,"click","disabled"],[1,"load-button"],[1,"load-btn",3,"click","disabled"],[1,"auth-required"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h1"),v(3,"\u{1F527} AfroConnect - Administration"),y(),m(4,"p"),v(5,"Outils pour g\xE9rer la base de donn\xE9es d'Afroshops"),y()(),ae(6,Dce,70,13,"div",2)(7,Mce,5,0,"div",3),y()),t&2&&(N(6),z("ngIf",r.isAuthenticated),N(),z("ngIf",!r.isAuthenticated))},dependencies:[zt,tr,ln,vr,rr],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.admin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;font-size:2.5rem;margin-bottom:.5rem}.admin-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem}.admin-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.seeding-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;font-size:1.8rem;margin-bottom:.5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.data-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:12px;padding:1.5rem;margin-bottom:2rem}.data-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:1rem}.data-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.action-section[_ngcontent-%COMP%]{text-align:center;margin:2rem 0;display:flex;flex-direction:column;gap:1rem}.seed-btn[_ngcontent-%COMP%], .clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px #27ae604d;min-width:300px;margin:0 auto}.clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);box-shadow:0 6px 20px #e74c3c4d}.seed-btn[_ngcontent-%COMP%]:hover:not(:disabled), .clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 12px 30px #27ae6066}.clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 12px 30px #e74c3c66}.seed-btn[_ngcontent-%COMP%]:disabled, .clean-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a}.progress-indicator[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #27ae60;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-top:1.5rem;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.diagnostic-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:#f1f8ff;border:1px solid #d1ecf1;border-radius:12px}.diagnostic-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#06c;font-size:1.6rem}.diagnostic-btn[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;padding:.8rem 1.5rem;border-radius:10px;text-decoration:none;font-weight:500;transition:all .3s ease;border:none;cursor:pointer}.diagnostic-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #17a2b84d;text-decoration:none;color:#fff}.diagnostic-desc[_ngcontent-%COMP%]{margin-top:.8rem;color:#6c757d;font-size:.9rem;line-height:1.4}.navigation-section[_ngcontent-%COMP%]{text-align:center;padding-top:2rem;border-top:1px solid #e9ecef}.nav-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:10px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block}.nav-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.auth-required[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:#fff3cd;border:1px solid #ffeaa7;border-radius:12px;color:#856404}.auth-required[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#856404;margin-bottom:1rem}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.admin-panel[_ngcontent-%COMP%]{padding:1.5rem}.seed-btn[_ngcontent-%COMP%]{min-width:auto;width:100%;padding:1rem}.data-info[_ngcontent-%COMP%]{padding:1rem}}.management-section[_ngcontent-%COMP%]{margin-top:3rem;padding-top:2rem;border-top:2px solid #e9ecef}.management-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:1.8rem}.afroshops-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #dee2e6;overflow:hidden;margin-top:1rem}.list-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin:0;font-size:1.2rem}.refresh-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #17a2b84d}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.afroshop-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f1f3f4;transition:background-color .3s ease}.afroshop-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.afroshop-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.afroshop-info[_ngcontent-%COMP%]{flex:1}.basic-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 .25rem;font-size:1.1rem}.basic-info[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0 0 .25rem;font-weight:600}.basic-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:#495057;font-size:.85rem;margin:0}.meta-info[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.meta-info[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{background:#e9ecef;color:#495057;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-family:monospace}.actions[_ngcontent-%COMP%]{margin-left:1rem;display:flex;gap:.5rem;align-items:center}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d;background:linear-gradient(135deg,#218838,#1e7e34)}.delete-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d;background:linear-gradient(135deg,#c82333,#a71e2a)}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.load-button[_ngcontent-%COMP%]{text-align:center;padding:2rem}.load-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;border:none;padding:1rem 2rem;border-radius:8px;cursor:pointer;font-size:1rem;transition:all .3s ease}.load-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.load-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.management-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem}.list-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.afroshop-item[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.actions[_ngcontent-%COMP%]{margin-left:0;width:100%}.delete-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.meta-info[_ngcontent-%COMP%]{justify-content:center}}"]})};function Rce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F5FA}\uFE0F Tester"),y())}function Pce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Test..."),y())}function xce(n,e){if(n&1&&(m(0,"div",21)(1,"h4"),v(2,"\u2705 G\xE9ocodage R\xE9ussi"),y(),m(3,"p")(4,"strong"),v(5,"Coordonn\xE9es:"),y(),v(6),y(),m(7,"p")(8,"strong"),v(9,"Adresse format\xE9e:"),y(),v(10),y(),m(11,"p")(12,"strong"),v(13,"Pr\xE9cision:"),y(),v(14),y()()),n&2){let t=G(3);N(6),mr(" ",t.testResult.lat,", ",t.testResult.lng,""),N(4),Ve(" ",t.testResult.formatted_address,""),N(4),Ve(" ",t.testResult.accuracy,"")}}function kce(n,e){n&1&&(m(0,"div",22)(1,"h4"),v(2,"\u274C G\xE9ocodage \xC9chou\xE9"),y(),m(3,"p"),v(4,"L'adresse n'a pas pu \xEAtre g\xE9ocod\xE9e."),y(),m(5,"p")(6,"em"),v(7,"V\xE9rifiez que l'adresse contient une ville allemande connue."),y()()())}function Oce(n,e){if(n&1&&(m(0,"div",18),ae(1,xce,15,4,"div",19)(2,kce,8,0,"div",20),y()),n&2){let t=G(2);N(),z("ngIf",t.testResult.success),N(),z("ngIf",!t.testResult.success)}}function Nce(n,e){n&1&&(m(0,"span"),v(1,"\u{1F50D} Auditer tous les Afroshops"),y())}function Lce(n,e){n&1&&(m(0,"span"),v(1,"\u23F3 Audit en cours..."),y())}function Fce(n,e){if(n&1){let t=ze();m(0,"div",31)(1,"strong"),v(2),y(),pt(3,"br"),m(4,"small"),v(5),y(),pt(6,"br"),m(7,"span",32),v(8),y(),m(9,"button",33),de("click",function(){let i=se(t).$implicit,s=G(4);return oe(s.regeocodeAfroshop(i))}),v(10," \u{1F504} Re-g\xE9ocoder "),y()()}if(n&2){let t=e.$implicit,r=G(4);N(2),yt(t.name),N(3),yt(t.address),N(3),mr("Coordonn\xE9es: ",t.coordinates.lat,", ",t.coordinates.lng,""),N(),z("disabled",r.isRegeocoding)}}function Vce(n,e){if(n&1&&(m(0,"div",29)(1,"h5"),v(2,"\u26A0\uFE0F Afroshops avec Coordonn\xE9es Invalides"),y(),ae(3,Fce,11,5,"div",30),y()),n&2){let t=G(3);N(3),z("ngForOf",t.invalidAfroshops)}}function Uce(n,e){if(n&1&&(m(0,"div",23)(1,"h4"),v(2,"R\xE9sultats de l'Audit"),y(),m(3,"div",24)(4,"div",25)(5,"span",26),v(6),y(),m(7,"span",27),v(8,"Coordonn\xE9es Valides"),y()(),m(9,"div",25)(10,"span",26),v(11),y(),m(12,"span",27),v(13,"Coordonn\xE9es Invalides"),y()()(),ae(14,Vce,4,1,"div",28),y()),n&2){let t=G(2);N(6),yt(t.validCoordinates),N(5),yt(t.invalidCoordinates),N(3),z("ngIf",t.invalidAfroshops.length>0)}}function Bce(n,e){if(n&1){let t=ze();m(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),v(4,"\u{1F527} Diagnostic du G\xE9ocodage"),y(),m(5,"a",5),v(6," \u2190 Zur\xFCck zur Admin-Seite "),y()()(),m(7,"div",6)(8,"h3"),v(9,"Test d'Adresse"),y(),m(10,"div",7)(11,"input",8),Se("ngModelChange",function(i){se(t);let s=G();return Ae(s.testAddress,i)||(s.testAddress=i),oe(i)}),y(),m(12,"button",9),de("click",function(){se(t);let i=G();return oe(i.testSingleAddress())}),ae(13,Rce,2,0,"span",10)(14,Pce,2,0,"span",10),y()(),ae(15,Oce,3,2,"div",11),y(),m(16,"div",6)(17,"h3"),v(18,"Audit des Coordonn\xE9es"),y(),m(19,"button",12),de("click",function(){se(t);let i=G();return oe(i.auditAfroshops())}),ae(20,Nce,2,0,"span",10)(21,Lce,2,0,"span",10),y(),ae(22,Uce,15,3,"div",13),y(),m(23,"div",6)(24,"h3"),v(25,"Configuration Syst\xE8me"),y(),m(26,"div",14)(27,"div",15)(28,"strong"),v(29,"Mode de g\xE9ocodage:"),y(),m(30,"span",16),v(31),y()(),m(32,"div",15)(33,"strong"),v(34,"Villes support\xE9es:"),y(),m(35,"span"),v(36),y()(),m(37,"div",15)(38,"strong"),v(39,"Estimation par code postal:"),y(),m(40,"span",17),v(41,"\u2705 Activ\xE9e"),y()()()()()}if(n&2){let t=G();N(11),Te("ngModel",t.testAddress),N(),z("disabled",t.isGeocoding),N(),z("ngIf",!t.isGeocoding),N(),z("ngIf",t.isGeocoding),N(),z("ngIf",t.testResult),N(4),z("disabled",t.isAuditing),N(),z("ngIf",!t.isAuditing),N(),z("ngIf",t.isAuditing),N(),z("ngIf",t.auditResults.length>0),N(9),yt(t.geocodingMode),N(5),Ve("",t.supportedCitiesCount," villes")}}function jce(n,e){n&1&&(m(0,"div",34),v(1," \u{1F512} Acc\xE8s r\xE9serv\xE9 aux administrateurs "),y())}var Gw=class n{constructor(e,t,r){this.geocodingService=e;this.firebaseService=t;this.authService=r;this.authService.user$.subscribe(i=>{this.isAdmin=i?.email==="youssoufdiamaldiallo@gmail.com"})}isAdmin=!1;testAddress="";isGeocoding=!1;isAuditing=!1;isRegeocoding=!1;testResult=null;auditResults=[];invalidAfroshops=[];get validCoordinates(){return this.auditResults.filter(e=>this.geocodingService.isValidCoordinates(e.coordinates.lat,e.coordinates.lng)).length}get invalidCoordinates(){return this.auditResults.length-this.validCoordinates}get geocodingMode(){return"Fallback (Villes pr\xE9d\xE9finies)"}get supportedCitiesCount(){return 50}testSingleAddress(){return S(this,null,function*(){if(this.testAddress.trim()){this.isGeocoding=!0,this.testResult=null;try{this.geocodingService.geocodeAddress(this.testAddress).subscribe({next:e=>{this.isGeocoding=!1,e?this.testResult={success:!0,lat:e.lat,lng:e.lng,formatted_address:e.formatted_address,accuracy:e.accuracy}:this.testResult={success:!1}},error:e=>{this.isGeocoding=!1,this.testResult={success:!1,error:e.message},console.error("Erreur test g\xE9ocodage:",e)}})}catch(e){this.isGeocoding=!1,this.testResult={success:!1},console.error("Erreur test g\xE9ocodage:",e)}}})}auditAfroshops(){return S(this,null,function*(){this.isAuditing=!0,this.auditResults=[],this.invalidAfroshops=[];try{this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.auditResults=e,this.invalidAfroshops=e.filter(t=>!this.geocodingService.isValidCoordinates(t.coordinates.lat,t.coordinates.lng)),console.log(`Audit termin\xE9: ${this.validCoordinates}/${this.auditResults.length} coordonn\xE9es valides`),this.isAuditing=!1},error:e=>{console.error("Erreur audit:",e),this.isAuditing=!1}})}catch(e){console.error("Erreur audit:",e),this.isAuditing=!1}})}regeocodeAfroshop(e){return S(this,null,function*(){this.isRegeocoding=!0;try{this.geocodingService.geocodeAddress(e.address).subscribe({next:t=>S(this,null,function*(){if(t){let r={coordinates:{lat:t.lat,lng:t.lng}};yield this.firebaseService.updateAfroshop(e.id,r);let i=this.invalidAfroshops.findIndex(s=>s.id===e.id);i>=0&&(this.invalidAfroshops[i].coordinates=r.coordinates),console.log(`\u2705 Re-g\xE9ocodage r\xE9ussi pour ${e.name}`)}else console.warn(`\u274C Re-g\xE9ocodage \xE9chou\xE9 pour ${e.name}`);this.isRegeocoding=!1}),error:t=>{console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}catch(t){console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}static \u0275fac=function(t){return new(t||n)(te(ch),te(ir),te(Jt))};static \u0275cmp=wt({type:n,selectors:[["app-geocoding-diagnostic"]],decls:2,vars:2,consts:[["class","diagnostic-container",4,"ngIf"],["class","no-access",4,"ngIf"],[1,"diagnostic-container"],[1,"diagnostic-header"],[1,"header-content"],["routerLink","/admin",1,"back-to-admin-btn"],[1,"test-section"],[1,"input-group"],["type","text","placeholder","Saisissez une adresse allemande...",1,"test-input",3,"ngModelChange","ngModel"],[1,"test-btn",3,"click","disabled"],[4,"ngIf"],["class","result-box",4,"ngIf"],[1,"audit-btn",3,"click","disabled"],["class","audit-results",4,"ngIf"],[1,"config-info"],[1,"config-item"],[1,"mode-indicator"],[1,"feature-enabled"],[1,"result-box"],["class","success-result",4,"ngIf"],["class","error-result",4,"ngIf"],[1,"success-result"],[1,"error-result"],[1,"audit-results"],[1,"stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],["class","invalid-list",4,"ngIf"],[1,"invalid-list"],["class","invalid-item",4,"ngFor","ngForOf"],[1,"invalid-item"],[1,"coordinates"],[1,"regeocode-btn",3,"click","disabled"],[1,"no-access"]],template:function(t,r){t&1&&ae(0,Bce,42,11,"div",0)(1,jce,2,0,"div",1),t&2&&(z("ngIf",r.isAdmin),N(),z("ngIf",!r.isAdmin))},dependencies:[zt,tr,ln,us,Br,ls,vi,vr,rr],styles:[".diagnostic-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.diagnostic-header[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e9ecef}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.back-to-admin-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;padding:8px 16px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:5px}.back-to-admin-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6268,#495057);transform:translateY(-1px);text-decoration:none;color:#fff}.test-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.test-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;border-bottom:2px solid #007bff;padding-bottom:8px}.input-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px}.test-input[_ngcontent-%COMP%]{flex:1;padding:10px;border:2px solid #ddd;border-radius:4px;font-size:14px}.test-btn[_ngcontent-%COMP%], .audit-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:600}.test-btn[_ngcontent-%COMP%]:hover, .audit-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.test-btn[_ngcontent-%COMP%]:disabled, .audit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.result-box[_ngcontent-%COMP%]{margin-top:15px;padding:15px;border-radius:6px}.success-result[_ngcontent-%COMP%]{background:#d4edda;border:1px solid #c3e6cb;color:#155724}.error-result[_ngcontent-%COMP%]{background:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.stats[_ngcontent-%COMP%]{display:flex;gap:20px;margin:15px 0}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#fff;border-radius:6px;box-shadow:0 1px 3px #0000001a}.stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#007bff}.stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:5px}.invalid-item[_ngcontent-%COMP%]{background:#fff;padding:15px;margin:10px 0;border-radius:6px;border-left:4px solid #ffc107}.coordinates[_ngcontent-%COMP%]{color:#666;font-family:monospace}.regeocode-btn[_ngcontent-%COMP%]{margin-top:8px;padding:5px 10px;background:#28a745;color:#fff;border:none;border-radius:3px;font-size:12px;cursor:pointer}.config-info[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px}.config-item[_ngcontent-%COMP%]{margin:10px 0;display:flex;justify-content:space-between}.mode-indicator[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:14px}.feature-enabled[_ngcontent-%COMP%]{color:#28a745}.no-access[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:18px}"]})};var pl=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Pn(1),me(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(ue(Jt),ue(It))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var U5=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:Fw},{path:"afroshop/:id",component:Vw},{path:"add-afroshop",component:gg,canActivate:[pl]},{path:"edit-afroshop/:id",component:gg,canActivate:[pl]},{path:"admin",component:qw,canActivate:[pl]},{path:"geocoding-diagnostic",component:Gw,canActivate:[pl]},{path:"login",component:Uw},{path:"register",component:Bw},{path:"privacy",component:jw},{path:"terms",component:zw},{path:"**",redirectTo:"/gallery"}];var B5={providers:[DN({eventCoalescing:!0}),FC(U5),cC(),fL(hL()),jF(()=>zF(fl.firebase)),Cj(()=>Mj()),OV(()=>FV()),r5(()=>s5())]};function zce(n,e){if(n&1){let t=ze();m(0,"div",18)(1,"span",19),v(2),y(),m(3,"button",20),de("click",function(){se(t);let i=G();return oe(i.logout())}),v(4," \u{1F6AA} Abmelden "),y()()}if(n&2){let t=e.ngIf;N(2),Ve("Hallo, ",t.displayName||t.email,"!")}}function $ce(n,e){n&1&&(m(0,"div",21)(1,"a",22),v(2,"\u{1F510} Anmelden"),y(),m(3,"a",23),v(4,"\u{1F4DD} Registrieren"),y()())}var Ww=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return S(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-root"]],decls:32,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["href","mailto:contact@afroconnect.de",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1"),v(6,"\u{1F30D} AfroConnect"),y()(),m(7,"p",5),v(8,"Verbinde dich mit der afrikanischen Community in Deutschland"),y()(),m(9,"div",6),ae(10,zce,5,1,"div",7),ni(11,"async"),ae(12,$ce,5,0,"div",8),ni(13,"async"),y()()(),m(14,"main",9),pt(15,"router-outlet"),y(),m(16,"footer",10)(17,"div",11)(18,"div",12)(19,"p"),v(20,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),y()(),m(21,"div",13)(22,"a",14),v(23,"Datenschutz"),y(),m(24,"span",15),v(25,"|"),y(),m(26,"a",16),v(27,"AGB"),y(),m(28,"span",15),v(29,"|"),y(),m(30,"a",17),v(31,"Kontakt"),y()()()()()),t&2&&(N(10),z("ngIf",ri(11,2,r.user$)),N(2),z("ngIf",!ri(13,4,r.user$)))},dependencies:[zt,ln,lf,xf,vr,rr],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};iC(Ww,B5).catch(n=>console.error(n));
