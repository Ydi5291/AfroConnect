var t4=Object.defineProperty,n4=Object.defineProperties;var r4=Object.getOwnPropertyDescriptors;var hg=Object.getOwnPropertySymbols,i4=Object.getPrototypeOf,kM=Object.prototype.hasOwnProperty,NM=Object.prototype.propertyIsEnumerable,s4=Reflect.get;var xM=(n,e,t)=>e in n?t4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||={})kM.call(e,t)&&xM(n,t,e[t]);if(hg)for(var t of hg(e))NM.call(e,t)&&xM(n,t,e[t]);return n},oe=(n,e)=>n4(n,r4(e));var rh=(n,e)=>{var t={};for(var r in n)kM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&hg)for(var r of hg(n))e.indexOf(r)<0&&NM.call(n,r)&&(t[r]=n[r]);return t};var gi=(n,e,t)=>s4(i4(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(d){i(d)}},o=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function vE(n,e){return Object.is(n,e)}var Jt=null,fg=!1,wE=1,_r=Symbol("SIGNAL");function Fe(n){let e=Jt;return Jt=n,e}function EE(){return Jt}var sh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oh(n){if(fg)throw new Error("");if(Jt===null)return;Jt.consumerOnSignalRead(n);let e=Jt.nextProducerIndex++;if(yg(Jt),e<Jt.producerNode.length&&Jt.producerNode[e]!==n&&ih(Jt)){let t=Jt.producerNode[e];mg(t,Jt.producerIndexOfThis[e])}Jt.producerNode[e]!==n&&(Jt.producerNode[e]=n,Jt.producerIndexOfThis[e]=ih(Jt)?LM(n,Jt,e):0),Jt.producerLastReadVersion[e]=n.version}function OM(){wE++}function IE(n){if(!(ih(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wE)){if(!n.producerMustRecompute(n)&&!SE(n)){_E(n);return}n.producerRecomputeValue(n),_E(n)}}function bE(n){if(n.liveConsumerNode===void 0)return;let e=fg;fg=!0;try{for(let t of n.liveConsumerNode)t.dirty||o4(t)}finally{fg=e}}function TE(){return Jt?.consumerAllowSignalWrites!==!1}function o4(n){n.dirty=!0,bE(n),n.consumerMarkedDirty?.(n)}function _E(n){n.dirty=!1,n.lastCleanEpoch=wE}function gg(n){return n&&(n.nextProducerIndex=0),Fe(n)}function CE(n,e){if(Fe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ih(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)mg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function SE(n){yg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(IE(t),r!==t.version))return!0}return!1}function DE(n){if(yg(n),ih(n))for(let e=0;e<n.producerNode.length;e++)mg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function LM(n,e,t){if(FM(n),n.liveConsumerNode.length===0&&VM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=LM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function mg(n,e){if(FM(n),n.liveConsumerNode.length===1&&VM(n))for(let r=0;r<n.producerNode.length;r++)mg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yg(i),i.producerIndexOfThis[r]=e}}function ih(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function FM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function VM(n){return n.producerNode!==void 0}function AE(n,e){let t=Object.create(a4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(IE(t),oh(t),t.value===pg)throw t.error;return t.value};return r[_r]=t,r}var mE=Symbol("UNSET"),yE=Symbol("COMPUTING"),pg=Symbol("ERRORED"),a4=oe(z({},sh),{value:mE,dirty:!0,error:null,equal:vE,kind:"computed",producerMustRecompute(n){return n.value===mE||n.value===yE},producerRecomputeValue(n){if(n.value===yE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=yE;let t=gg(n),r,i=!1;try{r=n.computation(),Fe(null),i=e!==mE&&e!==pg&&r!==pg&&n.equal(e,r)}catch(s){r=pg,n.error=s}finally{CE(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function c4(){throw new Error}var UM=c4;function BM(n){UM(n)}function RE(n){UM=n}var u4=null;function ME(n,e){let t=Object.create(_g);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(oh(t),t.value);return r[_r]=t,r}function ah(n,e){TE()||BM(n),n.equal(n.value,e)||(n.value=e,l4(n))}function PE(n,e){TE()||BM(n),ah(n,e(n.value))}var _g=oe(z({},sh),{equal:vE,value:void 0,kind:"signal"});function l4(n){n.version++,OM(),bE(n),u4?.()}function xE(n){let e=Fe(null);try{return n()}finally{Fe(e)}}var kE;function ch(){return kE}function es(n){let e=kE;return kE=n,e}var vg=Symbol("NotFound");function Te(n){return typeof n=="function"}function fu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wg=fu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uh(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var kt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof wg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{jM(s)}catch(o){e=e??[],o instanceof wg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uh(t,e)}remove(e){let{_finalizers:t}=this;t&&uh(t,e),e instanceof n&&e._removeParent(this)}};kt.EMPTY=(()=>{let n=new kt;return n.closed=!0,n})();var NE=kt.EMPTY;function Eg(n){return n instanceof kt||n&&"closed"in n&&Te(n.remove)&&Te(n.add)&&Te(n.unsubscribe)}function jM(n){Te(n)?n():n.unsubscribe()}var Or={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pu={setTimeout(n,e,...t){let{delegate:r}=pu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ig(n){pu.setTimeout(()=>{let{onUnhandledError:e}=Or;if(e)e(n);else throw n})}function lh(){}var zM=OE("C",void 0,void 0);function $M(n){return OE("E",void 0,n)}function qM(n){return OE("N",n,void 0)}function OE(n,e,t){return{kind:n,value:e,error:t}}var Ra=null;function gu(n){if(Or.useDeprecatedSynchronousErrorHandling){let e=!Ra;if(e&&(Ra={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ra;if(Ra=null,t)throw r}}else n()}function HM(n){Or.useDeprecatedSynchronousErrorHandling&&Ra&&(Ra.errorThrown=!0,Ra.error=n)}var Ma=class extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Eg(e)&&e.add(this)):this.destination=m4}static create(e,t,r){return new mu(e,t,r)}next(e){this.isStopped?FE(qM(e),this):this._next(e)}error(e){this.isStopped?FE($M(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?FE(zM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},p4=Function.prototype.bind;function LE(n,e){return p4.call(n,e)}var VE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bg(r)}else bg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bg(t)}}},mu=class extends Ma{constructor(e,t,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Or.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&LE(e.next,s),error:e.error&&LE(e.error,s),complete:e.complete&&LE(e.complete,s)}):i=e}this.destination=new VE(i)}};function bg(n){Or.useDeprecatedSynchronousErrorHandling?HM(n):Ig(n)}function g4(n){throw n}function FE(n,e){let{onStoppedNotification:t}=Or;t&&pu.setTimeout(()=>t(n,e))}var m4={closed:!0,next:lh,error:g4,complete:lh};var yu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ir(n){return n}function Tg(...n){return UE(n)}function UE(n){return n.length===0?ir:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=_4(t)?t:new mu(t,r,i);return gu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GM(r),new r((i,s)=>{let o=new mu({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yu](){return this}pipe(...t){return UE(t)(this)}toPromise(t){return t=GM(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function GM(n){var e;return(e=n??Or.Promise)!==null&&e!==void 0?e:Promise}function y4(n){return n&&Te(n.next)&&Te(n.error)&&Te(n.complete)}function _4(n){return n&&n instanceof Ma||y4(n)&&Eg(n)}function BE(n){return Te(n?.lift)}function $e(n){return e=>{if(BE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,e,t,r,i){return new jE(n,e,t,r,i)}var jE=class extends Ma{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _u(){return $e((n,e)=>{let t=null;n._refCount++;let r=Ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var vu=class extends Me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,BE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;let t=this.getSubject();e.add(this.source.subscribe(Ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return _u()(this)}};var WM=fu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new WM}next(t){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?NE:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,uh(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Me;return t.source=this,t}}return n.create=(e,t)=>new Cg(e,t),n})(),Cg=class extends Ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:NE}};var Nt=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Un=new Me(n=>n.complete());function KM(n){return n&&Te(n.schedule)}function QM(n){return n[n.length-1]}function Sg(n){return Te(QM(n))?n.pop():void 0}function ho(n){return KM(QM(n))?n.pop():void 0}function Dg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function JM(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function YM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pa(n){return this instanceof Pa?(this.v=n,this):new Pa(n)}function ZM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(k){return Promise.resolve(k).then(I,g)}}function a(I,k){r[I]&&(i[I]=function(F){return new Promise(function(N,q){s.push([I,F,N,q])>1||c(I,F)})},k&&(i[I]=k(i[I])))}function c(I,k){try{d(r[I](k))}catch(F){E(s[0][3],F)}}function d(I){I.value instanceof Pa?Promise.resolve(I.value.v).then(h,g):E(s[0][2],I)}function h(I){c("next",I)}function g(I){c("throw",I)}function E(I,k){I(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function XM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YM=="function"?YM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Ag=n=>n&&typeof n.length=="number"&&typeof n!="function";function Rg(n){return Te(n?.then)}function Mg(n){return Te(n[yu])}function Pg(n){return Symbol.asyncIterator&&Te(n?.[Symbol.asyncIterator])}function xg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function v4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kg=v4();function Ng(n){return Te(n?.[kg])}function Og(n){return ZM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Pa(t.read());if(i)return yield Pa(void 0);yield yield Pa(r)}}finally{t.releaseLock()}})}function Lg(n){return Te(n?.getReader)}function Ut(n){if(n instanceof Me)return n;if(n!=null){if(Mg(n))return w4(n);if(Ag(n))return E4(n);if(Rg(n))return I4(n);if(Pg(n))return eP(n);if(Ng(n))return b4(n);if(Lg(n))return T4(n)}throw xg(n)}function w4(n){return new Me(e=>{let t=n[yu]();if(Te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function E4(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function I4(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ig)})}function b4(n){return new Me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function eP(n){return new Me(e=>{C4(n,e).catch(t=>e.error(t))})}function T4(n){return eP(Og(n))}function C4(n,e){var t,r,i,s;return JM(this,void 0,void 0,function*(){try{for(t=XM(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Fg(n,e=0){return $e((t,r)=>{t.subscribe(Ve(r,i=>Bn(r,n,()=>r.next(i),e),()=>Bn(r,n,()=>r.complete(),e),i=>Bn(r,n,()=>r.error(i),e)))})}function Vg(n,e=0){return $e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function tP(n,e){return Ut(n).pipe(Vg(e),Fg(e))}function nP(n,e){return Ut(n).pipe(Vg(e),Fg(e))}function rP(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function iP(n,e){return new Me(t=>{let r;return Bn(t,e,()=>{r=n[kg](),Bn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function Ug(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{Bn(t,e,()=>{let r=n[Symbol.asyncIterator]();Bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function sP(n,e){return Ug(Og(n),e)}function oP(n,e){if(n!=null){if(Mg(n))return tP(n,e);if(Ag(n))return rP(n,e);if(Rg(n))return nP(n,e);if(Pg(n))return Ug(n,e);if(Ng(n))return iP(n,e);if(Lg(n))return sP(n,e)}throw xg(n)}function ot(n,e){return e?oP(n,e):Ut(n)}function fe(...n){let e=ho(n);return ot(n,e)}function wu(n,e){let t=Te(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function zE(n){return!!n&&(n instanceof Me||Te(n.lift)&&Te(n.subscribe))}var ts=fu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function we(n,e){return $e((t,r)=>{let i=0;t.subscribe(Ve(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:S4}=Array;function D4(n,e){return S4(e)?n(...e):n(e)}function Bg(n){return we(e=>D4(n,e))}var{isArray:A4}=Array,{getPrototypeOf:R4,prototype:M4,keys:P4}=Object;function jg(n){if(n.length===1){let e=n[0];if(A4(e))return{args:e,keys:null};if(x4(e)){let t=P4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function x4(n){return n&&typeof n=="object"&&R4(n)===M4}function zg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xa(...n){let e=ho(n),t=Sg(n),{args:r,keys:i}=jg(n);if(r.length===0)return ot([],e);let s=new Me(k4(r,e,i?o=>zg(i,o):ir));return t?s.pipe(Bg(t)):s}function k4(n,e,t=ir){return r=>{aP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)aP(e,()=>{let d=ot(n[c],e),h=!1;d.subscribe(Ve(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function aP(n,e,t){n?Bn(t,n,e):e()}function cP(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,E=()=>{g&&!c.length&&!d&&e.complete()},I=F=>d<r?k(F):c.push(F),k=F=>{s&&e.next(F),d++;let N=!1;Ut(t(F,h++)).subscribe(Ve(e,q=>{i?.(q),s?I(q):e.next(q)},()=>{N=!0},void 0,()=>{if(N)try{for(d--;c.length&&d<r;){let q=c.shift();o?Bn(e,o,()=>k(q)):k(q)}E()}catch(q){e.error(q)}}))};return n.subscribe(Ve(e,I,()=>{g=!0,E()})),()=>{a?.()}}function Ot(n,e,t=1/0){return Te(e)?Ot((r,i)=>we((s,o)=>e(r,s,i,o))(Ut(n(r,i))),t):(typeof e=="number"&&(t=e),$e((r,i)=>cP(r,i,n,t)))}function Eu(n=1/0){return Ot(ir,n)}function uP(){return Eu(1)}function Iu(...n){return uP()(ot(n,ho(n)))}function $g(n){return new Me(e=>{Ut(n()).subscribe(e)})}function $E(...n){let e=Sg(n),{args:t,keys:r}=jg(n),i=new Me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;Ut(t[h]).subscribe(Ve(s,E=>{g||(g=!0,d--),a[h]=E},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?zg(r,a):a),s.complete())}))}});return e?i.pipe(Bg(e)):i}function jn(n,e){return $e((t,r)=>{let i=0;t.subscribe(Ve(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ns(n){return $e((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ve(t,void 0,void 0,o=>{s=Ut(n(o,ns(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function lP(n,e,t,r,i){return(s,o)=>{let a=t,c=e,d=0;s.subscribe(Ve(o,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function fo(n,e){return Te(e)?Ot(n,e,1):Ot(n,1)}function po(n){return $e((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vn(n){return n<=0?()=>Un:$e((e,t)=>{let r=0;e.subscribe(Ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function qg(n=N4){return $e((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function N4(){return new ts}function dh(n){return $e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function rs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,s)=>n(i,s,r)):ir,vn(1),t?po(e):qg(()=>new ts))}function bu(n){return n<=0?()=>Un:$e((e,t)=>{let r=[];e.subscribe(Ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,s)=>n(i,s,r)):ir,bu(1),t?po(e):qg(()=>new ts))}function Hg(n,e){return $e(lP(n,e,arguments.length>=2,!0))}function Gg(...n){let e=ho(n);return $e((t,r)=>{(e?Iu(n,t,e):Iu(n,t)).subscribe(r)})}function zn(n,e){return $e((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ve(r,c=>{i?.unsubscribe();let d=0,h=s++;Ut(n(c,h)).subscribe(i=Ve(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tu(n){return $e((e,t)=>{Ut(n).subscribe(Ve(t,()=>t.complete(),lh)),!t.closed&&e.subscribe(t)})}function Zt(n,e,t){let r=Te(n)||e||t?{next:n,error:e,complete:t}:n;return r?$e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ve(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ir}var QE={JSACTION:"jsaction"},YE={JSACTION:"__jsaction",OWNER:"__owner"},pP={};function O4(n){return n[YE.JSACTION]}function dP(n,e){n[YE.JSACTION]=e}function L4(n){return pP[n]}function F4(n,e){pP[n]=e}var de={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},V4=[de.MOUSEENTER,de.MOUSELEAVE,"pointerenter","pointerleave"],zle=[de.CLICK,de.DBLCLICK,de.FOCUSIN,de.FOCUSOUT,de.KEYDOWN,de.KEYUP,de.KEYPRESS,de.MOUSEOVER,de.MOUSEOUT,de.SUBMIT,de.TOUCHSTART,de.TOUCHEND,de.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],U4=[de.FOCUS,de.BLUR,de.ERROR,de.LOAD,de.TOGGLE],JE=n=>U4.indexOf(n)>=0;function B4(n){return n===de.MOUSEENTER?de.MOUSEOVER:n===de.MOUSELEAVE?de.MOUSEOUT:n===de.POINTERENTER?de.POINTEROVER:n===de.POINTERLEAVE?de.POINTEROUT:n}function j4(n,e,t,r){let i=!1;JE(e)&&(i=!0);let s=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,s),{eventType:e,handler:t,capture:i,passive:r}}function z4(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function $4(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var hP=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function q4(n){return n.which===2||n.which==null&&n.button===4}function H4(n){return hP&&n.metaKey||!hP&&n.ctrlKey||q4(n)||n.shiftKey}function G4(n,e,t){let r=n.relatedTarget;return(n.type===de.MOUSEOVER&&e===de.MOUSEENTER||n.type===de.MOUSEOUT&&e===de.MOUSELEAVE||n.type===de.POINTEROVER&&e===de.POINTERENTER||n.type===de.POINTEROUT&&e===de.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function W4(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,s=n[i];typeof s!="function"&&(t[i]=s)}return n.type===de.MOUSEOVER?t.type=de.MOUSEENTER:n.type===de.MOUSEOUT?t.type=de.MOUSELEAVE:n.type===de.POINTEROVER?t.type=de.POINTERENTER:t.type=de.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var K4=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Yg=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){K4&&(this.element.style.cursor="pointer"),this.handlerInfos.push(j4(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)z4(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Q4={EVENT_ACTION_SEPARATOR:":"};function go(n){return n.eventType}function ZE(n,e){n.eventType=e}function Kg(n){return n.event}function gP(n,e){n.event=e}function mP(n){return n.targetElement}function yP(n,e){n.targetElement=e}function _P(n){return n.eic}function Y4(n,e){n.eic=e}function J4(n){return n.timeStamp}function Z4(n,e){n.timeStamp=e}function Qg(n){return n.eia}function vP(n,e,t){n.eia=[e,t]}function HE(n){n.eia=void 0}function Wg(n){return n[1]}function X4(n){return n.eirp}function wP(n,e){n.eirp=e}function EP(n){return n.eir}function IP(n,e){n.eir=e}function bP(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function e3(n,e,t,r,i,s,o,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:s,eirp:o,eiack:a}}var GE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return go(this.eventInfo)}setEventType(e){ZE(this.eventInfo,e)}getEvent(){return Kg(this.eventInfo)}setEvent(e){gP(this.eventInfo,e)}getTargetElement(){return mP(this.eventInfo)}setTargetElement(e){yP(this.eventInfo,e)}getContainer(){return _P(this.eventInfo)}setContainer(e){Y4(this.eventInfo,e)}getTimestamp(){return J4(this.eventInfo)}setTimestamp(e){Z4(this.eventInfo,e)}getAction(){let e=Qg(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){HE(this.eventInfo);return}vP(this.eventInfo,e.name,e.element)}getIsReplay(){return X4(this.eventInfo)}setIsReplay(e){wP(this.eventInfo,e)}getResolved(){return EP(this.eventInfo)}setResolved(e){IP(this.eventInfo,e)}clone(){return new n(bP(this.eventInfo))}},t3={},n3=/\s*;\s*/,r3=de.CLICK,WE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&go(e)===de.CLICK&&H4(Kg(e))?ZE(e,de.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){EP(e)||(this.populateAction(e,mP(e)),IP(e,!0))}resolveParentAction(e){let t=Qg(e),r=t&&Wg(t);HE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==_P(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Qg(e));)r=this.getParentNode(r);let i=Qg(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(go(e)===de.MOUSEENTER||go(e)===de.MOUSELEAVE||go(e)===de.POINTERENTER||go(e)===de.POINTERLEAVE)))if(G4(Kg(e),go(e),Wg(i))){let s=W4(Kg(e),Wg(i));gP(e,s),yP(e,Wg(i))}else HE(e)}getParentNode(e){let t=e[YE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[go(t)];i!==void 0&&vP(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=O4(e);if(!t){let r=e.getAttribute(QE.JSACTION);if(!r)t=t3,dP(e,t);else{if(t=L4(r),!t){t={};let i=r.split(n3);for(let s=0;s<i.length;s++){let o=i[s];if(!o)continue;let a=o.indexOf(Q4.EVENT_ACTION_SEPARATOR),c=a!==-1,d=c?o.substr(0,a).trim():r3,h=c?o.substr(a+1).trim():o;t[d]=h}F4(r,t)}dP(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},TP=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(TP||{}),KE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new GE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&i3(r.element,t)&&$4(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function i3(n,e){return n.tagName==="A"&&(e.getEventType()===de.CLICK||e.getEventType()===de.CLICKMOD)}var CP=Symbol.for("propagationStopped"),XE={REPLAY:101};var s3="`preventDefault` called during event replay.";var o3="`composedPath` called during event replay.",Jg=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new WE({clickModSupport:t}),this.dispatcher=new KE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&u3(e),a3(e);e.getAction();){if(l3(e),JE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),c3(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function a3(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[CP]=!0,t()};ka(e,"stopPropagation",r),ka(e,"stopImmediatePropagation",r)}function c3(n){return!!n.getEvent()[CP]}function u3(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);ka(e,"target",t),ka(e,"eventPhase",XE.REPLAY),ka(e,"preventDefault",()=>{throw r(),new Error(s3+"")}),ka(e,"composedPath",()=>{throw new Error(o3+"")})}function l3(n){let e=n.getEvent(),t=n.getAction()?.element;t&&ka(e,"currentTarget",t,{configurable:!0})}function ka(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function SP(n,e){n.ecrd(t=>{e.dispatch(t)},TP.I_AM_THE_JSACTION_FRAMEWORK)}function d3(n){return n?.q??[]}function h3(n){n&&(fP(n.c,n.et,n.h),fP(n.c,n.etc,n.h,!0))}function fP(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var f3=!1,DP=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=f3;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let s=e3(t,r,r.target,i,Date.now());this.handleEventInfo(s)}handleEventInfo(t){if(!this.dispatcher){wP(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&V4.indexOf(t)>=0)return;let s=(a,c,d)=>{this.handleEvent(a,c,d)};this.eventHandlers[t]=s;let o=B4(r||t);if(o!==t){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(t),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>c=>{s(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),h3(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],s=this.getEventTypesForBrowserEventType(i.eventType);for(let o=0;o<s.length;o++){let a=bP(i);ZE(a,s[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function AP(n,e=window){return d3(e._ejsas?.[n])}function eI(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var Sx="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ne=class extends Error{code;constructor(e,t){super(jm(e,t)),this.code=e}};function p3(n){return`NG0${Math.abs(n)}`}function jm(n,e){return`${p3(n)}${e?": "+e:""}`}var Dx=Symbol("InputSignalNode#UNSET"),g3=oe(z({},_g),{transformFn:void 0,applyValueToInputSignal(n,e){ah(n,e)}});function Ax(n,e){let t=Object.create(g3);t.value=n,t.transformFn=e?.transform;function r(){if(oh(t),t.value===Dx){let i=null;throw new ne(-950,i)}return t.value}return r[_r]=t,r}function Ih(n){return{toString:n}.toString()}var Zg="__parameters__";function m3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Rx(n,e,t){return Ih(()=>{let r=m3(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(Zg)?c[Zg]:Object.defineProperty(c,Zg,{value:[]})[Zg];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var lm=globalThis;function lt(n){for(let e in n)if(n[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function y3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function _I(n,e){return n?e?`${n} ${e}`:n:e||""}var _3=lt({__forward_ref__:lt});function ls(n){return n.__forward_ref__=ls,n.toString=function(){return Hn(this())},n}function Pn(n){return Mx(n)?n():n}function Mx(n){return typeof n=="function"&&n.hasOwnProperty(_3)&&n.__forward_ref__===ls}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zr(n){return{providers:n.providers||[],imports:n.imports||[]}}function zm(n){return RP(n,xx)||RP(n,kx)}function Px(n){return zm(n)!==null}function RP(n,e){return n.hasOwnProperty(e)?n[e]:null}function v3(n){let e=n&&(n[xx]||n[kx]);return e||null}function MP(n){return n&&(n.hasOwnProperty(PP)||n.hasOwnProperty(w3))?n[PP]:null}var xx=lt({\u0275prov:lt}),PP=lt({\u0275inj:lt}),kx=lt({ngInjectableDef:lt}),w3=lt({ngInjectorDef:lt}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Nx(n){return n&&!!n.\u0275providers}var E3=lt({\u0275cmp:lt}),I3=lt({\u0275dir:lt}),b3=lt({\u0275pipe:lt}),T3=lt({\u0275mod:lt}),dm=lt({\u0275fac:lt}),gh=lt({__NG_ELEMENT_ID__:lt}),xP=lt({__NG_ENV_ID__:lt});function Nu(n){return typeof n=="string"?n:n==null?"":String(n)}function C3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nu(n)}function Ox(n,e){throw new ne(-200,n)}function c0(n,e){throw new ne(-201,!1)}var Re=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Re||{}),vI;function Lx(){return vI}function $n(n){let e=vI;return vI=n,e}function Fx(n,e,t){let r=zm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Re.Optional)return null;if(e!==void 0)return e;c0(n,"Injector")}var S3={},Na=S3,wI="__NG_DI_FLAG__",hm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?vg:Na,r)}},fm="ngTempTokenPath",D3="ngTokenPath",A3=/\n/gm,R3="\u0275",kP="__source";function M3(n,e=Re.Default){if(ch()===void 0)throw new ne(-203,!1);if(ch()===null)return Fx(n,void 0,e);{let t=ch(),r;return t instanceof hm?r=t.injector:r=t,r.get(n,e&Re.Optional?null:void 0,e)}}function ce(n,e=Re.Default){return(Lx()||M3)(Pn(n),e)}function j(n,e=Re.Default){return ce(n,$m(e))}function $m(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function EI(n){let e=[];for(let t=0;t<n.length;t++){let r=Pn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,s=Re.Default;for(let o=0;o<r.length;o++){let a=r[o],c=P3(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ce(i,s))}else e.push(ce(r))}return e}function Vx(n,e){return n[wI]=e,n.prototype[wI]=e,n}function P3(n){return n[wI]}function x3(n,e,t,r){let i=n[fm];throw e[kP]&&i.unshift(e[kP]),n.message=k3(`
`+n.message,i,t,r),n[D3]=i,n[fm]=null,n}function k3(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==R3?n.slice(2):n;let i=Hn(e);if(Array.isArray(e))i=e.map(Hn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Hn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(A3,`
  `)}`}var en=Vx(Rx("Optional"),8);var N3=Vx(Rx("SkipSelf"),4);function La(n,e){let t=n.hasOwnProperty(dm);return t?n[dm]:null}function u0(n,e){n.forEach(t=>Array.isArray(t)?u0(t,e):e(t))}function Ux(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function pm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function O3(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function L3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function l0(n,e,t){let r=bh(n,e);return r>=0?n[r|1]=t:(r=~r,L3(n,r,e,t)),r}function tI(n,e){let t=bh(n,e);if(t>=0)return n[t|1]}function bh(n,e){return F3(n,e,1)}function F3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Fa={},qn=[],yo=new Q(""),Bx=new Q("",-1),jx=new Q(""),gm=class{get(e,t=Na){if(t===Na){let r=new Error(`NullInjectorError: No provider for ${Hn(e)}!`);throw r.name="NullInjectorError",r}return t}};function zx(n,e){let t=n[T3]||null;if(!t&&e===!0)throw new Error(`Type ${Hn(n)} does not have '\u0275mod' property.`);return t}function _o(n){return n[E3]||null}function $x(n){return n[I3]||null}function qx(n){return n[b3]||null}function wn(n){return{\u0275providers:n}}function V3(...n){return{\u0275providers:d0(!0,n),\u0275fromNgModule:!0}}function d0(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return u0(e,o=>{let a=o;II(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Hx(i,s),t}function Hx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];h0(i,s=>{e(s,r)})}}function II(n,e,t,r){if(n=Pn(n),!n)return!1;let i=null,s=MP(n),o=!s&&_o(n);if(!s&&!o){let c=n.ngModule;if(s=MP(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)II(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{u0(s.imports,h=>{II(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&Hx(d,e)}if(!a){let d=La(i)||(()=>new i);e({provide:i,useFactory:d,deps:qn},i),e({provide:jx,useValue:i,multi:!0},i),e({provide:yo,useValue:()=>ce(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;h0(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function h0(n,e){for(let t of n)Nx(t)&&(t=t.\u0275providers),Array.isArray(t)?h0(t,e):e(t)}var U3=lt({provide:String,useValue:lt});function Gx(n){return n!==null&&typeof n=="object"&&U3 in n}function B3(n){return!!(n&&n.useExisting)}function j3(n){return!!(n&&n.useFactory)}function Ou(n){return typeof n=="function"}function z3(n){return!!n.useClass}var qm=new Q(""),rm={},NP={},nI;function f0(){return nI===void 0&&(nI=new gm),nI}var xn=class{},mh=class extends xn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,TI(e,o=>this.processProvider(o)),this.records.set(Bx,Cu(void 0,this)),i.has("environment")&&this.records.set(xn,Cu(void 0,this));let s=this.records.get(qm);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(jx,qn,Re.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?vg:Na,r)}destroy(){fh(this),this._destroyed=!0;let e=Fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Fe(e)}}onDestroy(e){return fh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fh(this);let t=es(this),r=$n(void 0),i;try{return e()}finally{es(t),$n(r)}}get(e,t=Na,r=Re.Default){if(fh(this),e.hasOwnProperty(xP))return e[xP](this);r=$m(r);let i,s=es(this),o=$n(void 0);try{if(!(r&Re.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=W3(e)&&zm(e);d&&this.injectableDefInScope(d)?c=Cu(bI(e),rm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Re.Self?f0():this.parent;return t=r&Re.Optional&&t===Na?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[fm]=a[fm]||[]).unshift(Hn(e)),s)throw a;return x3(a,e,"R3InjectorError",this.source)}else throw a}finally{$n(o),es(s)}}resolveInjectorInitializers(){let e=Fe(null),t=es(this),r=$n(void 0),i;try{let s=this.get(yo,qn,Re.Self);for(let o of s)o()}finally{es(t),$n(r),Fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Hn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pn(e);let t=Ou(e)?e:Pn(e&&e.provide),r=q3(e);if(!Ou(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Cu(void 0,rm,!0),i.factory=()=>EI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Fe(null);try{return t.value===NP?Ox(Hn(e)):t.value===rm&&(t.value=NP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&G3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Fe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bI(n){let e=zm(n),t=e!==null?e.factory:La(n);if(t!==null)return t;if(n instanceof Q)throw new ne(204,!1);if(n instanceof Function)return $3(n);throw new ne(204,!1)}function $3(n){if(n.length>0)throw new ne(204,!1);let t=v3(n);return t!==null?()=>t.factory(n):()=>new n}function q3(n){if(Gx(n))return Cu(void 0,n.useValue);{let e=Wx(n);return Cu(e,rm)}}function Wx(n,e,t){let r;if(Ou(n)){let i=Pn(n);return La(i)||bI(i)}else if(Gx(n))r=()=>Pn(n.useValue);else if(j3(n))r=()=>n.useFactory(...EI(n.deps||[]));else if(B3(n))r=(i,s)=>ce(Pn(n.useExisting),s!==void 0&&s&Re.Optional?Re.Optional:void 0);else{let i=Pn(n&&(n.useClass||n.provide));if(H3(n))r=()=>new i(...EI(n.deps));else return La(i)||bI(i)}return r}function fh(n){if(n.destroyed)throw new ne(205,!1)}function Cu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function H3(n){return!!n.deps}function G3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function W3(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function TI(n,e){for(let t of n)Array.isArray(t)?TI(t,e):t&&Nx(t)?TI(t.\u0275providers,e):e(t)}function cr(n,e){let t;n instanceof mh?(fh(n),t=n):t=new hm(n);let r,i=es(t),s=$n(void 0);try{return e()}finally{es(i),$n(s)}}function Kx(){return Lx()!==void 0||ch()!=null}function Qx(n){if(!Kx())throw new ne(-203,!1)}function K3(n){return typeof n=="function"}var ar=0,Ee=1,Ce=2,an=3,Vr=4,Qn=5,Br=6,mm=7,Gn=8,yi=9,ss=10,at=11,yh=12,OP=13,zu=14,Wn=15,Lu=16,Su=17,Fu=18,Hm=19,Yx=20,mo=21,rI=22,ym=23,vr=24,Mu=25,St=26,Jx=1,os=6,as=7,_m=8,vm=9,or=10;function Ur(n){return Array.isArray(n)&&typeof n[Jx]=="object"}function Ii(n){return Array.isArray(n)&&n[Jx]===!0}function Zx(n){return(n.flags&4)!==0}function $a(n){return n.componentOffset>-1}function p0(n){return(n.flags&1)===1}function _i(n){return!!n.template}function _h(n){return(n[Ce]&512)!==0}function qa(n){return(n[Ce]&256)===256}var CI=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Xx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ur=(()=>{let n=()=>ek;return n.ngInherit=!0,n})();function ek(n){return n.type.prototype.ngOnChanges&&(n.setInput=Y3),Q3}function Q3(){let n=nk(this),e=n?.current;if(e){let t=n.previous;if(t===Fa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Y3(n,e,t,r,i){let s=this.declaredInputs[r],o=nk(n)||J3(n,{previous:Fa,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new CI(d&&d.currentValue,t,c===Fa),Xx(n,e,i,t)}var tk="__ngSimpleChanges__";function nk(n){return n[tk]||null}function J3(n,e){return n[tk]=e}var LP=null;var tt=function(n,e=null,t){LP?.(n,e,t)},Z3="svg",X3="math";function jr(n){for(;Array.isArray(n);)n=n[ar];return n}function rk(n,e){return jr(e[n])}function $r(n,e){return jr(e[n.index])}function Gm(n,e){return n.data[e]}function ik(n,e){return n[e]}function e$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vi(n,e){let t=e[n];return Ur(t)?t:t[ar]}function g0(n){return(n[Ce]&128)===128}function t$(n){return Ii(n[an])}function wm(n,e){return e==null?null:n[e]}function sk(n){n[Su]=0}function ok(n){n[Ce]&1024||(n[Ce]|=1024,g0(n)&&Th(n))}function n$(n,e){for(;n>0;)e=e[zu],n--;return e}function Wm(n){return!!(n[Ce]&9216||n[vr]?.dirty)}function SI(n){n[ss].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),Wm(n)&&Th(n)}function Th(n){n[ss].changeDetectionScheduler?.notify(0);let e=Va(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!g0(e)));)e=Va(e)}function ak(n,e){if(qa(n))throw new ne(911,!1);n[mo]===null&&(n[mo]=[]),n[mo].push(e)}function r$(n,e){if(n[mo]===null)return;let t=n[mo].indexOf(e);t!==-1&&n[mo].splice(t,1)}function Va(n){let e=n[an];return Ii(e)?e[an]:e}function ck(n){return n[mm]??=[]}function uk(n){return n.cleanup??=[]}var xe={lFrame:_k(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var DI=!1;function i$(){return xe.lFrame.elementDepthCount}function s$(){xe.lFrame.elementDepthCount++}function o$(){xe.lFrame.elementDepthCount--}function lk(){return xe.bindingsEnabled}function $u(){return xe.skipHydrationRootTNode!==null}function a$(n){return xe.skipHydrationRootTNode===n}function c$(n){xe.skipHydrationRootTNode=n}function u$(){xe.skipHydrationRootTNode=null}function Ye(){return xe.lFrame.lView}function fn(){return xe.lFrame.tView}function ke(n){return xe.lFrame.contextLView=n,n[Gn]}function Ne(n){return xe.lFrame.contextLView=null,n}function Yn(){let n=dk();for(;n!==null&&n.type===64;)n=n.parent;return n}function dk(){return xe.lFrame.currentTNode}function l$(){let n=xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ch(n,e){let t=xe.lFrame;t.currentTNode=n,t.isParent=e}function hk(){return xe.lFrame.isParent}function fk(){xe.lFrame.isParent=!1}function d$(){return xe.lFrame.contextLView}function pk(){return DI}function FP(n){let e=DI;return DI=n,e}function h$(){let n=xe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function f$(){return xe.lFrame.bindingIndex}function p$(n){return xe.lFrame.bindingIndex=n}function Km(){return xe.lFrame.bindingIndex++}function m0(n){let e=xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function g$(){return xe.lFrame.inI18n}function m$(n,e){let t=xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,AI(e)}function y$(){return xe.lFrame.currentDirectiveIndex}function AI(n){xe.lFrame.currentDirectiveIndex=n}function _$(n){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gk(n){xe.lFrame.currentQueryIndex=n}function v$(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[Qn]:null}function mk(n,e,t){if(t&Re.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Re.Host);)if(i=v$(s),i===null||(s=s[zu],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=xe.lFrame=yk();return r.currentTNode=e,r.lView=n,!0}function y0(n){let e=yk(),t=n[Ee];xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yk(){let n=xe.lFrame,e=n===null?null:n.child;return e===null?_k(n):e}function _k(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vk(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wk=vk;function _0(){let n=vk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function w$(n){return(xe.lFrame.contextLView=n$(n,xe.lFrame.contextLView))[Gn]}function wo(){return xe.lFrame.selectedIndex}function Ua(n){xe.lFrame.selectedIndex=n}function Qm(){let n=xe.lFrame;return Gm(n.tView,n.selectedIndex)}function Ek(){return xe.lFrame.currentNamespace}var Ik=!0;function v0(){return Ik}function Eo(n){Ik=n}function E$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ek(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function bk(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function im(n,e,t){Tk(n,e,3,t)}function sm(n,e,t,r){(n[Ce]&3)===t&&Tk(n,e,t,r)}function iI(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function Tk(n,e,t,r){let i=r!==void 0?n[Su]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Su]+=65536),(a<s||s==-1)&&(I$(n,t,e,c),n[Su]=(n[Su]&4294901760)+c+2),c++}function VP(n,e){tt(4,n,e);let t=Fe(null);try{e.call(n)}finally{Fe(t),tt(5,n,e)}}function I$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ce]>>14<n[Su]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,VP(a,s)):VP(a,s)}var Pu=-1,Ba=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function b$(n){return(n.flags&8)!==0}function T$(n){return(n.flags&16)!==0}function C$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];S$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ck(n){return n===3||n===4||n===6}function S$(n){return n.charCodeAt(0)===64}function vh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?UP(n,t,i,null,e[++r]):UP(n,t,i,null,null))}}return n}function UP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Sk(n){return n!==Pu}function Em(n){return n&32767}function D$(n){return n>>16}function Im(n,e){let t=D$(n),r=e;for(;t>0;)r=r[zu],t--;return r}var RI=!0;function bm(n){let e=RI;return RI=n,e}var A$=256,Dk=A$-1,Ak=5,R$=0,mi={};function M$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(gh)&&(r=t[gh]),r==null&&(r=t[gh]=R$++);let i=r&Dk,s=1<<i;e.data[n+(i>>Ak)]|=s}function Tm(n,e){let t=Rk(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,sI(r.data,n),sI(e,null),sI(r.blueprint,null));let i=w0(n,e),s=n.injectorIndex;if(Sk(i)){let o=Em(i),a=Im(i,e),c=a[Ee].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function sI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function w0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Nk(i),r===null)return Pu;if(t++,i=i[zu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Pu}function MI(n,e,t){M$(n,e,t)}function P$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(Ck(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Mk(n,e,t){if(t&Re.Optional||n!==void 0)return n;c0(e,"NodeInjector")}function Pk(n,e,t,r){if(t&Re.Optional&&r===void 0&&(r=null),(t&(Re.Self|Re.Host))===0){let i=n[yi],s=$n(void 0);try{return i?i.get(e,r,t&Re.Optional):Fx(e,r,t&Re.Optional)}finally{$n(s)}}return Mk(r,e,t)}function xk(n,e,t,r=Re.Default,i){if(n!==null){if(e[Ce]&2048&&!(r&Re.Self)){let o=L$(n,e,t,r,mi);if(o!==mi)return o}let s=kk(n,e,t,r,mi);if(s!==mi)return s}return Pk(e,t,r,i)}function kk(n,e,t,r,i){let s=N$(t);if(typeof s=="function"){if(!mk(e,n,r))return r&Re.Host?Mk(i,t,r):Pk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Re.Optional))c0(t);else return o}finally{wk()}}else if(typeof s=="number"){let o=null,a=Rk(n,e),c=Pu,d=r&Re.Host?e[Wn][Qn]:null;for((a===-1||r&Re.SkipSelf)&&(c=a===-1?w0(n,e):e[a+8],c===Pu||!jP(r,!1)?a=-1:(o=e[Ee],a=Em(c),e=Im(c,e)));a!==-1;){let h=e[Ee];if(BP(s,a,h.data)){let g=x$(a,e,t,o,r,d);if(g!==mi)return g}c=e[a+8],c!==Pu&&jP(r,e[Ee].data[a+8]===d)&&BP(s,a,e)?(o=h,a=Em(c),e=Im(c,e)):a=-1}}return i}function x$(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?$a(a)&&RI:r!=o&&(a.type&3)!==0,d=i&Re.Host&&s===a,h=k$(a,o,t,c,d);return h!==null?Cm(e,o,h,a,i):mi}function k$(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,E=i?a+h:d;for(let I=g;I<E;I++){let k=o[I];if(I<c&&t===k||I>=c&&k.type===t)return I}if(i){let I=o[c];if(I&&_i(I)&&I.type===t)return c}return null}function Cm(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ba){let a=s;a.resolving&&Ox(C3(o[t]));let c=bm(a.canSeeViewProviders);a.resolving=!0;let d,h=a.injectImpl?$n(a.injectImpl):null,g=mk(n,r,Re.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&E$(t,o[t],e)}finally{h!==null&&$n(h),bm(c),a.resolving=!1,wk()}}return s}function N$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gh)?n[gh]:void 0;return typeof e=="number"?e>=0?e&Dk:O$:e}function BP(n,e,t){let r=1<<n;return!!(t[e+(n>>Ak)]&r)}function jP(n,e){return!(n&Re.Self)&&!(n&Re.Host&&e)}var Oa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xk(this._tNode,this._lView,e,$m(r),t)}};function O$(){return new Oa(Yn(),Ye())}function Io(n){return Ih(()=>{let e=n.prototype.constructor,t=e[dm]||PI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[dm]||PI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function PI(n){return Mx(n)?()=>{let e=PI(Pn(n));return e&&e()}:La(n)}function L$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ce]&2048&&!_h(o);){let a=kk(s,o,t,r|Re.Self,mi);if(a!==mi)return a;let c=s.parent;if(!c){let d=o[Yx];if(d){let h=d.get(t,mi,r);if(h!==mi)return h}c=Nk(o),o=o[zu]}s=c}return i}function Nk(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[Qn]:null}function E0(n){return P$(Yn(),n)}function zP(n,e=null,t=null,r){let i=Ok(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ok(n,e=null,t=null,r,i=new Set){let s=[t||qn,V3(n)];return r=r||(typeof n=="object"?void 0:Hn(n)),new mh(s,e||f0(),r||null,i)}var Dt=class n{static THROW_IF_NOT_FOUND=Na;static NULL=new gm;static create(e,t){if(Array.isArray(e))return zP({name:""},t,e,"");{let r=e.name??"";return zP({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>ce(Bx)});static __NG_ELEMENT_ID__=-1};var F$=new Q("");F$.__NG_ELEMENT_ID__=n=>{let e=Yn();if(e===null)throw new ne(204,!1);if(e.type&2)return e.value;if(n&Re.Optional)return null;throw new ne(204,!1)};var Lk=!1,qu=(()=>{class n{static __NG_ELEMENT_ID__=V$;static __NG_ENV_ID__=t=>t}return n})(),xI=class extends qu{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return qa(t)?(e(),()=>{}):(ak(t,e),()=>r$(t,e))}};function V$(){return new xI(Ye())}var ja=class{},Ym=new Q("",{providedIn:"root",factory:()=>!1});var Fk=new Q(""),Vk=new Q(""),ds=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Nt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),U$=(()=>{class n{internalPendingTasks=j(ds);scheduler=j(ja);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return b(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),kI=class extends Ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Kx()&&(this.destroyRef=j(qu,{optional:!0})??void 0,this.pendingTasks=j(ds,{optional:!0})??void 0)}emit(e){let t=Fe(null);try{super.next(e)}finally{Fe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=kI;function Sm(...n){}function Uk(n){let e,t;function r(){n=Sm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function $P(n){return queueMicrotask(()=>n()),()=>{n=Sm}}var I0="isAngularZone",Dm=I0+"_ID",B$=0,Pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Lk}=e;if(typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,$$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(I0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ne(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,j$,Sm,Sm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},j$={};function b0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function z$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Uk(()=>{n.callbackScheduled=!1,NI(n),n.isCheckStableRunning=!0,b0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),NI(n)}function $$(n){let e=()=>{z$(n)},t=B$++;n._inner=n._inner.fork({name:"angular",properties:{[I0]:!0,[Dm]:t,[Dm+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(q$(c))return r.invokeTask(s,o,a,c);try{return qP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),HP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return qP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!H$(c)&&e(),HP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,NI(n),b0(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function NI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HP(n){n._nesting--,b0(n)}var OI=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function q$(n){return Bk(n,"__ignore_ng_zone__")}function H$(n){return Bk(n,"__scheduler_tick__")}function Bk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var wi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},G$=new Q("",{providedIn:"root",factory:()=>{let n=j(Pe),e=j(wi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function GP(n,e){return Ax(n,e)}function W$(n){return Ax(Dx,n)}var jk=(GP.required=W$,GP);function K$(){return Jm(Yn(),Ye())}function Jm(n,e){return new lr($r(n,e))}var lr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=K$}return n})();function Q$(n){return typeof n=="function"&&n[_r]!==void 0}function Hu(n,e){let t=ME(n,e?.equal),r=t[_r];return t.set=i=>ah(r,i),t.update=i=>PE(r,i),t.asReadonly=Y$.bind(t),t}function Y$(){let n=this[_r];if(n.readonlyFn===void 0){let e=()=>this();e[_r]=n,n.readonlyFn=e}return n.readonlyFn}function zk(n){return Q$(n)&&typeof n.set=="function"}var J$="ngSkipHydration",Z$="ngskiphydration";function $k(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Z$)return!0}return!1}function qk(n){return n.hasAttribute(J$)}function Am(n){return(n.flags&128)===128}function X$(n){if(Am(n))return!0;let e=n.parent;for(;e;){if(Am(n)||$k(e))return!0;e=e.parent}return!1}var Hk=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Hk||{}),Gk=new Map,e5=0;function t5(){return e5++}function n5(n){Gk.set(n[Hm],n)}function LI(n){Gk.delete(n[Hm])}var WP="__ngContext__";function Sh(n,e){Ur(e)?(n[WP]=e[Hm],n5(e)):n[WP]=e}function Wk(n){return Qk(n[yh])}function Kk(n){return Qk(n[Vr])}function Qk(n){for(;n!==null&&!Ii(n);)n=n[Vr];return n}var FI;function Yk(n){FI=n}function Zm(){if(FI!==void 0)return FI;if(typeof document<"u")return document;throw new ne(210,!1)}var is=new Q("",{providedIn:"root",factory:()=>r5}),r5="ng",T0=new Q(""),bi=new Q("",{providedIn:"platform",factory:()=>"unknown"});var C0=new Q("",{providedIn:"root",factory:()=>Zm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function i5(){let n=new Gu;return n.store=s5(Zm(),j(is)),n}var Gu=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:i5});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function s5(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Jk="h",Zk="b",o5="f",a5="n",c5="e",u5="t",S0="c",Xk="x",Rm="r",l5="i",d5="n",eN="d";var h5="di",f5="s",p5="p";var Xg=new Q(""),tN=!1,nN=new Q("",{providedIn:"root",factory:()=>tN});var rN=new Q(""),g5=!1,m5=new Q(""),KP=new Q("",{providedIn:"root",factory:()=>new Map}),D0=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(D0||{}),Wu=new Q(""),QP=new Set;function Ti(n){QP.has(n)||(QP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var iN=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=y5}return n})();function y5(){return new iN(Ye(),Yn())}var Du=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Du||{}),sN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),_5=[Du.EarlyRead,Du.Write,Du.MixedReadWrite,Du.Read],v5=(()=>{class n{ngZone=j(Pe);scheduler=j(ja);errorHandler=j(wi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Wu,{optional:!0})}execute(){let t=this.sequences.size>0;t&&tt(16),this.executing=!0;for(let r of _5)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&tt(17)}register(t){let{view:r}=t;r!==void 0?((r[Mu]??=[]).push(t),Th(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(D0.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),VI=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Mu];e&&(this.view[Mu]=e.filter(t=>t!==this))}};function Xm(n,e){!e?.injector&&Qx(Xm);let t=e?.injector??j(Dt);return Ti("NgAfterNextRender"),E5(n,t,e,!0)}function w5(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function E5(n,e,t,r){let i=e.get(sN);i.impl??=e.get(v5);let s=e.get(Wu,null,{optional:!0}),o=t?.phase??Du.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(qu):null,c=e.get(iN,null,{optional:!0}),d=new VI(i.impl,w5(n,o),c?.view,r,a,s?.snapshot(null));return i.impl.register(d),d}var sr=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(sr||{}),YP=0,I5=1,Xt=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(Xt||{});var b5=0,ey=1;var T5=4,C5=5;var S5=7,xu=8,D5=9,oN=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(oN||{});function om(n,e){let t=R5(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function A5(n){om(1,n),om(0,n),om(2,n)}function R5(n){let e=T5;return n===1?e=C5:n===2&&(e=D5),e}function aN(n){return n+1}function Dh(n,e){let t=n[Ee],r=aN(e.index);return n[r]}function ty(n,e){let t=aN(e.index);return n.data[t]}function M5(n,e,t){let r=e[Ee],i=ty(r,t);switch(n){case Xt.Complete:return i.primaryTmplIndex;case Xt.Loading:return i.loadingTmplIndex;case Xt.Error:return i.errorTmplIndex;case Xt.Placeholder:return i.placeholderTmplIndex;default:return null}}function JP(n,e){return e===Xt.Placeholder?n.placeholderBlockConfig?.[YP]??null:e===Xt.Loading?n.loadingBlockConfig?.[YP]??null:null}function P5(n){return n.loadingBlockConfig?.[I5]??null}function ZP(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function x5(n,e){let t=e.primaryTmplIndex+St;return Gm(n,t)}var ny="ngb";var k5=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,s=i.get(e)??[];s.push(t),i.set(e,s),r.__jsaction_fns=i},N5=(n,e)=>{let t=n,r=t.getAttribute(ny)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var O5=n=>{n.removeAttribute(QE.JSACTION),n.removeAttribute(ny),n.__jsaction_fns=void 0},L5=new Q("",{providedIn:"root",factory:()=>({})});function cN(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var UI=new Map;function F5(n,e){return UI.set(n,e),()=>UI.delete(n)}var XP=!1,uN=(n,e,t,r)=>{};function V5(n,e,t,r){uN(n,e,t,r)}function U5(){XP||(uN=(n,e,t,r)=>{let i=n[yi].get(is);UI.get(i)?.(e,t,r)},XP=!0)}var A0=new Q("");var B5="__nghData__",lN=B5,j5="__nghDeferData__",z5=j5,oI="ngh",$5="nghm",dN=()=>null;function q5(n,e,t=!1){let r=n.getAttribute(oI);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let h=e.get(Gu,null,{optional:!0});h!==null&&(c=h.get(lN,[])[Number(r)])}let d={data:c,firstChild:n.firstChild??null};return t&&(d.firstChild=n,ry(d,0,n.nextSibling)),a?n.setAttribute(oI,a):n.removeAttribute(oI),d}function H5(){dN=q5}function hN(n,e,t=!1){return dN(n,e,t)}function G5(n){let e=n._lView;return e[Ee].type===2?null:(_h(e)&&(e=e[St]),e)}function W5(n){return n.textContent?.replace(/\s/gm,"")}function K5(n){let e=Zm(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=W5(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function ry(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function BI(n,e){return n.segmentHeads?.[e]??null}function Q5(n){return n.get(m5,!1,{optional:!0})}function Y5(n,e){let t=n.data,r=t[c5]?.[e]??null;return r===null&&t[S0]?.[e]&&(r=R0(n,e)),r}function fN(n,e){return n.data[S0]?.[e]??null}function R0(n,e){let t=fN(n,e)??[],r=0;for(let i of t)r+=i[Rm]*(i[Xk]??1);return r}function J5(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[eN];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ah(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[eN];n.disconnectedNodes=t?new Set(t):null}return!!J5(n)?.has(e)}function Z5(n,e){let t=e.get(A0),i=e.get(Gu).get(z5,{}),s=!1,o=n,a=null,c=[];for(;!s&&o;){s=t.has(o);let d=t.hydrating.get(o);if(a===null&&d!=null){a=d.promise;break}c.unshift(o),o=i[o][p5]}return{parentBlockPromise:a,hydrationQueue:c}}function aI(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===$5}function ex(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function X5(n){for(let r of n.body.childNodes)if(aI(r))return;let e=ex(n.body.previousSibling);if(aI(e))return;let t=ex(n.head.lastChild);if(!aI(t))throw new ne(-507,!1)}function pN(n,e){let t=n.contentQueries;if(t!==null){let r=Fe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];gk(s),a.contentQueries(2,e[o],o)}}}finally{Fe(r)}}}function jI(n,e,t){gk(0);let r=Fe(null);try{e(n,t)}finally{Fe(r)}}function gN(n,e,t){if(Zx(e)){let r=Fe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Fe(r)}}}var Ei=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ei||{});var em;function e6(){if(em===void 0&&(em=null,lm.trustedTypes))try{em=lm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return em}function tx(n){return e6()?.createScriptURL(n)||n}var Mm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sx})`}};function Ku(n){return n instanceof Mm?n.changingThisBreaksApplicationSecurity:n}function M0(n,e){let t=t6(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Sx})`)}return t===e}function t6(n){return n instanceof Mm&&n.getTypeName()||null}var n6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mN(n){return n=String(n),n.match(n6)?n:"unsafe:"+n}var iy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(iy||{});function bo(n){let e=_N();return e?e.sanitize(iy.URL,n)||"":M0(n,"URL")?Ku(n):mN(Nu(n))}function r6(n){let e=_N();if(e)return tx(e.sanitize(iy.RESOURCE_URL,n)||"");if(M0(n,"ResourceURL"))return tx(Ku(n));throw new ne(904,!1)}function i6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?r6:bo}function yN(n,e,t){return i6(e,t)(n)}function _N(){let n=Ye();return n&&n[ss].sanitizer}var s6=/^>|^->|<!--|-->|--!>|<!-$/g,o6=/(<|>)/g,a6="\u200B$1\u200B";function c6(n){return n.replace(s6,e=>e.replace(o6,a6))}function u6(n){return n.ownerDocument.body}function vN(n){return n instanceof Function?n():n}function l6(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var wN="ng-template";function d6(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&l6(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(P0(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function P0(n){return n.type===4&&n.value!==wN}function h6(n,e,t){let r=n.type===4&&!t?wN:n.value;return e===r}function f6(n,e,t){let r=4,i=n.attrs,s=i!==null?m6(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Lr(r)&&!Lr(c))return!1;if(o&&Lr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!h6(n,c,t)||c===""&&e.length===1){if(Lr(r))return!1;o=!0}}else if(r&8){if(i===null||!d6(n,i,c,t)){if(Lr(r))return!1;o=!0}}else{let d=e[++a],h=p6(c,i,P0(n),t);if(h===-1){if(Lr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Lr(r))return!1;o=!0}}}}return Lr(r)||o}function Lr(n){return(n&1)===0}function p6(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return y6(e,n)}function EN(n,e,t=!1){for(let r=0;r<e.length;r++)if(f6(n,e[r],t))return!0;return!1}function g6(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function m6(n){for(let e=0;e<n.length;e++){let t=n[e];if(Ck(t))return e}return n.length}function y6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _6(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function nx(n,e){return n?":not("+e.trim()+")":e}function v6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Lr(o)&&(e+=nx(s,i),i=""),r=o,s=s||!Lr(r);t++}return i!==""&&(e+=nx(s,i)),e}function w6(n){return n.map(v6).join(",")}function E6(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Lr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var wr={};function IN(n,e){return n.createText(e)}function I6(n,e,t){n.setValue(e,t)}function bN(n,e){return n.createComment(c6(e))}function x0(n,e,t){return n.createElement(e,t)}function Pm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function TN(n,e,t){n.appendChild(e,t)}function rx(n,e,t,r,i){r!==null?Pm(n,e,t,r,i):TN(n,e,t)}function k0(n,e,t){n.removeChild(null,e,t)}function CN(n){n.textContent=""}function b6(n,e,t){n.setAttribute(e,"style",t)}function T6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function SN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&C$(n,e,r),i!==null&&T6(n,e,i),s!==null&&b6(n,e,s)}function N0(n,e,t,r,i,s,o,a,c,d,h){let g=St+r,E=g+i,I=C6(g,E),k=typeof d=="function"?d():d;return I[Ee]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function C6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function S6(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=N0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function O0(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[ar]=i,g[Ce]=r|4|128|8|64|1024,(d!==null||n&&n[Ce]&2048)&&(g[Ce]|=2048),sk(g),g[an]=g[zu]=n,g[Gn]=t,g[ss]=o||n&&n[ss],g[at]=a||n&&n[at],g[yi]=c||n&&n[yi]||null,g[Qn]=s,g[Hm]=t5(),g[Br]=h,g[Yx]=d,g[Wn]=e.type==2?n[Wn]:g,g}function D6(n,e,t){let r=$r(e,n),i=S6(t),s=n[ss].rendererFactory,o=L0(n,O0(n,i,null,DN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function DN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function AN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function L0(n,e){return n[yh]?n[OP][Vr]=e:n[yh]=e,n[OP]=e,e}function B(n=1){RN(fn(),Ye(),wo()+n,!1)}function RN(n,e,t,r){if(!r)if((e[Ce]&3)===3){let s=n.preOrderCheckHooks;s!==null&&im(e,s,t)}else{let s=n.preOrderHooks;s!==null&&sm(e,s,0,t)}Ua(t)}var sy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(sy||{});function zI(n,e,t,r){let i=Fe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&sy.SignalBased)!==0&&(c=e[s][_r]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):Xx(e,c,s,r)}finally{Fe(i)}}function MN(n,e,t,r,i){let s=wo(),o=r&2;try{Ua(-1),o&&e.length>St&&RN(n,e,St,!1),tt(o?2:0,i),t(r,i)}finally{Ua(s),tt(o?3:1,i)}}function F0(n,e,t){N6(n,e,t),(t.flags&64)===64&&O6(n,e,t)}function PN(n,e,t=$r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function A6(n,e,t,r){let s=r.get(nN,tN)||t===Ei.ShadowDom,o=n.selectRootElement(e,s);return R6(o),o}function R6(n){xN(n)}var xN=()=>null;function M6(n){qk(n)?CN(n):K5(n)}function P6(){xN=M6}function x6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function V0(n,e,t,r,i,s,o,a){if(!a&&B0(e,n,t,r,i)){$a(e)&&k6(t,e.index);return}if(e.type&3){let c=$r(e,t);r=x6(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)}else e.type&12}function k6(n,e){let t=vi(e,n);t[Ce]&16||(t[Ce]|=64)}function N6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$a(t)&&D6(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Tm(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Cm(e,n,o,t);if(Sh(c,e),s!==null&&U6(e,o-r,c,a,t,s),_i(a)){let d=vi(t.index,e);d[Gn]=Cm(e,n,o,t)}}}function O6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=y$();try{Ua(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];AI(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&L6(c,d)}}finally{Ua(-1),AI(o)}}function L6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kN(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];EN(e,s.selectors,!1)&&(r??=[],_i(s)?r.unshift(s):r.push(s))}return r}function F6(n,e,t,r,i,s){let o=$r(n,e);V6(e[at],o,s,n.value,t,r,i)}function V6(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Nu(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function U6(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];zI(r,t,c,d)}}function U0(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function B0(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];zI(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];zI(h,d,r,i),a=!0}return a}function B6(n,e){let t=vi(e,n),r=t[Ee];j6(r,t);let i=t[ar];i!==null&&t[Br]===null&&(t[Br]=hN(i,t[yi])),tt(18),j0(r,t,t[Gn]),tt(19,t[Gn])}function j6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function j0(n,e,t){y0(e);try{let r=n.viewQuery;r!==null&&jI(1,r,t);let i=n.template;i!==null&&MN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fu]?.finishViewCreation(n),n.staticContentQueries&&pN(n,e),n.staticViewQueries&&jI(2,n.viewQuery,t);let s=n.components;s!==null&&z6(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,_0()}}function z6(n,e){for(let t=0;t<e.length;t++)B6(n,e[t])}function z0(n,e,t,r){let i=Fe(null);try{let s=e.tView,a=n[Ce]&4096?4096:16,c=O0(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Lu]=d;let h=n[Fu];return h!==null&&(c[Fu]=h.createEmbeddedView(s)),j0(s,c,t),c}finally{Fe(i)}}function xm(n,e){return!e||e.firstChild===null||Am(n)}var $6;function $0(n,e){return $6(n,e)}var cs=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(cs||{});function Ha(n){return(n.flags&32)===32}function Au(n,e,t,r,i){if(r!=null){let s,o=!1;Ii(r)?s=r:Ur(r)&&(o=!0,r=r[ar]);let a=jr(r);n===0&&t!==null?i==null?TN(e,t,a):Pm(e,t,a,i||null,!0):n===1&&t!==null?Pm(e,t,a,i||null,!0):n===2?k0(e,a,o):n===3&&e.destroyNode(a),s!=null&&X6(e,n,s,t,i)}}function q6(n,e){NN(n,e),e[ar]=null,e[Qn]=null}function H6(n,e,t,r,i,s){r[ar]=i,r[Qn]=e,oy(n,r,t,1,i,s)}function NN(n,e){e[ss].changeDetectionScheduler?.notify(9),oy(n,e,e[at],2,null,null)}function G6(n){let e=n[yh];if(!e)return cI(n[Ee],n);for(;e;){let t=null;if(Ur(e))t=e[yh];else{let r=e[or];r&&(t=r)}if(!t){for(;e&&!e[Vr]&&e!==n;)Ur(e)&&cI(e[Ee],e),e=e[an];e===null&&(e=n),Ur(e)&&cI(e[Ee],e),t=e&&e[Vr]}e=t}}function q0(n,e){let t=n[vm],r=t.indexOf(e);t.splice(r,1)}function H0(n,e){if(qa(e))return;let t=e[at];t.destroyNode&&oy(n,e,t,3,null,null),G6(e)}function cI(n,e){if(qa(e))return;let t=Fe(null);try{e[Ce]&=-129,e[Ce]|=256,e[vr]&&DE(e[vr]),K6(n,e),W6(n,e),e[Ee].type===1&&e[at].destroy();let r=e[Lu];if(r!==null&&Ii(e[an])){r!==e[an]&&q0(r,e);let i=e[Fu];i!==null&&i.detachView(n)}LI(e)}finally{Fe(t)}}function W6(n,e){let t=n.cleanup,r=e[mm];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[mm]=null);let i=e[mo];if(i!==null){e[mo]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[ym];if(s!==null){e[ym]=null;for(let o of s)o.destroy()}}function K6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ba)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];tt(4,a,c);try{c.call(a)}finally{tt(5,a,c)}}else{tt(4,i,s);try{s.call(i)}finally{tt(5,i,s)}}}}}function ON(n,e,t){return Q6(n,e.parent,t)}function Q6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];if($a(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ei.None||i===Ei.Emulated)return null}return $r(r,t)}function LN(n,e,t){return J6(n,e,t)}function Y6(n,e,t){return n.type&40?$r(n,t):null}var J6=Y6,ix;function G0(n,e,t,r){let i=ON(n,r,e),s=e[at],o=r.parent||e[Qn],a=LN(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)rx(s,i,t[c],a,!1);else rx(s,i,t,a,!1);ix!==void 0&&ix(s,r,e,t,i)}function ph(n,e){if(e!==null){let t=e.type;if(t&3)return $r(e,n);if(t&4)return $I(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ph(n,r);{let i=n[e.index];return Ii(i)?$I(-1,i):jr(i)}}else{if(t&128)return ph(n,e.next);if(t&32)return $0(e,n)()||jr(n[e.index]);{let r=FN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Va(n[Wn]);return ph(i,r)}else return ph(n,e.next)}}}return null}function FN(n,e){if(e!==null){let r=n[Wn][Qn],i=e.projection;return r.projection[i]}return null}function $I(n,e){let t=or+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return ph(r,i)}return e[as]}function W0(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Sh(jr(a),r),t.flags|=2),!Ha(t))if(c&8)W0(n,e,t.child,r,i,s,!1),Au(e,n,i,a,s);else if(c&32){let d=$0(t,r),h;for(;h=d();)Au(e,n,i,h,s);Au(e,n,i,a,s)}else c&16?VN(n,e,r,t,i,s):Au(e,n,i,a,s);t=o?t.projectionNext:t.next}}function oy(n,e,t,r,i,s){W0(t,r,n.firstChild,e,i,s,!1)}function Z6(n,e,t){let r=e[at],i=ON(n,t,e),s=t.parent||e[Qn],o=LN(s,t,e);VN(r,0,e,t,i,o)}function VN(n,e,t,r,i,s){let o=t[Wn],c=o[Qn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Au(e,n,i,h,s)}else{let d=c,h=o[an];Am(r)&&(d.flags|=128),W0(n,e,d,h,i,s,!0)}}function X6(n,e,t,r,i){let s=t[as],o=jr(t);s!==o&&Au(e,n,r,s,i);for(let a=or;a<t.length;a++){let c=t[a];oy(c[Ee],c,n,e,r,s)}}function eq(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:cs.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=cs.Important),n.setStyle(t,r,i,s))}}function km(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(jr(s)),Ii(s)&&tq(s,r);let o=t.type;if(o&8)km(n,e,t.child,r);else if(o&32){let a=$0(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=FN(e,t);if(Array.isArray(a))r.push(...a);else{let c=Va(e[Wn]);km(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function tq(n,e){for(let t=or;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&km(r[Ee],r,i,e)}n[as]!==n[ar]&&e.push(n[as])}function UN(n){if(n[Mu]!==null){for(let e of n[Mu])e.impl.addSequence(e);n[Mu].length=0}}var BN=[];function nq(n){return n[vr]??rq(n)}function rq(n){let e=BN.pop()??Object.create(sq);return e.lView=n,e}function iq(n){n.lView[vr]!==n&&(n.lView=null,BN.push(n))}var sq=oe(z({},sh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Th(n.lView)},consumerOnSignalRead(){this.lView[vr]=this}});function oq(n){let e=n[vr]??Object.create(aq);return e.lView=n,e}var aq=oe(z({},sh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Va(n.lView);for(;e&&!jN(e[Ee]);)e=Va(e);e&&ok(e)},consumerOnSignalRead(){this.lView[vr]=this}});function jN(n){return n.type!==2}function zN(n){if(n[ym]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ym])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var cq=100;function $N(n,e=!0,t=0){let i=n[ss].rendererFactory,s=!1;s||i.begin?.();try{uq(n,t)}catch(o){throw e&&U0(n,o),o}finally{s||i.end?.()}}function uq(n,e){let t=pk();try{FP(!0),qI(n,e);let r=0;for(;Wm(n);){if(r===cq)throw new ne(103,!1);r++,qI(n,1)}}finally{FP(t)}}function lq(n,e,t,r){if(qa(e))return;let i=e[Ce],s=!1,o=!1;y0(e);let a=!0,c=null,d=null;s||(jN(n)?(d=nq(e),c=gg(d)):EE()===null?(a=!1,d=oq(e),c=gg(d)):e[vr]&&(DE(e[vr]),e[vr]=null));try{sk(e),p$(n.bindingStartIndex),t!==null&&MN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let I=n.preOrderCheckHooks;I!==null&&im(e,I,null)}else{let I=n.preOrderHooks;I!==null&&sm(e,I,0,null),iI(e,0)}if(o||dq(e),zN(e),qN(e,0),n.contentQueries!==null&&pN(n,e),!s)if(h){let I=n.contentCheckHooks;I!==null&&im(e,I)}else{let I=n.contentHooks;I!==null&&sm(e,I,1),iI(e,1)}fq(n,e);let g=n.components;g!==null&&GN(e,g,0);let E=n.viewQuery;if(E!==null&&jI(2,E,r),!s)if(h){let I=n.viewCheckHooks;I!==null&&im(e,I)}else{let I=n.viewHooks;I!==null&&sm(e,I,2),iI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rI]){for(let I of e[rI])I();e[rI]=null}s||(UN(e),e[Ce]&=-73)}catch(h){throw s||Th(e),h}finally{d!==null&&(CE(d,c),a&&iq(d)),_0()}}function qN(n,e){for(let t=Wk(n);t!==null;t=Kk(t))for(let r=or;r<t.length;r++){let i=t[r];HN(i,e)}}function dq(n){for(let e=Wk(n);e!==null;e=Kk(e)){if(!(e[Ce]&2))continue;let t=e[vm];for(let r=0;r<t.length;r++){let i=t[r];ok(i)}}}function hq(n,e,t){tt(18);let r=vi(e,n);HN(r,t),tt(19,r[Gn])}function HN(n,e){g0(n)&&qI(n,e)}function qI(n,e){let r=n[Ee],i=n[Ce],s=n[vr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&SE(s)),o||=!1,s&&(s.dirty=!1),n[Ce]&=-9217,o)lq(r,n,r.template,n[Gn]);else if(i&8192){zN(n),qN(n,1);let a=r.components;a!==null&&GN(n,a,1),UN(n)}}function GN(n,e,t){for(let r=0;r<e.length;r++)hq(n,e[r],t)}function fq(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ua(~i);else{let s=i,o=t[++r],a=t[++r];m$(o,s);let c=e[s];tt(24,c),a(2,c),tt(25,c)}}}finally{Ua(-1)}}function ay(n,e){let t=pk()?64:1088;for(n[ss].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=Va(n);if(_h(n)&&!r)return n;n=r}return null}function WN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function K0(n,e,t,r=!0){let i=e[Ee];if(gq(i,e,n,t),r){let o=$I(t,n),a=e[at],c=a.parentNode(n[as]);c!==null&&H6(i,n[Qn],a,e,c,o)}let s=e[Br];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function pq(n,e){let t=Nm(n,e);return t!==void 0&&H0(t[Ee],t),t}function Nm(n,e){if(n.length<=or)return;let t=or+e,r=n[t];if(r){let i=r[Lu];i!==null&&i!==n&&q0(i,r),e>0&&(n[t-1][Vr]=r[Vr]);let s=pm(n,or+e);q6(r[Ee],r);let o=s[Fu];o!==null&&o.detachView(s[Ee]),r[an]=null,r[Vr]=null,r[Ce]&=-129}return r}function gq(n,e,t,r){let i=or+r,s=t.length;r>0&&(t[i-1][Vr]=e),r<s-or?(e[Vr]=t[i],Ux(t,or+r,e)):(t.push(e),e[Vr]=null),e[an]=t;let o=e[Lu];o!==null&&t!==o&&KN(o,e);let a=e[Fu];a!==null&&a.insertView(n),SI(e),e[Ce]|=128}function KN(n,e){let t=n[vm],r=e[an];if(Ur(r))n[Ce]|=2;else{let i=r[an][Wn];e[Wn]!==i&&(n[Ce]|=2)}t===null?n[vm]=[e]:t.push(e)}var wh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ee];return km(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Gn]}set context(e){this._lView[Gn]=e}get destroyed(){return qa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(Ii(e)){let t=e[_m],r=t?t.indexOf(this):-1;r>-1&&(Nm(e,r),pm(t,r))}this._attachedToViewContainer=!1}H0(this._lView[Ee],this._lView)}onDestroy(e){ak(this._lView,e)}markForCheck(){ay(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){SI(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,$N(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_h(this._lView),t=this._lView[Lu];t!==null&&!e&&q0(t,this._lView),NN(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;let t=_h(this._lView),r=this._lView[Lu];r!==null&&!t&&KN(r,this._lView),SI(this._lView)}};var cy=(()=>{class n{static __NG_ELEMENT_ID__=_q}return n})(),mq=cy,yq=class extends mq{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=z0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wh(i)}};function _q(){return QN(Yn(),Ye())}function QN(n,e){return n.type&4?new yq(e,n,Jm(n,e)):null}function uy(n,e,t,r,i){let s=n.data[e];if(s===null)s=vq(n,e,t,r,i),g$()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=l$();s.injectorIndex=o===null?-1:o.injectorIndex}return Ch(s,!0),s}function vq(n,e,t,r,i){let s=dk(),o=hk(),a=o?s:s&&s.parent,c=n.data[e]=Eq(n,a,t,e,r,i);return wq(n,c,s,o),c}function wq(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Eq(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return $u()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Iq=new RegExp(`^(\\d+)*(${Zk}|${Jk})*(.*)`);function bq(n){let e=n.match(Iq),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,d,h]of s.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(d,g)}return[o,...a]}function Tq(n){return!n.prev&&n.parent?.type===8}function uI(n){return n.index-St}function Cq(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function ly(n,e,t,r){let i=uI(r),s=Cq(n,i);if(s===void 0){let o=n.data[d5];if(o?.[i])s=Dq(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(Tq(r)){let d=uI(r.parent);s=BI(n,d)}else{let d=$r(c,t);if(a)s=d.firstChild;else{let h=uI(c),g=BI(n,h);if(c.type===2&&g){let I=R0(n,h)+1;s=dy(I,g)}else s=d.nextSibling}}}}return s}function dy(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function Sq(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case o5:t=t.firstChild;break;case a5:t=t.nextSibling;break}}return t}function Dq(n,e){let[t,...r]=bq(n),i;if(t===Jk)i=e[Wn][ar];else if(t===Zk)i=u6(e[Wn][ar]);else{let s=Number(t);i=jr(e[s+St])}return Sq(i,r)}var Aq=!1;function Rq(n){Aq=n}function Mq(n){let e=n[Br];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[at];for(let s of r.values())Pq(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Pq(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-St);i&&k0(n,i,!1)}}function YN(n){let e=n[os]??[],r=n[an][at],i=[];for(let s of e)s.data[h5]!==void 0?i.push(s):JN(s,r);n[os]=i}function xq(n){let{lContainer:e}=n,t=e[os];if(t===null)return;let i=e[an][at];for(let s of t)JN(s,i)}function JN(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Rm];for(;t<i;){let s=r.nextSibling;k0(e,r,!1),r=s,t++}}}function hy(n){YN(n);let e=n[ar];Ur(e)&&Om(e);for(let t=or;t<n.length;t++)Om(n[t])}function Om(n){Mq(n);let e=n[Ee];for(let t=St;t<e.bindingStartIndex;t++)if(Ii(n[t])){let r=n[t];hy(r)}else Ur(n[t])&&Om(n[t])}function ZN(n){let e=n._views;for(let t of e){let r=G5(t);r!==null&&r[ar]!==null&&(Ur(r)?Om(r):hy(r))}}function kq(n,e,t,r){n!==null&&(t.cleanup(e),hy(n.lContainer),ZN(r))}function Nq(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Xk]??1);i++){let s={data:r,firstChild:null};r[Rm]>0&&(s.firstChild=n,n=dy(r[Rm],n)),t.push(s)}return[n,t]}var XN=()=>null;function Oq(n,e){let t=n[os];return!e||t===null||t.length===0?null:t[0].data[l5]===e?t.shift():(YN(n),null)}function Lq(){XN=Oq}function HI(n,e){return XN(n,e)}var Fq=class{},eO=class{},GI=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Hn(e)}.`)}},fy=class{static NULL=new GI},Vu=class{},hs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Vq()}return n})();function Vq(){let n=Ye(),e=Yn(),t=vi(e.index,n);return(Ur(t)?t:n)[at]}var Uq=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var lI={},ku=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=$m(r);let i=this.injector.get(e,lI,r);return i!==lI||t===lI?i:this.parentInjector.get(e,t,r)}};function sx(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=_I(i,a);else if(s==2){let c=a,d=e[++o];r=_I(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=Re.Default){let t=Ye();if(t===null)return ce(n,e);let r=Yn();return xk(r,t,Pn(n),e)}function tO(){let n="invalid";throw new Error(n)}function nO(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,c=null,d=null,h=jq(o);h===null?a=o:[a,c,d]=h,qq(n,e,t,a,s,c,d)}s!==null&&r!==null&&Bq(t,r,s)}function Bq(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ne(-301,!1);r.push(e[i],s)}}function jq(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&_i(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,zq(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function zq(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function $q(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qq(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let E=0;E<a;E++){let I=r[E];!c&&_i(I)&&(c=!0,$q(n,t,E)),MI(Tm(t,e),n,I.type)}Yq(t,n.data.length,a);for(let E=0;E<a;E++){let I=r[E];I.providersResolver&&I.providersResolver(I)}let d=!1,h=!1,g=AN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let E=0;E<a;E++){let I=r[E];if(t.mergedAttrs=vh(t.mergedAttrs,I.hostAttrs),Gq(n,t,e,g,I),Qq(g,I,i),o!==null&&o.has(I)){let[F,N]=o.get(I);t.directiveToIndex.set(I.type,[g,F+t.directiveStart,N+t.directiveStart])}else(s===null||!s.has(I))&&t.directiveToIndex.set(I.type,g);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let k=I.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}Hq(n,t,s)}function Hq(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ox(0,e,i,r),ox(1,e,i,r),cx(e,r,!1);else{let s=t.get(i);ax(0,e,s,r),ax(1,e,s,r),cx(e,r,!0)}}}function ox(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),rO(e,s)}}function ax(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),rO(e,o)}}function rO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function cx(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||P0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function Gq(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=La(i.type,!0)),o=new Ba(s,_i(i),re);n.blueprint[r]=o,t[r]=o,Wq(n,e,r,AN(n,t,i.hostVars,wr),i)}function Wq(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Kq(o)!=a&&o.push(a),o.push(t,r,s)}}function Kq(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Qq(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function Yq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function iO(n,e,t,r,i,s,o,a){let c=e.consts,d=wm(c,o),h=uy(e,n,2,r,d);return s&&nO(e,t,h,wm(c,a),i),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),h.attrs!==null&&sx(h,h.attrs,!1),h.mergedAttrs!==null&&sx(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function sO(n,e){bk(n,e),Zx(e)&&n.queries.elementEnd(e)}var Lm=class extends fy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=_o(e);return new Uu(t,this.ngModule)}};function Jq(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&sy.SignalBased)!==0};return i&&(s.transform=i),s})}function Zq(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Xq(n,e,t){let r=e instanceof xn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ku(t,r):t}function e9(n){let e=n.get(Vu,null);if(e===null)throw new ne(407,!1);let t=n.get(Uq,null),r=n.get(ja,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function t9(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return x0(e,t,t==="svg"?Z3:t==="math"?X3:null)}var Uu=class extends eO{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Jq(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Zq(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=w6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){tt(22);let s=Fe(null);try{let o=this.componentDef,a=r?["ng-version","19.2.15"]:E6(this.componentDef.selectors[0]),c=N0(0,null,null,1,0,null,null,null,null,[a],null),d=Xq(o,i||this.ngModule,e),h=e9(d),g=h.rendererFactory.createRenderer(null,o),E=r?A6(g,r,o.encapsulation,d):t9(o,g),I=O0(null,c,null,512|DN(o),null,null,h,g,d,null,hN(E,d,!0));I[St]=E,y0(I);let k=null;try{let F=iO(St,c,I,"#host",()=>[this.componentDef],!0,0);E&&(SN(g,E,F),Sh(E,I)),F0(c,I,F),gN(c,F,I),sO(c,F),t!==void 0&&n9(F,this.ngContentSelectors,t),k=vi(F.index,I),I[Gn]=k[Gn],j0(c,I,null)}catch(F){throw k!==null&&LI(k),LI(I),F}finally{tt(23),_0()}return new WI(this.componentType,I)}finally{Fe(s)}}},WI=class extends Fq{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Gm(t[Ee],St),this.location=Jm(this._tNode,t),this.instance=vi(this._tNode.index,t)[Gn],this.hostView=this.changeDetectorRef=new wh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=B0(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let o=vi(r.index,i);ay(o,1)}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Qu=(()=>{class n{static __NG_ELEMENT_ID__=r9}return n})();function r9(){let n=Yn();return s9(n,Ye())}var i9=Qu,oO=class extends i9{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Jm(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){let e=w0(this._hostTNode,this._hostLView);if(Sk(e)){let t=Im(e,this._hostLView),r=Em(e),i=t[Ee].data[r+8];return new Oa(i,t)}else return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ux(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-or}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=HI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,xm(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!K3(e),a;if(o)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef}let c=o?e:new Uu(_o(e)),d=r||this.parentInjector;if(!s&&c.ngModule==null){let F=(o?d:this.parentInjector).get(xn,null);F&&(s=F)}let h=_o(c.componentType??{}),g=HI(this._lContainer,h?.id??null),E=g?.firstChild??null,I=c.create(d,i,E,s);return this.insertImpl(I.hostView,a,xm(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(t$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],d=new oO(c,c[Qn],c[an]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return K0(o,i,s,r),e.attachToViewContainerRef(),Ux(dI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ux(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Nm(this._lContainer,t);r&&(pm(dI(this._lContainer),t),H0(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Nm(this._lContainer,t);return r&&pm(dI(this._lContainer),t)!=null?new wh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ux(n){return n[_m]}function dI(n){return n[_m]||(n[_m]=[])}function s9(n,e){let t,r=e[n.index];return Ii(r)?t=r:(t=WN(r,e,null,n),e[n.index]=t,L0(e,t)),aO(t,e,n,r),new oO(t,n,e)}function o9(n,e){let t=n[at],r=t.createComment(""),i=$r(e,n),s=t.parentNode(i);return Pm(t,s,r,t.nextSibling(i),!1),r}var aO=cO,Q0=()=>!1;function a9(n,e,t){return Q0(n,e,t)}function cO(n,e,t,r){if(n[as])return;let i;t.type&8?i=jr(r):i=o9(e,t),n[as]=i}function c9(n,e,t){if(n[as]&&n[os])return!0;let r=t[Br],i=e.index-St;if(!r||X$(e)||Ah(r,i))return!1;let o=BI(r,i),a=r.data[S0]?.[i],[c,d]=Nq(o,a);return n[as]=c,n[os]=d,!0}function u9(n,e,t,r){Q0(n,t,e)||cO(n,e,t,r)}function l9(){aO=u9,Q0=c9}var Bu=class{},Y0=class{};var KI=class extends Bu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Lm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=zx(e);this._bootstrapComponents=vN(s.bootstrap),this._r3Injector=Ok(e,t,[{provide:Bu,useValue:this},{provide:fy,useValue:this.componentFactoryResolver},...r],Hn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},QI=class extends Y0{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new KI(this.moduleType,e,[])}};var Fm=class extends Bu{injector;componentFactoryResolver=new Lm(this);instance=null;constructor(e){super();let t=new mh([...e.providers,{provide:Bu,useValue:this},{provide:fy,useValue:this.componentFactoryResolver}],e.parent||f0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yu(n,e,t=null){return new Fm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var d9=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=d0(!1,t.type),i=r.length>0?Yu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(ce(xn))})}return n})();function At(n){return Ih(()=>{let e=uO(n),t=oe(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Hk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(d9).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ei.Emulated,styles:n.styles||qn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ti("NgStandalone"),lO(t);let r=n.dependencies;return t.directiveDefs=lx(r,!1),t.pipeDefs=lx(r,!0),t.id=m9(t),t})}function h9(n){return _o(n)||$x(n)}function f9(n){return n!==null}function qr(n){return Ih(()=>({type:n.type,bootstrap:n.bootstrap||qn,declarations:n.declarations||qn,imports:n.imports||qn,exports:n.exports||qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function p9(n,e){if(n==null)return Fa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=sy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function g9(n){if(n==null)return Fa;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ht(n){return Ih(()=>{let e=uO(n);return lO(e),e})}function J0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function uO(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Fa,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:p9(n.inputs,e),outputs:g9(n.outputs),debugInfo:null}}function lO(n){n.features?.forEach(e=>e(n))}function lx(n,e){if(!n)return null;let t=e?qx:h9;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(f9)}function m9(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function y9(n){return Object.getPrototypeOf(n.prototype).constructor}function Hr(n){let e=y9(n.type),t=!0,r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=hI(n.inputs),o.declaredInputs=hI(n.declaredInputs),o.outputs=hI(n.outputs);let a=i.hostBindings;a&&I9(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&w9(n,c),d&&E9(n,d),_9(n,i),y3(n.outputs,i.outputs),_i(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Hr&&(t=!1)}}e=Object.getPrototypeOf(e)}v9(r)}function _9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function v9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vh(i.hostAttrs,t=vh(t,i.hostAttrs))}}function hI(n){return n===Fa?{}:n===qn?[]:n}function w9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function E9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function I9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function dO(n){return T9(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function b9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function T9(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function C9(n,e,t){return n[e]=t}function us(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function S9(n,e,t,r){let i=us(n,e,t);return us(n,e+1,r)||i}function D9(n,e,t,r,i,s,o,a,c){let d=e.consts,h=uy(e,n,4,o||null,a||null);lk()&&nO(e,t,h,wm(d,c),kN),h.mergedAttrs=vh(h.mergedAttrs,h.attrs),bk(e,h);let g=h.tView=N0(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function hO(n,e,t,r,i,s,o,a,c,d){let h=t+St,g=e.firstCreatePass?D9(h,e,n,r,i,s,o,a,c):e.data[h];Ch(g,!1);let E=fO(e,n,g,t);v0()&&G0(e,n,E,g),Sh(E,n);let I=WN(E,n,E,g);return n[h]=I,L0(n,I),a9(I,g,n),p0(g)&&F0(e,n,g),c!=null&&PN(n,g,d),g}function Oe(n,e,t,r,i,s,o,a){let c=Ye(),d=fn(),h=wm(d.consts,s);return hO(c,d,n,e,t,r,i,h,o,a),Oe}var fO=pO;function pO(n,e,t,r){return Eo(!0),e[at].createComment("")}function A9(n,e,t,r){let i=e[Br],s=!i||$u()||Ha(t)||Ah(i,r);if(Eo(s),s)return pO(n,e);let o=i.data[u5]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=ly(i,n,e,t);ry(i,r,a);let c=R0(i,r);return dy(c,a)}function R9(){fO=A9}var M9=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,s){if(!this.cachedInjectors.has(t)){let o=i.length>0?Yu(i,r,s):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var P9=new Q("");function fI(n,e,t){return n.get(M9).getOrCreateInjector(e,n,t,"")}function x9(n,e,t){if(n instanceof ku){let i=n.injector,s=n.parentInjector,o=fI(s,e,t);return new ku(i,o)}let r=n.get(xn);if(r!==n){let i=fI(r,e,t);return new ku(n,i)}return fI(n,e,t)}function Ru(n,e,t,r=!1){let i=t[an],s=i[Ee];if(qa(i))return;let o=Dh(i,e),a=o[ey],c=o[S5];if(!(c!==null&&n<c)&&dx(a,n)&&dx(o[b5]??-1,n)){let d=ty(s,e),g=!r&&!0&&(P5(d)!==null||JP(d,Xt.Loading)!==null||JP(d,Xt.Placeholder))?O9:N9;try{g(n,o,t,e,i)}catch(E){U0(i,E)}}}function k9(n,e){let t=n[os]?.findIndex(i=>i.data[f5]===e[ey])??-1;return{dehydratedView:t>-1?n[os][t]:null,dehydratedViewIx:t}}function N9(n,e,t,r,i){tt(20);let s=M5(n,i,r);if(s!==null){e[ey]=n;let o=i[Ee],a=s+St,c=Gm(o,a),d=0;pq(t,d);let h;if(n===Xt.Complete){let k=ty(o,r),F=k.providers;F&&F.length>0&&(h=x9(i[yi],k,F))}let{dehydratedView:g,dehydratedViewIx:E}=k9(t,e),I=z0(i,c,null,{injector:h,dehydratedView:g});if(K0(t,I,d,xm(c,g)),ay(I,2),E>-1&&t[os]?.splice(E,1),(n===Xt.Complete||n===Xt.Error)&&Array.isArray(e[xu])){for(let k of e[xu])k();e[xu]=null}}tt(21)}function dx(n,e){return n<e}function hx(n,e,t){n.loadingPromise.then(()=>{n.loadingState===sr.COMPLETE?Ru(Xt.Complete,e,t):n.loadingState===sr.FAILED&&Ru(Xt.Error,e,t)})}var O9=null;var Z0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var gO=new Q("");var L9=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new YI})}return n})(),YI=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function To(n){return!!n&&typeof n.then=="function"}function X0(n){return!!n&&typeof n.subscribe=="function"}var mO=new Q("");function eb(n){return wn([{provide:mO,multi:!0,useValue:n}])}var yO=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(mO,{optional:!0})??[];injector=j(Dt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=cr(this.injector,i);if(To(s))t.push(s);else if(X0(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Co=new Q("");function F9(){RE(()=>{throw new ne(600,!1)})}function V9(n){return n.isBoundToModule}var U9=10;var Kn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(G$);afterRenderManager=j(sN);zonelessEnabled=j(Ym);rootEffectScheduler=j(L9);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ct;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=j(ds).hasPendingTasks.pipe(we(t=>!t));constructor(){j(Wu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(xn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Dt.NULL){tt(10);let s=t instanceof eO;if(!this._injector.get(yO).done){let I="";throw new ne(405,I)}let a;s?a=t:a=this._injector.get(fy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=V9(a)?void 0:this._injector.get(Bu),d=r||a.selector,h=a.create(i,[],d,c),g=h.location.nativeElement,E=h.injector.get(gO,null);return E?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),am(this.components,h),E?.unregisterApplication(g)}),this._loadComponent(h),tt(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){tt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(D0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ne(101,!1);let t=Fe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Fe(t),this.afterTick.next(),tt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vu,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<U9;)tt(14),this.synchronizeOnce(),tt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)B9(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;am(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Co,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>am(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function am(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function B9(n,e,t,r){if(!t&&!Wm(n))return;$N(n,e,t&&!r?0:1)}function j9(n,e,t){let r=e[yi],i=e[Ee];if(n.loadingState!==sr.NOT_STARTED)return n.loadingPromise??Promise.resolve();let s=Dh(e,t),o=x5(i,n);n.loadingState=sr.IN_PROGRESS,om(1,s);let a=n.dependencyResolverFn,c=r.get(U$).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(d=>{let h=!1,g=[],E=[];for(let I of d)if(I.status==="fulfilled"){let k=I.value,F=_o(k)||$x(k);if(F)g.push(F);else{let N=qx(k);N&&E.push(N)}}else{h=!0;break}if(h){if(n.loadingState=sr.FAILED,n.errorTmplIndex===null){let I="",k=new ne(-750,!1);U0(e,k)}}else{n.loadingState=sr.COMPLETE;let I=o.tView;if(g.length>0){I.directiveRegistry=ZP(I.directiveRegistry,g);let k=g.map(N=>N.type),F=d0(!1,...k);n.providers=F}E.length>0&&(I.pipeRegistry=ZP(I.pipeRegistry,E))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=sr.COMPLETE,c()}),n.loadingPromise)}function z9(n,e){return e[yi].get(P9,null,{optional:!0})?.behavior!==oN.Manual}function $9(n,e,t){let r=e[Ee],i=e[t.index];if(!z9(n,e))return;let s=Dh(e,t),o=ty(r,t);switch(A5(s),o.loadingState){case sr.NOT_STARTED:Ru(Xt.Loading,t,i),j9(o,e,t),o.loadingState===sr.IN_PROGRESS&&hx(o,t,i);break;case sr.IN_PROGRESS:Ru(Xt.Loading,t,i),hx(o,t,i);break;case sr.COMPLETE:Ru(Xt.Complete,t,i);break;case sr.FAILED:Ru(Xt.Error,t,i);break;default:}}function q9(n,e,t){return b(this,null,function*(){let r=n.get(A0);if(r.hydrating.has(e))return;let{parentBlockPromise:s,hydrationQueue:o}=Z5(e,n);if(o.length===0)return;s!==null&&o.shift(),W9(r,o),s!==null&&(yield s);let a=o[0];r.has(a)?yield fx(n,o,t):r.awaitParentBlock(a,()=>b(null,null,function*(){return yield fx(n,o,t)}))})}function fx(n,e,t){return b(this,null,function*(){let r=n.get(A0),i=r.hydrating,s=n.get(ds),o=s.add();for(let c=0;c<e.length;c++){let d=e[c],h=r.get(d);if(h!=null){if(yield Q9(h),yield K9(n),H9(h)){xq(h),px(e.slice(c),r);break}i.get(d).resolve()}else{G9(c,e,r),px(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,s.remove(o),t&&t(e),kq(r.get(a),e,r,n.get(Kn))})}function H9(n){return Dh(n.lView,n.tNode)[ey]===Xt.Error}function G9(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&hy(i.lContainer)}function px(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function W9(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function K9(n){return new Promise(e=>Xm(e,{injector:n}))}function Q9(n){return b(this,null,function*(){let{tNode:e,lView:t}=n,r=Dh(t,e);return new Promise(i=>{Y9(r,i),$9(2,t,e)})})}function Y9(n,e){Array.isArray(n[xu])||(n[xu]=[]),n[xu].push(e)}function Rh(n,e,t,r){let i=Ye(),s=Km();if(us(i,s,e)){let o=fn(),a=Qm();F6(a,i,n,e,t,r)}return Rh}function _O(n,e,t,r){return us(n,Km(),t)?e+Nu(t)+r:wr}function J9(n,e,t,r,i,s){let o=f$(),a=S9(n,o,t,i);return m0(2),a?e+Nu(t)+r+Nu(i)+s:wr}function tm(n,e){return n<<17|e<<2}function za(n){return n>>17&32767}function Z9(n){return(n&2)==2}function X9(n,e){return n&131071|e<<17}function JI(n){return n|2}function ju(n){return(n&131068)>>2}function pI(n,e){return n&-131069|e<<2}function eH(n){return(n&1)===1}function ZI(n){return n|1}function tH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=za(o),c=ju(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||bh(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let E=za(n[a+1]);n[r+1]=tm(E,a),E!==0&&(n[E+1]=pI(n[E+1],r)),n[a+1]=X9(n[a+1],r)}else n[r+1]=tm(a,0),a!==0&&(n[a+1]=pI(n[a+1],r)),a=r;else n[r+1]=tm(c,0),a===0?a=r:n[c+1]=pI(n[c+1],r),c=r;d&&(n[r+1]=JI(n[r+1])),gx(n,h,r,!0),gx(n,h,r,!1),nH(e,h,n,r,s),o=tm(a,c),s?e.classBindings=o:e.styleBindings=o}function nH(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&bh(s,e)>=0&&(t[r+1]=ZI(t[r+1]))}function gx(n,e,t,r){let i=n[t+1],s=e===null,o=r?za(i):ju(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];rH(c,e)&&(a=!0,n[o+1]=r?ZI(d):JI(d)),o=r?za(d):ju(d)}a&&(n[t+1]=r?JI(i):ZI(i))}function rH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bh(n,e)>=0:!1}var Fr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iH(n){return n.substring(Fr.key,Fr.keyEnd)}function sH(n){return oH(n),vO(n,wO(n,0,Fr.textEnd))}function vO(n,e){let t=Fr.textEnd;return t===e?-1:(e=Fr.keyEnd=aH(n,Fr.key=e,t),wO(n,e,t))}function oH(n){Fr.key=0,Fr.keyEnd=0,Fr.value=0,Fr.valueEnd=0,Fr.textEnd=n.length}function wO(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function aH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Z(n,e,t){let r=Ye(),i=Km();if(us(r,i,e)){let s=fn(),o=Qm();V0(s,o,r,n,e,r[at],t,!1)}return Z}function XI(n,e,t,r,i){B0(e,n,t,i?"class":"style",r)}function py(n,e){return uH(n,e,null,!0),py}function gy(n){lH(mH,cH,n,!0)}function cH(n,e){for(let t=sH(e);t>=0;t=vO(e,t))l0(n,iH(e),!0)}function uH(n,e,t,r){let i=Ye(),s=fn(),o=m0(2);if(s.firstUpdatePass&&IO(s,n,o,r),e!==wr&&us(i,o,e)){let a=s.data[wo()];bO(s,a,i,i[at],n,i[o+1]=_H(e,t),r,o)}}function lH(n,e,t,r){let i=fn(),s=m0(2);i.firstUpdatePass&&IO(i,null,s,r);let o=Ye();if(t!==wr&&us(o,s,t)){let a=i.data[wo()];if(TO(a,r)&&!EO(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=_I(c,t||"")),XI(i,a,o,t,r)}else yH(i,a,o,o[at],o[s+1],o[s+1]=gH(n,e,t),r,s)}}function EO(n,e){return e>=n.expandoStartIndex}function IO(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[wo()],o=EO(n,t);TO(s,r)&&e===null&&!o&&(e=!1),e=dH(i,s,e,r),tH(i,s,e,t,o,r)}}function dH(n,e,t,r){let i=_$(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gI(null,n,e,t,r),t=Eh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=gI(i,n,e,t,r),s===null){let c=hH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=gI(null,n,e,c[1],r),c=Eh(c,e.attrs,r),fH(n,e,r,c))}else s=pH(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function hH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ju(r)!==0)return n[za(r)]}function fH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[za(i)]=r}function pH(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Eh(r,o,t)}return Eh(r,e.attrs,t)}function gI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Eh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Eh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),l0(n,o,t?!0:e[++s]))}return n===void 0?null:n}function gH(n,e,t){if(t==null||t==="")return qn;let r=[],i=Ku(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function mH(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&l0(n,r,t)}function yH(n,e,t,r,i,s,o,a){i===wr&&(i=qn);let c=0,d=0,h=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;h!==null||g!==null;){let E=c<i.length?i[c+1]:void 0,I=d<s.length?s[d+1]:void 0,k=null,F;h===g?(c+=2,d+=2,E!==I&&(k=g,F=I)):g===null||h!==null&&h<g?(c+=2,k=h):(d+=2,k=g,F=I),k!==null&&bO(n,e,t,r,k,F,o,a),h=c<i.length?i[c]:null,g=d<s.length?s[d]:null}}function bO(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=eH(d)?mx(c,e,t,i,ju(d),o):void 0;if(!Vm(h)){Vm(s)||Z9(d)&&(s=mx(c,null,t,i,a,o));let g=rk(wo(),t);eq(r,o,g,i,s)}}function mx(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,E=t[i+1];E===wr&&(E=g?qn:void 0);let I=g?tI(E,r):h===r?E:void 0;if(d&&!Vm(I)&&(I=tI(c,r)),Vm(I)&&(a=I,o))return a;let k=n[i+1];i=o?za(k):ju(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=tI(c,r))}return a}function Vm(n){return n!==void 0}function _H(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hn(Ku(n)))),n}function TO(n,e){return(n.flags&(e?8:16))!==0}function M(n,e,t,r){let i=Ye(),s=fn(),o=St+n,a=i[at],c=s.firstCreatePass?iO(o,s,i,e,kN,lk(),t,r):s.data[o],d=CO(s,i,c,a,e,n);i[o]=d;let h=p0(c);return Ch(c,!0),SN(a,d,c),!Ha(c)&&v0()&&G0(s,i,d,c),(i$()===0||h)&&Sh(d,i),s$(),h&&(F0(s,i,c),gN(s,c,i)),r!==null&&PN(i,c),M}function P(){let n=Yn();hk()?fk():(n=n.parent,Ch(n,!1));let e=n;a$(e)&&u$(),o$();let t=fn();return t.firstCreatePass&&sO(t,e),e.classesWithoutHost!=null&&b$(e)&&XI(t,e,Ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&T$(e)&&XI(t,e,Ye(),e.stylesWithoutHost,!1),P}function Rt(n,e,t,r){return M(n,e,t,r),P(),Rt}var CO=(n,e,t,r,i,s)=>(Eo(!0),x0(r,i,Ek()));function vH(n,e,t,r,i,s){let o=e[Br],a=!o||$u()||Ha(t)||Ah(o,s);if(Eo(a),a)return x0(r,i,Ek());let c=ly(o,n,e,t);return fN(o,s)&&ry(o,s,c.nextSibling),o&&($k(t)||qk(c))&&$a(t)&&(c$(t),CN(c)),c}function wH(){CO=vH}var EH=(n,e,t,r)=>(Eo(!0),bN(e[at],""));function IH(n,e,t,r){let i,s=e[Br],o=!s||$u()||Ah(s,r)||Ha(t);if(Eo(o),o)return bN(e[at],"");let a=ly(s,n,e,t),c=Y5(s,r);return ry(s,r,a),i=dy(c,a),i}function bH(){EH=IH}function Lt(){return Ye()}var Um="en-US";var TH=Um;function CH(n){typeof n=="string"&&(TH=n.toLowerCase().replace(/_/g,"-"))}function yx(n,e,t){return function r(i){if(i===Function)return t;let s=$a(n)?vi(n.index,e):e;ay(s,5);let o=e[Gn],a=_x(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=_x(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function _x(n,e,t,r){let i=Fe(null);try{return tt(6,e,t),t(r)!==!1}catch(s){return SH(n,s),!1}finally{tt(7,e,t),Fe(i)}}function SH(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function vx(n,e,t,r,i,s){let o=e[t],a=e[Ee],d=a.data[t].outputs[r],h=o[d],g=a.firstCreatePass?uk(a):null,E=ck(e),I=h.subscribe(s),k=E.length;E.push(s,I),g&&g.push(i,n.index,k,-(k+1))}function ge(n,e,t,r){let i=Ye(),s=fn(),o=Yn();return SO(s,i,i[at],o,n,e,r),ge}function DH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[mm],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function SO(n,e,t,r,i,s,o){let a=p0(r),d=n.firstCreatePass?uk(n):null,h=ck(e),g=!0;if(r.type&3||o){let E=$r(r,e),I=o?o(E):E,k=h.length,F=o?q=>o(jr(q[r.index])):r.index,N=null;if(!o&&a&&(N=DH(n,e,i,r.index)),N!==null){let q=N.__ngLastListenerFn__||N;q.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,g=!1}else{s=yx(r,e,s),V5(e,I,i,s);let q=t.listen(I,i,s);h.push(s,q),d&&d.push(i,F,k,k+1)}}else s=yx(r,e,s);if(g){let E=r.outputs?.[i],I=r.hostDirectiveOutputs?.[i];if(I&&I.length)for(let k=0;k<I.length;k+=2){let F=I[k],N=I[k+1];vx(r,e,F,N,i,s)}if(E&&E.length)for(let k of E)vx(r,e,k,i,i,s)}}function pe(n=1){return w$(n)}function AH(n,e){let t=null,r=g6(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?EN(n,s,!0):_6(r,s))return i}return t}function DO(n){let e=Ye()[Wn][Qn];if(!e.projection){let t=n?n.length:1,r=e.projection=O3(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?AH(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function AO(n,e=0,t,r,i,s){let o=Ye(),a=fn(),c=r?n+1:null;c!==null&&hO(o,a,c,r,i,s,null,t);let d=uy(a,St+n,16,null,t||null);d.projection===null&&(d.projection=e),fk();let g=!o[Br]||$u();o[Wn][Qn].projection[d.projection]===null&&c!==null?RH(o,a,c):g&&!Ha(d)&&Z6(a,o,d)}function RH(n,e,t){let r=St+t,i=e.data[r],s=n[r],o=HI(s,i.tView.ssrId),a=z0(n,i,void 0,{dehydratedView:o});K0(s,a,0,xm(i,o))}function tb(n,e,t,r,i){let s=Ye(),o=_O(s,e,t,r);if(o!==wr){let a=fn(),c=Qm();V0(a,c,s,n,o,s[at],i,!1)}return tb}function Mh(n){let e=d$();return ik(e,St+n)}function x(n,e=""){let t=Ye(),r=fn(),i=n+St,s=r.firstCreatePass?uy(r,i,1,e,null):r.data[i],o=RO(r,t,s,e,n);t[i]=o,v0()&&G0(r,t,o,s),Ch(s,!1)}var RO=(n,e,t,r,i)=>(Eo(!0),IN(e[at],r));function MH(n,e,t,r,i){let s=e[Br],o=!s||$u()||Ha(t)||Ah(s,i);return Eo(o),o?IN(e[at],r):ly(s,n,e,t)}function PH(){RO=MH}function tn(n){return ct("",n,""),tn}function ct(n,e,t){let r=Ye(),i=_O(r,n,e,t);return i!==wr&&MO(r,wo(),i),ct}function Ju(n,e,t,r,i){let s=Ye(),o=J9(s,n,e,t,r,i);return o!==wr&&MO(s,wo(),o),Ju}function MO(n,e,t){let r=rk(e,n);I6(n[at],r,t)}function ft(n,e,t){zk(e)&&(e=e());let r=Ye(),i=Km();if(us(r,i,e)){let s=fn(),o=Qm();V0(s,o,r,n,e,r[at],t,!1)}return ft}function yt(n,e){let t=zk(n);return t&&n.set(e),t}function pt(n,e){let t=Ye(),r=fn(),i=Yn();return SO(r,t,t[at],i,n,e),pt}function xH(n,e,t){let r=fn();if(r.firstCreatePass){let i=_i(n);e0(t,r.data,r.blueprint,i,!0),e0(e,r.data,r.blueprint,i,!1)}}function e0(n,e,t,r,i){if(n=Pn(n),Array.isArray(n))for(let s=0;s<n.length;s++)e0(n[s],e,t,r,i);else{let s=fn(),o=Ye(),a=Yn(),c=Ou(n)?n:Pn(n.provide),d=Wx(n),h=a.providerIndexes&1048575,g=a.directiveStart,E=a.providerIndexes>>20;if(Ou(n)||!n.multi){let I=new Ba(d,i,re),k=yI(c,e,i?h:h+E,g);k===-1?(MI(Tm(a,o),s,c),mI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[k]=I,o[k]=I)}else{let I=yI(c,e,h+E,g),k=yI(c,e,h,h+E),F=I>=0&&t[I],N=k>=0&&t[k];if(i&&!N||!i&&!F){MI(Tm(a,o),s,c);let q=OH(i?NH:kH,t.length,i,r,d);!i&&N&&(t[k].providerFactory=q),mI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),o.push(q)}else{let q=PO(t[i?k:I],d,!i&&r);mI(s,n,I>-1?I:k,q)}!i&&r&&N&&t[k].componentProviders++}}}function mI(n,e,t,r){let i=Ou(e),s=z3(e);if(i||s){let c=(s?Pn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function PO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function kH(n,e,t,r,i){return t0(this.multi,[])}function NH(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Cm(r,r[Ee],this.providerFactory.index,i);o=c.slice(0,a),t0(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],t0(s,o);return o}function t0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function OH(n,e,t,r,i){let s=new Ba(n,t,re);return s.multi=[],s.index=e,s.componentProviders=0,PO(s,i,r&&!t),s}function fs(n,e=[]){return t=>{t.providersResolver=(r,i)=>xH(r,i?i(n):n,e)}}function LH(n,e){let t=n[e];return t===wr?void 0:t}function FH(n,e,t,r,i,s){let o=e+t;return us(n,o,i)?C9(n,o+1,s?r.call(s,i):r(i)):LH(n,o+1)}function Gr(n,e){let t=fn(),r,i=n+St;t.firstCreatePass?(r=VH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=La(r.type,!0)),o,a=$n(re);try{let c=bm(!1),d=s();return bm(c),e$(t,Ye(),i,d),d}finally{$n(a)}}function VH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Wr(n,e,t){let r=n+St,i=Ye(),s=ik(i,r);return UH(i,r)?FH(i,h$(),e,s.transform,t,s):s.transform(t)}function UH(n,e){return n[Ee].data[e].pure}function xO(n,e){return QN(n,e)}var vo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},kO=new vo("19.2.15"),n0=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},NO=(()=>{class n{compileModuleSync(t){return new QI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=zx(t),s=vN(i.declarations).reduce((o,a)=>{let c=_o(a);return c&&o.push(new Uu(c)),o},[]);return new n0(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var BH=(()=>{class n{zone=j(Pe);changeDetectionScheduler=j(ja);applicationRef=j(Kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jH=new Q("",{factory:()=>!1});function OO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Pe(oe(z({},FO()),{scheduleInRootZone:t})),[{provide:Pe,useFactory:n},{provide:yo,multi:!0,useFactory:()=>{let r=j(BH,{optional:!0});return()=>r.initialize()}},{provide:yo,multi:!0,useFactory:()=>{let r=j(zH);return()=>{r.initialize()}}},e===!0?{provide:Fk,useValue:!0}:[],{provide:Vk,useValue:t??Lk}]}function LO(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=OO({ngZoneFactory:()=>{let i=FO(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ti("NgZone_CoalesceEvent"),new Pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return wn([{provide:jH,useValue:!0},{provide:Ym,useValue:!1},r])}function FO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zH=(()=>{class n{subscription=new kt;initialized=!1;zone=j(Pe);pendingTasks=j(ds);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $H=(()=>{class n{appRef=j(Kn);taskService=j(ds);ngZone=j(Pe);zonelessEnabled=j(Ym);tracing=j(Wu,{optional:!0});disableScheduling=j(Fk,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(Vk,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof OI||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?$P:Uk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$P(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qH(){return typeof $localize<"u"&&$localize.locale||Um}var nb=new Q("",{providedIn:"root",factory:()=>j(nb,Re.Optional|Re.SkipSelf)||qH()});var r0=new Q(""),HH=new Q("");function hh(n){return!n.moduleRef}function GH(n){let e=hh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pe);return t.run(()=>{hh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),hh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(r0);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(r0);o.add(s),n.moduleRef.onDestroy(()=>{am(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return KH(r,t,()=>{let s=e.get(yO);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(nb,Um);if(CH(o||Um),!e.get(HH,!0))return hh(n)?e.get(Kn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(hh(n)){let c=e.get(Kn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return WH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function WH(n,e){let t=n.injector.get(Kn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ne(-403,!1);e.push(n)}function KH(n,e,t){try{let r=t();return To(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var cm=null;function QH(n=[],e){return Dt.create({name:e,providers:[{provide:qm,useValue:"platform"},{provide:r0,useValue:new Set([()=>cm=null])},...n]})}function YH(n=[]){if(cm)return cm;let e=QH(n);return cm=e,F9(),JH(e),e}function JH(n){let e=n.get(T0,null);cr(n,()=>{e?.forEach(t=>t())})}var So=(()=>{class n{static __NG_ELEMENT_ID__=ZH}return n})();function ZH(n){return XH(Yn(),Ye(),(n&16)===16)}function XH(n,e,t){if($a(n)&&!t){let r=vi(n.index,e);return new wh(r,r)}else if(n.type&175){let r=e[Wn];return new wh(r,e)}return null}var i0=class{constructor(){}supports(e){return dO(e)}create(e){return new s0(e)}},eG=(n,e)=>e,s0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||eG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<wx(r,i,s)?t:r,a=wx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let E=0;E<d;E++){let I=E<s.length?s[E]:s[E]=0,k=I+E;h<=k&&k<d&&(s[E]=I+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dO(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,b9(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new o0(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Bm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Bm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},o0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},a0=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Bm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new a0,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Ex(){return new rb([new i0])}var rb=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:Ex});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Ex()),deps:[[n,new N3,new en]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ne(901,!1)}}return n})();function VO(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;tt(8);try{let s=i?.injector??YH(r),o=[OO({}),{provide:ja,useExisting:$H},...t||[]],a=new Fm({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return GH({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{tt(9)}}var nm=new WeakSet,Ix="",um=[];function bx(n){return n.get(rN,g5)}function UO(){let n=[{provide:rN,useFactory:()=>{let e=!0;{let t=j(is);e=!!window._ejsas?.[t]}return e&&Ti("NgEventReplay"),e}}];return n.push({provide:yo,useValue:()=>{let e=j(Kn),{injector:t}=e;if(!nm.has(e)){let r=j(KP);if(bx(t)){U5();let i=t.get(is),s=F5(i,(o,a,c)=>{o.nodeType===Node.ELEMENT_NODE&&(k5(o,a,c),N5(o,r))});e.onDestroy(s)}}},multi:!0},{provide:Co,useFactory:()=>{let e=j(Kn),{injector:t}=e;return()=>{!bx(t)||nm.has(e)||(nm.add(e),e.onDestroy(()=>{nm.delete(e);{let r=t.get(is);eI(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(L5);tG(r,t);let i=t.get(KP);i.get(Ix)?.forEach(O5),i.delete(Ix);let s=r.instance;Q5(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()}))}},multi:!0}),n}var tG=(n,e)=>{let t=e.get(is),r=window._ejsas[t],i=n.instance=new DP(new Yg(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let s=AP(t);i.replayEarlyEventInfos(s),eI(t);let o=new Jg(a=>{nG(e,a,a.currentTarget)});SP(i,o)};function nG(n,e,t){let r=(t&&t.getAttribute(ny))??"";/d\d+/.test(r)?rG(r,n,e,t):e.eventPhase===XE.REPLAY&&cN(e,t)}function rG(n,e,t,r){um.push({event:t,currentTarget:r}),q9(e,n,iG)}function iG(n){let e=[...um],t=new Set(n);um=[];for(let{event:r,currentTarget:i}of e){let s=i.getAttribute(ny);t.has(s)?cN(r,i):um.push({event:r,currentTarget:i})}}var Tx=!1;function sG(){Tx||(Tx=!0,H5(),wH(),PH(),bH(),R9(),l9(),Lq(),P6())}function oG(n){return n.whenStable()}function BO(){let n=[{provide:Xg,useFactory:()=>{let e=!0;return e=!!j(Gu,{optional:!0})?.get(lN,null),e&&Ti("NgHydration"),e}},{provide:yo,useValue:()=>{Rq(!1),j(Xg)&&(X5(Zm()),sG())},multi:!0}];return n.push({provide:nN,useFactory:()=>j(Xg)},{provide:Co,useFactory:()=>{if(j(Xg)){let e=j(Kn);return()=>{oG(e).then(()=>{e.destroyed||ZN(e)})}}return()=>{}},multi:!0}),wn(n)}function Do(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Kr(n){return xE(n)}function Zu(n,e){return AE(n,e?.equal)}var Cx=class{[_r];constructor(e){this[_r]=e}destroy(){this[_r].destroy()}};function jO(n){let e=_o(n);if(!e)return null;let t=new Uu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cn=new Q("");var qO=null;function Er(){return qO}function ib(n){qO??=n}var Ph=class{},xh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(HO),providedIn:"platform"})}return n})(),sb=new Q(""),HO=(()=>{class n extends xh{_location;_history;_doc=j(cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function my(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function zO(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qr(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(_y),providedIn:"root"})}return n})(),yy=new Q(""),_y=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return my(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(xh),ce(yy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ao=(()=>{class n{_subject=new Ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=uG(zO($O(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(cG(this._basePath,$O(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qr;static joinWithSlash=my;static stripTrailingSlash=zO;static \u0275fac=function(r){return new(r||n)(ce(Yr))};static \u0275prov=X({token:n,factory:()=>aG(),providedIn:"root"})}return n})();function aG(){return new Ao(ce(Yr))}function cG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $O(n){return n.replace(/\/index.html$/,"")}function uG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var cb=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=my(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(xh),ce(yy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var vy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xu=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),GO(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);GO(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(Qu),re(cy),re(rb))};static \u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function GO(n,e){n.context.$implicit=e.item}var kn=(()=>{class n{_viewContainer;_context=new wy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){WO(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){WO(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(Qu),re(cy))};static \u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),wy=class{$implicit=null;ngIf=null};function WO(n,e){if(n&&!n.createEmbeddedView)throw new ne(2020,!1)}function KO(n,e){return new ne(2100,!1)}var ob=class{createSubscription(e,t){return Kr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Kr(()=>e.unsubscribe())}},ab=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},lG=new ab,dG=new ob,kh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(To(t))return lG;if(X0(t))return dG;throw KO(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(re(So,16))};static \u0275pipe=J0({name:"async",type:n,pure:!1})}return n})();var hG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ga=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw KO(n,t);return t.replace(hG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=J0({name:"titlecase",type:n,pure:!0})}return n})();var En=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({})}return n})();function ub(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ey="browser",QO="server";function lb(n){return n===Ey}function Iy(n){return n===QO}var Nh=class{};var YO=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new db(j(cn),window)})}return n})(),db=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=fG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function fG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Cy=new Q(""),gb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(Cy),ce(Pe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Oh=class{_doc;constructor(e){this._doc=e}manager},by="ng-app-id";function JO(n){for(let e of n)e.remove()}function ZO(n,e){let t=e.createElement("style");return t.textContent=n,t}function pG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${by}="${e}"],link[${by}="${e}"]`);if(i)for(let s of i)s.removeAttribute(by),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function fb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var mb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Iy(s),pG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ZO);r?.forEach(i=>this.addUsage(i,this.external,fb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(JO(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])JO(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ZO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,fb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(by,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(cn),ce(is),ce(C0,8),ce(bi))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),hb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yb=/%COMP%/g;var e1="%COMP%",gG=`_nghost-${e1}`,mG=`_ngcontent-${e1}`,yG=!0,_G=new Q("",{providedIn:"root",factory:()=>yG});function vG(n){return mG.replace(yb,n)}function wG(n){return gG.replace(yb,n)}function t1(n,e){return e.map(t=>t.replace(yb,n))}var _b=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=Iy(a),this.defaultRenderer=new Lh(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ei.ShadowDom&&(r=oe(z({},r),{encapsulation:Ei.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ty?i.applyToHost(t):i instanceof Fh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case Ei.Emulated:s=new Ty(c,d,r,this.appId,h,o,a,g,E);break;case Ei.ShadowDom:return new pb(c,d,t,r,o,a,this.nonce,g,E);default:s=new Fh(c,d,r,h,o,a,g,E);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(gb),ce(mb),ce(is),ce(_G),ce(cn),ce(bi),ce(Pe),ce(C0),ce(Wu,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),Lh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(XO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(XO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=hb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(cs.DashCase|cs.Important)?e.style.setProperty(t,r,i&cs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&cs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new ne(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function XO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pb=class extends Lh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=t1(i.id,h);for(let E of h){let I=document.createElement("style");a&&I.setAttribute("nonce",a),I.textContent=E,this.shadowRoot.appendChild(I)}let g=i.getExternalStyles?.();if(g)for(let E of g){let I=fb(E,s);a&&I.setAttribute("nonce",a),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fh=class extends Lh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?t1(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ty=class extends Fh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=vG(h),this.hostAttr=wG(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Sy=class n extends Ph{supportsDOMEvents=!0;static makeCurrent(){ib(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=EG();return t==null?null:IG(t)}resetBaseElement(){Vh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ub(document.cookie,e)}},Vh=null;function EG(){return Vh=Vh||document.head.querySelector("base"),Vh?Vh.getAttribute("href"):null}function IG(n){return new URL(n,document.baseURI).pathname}var bG=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),r1=(()=>{class n extends Oh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ce(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),n1=["alt","control","meta","shift"],TG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},i1=(()=>{class n extends Oh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),n1.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=TG[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),n1.forEach(o=>{if(o!==i){let a=CG[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function vb(n,e,t){return VO(z({rootComponent:n,platformRef:t?.platformRef},SG(e)))}function SG(n){return{appProviders:[...PG,...n?.providers??[]],platformProviders:MG}}function DG(){Sy.makeCurrent()}function AG(){return new wi}function RG(){return Yk(document),document}var MG=[{provide:bi,useValue:Ey},{provide:T0,useValue:DG,multi:!0},{provide:cn,useFactory:RG}];var PG=[{provide:qm,useValue:"root"},{provide:wi,useFactory:AG},{provide:Cy,useClass:r1,multi:!0,deps:[cn]},{provide:Cy,useClass:i1,multi:!0,deps:[cn]},_b,mb,gb,{provide:Vu,useExisting:_b},{provide:Nh,useClass:bG},[]];var Uh=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var xG="X-Request-URL",kG="text/plain",NG="application/json",Zfe=`${NG}, ${kG}, */*`;var Eb=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Eb||{}),wb=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Uh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Bh=class n extends wb{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Eb.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var s1=new Q("");var Xfe=RegExp(`^${xG}:`,"m");var OG=new Q(""),LG="b",FG="h",VG="s",UG="st",BG="u",jG="rt",Ib=new Q(""),zG=["GET","HEAD"];function $G(n,e){let E=j(Ib),{isCacheActive:t}=E,r=rh(E,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!zG.includes(s)||!r.includeRequestsWithAuthHeaders&&qG(n)||r.filter?.(n)===!1)return e(n);let o=j(Gu);if(j(OG,{optional:!0}))throw new ne(2803,!1);let c=n.url,d=HG(n,c),h=o.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[LG]:I,[jG]:k,[FG]:F,[VG]:N,[UG]:q,[BG]:te}=h,Y=I;switch(k){case"arraybuffer":Y=new TextEncoder().encode(I).buffer;break;case"blob":Y=new Blob([I]);break}let ae=new Uh(F);return fe(new Bh({body:Y,headers:ae,status:N,statusText:q,url:te}))}return e(n).pipe(Zt(I=>{I instanceof Bh}))}function qG(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function o1(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function HG(n,e){let{params:t,method:r,responseType:i}=n,s=o1(t),o=n.serializeBody();o instanceof URLSearchParams?o=o1(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=GG(a);return c}function GG(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function a1(n){return[{provide:Ib,useFactory:()=>(Ti("NgHttpTransferCache"),z({isCacheActive:!0},n))},{provide:s1,useValue:$G,multi:!0},{provide:Co,multi:!0,useFactory:()=>{let e=j(Kn),t=j(Ib);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var c1=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(cn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(Dy||{});function WG(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function u1(){return WG(Dy.EventReplay,UO())}function l1(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);let r=t.has(Dy.HttpTransferCacheOptions);return wn([[],BO(),t.has(Dy.NoHttpTransferCache)||r?[]:a1({}),e])}var Se="primary",Xh=Symbol("RouteTitle"),Db=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qa(n){return new Db(n)}function _1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function QG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ci(n[t],e[t]))return!1;return!0}function Ci(n,e){let t=n?Ab(n):void 0,r=e?Ab(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!v1(n[i],e[i]))return!1;return!0}function Ab(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function v1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function w1(n){return n.length>0?n[n.length-1]:null}function No(n){return zE(n)?n:To(n)?ot(Promise.resolve(n)):fe(n)}var YG={exact:I1,subset:b1},E1={exact:JG,subset:ZG,ignored:()=>!0};function d1(n,e,t){return YG[t.paths](n.root,e.root,t.matrixParams)&&E1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JG(n,e){return Ci(n,e)}function I1(n,e,t){if(!Wa(n.segments,e.segments)||!My(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!I1(n.children[r],e.children[r],t))return!1;return!0}function ZG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>v1(n[t],e[t]))}function b1(n,e,t){return T1(n,e,e.segments,t)}function T1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wa(i,t)||e.hasChildren()||!My(i,t,r))}else if(n.segments.length===t.length){if(!Wa(n.segments,t)||!My(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!b1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Wa(n.segments,i)||!My(n.segments,i,r)||!n.children[Se]?!1:T1(n.children[Se],e,s,r)}}function My(n,e,t){return e.every((r,i)=>E1[t](n[i].parameters,r.parameters))}var Di=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return t8.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Py(this)}},Mo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qa(this.parameters),this._parameterMap}toString(){return S1(this)}};function XG(n,e){return Wa(n,e)&&n.every((t,r)=>Ci(t.parameters,e[r].parameters))}function Wa(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function e8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var Ya=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new Po,providedIn:"root"})}return n})(),Po=class{parse(e){let t=new Mb(e);return new Di(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jh(e.root,!0)}`,r=i8(e.queryParams),i=typeof e.fragment=="string"?`#${n8(e.fragment)}`:"";return`${t}${r}${i}`}},t8=new Po;function Py(n){return n.segments.map(e=>S1(e)).join("/")}function jh(n,e){if(!n.hasChildren())return Py(n);if(e){let t=n.children[Se]?jh(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Se&&r.push(`${i}:${jh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=e8(n,(r,i)=>i===Se?[jh(n.children[Se],!1)]:[`${i}:${jh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${Py(n)}/${t[0]}`:`${Py(n)}/(${t.join("//")})`}}function C1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ay(n){return C1(n).replace(/%3B/gi,";")}function n8(n){return encodeURI(n)}function Rb(n){return C1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xy(n){return decodeURIComponent(n)}function h1(n){return xy(n.replace(/\+/g,"%20"))}function S1(n){return`${Rb(n.path)}${r8(n.parameters)}`}function r8(n){return Object.entries(n).map(([e,t])=>`;${Rb(e)}=${Rb(t)}`).join("")}function i8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ay(t)}=${Ay(i)}`).join("&"):`${Ay(t)}=${Ay(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var s8=/^[^\/()?;#]+/;function bb(n){let e=n.match(s8);return e?e[0]:""}var o8=/^[^\/()?;=#]+/;function a8(n){let e=n.match(o8);return e?e[0]:""}var c8=/^[^=?&#]+/;function u8(n){let e=n.match(c8);return e?e[0]:""}var l8=/^[^&#]+/;function d8(n){let e=n.match(l8);return e?e[0]:""}var Mb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new Xe(e,t)),r}parseSegment(){let e=bb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new Mo(xy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=a8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=bb(this.remaining);i&&(r=i,this.capture(r))}e[xy(t)]=xy(r)}parseQueryParam(e){let t=u8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=d8(this.remaining);o&&(r=o,this.capture(r))}let i=h1(t),s=h1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Se);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Se]:new Xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function D1(n){return n.segments.length>0?new Xe([],{[Se]:n}):n}function A1(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=A1(i);if(r===Se&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Xe(n.segments,e);return h8(t)}function h8(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new Xe(n.segments.concat(e.segments),e.children)}return n}function xo(n){return n instanceof Di}function R1(n,e,t=null,r=null){let i=M1(n);return P1(i,e,t,r)}function M1(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=D1(r);return e??i}function P1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Tb(i,i,i,t,r);let s=f8(e);if(s.toRoot())return Tb(i,i,new Xe([],{}),t,r);let o=p8(s,i,n),a=o.processChildren?$h(o.segmentGroup,o.index,s.commands):k1(o.segmentGroup,o.index,s.commands);return Tb(i,o.segmentGroup,a,t,r)}function Ny(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hh(n){return typeof n=="object"&&n!=null&&n.outlets}function Tb(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;n===e?o=t:o=x1(n,e,t);let a=D1(A1(o));return new Di(a,s,i)}function x1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=x1(s,e,t)}),new Xe(n.segments,r)}var Oy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ny(r[0]))throw new ne(4003,!1);let i=r.find(Hh);if(i&&i!==w1(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function f8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Oy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Oy(t,e,r)}var nl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function p8(n,e,t){if(n.isAbsolute)return new nl(e,!0,0);if(!t)return new nl(e,!1,NaN);if(t.parent===null)return new nl(t,!0,0);let r=Ny(n.commands[0])?0:1,i=t.segments.length-1+r;return g8(t,i,n.numberOfDoubleDots)}function g8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new nl(r,!1,i-s)}function m8(n){return Hh(n[0])?n[0].outlets:{[Se]:n}}function k1(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return $h(n,e,t);let r=y8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Xe(n.segments.slice(0,r.pathIndex),{});return s.children[Se]=new Xe(n.segments.slice(r.pathIndex),n.children),$h(s,0,i)}else return r.match&&i.length===0?new Xe(n.segments,{}):r.match&&!n.hasChildren()?Pb(n,e,t):r.match?$h(n,0,i):Pb(n,e,t)}function $h(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let r=m8(t),i={};if(Object.keys(r).some(s=>s!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let s=$h(n.children[Se],e,t);return new Xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=k1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Xe(n.segments,i)}}function y8(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Hh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!p1(c,d,o))return s;r+=2}else{if(!p1(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Hh(s)){let c=_8(s.outlets);return new Xe(r,c)}if(i===0&&Ny(t[0])){let c=n.segments[e];r.push(new Mo(c.path,f1(t[0]))),i++;continue}let o=Hh(s)?s.outlets[Se]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ny(a)?(r.push(new Mo(o,f1(a))),i+=2):(r.push(new Mo(o,{})),i++)}return new Xe(r,{})}function _8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Pb(new Xe([],{}),0,r))}),e}function f1(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function p1(n,e,t){return n==t.path&&Ci(e,t.parameters)}var ky="imperative",nn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nn||{}),hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ko=class extends hr{type=nn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ir=class extends hr{urlAfterRedirects;type=nn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jn||{}),il=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(il||{}),Si=class extends hr{reason;code;type=nn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ai=class extends hr{reason;code;type=nn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},sl=class extends hr{error;target;type=nn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gh=class extends hr{urlAfterRedirects;state;type=nn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends hr{urlAfterRedirects;state;type=nn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends hr{urlAfterRedirects;state;shouldActivate;type=nn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vy=class extends hr{urlAfterRedirects;state;type=nn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends hr{urlAfterRedirects;state;type=nn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class{route;type=nn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jy=class{route;type=nn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zy=class{snapshot;type=nn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{snapshot;type=nn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qy=class{snapshot;type=nn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=nn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ol=class{routerEvent;position;anchor;type=nn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wh=class{},al=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function v8(n,e){return n.providers&&!n._injector&&(n._injector=Yu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||Se}function w8(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function ef(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ef(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ja(this.rootInjector)}},Ja=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(xn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=kb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kb(e,this._root).map(t=>t.value)}};function xb(n,e){if(n===e.value)return e;for(let t of e.children){let r=xb(n,t);if(r)return r}return null}function kb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=kb(n,t);if(r.length)return r.unshift(e),r}return[]}var dr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function tl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kh=class extends Wy{snapshot;constructor(e,t){super(e),this.snapshot=t,jb(this,e)}toString(){return this.snapshot.toString()}};function N1(n){let e=E8(n),t=new Nt([new Mo("",{})]),r=new Nt({}),i=new Nt({}),s=new Nt({}),o=new Nt(""),a=new In(t,r,s,o,i,Se,n,e.root);return a.snapshot=e.root,new Kh(new dr(a,[]),e)}function E8(n){let e={},t={},r={},i="",s=new Ka([],e,r,i,t,Se,n,null,{});return new Qh("",new dr(s,[]))}var In=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(we(d=>d[Xh]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(e=>Qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(e=>Qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ky(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&L1(i)&&(r.resolve[Xh]=i.title),r}var Ka=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xh]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qh=class extends Wy{url;constructor(e,t){super(t),this.url=e,jb(this,t)}toString(){return O1(this._root)}};function jb(n,e){e.value._routerState=n,e.children.forEach(t=>jb(n,t))}function O1(n){let e=n.children.length>0?` { ${n.children.map(O1).join(", ")} } `:"";return`${n.value}${e}`}function Cb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ci(e.params,t.params)||n.paramsSubject.next(t.params),QG(e.url,t.url)||n.urlSubject.next(t.url),Ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Nb(n,e){let t=Ci(n.params,e.params)&&XG(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Nb(n.parent,e.parent))}function L1(n){return typeof n.title=="string"||n.title===null}var F1=new Q(""),tf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Se;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=jk(void 0);parentContexts=j(Ja);location=j(Qu);changeDetector=j(So);inputBinder=j(nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Ob(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ur]})}return n})(),Ob=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===In?this.route:e===Ja?this.childContexts:e===F1?this.outletData:this.parent.get(e,t)}},nf=new Q(""),zb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xa([r.queryParams,r.params,r.data]).pipe(zn(([s,o,a],c)=>(a=z(z(z({},s),o),a),c===0?fe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=jO(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),$b=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=At({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Rt(0,"router-outlet")},dependencies:[tf],encapsulation:2})}return n})();function qb(n){let e=n.children&&n.children.map(qb),t=e?oe(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=$b),t}function I8(n,e,t){let r=Yh(n,e._root,t?t._root:void 0);return new Kh(r,e)}function Yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=b8(n,e,t);return new dr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Yh(n,a)),o}}let r=T8(e.value),i=e.children.map(s=>Yh(n,s));return new dr(r,i)}}function b8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yh(n,r,i);return Yh(n,r)})}function T8(n){return new In(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}var cl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},V1="ngNavigationCancelingError";function Qy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=U1(!1,Jn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function U1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[V1]=!0,t.cancellationCode=e,t}function C8(n){return B1(n)&&xo(n.url)}function B1(n){return!!n&&n[V1]}var S8=(n,e,t,r)=>we(i=>(new Lb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Lb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=tl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=tl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $y(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Cb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Yy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function D8(n,e,t){let r=n._root,i=e?e._root:null;return zh(r,i,t,[r.value])}function A8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ll(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Px(n)?n:e.get(n):r}function zh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=tl(e);return n.children.forEach(o=>{R8(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qh(a,t.getContext(o),i)),i}function R8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=M8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Yy(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?zh(n,e,a?a.children:null,r,i):zh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rl(a.outlet.component,o))}else o&&qh(e,a,i),i.canActivateChecks.push(new Yy(r)),s.component?zh(n,null,a?a.children:null,r,i):zh(n,null,t,r,i);return i}function M8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wa(n.url,e.url)||!Ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nb(n,e)||!Ci(n.queryParams,e.queryParams);case"paramsChange":default:return!Nb(n,e)}}function qh(n,e,t){let r=tl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qh(o,e.children.getContext(s),t):qh(o,null,t):qh(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new rl(e.outlet.component,i)):t.canDeactivateChecks.push(new rl(null,i)):t.canDeactivateChecks.push(new rl(null,i))}function rf(n){return typeof n=="function"}function P8(n){return typeof n=="boolean"}function x8(n){return n&&rf(n.canLoad)}function k8(n){return n&&rf(n.canActivate)}function N8(n){return n&&rf(n.canActivateChild)}function O8(n){return n&&rf(n.canDeactivate)}function L8(n){return n&&rf(n.canMatch)}function j1(n){return n instanceof ts||n?.name==="EmptyError"}var Ry=Symbol("INITIAL_VALUE");function ul(){return zn(n=>xa(n.map(e=>e.pipe(vn(1),Gg(Ry)))).pipe(we(e=>{for(let t of e)if(t!==!0){if(t===Ry)return Ry;if(t===!1||F8(t))return t}return!0}),jn(e=>e!==Ry),vn(1)))}function F8(n){return xo(n)||n instanceof cl}function V8(n,e){return Ot(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?fe(oe(z({},t),{guardsResult:!0})):U8(o,r,i,n).pipe(Ot(a=>a&&P8(a)?B8(r,s,n,e):fe(a)),we(a=>oe(z({},t),{guardsResult:a})))})}function U8(n,e,t,r){return ot(n).pipe(Ot(i=>H8(i.component,i.route,t,e,r)),rs(i=>i!==!0,!0))}function B8(n,e,t,r){return ot(e).pipe(fo(i=>Iu(z8(i.route.parent,r),j8(i.route,r),q8(n,i.path,t),$8(n,i.route,t))),rs(i=>i!==!0,!0))}function j8(n,e){return n!==null&&e&&e(new qy(n)),fe(!0)}function z8(n,e){return n!==null&&e&&e(new zy(n)),fe(!0)}function $8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(s=>$g(()=>{let o=ef(e)??t,a=ll(s,o),c=k8(a)?a.canActivate(e,n):cr(o,()=>a(e,n));return No(c).pipe(rs())}));return fe(i).pipe(ul())}function q8(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>A8(o)).filter(o=>o!==null).map(o=>$g(()=>{let a=o.guards.map(c=>{let d=ef(o.node)??t,h=ll(c,d),g=N8(h)?h.canActivateChild(r,n):cr(d,()=>h(r,n));return No(g).pipe(rs())});return fe(a).pipe(ul())}));return fe(s).pipe(ul())}function H8(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return fe(!0);let o=s.map(a=>{let c=ef(e)??i,d=ll(a,c),h=O8(d)?d.canDeactivate(n,e,t,r):cr(c,()=>d(n,e,t,r));return No(h).pipe(rs())});return fe(o).pipe(ul())}function G8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return fe(!0);let s=i.map(o=>{let a=ll(o,n),c=x8(a)?a.canLoad(e,t):cr(n,()=>a(e,t));return No(c)});return fe(s).pipe(ul(),z1(r))}function z1(n){return Tg(Zt(e=>{if(typeof e!="boolean")throw Qy(n,e)}),we(e=>e===!0))}function W8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return fe(!0);let s=i.map(o=>{let a=ll(o,n),c=L8(a)?a.canMatch(e,t):cr(n,()=>a(e,t));return No(c)});return fe(s).pipe(ul(),z1(r))}var Jh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Zh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function el(n){return wu(new Jh(n))}function K8(n){return wu(new ne(4e3,!1))}function Q8(n){return wu(U1(!1,Jn.GuardRejected))}var Fb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[Se])return K8(`${e.redirectTo}`);i=i.children[Se]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:h,url:g,outlet:E,params:I,data:k,title:F}=i,N=cr(s,()=>a({params:I,data:k,queryParams:c,fragment:d,routeConfig:h,url:g,outlet:E,title:F}));if(N instanceof Di)throw new Zh(N);t=N}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Zh(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Di(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Vb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y8(n,e,t,r,i){let s=$1(n,e,t);return s.matched?(r=v8(e,r),W8(r,e,t,i).pipe(we(o=>o===!0?s:z({},Vb)))):fe(s)}function $1(n,e,t){if(e.path==="**")return J8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},Vb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_1)(t,n,e);if(!i)return z({},Vb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?z(z({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function J8(n){return{matched:!0,parameters:n.length>0?w1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function g1(n,e,t,r){return t.length>0&&eW(n,t,r)?{segmentGroup:new Xe(e,X8(r,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&tW(n,t,r)?{segmentGroup:new Xe(n.segments,Z8(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function Z8(n,e,t,r){let i={};for(let s of t)if(Zy(n,e,s)&&!r[Jr(s)]){let o=new Xe([],{});i[Jr(s)]=o}return z(z({},r),i)}function X8(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&Jr(r)!==Se){let i=new Xe([],{});t[Jr(r)]=i}return t}function eW(n,e,t){return t.some(r=>Zy(n,e,r)&&Jr(r)!==Se)}function tW(n,e,t){return t.some(r=>Zy(n,e,r))}function Zy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function nW(n,e,t){return e.length===0&&!n.children[t]}var Ub=class{};function rW(n,e,t,r,i,s,o="emptyOnly"){return new Bb(n,e,t,r,i,o,s).recognize()}var iW=31,Bb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Fb(this.urlSerializer,this.urlTree)}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=g1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(we(({children:t,rootSnapshot:r})=>{let i=new dr(r,t),s=new Qh("",i),o=R1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ka([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,t).pipe(we(r=>({children:r,rootSnapshot:t})),ns(r=>{if(r instanceof Zh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(we(o=>o instanceof dr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ot(s).pipe(fo(o=>{let a=r.children[o],c=w8(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Hg((o,a)=>(o.push(...a),o)),po(null),qE(),Ot(o=>{if(o===null)return el(r);let a=q1(o);return sW(a),fe(a)}))}processSegment(e,t,r,i,s,o,a){return ot(t).pipe(fo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ns(d=>{if(d instanceof Jh)return fe(null);throw d}))),rs(c=>!!c),ns(c=>{if(j1(c))return nW(r,i,s)?fe(new Ub):el(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Jr(r)!==o&&(o===Se||!Zy(i,s,r))?el(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):el(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:E}=$1(t,i,s);if(!c)return el(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iW&&(this.allowRedirects=!1));let I=new Ka(s,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,m1(i),Jr(i),i.component??i._loadedComponent??null,i,y1(i)),k=Ky(I,a,this.paramsInheritanceStrategy);I.params=Object.freeze(k.params),I.data=Object.freeze(k.data);let F=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,I,e);return this.applyRedirects.lineralizeSegments(i,F).pipe(Ot(N=>this.processSegment(e,r,t,N.concat(E),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=Y8(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(zn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zn(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:E,remainingSegments:I}=c,k=new Ka(E,g,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,m1(r),Jr(r),r.component??r._loadedComponent??null,r,y1(r)),F=Ky(k,o,this.paramsInheritanceStrategy);k.params=Object.freeze(F.params),k.data=Object.freeze(F.data);let{segmentGroup:N,slicedSegments:q}=g1(t,E,I,d);if(q.length===0&&N.hasChildren())return this.processChildren(h,d,N,k).pipe(we(Y=>new dr(k,Y)));if(d.length===0&&q.length===0)return fe(new dr(k,[]));let te=Jr(r)===s;return this.processSegment(h,d,N,q,te?Se:s,!0,k).pipe(we(Y=>new dr(k,Y instanceof dr?[Y]:[])))}))):el(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):G8(e,t,r,this.urlSerializer).pipe(Ot(i=>i?this.configLoader.loadChildren(e,t).pipe(Zt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Q8(t))):fe({routes:[],injector:e})}};function sW(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function oW(n){let e=n.value.routeConfig;return e&&e.path===""}function q1(n){let e=[],t=new Set;for(let r of n){if(!oW(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=q1(r.children);e.push(new dr(r.value,i))}return e.filter(r=>!t.has(r))}function m1(n){return n.data||{}}function y1(n){return n.resolve||{}}function aW(n,e,t,r,i,s){return Ot(o=>rW(n,e,t,r,o.extractedUrl,i,s).pipe(we(({state:a,tree:c})=>oe(z({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function cW(n,e){return Ot(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of H1(c))o.add(d);let a=0;return ot(o).pipe(fo(c=>s.has(c)?uW(c,r,n,e):(c.data=Ky(c,c.parent,n).resolve,fe(void 0))),Zt(()=>a++),bu(1),Ot(c=>a===o.size?fe(t):Un))})}function H1(n){let e=n.children.map(t=>H1(t)).flat();return[n,...e]}function uW(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!L1(i)&&(s[Xh]=i.title),lW(s,n,e,r).pipe(we(o=>(n._resolvedData=o,n.data=Ky(n,n.parent,t).resolve,null)))}function lW(n,e,t,r){let i=Ab(n);if(i.length===0)return fe({});let s={};return ot(i).pipe(Ot(o=>dW(n[o],e,t,r).pipe(rs(),Zt(a=>{if(a instanceof cl)throw Qy(new Po,a);s[o]=a}))),bu(1),we(()=>s),ns(o=>j1(o)?Un:wu(o)))}function dW(n,e,t,r){let i=ef(e)??r,s=ll(n,i),o=s.resolve?s.resolve(e,t):cr(i,()=>s(e,t));return No(o)}function Sb(n){return zn(e=>{let t=n(e);return t?ot(t).pipe(we(()=>e)):fe(e)})}var Hb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[Xh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(G1),providedIn:"root"})}return n})(),G1=(()=>{class n extends Hb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(c1))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Za=new Q("",{providedIn:"root",factory:()=>({})}),Xa=new Q(""),Xy=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(NO);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=No(t.loadComponent()).pipe(we(K1),Zt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),dh(()=>{this.componentLoaders.delete(t)})),i=new vu(r,()=>new Ct).pipe(_u());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=W1(r,this.compiler,t,this.onLoadEndListener).pipe(dh(()=>{this.childrenLoaders.delete(r)})),o=new vu(s,()=>new Ct).pipe(_u());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W1(n,e,t,r){return No(n.loadChildren()).pipe(we(K1),Ot(i=>i instanceof Y0||Array.isArray(i)?fe(i):ot(e.compileModuleAsync(i))),we(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Xa,[],{optional:!0,self:!0}).flat()),{routes:o.map(qb),injector:s}}))}function hW(n){return n&&typeof n=="object"&&"default"in n}function K1(n){return hW(n)?n.default:n}var e_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(fW),providedIn:"root"})}return n})(),fW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gb=new Q(""),Wb=new Q("");function Q1(n,e,t){let r=n.get(Wb),i=n.get(cn);return n.get(Pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=i.startViewTransition(()=>(s(),pW(n))),{onViewTransitionCreated:c}=r;return c&&cr(n,()=>c({transition:a,from:e,to:t})),o})}function pW(n){return new Promise(e=>{Xm({read:()=>setTimeout(e)},{injector:n})})}var Kb=new Q(""),t_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ct;transitionAbortSubject=new Ct;configLoader=j(Xy);environmentInjector=j(xn);destroyRef=j(qu);urlSerializer=j(Ya);rootContexts=j(Ja);location=j(Ao);inputBindingEnabled=j(nf,{optional:!0})!==null;titleStrategy=j(Hb);options=j(Za,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(e_);createViewTransition=j(Gb,{optional:!0});navigationErrorHandler=j(Kb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new By(i)),r=i=>this.events.next(new jy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(jn(r=>r!==null),zn(r=>{let i=!1,s=!1;return fe(r).pipe(zn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),Un;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?oe(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let d="";return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.rawUrl),d,il.IgnoredSameUrlNavigation)),o.resolve(!1),Un}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fe(o).pipe(zn(d=>(this.events.next(new ko(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Un:Promise.resolve(d))),aW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Zt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=oe(z({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Gh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:E,extras:I}=o,k=new ko(d,this.urlSerializer.serialize(h),g,E);this.events.next(k);let F=N1(this.rootComponentType).snapshot;return this.currentTransition=r=oe(z({},o),{targetSnapshot:F,urlAfterRedirects:h,extras:oe(z({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,fe(r)}else{let d="";return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),d,il.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Un}}),Zt(o=>{let a=new Ly(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),we(o=>(this.currentTransition=r=oe(z({},o),{guards:D8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),V8(this.environmentInjector,o=>this.events.next(o)),Zt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Qy(this.urlSerializer,o.guardsResult);let a=new Fy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),jn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Jn.GuardRejected),!1)),Sb(o=>{if(o.guards.canActivateChecks.length!==0)return fe(o).pipe(Zt(a=>{let c=new Vy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),zn(a=>{let c=!1;return fe(a).pipe(cW(this.paramsInheritanceStrategy,this.environmentInjector),Zt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Jn.NoDataFromResolver)}}))}),Zt(a=>{let c=new Uy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Sb(o=>{let a=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Zt(h=>{c.component=h}),we(()=>{})));for(let h of c.children)d.push(...a(h));return d};return xa(a(o.targetSnapshot.root)).pipe(po(null),vn(1))}),Sb(()=>this.afterPreactivation()),zn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?ot(c).pipe(we(()=>r)):fe(r)}),we(o=>{let a=I8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(z({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Zt(()=>{this.events.next(new Wh)}),S8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),vn(1),Zt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ir(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Tu(this.transitionAbortSubject.pipe(Zt(o=>{throw o}))),dh(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ns(o=>{if(this.destroyed)return r.resolve(!1),Un;if(s=!0,B1(o))this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),C8(o)?this.events.next(new al(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new sl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=cr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof cl){let{message:d,cancellationCode:h}=Qy(this.urlSerializer,c);this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new al(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Un}))}))}cancelNavigationTransition(t,r,i){let s=new Si(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gW(n){return n!==ky}var Y1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(mW),providedIn:"root"})}return n})(),Jy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mW=(()=>{class n extends Jy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J1=(()=>{class n{urlSerializer=j(Ya);options=j(Za,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Ao);urlHandlingStrategy=j(e_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Di;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Di?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=N1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(yW),providedIn:"root"})}return n})(),yW=(()=>{class n extends J1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ko?this.updateStateMemento():t instanceof Ai?this.commitTransition(r):t instanceof Gh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Si&&(t.code===Jn.GuardRejected||t.code===Jn.NoDataFromResolver)?this.restoreHistory(r):t instanceof sl?this.restoreHistory(r,!0):t instanceof Ir&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=z(z({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function n_(n,e){n.events.pipe(jn(t=>t instanceof Ir||t instanceof Si||t instanceof sl||t instanceof Ai),we(t=>t instanceof Ir||t instanceof Ai?0:(t instanceof Si?t.code===Jn.Redirect||t.code===Jn.SupersededByNewNavigation:!1)?2:1),jn(t=>t!==2),vn(1)).subscribe(()=>{e()})}var _W={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(Z0);stateManager=j(J1);options=j(Za,{optional:!0})||{};pendingTasks=j(ds);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(t_);urlSerializer=j(Ya);location=j(Ao);urlHandlingStrategy=j(e_);_events=new Ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(Y1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Xa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(nf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new kt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Si&&r.code!==Jn.Redirect&&r.code!==Jn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ir)this.navigated=!0;else if(r instanceof al){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gW(i.source)},o);this.scheduleNavigation(a,ky,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}EW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ky,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(qb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let E=i?i.snapshot:this.routerState.snapshot.root;g=M1(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return P1(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=xo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ky,null,r)}navigate(t,r={skipLocationChange:!1}){return wW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},_W):r===!1?i=z({},vW):i=r,xo(t))return d1(this.currentUrlTree,t,i);let s=this.parseUrl(t);return d1(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,E)=>{a=g,c=E});let h=this.pendingTasks.add();return n_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ne(4008,!1)}function EW(n){return!(n instanceof Wh)&&!(n instanceof al)}var Oo=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ct;constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ir&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:yN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:xo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(re(vt),re(In),E0("tabindex"),re(hs),re(lr),re(Yr))};static \u0275dir=ht({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ge("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Rh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Do],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Do],replaceUrl:[2,"replaceUrl","replaceUrl",Do],routerLink:"routerLink"},features:[ur]})}return n})();var sf=class{};var Z1=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(jn(t=>t instanceof Ir),fo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Yu(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ot(i).pipe(Eu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=fe(null);let s=i.pipe(Ot(o=>o===null?fe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return ot([s,o]).pipe(Eu())}else return s})}static \u0275fac=function(r){return new(r||n)(ce(vt),ce(xn),ce(sf),ce(Xy))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X1=new Q(""),CW=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ko?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ir?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ai&&t.code===il.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ol&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ol(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tO()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function Yb(n,...e){return wn([{provide:Xa,multi:!0,useValue:n},[],{provide:In,useFactory:eL,deps:[vt]},{provide:Co,multi:!0,useFactory:tL},e.map(t=>t.\u0275providers)])}function eL(n){return n.routerState.root}function of(n,e){return{\u0275kind:n,\u0275providers:e}}function tL(){let n=j(Dt);return e=>{let t=n.get(Kn);if(e!==t.components[0])return;let r=n.get(vt),i=n.get(nL);n.get(Jb)===1&&r.initialNavigation(),n.get(sL,null,Re.Optional)?.setUpPreloading(),n.get(X1,null,Re.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nL=new Q("",{factory:()=>new Ct}),Jb=new Q("",{providedIn:"root",factory:()=>1});function rL(){let n=[{provide:Jb,useValue:0},eb(()=>{let e=j(Dt);return e.get(sb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(vt),s=e.get(nL);n_(i,()=>{r(!0)}),e.get(t_).afterPreactivation=()=>(r(!0),s.closed?fe(void 0):s),i.initialNavigation()}))})];return of(2,n)}function iL(){let n=[eb(()=>{j(vt).setUpLocationChangeListener()}),{provide:Jb,useValue:2}];return of(3,n)}var sL=new Q("");function oL(n){return of(0,[{provide:sL,useExisting:Z1},{provide:sf,useExisting:n}])}function aL(){return of(8,[zb,{provide:nf,useExisting:zb}])}function cL(n){Ti("NgRouterViewTransitions");let e=[{provide:Gb,useValue:Q1},{provide:Wb,useValue:z({skipNextTransition:!!n?.skipInitialTransition},n)}];return of(9,e)}var uL=[Ao,{provide:Ya,useClass:Po},vt,Ja,{provide:In,useFactory:eL,deps:[vt]},Xy,[]],ec=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[uL,[],{provide:Xa,multi:!0,useValue:t},[],r?.errorHandler?{provide:Kb,useValue:r.errorHandler}:[],{provide:Za,useValue:r||{}},r?.useHash?DW():AW(),SW(),r?.preloadingStrategy?oL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?RW(r):[],r?.bindToComponentInputs?aL().\u0275providers:[],r?.enableViewTransitions?cL().\u0275providers:[],MW()]}}static forChild(t){return{ngModule:n,providers:[{provide:Xa,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({})}return n})();function SW(){return{provide:X1,useFactory:()=>{let n=j(YO),e=j(Pe),t=j(Za),r=j(t_),i=j(Ya);return t.scrollOffset&&n.setOffset(t.scrollOffset),new CW(i,r,n,e,t)}}}function DW(){return{provide:Yr,useClass:cb}}function AW(){return{provide:Yr,useClass:_y}}function RW(n){return[n.initialNavigation==="disabled"?iL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?rL().\u0275providers:[]]}var Qb=new Q("");function MW(){return[{provide:Qb,useFactory:tL},{provide:Co,multi:!0,useExisting:Qb}]}var dL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,I=d&63;c||(I=64,o||(E=64)),r.push(t[h],t[g],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new Xb;let E=s<<2|a>>4;if(r.push(E),d!==64){let I=a<<4&240|d>>2;if(r.push(I),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Xb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xW=function(n){let e=dL(n);return hL.encodeByteArray(e,!0)},af=function(n){return xW(n).replace(/\./g,"")},tT=function(n){try{return hL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var NW=()=>kW().__FIREBASE_DEFAULTS__,OW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&tT(n[1]);return e&&JSON.parse(e)},i_=()=>{try{return NW()||OW()||LW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nT=n=>{var e,t;return(t=(e=i_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},s_=n=>{let e=nT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},rT=()=>{var n;return(n=i_())===null||n===void 0?void 0:n.config},iT=n=>{var e;return(e=i_())===null||e===void 0?void 0:e[`_${n}`]};var r_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function o_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[af(JSON.stringify(t)),af(JSON.stringify(o)),""].join(".")}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function FW(){var n;let e=(n=i_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yL(){let n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _L(){return!FW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sT(){try{return typeof indexedDB=="object"}catch{return!1}}function vL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var VW="FirebaseError",Nn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VW,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ps.prototype.create)}},ps=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nn(i,a,r)}};function UW(n,e){return n.replace(BW,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BW=/\{\$([^}]+)}/g;function wL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nc(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(lL(s)&&lL(o)){if(!nc(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function lL(n){return n!==null&&typeof n=="object"}function dl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fl(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function EL(n,e){let t=new eT(n,e);return t.subscribe.bind(t)}var eT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jW(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zb),i.error===void 0&&(i.error=Zb),i.complete===void 0&&(i.complete=Zb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jW(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zb(){}var Age=4*60*60*1e3;function gt(n){return n&&n._delegate?n._delegate:n}var Zn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rc="[DEFAULT]";var oT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new r_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($W(e))try{this.getOrInitializeService({instanceIdentifier:rc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rc){return this.instances.has(e)}getOptions(e=rc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zW(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rc){return this.component?this.component.multipleInstances?e:rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zW(n){return n===rc?void 0:n}function $W(n){return n.instantiationMode==="EAGER"}var a_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new oT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qW=[],Ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ue||{}),HW={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},GW=Ue.INFO,WW={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},KW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=WW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lo=class{constructor(e){this.name=e,this._logLevel=GW,this._logHandler=KW,this._userLogHandler=null,qW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var QW=(n,e)=>e.some(t=>n instanceof t),IL,bL;function YW(){return IL||(IL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JW(){return bL||(bL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TL=new WeakMap,cT=new WeakMap,CL=new WeakMap,aT=new WeakMap,lT=new WeakMap;function ZW(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ri(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&TL.set(t,n)}).catch(()=>{}),lT.set(e,n),e}function XW(n){if(cT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});cT.set(n,e)}var uT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SL(n){uT=n(uT)}function e7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(c_(this),e,...t);return CL.set(r,e.sort?e.sort():[e]),Ri(r)}:JW().includes(n)?function(...e){return n.apply(c_(this),e),Ri(TL.get(this))}:function(...e){return Ri(n.apply(c_(this),e))}}function t7(n){return typeof n=="function"?e7(n):(n instanceof IDBTransaction&&XW(n),QW(n,YW())?new Proxy(n,uT):n)}function Ri(n){if(n instanceof IDBRequest)return ZW(n);if(aT.has(n))return aT.get(n);let e=t7(n);return e!==n&&(aT.set(n,e),lT.set(e,n)),e}var c_=n=>lT.get(n);function u_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ri(o.result),c.oldVersion,c.newVersion,Ri(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var n7=["get","getKey","getAll","getAllKeys","count"],r7=["put","add","delete","clear"],dT=new Map;function DL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dT.get(e))return dT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=r7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n7.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return dT.set(e,s),s}SL(n=>oe(z({},n),{get:(e,t,r)=>DL(e,t)||n.get(e,t,r),has:(e,t)=>!!DL(e,t)||n.has(e,t)}));var fT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i7(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function i7(n){let e=n.getComponent();return e?.type==="VERSION"}var pT="@firebase/app",AL="0.10.13";var gs=new Lo("@firebase/app"),s7="@firebase/app-compat",o7="@firebase/analytics-compat",a7="@firebase/analytics",c7="@firebase/app-check-compat",u7="@firebase/app-check",l7="@firebase/auth",d7="@firebase/auth-compat",h7="@firebase/database",f7="@firebase/data-connect",p7="@firebase/database-compat",g7="@firebase/functions",m7="@firebase/functions-compat",y7="@firebase/installations",_7="@firebase/installations-compat",v7="@firebase/messaging",w7="@firebase/messaging-compat",E7="@firebase/performance",I7="@firebase/performance-compat",b7="@firebase/remote-config",T7="@firebase/remote-config-compat",C7="@firebase/storage",S7="@firebase/storage-compat",D7="@firebase/firestore",A7="@firebase/vertexai-preview",R7="@firebase/firestore-compat",M7="firebase",P7="10.14.1";var gT="[DEFAULT]",x7={[pT]:"fire-core",[s7]:"fire-core-compat",[a7]:"fire-analytics",[o7]:"fire-analytics-compat",[u7]:"fire-app-check",[c7]:"fire-app-check-compat",[l7]:"fire-auth",[d7]:"fire-auth-compat",[h7]:"fire-rtdb",[f7]:"fire-data-connect",[p7]:"fire-rtdb-compat",[g7]:"fire-fn",[m7]:"fire-fn-compat",[y7]:"fire-iid",[_7]:"fire-iid-compat",[v7]:"fire-fcm",[w7]:"fire-fcm-compat",[E7]:"fire-perf",[I7]:"fire-perf-compat",[b7]:"fire-rc",[T7]:"fire-rc-compat",[C7]:"fire-gcs",[S7]:"fire-gcs-compat",[D7]:"fire-fst",[R7]:"fire-fst-compat",[A7]:"fire-vertex","fire-js":"fire-js",[M7]:"fire-js-all"};var cf=new Map,k7=new Map,mT=new Map;function RL(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mi(n){let e=n.name;if(mT.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;mT.set(e,n);for(let t of cf.values())RL(t,n);for(let t of k7.values())RL(t,n);return!0}function ic(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function br(n){return n.settings!==void 0}var N7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new ps("app","Firebase",N7);var yT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}};var Pi=P7;function wT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fo.create("bad-app-name",{appName:String(i)});if(t||(t=rT()),!t)throw Fo.create("no-options");let s=cf.get(i);if(s){if(nc(t,s.options)&&nc(r,s.config))return s;throw Fo.create("duplicate-app",{appName:i})}let o=new a_(i);for(let c of mT.values())o.addComponent(c);let a=new yT(t,r,o);return cf.set(i,a),a}function Vo(n=gT){let e=cf.get(n);if(!e&&n===gT&&rT())return wT();if(!e)throw Fo.create("no-app",{appName:n});return e}function l_(){return Array.from(cf.values())}function wt(n,e,t){var r;let i=(r=x7[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(a.join(" "));return}Mi(new Zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var O7="firebase-heartbeat-database",L7=1,uf="firebase-heartbeat-store",hT=null;function kL(){return hT||(hT=u_(O7,L7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fo.create("idb-open",{originalErrorMessage:n.message})})),hT}function F7(n){return b(this,null,function*(){try{let t=(yield kL()).transaction(uf),r=yield t.objectStore(uf).get(NL(n));return yield t.done,r}catch(e){if(e instanceof Nn)gs.warn(e.message);else{let t=Fo.create("idb-get",{originalErrorMessage:e?.message});gs.warn(t.message)}}})}function ML(n,e){return b(this,null,function*(){try{let r=(yield kL()).transaction(uf,"readwrite");yield r.objectStore(uf).put(e,NL(n)),yield r.done}catch(t){if(t instanceof Nn)gs.warn(t.message);else{let r=Fo.create("idb-set",{originalErrorMessage:t?.message});gs.warn(r.message)}}})}function NL(n){return`${n.name}!${n.options.appId}`}var V7=1024,U7=30*24*60*60*1e3,_T=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=U7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gs.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=PL(),{heartbeatsToSend:r,unsentEntries:i}=B7(this._heartbeatsCache.heartbeats),s=af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return gs.warn(t),""}})}};function PL(){return new Date().toISOString().substring(0,10)}function B7(n,e=V7){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return sT()?vL().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield F7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ML(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ML(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xL(n){return af(JSON.stringify({version:2,heartbeats:n})).length}function j7(n){Mi(new Zn("platform-logger",e=>new fT(e),"PRIVATE")),Mi(new Zn("heartbeat",e=>new _T(e),"PRIVATE")),wt(pT,AL,n),wt(pT,AL,"esm2017"),wt("fire-js","")}j7("");var z7="firebase",$7="10.14.1";wt(z7,$7,"app");function bn(n){return typeof n=="function"}function OL(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var d_=OL(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function lf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(bn(r))try{r()}catch(s){e=s instanceof d_?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{LL(s)}catch(o){e=e??[],o instanceof d_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new d_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LL(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&lf(t,e)}remove(e){let{_finalizers:t}=this;t&&lf(t,e),e instanceof n&&e._removeParent(this)}};xi.EMPTY=(()=>{let n=new xi;return n.closed=!0,n})();var ame=xi.EMPTY;function h_(n){return n instanceof xi||n&&"closed"in n&&bn(n.remove)&&bn(n.add)&&bn(n.unsubscribe)}function LL(n){bn(n)?n():n.unsubscribe()}var Zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pl={setTimeout(n,e,...t){let{delegate:r}=pl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function FL(n){pl.setTimeout(()=>{let{onUnhandledError:e}=Zr;if(e)e(n);else throw n})}function ET(){}var VL=IT("C",void 0,void 0);function UL(n){return IT("E",void 0,n)}function BL(n){return IT("N",n,void 0)}function IT(n,e,t){return{kind:n,value:e,error:t}}var sc=null;function jL(n){if(Zr.useDeprecatedSynchronousErrorHandling){let e=!sc;if(e&&(sc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=sc;if(sc=null,t)throw r}}else n()}function zL(n){Zr.useDeprecatedSynchronousErrorHandling&&sc&&(sc.errorThrown=!0,sc.error=n)}var oc=class extends xi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,h_(e)&&e.add(this)):this.destination=G7}static create(e,t,r){return new gl(e,t,r)}next(e){this.isStopped?TT(BL(e),this):this._next(e)}error(e){this.isStopped?TT(UL(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?TT(VL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q7=Function.prototype.bind;function bT(n,e){return q7.call(n,e)}var CT=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){f_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){f_(r)}else f_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){f_(t)}}},gl=class extends oc{constructor(e,t,r){super();let i;if(bn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Zr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bT(e.next,s),error:e.error&&bT(e.error,s),complete:e.complete&&bT(e.complete,s)}):i=e}this.destination=new CT(i)}};function f_(n){Zr.useDeprecatedSynchronousErrorHandling?zL(n):FL(n)}function H7(n){throw n}function TT(n,e){let{onStoppedNotification:t}=Zr;t&&pl.setTimeout(()=>t(n,e))}var G7={closed:!0,next:ET,error:H7,complete:ET};var $L=typeof Symbol=="function"&&Symbol.observable||"@@observable";function p_(n){return n}function qL(n){return n.length===0?p_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var g_=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=K7(t)?t:new gl(t,r,i);return jL(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HL(r),new r((i,s)=>{let o=new gl({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$L](){return this}pipe(...t){return qL(t)(this)}toPromise(t){return t=HL(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function HL(n){var e;return(e=n??Zr.Promise)!==null&&e!==void 0?e:Promise}function W7(n){return n&&bn(n.next)&&bn(n.error)&&bn(n.complete)}function K7(n){return n&&n instanceof oc||W7(n)&&h_(n)}function Q7(n){return bn(n?.lift)}function ml(n){return e=>{if(Q7(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function m_(n,e,t,r,i){return new ST(n,e,t,r,i)}var ST=class extends oc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var DT={now(){return(DT.delegate||Date).now()},delegate:void 0};var y_=class extends xi{constructor(e,t){super()}schedule(e,t=0){return this}};var df={setInterval(n,e,...t){let{delegate:r}=df;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=df;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var yl=class extends y_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return df.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&df.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,lf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _l=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_l.now=DT.now;var vl=class extends _l{constructor(e,t=_l.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var AT=new vl(yl);var __=class extends yl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var v_=class extends vl{};var RT=new v_(__);function w_(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function E_(n,e=0){return ml((t,r)=>{t.subscribe(m_(r,i=>w_(r,n,()=>r.next(i),e),()=>w_(r,n,()=>r.complete(),e),i=>w_(r,n,()=>r.error(i),e)))})}function I_(n,e=0){return ml((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function MT(n,e,t){let r=bn(n)||e||t?{next:n,error:e,complete:t}:n;return r?ml((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(m_(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):p_}var ms=new vo("ANGULARFIRE2_VERSION");function El(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var cc=(n,e)=>{let t=e?[e]:l_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Uo=class{constructor(){return cc(Y7)}},Y7="app-check";function wl(){}var b_=class{zone;delegate;constructor(e,t=RT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},PT=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wl,{},wl,wl)),t.pipe(MT({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new b_(Zone.current)),this.insideAngular=t.run(()=>new b_(Zone.current,AT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ce(Pe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T_(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function J7(n){return T_().ngZone.runOutsideAngular(()=>n())}function ac(n){return T_().ngZone.run(()=>n())}function Z7(n){return X7(T_())(n)}function X7(n){return function(t){return t=t.lift(new PT(n.ngZone)),t.pipe(I_(n.outsideAngular),E_(n.insideAngular))}}var eK=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ac(()=>n.apply(void 0,r))},nt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=ac(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wl,{},wl,wl))),r[s]=eK(r[s],t));let i=J7(()=>n.apply(this,r));if(!e)if(i instanceof g_){let s=T_();return i.pipe(I_(s.outsideAngular),E_(s.insideAngular))}else return ac(()=>i);return i instanceof g_?i.pipe(Z7):i instanceof Promise?ac(()=>new Promise((s,o)=>i.then(a=>ac(()=>s(a)),a=>ac(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ac(()=>i)};var Xr=class{constructor(e){return e}},ys=class{constructor(){return l_()}};function tK(n){return n&&n.length===1?n[0]:new Xr(Vo())}var xT=new Q("angularfire2._apps"),nK={provide:Xr,useFactory:tK,deps:[[new en,xT]]},rK={provide:ys,deps:[[new en,xT]]};function iK(n){return(e,t)=>{let r=t.get(bi);wt("angularfire",ms.full,"core"),wt("angularfire",ms.full,"app"),wt("angular",kO.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function GL(n,...e){return wn([nK,rK,{provide:xT,useFactory:iK(n),multi:!0,deps:[Pe,Dt,Bo,...e]}])}var WL=nt(wT,!0);var KL=()=>{};var QL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},sK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},YL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,I=d&63;c||(I=64,o||(E=64)),r.push(t[h],t[g],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new NT;let E=s<<2|a>>4;if(r.push(E),d!==64){let I=a<<4&240|d>>2;if(r.push(I),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},NT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oK=function(n){let e=QL(n);return YL.encodeByteArray(e,!0)},LT=function(n){return oK(n).replace(/\./g,"")},C_=function(n){try{return YL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aK=()=>JL().__FIREBASE_DEFAULTS__,cK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&C_(n[1]);return e&&JSON.parse(e)},ZL=()=>{try{return KL()||aK()||cK()||uK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var XL=n=>ZL()?.[`_${n}`];function hf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function lK(){let n=ZL()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iF(){return!lK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FT(){try{return typeof indexedDB=="object"}catch{return!1}}function sF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var dK="FirebaseError",Tr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_s.prototype.create)}},_s=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hK(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tr(i,a,r)}};function hK(n,e){return n.replace(fK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fK=/\{\$([^}]+)}/g;function VT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oF(n,e){let t=new OT(n,e);return t.subscribe.bind(t)}var OT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");pK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=kT),i.error===void 0&&(i.error=kT),i.complete===void 0&&(i.complete=kT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kT(){}var Xye=4*60*60*1e3;function jo(n){return n&&n._delegate?n._delegate:n}var ei=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gK=[],Le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Le||{}),mK={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},yK=Le.INFO,_K={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},vK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_K[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zo=class{constructor(e){this.name=e,this._logLevel=yK,this._logHandler=vK,this._userLogHandler=null,gK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}};var BT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wK(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function wK(n){return n.getComponent()?.type==="VERSION"}var jT="@firebase/app",aF="0.14.4";var ws=new zo("@firebase/app"),EK="@firebase/app-compat",IK="@firebase/analytics-compat",bK="@firebase/analytics",TK="@firebase/app-check-compat",CK="@firebase/app-check",SK="@firebase/auth",DK="@firebase/auth-compat",AK="@firebase/database",RK="@firebase/data-connect",MK="@firebase/database-compat",PK="@firebase/functions",xK="@firebase/functions-compat",kK="@firebase/installations",NK="@firebase/installations-compat",OK="@firebase/messaging",LK="@firebase/messaging-compat",FK="@firebase/performance",VK="@firebase/performance-compat",UK="@firebase/remote-config",BK="@firebase/remote-config-compat",jK="@firebase/storage",zK="@firebase/storage-compat",$K="@firebase/firestore",qK="@firebase/ai",HK="@firebase/firestore-compat",GK="firebase",WK="12.4.0";var KK={[jT]:"fire-core",[EK]:"fire-core-compat",[bK]:"fire-analytics",[IK]:"fire-analytics-compat",[CK]:"fire-app-check",[TK]:"fire-app-check-compat",[SK]:"fire-auth",[DK]:"fire-auth-compat",[AK]:"fire-rtdb",[RK]:"fire-data-connect",[MK]:"fire-rtdb-compat",[PK]:"fire-fn",[xK]:"fire-fn-compat",[kK]:"fire-iid",[NK]:"fire-iid-compat",[OK]:"fire-fcm",[LK]:"fire-fcm-compat",[FK]:"fire-perf",[VK]:"fire-perf-compat",[UK]:"fire-rc",[BK]:"fire-rc-compat",[jK]:"fire-gcs",[zK]:"fire-gcs-compat",[$K]:"fire-fst",[HK]:"fire-fst-compat",[qK]:"fire-vertex","fire-js":"fire-js",[GK]:"fire-js-all"};var QK=new Map,YK=new Map,cF=new Map;function uF(n,e){try{n.container.addComponent(e)}catch(t){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $o(n){let e=n.name;if(cF.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;cF.set(e,n);for(let t of QK.values())uF(t,n);for(let t of YK.values())uF(t,n);return!0}function Es(n){return n==null?!1:n.settings!==void 0}var JK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qT=new _s("app","Firebase",JK);var Il=WK;function vs(n,e,t){let r=KK[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(o.join(" "));return}$o(new ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var ZK="firebase-heartbeat-database",XK=1,ff="firebase-heartbeat-store",UT=null;function pF(){return UT||(UT=u_(ZK,XK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(n=>{throw qT.create("idb-open",{originalErrorMessage:n.message})})),UT}function eQ(n){return b(this,null,function*(){try{let t=(yield pF()).transaction(ff),r=yield t.objectStore(ff).get(gF(n));return yield t.done,r}catch(e){if(e instanceof Tr)ws.warn(e.message);else{let t=qT.create("idb-get",{originalErrorMessage:e?.message});ws.warn(t.message)}}})}function lF(n,e){return b(this,null,function*(){try{let r=(yield pF()).transaction(ff,"readwrite");yield r.objectStore(ff).put(e,gF(n)),yield r.done}catch(t){if(t instanceof Tr)ws.warn(t.message);else{let r=qT.create("idb-set",{originalErrorMessage:t?.message});ws.warn(r.message)}}})}function gF(n){return`${n.name}!${n.options.appId}`}var tQ=1024,nQ=30,zT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $T(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>nQ){let i=iQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ws.warn(e)}})}getHeartbeatsHeader(){return b(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=dF(),{heartbeatsToSend:t,unsentEntries:r}=rQ(this._heartbeatsCache.heartbeats),i=LT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ws.warn(e),""}})}};function dF(){return new Date().toISOString().substring(0,10)}function rQ(n,e=tQ){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),hF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var $T=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return FT()?sF().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield eQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return lF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return lF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function hF(n){return LT(JSON.stringify({version:2,heartbeats:n})).length}function iQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function sQ(n){$o(new ei("platform-logger",e=>new BT(e),"PRIVATE")),$o(new ei("heartbeat",e=>new zT(e),"PRIVATE")),vs(jT,aF,n),vs(jT,aF,"esm2020"),vs("fire-js","")}sQ("");function bF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var TF=bF,CF=new _s("auth","Firebase",bF());var R_=new zo("@firebase/auth");function lQ(n,...e){R_.logLevel<=Le.WARN&&R_.warn(`Auth (${Il}): ${n}`,...e)}function D_(n,...e){R_.logLevel<=Le.ERROR&&R_.error(`Auth (${Il}): ${n}`,...e)}function mF(n,...e){throw nC(n,...e)}function tC(n,...e){return nC(n,...e)}function SF(n,e,t){let r=oe(z({},TF()),{[e]:t});return new _s("auth","Firebase",r).create(e,{appName:n.name})}function A_(n){return SF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CF.create(n,...e)}function et(n,e,...t){if(!n)throw nC(e,...t)}function pf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw D_(e),new Error(e)}function M_(n,e){n||pf(e)}function dQ(){return yF()==="http:"||yF()==="https:"}function yF(){return typeof self<"u"&&self.location?.protocol||null}function hQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dQ()||nF()||"connection"in navigator)?navigator.onLine:!0}function fQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,M_(t>e,"Short delay should be less than long delay!"),this.isMobile=eF()||rF()}get(){return hQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pQ(n,e){M_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var P_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yQ=new dc(3e4,6e4);function DF(n,e){return n.tenantId&&!e.tenantId?oe(z({},e),{tenantId:n.tenantId}):e}function L_(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return AF(n,i,()=>b(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=VT(z({key:n.config.apiKey},h)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let I=z({method:e,headers:E},d);return tF()||(I.referrerPolicy="no-referrer"),n.emulatorConfig&&hf(n.emulatorConfig.host)&&(I.credentials="include"),P_.fetch()(yield RF(n,n.config.apiHost,t,g),I)}))})}function AF(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=z(z({},gQ),e);try{let i=new WT(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw S_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw S_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw S_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw S_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw SF(n,h,d);mF(n,h)}}catch(i){if(i instanceof Tr)throw i;mF(n,"network-request-failed",{message:String(i)})}})}function RF(n,e,t,r){return b(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?pQ(n.config,i):`${n.config.apiScheme}://${i}`;return mQ.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var WT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(tC(this.auth,"network-request-failed")),yQ.get())})}};function S_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=tC(n,e,r);return i.customData._tokenResponse=t,i}function _Q(n,e){return b(this,null,function*(){return L_(n,"POST","/v1/accounts:delete",e)})}function x_(n,e){return b(this,null,function*(){return L_(n,"POST","/v1/accounts:lookup",e)})}function gf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function MF(n,e=!1){return b(this,null,function*(){let t=jo(n),r=yield t.getIdToken(e),i=PF(r);et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:gf(HT(i.auth_time)),issuedAtTime:gf(HT(i.iat)),expirationTime:gf(HT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function HT(n){return Number(n)*1e3}function PF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return D_("JWT malformed, contained fewer than 3 sections"),null;try{let i=C_(t);return i?JSON.parse(i):(D_("Failed to decode base64 JWT payload"),null)}catch(i){return D_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _F(n){let e=PF(n);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function KT(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Tr&&vQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function vQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var QT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gf(this.lastLoginAt),this.creationTime=gf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function k_(n){return b(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield KT(n,x_(e,{idToken:t}));et(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?kF(i.providerUserInfo):[],o=wQ(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function xF(n){return b(this,null,function*(){let e=jo(n);yield k_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function wQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=rh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function EQ(n,e){return b(this,null,function*(){let t=yield AF(n,{},()=>b(null,null,function*(){let r=VT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield RF(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&hf(n.emulatorConfig.host)&&(c.credentials="include"),P_.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function IQ(n,e){return b(this,null,function*(){return L_(n,"POST","/v2/accounts:revokeToken",DF(n,e))})}var mf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_F(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){et(e.length!==0,"internal-error");let t=_F(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield EQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(et(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(et(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(et(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return pf("not implemented")}};function qo(n,e){et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var uc=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=rh(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield KT(this,this.stsTokenManager.getToken(this.auth,e));return et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return MF(this,e)}reload(){return xF(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>z({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(oe(z({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield k_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Es(this.auth.app))return Promise.reject(A_(this.auth));let e=yield this.getIdToken();return yield KT(this,_Q(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return oe(z({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>z({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:E,isAnonymous:I,providerData:k,stsTokenManager:F}=t;et(g&&F,e,"internal-error");let N=mf.fromJSON(this.name,F);et(typeof g=="string",e,"internal-error"),qo(r,e.name),qo(i,e.name),et(typeof E=="boolean",e,"internal-error"),et(typeof I=="boolean",e,"internal-error"),qo(s,e.name),qo(o,e.name),qo(a,e.name),qo(c,e.name),qo(d,e.name),qo(h,e.name);let q=new n({uid:g,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:I,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:N,createdAt:d,lastLoginAt:h});return k&&Array.isArray(k)&&(q.providerData=k.map(te=>z({},te))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new mf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield k_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];et(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?kF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new mf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var vF=new Map;function lc(n){M_(n instanceof Function,"Expected a class definition");let e=vF.get(n);return e?(M_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vF.set(n,e),e)}var bQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),YT=bQ;function GT(n,e,t){return`firebase:${n}:${e}:${t}`}var N_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=GT(this.userKey,i.apiKey,s),this.fullPersistenceKey=GT("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield x_(this.auth,{idToken:e}).catch(()=>{});return t?uc._fromGetAccountInfoResponse(this.auth,t,e):null}return uc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(lc(YT),e,r);let i=(yield Promise.all(t.map(d=>b(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||lc(YT),o=GT(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let E=yield x_(e,{idToken:h}).catch(()=>{});if(!E)break;g=yield uc._fromGetAccountInfoResponse(e,E,h)}else g=uc._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>b(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function wF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RQ(e))return"Blackberry";if(MQ(e))return"Webos";if(CQ(e))return"Safari";if((e.includes("chrome/")||SQ(e))&&!e.includes("edge/"))return"Chrome";if(AQ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function TQ(n=fr()){return/firefox\//i.test(n)}function CQ(n=fr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SQ(n=fr()){return/crios\//i.test(n)}function DQ(n=fr()){return/iemobile/i.test(n)}function AQ(n=fr()){return/android/i.test(n)}function RQ(n=fr()){return/blackberry/i.test(n)}function MQ(n=fr()){return/webos/i.test(n)}function NF(n,e=[]){let t;switch(n){case"Browser":t=wF(fr());break;case"Worker":t=`${wF(fr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Il}/${r}`}var JT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function PQ(t){return b(this,arguments,function*(n,e={}){return L_(n,"GET","/v2/passwordPolicy",DF(n,e))})}var xQ=6,ZT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var XT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O_(this),this.idTokenSubscription=new O_(this),this.beforeStateQueue=new JT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lc(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield N_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield x_(this,{idToken:e}),r=yield uc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){if(Es(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield k_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fQ()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Es(this.app))return Promise.reject(A_(this));let t=e?jo(e):null;return t&&et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Es(this.app)?Promise.reject(A_(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Es(this.app)?Promise.reject(A_(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(lc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield PQ(this),t=new ZT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _s("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield IQ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&lc(e)||this._popupRedirectResolver;et(t,this,"argument-error"),this.redirectPersistenceManager=yield N_.create(this,[lc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return b(this,null,function*(){if(Es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lQ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function kQ(n){return jo(n)}var O_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oF(t=>this.observer=t)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var NQ={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OQ(n){NQ=n}function LQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function FQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(lc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rC(n,e,t,r){return jo(n).onAuthStateChanged(e,t,r)}var R_e=LQ("rcb"),M_e=new dc(3e4,6e4);var P_e=new dc(2e3,1e4);var x_e=10*60*1e3;var k_e=new dc(3e4,6e4);var N_e=new dc(5e3,15e3);var O_e=encodeURIComponent("fac");var EF="@firebase/auth",IF="1.11.0";var eC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function VQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UQ(n){$o(new ei("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NF(n)},d=new XT(r,i,s,c);return FQ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$o(new ei("auth-internal",e=>{let t=kQ(e.getProvider("auth").getImmediate());return(r=>new eC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vs(EF,IF,VQ(n)),vs(EF,IF,"esm2020")}var BQ=5*60,L_e=XL("authIdTokenMaxAge")||BQ;function jQ(){return document.getElementsByTagName("head")?.[0]??document}OQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=tC("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",jQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UQ("Browser");function OF(n){return new Me(function(e){var t=rC(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function ZF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XF=ZF,eV=new ps("auth","Firebase",ZF());var z_=new Lo("@firebase/auth");function qQ(n,...e){z_.logLevel<=Ue.WARN&&z_.warn(`Auth (${Pi}): ${n}`,...e)}function V_(n,...e){z_.logLevel<=Ue.ERROR&&z_.error(`Auth (${Pi}): ${n}`,...e)}function Cr(n,...e){throw TC(n,...e)}function ti(n,...e){return TC(n,...e)}function bC(n,e,t){let r=Object.assign(Object.assign({},XF()),{[e]:t});return new ps("auth","Firebase",r).create(e,{appName:n.name})}function Ts(n){return bC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HQ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(n,"argument-error"),bC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function TC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eV.create(n,...e)}function me(n,e,...t){if(!n)throw TC(e,...t)}function Is(n){let e="INTERNAL ASSERTION FAILED: "+n;throw V_(e),new Error(e)}function Cs(n,e){n||Is(e)}function oC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function GQ(){return LF()==="http:"||LF()==="https:"}function LF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function WQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GQ()||gL()||"connection"in navigator)?navigator.onLine:!0}function KQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var hc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=fL()||mL()}get(){return WQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function CC(n,e){Cs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YQ=new hc(3e4,6e4);function Go(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ss(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return tV(n,i,()=>b(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=dl(Object.assign({key:n.config.apiKey},h)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:E},d);return pL()||(I.referrerPolicy="no-referrer"),$_.fetch()(nV(n,n.config.apiHost,t,g),I)}))})}function tV(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},QQ),e);try{let i=new aC(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw F_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw F_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw F_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw F_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bC(n,h,d);Cr(n,h)}}catch(i){if(i instanceof Nn)throw i;Cr(n,"network-request-failed",{message:String(i)})}})}function Tf(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){let d=yield Ss(n,e,t,r,i);return"mfaPendingCredential"in d&&Cr(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function nV(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?CC(n.config,i):`${n.config.apiScheme}://${i}`}function JQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var aC=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),YQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function F_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ti(n,e,r);return i.customData._tokenResponse=t,i}function FF(n){return n!==void 0&&n.enterprise!==void 0}var cC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function ZQ(n,e){return b(this,null,function*(){return Ss(n,"GET","/v2/recaptchaConfig",Go(n,e))})}function XQ(n,e){return b(this,null,function*(){return Ss(n,"POST","/v1/accounts:delete",e)})}function rV(n,e){return b(this,null,function*(){return Ss(n,"POST","/v1/accounts:lookup",e)})}function _f(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function SC(n,e=!1){return b(this,null,function*(){let t=gt(n),r=yield t.getIdToken(e),i=DC(r);me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:_f(iC(i.auth_time)),issuedAtTime:_f(iC(i.iat)),expirationTime:_f(iC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function iC(n){return Number(n)*1e3}function DC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return V_("JWT malformed, contained fewer than 3 sections"),null;try{let i=tT(t);return i?JSON.parse(i):(V_("Failed to decode base64 JWT payload"),null)}catch(i){return V_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VF(n){let e=DC(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Tl(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nn&&eY(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function eY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var uC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_f(this.lastLoginAt),this.creationTime=_f(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function q_(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Tl(n,rV(t,{idToken:r}));me(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iV(s.providerUserInfo):[],a=tY(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function AC(n){return b(this,null,function*(){let e=gt(n);yield q_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function tY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iV(n){return n.map(e=>{var{providerId:t}=e,r=Dg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nY(n,e){return b(this,null,function*(){let t=yield tV(n,{},()=>b(null,null,function*(){let r=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=nV(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$_.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function rY(n,e){return b(this,null,function*(){return Ss(n,"POST","/v2/accounts:revokeToken",Go(n,e))})}var vf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");let t=VF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield nY(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Is("not implemented")}};function Ho(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cl=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wf(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Tl(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return SC(this,e)}reload(){return AC(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield q_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(br(this.auth.app))return Promise.reject(Ts(this.auth));let e=yield this.getIdToken();return yield Tl(this,XQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,F=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,te=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:ae,isAnonymous:je,providerData:le,stsTokenManager:S}=t;me(Y&&S,e,"internal-error");let _=vf.fromJSON(this.name,S);me(typeof Y=="string",e,"internal-error"),Ho(g,e.name),Ho(E,e.name),me(typeof ae=="boolean",e,"internal-error"),me(typeof je=="boolean",e,"internal-error"),Ho(I,e.name),Ho(k,e.name),Ho(F,e.name),Ho(N,e.name),Ho(q,e.name),Ho(te,e.name);let w=new n({uid:Y,auth:e,email:E,emailVerified:ae,displayName:g,isAnonymous:je,photoURL:k,phoneNumber:I,tenantId:F,stsTokenManager:_,createdAt:q,lastLoginAt:te});return le&&Array.isArray(le)&&(w.providerData=le.map(C=>Object.assign({},C))),N&&(w._redirectEventId=N),w}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new vf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield q_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];me(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?iV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new vf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var UF=new Map;function bs(n){Cs(n instanceof Function,"Expected a class definition");let e=UF.get(n);return e?(Cs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UF.set(n,e),e)}var iY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),lC=iY;function U_(n,e,t){return`firebase:${n}:${e}:${t}`}var H_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=U_(this.userKey,i.apiKey,s),this.fullPersistenceKey=U_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Cl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(bs(lC),e,r);let i=(yield Promise.all(t.map(d=>b(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||bs(lC),o=U_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g=Cl._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>b(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function BF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lV(e))return"Blackberry";if(dV(e))return"Webos";if(oV(e))return"Safari";if((e.includes("chrome/")||aV(e))&&!e.includes("edge/"))return"Chrome";if(uV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sV(n=un()){return/firefox\//i.test(n)}function oV(n=un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aV(n=un()){return/crios\//i.test(n)}function cV(n=un()){return/iemobile/i.test(n)}function uV(n=un()){return/android/i.test(n)}function lV(n=un()){return/blackberry/i.test(n)}function dV(n=un()){return/webos/i.test(n)}function RC(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sY(n=un()){var e;return RC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oY(){return yL()&&document.documentMode===10}function hV(n=un()){return RC(n)||uV(n)||dV(n)||lV(n)||/windows phone/i.test(n)||cV(n)}function fV(n,e=[]){let t;switch(n){case"Browser":t=BF(un());break;case"Worker":t=`${BF(un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pi}/${r}`}var dC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aY(t){return b(this,arguments,function*(n,e={}){return Ss(n,"GET","/v2/passwordPolicy",Go(n,e))})}var cY=6,hC=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:cY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new dC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bs(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield H_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield rV(this,{idToken:e}),r=yield Cl._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(br(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield q_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=KQ()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(br(this.app))return Promise.reject(Ts(this));let t=e?gt(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return br(this.app)?Promise.reject(Ts(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return br(this.app)?Promise.reject(Ts(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(bs(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield aY(this),t=new hC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ps("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield rY(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&bs(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=yield H_.create(this,[bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&qQ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wo(n){return gt(n)}var G_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EL(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tv={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uY(n){tv=n}function pV(n){return tv.loadJS(n)}function lY(){return tv.recaptchaEnterpriseScript}function dY(){return tv.gapiScript}function gV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var hY="recaptcha-enterprise",fY="NO_RECAPTCHA",pC=class{constructor(e){this.type=hY,this.auth=Wo(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>b(null,null,function*(){ZQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new cC(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;FF(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(fY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&FF(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lY();c.length!==0&&(c+=a),pV(c).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})})}};function jF(n,e,t,r=!1){return b(this,null,function*(){let i=new pC(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function gC(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield jF(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>b(null,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield jF(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function MC(n,e){let t=ic(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(nc(s,e??{}))return i;Cr(i,"already-initialized")}return t.initialize({options:e})}function pY(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function PC(n,e,t){let r=Wo(n);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=mV(e),{host:o,port:a}=gY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||mY()}function mV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gY(n){let e=mV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:zF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:zF(o)}}}function zF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function mY(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Sl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}};function yY(n,e){return b(this,null,function*(){return Ss(n,"POST","/v1/accounts:signUp",e)})}function _Y(n,e){return b(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithPassword",Go(n,e))})}function vY(n,e){return b(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))})}function wY(n,e){return b(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))})}var Ef=class n extends Sl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gC(e,t,"signInWithPassword",_Y);case"emailLink":return vY(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gC(e,r,"signUpPassword",yY);case"emailLink":return wY(e,{idToken:t,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function bl(n,e){return b(this,null,function*(){return Tf(n,"POST","/v1/accounts:signInWithIdp",Go(n,e))})}var EY="http://localhost",W_=class n extends Sl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Dg(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return bl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,bl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}buildRequest(){let e={requestUri:EY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}};function IY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bY(n){let e=hl(fl(n)).link,t=e?hl(fl(e)).deep_link_id:null,r=hl(fl(n)).deep_link_id;return(r?hl(fl(r)).link:null)||r||t||e||n}var K_=class n{constructor(e){var t,r,i,s,o,a;let c=hl(fl(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=IY((i=c.mode)!==null&&i!==void 0?i:null);me(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=bY(e);try{return new n(t)}catch{return null}}};var yV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ef._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=K_.parseLink(r);return me(i,"argument-error"),Ef._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),If=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Q_=class extends If{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var xC=(()=>{class n extends Q_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return W_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function TY(n,e){return b(this,null,function*(){return Tf(n,"POST","/v1/accounts:signUp",Go(n,e))})}var Dl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let s=yield Cl._fromIdTokenResponse(e,r,i),o=$F(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$F(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $F(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var mC=class n extends Nn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _V(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mC._fromErrorAndOperation(n,s,e,r):s})}function CY(n,e,t=!1){return b(this,null,function*(){let r=yield Tl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Dl._forOperation(n,"link",r)})}function SY(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(br(r.app))return Promise.reject(Ts(r));let i="reauthenticate";try{let s=yield Tl(n,_V(r,i,e,n),t);me(s.idToken,r,"internal-error");let o=DC(s.idToken);me(o,r,"internal-error");let{sub:a}=o;return me(n.uid===a,r,"user-mismatch"),Dl._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Cr(r,"user-mismatch"),s}})}function vV(n,e,t=!1){return b(this,null,function*(){if(br(n.app))return Promise.reject(Ts(n));let r="signIn",i=yield _V(n,r,e),s=yield Dl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function kC(n,e){return b(this,null,function*(){return vV(Wo(n),e)})}function wV(n){return b(this,null,function*(){let e=Wo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function NC(n,e,t){return b(this,null,function*(){if(br(n.app))return Promise.reject(Ts(n));let r=Wo(n),o=yield gC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&wV(n),c}),a=yield Dl._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function OC(n,e,t){return br(n.app)?Promise.reject(Ts(n)):kC(gt(n),yV.credential(e,t)).catch(r=>b(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&wV(n),r}))}function DY(n,e){return b(this,null,function*(){return Ss(n,"POST","/v1/accounts:update",e)})}function LC(r,i){return b(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=gt(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Tl(s,DY(s.auth,a));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let d=s.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function FC(n,e,t,r){return gt(n).onIdTokenChanged(e,t,r)}function VC(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}function UC(n){return gt(n).signOut()}var Y_="__sak";var J_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Y_,"1"),this.storage.removeItem(Y_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var AY=1e3,RY=10,MY=(()=>{class n extends J_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);oY()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,RY):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},AY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield gi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield gi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield gi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),EV=MY;var PY=(()=>{class n extends J_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),BC=PY;function xY(n){return Promise.all(n.map(e=>b(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var kY=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>b(this,null,function*(){return h(r.origin,o)})),d=yield xY(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function jC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var yC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=jC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let E=g;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(E.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ki(){return window}function NY(n){ki().location.href=n}function IV(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}function OY(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function LY(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FY(){return IV()?self:null}var bV="firebaseLocalStorageDb",VY=1,Z_="firebaseLocalStorage",TV="fbase_key",fc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function nv(n,e){return n.transaction([Z_],e?"readwrite":"readonly").objectStore(Z_)}function UY(){let n=indexedDB.deleteDatabase(bV);return new fc(n).toPromise()}function _C(){let n=indexedDB.open(bV,VY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Z_,{keyPath:TV})}catch(i){t(i)}}),n.addEventListener("success",()=>b(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Z_)?e(r):(r.close(),yield UY(),e(yield _C()))}))})}function qF(n,e,t){return b(this,null,function*(){let r=nv(n,!0).put({[TV]:e,value:t});return new fc(r).toPromise()})}function BY(n,e){return b(this,null,function*(){let t=nv(n,!1).get(e),r=yield new fc(t).toPromise();return r===void 0?null:r.value})}function HF(n,e){let t=nv(n,!0).delete(e);return new fc(t).toPromise()}var jY=800,zY=3,$Y=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield _C(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>zY)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return IV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=kY._getInstance(FY()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield OY(),!this.activeServiceWorker)return;this.sender=new yC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||LY()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield _C();return yield qF(t,Y_,"1"),yield HF(t,Y_),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>qF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>BY(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>HF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=nv(s,!1).getAll();return new fc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),jY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),CV=$Y;var Cwe=gV("rcb"),Swe=new hc(3e4,6e4);function SV(n,e){return e?bs(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var bf=class extends Sl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qY(n){return vV(n.auth,new bf(n),n.bypassAuthState)}function HY(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),SY(t,new bf(n),n.bypassAuthState)}function GY(n){return b(this,null,function*(){let{auth:e,user:t}=n;return me(t,e,"internal-error"),CY(t,new bf(n),n.bypassAuthState)})}var X_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qY;case"linkViaPopup":case"linkViaRedirect":return GY;case"reauthViaPopup":case"reauthViaRedirect":return HY;default:Cr(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var WY=new hc(2e3,1e4);function zC(n,e,t){return b(this,null,function*(){if(br(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));let r=Wo(n);HQ(n,e,If);let i=SV(r,t);return new KY(r,"signInViaPopup",e,i).executeNotNull()})}var KY=(()=>{class n extends X_{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return me(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Cs(this.filter.length===1,"Popup operations only handle one event");let t=jC();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,WY.get())};t()}}n.currentPopupAction=null;return n})(),QY="pendingRedirect",B_=new Map,vC=class n extends X_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=B_.get(this.auth._key());if(!e){try{let r=(yield YY(this.resolver,this.auth))?yield gi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}B_.set(this.auth._key(),e)}return this.bypassAuthState||B_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return gi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function YY(n,e){return b(this,null,function*(){let t=XY(e),r=ZY(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function JY(n,e){B_.set(n._key(),e)}function ZY(n){return bs(n._redirectPersistence)}function XY(n){return U_(QY,n.config.apiKey,n.name)}function eJ(n,e,t=!1){return b(this,null,function*(){if(br(n.app))return Promise.reject(Ts(n));let r=Wo(n),i=SV(r,e),o=yield new vC(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var tJ=10*60*1e3,wC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!DV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(GF(e))}saveEventToCache(e){this.cachedEventUids.add(GF(e)),this.lastProcessedEventTime=Date.now()}};function GF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DV(n);default:return!1}}function rJ(t){return b(this,arguments,function*(n,e={}){return Ss(n,"GET","/v1/projects",e)})}var iJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sJ=/^https?/;function oJ(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield rJ(n);for(let t of e)try{if(aJ(t))return}catch{}Cr(n,"unauthorized-domain")})}function aJ(n){let e=oC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!sJ.test(t))return!1;if(iJ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cJ=new hc(3e4,6e4);function WF(){let n=ki().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uJ(n){return new Promise((e,t)=>{var r,i,s;function o(){WF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WF(),t(ti(n,"network-request-failed"))},timeout:cJ.get()})}if(!((i=(r=ki().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ki().gapi)===null||s===void 0)&&s.load)o();else{let a=gV("iframefcb");return ki()[a]=()=>{gapi.load?o():t(ti(n,"network-request-failed"))},pV(`${dY()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw j_=null,e})}var j_=null;function lJ(n){return j_=j_||uJ(n),j_}var dJ=new hc(5e3,15e3),hJ="__/auth/iframe",fJ="emulator/auth/iframe",pJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mJ(n){let e=n.config;me(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?CC(e,fJ):`https://${n.config.authDomain}/${hJ}`,r={apiKey:e.apiKey,appName:n.name,v:Pi},i=gJ.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${dl(r).slice(1)}`}function yJ(n){return b(this,null,function*(){let e=yield lJ(n),t=ki().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:mJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pJ,dontclear:!0},r=>new Promise((i,s)=>b(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ti(n,"network-request-failed"),a=ki().setTimeout(()=>{s(o)},dJ.get());function c(){ki().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var _J={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vJ=500,wJ=600,EJ="_blank",IJ="http://localhost",ev=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function bJ(n,e,t,r=vJ,i=wJ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},_J),{width:r.toString(),height:i.toString(),top:s,left:o}),d=un().toLowerCase();t&&(a=aV(d)?EJ:t),sV(d)&&(e=e||IJ,c.scrollbars="yes");let h=Object.entries(c).reduce((E,[I,k])=>`${E}${I}=${k},`,"");if(sY(d)&&a!=="_self")return TJ(e||"",a),new ev(null);let g=window.open(e||"",a,h);me(g,n,"popup-blocked");try{g.focus()}catch{}return new ev(g)}function TJ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var CJ="__/auth/handler",SJ="emulator/auth/handler",DJ=encodeURIComponent("fac");function KF(n,e,t,r,i,s){return b(this,null,function*(){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pi,eventId:i};if(e instanceof If){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof Q_){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${DJ}=${encodeURIComponent(c)}`:"";return`${AJ(n)}?${dl(a).slice(1)}${d}`})}function AJ({config:n}){return n.emulator?CC(n,SJ):`https://${n.authDomain}/${CJ}`}var sC="webStorageSupport",EC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BC,this._completeRedirectFn=eJ,this._overrideRedirectResult=JY}_openPopup(e,t,r,i){return b(this,null,function*(){var s;Cs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield KF(e,t,r,oC(),i);return bJ(e,o,jC())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let s=yield KF(e,t,r,oC(),i);return NY(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Cs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield yJ(e),r=new wC(e);return t.register("authEvent",i=>(me(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sC,{type:sC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[sC];o!==void 0&&t(!!o),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hV()||oV()||RC()}},AV=EC;var QF="@firebase/auth",YF="1.7.9";var IC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MJ(n){Mi(new Zn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fV(n)},d=new fC(r,i,s,c);return pY(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mi(new Zn("auth-internal",e=>{let t=Wo(e.getProvider("auth").getImmediate());return(r=>new IC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wt(QF,YF,RJ(n)),wt(QF,YF,"esm2017")}var PJ=5*60,xJ=iT("authIdTokenMaxAge")||PJ,JF=null,kJ=n=>e=>b(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xJ)return;let i=t?.token;JF!==i&&(JF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function $C(n=Vo()){let e=ic(n,"auth");if(e.isInitialized())return e.getImmediate();let t=MC(n,{popupRedirectResolver:AV,persistence:[CV,EV,BC]}),r=iT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=kJ(s.toString());VC(t,o,()=>o(t.currentUser)),FC(t,a=>o(a))}}let i=nT("auth");return i&&PC(t,`http://${i}`),t}function NJ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uY({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",NJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MJ("Browser");var RV="auth",pc=class{constructor(e){return e}},gc=class{constructor(){return cc(RV)}};var qC=new Q("angularfire2.auth-instances");function IZ(n,e){let t=El(RV,n,e);return t&&new pc(t)}function bZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pc(r)}}var TZ={provide:gc,deps:[[new en,qC]]},CZ={provide:pc,useFactory:IZ,deps:[[new en,qC],Xr]};function MV(n,...e){return wt("angularfire",ms.full,"auth"),wn([CZ,TZ,{provide:qC,useFactory:bZ(n),multi:!0,deps:[Pe,Dt,Bo,ys,[new en,Uo],...e]}])}var PV=nt(OF,!0);var xV=nt(NC,!0);var kV=nt($C,!0);var NV=nt(OC,!0);var OV=nt(zC,!0);var LV=nt(UC,!0);var FV=nt(LC,!0);var VV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},UV={};var Ds,HC;(function(){var n;function e(S,_){function w(){}w.prototype=_.prototype,S.F=_.prototype,S.prototype=new w,S.prototype.constructor=S,S.D=function(C,T,R){for(var v=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)v[mt-2]=arguments[mt];return _.prototype[T].apply(C,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,w){w||(w=0);let C=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)C[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;T<16;++T)C[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=S.g[0],w=S.g[1],T=S.g[2];let R=S.g[3],v;v=_+(R^w&(T^R))+C[0]+3614090360&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[3]+3250441966&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[7]+4249261313&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[11]+2304563134&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[15]+1236535329&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(T^R&(w^T))+C[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[0]+3921069994&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[4]+3889429448&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[8]+1163531501&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[12]+2368359562&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(w^T^R)+C[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[14]+4259657740&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[10]+3200236656&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[6]+76029189&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[2]+3299628645&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(T^(w|~R))+C[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[5]+4237533241&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[1]+2240044497&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[13]+1309151649&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.v=function(S,_){_===void 0&&(_=S.length);let w=_-this.blockSize,C=this.C,T=this.h,R=0;for(;R<_;){if(T==0)for(;R<=w;)i(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<_;)if(C[T++]=S.charCodeAt(R++),T==this.blockSize){i(this,C),T=0;break}}else for(;R<_;)if(C[T++]=S[R++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=_},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;_=this.o*8;for(var w=S.length-8;w<S.length;++w)S[w]=_&255,_/=256;for(this.v(S),S=Array(16),_=0,w=0;w<4;++w)for(let C=0;C<32;C+=8)S[_++]=this.g[w]>>>C&255;return S};function s(S,_){var w=a;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=_(S)}function o(S,_){this.h=_;let w=[],C=!0;for(let T=S.length-1;T>=0;T--){let R=S[T]|0;C&&R==_||(w[T]=R,C=!1)}this.g=w}var a={};function c(S){return-128<=S&&S<128?s(S,function(_){return new o([_|0],_<0?-1:0)}):new o([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return g;if(S<0)return N(d(-S));let _=[],w=1;for(let C=0;S>=w;C++)_[C]=S/w|0,w*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return N(h(S.substring(1),_));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=d(Math.pow(_,8)),C=g;for(let R=0;R<S.length;R+=8){var T=Math.min(8,S.length-R);let v=parseInt(S.substring(R,R+T),_);T<8?(T=d(Math.pow(_,T)),C=C.j(T).add(d(v))):(C=C.j(w),C=C.add(d(v)))}return C}var g=c(0),E=c(1),I=c(16777216);n=o.prototype,n.m=function(){if(F(this))return-N(this).m();let S=0,_=1;for(let w=0;w<this.g.length;w++){let C=this.i(w);S+=(C>=0?C:4294967296+C)*_,_*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(F(this))return"-"+N(this).toString(S);let _=d(Math.pow(S,6));var w=this;let C="";for(;;){let T=ae(w,_).g;w=q(w,T.j(_));let R=((w.g.length>0?w.g[0]:w.h)>>>0).toString(S);if(w=T,k(w))return R+C;for(;R.length<6;)R="0"+R;C=R+C}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(let _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function F(S){return S.h==-1}n.l=function(S){return S=q(this,S),F(S)?-1:k(S)?0:1};function N(S){let _=S.g.length,w=[];for(let C=0;C<_;C++)w[C]=~S.g[C];return new o(w,~S.h).add(E)}n.abs=function(){return F(this)?N(this):this},n.add=function(S){let _=Math.max(this.g.length,S.g.length),w=[],C=0;for(let T=0;T<=_;T++){let R=C+(this.i(T)&65535)+(S.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);C=v>>>16,R&=65535,v&=65535,w[T]=v<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function q(S,_){return S.add(N(_))}n.j=function(S){if(k(this)||k(S))return g;if(F(this))return F(S)?N(this).j(N(S)):N(N(this).j(S));if(F(S))return N(this.j(N(S)));if(this.l(I)<0&&S.l(I)<0)return d(this.m()*S.m());let _=this.g.length+S.g.length,w=[];for(var C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(let T=0;T<S.g.length;T++){let R=this.i(C)>>>16,v=this.i(C)&65535,mt=S.i(T)>>>16,Ln=S.i(T)&65535;w[2*C+2*T]+=v*Ln,te(w,2*C+2*T),w[2*C+2*T+1]+=R*Ln,te(w,2*C+2*T+1),w[2*C+2*T+1]+=v*mt,te(w,2*C+2*T+1),w[2*C+2*T+2]+=R*mt,te(w,2*C+2*T+2)}for(S=0;S<_;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=_;S<2*_;S++)w[S]=0;return new o(w,0)};function te(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function Y(S,_){this.g=S,this.h=_}function ae(S,_){if(k(_))throw Error("division by zero");if(k(S))return new Y(g,g);if(F(S))return _=ae(N(S),_),new Y(N(_.g),N(_.h));if(F(_))return _=ae(S,N(_)),new Y(N(_.g),_.h);if(S.g.length>30){if(F(S)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var w=E,C=_;C.l(S)<=0;)w=je(w),C=je(C);var T=le(w,1),R=le(C,1);for(C=le(C,2),w=le(w,2);!k(C);){var v=R.add(C);v.l(S)<=0&&(T=T.add(w),R=v),C=le(C,1),w=le(w,1)}return _=q(S,T.j(_)),new Y(T,_)}for(T=g;S.l(_)>=0;){for(w=Math.max(1,Math.floor(S.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),R=d(w),v=R.j(_);F(v)||v.l(S)>0;)w-=C,R=d(w),v=R.j(_);k(R)&&(R=E),T=T.add(R),S=q(S,v)}return new Y(T,S)}n.B=function(S){return ae(this,S).h},n.and=function(S){let _=Math.max(this.g.length,S.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)&S.i(C);return new o(w,this.h&S.h)},n.or=function(S){let _=Math.max(this.g.length,S.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)|S.i(C);return new o(w,this.h|S.h)},n.xor=function(S){let _=Math.max(this.g.length,S.g.length),w=[];for(let C=0;C<_;C++)w[C]=this.i(C)^S.i(C);return new o(w,this.h^S.h)};function je(S){let _=S.g.length+1,w=[];for(let C=0;C<_;C++)w[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(w,S.h)}function le(S,_){let w=_>>5;_%=32;let C=S.g.length-w,T=[];for(let R=0;R<C;R++)T[R]=_>0?S.i(R+w)>>>_|S.i(R+w+1)<<32-_:S.i(R+w);return new o(T,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HC=UV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ds=UV.Integer=o}).apply(typeof VV<"u"?VV:typeof self<"u"?self:typeof window<"u"?window:{});var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},As={};var GC,DZ,Al,WC,Cf,iv,KC,QC,YC;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof rv=="object"&&rv];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var O=l[A];if(!(O in y))break e;y=y[O]}l=l[l.length-1],A=y[l],p=p(A),p!=A&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&y.push([A,p[A]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(A,O,V){for(var K=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)K[ye-2]=arguments[ye];return p.prototype[O].apply(A,K)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function I(l){let p=l.length;if(p>0){let y=Array(p);for(let A=0;A<p;A++)y[A]=l[A];return y}return[]}function k(l,p){for(let A=1;A<arguments.length;A++){let O=arguments[A];var y=typeof O;if(y=y!="object"?y:O?Array.isArray(O)?"array":y:"null",y=="array"||y=="object"&&typeof O.length=="number"){y=l.length||0;let V=O.length||0;l.length=y+V;for(let K=0;K<V;K++)l[y+K]=O[K]}else l.push(O)}}class F{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function N(l){o.setTimeout(()=>{throw l},0)}function q(){var l=S;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,y){let A=Y.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new F(()=>new ae,l=>l.reset());class ae{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let je,le=!1,S=new te,_=()=>{let l=Promise.resolve(void 0);je=()=>{l.then(w)}};function w(){for(var l;l=q();){try{l.h.call(l.g)}catch(y){N(y)}var p=Y;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}le=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l}();function v(l){return/^[\s\xa0]*$/.test(l)}function mt(l,p){T.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(mt,T),mt.prototype.init=function(l,p){let y=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&mt.Z.h.call(this)},mt.prototype.h=function(){mt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ln="closure_listenable_"+(Math.random()*1e6|0),hE=0;function da(l,p,y,A,O){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=O,this.key=++hE,this.da=this.fa=!1}function ci(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function zs(l,p,y){for(let A in l)p.call(y,l[A],A,l)}function Up(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function Bp(l){let p={};for(let y in l)p[y]=l[y];return p}let Ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(l,p){let y,A;for(let O=1;O<arguments.length;O++){A=arguments[O];for(y in A)l[y]=A[y];for(let V=0;V<Ar.length;V++)y=Ar[V],Object.prototype.hasOwnProperty.call(A,y)&&(l[y]=A[y])}}function jc(l){this.src=l,this.g={},this.h=0}jc.prototype.add=function(l,p,y,A,O){let V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);let K=Nd(l,p,A,O);return K>-1?(p=l[K],y||(p.fa=!1)):(p=new da(p,this.src,V,!!A,O),p.fa=y,l.push(p)),p};function Gi(l,p){let y=p.type;if(y in l.g){var A=l.g[y],O=Array.prototype.indexOf.call(A,p,void 0),V;(V=O>=0)&&Array.prototype.splice.call(A,O,1),V&&(ci(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Nd(l,p,y,A){for(let O=0;O<l.length;++O){let V=l[O];if(!V.da&&V.listener==p&&V.capture==!!y&&V.ha==A)return O}return-1}var Wi="closure_lm_"+(Math.random()*1e6|0),Od={};function jp(l,p,y,A,O){if(A&&A.once)return $c(l,p,y,A,O);if(Array.isArray(p)){for(let V=0;V<p.length;V++)jp(l,p[V],y,A,O);return null}return y=Wc(y),l&&l[Ln]?l.J(p,y,a(A)?!!A.capture:!!A,O):ha(l,p,y,!1,A,O)}function ha(l,p,y,A,O,V){if(!p)throw Error("Invalid event type");let K=a(O)?!!O.capture:!!O,ye=Gc(l);if(ye||(l[Wi]=ye=new jc(l)),y=ye.add(p,y,A,K,V),y.proxy)return y;if(A=zc(),y.proxy=A,A.src=l,A.listener=y,l.addEventListener)R||(O=K),O===void 0&&(O=!1),l.addEventListener(p.toString(),A,O);else if(l.attachEvent)l.attachEvent(Hc(p.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function zc(){function l(y){return p.call(l.src,l.listener,y)}let p=zp;return l}function $c(l,p,y,A,O){if(Array.isArray(p)){for(let V=0;V<p.length;V++)$c(l,p[V],y,A,O);return null}return y=Wc(y),l&&l[Ln]?l.K(p,y,a(A)?!!A.capture:!!A,O):ha(l,p,y,!0,A,O)}function qc(l,p,y,A,O){if(Array.isArray(p))for(var V=0;V<p.length;V++)qc(l,p[V],y,A,O);else A=a(A)?!!A.capture:!!A,y=Wc(y),l&&l[Ln]?(l=l.i,V=String(p).toString(),V in l.g&&(p=l.g[V],y=Nd(p,y,A,O),y>-1&&(ci(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[V],l.h--)))):l&&(l=Gc(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Nd(p,y,A,O)),(y=l>-1?p[l]:null)&&fa(y))}function fa(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Ln])Gi(p.i,l);else{var y=l.type,A=l.proxy;p.removeEventListener?p.removeEventListener(y,A,l.capture):p.detachEvent?p.detachEvent(Hc(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=Gc(p))?(Gi(y,l),y.h==0&&(y.src=null,p[Wi]=null)):ci(l)}}}function Hc(l){return l in Od?Od[l]:Od[l]="on"+l}function zp(l,p){if(l.da)l=!0;else{p=new mt(p,this);let y=l.listener,A=l.ha||l.src;l.fa&&fa(l),l=y.call(A,p)}return l}function Gc(l){return l=l[Wi],l instanceof jc?l:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wc(l){return typeof l=="function"?l:(l[Ld]||(l[Ld]=function(p){return l.handleEvent(p)}),l[Ld])}function Wt(){C.call(this),this.i=new jc(this),this.M=this,this.G=null}g(Wt,C),Wt.prototype[Ln]=!0,Wt.prototype.removeEventListener=function(l,p,y,A){qc(this,l,p,y,A)};function Kt(l,p){var y,A=l.G;if(A)for(y=[];A;A=A.G)y.push(A);if(l=l.M,A=p.type||p,typeof p=="string")p=new T(p,l);else if(p instanceof T)p.target=p.target||l;else{var O=p;p=new T(A,l),Gt(p,O)}O=!0;let V,K;if(y)for(K=y.length-1;K>=0;K--)V=p.g=y[K],O=pa(V,A,!0,p)&&O;if(V=p.g=l,O=pa(V,A,!0,p)&&O,O=pa(V,A,!1,p)&&O,y)for(K=0;K<y.length;K++)V=p.g=y[K],O=pa(V,A,!1,p)&&O}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let A=0;A<y.length;A++)ci(y[A]);delete l.g[p],l.h--}}this.G=null},Wt.prototype.J=function(l,p,y,A){return this.i.add(String(l),p,!1,y,A)},Wt.prototype.K=function(l,p,y,A){return this.i.add(String(l),p,!0,y,A)};function pa(l,p,y,A){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let V=0;V<p.length;++V){let K=p[V];if(K&&!K.da&&K.capture==y){let ye=K.listener,u=K.ha||K.src;K.fa&&Gi(l.i,K),O=ye.call(u,A)!==!1&&O}}return O&&!A.defaultPrevented}function fE(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function Kc(l){l.g=fE(()=>{l.g=null,l.i&&(l.i=!1,Kc(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class Fd extends C{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(l){C.call(this),this.h=l,this.g={}}g(Ki,C);var Qt=[];function on(l){zs(l.g,function(p,y){this.g.hasOwnProperty(y)&&fa(p)},l),l.g={}}Ki.prototype.N=function(){Ki.Z.N.call(this),on(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $s=o.JSON.stringify,$p=o.JSON.parse,qp=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Hp(){}function qs(){}var Hs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qc(){T.call(this,"d")}g(Qc,T);function ga(){T.call(this,"c")}g(ga,T);var Qi={},Gp=null;function Gs(){return Gp=Gp||new Wt}Qi.Ia="serverreachability";function Vd(l){T.call(this,Qi.Ia,l)}g(Vd,T);function Ws(l){let p=Gs();Kt(p,new Vd(p))}Qi.STAT_EVENT="statevent";function Ks(l,p){T.call(this,Qi.STAT_EVENT,l),this.stat=p}g(Ks,T);function Yt(l){let p=Gs();Kt(p,new Ks(p,l))}Qi.Ja="timingevent";function Yc(l,p){T.call(this,Qi.Ja,l),this.size=p}g(Yc,T);function er(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Qs(){this.g=!0}Qs.prototype.ua=function(){this.g=!1};function Jc(l,p,y,A,O,V){l.info(function(){if(l.g)if(V){var K="",ye=V.split("&");for(let f=0;f<ye.length;f++){var u=ye[f].split("=");if(u.length>1){let m=u[0];u=u[1];let D=m.split("_");K=D.length>=2&&D[1]=="type"?K+(m+"="+u+"&"):K+(m+"=redacted&")}}}else K=null;else K=V;return"XMLHTTP REQ ("+A+") [attempt "+O+"]: "+p+`
`+y+`
`+K})}function Wp(l,p,y,A,O,V,K){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+O+"]: "+p+`
`+y+`
`+V+" "+K})}function mr(l,p,y,A){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+hn(l,y)+(A?" "+A:"")})}function Kp(l,p){l.info(function(){return"TIMEOUT: "+p})}Qs.prototype.info=function(){};function hn(l,p){if(!l.g)return p;if(!p)return null;try{let V=JSON.parse(p);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var y=V[l];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var O=A[0];if(O!="noop"&&O!="stop"&&O!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return $s(V)}catch{return p}}var ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ys={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Js;function Ud(){}g(Ud,Hp),Ud.prototype.g=function(){return new XMLHttpRequest},Js=new Ud;function ya(l){return encodeURIComponent(String(l))}function Zs(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function ui(l,p,y,A){this.j=l,this.i=p,this.l=y,this.S=A||1,this.V=new Ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qp}function Qp(){this.i=null,this.g="",this.h=!1}var _a={},Zc={};function va(l,p,y){l.M=1,l.A=ba(tr(p)),l.u=y,l.R=!0,wa(l,null)}function wa(l,p){l.F=Date.now(),Xs(l),l.B=tr(l.A);var y=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),tg(y.i,"t",A),l.C=0,y=l.j.L,l.h=new Qp,l.g=du(l.j,y?p:null,!l.u),l.P>0&&(l.O=new Fd(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,A=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(Qt[0]=O.toString()),O=Qt);for(let V=0;V<O.length;V++){let K=jp(y,O[V],A||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=l.J?Bp(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Ws(),Jc(l.i,l.v,l.B,l.l,l.S,l.u)}ui.prototype.ba=function(l){l=l.target;let p=this.O;p&&Ze(l)==3?p.j():this.Y(l)},ui.prototype.Y=function(l){try{if(l==this.g)e:{let ye=Ze(this.g),u=this.g.ya(),f=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||cg(this.g)))){this.K||ye!=4||u==7||(u==8||f<=0?Ws(3):Ws(2)),eu(this);var p=this.g.ca();this.X=p;var y=li(this);if(this.o=p==200,Wp(this.i,this.v,this.B,this.l,this.S,ye,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,O=this.g;if((A=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(A)){var V=A;break t}}V=null}if(l=V)mr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,to(this,l);else{this.o=!1,this.m=3,Yt(12),Yi(this),eo(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=Yp(this,y),m==Zc){ye==4&&(this.m=4,Yt(14),l=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==_a){this.m=4,Yt(15),mr(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else mr(this.i,this.l,m,null),to(this,m);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||y.length!=0||this.h.h||(this.m=1,Yt(16),l=!1),this.o=this.o&&l,!l)mr(this.i,this.l,y,"[Invalid Chunked Response]"),Yi(this),eo(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),cu(K),K.P=!0,Yt(11))}}else mr(this.i,this.l,y,null),to(this,y);ye==4&&Yi(this),this.o&&!this.K&&(ye==4?Xd(this.j,this):(this.o=!1,Xs(this)))}else pE(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Yi(this),eo(this)}}}catch{}finally{}};function li(l){if(!Bd(l))return l.g.la();let p=cg(l.g);if(p==="")return"";let y="",A=p.length,O=Ze(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Yi(l),eo(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<A;V++)l.h.h=!0,y+=l.h.i.decode(p[V],{stream:!(O&&V==A-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function Bd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Yp(l,p){var y=l.C,A=p.indexOf(`
`,y);return A==-1?Zc:(y=Number(p.substring(y,A)),isNaN(y)?_a:(A+=1,A+y>p.length?Zc:(p=p.slice(A,A+y),l.C=A+y,p)))}ui.prototype.cancel=function(){this.K=!0,Yi(this)};function Xs(l){l.T=Date.now()+l.H,Xc(l,l.H)}function Xc(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=er(d(l.aa,l),p)}function eu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}ui.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(Kp(this.i,this.B),this.M!=2&&(Ws(),Yt(17)),Yi(this),this.m=2,eo(this)):Xc(this,this.T-l)};function eo(l){l.j.I==0||l.K||Xd(l.j,l)}function Yi(l){eu(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,on(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function to(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||Ea(y.h,l))){if(!l.L&&Ea(y.h,l)&&y.I==3){try{var A=y.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var O=A;if(O[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)uu(y),Ji(y);else break e;uo(y),Yt(18)}}else y.xa=O[1],0<y.xa-y.K&&O[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=er(d(y.Va,y),6e3));di(y.h)<=1&&y.ta&&(y.ta=void 0)}else fi(y,11)}else if((l.L||y.g==l)&&uu(y),!v(p))for(O=y.Ba.g.parse(p),p=0;p<O.length;p++){let f=O[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let D=f[3];D!=null&&(y.ka=D,y.j.info("VER="+y.ka));let L=f[4];L!=null&&(y.za=L,y.j.info("SVER="+y.za));let U=f[5];U!=null&&typeof U=="number"&&U>0&&(A=1.5*U,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;let G=l.g;if(G){let Ke=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ke){var V=A.h;V.g||Ke.indexOf("spdy")==-1&&Ke.indexOf("quic")==-1&&Ke.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(jd(V,V.h),V.h=null))}if(A.G){let xt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;xt&&(A.wa=xt,it(A.J,A.G,xt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var K=l;if(A.na=lu(A,A.L?A.ba:null,A.W),K.L){zd(A.h,K);var ye=K,u=A.O;u&&(ye.H=u),ye.D&&(eu(ye),Xs(ye)),A.g=K}else au(A);y.i.length>0&&Vn(y)}else f[0]!="stop"&&f[0]!="close"||fi(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?fi(y,7):ou(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}Ws(4)}catch{}}var Jp=class{constructor(l,p){this.g=l,this.map=p}};function tu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function no(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function di(l){return l.h?1:l.g?l.g.size:0}function Ea(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function jd(l,p){l.g?l.g.add(p):l.h=p}function zd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}tu.prototype.cancel=function(){if(this.i=$d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function $d(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return I(l.i)}var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hd(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let A=l[y].indexOf("="),O,V=null;A>=0?(O=l[y].substring(0,A),V=l[y].substring(A+1)):O=l[y],p(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function yr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof yr?(this.l=l.l,ro(this,l.j),this.o=l.o,this.g=l.g,Ia(this,l.u),this.h=l.h,Gd(this,ng(l.i)),this.m=l.m):l&&(p=String(l).match(qd))?(this.l=!1,ro(this,p[1]||"",!0),this.o=Ta(p[2]||""),this.g=Ta(p[3]||"",!0),Ia(this,p[4]),this.h=Ta(p[5]||"",!0),Gd(this,p[6]||"",!0),this.m=Ta(p[7]||"")):(this.l=!1,this.i=new Mr(null,this.l))}yr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(nr(p,Ca,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(nr(p,Ca,!0),"@"),l.push(ya(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(nr(y,y.charAt(0)=="/"?Zp:nu,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",nr(y,ru)),l.join("")},yr.prototype.resolve=function(l){let p=tr(this),y=!!l.j;y?ro(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var A=l.h;if(y)Ia(p,l.u);else if(y=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var O=p.h.lastIndexOf("/");O!=-1&&(A=p.h.slice(0,O+1)+A)}if(O=A,O==".."||O==".")A="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){A=O.lastIndexOf("/",0)==0,O=O.split("/");let V=[];for(let K=0;K<O.length;){let ye=O[K++];ye=="."?A&&K==O.length&&V.push(""):ye==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),A&&K==O.length&&V.push("")):(V.push(ye),A=!0)}A=V.join("/")}else A=O}return y?p.h=A:y=l.i.toString()!=="",y?Gd(p,ng(l.i)):y=!!l.m,y&&(p.m=l.m),p};function tr(l){return new yr(l)}function ro(l,p,y){l.j=y?Ta(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ia(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Gd(l,p,y){p instanceof Mr?(l.i=p,Sa(l.i,l.l)):(y||(p=nr(p,ut)),l.i=new Mr(p,l.l))}function it(l,p,y){l.i.set(p,y)}function ba(l){return it(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ta(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function nr(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,Rr),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Rr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ca=/[#\/\?@]/g,nu=/[#\?:]/g,Zp=/[#\?]/g,ut=/[#\?@]/g,ru=/#/g;function Mr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&Hd(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=Mr.prototype,n.add=function(l,p){rr(this),this.i=null,l=io(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Xp(l,p){rr(l),p=io(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Wd(l,p){return rr(l),p=io(l,p),l.g.has(p)}n.forEach=function(l,p){rr(this),this.g.forEach(function(y,A){y.forEach(function(O){l.call(p,O,A,this)},this)},this)};function eg(l,p){rr(l);let y=[];if(typeof p=="string")Wd(l,p)&&(y=y.concat(l.g.get(io(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return rr(this),this.i=null,l=io(this,l),Wd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=eg(this,l),l.length>0?String(l[0]):p):p};function tg(l,p,y){Xp(l,p),y.length>0&&(l.i=null,l.g.set(io(l,p),I(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var y=p[A];let O=ya(y);y=eg(this,y);for(let V=0;V<y.length;V++){let K=O;y[V]!==""&&(K+="="+ya(y[V])),l.push(K)}}return this.i=l.join("&")};function ng(l){let p=new Mr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function io(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Sa(l,p){p&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(y,A){let O=A.toLowerCase();A!=O&&(Xp(this,A),tg(this,O,y))},l)),l.j=p}function hi(l,p){let y=new Qs;if(o.Image){let A=new Image;A.onload=h(Pr,y,"TestLoadImage: loaded",!0,p,A),A.onerror=h(Pr,y,"TestLoadImage: error",!1,p,A),A.onabort=h(Pr,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=h(Pr,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else p(!1)}function rg(l,p){let y=new Qs,A=new AbortController,O=setTimeout(()=>{A.abort(),Pr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:A.signal}).then(V=>{clearTimeout(O),V.ok?Pr(y,"TestPingServer: ok",!0,p):Pr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Pr(y,"TestPingServer: error",!1,p)})}function Pr(l,p,y,A,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),A(y)}catch{}}function ig(){this.g=new qp}function xr(l){this.i=l.Sb||null,this.h=l.ab||!1}g(xr,Hp),xr.prototype.g=function(){return new iu(this.i,this.h)};function iu(l,p){Wt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(iu,Wt),n=iu.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Fn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function sg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Da(this):Fn(this),this.readyState==3&&sg(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Da(this))},n.Na=function(l){this.g&&(this.response=l,Da(this))},n.ga=function(){this.g&&Da(this)};function Da(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Fn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function Fn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function og(l){let p="";return zs(l,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Kd(l,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=og(y),typeof l=="string"?y!=null&&ya(y):it(l,p,y))}function st(l){Wt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(st,Wt);var su=/^https?$/i,ag=["POST","PUT"];n=st.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Js.g(),this.g.onreadystatechange=E(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(V){so(this,V);return}if(l=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var O in A)y.set(O,A[O]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let V of A.keys())y.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(V=>V.toLowerCase()=="content-type"),O=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(ag,p,void 0)>=0)||A||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,K]of y)this.g.setRequestHeader(V,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){so(this,V)}};function so(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,oo(l),ao(l)}function oo(l){l.A||(l.A=!0,Kt(l,"complete"),Kt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Kt(this,"complete"),Kt(this,"abort"),ao(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ao(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qd(this):this.Xa())},n.Xa=function(){Qd(this)};function Qd(l){if(l.h&&typeof s<"u"){if(l.v&&Ze(l)==4)setTimeout(l.Ca.bind(l),0);else if(Kt(l,"readystatechange"),Ze(l)==4){l.h=!1;try{let V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=V===0){let K=String(l.D).match(qd)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!su.test(K?K.toLowerCase():"")}y=A}if(y)Kt(l,"complete"),Kt(l,"success");else{l.o=6;try{var O=Ze(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",oo(l)}}finally{ao(l)}}}}function ao(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||Kt(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ze(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Ze(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),$p(p)}};function cg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pE(l){let p={};l=(l.g&&Ze(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(v(l[A]))continue;var y=Zs(l[A]);let O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let V=p[O]||[];p[O]=V,V.push(y)}Up(p,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function co(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Yd(l){this.za=0,this.i=[],this.j=new Qs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=co("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=co("baseRetryDelayMs",5e3,l),this.Za=co("retryDelaySeedMs",1e4,l),this.Ta=co("forwardChannelMaxRetries",2,l),this.va=co("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new tu(l&&l.concurrentRequestLimit),this.Ba=new ig,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,A){Yt(0),this.W=l,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=lu(this,null,this.W),Vn(this)};function ou(l){if(Jd(l),l.I==3){var p=l.V++,y=tr(l.J);if(it(y,"SID",l.M),it(y,"RID",p),it(y,"TYPE","terminate"),kr(l,y),p=new ui(l,l.j,p),p.M=2,p.A=ba(tr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=du(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Xs(p)}eh(l)}function Ji(l){l.g&&(cu(l),l.g.cancel(),l.g=null)}function Jd(l){Ji(l),l.v&&(o.clearTimeout(l.v),l.v=null),uu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Vn(l){if(!no(l.h)&&!l.m){l.m=!0;var p=l.Ea;je||_(),le||(je(),le=!0),S.add(p,l),l.D=0}}function ug(l,p){return di(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=er(d(l.Ea,l,p),lo(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let O=new ui(this,this.j,l),V=this.o;if(this.U&&(V?(V=Bp(V),Gt(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Zd(this,O,p),y=tr(this.J),it(y,"RID",l),it(y,"CVER",22),this.G&&it(y,"X-HTTP-Session-Id",this.G),kr(this,y),V&&(this.R?p="headers="+ya(og(V))+"&"+p:this.u&&Kd(y,this.u,V)),jd(this.h,O),this.Ra&&it(y,"TYPE","init"),this.S?(it(y,"$req",p),it(y,"SID","null"),O.U=!0,va(O,y,null)):va(O,y,p),this.I=2}}else this.I==3&&(l?lg(this,l):this.i.length==0||no(this.h)||lg(this))};function lg(l,p){var y;p?y=p.l:y=l.V++;let A=tr(l.J);it(A,"SID",l.M),it(A,"RID",y),it(A,"AID",l.K),kr(l,A),l.u&&l.o&&Kd(A,l.u,l.o),y=new ui(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Zd(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),jd(l.h,y),va(y,A,p)}function kr(l,p){l.H&&zs(l.H,function(y,A){it(p,A,y)}),l.l&&zs({},function(y,A){it(p,A,y)})}function Zd(l,p,y){y=Math.min(l.i.length,y);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var O=l.i;let ye=-1;for(;;){let u=["count="+y];ye==-1?y>0?(ye=O[0].g,u.push("ofs="+ye)):ye=0:u.push("ofs="+ye);let f=!0;for(let m=0;m<y;m++){var V=O[m].g;let D=O[m].map;if(V-=ye,V<0)ye=Math.max(0,O[m].g-100),f=!1;else try{V="req"+V+"_"||"";try{var K=D instanceof Map?D:Object.entries(D);for(let[L,U]of K){let G=U;a(U)&&(G=$s(U)),u.push(V+L+"="+encodeURIComponent(G))}}catch(L){throw u.push(V+"type="+encodeURIComponent("_badmap")),L}}catch{A&&A(D)}}if(f){K=u.join("&");break e}}K=void 0}return l=l.i.splice(0,y),p.G=l,K}function au(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;je||_(),le||(je(),le=!0),S.add(p,l),l.A=0}}function uo(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=er(d(l.Da,l),lo(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Aa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=er(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Ji(this),Aa(this))};function cu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Aa(l){l.g=new ui(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=tr(l.na);it(p,"RID","rpc"),it(p,"SID",l.M),it(p,"AID",l.K),it(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&it(p,"TO",l.ia),it(p,"TYPE","xmlhttp"),kr(l,p),l.u&&l.o&&Kd(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=ba(tr(p)),y.u=null,y.R=!0,wa(y,l)}n.Va=function(){this.C!=null&&(this.C=null,Ji(this),uo(this),Yt(19))};function uu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Xd(l,p){var y=null;if(l.g==p){uu(l),cu(l),l.g=null;var A=2}else if(Ea(l.h,p))y=p.G,zd(l.h,p),A=1;else return;if(l.I!=0){if(p.o)if(A==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var O=l.D;A=Gs(),Kt(A,new Yc(A,y)),Vn(l)}else au(l);else if(O=p.m,O==3||O==0&&p.X>0||!(A==1&&ug(l,p)||A==2&&uo(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),O){case 1:fi(l,5);break;case 4:fi(l,10);break;case 3:fi(l,6);break;default:fi(l,2)}}}function lo(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function fi(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),A=l.Ua;let O=!A;A=new yr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ro(A,"https"),ba(A),O?hi(A.toString(),y):rg(A.toString(),y)}else Yt(2);l.I=0,l.l&&l.l.pa(p),eh(l),Jd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function eh(l){if(l.I=0,l.ja=[],l.l){let p=$d(l.h);(p.length!=0||l.i.length!=0)&&(k(l.ja,p),k(l.ja,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.oa()}}function lu(l,p,y){var A=y instanceof yr?tr(y):new yr(y);if(A.g!="")p&&(A.g=p+"."+A.g),Ia(A,A.u);else{var O=o.location;A=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;let V=new yr(null);A&&ro(V,A),p&&(V.g=p),O&&Ia(V,O),y&&(V.h=y),A=V}return y=l.G,p=l.wa,y&&p&&it(A,y,p),it(A,"VER",l.ka),kr(l,A),A}function du(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new st(new xr({ab:y})):new st(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Zi(){}Zi.prototype.g=function(l,p){return new mn(l,p)};function mn(l,p){Wt.call(this),this.g=new Yd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Xi(this)}g(mn,Wt),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){ou(this.g)},mn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=$s(l),l=y);p.i.push(new Jp(p.Ya++,l)),p.I==3&&Vn(p)},mn.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,mn.Z.N.call(this)};function nh(l){Qc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(nh,Qc);function pi(){ga.call(this),this.status=1}g(pi,ga);function Xi(l){this.g=l}g(Xi,th),Xi.prototype.ra=function(){Kt(this.g,"a")},Xi.prototype.qa=function(l){Kt(this.g,new nh(l))},Xi.prototype.pa=function(l){Kt(this.g,new pi)},Xi.prototype.oa=function(){Kt(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,YC=As.createWebChannelTransport=function(){return new Zi},QC=As.getStatEventTarget=function(){return Gs()},KC=As.Event=Qi,iv=As.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,Cf=As.ErrorCode=ma,Ys.COMPLETE="complete",WC=As.EventType=Ys,qs.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,Al=As.WebChannel=qs,DZ=As.FetchXmlHttpFactory=xr,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,GC=As.XhrIo=st}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var BV="@firebase/firestore",jV="4.9.2";var Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");var Xl="12.3.0";var Ec=new zo("@firebase/firestore");function Rl(){return Ec.logLevel}function ie(n,...e){if(Ec.logLevel<=Le.DEBUG){let t=e.map(OD);Ec.debug(`Firestore (${Xl}): ${n}`,...t)}}function Ps(n,...e){if(Ec.logLevel<=Le.ERROR){let t=e.map(OD);Ec.error(`Firestore (${Xl}): ${n}`,...t)}}function xf(n,...e){if(Ec.logLevel<=Le.WARN){let t=e.map(OD);Ec.warn(`Firestore (${Xl}): ${n}`,...t)}}function OD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,R2(n,r,t)}function R2(n,e,t){let r=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ps(r),new Error(r)}function bt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||R2(e,i,r)}function He(n,e){return n}var J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ue=class extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ko=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var iS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}};var oS=class{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ko,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ko)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new iS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}},aS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},cS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function AZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var dv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=AZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ze(n,e){return n<e?-1:n>e?1:0}function lS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return JC(i)===JC(s)?ze(i,s):JC(i)?1:-1}return ze(n.length,e.length)}var RZ=55296,MZ=57343;function JC(n){let e=n.charCodeAt(0);return e>=RZ&&e<=MZ}function jl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var zV="__name__",hv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ze(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):lS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}},rn=class n extends hv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},PZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=class n extends hv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return PZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zV}static keyField(){return new n([zV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var _e=class n{constructor(e){this.path=e}static fromPath(e){return new n(rn.fromString(e))}static fromName(e){return new n(rn.fromString(e).popFirst(5))}static empty(){return new n(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new rn(e.slice()))}};function xZ(n,e,t,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function NZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function ZC(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=NZ(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Gf(n,e){if(!kZ(n))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ue(J.INVALID_ARGUMENT,t);return!0}var $V=-62135596800,qV=1e6,On=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*qV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$V)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qV}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-$V;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:zt("string",On._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new On(0,0))}static max(){return new n(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var kf=-1,dS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};dS.UNKNOWN_ID=-1;function OZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new Ic(i,_e.empty(),e)}function LZ(n){return new Ic(n.readTime,n.key,kf)}var Ic=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),_e.empty(),kf)}static max(){return new n(De.max(),_e.empty(),kf)}};function FZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}var VZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vv(n){return b(this,null,function*(){if(n.code!==J.FAILED_PRECONDITION||n.message!==VZ)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function UZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ed(n){return n.name==="IndexedDbTransactionError"}var LD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),BZ=-1;function Uv(n){return n==null}function fv(n){return n===0&&1/n==-1/0}var M2="";function jZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HV(e)),e=zZ(n.get(t),e);return HV(e)}function zZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case M2:t+="";break;default:t+=s}}return t}function HV(n){return n+M2+""}var $Z="remoteDocuments",P2="owner";var x2="mutationQueues";var k2="mutations";var N2="documentMutations",qZ="remoteDocumentsV14";var O2="remoteDocumentGlobal";var L2="targets";var F2="targetDocuments";var V2="targetGlobal",U2="collectionParents";var B2="clientMetadata";var j2="bundles";var z2="namedQueries";var HZ="indexConfiguration";var GZ="indexState";var WZ="indexEntries";var $2="documentOverlays";var KZ="globals";var QZ=[x2,k2,N2,$Z,L2,P2,V2,F2,B2,O2,U2,j2,z2],CEe=[...QZ,$2],YZ=[x2,k2,N2,qZ,L2,P2,V2,F2,B2,O2,U2,j2,z2,$2],JZ=YZ,ZZ=[...JZ,HZ,GZ,WZ];var SEe=[...ZZ,KZ];function GV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XZ(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ft=class n{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}},kl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ni=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}};Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1;Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ni(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ln=class n{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},pv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mc=class n{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new n([])}unionWith(e){let t=new ln(ni.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var gv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Sn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gv("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Sn.EMPTY_BYTE_STRING=new Sn("");var eX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(n){if(bt(!!n,39018),typeof n=="string"){let e=0,t=eX.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ks(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}var q2="server_timestamp",H2="__type__",G2="__previous_value__",W2="__local_write_time__";function FD(n){return(n?.mapValue?.fields||{})[H2]?.stringValue===q2}function Bv(n){let e=n.mapValue.fields[G2];return FD(e)?Bv(e):e}function Nf(n){let e=xs(n.mapValue.fields[W2].timestampValue);return new On(e.seconds,e.nanos)}var fS=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},pS="(default)",mv=class n{constructor(e,t){this.projectId=e,this.database=t||pS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===pS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var K2="__type__",Q2="__max__",sv={mapValue:{fields:{__type__:{stringValue:Q2}}}},Y2="__vector__",Of="value";function Qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FD(n)?4:Z2(n)?9007199254740991:J2(n)?10:11:Ie(28295,{value:n})}function Li(n,e){if(n===e)return!0;let t=Qo(n);if(t!==Qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nf(n).isEqual(Nf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=xs(i.timestampValue),a=xs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ks(i.bytesValue).isEqual(ks(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?fv(o)===fv(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return jl(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(GV(o)!==GV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Li(o[c],a[c])))return!1;return!0}(n,e);default:return Ie(52216,{left:n})}}function Lf(n,e){return(n.values||[]).find(t=>Li(t,e))!==void 0}function zl(n,e){if(n===e)return 0;let t=Qo(n),r=Qo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Et(s.integerValue||s.doubleValue),c=Et(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return WV(n.timestampValue,e.timestampValue);case 4:return WV(Nf(n),Nf(e));case 5:return lS(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ks(s),c=ks(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=ze(a[d],c[d]);if(h!==0)return h}return ze(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ze(Et(s.latitude),Et(o.latitude));return a!==0?a:ze(Et(s.longitude),Et(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return KV(n.arrayValue,e.arrayValue);case 10:return function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Of]?.arrayValue,h=c[Of]?.arrayValue,g=ze(d?.values?.length||0,h?.values?.length||0);return g!==0?g:KV(d,h)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===sv.mapValue&&o===sv.mapValue)return 0;if(s===sv.mapValue)return 1;if(o===sv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=lS(c[g],h[g]);if(E!==0)return E;let I=zl(a[c[g]],d[h[g]]);if(I!==0)return I}return ze(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function WV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);let t=xs(n),r=xs(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function KV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=zl(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function $l(n){return gS(n)}function gS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ks(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=gS(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${gS(t.fields[o])}`;return i+"}"}(n.mapValue):Ie(61005,{value:n})}function cv(n){switch(Qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Bv(n);return e?16+cv(e):16;case 5:return 2*n.stringValue.length;case 6:return ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+cv(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Wf(r.fields,(s,o)=>{i+=s.length+cv(o)}),i}(n.mapValue);default:throw Ie(13486,{value:n})}}function mS(n){return!!n&&"integerValue"in n}function VD(n){return!!n&&"arrayValue"in n}function QV(n){return!!n&&"nullValue"in n}function YV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function XC(n){return!!n&&"mapValue"in n}function J2(n){return(n?.mapValue?.fields||{})[K2]?.stringValue===Y2}function Df(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Df(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Df(n.arrayValue.values[t]);return e}return z({},n)}function Z2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Q2}var AEe={mapValue:{fields:{[K2]:{stringValue:Y2},[Of]:{arrayValue:{}}}}};var Rs=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!XC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Df(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());XC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];XC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Df(this.value))}};var ri=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),Rs.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),Rs.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),Rs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ql=class{constructor(e,t){this.position=e,this.inclusive=t}};function JV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),t.key):r=zl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}var Hl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function tX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var yv=class{},sn=class n extends yv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _S(e,t,r):t==="array-contains"?new ES(e,r):t==="in"?new IS(e,r):t==="not-in"?new bS(e,r):t==="array-contains-any"?new TS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vS(e,r):new wS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zl(t,this.value)):t!==null&&Qo(this.value)===Qo(t)&&this.matchesComparison(zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fi=class n extends yv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return X2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function X2(n){return n.op==="and"}function eU(n){return nX(n)&&X2(n)}function nX(n){for(let e of n.filters)if(e instanceof Fi)return!1;return!0}function yS(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+$l(n.value);if(eU(n))return n.filters.map(e=>yS(e)).join(",");{let e=n.filters.map(t=>yS(t)).join(",");return`${n.op}(${e})`}}function tU(n,e){return n instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.field.isEqual(i.field)&&Li(r.value,i.value)}(n,e):n instanceof Fi?function(r,i){return i instanceof Fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tU(o,i.filters[a]),!0):!1}(n,e):void Ie(19439)}function nU(n){return n instanceof sn?function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`}(n):n instanceof Fi?function(t){return t.op.toString()+" {"+t.getFilters().map(nU).join(" ,")+"}"}(n):"Filter"}var _S=class extends sn{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){let t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}},vS=class extends sn{constructor(e,t){super(e,"in",t),this.keys=rU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wS=class extends sn{constructor(e,t){super(e,"not-in",t),this.keys=rU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function rU(n,e){return(e.arrayValue?.values||[]).map(t=>_e.fromName(t.referenceValue))}var ES=class extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return VD(t)&&Lf(t.arrayValue,this.value)}},IS=class extends sn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Lf(this.value.arrayValue,t)}},bS=class extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lf(this.value.arrayValue,t)}},TS=class extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!VD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lf(this.value.arrayValue,r))}};var CS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function XV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new CS(n,e,t,r,i,s,o)}function UD(n){let e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$l(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$l(r)).join(",")),e.Te=t}return e.Te}function BD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZV(n.startAt,e.startAt)&&ZV(n.endAt,e.endAt)}function SS(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Gl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function rX(n,e,t,r,i,s,o,a){return new Gl(n,e,t,r,i,s,o,a)}function jD(n){return new Gl(n)}function e2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iX(n){return n.collectionGroup!==null}function Af(n){let e=He(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(ni.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Hl(s,r))}),t.has(ni.keyField().canonicalString())||e.Ie.push(new Hl(ni.keyField(),r))}return e.Ie}function Oi(n){let e=He(n);return e.Ee||(e.Ee=sX(e,Af(n))),e.Ee}function sX(n,e){if(n.limitType==="F")return XV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Hl(i.field,s)});let t=n.endAt?new ql(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ql(n.startAt.position,n.startAt.inclusive):null;return XV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function DS(n,e,t){return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jv(n,e){return BD(Oi(n),Oi(e))&&n.limitType===e.limitType}function iU(n){return`${UD(Oi(n))}|lt:${n.limitType}`}function Ml(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nU(i)).join(", ")}]`),Uv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$l(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$l(i)).join(",")),`Target(${r})`}(Oi(n))}; limitType=${n.limitType})`}function zv(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Af(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let d=JV(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,Af(r),i)||r.endAt&&!function(o,a,c){let d=JV(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,Af(r),i))}(n,e)}function oX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sU(n){return(e,t)=>{let r=!1;for(let i of Af(n)){let s=aX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aX(n,e,t){let r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?zl(c,d):Ie(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}var Ns=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return XZ(this.inner)}size(){return this.innerSize}};var cX=new Ft(_e.comparator);function Yo(){return cX}var oU=new Ft(_e.comparator);function Sf(...n){let e=oU;for(let t of n)e=e.insert(t.key,t);return e}function uX(n){let e=oU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yc(){return Rf()}function aU(){return Rf()}function Rf(){return new Ns(n=>n.toString(),(n,e)=>n.isEqual(e))}var REe=new Ft(_e.comparator),lX=new ln(_e.comparator);function We(...n){let e=lX;for(let t of n)e=e.add(t);return e}var dX=new ln(ze);function hX(){return dX}function fX(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fv(e)?"-0":e}}function pX(n){return{integerValue:""+n}}var Wl=class{constructor(){this._=void 0}};function gX(n,e,t){return n instanceof Ff?function(i,s){let o={fields:{[H2]:{stringValue:q2},[W2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&FD(s)&&(s=Bv(s)),s&&(o.fields[G2]=s),{mapValue:o}}(t,e):n instanceof Kl?cU(n,e):n instanceof Ql?uU(n,e):function(i,s){let o=yX(i,s),a=t2(o)+t2(i.Ae);return mS(o)&&mS(i.Ae)?pX(a):fX(i.serializer,a)}(n,e)}function mX(n,e,t){return n instanceof Kl?cU(n,e):n instanceof Ql?uU(n,e):t}function yX(n,e){return n instanceof Vf?function(r){return mS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ff=class extends Wl{},Kl=class extends Wl{constructor(e){super(),this.elements=e}};function cU(n,e){let t=lU(e);for(let r of n.elements)t.some(i=>Li(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ql=class extends Wl{constructor(e){super(),this.elements=e}};function uU(n,e){let t=lU(e);for(let r of n.elements)t=t.filter(i=>!Li(i,r));return{arrayValue:{values:t}}}var Vf=class extends Wl{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function t2(n){return Et(n.integerValue||n.doubleValue)}function lU(n){return VD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _X(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Kl&&i instanceof Kl||r instanceof Ql&&i instanceof Ql?jl(r.elements,i.elements,Li):r instanceof Vf&&i instanceof Vf?Li(r.Ae,i.Ae):r instanceof Ff&&i instanceof Ff}(n.transform,e.transform)}var Mf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Uf=class{};function dU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new AS(n.key,Mf.none()):new Bf(n.key,n.data,Mf.none());{let t=n.data,r=Rs.empty(),i=new ln(ni.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yl(n.key,r,new mc(i.toArray()),Mf.none())}}function vX(n,e,t){n instanceof Bf?function(i,s,o){let a=i.value.clone(),c=r2(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Yl?function(i,s,o){if(!uv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=r2(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(hU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Pf(n,e,t,r){return n instanceof Bf?function(s,o,a,c){if(!uv(s.precondition,o))return a;let d=s.value.clone(),h=i2(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yl?function(s,o,a,c){if(!uv(s.precondition,o))return a;let d=i2(s.fieldTransforms,c,o),h=o.data;return h.setAll(hU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return uv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function n2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jl(r,i,(s,o)=>_X(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bf=class extends Uf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yl=class extends Uf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function r2(n,e,t){let r=new Map;bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mX(o,a,t[i]))}return r}function i2(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,gX(s,o,e))}return r}var AS=class extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var RS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&vX(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Pf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=aU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=dU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,(t,r)=>n2(t,r))&&jl(this.baseMutations,e.baseMutations,(t,r)=>n2(t,r))}};var MS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var PS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Bt,qe;function fU(n){if(n===void 0)return Ps("GRPC error has no .code"),J.UNKNOWN;switch(n){case Bt.OK:return J.OK;case Bt.CANCELLED:return J.CANCELLED;case Bt.UNKNOWN:return J.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return J.INTERNAL;case Bt.UNAVAILABLE:return J.UNAVAILABLE;case Bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Bt.NOT_FOUND:return J.NOT_FOUND;case Bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Bt.ABORTED:return J.ABORTED;case Bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Bt.DATA_LOSS:return J.DATA_LOSS;default:return Ie(39323,{code:n})}}(qe=Bt||(Bt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";var wX=null;function EX(){return new TextEncoder}var IX=new Ds([4294967295,4294967295],0);function s2(n){let e=EX().encode(n),t=new HC;return t.update(e),new Uint8Array(t.digest())}function o2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ds([t,r],0),new Ds([i,s],0)]}var xS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ds.fromNumber(r)));return i.compare(IX)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=s2(e),[r,i]=o2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=s2(e),[r,i]=o2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_c=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _v=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new Ft(ze),Yo(),We())}},jf=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,We(),We(),We())}};var Nl=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},vv=class{constructor(e,t){this.targetId=e,this.Ce=t}},wv=class{constructor(e,t,r=Sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ev=class{constructor(){this.ve=0,this.Fe=a2(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}}),new jf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=a2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},kS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yo(),this.Je=ov(),this.He=ov(),this.Ye=new Ft(ze)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(SS(s))if(r===0){let o=new _e(s.path);this.et(t,o,ri.newNoDocument(o,De.min()))}else bt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}wX?.lt(function(h,g,E,I,k){let F={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},N=g.unchangedNames;return N&&(F.bloomFilter={applied:k===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:q=>I?.mightContain(q)??!1}),F}(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ks(r).toUint8Array()}catch(c){if(c instanceof gv)return xf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xS(o,i,s)}catch(c){return xf(c instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&SS(a.target)){let c=new _e(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ri.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=We();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new _v(e,t,this.Ye,this.je,r);return this.je=Yo(),this.Je=ov(),this.He=ov(),this.Ye=new Ft(ze),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ev,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ln(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ln(ze),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ev),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function ov(){return new Ft(_e.comparator)}function a2(){return new Ft(_e.comparator)}var bX={asc:"ASCENDING",desc:"DESCENDING"},TX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CX={and:"AND",or:"OR"},NS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function OS(n,e){return n.useProto3Json||Uv(e)?e:{value:e}}function SX(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DX(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ol(n){return bt(!!n,49232),De.fromTimestamp(function(t){let r=xs(t);return new On(r.seconds,r.nanos)}(n))}function AX(n,e){return LS(n,e).canonicalString()}function LS(n,e){let t=function(i){return new rn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function pU(n){let e=rn.fromString(n);return bt(vU(e),10190,{key:e.toString()}),e}function eS(n,e){let t=pU(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(mU(t))}function gU(n,e){return AX(n.databaseId,e)}function RX(n){let e=pU(n);return e.length===4?rn.emptyPath():mU(e)}function c2(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mU(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function MX(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ie(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(bt(h===void 0||typeof h=="string",58123),Sn.fromBase64String(h||"")):(bt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Sn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){let h=d.code===void 0?J.UNKNOWN:fU(d.code);return new ue(h,d.message||"")}(o);t=new wv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=eS(n,r.document.name),s=Ol(r.document.updateTime),o=r.document.createTime?Ol(r.document.createTime):De.min(),a=new Rs({mapValue:{fields:r.document.fields}}),c=ri.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Nl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=eS(n,r.document),s=r.readTime?Ol(r.readTime):De.min(),o=ri.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Nl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=eS(n,r.document),s=r.removedTargetIds||[];t=new Nl([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new PS(i,s),a=r.targetId;t=new vv(a,o)}}return t}function PX(n,e){return{documents:[gU(n,e.path)]}}function xX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gU(n,i);let s=function(d){if(d.length!==0)return _U(Fi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(E){return{field:Pl(E.field),direction:OX(E.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=OS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function kX(n){let e=RX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){bt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let E=yU(g);return E instanceof Fi&&eU(E)?E.getFilters():[E]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(E=>function(k){return new Hl(xl(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(E))}(t.orderBy));let a=null;t.limit&&(a=function(g){let E;return E=typeof g=="object"?g.value:g,Uv(E)?null:E}(t.limit));let c=null;t.startAt&&(c=function(g){let E=!!g.before,I=g.values||[];return new ql(I,E)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let E=!g.before,I=g.values||[];return new ql(I,E)}(t.endAt)),rX(e,i,o,s,a,"F",c,d)}function NX(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yU(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=xl(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=xl(t.unaryFilter.field);return sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xl(t.unaryFilter.field);return sn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xl(t.unaryFilter.field);return sn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(n):n.fieldFilter!==void 0?function(t){return sn.create(xl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fi.create(t.compositeFilter.filters.map(r=>yU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(t.compositeFilter.op))}(n):Ie(30097,{filter:n})}function OX(n){return bX[n]}function LX(n){return TX[n]}function FX(n){return CX[n]}function Pl(n){return{fieldPath:n.canonicalString()}}function xl(n){return ni.fromServerFormat(n.fieldPath)}function _U(n){return n instanceof sn?function(t){if(t.op==="=="){if(YV(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NAN"}};if(QV(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YV(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NOT_NAN"}};if(QV(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(t.field),op:LX(t.op),value:t.value}}}(n):n instanceof Fi?function(t){let r=t.getFilters().map(i=>_U(i));return r.length===1?r[0]:{compositeFilter:{op:FX(t.op),filters:r}}}(n):Ie(54877,{filter:n})}function vU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zf=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=Sn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var FS=class{constructor(e){this.yt=e}};function VX(n){let e=kX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?DS(e,e.limit,"L"):e}var Iv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Et(e.integerValue));else if("doubleValue"in e){let r=Et(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),fv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=xs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ks(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Z2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):J2(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Of,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Et(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Iv.Kt=new Iv;var VS=class{constructor(){this.Cn=new US}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ic.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ic.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},US=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(rn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(rn.comparator)).toArray()}};var MEe=new Uint8Array(0);var u2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wU=41943040,Sr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(wU,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);var $f=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var l2="LruGarbageCollector",UX=1048576;function d2([n,e],[t,r]){let i=ze(n,t);return i===0?ze(e,r):i}var BS=class{constructor(e){this.Ir=e,this.buffer=new ln(d2),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();d2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},jS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(l2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ed(t)?ie(l2,"Ignoring IndexedDB error during garbage collection: ",t):yield Vv(t)}yield this.Vr(3e5)}))}},zS=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(LD.ce);let r=new BS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(u2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u2):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Rl()<=Le.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function BX(n,e){return new zS(n,e)}var $S=class{constructor(){this.changes=new Ns(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var HS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Pf(r.mutation,i,mc.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){let i=yc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Sf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=yc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Yo(),o=Rf(),a=function(){return Rf()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Yl)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Pf(h.mutation,d,h.mutation.getFieldMask(),On.now())):o.set(d.key,mc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new qS(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Rf(),i=new Ft((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||mc.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||We()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=aU();h.forEach(E=>{if(!s.has(E)){let I=dU(t.get(E),r.get(E));I!==null&&g.set(E,I),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iX(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve(yc()),a=kf,c=s;return o.next(d=>H.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,We())).next(h=>({batchId:a,changes:uX(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Sf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Sf();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,c=>{let d=function(g,E){return new Gl(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ri.newInvalidDocument(h)))});let a=Sf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Pf(h.mutation,d,mc.empty(),On.now()),zv(t,d)&&(a=a.insert(c,d))}),a})}};var GS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ol(i.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:VX(i.bundledQuery),readTime:Ol(i.readTime)}}(t)),H.resolve()}};var WS=class{constructor(){this.overlays=new Ft(_e.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=yc();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=yc(),s=t.length+1,o=new _e(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ft((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=yc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=yc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return H.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new MS(t,r));let s=this.qr.get(t);s===void 0&&(s=We(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var KS=class{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var qf=class{constructor(){this.Qr=new ln(jt.$r),this.Ur=new ln(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new jt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new _e(new rn([])),r=new jt(t,e),i=new jt(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new _e(new rn([])),r=new jt(t,e),i=new jt(t,e+1),s=We();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new jt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},jt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}};var QS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ln(jt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new RS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?BZ:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new jt(t,0),i=new jt(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(ze);return t.forEach(i=>{let s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;_e.isDocumentKey(s)||(s=s.child(""));let o=new jt(new _e(s),0),a=new ln(ze);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),H.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(t.mutations,i=>{let s=new jt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new jt(t,0),i=this.Zr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var YS=class{constructor(e){this.ri=e,this.docs=function(){return new Ft(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=Yo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ri.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Yo(),o=t.path,a=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||FZ(LZ(h),r)<=0||(i.has(h.key)||zv(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JS(this)}getSize(e){return H.resolve(this.size)}},JS=class extends $S{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var ZS=class{constructor(e){this.persistence=e,this.si=new Ns(t=>UD(t),BD),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new qf,this.targetCount=0,this.ai=$f.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new $f(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}};var bv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new LD(0),this.li=!1,this.li=!0,this.hi=new KS,this.referenceDelegate=e(this),this.Pi=new ZS(this),this.indexManager=new VS,this.remoteDocumentCache=function(i){return new YS(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new FS(t),this.Ii=new GS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new QS(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new XS(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return H.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},XS=class extends hS{constructor(e){super(),this.currentSequenceNumber=e}},eD=class n{constructor(e){this.persistence=e,this.Ri=new qf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,r=>{let i=_e.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Tv=class n{constructor(e,t){this.persistence=e,this.pi=new Ns(r=>jZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BX(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return H.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cv(e.data.value)),t}br(e,t,r){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var tD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=We(),i=We();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var nD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var rD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return iF()?8:UZ(fr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new nD;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Rl()<=Le.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Rl()<=Le.DEBUG&&ie("QueryEngine","Query:",Ml(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Rl()<=Le.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):H.resolve())}ys(e,t){if(e2(t))return H.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=DS(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=We(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,DS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return e2(t)||i.isEqual(De.min())?H.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?H.resolve(null):(Rl()<=Le.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ml(t)),this.vs(e,o,t,OZ(i,kf)).next(a=>a))})}Ds(e,t){let r=new ln(sU(e));return t.forEach((i,s)=>{zv(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Rl()<=Le.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ml(t)),this.ps.getDocumentsMatchingQuery(e,t,Ic.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var zD="LocalStore",jX=3e8,iD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ft(ze),this.xs=new Ns(s=>UD(s),BD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function zX(n,e,t,r){return new iD(n,e,t,r)}function EU(n,e){return b(this,null,function*(){let t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=We();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})})}function IU(n){let e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function $X(n,e){let t=He(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let I=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(Sn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(g,I),function(F,N,q){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=jX?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(E,I,h)&&a.push(t.Pi.updateTargetData(s,I))});let c=Yo(),d=We();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(qX(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(De.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function qX(n,e,t){let r=We(),i=We();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Yo();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(zD,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function HX(n,e){let t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new zf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function sD(n,e,t){return b(this,null,function*(){let r=He(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ed(o))throw o;ie(zD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function h2(n,e,t){let r=He(n),i=De.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){let g=He(c),E=g.xs.get(h);return E!==void 0?H.resolve(g.Ms.get(E)):g.Pi.getTargetData(d,h)}(r,o,Oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:We())).next(a=>(GX(r,oX(e),a),{documents:a,Qs:s})))}function GX(n,e,t){let r=n.Os.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var Cv=class{constructor(){this.activeTargetIds=hX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var oD=class{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var aD=class{Oo(e){}shutdown(){}};var f2="ConnectivityMonitor",Sv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(f2,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ie(f2,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var av=null;function cD(){return av===null?av=function(){return 268435456+Math.round(2147483648*Math.random())}():av++,"0x"+av.toString(16)}var tS="RestConnection",WX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},uD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===pS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=cD(),a=this.zo(e,t.toUriEncodedString());ie(tS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=hf(d);return this.Jo(e,a,c,r,h).then(g=>(ie(tS,`Received RPC '${e}' ${o}: `,g),g),g=>{throw xf(tS,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=WX[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var lD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Tn="WebChannelConnection",dD=class extends uD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=cD();return new Promise((a,c)=>{let d=new GC;d.setWithCredentials(!0),d.listenOnce(WC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Cf.NO_ERROR:let g=d.getResponseJson();ie(Tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Cf.TIMEOUT:ie(Tn,`RPC '${e}' ${o} timed out`),c(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:let E=d.getStatus();if(ie(Tn,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);let k=I?.error;if(k&&k.status&&k.message){let F=function(q){let te=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN}(k.status);c(new ue(F,k.message))}else c(new ue(J.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(Tn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ie(Tn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=cD(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YC(),a=QC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ie(Tn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let E=!1,I=!1,k=new lD({Yo:N=>{I?ie(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(E||(ie(Tn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),E=!0),ie(Tn,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},Zo:()=>g.close()}),F=(N,q,te)=>{N.listen(q,Y=>{try{te(Y)}catch(ae){setTimeout(()=>{throw ae},0)}})};return F(g,Al.EventType.OPEN,()=>{I||(ie(Tn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),F(g,Al.EventType.CLOSE,()=>{I||(I=!0,ie(Tn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(g))}),F(g,Al.EventType.ERROR,N=>{I||(I=!0,xf(Tn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),F(g,Al.EventType.MESSAGE,N=>{if(!I){let q=N.data[0];bt(!!q,16349);let te=q,Y=te?.error||te[0]?.error;if(Y){ie(Tn,`RPC '${e}' stream ${i} received error:`,Y);let ae=Y.status,je=function(_){let w=Bt[_];if(w!==void 0)return fU(w)}(ae),le=Y.message;je===void 0&&(je=J.INTERNAL,le="Unknown error status: "+ae+" with message "+Y.message),I=!0,k.a_(new ue(je,le)),g.close()}else ie(Tn,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}}),F(a,KC.STAT_EVENT,N=>{N.stat===iv.PROXY?ie(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===iv.NOPROXY&&ie(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function nS(){return typeof document<"u"?document:null}function bU(n){return new NS(n,!0)}var Dv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var p2="PersistentStream",hD=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return b(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return b(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return b(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>b(this,null,function*(){this.state=0,this.start()}))}z_(e){return ie(p2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ie(p2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fD=class extends hD{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=MX(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Ol(o.readTime):De.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=c2(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=SS(c)?{documents:PX(s,c)}:{query:xX(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DX(s,o.resumeToken);let d=OS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=SX(s,o.snapshotVersion.toTimestamp());let d=OS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=NX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=c2(this.serializer),t.removeTarget=e,this.q_(t)}};var pD=class{},gD=class extends pD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,LS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(J.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,LS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(J.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},mD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Jl="RemoteStore",yD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(()=>b(this,null,function*(){Qf(this)&&(ie(Jl,"Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let d=He(c);d.Ea.add(4),yield Kf(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield $v(d)})}(this))}))}),this.Ra=new mD(r,i)}};function $v(n){return b(this,null,function*(){if(Qf(n))for(let e of n.da)yield e(!0)})}function Kf(n){return b(this,null,function*(){for(let e of n.da)yield e(!1)})}function TU(n,e){let t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),GD(t)?HD(t):td(t).O_()&&qD(t,e))}function $D(n,e){let t=He(n),r=td(t);t.Ia.delete(e),r.O_()&&CU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qf(t)&&t.Ra.set("Unknown"))}function qD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}td(n).Y_(e)}function CU(n,e){n.Va.Ue(e),td(n).Z_(e)}function HD(n){n.Va=new kS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),td(n).start(),n.Ra.ua()}function GD(n){return Qf(n)&&!td(n).x_()&&n.Ia.size>0}function Qf(n){return He(n).Ea.size===0}function SU(n){n.Va=void 0}function KX(n){return b(this,null,function*(){n.Ra.set("Online")})}function QX(n){return b(this,null,function*(){n.Ia.forEach((e,t)=>{qD(n,e)})})}function YX(n,e){return b(this,null,function*(){SU(n),GD(n)?(n.Ra.ha(e),HD(n)):n.Ra.set("Unknown")})}function JX(n,e,t){return b(this,null,function*(){if(n.Ra.set("Online"),e instanceof wv&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){ie(Jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield g2(n,r)}else if(e instanceof Nl?n.Va.Ze(e):e instanceof vv?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{let r=yield IU(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Sn.EMPTY_BYTE_STRING,h.snapshotVersion)),CU(s,c);let g=new zf(h.target,c,d,h.sequenceNumber);qD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ie(Jl,"Failed to raise snapshot:",r),yield g2(n,r)}})}function g2(n,e,t){return b(this,null,function*(){if(!ed(e))throw e;n.Ea.add(1),yield Kf(n),n.Ra.set("Offline"),t||(t=()=>IU(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){ie(Jl,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield $v(n)}))})}function m2(n,e){return b(this,null,function*(){let t=He(n);t.asyncQueue.verifyOperationInProgress(),ie(Jl,"RemoteStore received new credentials");let r=Qf(t);t.Ea.add(3),yield Kf(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield $v(t)})}function ZX(n,e){return b(this,null,function*(){let t=He(n);e?(t.Ea.delete(2),yield $v(t)):e||(t.Ea.add(2),yield Kf(t),t.Ra.set("Unknown"))})}function td(n){return n.ma||(n.ma=function(t,r,i){let s=He(t);return s.sa(),new fD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:KX.bind(null,n),t_:QX.bind(null,n),r_:YX.bind(null,n),H_:JX.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.ma.B_(),GD(n)?HD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),SU(n))}))),n.ma}var _D=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function DU(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),ed(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}var Av=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Sf(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rv=class{constructor(){this.ga=new Ft(_e.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Zl=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Av.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},wD=class{constructor(){this.queries=y2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=He(t),s=i.queries;i.queries=y2(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ue(J.ABORTED,"Firestore shutting down"))}};function y2(){return new Ns(n=>iU(n),jv)}function XX(n,e){return b(this,null,function*(){let t=He(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new vD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=DU(o,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&WD(t)})}function eee(n,e){return b(this,null,function*(){let t=He(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tee(n,e){let t=He(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&WD(t)}function nee(n,e,t){let r=He(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function WD(n){n.Ca.forEach(e=>{e.next()})}var ED,_2;(_2=ED||(ED={})).Ma="default",_2.Cache="cache";var ID=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ED.Cache}};var Mv=class{constructor(e){this.key=e}},Pv=class{constructor(e){this.key=e}},bD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=sU(e),this.tu=new Av(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Rv,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),I=zv(this.query,g)?g:null,k=!!E&&this.mutatedKeys.has(E.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),N=!1;E&&I?E.data.isEqual(I.data)?k!==F&&(r.track({type:3,doc:I}),N=!0):this.su(E,I)||(r.track({type:2,doc:I}),N=!0,(c&&this.eu(I,c)>0||d&&this.eu(I,d)<0)&&(a=!0)):!E&&I?(r.track({type:0,doc:I}),N=!0):E&&!I&&(r.track({type:1,doc:E}),N=!0,(c||d)&&(a=!0)),N&&(I?(o=o.add(I),s=F?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>function(I,k){let F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:N})}};return F(I)-F(k)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Zl(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=We(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Pv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Mv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=We();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},KD="SyncEngine",TD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},CD=class{constructor(e){this.key=e,this.hu=!1}},SD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ns(a=>iU(a),jv),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(_e.comparator),this.Au=new Map,this.Ru=new qf,this.Vu={},this.mu=new Map,this.fu=$f.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function ree(n,e,t=!0){return b(this,null,function*(){let r=xU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield AU(r,e,t,!0),i})}function iee(n,e){return b(this,null,function*(){let t=xU(n);yield AU(t,e,!0,!1)})}function AU(n,e,t,r){return b(this,null,function*(){let i=yield HX(n.localStore,Oi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield see(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&TU(n.remoteStore,i),a})}function see(n,e,t,r,i){return b(this,null,function*(){n.pu=(g,E,I)=>function(F,N,q,te){return b(this,null,function*(){let Y=N.view.ru(q);Y.Cs&&(Y=yield h2(F.localStore,N.query,!1).then(({documents:S})=>N.view.ru(S,Y)));let ae=te&&te.targetChanges.get(N.targetId),je=te&&te.targetMismatches.get(N.targetId)!=null,le=N.view.applyChanges(Y,F.isPrimaryClient,ae,je);return w2(F,N.targetId,le.au),le.snapshot})}(n,g,E,I);let s=yield h2(n.localStore,e,!0),o=new bD(e,s.Qs),a=o.ru(s.documents),c=jf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);w2(n,t,d.au);let h=new TD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function oee(n,e,t){return b(this,null,function*(){let r=He(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!jv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$D(r.remoteStore,i.targetId),DD(r,i.targetId)}).catch(Vv))):(DD(r,i.targetId),yield sD(r.localStore,i.targetId,!0))})}function aee(n,e){return b(this,null,function*(){let t=He(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$D(t.remoteStore,r.targetId))})}function RU(n,e){return b(this,null,function*(){let t=He(n);try{let r=yield $X(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?bt(o.hu,14607):i.removedDocuments.size>0&&(bt(o.hu,42227),o.hu=!1))}),yield PU(t,r,e)}catch(r){yield Vv(r)}})}function v2(n,e,t){let r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=He(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.Sa)E.va(a)&&(d=!0)}),d&&WD(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cee(n,e,t){return b(this,null,function*(){let r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ft(_e.comparator);o=o.insert(s,ri.newNoDocument(s,De.min()));let a=We().add(s),c=new _v(De.min(),new Map,new Ft(ze),o,a);yield RU(r,c),r.du=r.du.remove(s),r.Au.delete(e),QD(r)}else yield sD(r.localStore,e,!1).then(()=>DD(r,e,t)).catch(Vv)})}function DD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||MU(n,r)})}function MU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&($D(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),QD(n))}function w2(n,e,t){for(let r of t)r instanceof Mv?(n.Ru.addReference(r.key,e),uee(n,r)):r instanceof Pv?(ie(KD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||MU(n,r.key)):Ie(19791,{wu:r})}function uee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(KD,"New document in limbo: "+t),n.Eu.add(r),QD(n))}function QD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new _e(rn.fromString(e)),r=n.fu.next();n.Au.set(r,new CD(t)),n.du=n.du.insert(t,r),TU(n.remoteStore,new zf(Oi(jD(t.path)),r,"TargetPurposeLimboResolution",LD.ce))}}function PU(n,e,t){return b(this,null,function*(){let r=He(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=tD.As(c.targetId,d);s.push(h)}}))}),yield Promise.all(o),r.Pu.H_(i),yield function(c,d){return b(this,null,function*(){let h=He(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>H.forEach(d,E=>H.forEach(E.Es,I=>h.persistence.referenceDelegate.addReference(g,E.targetId,I)).next(()=>H.forEach(E.ds,I=>h.persistence.referenceDelegate.removeReference(g,E.targetId,I)))))}catch(g){if(!ed(g))throw g;ie(zD,"Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let I=h.Ms.get(E),k=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(E,F)}}})}(r.localStore,s))})}function lee(n,e){return b(this,null,function*(){let t=He(n);if(!t.currentUser.isEqual(e)){ie(KD,"User change. New user:",e.toKey());let r=yield EU(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ue(J.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield PU(t,r.Ls)}})}function dee(n,e){let t=He(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function xU(n){let e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cee.bind(null,e),e.Pu.H_=tee.bind(null,e.eventManager),e.Pu.yu=nee.bind(null,e.eventManager),e}var kU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=bU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return zX(this.persistence,new rD,t.initialUser,this.serializer)}Cu(t){return new bv(eD.mi,this.serializer)}Du(t){return new oD}terminate(){return b(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),AD=class extends kU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof Tv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new bv(r=>Tv.mi(r,t),this.serializer)}};var hee=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lee.bind(null,this.syncEngine),yield ZX(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new wD}()}createDatastore(t){let r=bU(t.databaseInfo.databaseId),i=function(o){return new dD(o)}(t.databaseInfo);return function(o,a,c,d){return new gD(o,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new yD(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>v2(this.syncEngine,r,0),function(){return Sv.v()?new Sv:new aD}())}createSyncEngine(t,r){return function(s,o,a,c,d,h,g){let E=new SD(s,o,a,c,d,h);return g&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){yield function(r){return b(this,null,function*(){let i=He(r);ie(Jl,"RemoteStore shutting down."),i.Ea.add(5),yield Kf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var RD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jo="FirestoreClient",MD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=dv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){ie(Jo,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(ie(Jo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=DU(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rS(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(Jo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield EU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function E2(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fee(n);ie(Jo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>m2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>m2(e.remoteStore,i)),n._onlineComponents=e})}function fee(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Jo,"Using user provided OfflineComponentProvider");try{yield rS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xf("Error using user provided cache. Falling back to memory cache: "+t),yield rS(n,new kU)}}else ie(Jo,"Using default OfflineComponentProvider"),yield rS(n,new AD(void 0));return n._offlineComponents})}function pee(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Jo,"Using user provided OnlineComponentProvider"),yield E2(n,n._uninitializedComponentsProvider._online)):(ie(Jo,"Using default OnlineComponentProvider"),yield E2(n,new hee))),n._onlineComponents})}function I2(n){return b(this,null,function*(){let e=yield pee(n),t=e.eventManager;return t.onListen=ree.bind(null,e.syncEngine),t.onUnlisten=oee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aee.bind(null,e.syncEngine),t})}function NU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var b2=new Map;var gee="firestore.googleapis.com",T2=!0,xv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gee,this.ssl=T2}else this.host=e.host,this.ssl=e.ssl??T2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UX)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},PD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sS;switch(r.type){case"firstParty":return new cS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=b2.get(t);r&&(ie("ComponentProvider","Removing Datastore"),b2.delete(t),r.terminate())}(this),Promise.resolve()}};var kv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ms=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Gf(t,n._jsonSchema))return new n(e,r||null,new _e(rn.fromString(t.referencePath)))}};Ms._jsonSchemaVersion="firestore/documentReference/1.0",Ms._jsonSchema={type:zt("string",Ms._jsonSchemaVersion),referencePath:zt("string")};var xD=class n extends kv{constructor(e,t,r){super(e,t,jD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ms(this.firestore,null,new _e(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var C2="AsyncQueue",Nv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dv(this,"async_queue_retry"),this._c=()=>{let r=nS();r&&ie(C2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=nS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=nS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ko;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return b(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ed(e))throw e;ie(C2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",S2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=_D.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:S2(this.nc)})}verifyOperationInProgress(){}Tc(){return b(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function S2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function D2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Hf=class extends PD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Nv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,yield e}})}};function mee(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yee(n),n._firestoreClient}function yee(n){let e=n._freezeSettings(),t=function(i,s,o,a){return new fS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,NU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}}(n._componentsProvider))}var Ll=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Sn.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ll._jsonSchemaVersion="firestore/bytes/1.0",Ll._jsonSchema={type:zt("string",Ll._jsonSchemaVersion),bytes:zt("string")};var Ov=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fl=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Fl._jsonSchemaVersion="firestore/geoPoint/1.0",Fl._jsonSchema={type:zt("string",Fl._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};var Vl=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Vl._jsonSchemaVersion="firestore/vectorValue/1.0",Vl._jsonSchema={type:zt("string",Vl._jsonSchemaVersion),vectorValues:zt("object")};var _ee=new RegExp("[~\\*/\\[\\]]");function vee(n,e,t){if(e.search(_ee)>=0)throw A2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ov(...e.split("."))._internalPath}catch{throw A2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function A2(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ue(J.INVALID_ARGUMENT,a+n+c)}var Lv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(OU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},kD=class extends Lv{data(){return super.data()}};function OU(n,e){return typeof e=="string"?vee(n,e):e instanceof Ov?e._internalPath:e._delegate._internalPath}function wee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ND=class{convertValue(e,t="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Of].arrayValue?.values?.map(r=>Et(r.doubleValue));return new Vl(t)}convertGeoPoint(e){return new Fl(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Bv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nf(e));default:return null}}convertTimestamp(e){let t=xs(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=rn.fromString(e);bt(vU(r),9688,{name:e});let i=new mv(r.get(1),r.get(3)),s=new _e(r.popFirst(5));return i.isEqual(t)||Ps(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var vc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},wc=class n extends Lv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(OU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",wc._jsonSchema={type:zt("string",wc._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};var Ul=class extends wc{data(e={}){return super.data(e)}},Bl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ul(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ul(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ul(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Eee(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Eee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:zt("string",Bl._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};var Fv=class extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,t)}};function LU(n,...e){n=jo(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||D2(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(D2(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Ms)o=ZC(n.firestore,Hf),a=jD(n._key.path),s={next:c=>{e[r]&&e[r](Iee(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=ZC(n,kv);o=ZC(c.firestore,Hf),a=c._query;let d=new Fv(o);s={next:h=>{e[r]&&e[r](new Bl(o,d,c,h))},error:e[r+1],complete:e[r+2]},wee(n._query)}return function(d,h,g,E){let I=new RD(E),k=new ID(h,I,g);return d.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return XX(yield I2(d),k)})),()=>{I.Nu(),d.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return eee(yield I2(d),k)}))}}(mee(o),a,i,s)}function Iee(n,e,t){let r=t.docs.get(e._key),i=new Fv(n);return new wc(n,i,e._key,r,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Xl=i})(Il),$o(new ei("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Hf(new oS(r.getProvider("auth-internal")),new uS(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mv(d.options.projectId,h)}(o,i),o);return s=z({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vs(BV,jV,e),vs(BV,jV,"esm2020")})();var qv=function(){return qv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},qv.apply(this,arguments)};var bee={includeMetadataChanges:!1};function FU(n,e){return e===void 0&&(e=bee),new Me(function(t){var r=LU(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function VU(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:qv(qv({},r),(t={},t[e.idField]=n.id,t))}function UU(n){return FU(n,{includeMetadataChanges:!0}).pipe(we(function(e){return e.docs}))}function BU(n,e){return e===void 0&&(e={}),UU(n).pipe(we(function(t){return t.map(function(r){return VU(r,e)})}))}var jU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zU={};var Zo,YD;(function(){var n;function e(S,_){function w(){}w.prototype=_.prototype,S.D=_.prototype,S.prototype=new w,S.prototype.constructor=S,S.C=function(C,T,R){for(var v=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)v[mt-2]=arguments[mt];return _.prototype[T].apply(C,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,w){w||(w=0);var C=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)C[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)C[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=S.g[0],w=S.g[1],T=S.g[2];var R=S.g[3],v=_+(R^w&(T^R))+C[0]+3614090360&4294967295;_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[3]+3250441966&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[7]+4249261313&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[11]+2304563134&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(R^w&(T^R))+C[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(T^_&(w^T))+C[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=T+(w^R&(_^w))+C[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=w+(_^T&(R^_))+C[15]+1236535329&4294967295,w=T+(v<<22&4294967295|v>>>10),v=_+(T^R&(w^T))+C[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[0]+3921069994&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[4]+3889429448&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[8]+1163531501&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(T^R&(w^T))+C[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^T&(_^w))+C[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=T+(_^w&(R^_))+C[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(T^R))+C[12]+2368359562&4294967295,w=T+(v<<20&4294967295|v>>>12),v=_+(w^T^R)+C[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[14]+4259657740&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[10]+3200236656&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[6]+76029189&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(w^T^R)+C[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^T)+C[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=T+(R^_^w)+C[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=w+(T^R^_)+C[2]+3299628645&4294967295,w=T+(v<<23&4294967295|v>>>9),v=_+(T^(w|~R))+C[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[5]+4237533241&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[1]+2240044497&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[13]+1309151649&4294967295,w=T+(v<<21&4294967295|v>>>11),v=_+(T^(w|~R))+C[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~T))+C[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=T+(_^(R|~w))+C[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=w+(R^(T|~_))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var w=_-this.blockSize,C=this.B,T=this.h,R=0;R<_;){if(T==0)for(;R<=w;)i(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<_;)if(C[T++]=S.charCodeAt(R++),T==this.blockSize){i(this,C),T=0;break}}else for(;R<_;)if(C[T++]=S[R++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var w=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=w&255,w/=256;for(this.u(S),S=Array(16),_=w=0;4>_;++_)for(var C=0;32>C;C+=8)S[w++]=this.g[_]>>>C&255;return S};function s(S,_){var w=a;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=_(S)}function o(S,_){this.h=_;for(var w=[],C=!0,T=S.length-1;0<=T;T--){var R=S[T]|0;C&&R==_||(w[T]=R,C=!1)}this.g=w}var a={};function c(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return g;if(0>S)return N(d(-S));for(var _=[],w=1,C=0;S>=w;C++)_[C]=S/w|0,w*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return N(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(_,8)),C=g,T=0;T<S.length;T+=8){var R=Math.min(8,S.length-T),v=parseInt(S.substring(T,T+R),_);8>R?(R=d(Math.pow(_,R)),C=C.j(R).add(d(v))):(C=C.j(w),C=C.add(d(v)))}return C}var g=c(0),E=c(1),I=c(16777216);n=o.prototype,n.m=function(){if(F(this))return-N(this).m();for(var S=0,_=1,w=0;w<this.g.length;w++){var C=this.i(w);S+=(0<=C?C:4294967296+C)*_,_*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(F(this))return"-"+N(this).toString(S);for(var _=d(Math.pow(S,6)),w=this,C="";;){var T=ae(w,_).g;w=q(w,T.j(_));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(S);if(w=T,k(w))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function F(S){return S.h==-1}n.l=function(S){return S=q(this,S),F(S)?-1:k(S)?0:1};function N(S){for(var _=S.g.length,w=[],C=0;C<_;C++)w[C]=~S.g[C];return new o(w,~S.h).add(E)}n.abs=function(){return F(this)?N(this):this},n.add=function(S){for(var _=Math.max(this.g.length,S.g.length),w=[],C=0,T=0;T<=_;T++){var R=C+(this.i(T)&65535)+(S.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);C=v>>>16,R&=65535,v&=65535,w[T]=v<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function q(S,_){return S.add(N(_))}n.j=function(S){if(k(this)||k(S))return g;if(F(this))return F(S)?N(this).j(N(S)):N(N(this).j(S));if(F(S))return N(this.j(N(S)));if(0>this.l(I)&&0>S.l(I))return d(this.m()*S.m());for(var _=this.g.length+S.g.length,w=[],C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var T=0;T<S.g.length;T++){var R=this.i(C)>>>16,v=this.i(C)&65535,mt=S.i(T)>>>16,Ln=S.i(T)&65535;w[2*C+2*T]+=v*Ln,te(w,2*C+2*T),w[2*C+2*T+1]+=R*Ln,te(w,2*C+2*T+1),w[2*C+2*T+1]+=v*mt,te(w,2*C+2*T+1),w[2*C+2*T+2]+=R*mt,te(w,2*C+2*T+2)}for(C=0;C<_;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=_;C<2*_;C++)w[C]=0;return new o(w,0)};function te(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function Y(S,_){this.g=S,this.h=_}function ae(S,_){if(k(_))throw Error("division by zero");if(k(S))return new Y(g,g);if(F(S))return _=ae(N(S),_),new Y(N(_.g),N(_.h));if(F(_))return _=ae(S,N(_)),new Y(N(_.g),_.h);if(30<S.g.length){if(F(S)||F(_))throw Error("slowDivide_ only works with positive integers.");for(var w=E,C=_;0>=C.l(S);)w=je(w),C=je(C);var T=le(w,1),R=le(C,1);for(C=le(C,2),w=le(w,2);!k(C);){var v=R.add(C);0>=v.l(S)&&(T=T.add(w),R=v),C=le(C,1),w=le(w,1)}return _=q(S,T.j(_)),new Y(T,_)}for(T=g;0<=S.l(_);){for(w=Math.max(1,Math.floor(S.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=d(w),v=R.j(_);F(v)||0<v.l(S);)w-=C,R=d(w),v=R.j(_);k(R)&&(R=E),T=T.add(R),S=q(S,v)}return new Y(T,S)}n.A=function(S){return ae(this,S).h},n.and=function(S){for(var _=Math.max(this.g.length,S.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)&S.i(C);return new o(w,this.h&S.h)},n.or=function(S){for(var _=Math.max(this.g.length,S.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)|S.i(C);return new o(w,this.h|S.h)},n.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)^S.i(C);return new o(w,this.h^S.h)};function je(S){for(var _=S.g.length+1,w=[],C=0;C<_;C++)w[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(w,S.h)}function le(S,_){var w=_>>5;_%=32;for(var C=S.g.length-w,T=[],R=0;R<C;R++)T[R]=0<_?S.i(R+w)>>>_|S.i(R+w+1)<<32-_:S.i(R+w);return new o(T,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YD=zU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Zo=zU.Integer=o}).apply(typeof jU<"u"?jU:typeof self<"u"?self:typeof window<"u"?window:{});var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Os={};var JD,Tee,nd,ZD,Yf,Gv,XD,eA,tA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hv=="object"&&Hv];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var L=u[D];if(!(L in m))break e;m=m[L]}u=u[u.length-1],D=m[u],f=f(D),f!=D&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,D=!1,L={next:function(){if(!D&&m<u.length){var U=m++;return{value:f(U,u[U]),done:!1}}return D=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,D),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function E(u,f,m){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,E.apply(null,arguments)}function I(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var D=m.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function k(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(D,L,U){for(var G=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)G[Ke-2]=arguments[Ke];return f.prototype[L].apply(D,G)}}function F(u){let f=u.length;if(0<f){let m=Array(f);for(let D=0;D<f;D++)m[D]=u[D];return m}return[]}function N(u,f){for(let m=1;m<arguments.length;m++){let D=arguments[m];if(c(D)){let L=u.length||0,U=D.length||0;u.length=L+U;for(let G=0;G<U;G++)u[L+G]=D[G]}else u.push(D)}}class q{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function te(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var je=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function le(u,f,m){for(let D in u)f.call(m,u[D],D,u)}function S(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,f){let m,D;for(let L=1;L<arguments.length;L++){D=arguments[L];for(m in D)u[m]=D[m];for(let U=0;U<w.length;U++)m=w[U],Object.prototype.hasOwnProperty.call(D,m)&&(u[m]=D[m])}}function T(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function v(){var u=zs;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class mt{constructor(){this.h=this.g=null}add(f,m){let D=Ln.get();D.set(f,m),this.h?this.h.next=D:this.g=D,this.h=D}}var Ln=new q(()=>new hE,u=>u.reset());class hE{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let da,ci=!1,zs=new mt,Up=()=>{let u=a.Promise.resolve(void 0);da=()=>{u.then(Bp)}};var Bp=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){R(m)}var f=Ln;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ci=!1};function Ar(){this.s=this.s,this.C=this.C}Ar.prototype.s=!1,Ar.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ar.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Gt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var jc=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Gi(u,f){if(Gt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(je){e:{try{ae(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Nd[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Gi.aa.h.call(this)}}k(Gi,Gt);var Nd={2:"touch",3:"pen",4:"mouse"};Gi.prototype.h=function(){Gi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wi="closure_listenable_"+(1e6*Math.random()|0),Od=0;function jp(u,f,m,D,L){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!D,this.ha=L,this.key=++Od,this.da=this.fa=!1}function ha(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zc(u){this.src=u,this.g={},this.h=0}zc.prototype.add=function(u,f,m,D,L){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var G=qc(u,f,D,L);return-1<G?(f=u[G],m||(f.fa=!1)):(f=new jp(f,this.src,U,!!D,L),f.fa=m,u.push(f)),f};function $c(u,f){var m=f.type;if(m in u.g){var D=u.g[m],L=Array.prototype.indexOf.call(D,f,void 0),U;(U=0<=L)&&Array.prototype.splice.call(D,L,1),U&&(ha(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function qc(u,f,m,D){for(var L=0;L<u.length;++L){var U=u[L];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==D)return L}return-1}var fa="closure_lm_"+(1e6*Math.random()|0),Hc={};function zp(u,f,m,D,L){if(D&&D.once)return Wc(u,f,m,D,L);if(Array.isArray(f)){for(var U=0;U<f.length;U++)zp(u,f[U],m,D,L);return null}return m=Ki(m),u&&u[Wi]?u.K(f,m,d(D)?!!D.capture:!!D,L):Gc(u,f,m,!1,D,L)}function Gc(u,f,m,D,L,U){if(!f)throw Error("Invalid event type");var G=d(L)?!!L.capture:!!L,Ke=Kc(u);if(Ke||(u[fa]=Ke=new zc(u)),m=Ke.add(f,m,D,G,U),m.proxy)return m;if(D=Ld(),m.proxy=D,D.src=u,D.listener=m,u.addEventListener)jc||(L=G),L===void 0&&(L=!1),u.addEventListener(f.toString(),D,L);else if(u.attachEvent)u.attachEvent(pa(f.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ld(){function u(m){return f.call(u.src,u.listener,m)}let f=fE;return u}function Wc(u,f,m,D,L){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Wc(u,f[U],m,D,L);return null}return m=Ki(m),u&&u[Wi]?u.L(f,m,d(D)?!!D.capture:!!D,L):Gc(u,f,m,!0,D,L)}function Wt(u,f,m,D,L){if(Array.isArray(f))for(var U=0;U<f.length;U++)Wt(u,f[U],m,D,L);else D=d(D)?!!D.capture:!!D,m=Ki(m),u&&u[Wi]?(u=u.i,f=String(f).toString(),f in u.g&&(U=u.g[f],m=qc(U,m,D,L),-1<m&&(ha(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[f],u.h--)))):u&&(u=Kc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=qc(f,m,D,L)),(m=-1<u?f[u]:null)&&Kt(m))}function Kt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Wi])$c(f.i,u);else{var m=u.type,D=u.proxy;f.removeEventListener?f.removeEventListener(m,D,u.capture):f.detachEvent?f.detachEvent(pa(m),D):f.addListener&&f.removeListener&&f.removeListener(D),(m=Kc(f))?($c(m,u),m.h==0&&(m.src=null,f[fa]=null)):ha(u)}}}function pa(u){return u in Hc?Hc[u]:Hc[u]="on"+u}function fE(u,f){if(u.da)u=!0;else{f=new Gi(f,this);var m=u.listener,D=u.ha||u.src;u.fa&&Kt(u),u=m.call(D,f)}return u}function Kc(u){return u=u[fa],u instanceof zc?u:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ki(u){return typeof u=="function"?u:(u[Fd]||(u[Fd]=function(f){return u.handleEvent(f)}),u[Fd])}function Qt(){Ar.call(this),this.i=new zc(this),this.M=this,this.F=null}k(Qt,Ar),Qt.prototype[Wi]=!0,Qt.prototype.removeEventListener=function(u,f,m,D){Wt(this,u,f,m,D)};function on(u,f){var m,D=u.F;if(D)for(m=[];D;D=D.F)m.push(D);if(u=u.M,D=f.type||f,typeof f=="string")f=new Gt(f,u);else if(f instanceof Gt)f.target=f.target||u;else{var L=f;f=new Gt(D,u),C(f,L)}if(L=!0,m)for(var U=m.length-1;0<=U;U--){var G=f.g=m[U];L=$s(G,D,!0,f)&&L}if(G=f.g=u,L=$s(G,D,!0,f)&&L,L=$s(G,D,!1,f)&&L,m)for(U=0;U<m.length;U++)G=f.g=m[U],L=$s(G,D,!1,f)&&L}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],D=0;D<m.length;D++)ha(m[D]);delete u.g[f],u.h--}}this.F=null},Qt.prototype.K=function(u,f,m,D){return this.i.add(String(u),f,!1,m,D)},Qt.prototype.L=function(u,f,m,D){return this.i.add(String(u),f,!0,m,D)};function $s(u,f,m,D){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,U=0;U<f.length;++U){var G=f[U];if(G&&!G.da&&G.capture==m){var Ke=G.listener,xt=G.ha||G.src;G.fa&&$c(u.i,G),L=Ke.call(xt,D)!==!1&&L}}return L&&!D.defaultPrevented}function $p(u,f,m){if(typeof u=="function")m&&(u=E(u,m));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function qp(u){u.g=$p(()=>{u.g=null,u.i&&(u.i=!1,qp(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Hp extends Ar{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(u){Ar.call(this),this.h=u,this.g={}}k(qs,Ar);var Hs=[];function Qc(u){le(u.g,function(f,m){this.g.hasOwnProperty(m)&&Kt(f)},u),u.g={}}qs.prototype.N=function(){qs.aa.N.call(this),Qc(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=a.JSON.stringify,Qi=a.JSON.parse,Gp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gs(){}Gs.prototype.h=null;function Vd(u){return u.h||(u.h=u.i())}function Ws(){}var Ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yt(){Gt.call(this,"d")}k(Yt,Gt);function Yc(){Gt.call(this,"c")}k(Yc,Gt);var er={},Qs=null;function Jc(){return Qs=Qs||new Qt}er.La="serverreachability";function Wp(u){Gt.call(this,er.La,u)}k(Wp,Gt);function mr(u){let f=Jc();on(f,new Wp(f))}er.STAT_EVENT="statevent";function Kp(u,f){Gt.call(this,er.STAT_EVENT,u),this.stat=f}k(Kp,Gt);function hn(u){let f=Jc();on(f,new Kp(f,u))}er.Ma="timingevent";function ma(u,f){Gt.call(this,er.Ma,u),this.size=f}k(ma,Gt);function Ys(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Js(){this.g=!0}Js.prototype.xa=function(){this.g=!1};function Ud(u,f,m,D,L,U){u.info(function(){if(u.g)if(U)for(var G="",Ke=U.split("&"),xt=0;xt<Ke.length;xt++){var Qe=Ke[xt].split("=");if(1<Qe.length){var yn=Qe[0];Qe=Qe[1];var _n=yn.split("_");G=2<=_n.length&&_n[1]=="type"?G+(yn+"="+Qe+"&"):G+(yn+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+D+") [attempt "+L+"]: "+f+`
`+m+`
`+G})}function ya(u,f,m,D,L,U,G){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+L+"]: "+f+`
`+m+`
`+U+" "+G})}function Zs(u,f,m,D){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Qp(u,m)+(D?" "+D:"")})}function ui(u,f){u.info(function(){return"TIMEOUT: "+f})}Js.prototype.info=function(){};function Qp(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var D=m[u];if(!(2>D.length)){var L=D[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return ga(m)}catch{return f}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},va;function wa(){}k(wa,Gs),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},va=new wa;function li(u,f,m,D){this.j=u,this.i=f,this.l=m,this.R=D||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var Yp={},Xs={};function Xc(u,f,m){u.L=1,u.v=ru(Rr(f)),u.m=m,u.P=!0,eu(u,null)}function eu(u,f){u.F=Date.now(),to(u),u.A=Rr(u.v);var m=u.A,D=u.R;Array.isArray(D)||(D=[String(D)]),ig(m.i,"t",D),u.C=0,m=u.j.J,u.h=new Bd,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Hp(E(u.Y,u,u.g),u.O)),f=u.U,m=u.g,D=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Hs[0]=L.toString()),L=Hs);for(var U=0;U<L.length;U++){var G=zp(m,L[U],D||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),mr(),Ud(u.i,u.u,u.A,u.l,u.R,u.m)}li.prototype.ca=function(u){u=u.target;let f=this.M;f&&Vn(u)==3?f.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{let _n=Vn(this.g);var f=this.g.Ba();let hu=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||ug(this.g)))){this.J||_n!=4||f==7||(f==8||0>=hu?mr(3):mr(2)),tu(this);var m=this.g.Z();this.X=m;t:if(eo(this)){var D=ug(this.g);u="";var L=D.length,U=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),no(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(D[f],{stream:!(U&&f==L-1)});D.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,ya(this.i,this.u,this.A,this.l,this.R,_n,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,xt=this.g;if((Ke=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ke)){var Qe=Ke;break t}}Qe=null}if(m=Qe)Zs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,m);else{this.o=!1,this.s=3,hn(12),di(this),no(this);break e}}if(this.P){m=!0;let Nr;for(;!this.J&&this.C<G.length;)if(Nr=Yi(this,G),Nr==Xs){_n==4&&(this.s=4,hn(14),m=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==Yp){this.s=4,hn(15),Zs(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else Zs(this.i,this.l,Nr,null),Ea(this,Nr);if(eo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||G.length!=0||this.h.h||(this.s=1,hn(16),m=!1),this.o=this.o&&m,!m)Zs(this.i,this.l,G,"[Invalid Chunked Response]"),di(this),no(this);else if(0<G.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),du(yn),yn.M=!0,hn(11))}}else Zs(this.i,this.l,G,null),Ea(this,G);_n==4&&di(this),this.o&&!this.J&&(_n==4?mn(this.j,this):(this.o=!1,to(this)))}else lg(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),di(this),no(this)}}}catch{}finally{}};function eo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yi(u,f){var m=u.C,D=f.indexOf(`
`,m);return D==-1?Xs:(m=Number(f.substring(m,D)),isNaN(m)?Yp:(D+=1,D+m>f.length?Xs:(f=f.slice(D,D+m),u.C=D+m,f)))}li.prototype.cancel=function(){this.J=!0,di(this)};function to(u){u.S=Date.now()+u.I,Jp(u,u.I)}function Jp(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ys(E(u.ba,u),f)}function tu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}li.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ui(this.i,this.A),this.L!=2&&(mr(),hn(17)),di(this),this.s=2,no(this)):Jp(this,this.S-u)};function no(u){u.j.G==0||u.J||mn(u.j,u)}function di(u){tu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Qc(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ea(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Hd(m.h,u))){if(!u.K&&Hd(m.h,u)&&m.G==3){try{var D=m.Da.g.parse(f)}catch{D=null}if(Array.isArray(D)&&D.length==3){var L=D;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Zi(m),uo(m);else break e;lu(m),hn(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ys(E(m.Za,m),6e3));if(1>=qd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((u.K||m.g==u)&&Zi(m),!te(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let Qe=L[f];if(m.T=Qe[0],Qe=Qe[1],m.G==2)if(Qe[0]=="c"){m.K=Qe[1],m.ia=Qe[2];let yn=Qe[3];yn!=null&&(m.la=yn,m.j.info("VER="+m.la));let _n=Qe[4];_n!=null&&(m.Aa=_n,m.j.info("SVER="+m.Aa));let hu=Qe[5];hu!=null&&typeof hu=="number"&&0<hu&&(D=1.5*hu,m.L=D,m.j.info("backChannelRequestTimeoutMs_="+D)),D=m;let Nr=u.g;if(Nr){let dg=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dg){var U=D.h;U.g||dg.indexOf("spdy")==-1&&dg.indexOf("quic")==-1&&dg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(yr(U,U.h),U.h=null))}if(D.D){let gE=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;gE&&(D.ya=gE,ut(D.I,D.D,gE))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),D=m;var G=u;if(D.qa=l(D,D.J?D.ia:null,D.W),G.K){tr(D.h,G);var Ke=G,xt=D.L;xt&&(Ke.I=xt),Ke.B&&(tu(Ke),to(Ke)),D.g=G}else eh(D);0<m.i.length&&Aa(m)}else Qe[0]!="stop"&&Qe[0]!="close"||pi(m,7);else m.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?pi(m,7):au(m):Qe[0]!="noop"&&m.l&&m.l.ta(Qe),m.v=0)}}mr(4)}catch{}}var jd=class{constructor(u,f){this.g=u,this.map=f}};function zd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $d(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qd(u){return u.h?1:u.g?u.g.size:0}function Hd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function yr(u,f){u.g?u.g.add(f):u.h=f}function tr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}zd.prototype.cancel=function(){if(this.i=ro(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function ro(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return F(u.i)}function Ia(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,D=0;D<m;D++)f.push(u[D]);return f}f=[],m=0;for(D in u)f[m++]=u[D];return f}function Gd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let D in u)f[m++]=D;return f}}}function it(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=Gd(u),D=Ia(u),L=D.length,U=0;U<L;U++)f.call(void 0,D[U],m&&m[U],u)}var ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var D=u[m].indexOf("="),L=null;if(0<=D){var U=u[m].substring(0,D);L=u[m].substring(D+1)}else U=u[m];f(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function nr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof nr){this.h=u.h,Ca(this,u.j),this.o=u.o,this.g=u.g,nu(this,u.s),this.l=u.l;var f=u.i,m=new Sa;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Zp(this,m),this.m=u.m}else u&&(f=String(u).match(ba))?(this.h=!1,Ca(this,f[1]||"",!0),this.o=Mr(f[2]||""),this.g=Mr(f[3]||"",!0),nu(this,f[4]),this.l=Mr(f[5]||"",!0),Zp(this,f[6]||"",!0),this.m=Mr(f[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}nr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(rr(f,Wd,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(rr(f,Wd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(rr(m,m.charAt(0)=="/"?tg:eg,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",rr(m,io)),u.join("")};function Rr(u){return new nr(u)}function Ca(u,f,m){u.j=m?Mr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function nu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Zp(u,f,m){f instanceof Sa?(u.i=f,iu(u.i,u.h)):(m||(f=rr(f,ng)),u.i=new Sa(f,u.h))}function ut(u,f,m){u.i.set(f,m)}function ru(u){return ut(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rr(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Xp),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wd=/[#\/\?@]/g,eg=/[#\?:]/g,tg=/[#\?]/g,ng=/[#\?@]/g,io=/#/g;function Sa(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Sa.prototype,n.add=function(u,f){hi(this),this.i=null,u=xr(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function rg(u,f){hi(u),f=xr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Pr(u,f){return hi(u),f=xr(u,f),u.g.has(f)}n.forEach=function(u,f){hi(this),this.g.forEach(function(m,D){m.forEach(function(L){u.call(f,L,D,this)},this)},this)},n.na=function(){hi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let D=0;D<f.length;D++){let L=u[D];for(let U=0;U<L.length;U++)m.push(f[D])}return m},n.V=function(u){hi(this);let f=[];if(typeof u=="string")Pr(this,u)&&(f=f.concat(this.g.get(xr(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return hi(this),this.i=null,u=xr(this,u),Pr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function ig(u,f,m){rg(u,f),0<m.length&&(u.i=null,u.g.set(xr(u,f),F(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var D=f[m];let U=encodeURIComponent(String(D)),G=this.V(D);for(D=0;D<G.length;D++){var L=U;G[D]!==""&&(L+="="+encodeURIComponent(String(G[D]))),u.push(L)}}return this.i=u.join("&")};function xr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function iu(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(m,D){var L=D.toLowerCase();D!=L&&(rg(this,D),ig(this,L,m))},u)),u.j=f}function sg(u,f){let m=new Js;if(a.Image){let D=new Image;D.onload=I(Fn,m,"TestLoadImage: loaded",!0,f,D),D.onerror=I(Fn,m,"TestLoadImage: error",!1,f,D),D.onabort=I(Fn,m,"TestLoadImage: abort",!1,f,D),D.ontimeout=I(Fn,m,"TestLoadImage: timeout",!1,f,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else f(!1)}function Da(u,f){let m=new Js,D=new AbortController,L=setTimeout(()=>{D.abort(),Fn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:D.signal}).then(U=>{clearTimeout(L),U.ok?Fn(m,"TestPingServer: ok",!0,f):Fn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Fn(m,"TestPingServer: error",!1,f)})}function Fn(u,f,m,D,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),D(m)}catch{}}function og(){this.g=new Gp}function Kd(u,f,m){let D=m||"";try{it(u,function(L,U){let G=L;d(L)&&(G=ga(L)),f.push(D+U+"="+encodeURIComponent(G))})}catch(L){throw f.push(D+"type="+encodeURIComponent("_badmap")),L}}function st(u){this.l=u.Ub||null,this.j=u.eb||!1}k(st,Gs),st.prototype.g=function(){return new su(this.l,this.j)},st.prototype.i=function(u){return function(){return u}}({});function su(u,f){Qt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(su,Qt),n=su.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,oo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ag(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ag(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?so(this):oo(this),this.readyState==3&&ag(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,so(this))},n.Qa=function(u){this.g&&(this.response=u,so(this))},n.ga=function(){this.g&&so(this)};function so(u){u.readyState=4,u.l=null,u.j=null,u.v=null,oo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function oo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qd(u){let f="";return le(u,function(m,D){f+=D,f+=":",f+=m,f+=`\r
`}),f}function ao(u,f,m){e:{for(D in m){var D=!1;break e}D=!0}D||(m=Qd(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ut(u,f,m))}function Ze(u){Qt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ze,Qt);var cg=/^https?$/i,pE=["POST","PUT"];n=Ze.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():va.g(),this.v=this.o?Vd(this.o):Vd(va),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(U){co(this,U);return}if(u=m||"",m=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var L in D)m.set(L,D[L]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let U of D.keys())m.set(U,D.get(U));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pE,f,void 0))||D||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,G]of m)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jd(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){co(this,U)}};function co(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Yd(u),Ji(u)}function Yd(u){u.A||(u.A=!0,on(u,"complete"),on(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,on(this,"complete"),on(this,"abort"),Ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ji(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ou(this):this.bb())},n.bb=function(){ou(this)};function ou(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Vn(u)!=4||u.Z()!=2)){if(u.u&&Vn(u)==4)$p(u.Ea,0,u);else if(on(u,"readystatechange"),Vn(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var D;if(D=G===0){var L=String(u.D).match(ba)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),D=!cg.test(L?L.toLowerCase():"")}m=D}if(m)on(u,"complete"),on(u,"success");else{u.m=6;try{var U=2<Vn(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",Yd(u)}}finally{Ji(u)}}}}function Ji(u,f){if(u.g){Jd(u);let m=u.g,D=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||on(u,"ready");try{m.onreadystatechange=D}catch{}}}function Jd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Vn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Qi(f)}};function ug(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function lg(u){let f={};u=(u.g&&2<=Vn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(te(u[D]))continue;var m=T(u[D]);let L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let U=f[L]||[];f[L]=U,U.push(m)}S(f,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Zd(u){this.Aa=0,this.i=[],this.j=new Js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kr("baseRetryDelayMs",5e3,u),this.cb=kr("retryDelaySeedMs",1e4,u),this.Wa=kr("forwardChannelMaxRetries",2,u),this.wa=kr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zd(u&&u.concurrentRequestLimit),this.Da=new og,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zd.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,D){hn(0),this.W=u,this.H=f||{},m&&D!==void 0&&(this.H.OSID=m,this.H.OAID=D),this.F=this.X,this.I=l(this,null,this.W),Aa(this)};function au(u){if(cu(u),u.G==3){var f=u.U++,m=Rr(u.I);if(ut(m,"SID",u.K),ut(m,"RID",f),ut(m,"TYPE","terminate"),lo(u,m),f=new li(u,u.j,f),f.L=2,f.v=ru(Rr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),to(f)}Xi(u)}function uo(u){u.g&&(du(u),u.g.cancel(),u.g=null)}function cu(u){uo(u),u.u&&(a.clearTimeout(u.u),u.u=null),Zi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Aa(u){if(!$d(u.h)&&!u.s){u.s=!0;var f=u.Ga;da||Up(),ci||(da(),ci=!0),zs.add(f,u),u.B=0}}function uu(u,f){return qd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ys(E(u.Ga,u,f),nh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let L=new li(this,this.j,u),U=this.o;if(this.S&&(U?(U=_(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var D=this.i[m];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(f+=D,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=fi(this,L,f),m=Rr(this.I),ut(m,"RID",u),ut(m,"CVER",22),this.D&&ut(m,"X-HTTP-Session-Id",this.D),lo(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Qd(U)))+"&"+f:this.m&&ao(m,this.m,U)),yr(this.h,L),this.Ua&&ut(m,"TYPE","init"),this.P?(ut(m,"$req",f),ut(m,"SID","null"),L.T=!0,Xc(L,m,null)):Xc(L,m,f),this.G=2}}else this.G==3&&(u?Xd(this,u):this.i.length==0||$d(this.h)||Xd(this))};function Xd(u,f){var m;f?m=f.l:m=u.U++;let D=Rr(u.I);ut(D,"SID",u.K),ut(D,"RID",m),ut(D,"AID",u.T),lo(u,D),u.m&&u.o&&ao(D,u.m,u.o),m=new li(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=fi(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),yr(u.h,m),Xc(m,D,f)}function lo(u,f){u.H&&le(u.H,function(m,D){ut(f,D,m)}),u.l&&it({},function(m,D){ut(f,D,m)})}function fi(u,f,m){m=Math.min(u.i.length,m);var D=u.l?E(u.l.Na,u.l,u):null;e:{var L=u.i;let U=-1;for(;;){let G=["count="+m];U==-1?0<m?(U=L[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Ke=!0;for(let xt=0;xt<m;xt++){let Qe=L[xt].g,yn=L[xt].map;if(Qe-=U,0>Qe)U=Math.max(0,L[xt].g-100),Ke=!1;else try{Kd(yn,G,"req"+Qe+"_")}catch{D&&D(yn)}}if(Ke){D=G.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,D}function eh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;da||Up(),ci||(da(),ci=!0),zs.add(f,u),u.v=0}}function lu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ys(E(u.Fa,u),nh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ys(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),uo(this),th(this))};function du(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function th(u){u.g=new li(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Rr(u.qa);ut(f,"RID","rpc"),ut(f,"SID",u.K),ut(f,"AID",u.T),ut(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ut(f,"TO",u.ja),ut(f,"TYPE","xmlhttp"),lo(u,f),u.m&&u.o&&ao(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ru(Rr(f)),m.m=null,m.P=!0,eu(m,u)}n.Za=function(){this.C!=null&&(this.C=null,uo(this),lu(this),hn(19))};function Zi(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function mn(u,f){var m=null;if(u.g==f){Zi(u),du(u),u.g=null;var D=2}else if(Hd(u.h,f))m=f.D,tr(u.h,f),D=1;else return;if(u.G!=0){if(f.o)if(D==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;D=Jc(),on(D,new ma(D,m)),Aa(u)}else eh(u);else if(L=f.s,L==3||L==0&&0<f.X||!(D==1&&uu(u,f)||D==2&&lu(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function nh(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function pi(u,f){if(u.j.info("Error code "+f),f==2){var m=E(u.fb,u),D=u.Xa;let L=!D;D=new nr(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ca(D,"https"),ru(D),L?sg(D.toString(),m):Da(D.toString(),m)}else hn(2);u.G=0,u.l&&u.l.sa(f),Xi(u),cu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function Xi(u){if(u.G=0,u.ka=[],u.l){let f=ro(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ka,f),N(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var D=m instanceof nr?Rr(m):new nr(m);if(D.g!="")f&&(D.g=f+"."+D.g),nu(D,D.s);else{var L=a.location;D=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var U=new nr(null);D&&Ca(U,D),f&&(U.g=f),L&&nu(U,L),m&&(U.l=m),D=U}return m=u.D,f=u.ya,m&&f&&ut(D,m,f),ut(D,"VER",u.la),lo(u,D),D}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ze(new st({eb:m})):new Ze(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new O(u,f)};function O(u,f){Qt.call(this),this.g=new Zd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!te(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!te(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ye(this)}k(O,Qt),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){au(this.g)},O.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ga(u),u=m);f.i.push(new jd(f.Ya++,u)),f.G==3&&Aa(f)},O.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,O.aa.N.call(this)};function V(u){Yt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}k(V,Yt);function K(){Yc.call(this),this.status=1}k(K,Yc);function ye(u){this.g=u}k(ye,y),ye.prototype.ua=function(){on(this.g,"a")},ye.prototype.ta=function(u){on(this.g,new V(u))},ye.prototype.sa=function(u){on(this.g,new K)},ye.prototype.ra=function(){on(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,tA=Os.createWebChannelTransport=function(){return new A},eA=Os.getStatEventTarget=function(){return Jc()},XD=Os.Event=er,Gv=Os.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Yf=Os.ErrorCode=_a,Zc.COMPLETE="complete",ZD=Os.EventType=Zc,Ws.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,nd=Os.WebChannel=Ws,Tee=Os.FetchXmlHttpFactory=st,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,JD=Os.XhrIo=Ze}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var $U="@firebase/firestore";var dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");var Ed="10.14.0";var Sc=new Lo("@firebase/firestore");function Jf(){return Sc.logLevel}function se(n,...e){if(Sc.logLevel<=Ue.DEBUG){let t=e.map(VR);Sc.debug(`Firestore (${Ed}): ${n}`,...t)}}function Fs(n,...e){if(Sc.logLevel<=Ue.ERROR){let t=e.map(VR);Sc.error(`Firestore (${Ed}): ${n}`,...t)}}function ud(n,...e){if(Sc.logLevel<=Ue.WARN){let t=e.map(VR);Sc.warn(`Firestore (${Ed}): ${n}`,...t)}}function VR(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ve(n="Unexpected state"){let e=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+n;throw Fs(e),new Error(e)}function rt(n,e){n||ve()}function be(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Nn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ii=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Jv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}},aA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},cA=class{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ii,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ii)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string"),new Jv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new dn(e)}},uA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new uA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dA=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hA=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){rt(this.o===void 0);let r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string"),this.R=t.token,new dA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Cee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Zv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Cee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Je(n,e){return n<e?-1:n>e?1:0}function ld(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var pn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new pn(0,0))}static max(){return new n(new pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(),r===void 0?r=e.length-t:r>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Tt=class n extends Xv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},See=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gr=class n extends Xv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return See.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(Tt.fromString(e))}static fromName(e){return new n(Tt.fromString(e).popFirst(5))}static empty(){return new n(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Tt(e.slice()))}};var fA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};fA.UNKNOWN_ID=-1;function Dee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new pn(t+1,0):new pn(t,r));return new Dc(i,he.empty(),e)}function Aee(n){return new Dc(n.readTime,n.key,-1)}var Dc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ae.min(),he.empty(),-1)}static max(){return new n(Ae.max(),he.empty(),-1)}};function Ree(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}var Mee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yp(n){return b(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==Mee)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Pee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _p(n){return n.name==="IndexedDbTransactionError"}var bB=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pw(n){return n==null}function rp(n){return n===0&&1/n==-1/0}function xee(n){return typeof n=="number"&&Number.isInteger(n)&&!rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var kee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eIe=[...kee,"documentOverlays"],Nee=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oee=Nee,Lee=[...Oee,"indexConfiguration","indexState","indexEntries"];var tIe=[...Lee,"globals"];function qU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Mt=class n{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new od(this.root,e,this.comparator,!1)}getReverseIterator(){return new od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new od(this.root,e,this.comparator,!0)}},od=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ui=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();let e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}};Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var An=class n{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ew(this.data.getIterator())}getIteratorFrom(e){return new ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ew=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dr=class n{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new n([])}unionWith(e){let t=new An(gr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ld(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var tw=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tw("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Rn.EMPTY_BYTE_STRING=new Rn("");var Fee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(rt(!!n),typeof n=="string"){let e=0,t=Fee.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ea(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}function UR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function BR(n){let e=n.mapValue.fields.__previous_value__;return UR(e)?BR(e):e}function ip(n){let e=Vs(n.mapValue.fields.__local_write_time__.timestampValue);return new pn(e.seconds,e.nanos)}var gA=class{constructor(e,t,r,i,s,o,a,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},nw=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Wv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?UR(n)?4:SB(n)?9007199254740991:CB(n)?10:11:ve()}function zi(n,e){if(n===e)return!0;let t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ip(n).isEqual(ip(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Vs(i.timestampValue),a=Vs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ea(i.bytesValue).isEqual(ea(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=It(i.doubleValue),a=It(s.doubleValue);return o===a?rp(o)===rp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ld(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qU(o)!==qU(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!zi(o[c],a[c])))return!1;return!0}(n,e);default:return ve()}}function sp(n,e){return(n.values||[]).find(t=>zi(t,e))!==void 0}function dd(n,e){if(n===e)return 0;let t=Ac(n),r=Ac(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=It(s.integerValue||s.doubleValue),c=It(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return HU(n.timestampValue,e.timestampValue);case 4:return HU(ip(n),ip(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ea(s),c=ea(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Je(a[d],c[d]);if(h!==0)return h}return Je(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Je(It(s.latitude),It(o.latitude));return a!==0?a:Je(It(s.longitude),It(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return GU(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,d,h;let g=s.fields||{},E=o.fields||{},I=(a=g.value)===null||a===void 0?void 0:a.arrayValue,k=(c=E.value)===null||c===void 0?void 0:c.arrayValue,F=Je(((d=I?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return F!==0?F:GU(I,k)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wv.mapValue&&o===Wv.mapValue)return 0;if(s===Wv.mapValue)return 1;if(o===Wv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=Je(c[g],h[g]);if(E!==0)return E;let I=dd(a[c[g]],d[h[g]]);if(I!==0)return I}return Je(c.length,h.length)}(n.mapValue,e.mapValue);default:throw ve()}}function HU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);let t=Vs(n),r=Vs(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function GU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=dd(t[i],r[i]);if(s)return s}return Je(t.length,r.length)}function hd(n){return mA(n)}function mA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ea(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=mA(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${mA(t.fields[o])}`;return i+"}"}(n.mapValue):ve()}function WU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yA(n){return!!n&&"integerValue"in n}function jR(n){return!!n&&"arrayValue"in n}function KU(n){return!!n&&"nullValue"in n}function QU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qv(n){return!!n&&"mapValue"in n}function CB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var pr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Xf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Qv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Xf(this.value))}};function DB(n){let e=[];return kc(n.fields,(t,r)=>{let i=new gr([t]);if(Qv(r)){let s=DB(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Dr(e)}var si=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ae.min(),Ae.min(),Ae.min(),pr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ae.min(),Ae.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ae.min(),Ae.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fd=class{constructor(e,t){this.position=e,this.inclusive=t}};function YU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=dd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function JU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}var Rc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Vee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var rw=class{},Ht=class n extends rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vA(e,t,r):t==="array-contains"?new IA(e,r):t==="in"?new bA(e,r):t==="not-in"?new TA(e,r):t==="array-contains-any"?new CA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wA(e,r):new EA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(dd(t,this.value)):t!==null&&Ac(this.value)===Ac(t)&&this.matchesComparison(dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oi=class n extends rw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return AB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function AB(n){return n.op==="and"}function RB(n){return Uee(n)&&AB(n)}function Uee(n){for(let e of n.filters)if(e instanceof oi)return!1;return!0}function _A(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+hd(n.value);if(RB(n))return n.filters.map(e=>_A(e)).join(",");{let e=n.filters.map(t=>_A(t)).join(",");return`${n.op}(${e})`}}function MB(n,e){return n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&zi(r.value,i.value)}(n,e):n instanceof oi?function(r,i){return i instanceof oi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MB(o,i.filters[a]),!0):!1}(n,e):void ve()}function PB(n){return n instanceof Ht?function(t){return`${t.field.canonicalString()} ${t.op} ${hd(t.value)}`}(n):n instanceof oi?function(t){return t.op.toString()+" {"+t.getFilters().map(PB).join(" ,")+"}"}(n):"Filter"}var vA=class extends Ht{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},wA=class extends Ht{constructor(e,t){super(e,"in",t),this.keys=xB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},EA=class extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=xB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}var IA=class extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jR(t)&&sp(t.arrayValue,this.value)}},bA=class extends Ht{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&sp(this.value.arrayValue,t)}},TA=class extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!sp(this.value.arrayValue,t)}},CA=class extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jR(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}};var SA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function ZU(n,e=null,t=[],r=[],i=null,s=null,o=null){return new SA(n,e,t,r,i,s,o)}function zR(n){let e=be(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_A(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hd(r)).join(",")),e.ue=t}return e.ue}function $R(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JU(n.startAt,e.startAt)&&JU(n.endAt,e.endAt)}function DA(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ta=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Bee(n,e,t,r,i,s,o,a){return new ta(n,e,t,r,i,s,o,a)}function qR(n){return new ta(n)}function XU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kB(n){return n.collectionGroup!==null}function ep(n){let e=be(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new An(gr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rc(s,r))}),t.has(gr.keyField().canonicalString())||e.ce.push(new Rc(gr.keyField(),r))}return e.ce}function Bi(n){let e=be(n);return e.le||(e.le=jee(e,ep(n))),e.le}function jee(n,e){if(n.limitType==="F")return ZU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Rc(i.field,s)});let t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return ZU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function AA(n,e){let t=n.filters.concat([e]);return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iw(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xw(n,e){return $R(Bi(n),Bi(e))&&n.limitType===e.limitType}function NB(n){return`${zR(Bi(n))}|lt:${n.limitType}`}function rd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PB(i)).join(", ")}]`),Pw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hd(i)).join(",")),`Target(${r})`}(Bi(n))}; limitType=${n.limitType})`}function kw(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ep(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let d=YU(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,ep(r),i)||r.endAt&&!function(o,a,c){let d=YU(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,ep(r),i))}(n,e)}function zee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OB(n){return(e,t)=>{let r=!1;for(let i of ep(n)){let s=$ee(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $ee(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?dd(c,d):ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}var na=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return TB(this.inner)}size(){return this.innerSize}};var qee=new Mt(he.comparator);function Us(){return qee}var LB=new Mt(he.comparator);function Zf(...n){let e=LB;for(let t of n)e=e.insert(t.key,t);return e}function FB(n){let e=LB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bc(){return tp()}function VB(){return tp()}function tp(){return new na(n=>n.toString(),(n,e)=>n.isEqual(e))}var Hee=new Mt(he.comparator),Gee=new An(he.comparator);function Be(...n){let e=Gee;for(let t of n)e=e.add(t);return e}var Wee=new An(Je);function Kee(){return Wee}function HR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function UB(n){return{integerValue:""+n}}function Qee(n,e){return xee(e)?UB(e):HR(n,e)}var pd=class{constructor(){this._=void 0}};function Yee(n,e,t){return n instanceof gd?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&UR(s)&&(s=BR(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Mc?jB(n,e):n instanceof Pc?zB(n,e):function(i,s){let o=BB(i,s),a=eB(o)+eB(i.Pe);return yA(o)&&yA(i.Pe)?UB(a):HR(i.serializer,a)}(n,e)}function Jee(n,e,t){return n instanceof Mc?jB(n,e):n instanceof Pc?zB(n,e):t}function BB(n,e){return n instanceof md?function(r){return yA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var gd=class extends pd{},Mc=class extends pd{constructor(e){super(),this.elements=e}};function jB(n,e){let t=$B(e);for(let r of n.elements)t.some(i=>zi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pc=class extends pd{constructor(e){super(),this.elements=e}};function zB(n,e){let t=$B(e);for(let r of n.elements)t=t.filter(i=>!zi(i,r));return{arrayValue:{values:t}}}var md=class extends pd{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function eB(n){return It(n.integerValue||n.doubleValue)}function $B(n){return jR(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Zee(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mc&&i instanceof Mc||r instanceof Pc&&i instanceof Pc?ld(r.elements,i.elements,zi):r instanceof md&&i instanceof md?zi(r.Pe,i.Pe):r instanceof gd&&i instanceof gd}(n.transform,e.transform)}var RA=class{constructor(e,t){this.version=e,this.transformResults=t}},Ls=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yd=class{};function qB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new op(n.key,Ls.none()):new xc(n.key,n.data,Ls.none());{let t=n.data,r=pr.empty(),i=new An(gr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(n.key,r,new Dr(i.toArray()),Ls.none())}}function Xee(n,e,t){n instanceof xc?function(i,s,o){let a=i.value.clone(),c=nB(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof $i?function(i,s,o){if(!Yv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=nB(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(HB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function np(n,e,t,r){return n instanceof xc?function(s,o,a,c){if(!Yv(s.precondition,o))return a;let d=s.value.clone(),h=rB(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof $i?function(s,o,a,c){if(!Yv(s.precondition,o))return a;let d=rB(s.fieldTransforms,c,o),h=o.data;return h.setAll(HB(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,a){return Yv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function ete(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=BB(r.transform,i||null);s!=null&&(t===null&&(t=pr.empty()),t.set(r.field,s))}return t||null}function tB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ld(r,i,(s,o)=>Zee(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xc=class extends yd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$i=class extends yd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function HB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function nB(n,e,t){let r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Jee(o,a,t[i]))}return r}function rB(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Yee(s,o,e))}return r}var op=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},MA=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var PA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Xee(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=VB();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=qB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&ld(this.mutations,e.mutations,(t,r)=>tB(t,r))&&ld(this.baseMutations,e.baseMutations,(t,r)=>tB(t,r))}},xA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=function(){return Hee}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var kA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var NA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Ge;function tte(n){switch(n){default:return ve();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function GB(n){if(n===void 0)return Fs("GRPC error has no .code"),$.UNKNOWN;switch(n){case $t.OK:return $.OK;case $t.CANCELLED:return $.CANCELLED;case $t.UNKNOWN:return $.UNKNOWN;case $t.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case $t.INTERNAL:return $.INTERNAL;case $t.UNAVAILABLE:return $.UNAVAILABLE;case $t.UNAUTHENTICATED:return $.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case $t.NOT_FOUND:return $.NOT_FOUND;case $t.ALREADY_EXISTS:return $.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return $.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case $t.ABORTED:return $.ABORTED;case $t.OUT_OF_RANGE:return $.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return $.UNIMPLEMENTED;case $t.DATA_LOSS:return $.DATA_LOSS;default:return ve()}}(Ge=$t||($t={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var iB=null;function nte(){return new TextEncoder}var rte=new Zo([4294967295,4294967295],0);function sB(n){let e=nte().encode(n),t=new YD;return t.update(e),new Uint8Array(t.digest())}function oB(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zo([t,r],0),new Zo([i,s],0)]}var OA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Zo.fromNumber(r)));return i.compare(rte)===1&&(i=new Zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=sB(e),[r,i]=oB(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=sB(e),[r,i]=oB(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Tc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sw=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ae.min(),i,new Mt(Je),Us(),Be())}},ap=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Be(),Be(),Be())}};var ad=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ow=class{constructor(e,t){this.targetId=e,this.me=t}},aw=class{constructor(e,t,r=Rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},cw=class{constructor(){this.fe=0,this.ge=cB(),this.pe=Rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),t=Be(),r=Be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new ap(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=cB()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},LA=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Us(),this.qe=aB(),this.Qe=new Mt(Je)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(DA(s))if(r===0){let o=new he(s.path);this.Ue(t,o,si.newNoDocument(o,Ae.min()))}else rt(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}iB?.et(function(h,g,E,I,k){var F,N,q,te,Y,ae;let je={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},le=g.unchangedNames;return le&&(je.bloomFilter={applied:k===0,hashCount:(F=le?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(te=(q=(N=le?.bits)===null||N===void 0?void 0:N.bitmap)===null||q===void 0?void 0:q.length)!==null&&te!==void 0?te:0,padding:(ae=(Y=le?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&ae!==void 0?ae:0,mightContain:S=>{var _;return(_=I?.mightContain(S))!==null&&_!==void 0&&_}}),je}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ea(r).toUint8Array()}catch(c){if(c instanceof tw)return ud("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new OA(o,i,s)}catch(c){return ud(c instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&DA(a.target)){let c=new he(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,si.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new sw(e,t,this.Qe,this.ke,r);return this.ke=Us(),this.qe=aB(),this.Qe=new Mt(Je),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new An(Je),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function aB(){return new Mt(he.comparator)}function cB(){return new Mt(he.comparator)}var ite={asc:"ASCENDING",desc:"DESCENDING"},ste={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ote={and:"AND",or:"OR"},FA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function VA(n,e){return n.useProto3Json||Pw(e)?e:{value:e}}function uw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ate(n,e){return uw(n,e.toTimestamp())}function ji(n){return rt(!!n),Ae.fromTimestamp(function(t){let r=Vs(t);return new pn(r.seconds,r.nanos)}(n))}function GR(n,e){return UA(n,e).canonicalString()}function UA(n,e){let t=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function KB(n){let e=Tt.fromString(n);return rt(XB(e)),e}function BA(n,e){return GR(n.databaseId,e.path)}function nA(n,e){let t=KB(e);if(t.get(1)!==n.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(YB(t))}function QB(n,e){return GR(n.databaseId,e)}function cte(n){let e=KB(n);return e.length===4?Tt.emptyPath():YB(e)}function jA(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YB(n){return rt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uB(n,e,t){return{name:BA(n,e),fields:t.value.mapValue.fields}}function ute(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(rt(h===void 0||typeof h=="string"),Rn.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Rn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){let h=d.code===void 0?$.UNKNOWN:GB(d.code);return new ee(h,d.message||"")}(o);t=new aw(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nA(n,r.document.name),s=ji(r.document.updateTime),o=r.document.createTime?ji(r.document.createTime):Ae.min(),a=new pr({mapValue:{fields:r.document.fields}}),c=si.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new ad(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nA(n,r.document),s=r.readTime?ji(r.readTime):Ae.min(),o=si.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ad([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nA(n,r.document),s=r.removedTargetIds||[];t=new ad([],s,i,null)}else{if(!("filter"in e))return ve();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new NA(i,s),a=r.targetId;t=new ow(a,o)}}return t}function lte(n,e){let t;if(e instanceof xc)t={update:uB(n,e.key,e.value)};else if(e instanceof op)t={delete:BA(n,e.key)};else if(e instanceof $i)t={update:uB(n,e.key,e.data),updateMask:vte(e.fieldMask)};else{if(!(e instanceof MA))return ve();t={verify:BA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof gd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof md)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ate(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(n,e.precondition)),t}function dte(n,e){return n&&n.length>0?(rt(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ji(i.updateTime):ji(s);return o.isEqual(Ae.min())&&(o=ji(s)),new RA(o,i.transformResults||[])}(t,e))):[]}function hte(n,e){return{documents:[QB(n,e.path)]}}function fte(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QB(n,i);let s=function(d){if(d.length!==0)return ZB(oi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(E){return{field:id(E.field),direction:mte(E.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=VA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function pte(n){let e=cte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){rt(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){let E=JB(g);return E instanceof oi&&RB(E)?E.getFilters():[E]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(E=>function(k){return new Rc(sd(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(E))}(t.orderBy));let a=null;t.limit&&(a=function(g){let E;return E=typeof g=="object"?g.value:g,Pw(E)?null:E}(t.limit));let c=null;t.startAt&&(c=function(g){let E=!!g.before,I=g.values||[];return new fd(I,E)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let E=!g.before,I=g.values||[];return new fd(I,E)}(t.endAt)),Bee(e,i,o,s,a,"F",c,d)}function gte(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=sd(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=sd(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=sd(t.unaryFilter.field);return Ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=sd(t.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return Ht.create(sd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return oi.create(t.compositeFilter.filters.map(r=>JB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function mte(n){return ite[n]}function yte(n){return ste[n]}function _te(n){return ote[n]}function id(n){return{fieldPath:n.canonicalString()}}function sd(n){return gr.fromServerFormat(n.fieldPath)}function ZB(n){return n instanceof Ht?function(t){if(t.op==="=="){if(QU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NAN"}};if(KU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NAN"}};if(KU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:id(t.field),op:yte(t.op),value:t.value}}}(n):n instanceof oi?function(t){let r=t.getFilters().map(i=>ZB(i));return r.length===1?r[0]:{compositeFilter:{op:_te(t.op),filters:r}}}(n):ve()}function vte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cp=class n{constructor(e,t,r,i,s=Ae.min(),o=Ae.min(),a=Rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zA=class{constructor(e){this.ct=e}};function wte(n){let e=pte({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?iw(e,e.limit,"L"):e}var lw=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),rp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Vs(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ea(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?SB(e)?this.dt(t,Number.MAX_SAFE_INTEGER):CB(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ve()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(It(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),he.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};lw.vt=new lw;var $A=class{constructor(){this.un=new qA}addToCollectionParentIndex(e,t){return this.un.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Dc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Dc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},qA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(Tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(Tt.comparator)).toArray()}};var rIe=new Uint8Array(0);var Vi=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);var up=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var HA=class{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var GA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var WA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&np(r.mutation,i,Dr.empty(),pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){let i=bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Zf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Us(),o=tp(),a=function(){return tp()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof $i)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),np(h.mutation,d,h.mutation.getFieldMask(),pn.now())):o.set(d.key,Dr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new GA(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=tp(),i=new Mt((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Dr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Be()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=VB();h.forEach(E=>{if(!s.has(E)){let I=qB(t.get(E),r.get(E));I!==null&&g.set(E,I),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(bc()),a=-1,c=s;return o.next(d=>W.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Be())).next(h=>({batchId:a,changes:FB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=Zf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Zf();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=function(g,E){return new ta(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,si.newInvalidDocument(h)))});let a=Zf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&np(h.mutation,d,Dr.empty(),pn.now()),kw(t,d)&&(a=a.insert(c,d))}),a})}};var KA=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return W.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ji(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:wte(i.bundledQuery),readTime:ji(i.readTime)}}(t)),W.resolve()}};var QA=class{constructor(){this.overlays=new Mt(he.comparator),this.Ir=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=bc(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Mt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=bc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=bc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kA(t,r));let s=this.Ir.get(t);s===void 0&&(s=Be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var YA=class{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var lp=class{constructor(){this.Tr=new An(qt.Er),this.dr=new An(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new qt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new he(new Tt([])),r=new qt(t,e),i=new qt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new he(new Tt([])),r=new qt(t,e),i=new qt(t,e+1),s=Be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new qt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return he.comparator(e.key,t.key)||Je(e.wr,t.wr)}static Ar(e,t){return Je(e.wr,t.wr)||he.comparator(e.key,t.key)}};var JA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new An(qt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new PA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Je);return t.forEach(i=>{let s=new qt(i,0),o=new qt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));let o=new qt(new he(s),0),a=new An(Je);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},o),W.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(t.mutations,i=>{let s=new qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new qt(t,0),i=this.br.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ZA=class{constructor(e){this.Mr=e,this.docs=function(){return new Mt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():si.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Us(),o=t.path,a=new he(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Ree(Aee(h),r)<=0||(i.has(h.key)||kw(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ve()}Or(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XA(this)}getSize(e){return W.resolve(this.size)}},XA=class extends HA{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var eR=class{constructor(e){this.persistence=e,this.Nr=new na(t=>zR(t),$R),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lp,this.targetCount=0,this.kr=up.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),W.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new up(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Kn(t),W.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Br.containsKey(t))}};var tR=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new bB(0),this.Kr=!1,this.Kr=!0,this.$r=new YA,this.referenceDelegate=e(this),this.Ur=new eR(this),this.indexManager=new $A,this.remoteDocumentCache=function(i){return new ZA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zA(t),this.Gr=new KA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new JA(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new nR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},nR=class extends pA{constructor(e){super(),this.currentSequenceNumber=e}},rR=class n{constructor(e){this.persistence=e,this.Jr=new lp,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),W.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{let i=he.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return W.or([()=>W.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iR=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Be(),i=Be();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var sR=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oR=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _L()?8:Pee(un())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sR;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Jf()<=Ue.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",rd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Jf()<=Ue.DEBUG&&se("QueryEngine","Query:",rd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Jf()<=Ue.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",rd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):W.resolve())}Yi(e,t){if(XU(t))return W.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=iw(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,a);return this.ns(t,d,o,c.readTime)?this.Yi(e,iw(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return XU(t)||i.isEqual(Ae.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?W.resolve(null):(Jf()<=Ue.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rd(t)),this.rs(e,o,t,Dee(i,-1)).next(a=>a))})}ts(e,t){let r=new An(OB(e));return t.forEach((i,s)=>{kw(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Jf()<=Ue.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",rd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Dc.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var aR=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Mt(Je),this._s=new na(s=>zR(s),$R),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Ete(n,e,t,r){return new aR(n,e,t,r)}function ej(n,e){return b(this,null,function*(){let t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Be();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function Ite(n,e){let t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){let g=d.batch,E=g.keys(),I=W.resolve();return E.forEach(k=>{I=I.next(()=>h.getEntry(c,k)).next(F=>{let N=d.docVersions.get(k);rt(N!==null),F.version.compareTo(N)<0&&(g.applyToRemoteDocument(F,d),F.isValidDocument()&&(F.setReadTime(d.commitVersion),h.addEntry(F)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Be();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tj(n){let e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function bte(n,e){let t=be(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,g)));let I=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(Rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(g,I),function(F,N,q){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(E,I,h)&&a.push(t.Ur.updateTargetData(s,I))});let c=Us(),d=Be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Tte(s,o,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(Ae.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.os=i,s))}function Tte(n,e,t){let r=Be(),i=Be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Us();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function Cte(n,e){let t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ste(n,e){let t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new cp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function cR(n,e,t){return b(this,null,function*(){let r=be(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_p(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function lB(n,e,t){let r=be(n),i=Ae.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){let g=be(c),E=g._s.get(h);return E!==void 0?W.resolve(g.os.get(E)):g.Ur.getTargetData(d,h)}(r,o,Bi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Ae.min(),t?s:Be())).next(a=>(Dte(r,zee(e),a),{documents:a,Ts:s})))}function Dte(n,e,t){let r=n.us.get(e)||Ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var dw=class{constructor(){this.activeTargetIds=Kee()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uR=class{constructor(){this.so=new dw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lR=class{_o(e){}shutdown(){}};var hw=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Kv=null;function rA(){return Kv===null?Kv=function(){return 268435456+Math.round(2147483648*Math.random())}():Kv++,"0x"+Kv.toString(16)}var Ate={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dR=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dn="WebChannelConnection",hR=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=rA(),c=this.xo(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,c,d,i).then(h=>(se("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ud("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ed}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=Ate[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=rA();return new Promise((o,a)=>{let c=new JD;c.setWithCredentials(!0),c.listenOnce(ZD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Yf.NO_ERROR:let h=c.getResponseJson();se(Dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Yf.TIMEOUT:se(Dn,`RPC '${e}' ${s} timed out`),a(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:let g=c.getStatus();if(se(Dn,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let E=c.getResponseJson();Array.isArray(E)&&(E=E[0]);let I=E?.error;if(I&&I.status&&I.message){let k=function(N){let q=N.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(I.status);a(new ee(k,I.message))}else a(new ee($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ee($.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{se(Dn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);se(Dn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=rA(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tA(),a=eA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");se(Dn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c),E=!1,I=!1,k=new dR({Io:N=>{I?se(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(E||(se(Dn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),E=!0),se(Dn,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},To:()=>g.close()}),F=(N,q,te)=>{N.listen(q,Y=>{try{te(Y)}catch(ae){setTimeout(()=>{throw ae},0)}})};return F(g,nd.EventType.OPEN,()=>{I||(se(Dn,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),F(g,nd.EventType.CLOSE,()=>{I||(I=!0,se(Dn,`RPC '${e}' stream ${i} transport closed`),k.So())}),F(g,nd.EventType.ERROR,N=>{I||(I=!0,ud(Dn,`RPC '${e}' stream ${i} transport errored:`,N),k.So(new ee($.UNAVAILABLE,"The operation could not be completed")))}),F(g,nd.EventType.MESSAGE,N=>{var q;if(!I){let te=N.data[0];rt(!!te);let Y=te,ae=Y.error||((q=Y[0])===null||q===void 0?void 0:q.error);if(ae){se(Dn,`RPC '${e}' stream ${i} received error:`,ae);let je=ae.status,le=function(w){let C=$t[w];if(C!==void 0)return GB(C)}(je),S=ae.message;le===void 0&&(le=$.INTERNAL,S="Unknown error status: "+je+" with message "+ae.message),I=!0,k.So(new ee(le,S)),g.close()}else se(Dn,`RPC '${e}' stream ${i} received:`,te),k.bo(te)}}),F(a,XD.STAT_EVENT,N=>{N.stat===Gv.PROXY?se(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Gv.NOPROXY&&se(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function iA(){return typeof document<"u"?document:null}function Nw(n){return new FA(n,!0)}var fw=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var pw=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Fs(t.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fR=class extends pw{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=ute(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?ji(o.readTime):Ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=jA(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=DA(c)?{documents:hte(s,c)}:{query:fte(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WB(s,o.resumeToken);let d=VA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=uw(s,o.snapshotVersion.toTimestamp());let d=VA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=gte(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=jA(this.serializer),t.removeTarget=e,this.a_(t)}},pR=class extends pw{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=dte(e.writeResults,e.commitTime),r=ji(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=jA(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lte(this.serializer,r))};this.a_(t)}};var gR=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,UA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee($.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,UA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mR=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fs(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var yR=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){Nc(this)&&(se("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let d=be(c);d.L_.add(4),yield vp(d),d.q_.set("Unknown"),d.L_.delete(4),yield Ow(d)})}(this))}))}),this.q_=new mR(r,i)}};function Ow(n){return b(this,null,function*(){if(Nc(n))for(let e of n.B_)yield e(!0)})}function vp(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function nj(n,e){let t=be(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),YR(t)?QR(t):Id(t).r_()&&KR(t,e))}function WR(n,e){let t=be(n),r=Id(t);t.N_.delete(e),r.r_()&&rj(t,e),t.N_.size===0&&(r.r_()?r.o_():Nc(t)&&t.q_.set("Unknown"))}function KR(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Id(n).A_(e)}function rj(n,e){n.Q_.xe(e),Id(n).R_(e)}function QR(n){n.Q_=new LA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Id(n).start(),n.q_.v_()}function YR(n){return Nc(n)&&!Id(n).n_()&&n.N_.size>0}function Nc(n){return be(n).L_.size===0}function ij(n){n.Q_=void 0}function Rte(n){return b(this,null,function*(){n.q_.set("Online")})}function Mte(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{KR(n,e)})})}function Pte(n,e){return b(this,null,function*(){ij(n),YR(n)?(n.q_.M_(e),QR(n)):n.q_.set("Unknown")})}function xte(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof aw&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gw(n,r)}else if(e instanceof ad?n.Q_.Ke(e):e instanceof ow?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{let r=yield tj(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Rn.EMPTY_BYTE_STRING,h.snapshotVersion)),rj(s,c);let g=new cp(h.target,c,d,h.sequenceNumber);KR(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){se("RemoteStore","Failed to raise snapshot:",r),yield gw(n,r)}})}function gw(n,e,t){return b(this,null,function*(){if(!_p(e))throw e;n.L_.add(1),yield vp(n),n.q_.set("Offline"),t||(t=()=>tj(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){se("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ow(n)}))})}function sj(n,e){return e().catch(t=>gw(n,t,e))}function Lw(n){return b(this,null,function*(){let e=be(n),t=ra(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kte(e);)try{let i=yield Cte(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Nte(e,i)}catch(i){yield gw(e,i)}oj(e)&&aj(e)})}function kte(n){return Nc(n)&&n.O_.length<10}function Nte(n,e){n.O_.push(e);let t=ra(n);t.r_()&&t.V_&&t.m_(e.mutations)}function oj(n){return Nc(n)&&!ra(n).n_()&&n.O_.length>0}function aj(n){ra(n).start()}function Ote(n){return b(this,null,function*(){ra(n).p_()})}function Lte(n){return b(this,null,function*(){let e=ra(n);for(let t of n.O_)e.m_(t.mutations)})}function Fte(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=xA.from(r,e,t);yield sj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lw(n)})}function Vte(n,e){return b(this,null,function*(){e&&ra(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return tte(o)&&o!==$.ABORTED}(i.code)){let s=r.O_.shift();ra(r).s_(),yield sj(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lw(r)}})}(n,e)),oj(n)&&aj(n)})}function dB(n,e){return b(this,null,function*(){let t=be(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");let r=Nc(t);t.L_.add(3),yield vp(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ow(t)})}function Ute(n,e){return b(this,null,function*(){let t=be(n);e?(t.L_.delete(2),yield Ow(t)):e||(t.L_.add(2),yield vp(t),t.q_.set("Unknown"))})}function Id(n){return n.K_||(n.K_=function(t,r,i){let s=be(t);return s.w_(),new fR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Rte.bind(null,n),Ro:Mte.bind(null,n),mo:Pte.bind(null,n),d_:xte.bind(null,n)}),n.B_.push(e=>b(null,null,function*(){e?(n.K_.s_(),YR(n)?QR(n):n.q_.set("Unknown")):(yield n.K_.stop(),ij(n))}))),n.K_}function ra(n){return n.U_||(n.U_=function(t,r,i){let s=be(t);return s.w_(),new pR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ote.bind(null,n),mo:Vte.bind(null,n),f_:Lte.bind(null,n),g_:Fte.bind(null,n)}),n.B_.push(e=>b(null,null,function*(){e?(n.U_.s_(),yield Lw(n)):(yield n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _R=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function JR(n,e){if(Fs("AsyncQueue",`${e}: ${n}`),_p(n))return new ee($.UNAVAILABLE,`${e}: ${n}`);throw n}var mw=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Zf(),this.sortedSet=new Mt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yw=class{constructor(){this.W_=new Mt(he.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},_d=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,mw.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vR=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},wR=class{constructor(){this.queries=hB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=be(t),s=i.queries;i.queries=hB(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new ee($.ABORTED,"Firestore shutting down"))}};function hB(){return new na(n=>NB(n),xw)}function cj(n,e){return b(this,null,function*(){let t=be(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new vR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=JR(o,`Initialization of query '${rd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ZR(t)})}function uj(n,e){return b(this,null,function*(){let t=be(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Bte(n,e){let t=be(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ZR(t)}function jte(n,e,t){let r=be(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function ZR(n){n.Y_.forEach(e=>{e.next()})}var ER,fB;(fB=ER||(ER={})).ea="default",fB.Cache="cache";var _w=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ER.Cache}};var vw=class{constructor(e){this.key=e}},ww=class{constructor(e){this.key=e}},IR=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=OB(e),this.Ra=new mw(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new yw,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),I=kw(this.query,g)?g:null,k=!!E&&this.mutatedKeys.has(E.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),N=!1;E&&I?E.data.isEqual(I.data)?k!==F&&(r.track({type:3,doc:I}),N=!0):this.ga(E,I)||(r.track({type:2,doc:I}),N=!0,(c&&this.Aa(I,c)>0||d&&this.Aa(I,d)<0)&&(a=!0)):!E&&I?(r.track({type:0,doc:I}),N=!0):E&&!I&&(r.track({type:1,doc:E}),N=!0,(c||d)&&(a=!0)),N&&(I?(o=o.add(I),s=F?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,g)=>function(I,k){let F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return F(I)-F(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new _d(this.query,e.Ra,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ww(r))}),this.da.forEach(r=>{e.has(r)||t.push(new vw(r))}),t}ba(e){this.Ta=e.Ts,this.da=Be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _d.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bR=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},TR=class{constructor(e){this.key=e,this.va=!1}},CR=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new na(a=>NB(a),xw),this.Ma=new Map,this.xa=new Set,this.Oa=new Mt(he.comparator),this.Na=new Map,this.La=new lp,this.Ba={},this.ka=new Map,this.qa=up.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function zte(n,e,t=!0){return b(this,null,function*(){let r=gj(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield lj(r,e,t,!0),i})}function $te(n,e){return b(this,null,function*(){let t=gj(n);yield lj(t,e,!0,!1)})}function lj(n,e,t,r){return b(this,null,function*(){let i=yield Ste(n.localStore,Bi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield qte(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&nj(n.remoteStore,i),a})}function qte(n,e,t,r,i){return b(this,null,function*(){n.Ka=(g,E,I)=>function(F,N,q,te){return b(this,null,function*(){let Y=N.view.ma(q);Y.ns&&(Y=yield lB(F.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,Y)));let ae=te&&te.targetChanges.get(N.targetId),je=te&&te.targetMismatches.get(N.targetId)!=null,le=N.view.applyChanges(Y,F.isPrimaryClient,ae,je);return gB(F,N.targetId,le.wa),le.snapshot})}(n,g,E,I);let s=yield lB(n.localStore,e,!0),o=new IR(e,s.Ts),a=o.ma(s.documents),c=ap.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);gB(n,t,d.wa);let h=new bR(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function Hte(n,e,t){return b(this,null,function*(){let r=be(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!xw(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WR(r.remoteStore,i.targetId),SR(r,i.targetId)}).catch(yp))):(SR(r,i.targetId),yield cR(r.localStore,i.targetId,!0))})}function Gte(n,e){return b(this,null,function*(){let t=be(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WR(t.remoteStore,r.targetId))})}function Wte(n,e,t){return b(this,null,function*(){let r=ene(n);try{let i=yield function(o,a){let c=be(o),d=pn.now(),h=a.reduce((I,k)=>I.add(k.key),Be()),g,E;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=Us(),F=Be();return c.cs.getEntries(I,h).next(N=>{k=N,k.forEach((q,te)=>{te.isValidDocument()||(F=F.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,k)).next(N=>{g=N;let q=[];for(let te of a){let Y=ete(te,g.get(te.key).overlayedDocument);Y!=null&&q.push(new $i(te.key,Y,DB(Y.value.mapValue),Ls.exists(!0)))}return c.mutationQueue.addMutationBatch(I,d,q,a)}).next(N=>{E=N;let q=N.applyToLocalDocumentSet(g,F);return c.documentOverlayCache.saveOverlays(I,N.batchId,q)})}).then(()=>({batchId:E.batchId,changes:FB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Mt(Je)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield wp(r,i.changes),yield Lw(r.remoteStore)}catch(i){let s=JR(i,"Failed to persist write");t.reject(s)}})}function dj(n,e){return b(this,null,function*(){let t=be(n);try{let r=yield bte(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?rt(o.va):i.removedDocuments.size>0&&(rt(o.va),o.va=!1))}),yield wp(t,r,e)}catch(r){yield yp(r)}})}function pB(n,e,t){let r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=be(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.j_)E.Z_(a)&&(d=!0)}),d&&ZR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Kte(n,e,t){return b(this,null,function*(){let r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Mt(he.comparator);o=o.insert(s,si.newNoDocument(s,Ae.min()));let a=Be().add(s),c=new sw(Ae.min(),new Map,new Mt(Je),o,a);yield dj(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),XR(r)}else yield cR(r.localStore,e,!1).then(()=>SR(r,e,t)).catch(yp)})}function Qte(n,e){return b(this,null,function*(){let t=be(n),r=e.batch.batchId;try{let i=yield Ite(t.localStore,e);fj(t,r,null),hj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wp(t,i)}catch(i){yield yp(i)}})}function Yte(n,e,t){return b(this,null,function*(){let r=be(n);try{let i=yield function(o,a){let c=be(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(rt(g!==null),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);fj(r,e,t),hj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wp(r,i)}catch(i){yield yp(i)}})}function hj(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function fj(n,e,t){let r=be(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function SR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||pj(n,r)})}function pj(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(WR(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),XR(n))}function gB(n,e,t){for(let r of t)r instanceof vw?(n.La.addReference(r.key,e),Jte(n,r)):r instanceof ww?(se("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||pj(n,r.key)):ve()}function Jte(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(r),XR(n))}function XR(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new he(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new TR(t)),n.Oa=n.Oa.insert(t,r),nj(n.remoteStore,new cp(Bi(qR(t.path)),r,"TargetPurposeLimboResolution",bB.oe))}}function wp(n,e,t){return b(this,null,function*(){let r=be(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=iR.Wi(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,d){return b(this,null,function*(){let h=be(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(d,E=>W.forEach(E.$i,I=>h.persistence.referenceDelegate.addReference(g,E.targetId,I)).next(()=>W.forEach(E.Ui,I=>h.persistence.referenceDelegate.removeReference(g,E.targetId,I)))))}catch(g){if(!_p(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let I=h.os.get(E),k=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(E,F)}}})}(r.localStore,s))})}function Zte(n,e){return b(this,null,function*(){let t=be(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());let r=yield ej(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new ee($.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wp(t,r.hs)}})}function Xte(n,e){let t=be(n),r=t.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function gj(n){let e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xte.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kte.bind(null,e),e.Ca.d_=Bte.bind(null,e.eventManager),e.Ca.$a=jte.bind(null,e.eventManager),e}function ene(n){let e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yte.bind(null,e),e}var mB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=Nw(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Ete(this.persistence,new oR,t.initialUser,this.serializer)}Ga(t){return new tR(rR.Zr,this.serializer)}Wa(t){return new uR}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var tne=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pB(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zte.bind(null,this.syncEngine),yield Ute(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new wR}()}createDatastore(t){let r=Nw(t.databaseInfo.databaseId),i=function(o){return new hR(o)}(t.databaseInfo);return function(o,a,c,d){return new gR(o,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new yR(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>pB(this.syncEngine,r,0),function(){return hw.D()?new hw:new lR}())}createSyncEngine(t,r){return function(s,o,a,c,d,h,g){let E=new CR(s,o,a,c,d,h);return g&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=be(s);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield vp(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ew=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var DR=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=Zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){se("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=JR(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sA(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield ej(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function yB(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nne(n);se("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>dB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>dB(e.remoteStore,i)),n._onlineComponents=e})}function nne(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ud("Error using user provided cache. Falling back to memory cache: "+t),yield sA(n,new mB)}}else se("FirestoreClient","Using default OfflineComponentProvider"),yield sA(n,new mB);return n._offlineComponents})}function mj(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),yield yB(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),yield yB(n,new tne))),n._onlineComponents})}function rne(n){return mj(n).then(e=>e.syncEngine)}function yj(n){return b(this,null,function*(){let e=yield mj(n),t=e.eventManager;return t.onListen=zte.bind(null,e.syncEngine),t.onUnlisten=Hte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$te.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Gte.bind(null,e.syncEngine),t})}function ine(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return function(s,o,a,c,d){let h=new Ew({next:E=>{h.Za(),o.enqueueAndForget(()=>uj(s,g));let I=E.docs.has(a);!I&&E.fromCache?d.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&c&&c.source==="server"?d.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(E)},error:E=>d.reject(E)}),g=new _w(qR(a.path),h,{includeMetadataChanges:!0,_a:!0});return cj(s,g)}(yield yj(n),n.asyncQueue,e,t,r)})),r.promise}function sne(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return function(s,o,a,c,d){let h=new Ew({next:E=>{h.Za(),o.enqueueAndForget(()=>uj(s,g)),E.fromCache&&c.source==="server"?d.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(E)},error:E=>d.reject(E)}),g=new _w(a,h,{includeMetadataChanges:!0,_a:!0});return cj(s,g)}(yield yj(n),n.asyncQueue,e,t,r)})),r.promise}function _j(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _B=new Map;function vj(n,e,t){if(!t)throw new ee($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function one(n,e,t,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vB(n){if(!he.isDocumentKey(n))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wB(n){if(he.isDocumentKey(n))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function Bs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Fw(n);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ane(n,e){if(e<=0)throw new ee($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Iw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}one("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_j((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oA;switch(r.type){case"firstParty":return new lA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_B.get(t);r&&(se("ComponentProvider","Removing Datastore"),_B.delete(t),r.terminate())}(this),Promise.resolve()}};function wj(n,e,t,r={}){var i;let s=(n=Bs(n,vd))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ud("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dn.MOCK_USER;else{a=o_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dn(d)}n._authCredentials=new aA(new Jv(a,c))}}var ia=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xo=class n extends ia{constructor(e,t,r){super(e,t,qR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ej(n,e,...t){if(n=gt(n),vj("collection","path",e),n instanceof vd){let r=Tt.fromString(e,...t);return wB(r),new Xo(n,null,r)}{if(!(n instanceof Xn||n instanceof Xo))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Tt.fromString(e,...t));return wB(r),new Xo(n.firestore,null,r)}}function eM(n,e,...t){if(n=gt(n),arguments.length===1&&(e=Zv.newId()),vj("doc","path",e),n instanceof vd){let r=Tt.fromString(e,...t);return vB(r),new Xn(n,null,new he(r))}{if(!(n instanceof Xn||n instanceof Xo))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Tt.fromString(e,...t));return vB(r),new Xn(n.firestore,n instanceof Xo?n.converter:null,new he(r))}}var bw=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fw(this,"async_queue_retry"),this.Vu=()=>{let r=iA();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=iA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=iA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_p(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=_R.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ve()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var sa=class extends vd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bw,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bw(e),this._firestoreClient=void 0,yield e}})}};function Ij(n,e){let t=typeof n=="object"?n:Vo(),r=typeof n=="string"?n:e||"(default)",i=ic(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=s_("firestore");s&&wj(i,...s)}return i}function tM(n){if(n._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cne(n),n._firestoreClient}function cne(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,d,h){return new gA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_j(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DR(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var dp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Rn.fromBase64String(e))}catch(t){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var wd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hp=class{constructor(e){this._methodName=e}};var fp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}};var pp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var une=/^__.*__$/,AR=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}},Tw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}var RR=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bj(this.Cu)&&une.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},MR=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nw(e)}Qu(e,t,r,i=!1){return new RR({Cu:e,methodName:t,qu:r,path:gr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nM(n){let e=n._freezeSettings(),t=Nw(n._databaseId);return new MR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lne(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);rM("Data must be an object, but it was:",o,r);let a=Tj(r,o),c,d;if(s.merge)c=new Dr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let E=PR(e,g,t);if(!o.contains(E))throw new ee($.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Sj(h,E)||h.push(E)}c=new Dr(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new AR(new pr(a),c,d)}var Cw=class n extends hp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dne(n,e,t,r){let i=n.Qu(1,e,t);rM("Data must be an object, but it was:",i,r);let s=[],o=pr.empty();kc(r,(c,d)=>{let h=iM(e,c,t);d=gt(d);let g=i.Nu(h);if(d instanceof Cw)s.push(h);else{let E=Ep(d,g);E!=null&&(s.push(h),o.set(h,E))}});let a=new Dr(s);return new Tw(o,a,i.fieldTransforms)}function hne(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[PR(e,r,t)],c=[i];if(s.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)a.push(PR(e,s[E])),c.push(s[E+1]);let d=[],h=pr.empty();for(let E=a.length-1;E>=0;--E)if(!Sj(d,a[E])){let I=a[E],k=c[E];k=gt(k);let F=o.Nu(I);if(k instanceof Cw)d.push(I);else{let N=Ep(k,F);N!=null&&(d.push(I),h.set(I,N))}}let g=new Dr(d);return new Tw(h,g,o.fieldTransforms)}function fne(n,e,t,r=!1){return Ep(t,n.Qu(r?4:3,e))}function Ep(n,e){if(Cj(n=gt(n)))return rM("Unsupported field value:",e,n),Tj(n,e);if(n instanceof hp)return function(r,i){if(!bj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ep(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qee(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=pn.fromDate(r);return{timestampValue:uw(i.serializer,s)}}if(r instanceof pn){let s=new pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uw(i.serializer,s)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dp)return{bytesValue:WB(i.serializer,r._byteString)};if(r instanceof Xn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:GR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return HR(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fw(r)}`)}(n,e)}function Tj(n,e){let t={};return TB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(n,(r,i)=>{let s=Ep(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Cj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pn||n instanceof fp||n instanceof dp||n instanceof Xn||n instanceof hp||n instanceof pp)}function rM(n,e,t){if(!Cj(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Fw(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function PR(n,e,t){if((e=gt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return iM(n,e);throw Sw("Field path arguments must be of type string or ",n,!1,void 0,t)}var pne=new RegExp("[~\\*/\\[\\]]");function iM(n,e,t){if(e.search(pne)>=0)throw Sw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wd(...e.split("."))._internalPath}catch{throw Sw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ee($.INVALID_ARGUMENT,a+n+c)}function Sj(n,e){return n.some(t=>t.isEqual(e))}var Dw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Vw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xR=class extends Dw{data(){return super.data()}};function Vw(n,e){return typeof e=="string"?iM(n,e):e instanceof wd?e._internalPath:e._delegate._internalPath}function gne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gp=class{},mp=class extends gp{};function Dj(n,e,...t){let r=[];e instanceof gp&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof kR).length,a=s.filter(c=>c instanceof Aw).length;if(o>1||o>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Aw=class n extends mp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Pj(e._query,t),new ia(e.firestore,e.converter,AA(e._query,t))}_parse(e){let t=nM(e.firestore);return function(s,o,a,c,d,h,g){let E;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){IB(g,h);let I=[];for(let k of g)I.push(EB(c,s,k));E={arrayValue:{values:I}}}else E=EB(c,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||IB(g,h),E=fne(a,o,g,h==="in"||h==="not-in");return Ht.create(d,h,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Aj(n,e,t){let r=e,i=Vw("where",n);return Aw._create(i,r,t)}var kR=class n extends gp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Pj(o,c),o=AA(o,c)}(e._query,t),new ia(e.firestore,e.converter,AA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var NR=class n extends mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(s,o)}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ta(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Rj(n,e="asc"){let t=e,r=Vw("orderBy",n);return NR._create(r,t)}var OR=class n extends mp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ia(e.firestore,e.converter,iw(e._query,this._limit,this._limitType))}};function Mj(n){return ane("limit",n),OR._create("limit",n,"F")}function EB(n,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kB(e)&&t.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Tt.fromString(t));if(!he.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return WU(n,new he(r))}if(t instanceof Xn)return WU(n,t._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fw(t)}.`)}function IB(n,e){if(!Array.isArray(n)||n.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pj(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var LR=class{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return kc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>It(o.doubleValue));return new pp(s)}convertGeoPoint(e){return new fp(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=BR(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){let t=Vs(e);return new pn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Tt.fromString(e);rt(XB(r));let i=new nw(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||Fs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function mne(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Cc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rw=class extends Dw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Vw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},cd=class extends Rw{data(e={}){return super.data(e)}},FR=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cd(this._firestore,this._userDataWriter,r.key,r,new Cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:yne(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function yne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function xj(n){n=Bs(n,Xn);let e=Bs(n.firestore,sa);return ine(tM(e),n._key).then(t=>_ne(e,n,t))}var Mw=class extends LR{constructor(e){super(),this.firestore=e}convertBytes(e){return new dp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}};function kj(n){n=Bs(n,ia);let e=Bs(n.firestore,sa),t=tM(e),r=new Mw(e);return gne(n._query),sne(t,n._query).then(i=>new FR(e,r,n,i))}function Nj(n,e,t,...r){n=Bs(n,Xn);let i=Bs(n.firestore,sa),s=nM(i),o;return o=typeof(e=gt(e))=="string"||e instanceof wd?hne(s,"updateDoc",n._key,e,t,r):dne(s,"updateDoc",n._key,e),sM(i,[o.toMutation(n._key,Ls.exists(!0))])}function Oj(n){return sM(Bs(n.firestore,sa),[new op(n._key,Ls.none())])}function Lj(n,e){let t=Bs(n.firestore,sa),r=eM(n),i=mne(n.converter,e);return sM(t,[lne(nM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ls.exists(!1))]).then(()=>r)}function sM(n,e){return function(r,i){let s=new ii;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return Wte(yield rne(r),i,s)})),s.promise}(tM(n),e)}function _ne(n,e,t){let r=t.docs.get(e._key),i=new Mw(n);return new Rw(n,i,e._key,r,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ed=i})(Pi),Mi(new Zn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new sa(new cA(r.getProvider("auth-internal")),new hA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nw(d.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wt($U,"4.7.3",e),wt($U,"4.7.3","esm2017")})();var Oc=class{constructor(e){return e}},Fj="firestore",oM=class{constructor(){return cc(Fj)}};var aM=new Q("angularfire2.firestore-instances");function vne(n,e){let t=El(Fj,n,e);return t&&new Oc(t)}function wne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Oc(r)}}var Ene={provide:oM,deps:[[new en,aM]]},Ine={provide:Oc,useFactory:vne,deps:[[new en,aM],Xr]};function Vj(n,...e){return wt("angularfire",ms.full,"fst"),wn([Ine,Ene,{provide:aM,useFactory:wne(n),multi:!0,deps:[Pe,Dt,Bo,ys,[new en,gc],[new en,Uo],...e]}])}var Ip=nt(BU,!0);var Uj=nt(Lj,!0);var Lc=nt(Ej,!0);var Bj=nt(Oj,!0);var bp=nt(eM,!0);var jj=nt(xj,!0);var zj=nt(kj,!0);var $j=nt(Ij,!0);var cM=nt(Mj,!0);var Uw=nt(Rj,!0);var Tp=nt(Dj,!0);var uM=nt(Nj,!0);var bd=nt(Aj,!0);var Yj="firebasestorage.googleapis.com",Jj="storageBucket",Tne=2*60*1e3,Cne=10*60*1e3;var Pt=class n extends Nn{constructor(e,t,r=0){super(lM(e),`Firebase Storage: ${t} (${lM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Vt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Vt||{});function lM(n){return"storage/"+n}function mM(){let n="An unknown error occurred, please check the error payload for server response.";return new Pt(Vt.UNKNOWN,n)}function Sne(n){return new Pt(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Dne(n){return new Pt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ane(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Vt.UNAUTHENTICATED,n)}function Rne(){return new Pt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Mne(n){return new Pt(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Pne(){return new Pt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xne(){return new Pt(Vt.CANCELED,"User canceled the upload/download.")}function kne(n){return new Pt(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}function Nne(n){return new Pt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function One(){return new Pt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jj+"' property when initializing the app?")}function Lne(){return new Pt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fne(){return new Pt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vne(n){return new Pt(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dM(n){return new Pt(Vt.INVALID_ARGUMENT,n)}function Zj(){return new Pt(Vt.APP_DELETED,"The Firebase app was deleted.")}function Une(n){return new Pt(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sp(n,e){return new Pt(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Cp(n){throw new Pt(Vt.INTERNAL_ERROR,"Internal error: "+n)}var ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Nne(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(ae){ae.path_=decodeURIComponent(ae.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${g}/${h}/b/${i}/o${E}`,"i"),k={bucket:1,path:3},F=t===Yj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",q=new RegExp(`^https?://${F}/${i}/${N}`,"i"),Y=[{regex:a,indices:c,postModify:s},{regex:I,indices:k,postModify:d},{regex:q,indices:{bucket:1,path:2},postModify:d}];for(let ae=0;ae<Y.length;ae++){let je=Y[ae],le=je.regex.exec(e);if(le){let S=le[je.indices.bucket],_=le[je.indices.path];_||(_=""),r=new n(S,_),je.postModify(r);break}}if(r==null)throw kne(e);return r}},hM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Bne(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,n(I,c())},N)}function E(){s&&clearTimeout(s)}function I(N,...q){if(d){E();return}if(N){E(),h.call(null,N,...q);return}if(c()||o){E(),h.call(null,N,...q);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,g(Y)}let k=!1;function F(N){k||(k=!0,E(),!d&&(i!==null?(N||(a=2),clearTimeout(i),g(0)):N||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,F(!0)},t),F}function jne(n){n(!1)}function zne(n){return n!==void 0}function $ne(n){return typeof n=="object"&&!Array.isArray(n)}function yM(n){return typeof n=="string"||n instanceof String}function qj(n){return _M()&&n instanceof Blob}function _M(){return typeof Blob<"u"}function Hj(n,e,t,r){if(r<e)throw dM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dM(`Invalid value for '${n}'. Expected ${t} or less.`)}function vM(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Xj(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Cd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Cd||{});function qne(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var fM=class{constructor(e,t,r,i,s,o,a,c,d,h,g,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,k)=>{this.resolve_=I,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Td(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Cd.NO_ERROR,c=s.getStatus();if(!a||qne(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Cd.ABORT;r(!1,new Td(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new Td(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());zne(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=mM();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Zj():xne();o(c)}else{let c=Pne();o(c)}};this.canceled_?t(!1,new Td(!1,null,!0)):this.backoffId_=Bne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Td=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Hne(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Gne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Wne(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Kne(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Qne(n,e,t,r,i,s,o=!0){let a=Xj(n.urlParams),c=n.url+a,d=Object.assign({},n.headers);return Wne(d,e),Hne(d,t),Gne(d,s),Kne(d,r),new fM(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function Yne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Jne(...n){let e=Yne();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(_M())return new Blob(n);throw new Pt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Zne(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Xne(n){if(typeof atob>"u")throw Vne("base-64");return atob(n)}var qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Dp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function ere(n,e){switch(n){case qi.RAW:return new Dp(ez(e));case qi.BASE64:case qi.BASE64URL:return new Dp(tz(n,e));case qi.DATA_URL:return new Dp(nre(e),rre(e))}throw mM()}function ez(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tre(n){let e;try{e=decodeURIComponent(n)}catch{throw Sp(qi.DATA_URL,"Malformed data URL.")}return ez(e)}function tz(n,e){switch(n){case qi.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Sp(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Sp(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Xne(e)}catch(i){throw i.message.includes("polyfill")?i:Sp(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var jw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sp(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=ire(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function nre(n){let e=new jw(n);return e.base64?tz(qi.BASE64,e.rest):tre(e.rest)}function rre(n){return new jw(n).contentType}function ire(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var zw=class n{constructor(e,t){let r=0,i="";qj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(qj(this.data_)){let r=this.data_,i=Zne(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(_M()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Jne.apply(null,t))}else{let t=e.map(o=>yM(o)?ere(qi.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function nz(n){let e;try{e=JSON.parse(n)}catch{return null}return $ne(e)?e:null}function sre(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ore(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function rz(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function are(n,e){return e}var gn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||are}},Bw=null;function cre(n){return!yM(n)||n.length<2?n:rz(n)}function iz(){if(Bw)return Bw;let n=[];n.push(new gn("bucket")),n.push(new gn("generation")),n.push(new gn("metageneration")),n.push(new gn("name","fullPath",!0));function e(s,o){return cre(o)}let t=new gn("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new gn("size");return i.xform=r,n.push(i),n.push(new gn("timeCreated")),n.push(new gn("updated")),n.push(new gn("md5Hash",null,!0)),n.push(new gn("cacheControl",null,!0)),n.push(new gn("contentDisposition",null,!0)),n.push(new gn("contentEncoding",null,!0)),n.push(new gn("contentLanguage",null,!0)),n.push(new gn("contentType",null,!0)),n.push(new gn("metadata","customMetadata",!0)),Bw=n,Bw}function ure(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new ai(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function lre(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return ure(r,n),r}function sz(n,e,t){let r=nz(e);return r===null?null:lre(n,r,t)}function dre(n,e,t,r){let i=nz(e);if(i===null||!yM(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(d=>{let h=n.bucket,g=n.fullPath,E="/b/"+o(h)+"/o/"+o(g),I=vM(E,t,r),k=Xj({alt:"media",token:d});return I+k})[0]}function hre(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var $w=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function oz(n){if(!n)throw mM()}function fre(n,e){function t(r,i){let s=sz(n,i,e);return oz(s!==null),s}return t}function pre(n,e){function t(r,i){let s=sz(n,i,e);return oz(s!==null),dre(s,i,n.host,n._protocol)}return t}function az(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Rne():i=Ane():t.getStatus()===402?i=Dne(n.bucket):t.getStatus()===403?i=Mne(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function gre(n){let e=az(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Sne(n.path)),s.serverResponse=i.serverResponse,s}return t}function mre(n,e,t){let r=e.fullServerUrl(),i=vM(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new $w(i,s,pre(n,t),o);return a.errorHandler=gre(e),a}function yre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function _re(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=yre(null,e)),r}function vre(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let Y="";for(let ae=0;ae<2;ae++)Y=Y+Math.random().toString().slice(2);return Y}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let d=_re(e,r,i),h=hre(d,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,E=`\r
--`+c+"--",I=zw.getBlob(g,r,E);if(I===null)throw Lne();let k={name:d.fullPath},F=vM(s,n.host,n._protocol),N="POST",q=n.maxUploadRetryTime,te=new $w(F,N,fre(n,t),q);return te.urlParams=k,te.headers=o,te.body=I.uploadData(),te.errorHandler=az(e),te}var M0e=256*1024;var Gj=null,pM=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Cp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},gM=class extends pM{initXhr(){this.xhr_.responseType="text"}};function cz(){return Gj?Gj():new gM}var Sd=class n{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rz(this._location.path)}get storage(){return this._service}get parent(){let e=sre(this._location.path);if(e===null)return null;let t=new ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Une(e)}};function wre(n,e,t){n._throwIfRoot("uploadBytes");let r=vre(n.storage,n._location,iz(),new zw(e,!0),t);return n.storage.makeRequestWithTokens(r,cz).then(i=>({metadata:i,ref:n}))}function Ere(n){n._throwIfRoot("getDownloadURL");let e=mre(n.storage,n._location,iz());return n.storage.makeRequestWithTokens(e,cz).then(t=>{if(t===null)throw Fne();return t})}function Ire(n,e){let t=ore(n._location.path,e),r=new ai(n._location.bucket,t);return new Sd(n.storage,r)}function bre(n){return/^[A-Za-z]+:\/\//.test(n)}function Tre(n,e){return new Sd(n,e)}function uz(n,e){if(n instanceof Ap){let t=n;if(t._bucket==null)throw One();let r=new Sd(t,t._bucket);return e!=null?uz(r,e):r}else return e!==void 0?Ire(n,e):n}function Cre(n,e){if(e&&bre(e)){if(n instanceof Ap)return Tre(n,e);throw dM("To use ref(service, url), the first argument must be a Storage instance.")}else return uz(n,e)}function Wj(n,e){let t=e?.[Jj];return t==null?null:ai.makeFromBucketSpec(t,n)}function Sre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:o_(i,n.app.options.projectId))}var Ap=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Yj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Tne,this._maxUploadRetryTime=Cne,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=Wj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=Wj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new hM(Zj());{let o=Qne(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Kj="@firebase/storage",Qj="0.13.2";var lz="storage";function dz(n,e,t){return n=gt(n),wre(n,e,t)}function hz(n){return n=gt(n),Ere(n)}function fz(n,e){return n=gt(n),Cre(n,e)}function pz(n=Vo(),e){n=gt(n);let r=ic(n,lz).getImmediate({identifier:e}),i=s_("storage");return i&&gz(r,...i),r}function gz(n,e,t,r={}){Sre(n,e,t,r)}function Dre(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ap(t,r,i,e,Pi)}function Are(){Mi(new Zn(lz,Dre,"PUBLIC").setMultipleInstances(!0)),wt(Kj,Qj,""),wt(Kj,Qj,"esm2017")}Are();var Fc=class{constructor(e){return e}},mz="storage",wM=class{constructor(){return cc(mz)}};var EM=new Q("angularfire2.storage-instances");function Rre(n,e){let t=El(mz,n,e);return t&&new Fc(t)}function Mre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fc(r)}}var Pre={provide:wM,deps:[[new en,EM]]},xre={provide:Fc,useFactory:Rre,deps:[[new en,EM],Xr]};function yz(n,...e){return wt("angularfire",ms.full,"gcs"),wn([xre,Pre,{provide:EM,useFactory:Mre(n),multi:!0,deps:[Pe,Dt,Bo,ys,[new en,gc],[new en,Uo],...e]}])}var _z=nt(hz,!0);var vz=nt(pz,!0);var wz=nt(fz,!0);var Ez=nt(dz,!0);var Pz=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(hs),re(lr))};static \u0275dir=ht({type:n})}return n})(),CM=(()=>{class n extends Pz{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=ht({type:n,features:[Hr]})}return n})(),Jw=new Q("");var Nre={provide:Jw,useExisting:ls(()=>Hi),multi:!0};function Ore(){let n=Er()?Er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Lre=new Q(""),Hi=(()=>{class n extends Pz{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Ore())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(hs),re(lr),re(Lre,8))};static \u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ge("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[fs([Nre]),Hr]})}return n})();function Fre(n){return n==null||Vre(n)===0}function Vre(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var SM=new Q(""),xz=new Q("");function Ure(n){return Fre(n.value)?{required:!0}:null}function Iz(n){return null}function kz(n){return n!=null}function Nz(n){return To(n)?ot(n):n}function Oz(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function Lz(n,e){return e.map(t=>t(n))}function Bre(n){return!n.validate}function Fz(n){return n.map(e=>Bre(e)?e:t=>e.validate(t))}function jre(n){if(!n)return null;let e=n.filter(kz);return e.length==0?null:function(t){return Oz(Lz(t,e))}}function DM(n){return n!=null?jre(Fz(n)):null}function zre(n){if(!n)return null;let e=n.filter(kz);return e.length==0?null:function(t){let r=Lz(t,e).map(Nz);return $E(r).pipe(we(Oz))}}function AM(n){return n!=null?zre(Fz(n)):null}function bz(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $re(n){return n._rawValidators}function qre(n){return n._rawAsyncValidators}function IM(n){return n?Array.isArray(n)?n:[n]:[]}function Hw(n,e){return Array.isArray(n)?n.includes(e):n===e}function Tz(n,e){let t=IM(e);return IM(n).forEach(i=>{Hw(t,i)||t.push(i)}),t}function Cz(n,e){return IM(e).filter(t=>!Hw(n,t))}var Gw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rd=class extends Gw{name;get formDirective(){return null}get path(){return null}},Np=class extends Gw{_parent=null;name=null;valueAccessor=null},Ww=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Hre={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pbe=oe(z({},Hre),{"[class.ng-submitted]":"isSubmitted"}),aa=(()=>{class n extends Ww{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(Np,2))};static \u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&py("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Hr]})}return n})(),Md=(()=>{class n extends Ww{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(Rd,10))};static \u0275dir=ht({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&py("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Hr]})}return n})();var Rp="VALID",qw="INVALID",Dd="PENDING",Mp="DISABLED",oa=class{},Kw=class extends oa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},xp=class extends oa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kp=class extends oa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ad=class extends oa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},bM=class extends oa{source;constructor(e){super(),this.source=e}},TM=class extends oa{source;constructor(e){super(),this.source=e}};function Vz(n){return(Zw(n)?n.validators:n)||null}function Gre(n){return Array.isArray(n)?DM(n):n||null}function Uz(n,e){return(Zw(e)?e.asyncValidators:n)||null}function Wre(n){return Array.isArray(n)?AM(n):n||null}function Zw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Kre(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[t])throw new ne(1001,"")}function Qre(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ne(1002,"")})}var Qw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kr(this.statusReactive)}set status(e){Kr(()=>this.statusReactive.set(e))}_status=Zu(()=>this.statusReactive());statusReactive=Hu(void 0);get valid(){return this.status===Rp}get invalid(){return this.status===qw}get pending(){return this.status==Dd}get disabled(){return this.status===Mp}get enabled(){return this.status!==Mp}errors;get pristine(){return Kr(this.pristineReactive)}set pristine(e){Kr(()=>this.pristineReactive.set(e))}_pristine=Zu(()=>this.pristineReactive());pristineReactive=Hu(!0);get dirty(){return!this.pristine}get touched(){return Kr(this.touchedReactive)}set touched(e){Kr(()=>this.touchedReactive.set(e))}_touched=Zu(()=>this.touchedReactive());touchedReactive=Hu(!1);get untouched(){return!this.touched}_events=new Ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Tz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Tz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cz(e,this._rawAsyncValidators))}hasValidator(e){return Hw(this._rawValidators,e)}hasAsyncValidator(e){return Hw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kp(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new xp(!0,r))}markAsPending(e={}){this.status=Dd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ad(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mp,this.errors=null,this._forEachChild(i=>{i.disable(oe(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kw(this.value,r)),this._events.next(new Ad(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rp,this._forEachChild(r=>{r.enable(oe(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rp||this.status===Dd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kw(this.value,t)),this._events.next(new Ad(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mp:Rp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Dd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Nz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ad(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?Mp:this.errors?qw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dd)?Dd:this._anyControlsHaveStatus(qw)?qw:Rp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new xp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Gre(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Wre(this._rawAsyncValidators)}},Yw=class extends Qw{constructor(e,t,r){super(Vz(t),Uz(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Qre(this,!0,e),Object.keys(e).forEach(r=>{Kre(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var RM=new Q("",{providedIn:"root",factory:()=>MM}),MM="always";function Yre(n,e){return[...e.path,n]}function Bz(n,e,t=MM){jz(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Zre(n,e),eie(n,e),Xre(n,e),Jre(n,e)}function Sz(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jre(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jz(n,e){let t=$re(n);e.validator!==null?n.setValidators(bz(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=qre(n);e.asyncValidator!==null?n.setAsyncValidators(bz(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Sz(e._rawValidators,i),Sz(e._rawAsyncValidators,i)}function Zre(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&zz(n,e)})}function Xre(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&zz(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function zz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eie(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function tie(n,e){n==null,jz(n,e)}function nie(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function rie(n){return Object.getPrototypeOf(n.constructor)===CM}function iie(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sie(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Hi?t=s:rie(s)?r=s:i=s}),i||r||t||null}var oie={provide:Rd,useExisting:ls(()=>Vc)},Pp=Promise.resolve(),Vc=(()=>{class n extends Rd{callSetDisabledState;get submitted(){return Kr(this.submittedReactive)}_submitted=Zu(()=>this.submittedReactive());submittedReactive=Hu(!1);_directives=new Set;form;ngSubmit=new dt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Yw({},DM(t),AM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Bz(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Pp.then(()=>{let r=this._findContainer(t.path),i=new Yw({});tie(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Pp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),iie(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new bM(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new TM(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(re(SM,10),re(xz,10),re(RM,8))};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ge("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fs([oie]),Hr]})}return n})();function Dz(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Az(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var aie=class extends Qw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Vz(t),Uz(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Az(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Dz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Dz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Az(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var cie={provide:Np,useExisting:ls(()=>js)},Rz=Promise.resolve(),js=(()=>{class n extends Np{_changeDetectorRef;callSetDisabledState;control=new aie;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new dt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sie(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),nie(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Rz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Do(r);Rz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Yre(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(Rd,9),re(SM,10),re(xz,10),re(Jw,10),re(So,8),re(RM,8))};static \u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fs([cie]),Hr,ur]})}return n})();var Pd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var uie={provide:Jw,useExisting:ls(()=>xd),multi:!0};function $z(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lie(n){return n.split(":")[0]}var xd=(()=>{class n extends CM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=$z(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=lie(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ge("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fs([uie]),Hr]})}return n})(),Xw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue($z(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(lr),re(hs),re(xd,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),die={provide:Jw,useExisting:ls(()=>qz),multi:!0};function Mz(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function hie(n){return n.split(":")[0]}var qz=(()=>{class n extends CM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=hie(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ge("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fs([die]),Hr]})}return n})(),eE=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Mz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Mz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(lr),re(hs),re(qz,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var fie=(()=>{class n{_validator=Iz;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Iz,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,features:[ur]})}return n})();var pie={provide:SM,useExisting:ls(()=>Uc),multi:!0};var Uc=(()=>{class n extends fie{required;inputName="required";normalizeInput=Do;createValidator=t=>Ure;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Rh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[fs([pie]),Hr]})}return n})();var gie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({})}return n})();var ca=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RM,useValue:t.callSetDisabledState??MM}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({imports:[gie]})}return n})();var mie=["*"],Lp=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Nt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(zn(t=>{let r=new Me(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let s=t.addListener(e,o=>{this._ngZone.run(()=>i.next(o))});if(!s){i.complete();return}return this._listeners.push(s),()=>s.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Op={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Hz="500px",Gz="500px",nE=(()=>{class n{_elementRef=j(lr);_ngZone=j(Pe);_eventManager=new Lp(j(Pe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Hz;width=Gz;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||Op}_options=Op;mapInitialized=new dt;authFailure=new dt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=j(bi);if(this._isBrowser=lb(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(vn(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":Wz(this.height)||Hz,t.width=this.width===null?"":Wz(this.width)||Gz}}_combineOptions(){let t=this._options||{};return oe(z({},t),{center:this._center||t.center||Op.center,zoom:this._zoom??t.zoom??Op.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||Op.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=At({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[ur],ngContentSelectors:mie,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(DO(),Rt(0,"div",0),AO(1))},encapsulation:2,changeDetection:0})}return n})(),yie=/([A-Za-z%]+)$/;function Wz(n){return n==null?"":yie.test(n)?n:`${n}px`}var Kz=(()=>{class n{_googleMap=j(nE);_elementRef=j(lr);_ngZone=j(Pe);_eventManager=new Lp(j(Pe));_options=new Nt({});_position=new Nt(void 0);_destroy=new Ct;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new dt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(vn(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let s=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==s||!s)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:s,shouldFocus:r}))}_combineOptions(){return xa([this._options,this._position]).pipe(we(([t,r])=>oe(z({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Tu(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(Tu(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var _ie=new Q("MAP_MARKER"),vie={position:{lat:37.421995,lng:-122.084092}},Qz=(()=>{class n{_googleMap=j(nE);_ngZone=j(Pe);_eventManager=new Lp(j(Pe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new dt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:s,_label:o,_clickable:a,_icon:c,_visible:d}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&s&&r.setPosition(s),t.label&&o!==void 0&&r.setLabel(o),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&d!==void 0&&r.setVisible(d))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(vn(1)).toPromise()}_combineOptions(){let t=this._options||vie;return oe(z({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[fs([{provide:_ie,useExisting:n}]),ur]})}return n})();var Yz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({})}return n})();function Eie(n,e){n&1&&(M(0,"p",15),x(1," \u{1F4CD} Deine Position wird angezeigt "),P())}function Iie(n,e){n&1&&(M(0,"p",16),x(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),P())}function bie(n,e){if(n&1){let t=Lt();M(0,"div",19)(1,"h4"),x(2),P(),M(3,"p")(4,"strong"),x(5),Gr(6,"titlecase"),P()(),M(7,"p"),x(8),P(),M(9,"p"),x(10),P(),M(11,"button",20),ge("click",function(){ke(t);let i=pe().$implicit,s=pe();return Ne(s.getDirections(i.shop))}),x(12," \u{1F697} Route berechnen "),P()()}if(n&2){let t=pe().$implicit;B(2),tn(t.shop.name),B(3),tn(Wr(6,4,t.shop.type)),B(3),ct("\u{1F4CD} ",t.shop.address.split(",")[0],""),B(2),ct("\u2B50 ",t.shop.rating,"/5")}}function Tie(n,e){n&1&&(M(0,"div",19)(1,"h4"),x(2,"\u{1F4CD} Deine Position"),P(),M(3,"p"),x(4,"Du bist hier"),P()())}function Cie(n,e){if(n&1){let t=Lt();M(0,"map-marker",17),ge("mapClick",function(){let i=ke(t).$implicit,s=pe();return Ne(s.onMarkerClick(i))}),M(1,"map-info-window"),Oe(2,bie,13,6,"div",18)(3,Tie,5,0,"div",18),P()()}if(n&2){let t=e.$implicit,r=pe();Z("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),B(2),Z("ngIf",t.shop),B(),Z("ngIf",t.isUserLocation)}}var rE=class n{afroshops=[];userLocation=null;shopSelected=new dt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=oe(z({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[ur],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"h3"),x(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),P(),Oe(4,Eie,2,0,"p",2)(5,Iie,2,0,"p",3),P(),M(6,"google-map",4),Oe(7,Cie,4,5,"map-marker",5),P(),M(8,"div",6)(9,"h4"),x(10,"Legende"),P(),M(11,"div",7)(12,"div",8)(13,"span",9),x(14,"\u{1F37D}\uFE0F"),P(),M(15,"span"),x(16,"Restaurants"),P()(),M(17,"div",8)(18,"span",10),x(19,"\u{1F6D2}"),P(),M(20,"span"),x(21,"Lebensmittel"),P()(),M(22,"div",8)(23,"span",11),x(24,"\u2702\uFE0F"),P(),M(25,"span"),x(26,"Friseure"),P()(),M(27,"div",8)(28,"span",12),x(29,"\u{1F457}"),P(),M(30,"span"),x(31,"Mode"),P()(),M(32,"div",8)(33,"span",13),x(34,"\u{1F3E6}"),P(),M(35,"span"),x(36,"Services"),P()(),M(37,"div",8)(38,"span",14),x(39,"\u{1F4CD}"),P(),M(40,"span"),x(41,"Deine Position"),P()()()()()),t&2&&(B(4),Z("ngIf",r.userLocation),B(),Z("ngIf",!r.userLocation),B(),Z("options",r.mapOptions)("width","100%")("height","400px"),B(),Z("ngForOf",r.markers))},dependencies:[En,Xu,kn,Ga,Yz,nE,Kz,Qz],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var kd=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(s=>i.address.toLowerCase().includes(s.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var la=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=Lc(this.firestore,"afroshops");return ot(zj(e)).pipe(we(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(s=>{let o=s.data();o.id=s.id,r.push(o)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(s=>s.name));let i=r.map(s=>this.mapFirebaseDocToAfroshopData(s));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(s=>s.name)),i.sort((s,o)=>s.name.localeCompare(o.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("city","==",e.toLowerCase()),Uw("name"));return Ip(r,{idField:"id"})}getAfroshopsByType(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("type","==",e),Uw("rating","desc"));return Ip(r,{idField:"id"})}getAfroshopById(e){return b(this,null,function*(){try{let t=bp(this.firestore,"afroshops",e),r=yield jj(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(oe(z({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return b(this,null,function*(){let t=Lc(this.firestore,"afroshops"),r=oe(z({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield Uj(t,r)).id})}updateAfroshop(e,t){return b(this,null,function*(){let r=bp(this.firestore,"afroshops",e),i=oe(z({},t),{updatedAt:new Date});yield uM(r,i)})}deleteAfroshop(e){return b(this,null,function*(){let t=bp(this.firestore,"afroshops",e);yield Bj(t)})}searchAfroshops(e){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("name",">=",e),bd("name","<=",e+"\uF8FF"),cM(20));return Ip(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=Lc(this.firestore,"afroshops"),r=Tp(t,bd("verified","==",!0),Uw("rating","desc"),cM(e));return Ip(r,{idField:"id"})}incrementViews(e){return b(this,null,function*(){try{let t=bp(this.firestore,"afroshops",e);yield uM(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return b(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let s=wz(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",s),console.log("\u2B06\uFE0F Upload en cours...");let o=yield Ez(s,e);console.log("\u2705 Upload termin\xE9, snapshot:",o),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield _z(o.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(ce(Oc),ce(Fc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mn=class n{constructor(e){this.auth=e;this.user$=PV(this.auth)}user$;register(e,t,r){return b(this,null,function*(){try{let i=yield xV(this.auth,e,t);return r&&i.user&&(yield FV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return b(this,null,function*(){try{let r=yield NV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return b(this,null,function*(){try{let e=new xC;e.setCustomParameters({prompt:"select_account"}),this.checkPopupSupport();let t=yield OV(this.auth,e);return{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("Erreur lors de la connexion Google:",e),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return b(this,null,function*(){try{yield LV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Une erreur est survenue";if(e.code)switch(e.code){case"auth/email-already-in-use":t="Cette adresse email est d\xE9j\xE0 utilis\xE9e";break;case"auth/weak-password":t="Le mot de passe doit contenir au moins 6 caract\xE8res";break;case"auth/invalid-email":t="Adresse email invalide";break;case"auth/user-not-found":t="Aucun compte associ\xE9 \xE0 cette adresse email";break;case"auth/wrong-password":t="Mot de passe incorrect";break;case"auth/too-many-requests":t="Trop de tentatives. Veuillez r\xE9essayer plus tard";break;case"auth/user-disabled":t="Ce compte a \xE9t\xE9 d\xE9sactiv\xE9";break;case"auth/operation-not-allowed":t="Cette op\xE9ration n'est pas autoris\xE9e";break;case"auth/popup-closed-by-user":t="Connexion annul\xE9e par l'utilisateur";break;case"auth/popup-blocked":t="Popup bloqu\xE9e par le navigateur. Veuillez autoriser les popups pour AfroConnect";break;case"popup-blocked":t="Popups bloqu\xE9es. Autorisez les popups pour vous connecter avec Google";break;case"auth/cancelled-popup-request":t="Demande de connexion annul\xE9e";break;default:t=e.message||"Erreur d'authentification"}return new Error(t)}static \u0275fac=function(t){return new(t||n)(ce(pc))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var iE=class n{constructor(){}getCurrentPosition(){return new Me(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new Me(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let s={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(s)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let o=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Die(n,e){if(n&1){let t=Lt();M(0,"div",42)(1,"button",43),ge("click",function(){ke(t);let i=pe();return Ne(i.goToAddAfroshop())}),x(2," \u2795 Afroshop hinzuf\xFCgen "),P()()}}function Aie(n,e){if(n&1){let t=Lt();M(0,"div",42)(1,"button",44),ge("click",function(){ke(t);let i=pe();return Ne(i.addNewAfroshop())}),x(2," \u{1F510} Anmelden zum Hinzuf\xFCgen "),P()()}}function Rie(n,e){if(n&1&&(M(0,"span",50),x(1),P()),n&2){let t=pe(2);B(),ct("um ",t.getSelectedCityName(),"")}}function Mie(n,e){n&1&&(M(0,"span",51),x(1,"um deinen Standort"),P())}function Pie(n,e){if(n&1&&(M(0,"div",45)(1,"div",46),x(2," \u{1F3AF} Suche in 50km Umkreis "),Oe(3,Rie,2,1,"span",47)(4,Mie,2,0,"span",48),P(),M(5,"div",49),x(6),P()()),n&2){let t=pe();B(3),Z("ngIf",t.selectedCity),B(),Z("ngIf",!t.selectedCity),B(2),Ju(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function xie(n,e){if(n&1){let t=Lt();M(0,"div",52)(1,"app-map",53),ge("shopSelected",function(i){ke(t);let s=pe();return Ne(s.viewAfroshopDetail(i))}),P()()}if(n&2){let t=pe();B(),Z("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function kie(n,e){if(n&1){let t=Lt();M(0,"button",71),ge("click",function(i){ke(t);let s=pe().$implicit,o=pe(2);return Ne(o.editAfroshop(i,s.id))}),x(1," \u270F\uFE0F "),P()}}function Nie(n,e){if(n&1&&(M(0,"div",72),x(1),P()),n&2){let t=pe().$implicit,r=pe(2);B(),ct(" \u{1F3AF} ",r.getDistanceFromUser(t)," ")}}function Oie(n,e){if(n&1){let t=Lt();M(0,"div",56)(1,"div",57),ge("click",function(){let i=ke(t).$implicit,s=pe(2);return Ne(s.viewAfroshopDetail(i.id))}),M(2,"img",58),ge("error",function(i){let s=ke(t).$implicit,o=pe(2);return Ne(o.onImageError(i,s.type))}),P(),M(3,"div",59),x(4),P(),Oe(5,kie,2,0,"button",60),M(6,"div",61)(7,"span",62),x(8,"\u{1F4CD} Details ansehen"),P()()(),M(9,"div",63)(10,"h3",64),x(11),P(),M(12,"p",65),x(13),P(),M(14,"div",66)(15,"span",67),x(16),P(),M(17,"span",68),x(18),P(),M(19,"span",69),x(20),Gr(21,"titlecase"),P()(),Oe(22,Nie,2,1,"div",70),P()()}if(n&2){let t=e.$implicit,r=pe(2);B(2),Z("src",t.image||r.getDefaultImage(t.type),bo)("alt",t.name),B(),gy(t.type),B(),ct(" ",r.getTypeIcon(t.type)," "),B(),Z("ngIf",r.canEditAfroshop(t)),B(6),tn(t.name),B(2),ct("\u{1F4CD} ",r.getLocationDisplay(t.address),""),B(3),ct("\u2B50 ",t.rating,""),B(2),tn(r.getPriceLevel(t.priceLevel)),B(2),tn(Wr(21,12,t.type)),B(2),Z("ngIf",r.userLocation)}}function Lie(n,e){if(n&1&&(M(0,"div",54),Oe(1,Oie,23,14,"div",55),P()),n&2){let t=pe();B(),Z("ngForOf",t.filteredAfroshops)}}function Fie(n,e){if(n&1){let t=Lt();M(0,"div",73)(1,"div",74)(2,"div",75),x(3,"\u{1F50D}"),P(),M(4,"h3"),x(5,"Kein Gesch\xE4ft gefunden"),P(),M(6,"p"),x(7,"Kein Afroshop entspricht deinen Suchkriterien"),P(),M(8,"button",76),ge("click",function(){ke(t);let i=pe();return Ne(i.clearSearch())}),x(9," Alle Gesch\xE4fte anzeigen "),P()()()}}var sE=class n{constructor(e,t,r,i,s){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.router=i;this.geolocationService=s;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){this.userLocation=this.cityCoordinates.berlin,this.selectedCity="berlin",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\uFFFD Standard-Standort aktiviert

Berlin wurde als dein Standort gew\xE4hlt.

\u{1F3AF} Du kannst jederzeit:
\u2022 Eine andere Stadt suchen
\u2022 Aus der Liste w\xE4hlen
\u2022 "\u{1F4E1} Mein Standort" nochmal probieren`)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return b(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],s=parseFloat(i.lat),o=parseFloat(i.lon);if(!isNaN(s)&&!isNaN(o)){this.userLocation={lat:s,lng:o},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${s.toFixed(4)}, ${o.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return oe(z({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=oe(z({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[s,o]of Object.entries(r))if(t.includes(s))return o;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[s,o]of Object.entries(i))if(e.includes(s))return o;return null}static \u0275fac=function(t){return new(t||n)(re(kd),re(la),re(Mn),re(vt),re(iE))};static \u0275cmp=At({type:n,selectors:[["app-gallery"]],decls:74,vars:16,consts:[[1,"gallery-container"],[1,"gallery-header"],[1,"header-content"],[1,"header-text"],["class","header-actions",4,"ngIf"],[1,"filter-container","unified-control-group"],["for","type-filter",1,"unified-label"],[1,"unified-input-group"],["id","type-filter",1,"unified-select",3,"ngModelChange","change","ngModel"],["value",""],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],[1,"unified-spacer"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"city-search-controls","unified-control-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt, z.B. Aachen, Regensburg, Freiburg...",1,"unified-input",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn",3,"click","disabled"],[1,"quick-cities","unified-control-group"],[1,"unified-label"],[1,"unified-select",3,"ngModelChange","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn",3,"click","disabled"],[1,"location-actions"],["title","GPS aktivieren und Standort verwenden",1,"location-btn",3,"click"],[1,"location-hint"],["class","radius-info",4,"ngIf"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"header-actions"],["title","Neuen Afroshop hinzuf\xFCgen",1,"add-afroshop-btn","primary",3,"click"],["title","Anmelden um einen Afroshop hinzuzuf\xFCgen",1,"add-afroshop-btn","disabled",3,"click"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),x(5),P()(),Oe(6,Die,3,0,"div",4),Gr(7,"async"),Oe(8,Aie,3,0,"div",4),Gr(9,"async"),P(),M(10,"div",5)(11,"label",6),x(12,"Nach Typ filtern:"),P(),M(13,"div",7)(14,"select",8),pt("ngModelChange",function(s){return yt(r.selectedType,s)||(r.selectedType=s),s}),ge("change",function(){return r.onTypeFilterChange()}),M(15,"option",9),x(16,"Alle Typen"),P(),M(17,"option",10),x(18,"\u{1F37D}\uFE0F Restaurants"),P(),M(19,"option",11),x(20,"\u{1F6D2} Lebensmittelgesch\xE4fte"),P(),M(21,"option",12),x(22,"\u2702\uFE0F Friseure"),P(),M(23,"option",13),x(24,"\u{1F457} Mode"),P(),M(25,"option",14),x(26,"\u{1F3E6} Dienstleistungen"),P()(),Rt(27,"div",15),P()(),M(28,"div",16)(29,"label",17),x(30,"\u{1F4CD} Deine Stadt:"),P(),M(31,"div",18)(32,"div",7)(33,"input",19),pt("ngModelChange",function(s){return yt(r.customCityName,s)||(r.customCityName=s),s}),ge("keyup.enter",function(){return r.searchCity()}),P(),M(34,"button",20),ge("click",function(){return r.searchCity()}),x(35," \u{1F50D} Suchen "),P()()(),M(36,"div",21)(37,"label",22),x(38,"Oder w\xE4hlen:"),P(),M(39,"div",7)(40,"select",23),pt("ngModelChange",function(s){return yt(r.selectedCity,s)||(r.selectedCity=s),s}),M(41,"option",9),x(42,"Bitte Stadt w\xE4hlen"),P(),M(43,"option",24),x(44,"Berlin"),P(),M(45,"option",25),x(46,"Hamburg"),P(),M(47,"option",26),x(48,"M\xFCnchen"),P(),M(49,"option",27),x(50,"K\xF6ln"),P(),M(51,"option",28),x(52,"Frankfurt am Main"),P(),M(53,"option",29),x(54,"Stuttgart"),P(),M(55,"option",30),x(56,"D\xFCsseldorf"),P(),M(57,"option",31),x(58,"Dortmund"),P(),M(59,"option",32),x(60,"Essen"),P(),M(61,"option",33),x(62,"Leipzig"),P()(),M(63,"button",34),ge("click",function(){return r.onCityChange()}),x(64," \u2713 Best\xE4tigen "),P()()(),M(65,"div",35)(66,"button",36),ge("click",function(){return r.useCurrentLocation()}),x(67," \u{1F4E1} GPS aktivieren "),P(),M(68,"small",37),x(69," \u{1F3AF} Findet automatisch Afroshops in deiner N\xE4he "),P()()(),Oe(70,Pie,7,4,"div",38),P()(),Oe(71,xie,2,2,"div",39)(72,Lie,2,1,"div",40)(73,Fie,10,0,"div",41)),t&2&&(B(5),ct("\u{1F30D} Entdecke ",r.filteredAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he"),B(),Z("ngIf",Wr(7,12,r.user$)),B(2),Z("ngIf",!Wr(9,14,r.user$)),B(6),ft("ngModel",r.selectedType),B(19),ft("ngModel",r.customCityName),B(),Z("disabled",!r.customCityName||!r.customCityName.trim()),B(6),ft("ngModel",r.selectedCity),B(23),Z("disabled",!r.selectedCity),B(7),Z("ngIf",r.userLocation&&(r.selectedCity||r.filteredAfroshops.length<r.allAfroshops.length)),B(),Z("ngIf",r.showMap&&r.filteredAfroshops.length>0),B(),Z("ngIf",!r.showMap&&r.filteredAfroshops.length>0),B(),Z("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[En,Xu,kn,kh,Ga,ca,Xw,eE,Hi,xd,aa,js,rE],styles:[".gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:center}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:none;margin:0}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}"]})};function Vie(n,e){if(n&1){let t=Lt();M(0,"button",24),ge("click",function(){ke(t);let i=pe(2);return Ne(i.editAfroshop())}),x(1," \u270F\uFE0F Bearbeiten "),P()}}function Uie(n,e){if(n&1){let t=Lt();M(0,"div")(1,"img",25),ge("error",function(i){ke(t);let s=pe(2);return Ne(s.onImageError(i))}),P()()}if(n&2){let t=pe(2);B(),Z("src",t.afroshop.image,bo)("alt",t.afroshop.name)}}function Bie(n,e){if(n&1&&(M(0,"div",26)(1,"div",27),x(2,"\u{1F4F7}"),P(),M(3,"p"),x(4,"Kein Bild verf\xFCgbar"),P(),M(5,"small"),x(6),P()()),n&2){let t=pe(2);B(6),tn(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function jie(n,e){if(n&1&&(M(0,"div",28),x(1),P()),n&2){let t=pe(2);B(),ct(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function zie(n,e){if(n&1){let t=Lt();M(0,"div",3)(1,"div",4)(2,"button",5),ge("click",function(){ke(t);let i=pe();return Ne(i.goBack())}),x(3," \u2190 Zur\xFCck zur \xDCbersicht "),P(),Oe(4,Vie,2,0,"button",6),P(),M(5,"div",7)(6,"div",8),Oe(7,Uie,2,2,"div",9)(8,Bie,7,1,"ng-template",null,0,xO),M(10,"div",10),x(11),Gr(12,"titlecase"),P()(),M(13,"div",11)(14,"h1"),x(15),P(),M(16,"div",12)(17,"div",13),x(18),P(),Oe(19,jie,2,1,"div",14),P(),M(20,"div",15)(21,"div",16)(22,"strong"),x(23,"\u{1F4CD} Adresse:"),P(),M(24,"p"),x(25),P()(),M(26,"div",16)(27,"strong"),x(28,"\u{1F4DE} Telefon:"),P(),M(29,"p")(30,"a",17),x(31),P()()(),M(32,"div",16)(33,"strong"),x(34,"\u{1F552} \xD6ffnungszeiten:"),P(),M(35,"p"),x(36),P()()(),M(37,"div",18)(38,"h3"),x(39,"\xDCber uns"),P(),M(40,"p"),x(41),P()(),M(42,"div",19)(43,"button",20),ge("click",function(){ke(t);let i=pe();return Ne(i.callPhone(i.afroshop.phone))}),x(44," \u{1F4DE} Anrufen "),P(),M(45,"button",21),ge("click",function(){ke(t);let i=pe();return Ne(i.openInMaps())}),x(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),P(),M(47,"button",22),ge("click",function(){ke(t);let i=pe();return Ne(i.getDirections())}),x(48," \u{1F9ED} Route "),P(),M(49,"button",23),ge("click",function(){ke(t);let i=pe();return Ne(i.goBack())}),x(50," \u2190 Zur\xFCck "),P()()()()()}if(n&2){let t=Mh(9),r=pe();B(4),Z("ngIf",r.canEdit()),B(3),Z("ngIf",r.afroshop.image)("ngIfElse",t),B(3),gy(r.afroshop.type),B(),Ju(" ",r.getTypeIcon(r.afroshop.type)," ",Wr(12,17,r.afroshop.type)," "),B(4),tn(r.afroshop.name),B(3),Ju(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),B(),Z("ngIf",r.afroshop.cuisine),B(6),tn(r.afroshop.address),B(5),tb("href","tel:",r.afroshop.phone,"",bo),B(),ct(" ",r.afroshop.phone," "),B(5),tn(r.afroshop.hours),B(5),tn(r.afroshop.description)}}function $ie(n,e){if(n&1){let t=Lt();M(0,"div",29)(1,"h2"),x(2,"\u274C Gesch\xE4ft nicht gefunden"),P(),M(3,"p"),x(4,"Das gesuchte Gesch\xE4ft existiert nicht."),P(),M(5,"button",5),ge("click",function(){ke(t);let i=pe();return Ne(i.goBack())}),x(6," \u2190 Zur\xFCck zur \xDCbersicht "),P()()}}var oE=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=s}afroshop;shopId="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop)):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getDirections(){if(this.afroshop){let e=`https://www.google.com/maps/dir/?api=1&destination=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(re(In),re(vt),re(kd),re(la),re(Mn))};static \u0275cmp=At({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"error-container"]],template:function(t,r){t&1&&Oe(0,zie,51,19,"div",1)(1,$ie,7,0,"div",2),t&2&&(Z("ngIf",r.afroshop),B(),Z("ngIf",!r.afroshop))},dependencies:[En,kn,Ga],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md)}.image-section[_ngcontent-%COMP%]{order:1}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.contact-item[_ngcontent-%COMP%]{text-align:left}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}"]})};function qie(n,e){n&1&&(M(0,"span"),x(1,"\u{1F4E5} Importieren"),P())}function Hie(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 L\xE4dt..."),P())}function Gie(n,e){if(n&1&&(M(0,"div",51),x(1),P()),n&2){let t=pe();B(),ct(" \u2705 ",t.successMessage," ")}}function Wie(n,e){if(n&1&&(M(0,"div",52),x(1),P()),n&2){let t=pe();B(),ct(" \u274C ",t.errorMessage," ")}}function Kie(n,e){n&1&&(M(0,"span"),x(1,"\u{1F4C1} Bild ausw\xE4hlen"),P())}function Qie(n,e){n&1&&(M(0,"span"),x(1,"\u{1F504} Anderes Bild w\xE4hlen"),P())}function Yie(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 Wird bearbeitet..."),P())}function Jie(n,e){n&1&&(M(0,"div",53)(1,"div",54),Rt(2,"div",55),P(),M(3,"small"),x(4,"Bild wird komprimiert und vorbereitet..."),P()())}function Zie(n,e){if(n&1){let t=Lt();M(0,"div",56),Rt(1,"img",57),M(2,"button",58),ge("click",function(){ke(t);let i=pe(),s=Mh(48);return i.imagePreview=null,i.selectedFile=null,Ne(s.value="")}),x(3," \u2715 "),P()()}if(n&2){let t=pe();B(),Z("src",t.imagePreview,bo)}}function Xie(n,e){if(n&1){let t=Lt();M(0,"div",5)(1,"label",59),x(2,"K\xFCche"),P(),M(3,"input",60),pt("ngModelChange",function(i){ke(t);let s=pe();return yt(s.afroshop.cuisine,i)||(s.afroshop.cuisine=i),Ne(i)}),P()()}if(n&2){let t=pe();B(3),ft("ngModel",t.afroshop.cuisine)}}function ese(n,e){if(n&1&&(M(0,"span"),x(1),P()),n&2){let t=pe();B(),tn(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function tse(n,e){n&1&&(M(0,"span"),x(1,"\u{1F4E4} Bild wird hochgeladen..."),P())}function nse(n,e){if(n&1&&(M(0,"span"),x(1),P()),n&2){let t=pe();B(),tn(t.isEditMode?"\u2705 Speichern":"\u2705 Afroshop hinzuf\xFCgen")}}var Fp=class n{constructor(e,t,r,i){this.firebaseService=e;this.authService=t;this.router=r;this.route=i}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;successMessage="";errorMessage="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return b(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return b(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=s=>{this.imagePreview=s.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return b(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(o=>{e.toBlob(a=>o(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let s=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",s),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target.result,o.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=1200,h=1200,g=o.width,E=o.height;g>E?g>d&&(E*=d/g,g=d):E>h&&(g*=h/E,E=h),a.width=g,a.height=E,c?.drawImage(o,0,0,g,E),a.toBlob(I=>{if(I){let k=new File([I],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},o.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return b(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return b(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage());let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=oe(z({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=oe(z({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Name ist erforderlich",!1)}setCoordinatesFromAddress(){if(this.afroshop.coordinates.lat===0&&this.afroshop.coordinates.lng===0){let e={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}},t=this.afroshop.address.toLowerCase();for(let[r,i]of Object.entries(e))if(t.includes(r)){this.afroshop.coordinates=i,console.log(`Coordonn\xE9es d\xE9finies automatiquement pour ${r}:`,i);break}}}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return b(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return b(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return b(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|münchen|köln|frankfurt|dortmund|essen|düsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return b(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(s=>s&&s!=="www.facebook.com"&&s!=="facebook.com"&&s!=="p"&&!s.match(/^\d+$/)&&s.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return b(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(re(la),re(Mn),re(vt),re(In))};static \u0275cmp=At({type:n,selectors:[["app-add-afroshop"]],decls:105,vars:29,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","restaurant"],["value","epicerie"],["value","coiffeur"],["value","vetement"],["value","services"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["for","hours"],["type","text","id","hours","name","hours","placeholder","z.B. Mo-So: 12:00-22:00",1,"form-input",3,"ngModelChange","ngModel"],["for","website"],["type","url","id","website","name","website","placeholder","https://example.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],["type","url","id","image","name","image","placeholder","https://beispiel.com/bild.jpg",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[1,"message","success"],[1,"message","error"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische",1,"form-input",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=Lt();M(0,"div",1)(1,"div",2)(2,"h2"),x(3),P(),M(4,"p"),x(5),P()(),M(6,"form",3),ge("ngSubmit",function(){return ke(i),Ne(r.onSubmit())}),M(7,"div",4)(8,"h3"),x(9,"\u{1F517} Schnell hinzuf\xFCgen"),P(),M(10,"p"),x(11,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),P(),M(12,"div",5)(13,"label",6),x(14,"Google Maps, Facebook, Nextdoor oder Website URL"),P(),M(15,"div",7)(16,"input",8),pt("ngModelChange",function(o){return ke(i),yt(r.importUrl,o)||(r.importUrl=o),Ne(o)}),P(),M(17,"button",9),ge("click",function(){return ke(i),Ne(r.importFromUrl())}),Oe(18,qie,2,0,"span",10)(19,Hie,2,0,"span",10),P()()(),M(20,"div",11)(21,"span"),x(22,"oder manuell eingeben"),P()()(),Oe(23,Gie,2,1,"div",12)(24,Wie,2,1,"div",13),M(25,"div",5)(26,"label",14),x(27,"Name des Gesch\xE4fts *"),P(),M(28,"input",15),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.name,o)||(r.afroshop.name=o),Ne(o)}),P()(),M(29,"div",5)(30,"label",16),x(31,"Typ *"),P(),M(32,"select",17),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.type,o)||(r.afroshop.type=o),Ne(o)}),M(33,"option",18),x(34,"\u{1F37D}\uFE0F Restaurant"),P(),M(35,"option",19),x(36,"\u{1F6D2} Lebensmittelgesch\xE4ft"),P(),M(37,"option",20),x(38,"\u2702\uFE0F Friseur"),P(),M(39,"option",21),x(40,"\u{1F457} Mode"),P(),M(41,"option",22),x(42,"\u{1F3E6} Dienstleistungen"),P()()(),M(43,"div",5)(44,"label",23),x(45,"\u{1F4F8} Bild hochladen"),P(),M(46,"div",24)(47,"input",25,0),ge("change",function(o){return ke(i),Ne(r.onFileSelected(o))}),P(),M(49,"button",26),ge("click",function(){ke(i);let o=Mh(48);return Ne(o.click())}),Oe(50,Kie,2,0,"span",10)(51,Qie,2,0,"span",10)(52,Yie,2,0,"span",10),P(),Oe(53,Jie,5,0,"div",27)(54,Zie,4,1,"div",28),M(55,"small",29),x(56,"Max. 5MB - Wird automatisch komprimiert und optimiert"),P()()(),M(57,"div",5)(58,"label",30),x(59,"Adresse *"),P(),M(60,"input",31),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.address,o)||(r.afroshop.address=o),Ne(o)}),P(),M(61,"small"),x(62,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),P()(),M(63,"div",5)(64,"label",32),x(65,"Telefon *"),P(),M(66,"input",33),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.phone,o)||(r.afroshop.phone=o),Ne(o)}),P()(),M(67,"div",5)(68,"label",34),x(69,"Beschreibung *"),P(),M(70,"textarea",35),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.description,o)||(r.afroshop.description=o),Ne(o)}),P()(),Oe(71,Xie,4,1,"div",36),M(72,"div",5)(73,"label",37),x(74,"\xD6ffnungszeiten"),P(),M(75,"input",38),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.hours,o)||(r.afroshop.hours=o),Ne(o)}),P()(),M(76,"div",5)(77,"label",39),x(78,"Website"),P(),M(79,"input",40),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.website,o)||(r.afroshop.website=o),Ne(o)}),P()(),M(80,"div",5)(81,"label",41),x(82,"Preisstufe"),P(),M(83,"select",42),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.priceLevel,o)||(r.afroshop.priceLevel=o),Ne(o)}),M(84,"option",43),x(85,"\u20AC - G\xFCnstig"),P(),M(86,"option",44),x(87,"\u20AC\u20AC - Moderat"),P(),M(88,"option",45),x(89,"\u20AC\u20AC\u20AC - Gehoben"),P(),M(90,"option",46),x(91,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig"),P()()(),M(92,"div",5)(93,"label",23),x(94,"Bild URL"),P(),M(95,"input",47),pt("ngModelChange",function(o){return ke(i),yt(r.afroshop.image,o)||(r.afroshop.image=o),Ne(o)}),P(),M(96,"small"),x(97,"Optional: Link zu einem Bild des Gesch\xE4fts"),P()(),M(98,"div",48)(99,"button",49),ge("click",function(){return ke(i),Ne(r.goBack())}),x(100," Abbrechen "),P(),M(101,"button",50),Oe(102,ese,2,1,"span",10)(103,tse,2,0,"span",10)(104,nse,2,1,"span",10),P()()()()}t&2&&(B(3),tn(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),B(2),tn(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),B(11),ft("ngModel",r.importUrl),B(),Z("disabled",!r.importUrl||r.isImporting),B(),Z("ngIf",!r.isImporting),B(),Z("ngIf",r.isImporting),B(4),Z("ngIf",r.successMessage),B(),Z("ngIf",r.errorMessage),B(4),ft("ngModel",r.afroshop.name),B(4),ft("ngModel",r.afroshop.type),B(17),Z("disabled",r.isUploadingImage),B(),Z("ngIf",!r.imagePreview&&!r.isUploadingImage),B(),Z("ngIf",r.imagePreview&&!r.isUploadingImage),B(),Z("ngIf",r.isUploadingImage),B(),Z("ngIf",r.isUploadingImage),B(),Z("ngIf",r.imagePreview),B(6),ft("ngModel",r.afroshop.address),B(6),ft("ngModel",r.afroshop.phone),B(4),ft("ngModel",r.afroshop.description),B(),Z("ngIf",r.afroshop.type==="restaurant"),B(4),ft("ngModel",r.afroshop.hours),B(4),ft("ngModel",r.afroshop.website),B(4),ft("ngModel",r.afroshop.priceLevel),B(12),ft("ngModel",r.afroshop.image),B(4),Z("disabled",r.isSubmitting||r.isUploadingImage),B(2),Z("disabled",r.isSubmitting||r.isUploadingImage),B(),Z("ngIf",r.isSubmitting&&!r.isUploadingImage),B(),Z("ngIf",r.isUploadingImage),B(),Z("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[En,kn,ca,Pd,Xw,eE,Hi,xd,aa,Md,Uc,js,Vc],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:center;margin-top:var(--spacing-xl)}.btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 12px #ff7b004d}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--gray-400);cursor:not-allowed;transform:none;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--gray-200);color:var(--text-primary)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-300)}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.url-input[_ngcontent-%COMP%]{width:100%}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg)}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.image-preview-container[_ngcontent-%COMP%]{max-width:100%}.image-preview[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function rse(n,e){if(n&1&&(M(0,"div",16),x(1),P()),n&2){let t=pe();B(),ct(" ",t.errorMessage," ")}}function ise(n,e){n&1&&(M(0,"span"),x(1,"Anmelden"),P())}function sse(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 Anmeldung..."),P())}function ose(n,e){n&1&&(M(0,"span"),x(1,"\u{1F50D} Mit Google fortfahren"),P())}function ase(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 Google-Anmeldung..."),P())}var aE=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return b(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle();let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(re(Mn),re(vt),re(In))};static \u0275cmp=At({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),x(4,"\u{1F510} Anmeldung"),P(),M(5,"p"),x(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),P()(),M(7,"form",3),ge("ngSubmit",function(){return r.onSubmit()}),M(8,"div",4)(9,"label",5),x(10,"E-Mail-Adresse"),P(),M(11,"input",6),pt("ngModelChange",function(s){return yt(r.email,s)||(r.email=s),s}),P()(),M(12,"div",4)(13,"label",7),x(14,"Passwort"),P(),M(15,"input",8),pt("ngModelChange",function(s){return yt(r.password,s)||(r.password=s),s}),P()(),Oe(16,rse,2,1,"div",9),M(17,"button",10),Oe(18,ise,2,0,"span",11)(19,sse,2,0,"span",11),P()(),M(20,"div",12)(21,"span"),x(22,"oder"),P()(),M(23,"button",13),ge("click",function(){return r.loginWithGoogle()}),Oe(24,ose,2,0,"span",11)(25,ase,2,0,"span",11),P(),M(26,"div",14)(27,"p"),x(28,"Noch kein Konto? "),M(29,"a",15),x(30,"Registrieren"),P()()()()()),t&2&&(B(11),ft("ngModel",r.email),Z("disabled",r.isLoading),B(4),ft("ngModel",r.password),Z("disabled",r.isLoading),B(),Z("ngIf",r.errorMessage),B(),Z("disabled",r.isLoading||!r.email||!r.password),B(),Z("ngIf",!r.isLoading),B(),Z("ngIf",r.isLoading),B(4),Z("disabled",r.isLoading),B(),Z("ngIf",!r.isLoading),B(),Z("ngIf",r.isLoading))},dependencies:[En,kn,ca,Pd,Hi,aa,Md,Uc,js,Vc,ec,Oo],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function cse(n,e){if(n&1&&(M(0,"div",20),x(1),P()),n&2){let t=pe();B(),ct(" ",t.errorMessage," ")}}function use(n,e){n&1&&(M(0,"span"),x(1,"Registrieren"),P())}function lse(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 Registrierung..."),P())}function dse(n,e){n&1&&(M(0,"span"),x(1,"\u{1F50D} Mit Google fortfahren"),P())}function hse(n,e){n&1&&(M(0,"span"),x(1,"\u23F3 Google-Anmeldung..."),P())}var cE=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return b(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(re(Mn),re(vt))};static \u0275cmp=At({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),x(4,"\u{1F4DD} Registrierung"),P(),M(5,"p"),x(6,"Erstellen Sie Ihr AfroConnect-Konto"),P()(),M(7,"form",3),ge("ngSubmit",function(){return r.onSubmit()}),M(8,"div",4)(9,"label",5),x(10,"Anzeigename"),P(),M(11,"input",6),pt("ngModelChange",function(s){return yt(r.displayName,s)||(r.displayName=s),s}),P()(),M(12,"div",4)(13,"label",7),x(14,"E-Mail-Adresse"),P(),M(15,"input",8),pt("ngModelChange",function(s){return yt(r.email,s)||(r.email=s),s}),P()(),M(16,"div",4)(17,"label",9),x(18,"Passwort"),P(),M(19,"input",10),pt("ngModelChange",function(s){return yt(r.password,s)||(r.password=s),s}),P()(),M(20,"div",4)(21,"label",11),x(22,"Passwort best\xE4tigen"),P(),M(23,"input",12),pt("ngModelChange",function(s){return yt(r.confirmPassword,s)||(r.confirmPassword=s),s}),P()(),Oe(24,cse,2,1,"div",13),M(25,"button",14),Oe(26,use,2,0,"span",15)(27,lse,2,0,"span",15),P()(),M(28,"div",16)(29,"span"),x(30,"oder"),P()(),M(31,"button",17),ge("click",function(){return r.loginWithGoogle()}),Oe(32,dse,2,0,"span",15)(33,hse,2,0,"span",15),P(),M(34,"div",18)(35,"p"),x(36,"Bereits ein Konto? "),M(37,"a",19),x(38,"Anmelden"),P()()()()()),t&2&&(B(11),ft("ngModel",r.displayName),Z("disabled",r.isLoading),B(4),ft("ngModel",r.email),Z("disabled",r.isLoading),B(4),ft("ngModel",r.password),Z("disabled",r.isLoading),B(4),ft("ngModel",r.confirmPassword),Z("disabled",r.isLoading),B(),Z("ngIf",r.errorMessage),B(),Z("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),B(),Z("ngIf",!r.isLoading),B(),Z("ngIf",r.isLoading),B(4),Z("disabled",r.isLoading),B(),Z("ngIf",!r.isLoading),B(),Z("ngIf",r.isLoading))},dependencies:[En,kn,ca,Pd,Hi,aa,Md,Uc,js,Vc,ec,Oo],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var uE=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-privacy"]],decls:108,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),x(3,"Datenschutzerkl\xE4rung"),P(),M(4,"p",2),x(5),P(),M(6,"section")(7,"h2"),x(8,"1. Verantwortlicher"),P(),M(9,"p"),x(10," AfroConnect"),Rt(11,"br"),x(12," [Ihre Adresse]"),Rt(13,"br"),x(14," [Ihre Stadt, PLZ]"),Rt(15,"br"),x(16," Deutschland"),Rt(17,"br"),x(18," E-Mail: contact@afroconnect.de "),P()(),M(19,"section")(20,"h2"),x(21,"2. Erhobene Daten"),P(),M(22,"h3"),x(23,"2.1 Nutzungsdaten"),P(),M(24,"ul")(25,"li"),x(26,"IP-Adresse"),P(),M(27,"li"),x(28,"Browser-Informationen"),P(),M(29,"li"),x(30,"Zugriffszeitpunkt"),P(),M(31,"li"),x(32,"Besuchte Seiten"),P()(),M(33,"h3"),x(34,"2.2 Standortdaten"),P(),M(35,"p"),x(36," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),P(),M(37,"h3"),x(38,"2.3 Registrierungsdaten"),P(),M(39,"ul")(40,"li"),x(41,"E-Mail-Adresse"),P(),M(42,"li"),x(43,"Benutzername"),P(),M(44,"li"),x(45,"Passwort (verschl\xFCsselt)"),P()()(),M(46,"section")(47,"h2"),x(48,"3. Zweck der Datenverarbeitung"),P(),M(49,"ul")(50,"li"),x(51,"Bereitstellung der App-Funktionen"),P(),M(52,"li"),x(53,"Benutzerauthentifizierung"),P(),M(54,"li"),x(55,"Anzeige lokaler Afroshops"),P(),M(56,"li"),x(57,"Verbesserung der Nutzererfahrung"),P()()(),M(58,"section")(59,"h2"),x(60,"4. Rechtsgrundlage"),P(),M(61,"p"),x(62," Die Verarbeitung erfolgt auf Grundlage von: "),P(),M(63,"ul")(64,"li"),x(65,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),P(),M(66,"li"),x(67,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),P(),M(68,"li"),x(69,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),P()()(),M(70,"section")(71,"h2"),x(72,"5. Datenweitergabe"),P(),M(73,"p"),x(74," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),P(),M(75,"ul")(76,"li"),x(77,"Google Firebase (Hosting und Datenbank)"),P(),M(78,"li"),x(79,"Bei gesetzlicher Verpflichtung"),P()()(),M(80,"section")(81,"h2"),x(82,"6. Speicherdauer"),P(),M(83,"p"),x(84," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),P()(),M(85,"section")(86,"h2"),x(87,"7. Ihre Rechte"),P(),M(88,"ul")(89,"li"),x(90,"Auskunft \xFCber gespeicherte Daten"),P(),M(91,"li"),x(92,"Berichtigung falscher Daten"),P(),M(93,"li"),x(94,"L\xF6schung Ihrer Daten"),P(),M(95,"li"),x(96,"Einschr\xE4nkung der Verarbeitung"),P(),M(97,"li"),x(98,"Daten\xFCbertragbarkeit"),P(),M(99,"li"),x(100,"Widerspruch gegen Verarbeitung"),P()()(),M(101,"section")(102,"h2"),x(103,"8. Kontakt"),P(),M(104,"p"),x(105," Bei Fragen zum Datenschutz kontaktieren Sie uns unter:"),Rt(106,"br"),x(107," E-Mail: privacy@afroconnect.de "),P()()()()),t&2&&(B(5),ct("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var lE=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-terms"]],decls:94,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),x(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),P(),M(4,"p",2),x(5),P(),M(6,"section")(7,"h2"),x(8,"\xA7 1 Geltungsbereich"),P(),M(9,"p"),x(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),P()(),M(11,"section")(12,"h2"),x(13,"\xA7 2 Beschreibung der Dienstleistung"),P(),M(14,"p"),x(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),P(),M(16,"h3"),x(17,"2.1 Funktionen"),P(),M(18,"ul")(19,"li"),x(20,"Suche nach Afroshops in der N\xE4he"),P(),M(21,"li"),x(22,"Detailinformationen zu Gesch\xE4ften"),P(),M(23,"li"),x(24,"Bewertungen und Kommentare"),P(),M(25,"li"),x(26,"Kartenansicht und Navigation"),P()()(),M(27,"section")(28,"h2"),x(29,"\xA7 3 Nutzerkonto"),P(),M(30,"h3"),x(31,"3.1 Registrierung"),P(),M(32,"p"),x(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),P(),M(34,"h3"),x(35,"3.2 Passwort und Sicherheit"),P(),M(36,"p"),x(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),P()(),M(38,"section")(39,"h2"),x(40,"\xA7 4 Nutzungsregeln"),P(),M(41,"p"),x(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),P(),M(43,"ul")(44,"li"),x(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),P(),M(46,"li"),x(47,"Keine beleidigenden oder diskriminierenden Inhalte"),P(),M(48,"li"),x(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),P(),M(50,"li"),x(51,"Die Rechte Dritter zu respektieren"),P()()(),M(52,"section")(53,"h2"),x(54,"\xA7 5 Inhalte und Urheberrecht"),P(),M(55,"h3"),x(56,"5.1 Nutzergenerierte Inhalte"),P(),M(57,"p"),x(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),P(),M(59,"h3"),x(60,"5.2 Verantwortung"),P(),M(61,"p"),x(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),P()(),M(63,"section")(64,"h2"),x(65,"\xA7 6 Haftung"),P(),M(66,"p"),x(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),P()(),M(68,"section")(69,"h2"),x(70,"\xA7 7 \xC4nderungen der AGB"),P(),M(71,"p"),x(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),P()(),M(73,"section")(74,"h2"),x(75,"\xA7 8 K\xFCndigung"),P(),M(76,"p"),x(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),P()(),M(78,"section")(79,"h2"),x(80,"\xA7 9 Anwendbares Recht"),P(),M(81,"p"),x(82," Es gilt deutsches Recht. Gerichtsstand ist [Ihre Stadt], Deutschland. "),P()(),M(83,"section")(84,"h2"),x(85,"\xA7 10 Kontakt"),P(),M(86,"p"),x(87," AfroConnect"),Rt(88,"br"),x(89," [Ihre Adresse]"),Rt(90,"br"),x(91," Deutschland"),Rt(92,"br"),x(93," E-Mail: legal@afroconnect.de "),P()()()()),t&2&&(B(5),ct("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var Vp=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(vn(1),we(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(ce(Mn),ce(vt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zz=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:sE},{path:"afroshop/:id",component:oE},{path:"add-afroshop",component:Fp,canActivate:[Vp]},{path:"edit-afroshop/:id",component:Fp,canActivate:[Vp]},{path:"login",component:aE},{path:"register",component:cE},{path:"privacy",component:uE},{path:"terms",component:lE},{path:"**",redirectTo:"/gallery"}];var Xz={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"}};var e4={providers:[LO({eventCoalescing:!0}),Yb(Zz),l1(u1()),GL(()=>WL(Xz.firebase)),Vj(()=>$j()),MV(()=>kV()),yz(()=>vz())]};function fse(n,e){if(n&1){let t=Lt();M(0,"div",18)(1,"span",19),x(2),P(),M(3,"button",20),ge("click",function(){ke(t);let i=pe();return Ne(i.logout())}),x(4," \u{1F6AA} Abmelden "),P()()}if(n&2){let t=e.ngIf;B(2),ct("Hallo, ",t.displayName||t.email,"!")}}function pse(n,e){n&1&&(M(0,"div",21)(1,"a",22),x(2,"\u{1F510} Anmelden"),P(),M(3,"a",23),x(4,"\u{1F4DD} Registrieren"),P()())}var dE=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return b(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(re(Mn),re(vt))};static \u0275cmp=At({type:n,selectors:[["app-root"]],decls:32,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["href","mailto:contact@afroconnect.de",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1"),x(6,"\u{1F30D} AfroConnect"),P()(),M(7,"p",5),x(8,"Verbinde dich mit der afrikanischen Community in Deutschland"),P()(),M(9,"div",6),Oe(10,fse,5,1,"div",7),Gr(11,"async"),Oe(12,pse,5,0,"div",8),Gr(13,"async"),P()()(),M(14,"main",9),Rt(15,"router-outlet"),P(),M(16,"footer",10)(17,"div",11)(18,"div",12)(19,"p"),x(20,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),P()(),M(21,"div",13)(22,"a",14),x(23,"Datenschutz"),P(),M(24,"span",15),x(25,"|"),P(),M(26,"a",16),x(27,"AGB"),P(),M(28,"span",15),x(29,"|"),P(),M(30,"a",17),x(31,"Kontakt"),P()()()()()),t&2&&(B(10),Z("ngIf",Wr(11,2,r.user$)),B(2),Z("ngIf",!Wr(13,4,r.user$)))},dependencies:[En,kn,kh,tf,ec,Oo],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};vb(dE,e4).catch(n=>console.error(n));
