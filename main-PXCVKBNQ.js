var H5=Object.defineProperty,q5=Object.defineProperties;var G5=Object.getOwnPropertyDescriptors;var qg=Object.getOwnPropertySymbols,W5=Object.getPrototypeOf,VP=Object.prototype.hasOwnProperty,UP=Object.prototype.propertyIsEnumerable,K5=Reflect.get;var FP=(n,e,t)=>e in n?H5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})VP.call(e,t)&&FP(n,t,e[t]);if(qg)for(var t of qg(e))UP.call(e,t)&&FP(n,t,e[t]);return n},he=(n,e)=>q5(n,G5(e));var Lh=(n,e)=>{var t={};for(var r in n)VP.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&qg)for(var r of qg(n))e.indexOf(r)<0&&UP.call(n,r)&&(t[r]=n[r]);return t};var Ti=(n,e,t)=>K5(W5(n),t,e);var S=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function oE(n,e){return Object.is(n,e)}var rn=null,Gg=!1,sE=1,Tr=Symbol("SIGNAL");function He(n){let e=rn;return rn=n,e}function aE(){return rn}var Vh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Uh(n){if(Gg)throw new Error("");if(rn===null)return;rn.consumerOnSignalRead(n);let e=rn.nextProducerIndex++;if(Yg(rn),e<rn.producerNode.length&&rn.producerNode[e]!==n&&Fh(rn)){let t=rn.producerNode[e];Qg(t,rn.producerIndexOfThis[e])}rn.producerNode[e]!==n&&(rn.producerNode[e]=n,rn.producerIndexOfThis[e]=Fh(rn)?jP(n,rn,e):0),rn.producerLastReadVersion[e]=n.version}function BP(){sE++}function cE(n){if(!(Fh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sE)){if(!n.producerMustRecompute(n)&&!hE(n)){iE(n);return}n.producerRecomputeValue(n),iE(n)}}function lE(n){if(n.liveConsumerNode===void 0)return;let e=Gg;Gg=!0;try{for(let t of n.liveConsumerNode)t.dirty||Q5(t)}finally{Gg=e}}function uE(){return rn?.consumerAllowSignalWrites!==!1}function Q5(n){n.dirty=!0,lE(n),n.consumerMarkedDirty?.(n)}function iE(n){n.dirty=!1,n.lastCleanEpoch=sE}function Kg(n){return n&&(n.nextProducerIndex=0),He(n)}function dE(n,e){if(He(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Fh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Qg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hE(n){Yg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(cE(t),r!==t.version))return!0}return!1}function fE(n){if(Yg(n),Fh(n))for(let e=0;e<n.producerNode.length;e++)Qg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jP(n,e,t){if(zP(n),n.liveConsumerNode.length===0&&$P(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=jP(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Qg(n,e){if(zP(n),n.liveConsumerNode.length===1&&$P(n))for(let r=0;r<n.producerNode.length;r++)Qg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Yg(i),i.producerIndexOfThis[r]=e}}function Fh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function zP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $P(n){return n.producerNode!==void 0}function pE(n,e){let t=Object.create(Y5);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(cE(t),Uh(t),t.value===Wg)throw t.error;return t.value};return r[Tr]=t,r}var nE=Symbol("UNSET"),rE=Symbol("COMPUTING"),Wg=Symbol("ERRORED"),Y5=he($({},Vh),{value:nE,dirty:!0,error:null,equal:oE,kind:"computed",producerMustRecompute(n){return n.value===nE||n.value===rE},producerRecomputeValue(n){if(n.value===rE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=rE;let t=Kg(n),r,i=!1;try{r=n.computation(),He(null),i=e!==nE&&e!==Wg&&r!==Wg&&n.equal(e,r)}catch(o){r=Wg,n.error=o}finally{dE(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function J5(){throw new Error}var HP=J5;function qP(n){HP(n)}function gE(n){HP=n}var Z5=null;function mE(n,e){let t=Object.create(Jg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Uh(t),t.value);return r[Tr]=t,r}function Bh(n,e){uE()||qP(n),n.equal(n.value,e)||(n.value=e,X5(n))}function yE(n,e){uE()||qP(n),Bh(n,e(n.value))}var Jg=he($({},Vh),{equal:oE,value:void 0,kind:"signal"});function X5(n){n.version++,BP(),lE(n),Z5?.()}function _E(n){let e=He(null);try{return n()}finally{He(e)}}var vE;function jh(){return vE}function Io(n){let e=vE;return vE=n,e}var Zg=Symbol("NotFound");function xe(n){return typeof n=="function"}function zl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xg=zl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Za(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(xe(r))try{r()}catch(o){e=o instanceof Xg?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{GP(o)}catch(s){e=e??[],s instanceof Xg?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)GP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Za(t,e)}remove(e){let{_finalizers:t}=this;t&&Za(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var wE=Mt.EMPTY;function em(n){return n instanceof Mt||n&&"closed"in n&&xe(n.remove)&&xe(n.add)&&xe(n.unsubscribe)}function GP(n){xe(n)?n():n.unsubscribe()}var Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $l={setTimeout(n,e,...t){let{delegate:r}=$l;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$l;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function tm(n){$l.setTimeout(()=>{let{onUnhandledError:e}=Kr;if(e)e(n);else throw n})}function zh(){}var WP=EE("C",void 0,void 0);function KP(n){return EE("E",void 0,n)}function QP(n){return EE("N",n,void 0)}function EE(n,e,t){return{kind:n,value:e,error:t}}var Xa=null;function Hl(n){if(Kr.useDeprecatedSynchronousErrorHandling){let e=!Xa;if(e&&(Xa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xa;if(Xa=null,t)throw r}}else n()}function YP(n){Kr.useDeprecatedSynchronousErrorHandling&&Xa&&(Xa.errorThrown=!0,Xa.error=n)}var ec=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,em(e)&&e.add(this)):this.destination=oz}static create(e,t,r){return new ql(e,t,r)}next(e){this.isStopped?bE(QP(e),this):this._next(e)}error(e){this.isStopped?bE(KP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bE(WP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rz=Function.prototype.bind;function IE(n,e){return rz.call(n,e)}var CE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){nm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){nm(r)}else nm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nm(t)}}},ql=class extends ec{constructor(e,t,r){super();let i;if(xe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Kr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&IE(e.next,o),error:e.error&&IE(e.error,o),complete:e.complete&&IE(e.complete,o)}):i=e}this.destination=new CE(i)}};function nm(n){Kr.useDeprecatedSynchronousErrorHandling?YP(n):tm(n)}function iz(n){throw n}function bE(n,e){let{onStoppedNotification:t}=Kr;t&&$l.setTimeout(()=>t(n,e))}var oz={closed:!0,next:zh,error:iz,complete:zh};var Gl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lr(n){return n}function rm(...n){return TE(n)}function TE(n){return n.length===0?lr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=az(t)?t:new ql(t,r,i);return Hl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=JP(r),new r((i,o)=>{let s=new ql({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Gl](){return this}pipe(...t){return TE(t)(this)}toPromise(t){return t=JP(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function JP(n){var e;return(e=n??Kr.Promise)!==null&&e!==void 0?e:Promise}function sz(n){return n&&xe(n.next)&&xe(n.error)&&xe(n.complete)}function az(n){return n&&n instanceof ec||sz(n)&&em(n)}function SE(n){return xe(n?.lift)}function Qe(n){return e=>{if(SE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function qe(n,e,t,r,i){return new AE(n,e,t,r,i)}var AE=class extends ec{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wl(){return Qe((n,e)=>{let t=null;n._refCount++;let r=qe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Kl=class extends be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,SE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(qe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return Wl()(this)}};var ZP=zl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Rt=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new im(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ZP}next(t){Hl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Hl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Hl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wE:(this.currentObservers=null,o.push(t),new Mt(()=>{this.currentObservers=null,Za(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new be;return t.source=this,t}}return n.create=(e,t)=>new im(e,t),n})(),im=class extends Rt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:wE}};var Lt=class extends Rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var DE={now(){return(DE.delegate||Date).now()},delegate:void 0};var om=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var $h={setInterval(n,e,...t){let{delegate:r}=$h;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=$h;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ql=class extends om{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return $h.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&$h.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Za(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Yl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Yl.now=DE.now;var Jl=class extends Yl{constructor(e,t=Yl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ME=new Jl(Ql);var sm=class extends Ql{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var am=class extends Jl{};var PE=new am(sm);var Gn=new be(n=>n.complete());function XP(n){return n&&xe(n.schedule)}function ex(n){return n[n.length-1]}function cm(n){return xe(ex(n))?n.pop():void 0}function Ns(n){return XP(ex(n))?n.pop():void 0}function lm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nx(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(g){s(g)}}function c(h){try{u(r.throw(h))}catch(g){s(g)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function tx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tc(n){return this instanceof tc?(this.v=n,this):new tc(n)}function rx(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(T){return function(k){return Promise.resolve(k).then(T,g)}}function a(T,k){r[T]&&(i[T]=function(L){return new Promise(function(O,q){o.push([T,L,O,q])>1||c(T,L)})},k&&(i[T]=k(i[T])))}function c(T,k){try{u(r[T](k))}catch(L){I(o[0][3],L)}}function u(T){T.value instanceof tc?Promise.resolve(T.value.v).then(h,g):I(o[0][2],T)}function h(T){c("next",T)}function g(T){c("throw",T)}function I(T,k){T(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ix(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tx=="function"?tx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var um=n=>n&&typeof n.length=="number"&&typeof n!="function";function dm(n){return xe(n?.then)}function hm(n){return xe(n[Gl])}function fm(n){return Symbol.asyncIterator&&xe(n?.[Symbol.asyncIterator])}function pm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gm=cz();function mm(n){return xe(n?.[gm])}function ym(n){return rx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield tc(t.read());if(i)return yield tc(void 0);yield yield tc(r)}}finally{t.releaseLock()}})}function _m(n){return xe(n?.getReader)}function Bt(n){if(n instanceof be)return n;if(n!=null){if(hm(n))return lz(n);if(um(n))return uz(n);if(dm(n))return dz(n);if(fm(n))return ox(n);if(mm(n))return hz(n);if(_m(n))return fz(n)}throw pm(n)}function lz(n){return new be(e=>{let t=n[Gl]();if(xe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uz(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dz(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,tm)})}function hz(n){return new be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ox(n){return new be(e=>{pz(n,e).catch(t=>e.error(t))})}function fz(n){return ox(ym(n))}function pz(n,e){var t,r,i,o;return nx(this,void 0,void 0,function*(){try{for(t=ix(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Wn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ls(n,e=0){return Qe((t,r)=>{t.subscribe(qe(r,i=>Wn(r,n,()=>r.next(i),e),()=>Wn(r,n,()=>r.complete(),e),i=>Wn(r,n,()=>r.error(i),e)))})}function Fs(n,e=0){return Qe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sx(n,e){return Bt(n).pipe(Fs(e),Ls(e))}function ax(n,e){return Bt(n).pipe(Fs(e),Ls(e))}function cx(n,e){return new be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lx(n,e){return new be(t=>{let r;return Wn(t,e,()=>{r=n[gm](),Wn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}function vm(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{Wn(t,e,()=>{let r=n[Symbol.asyncIterator]();Wn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ux(n,e){return vm(ym(n),e)}function dx(n,e){if(n!=null){if(hm(n))return sx(n,e);if(um(n))return cx(n,e);if(dm(n))return ax(n,e);if(fm(n))return vm(n,e);if(mm(n))return lx(n,e);if(_m(n))return ux(n,e)}throw pm(n)}function ct(n,e){return e?dx(n,e):Bt(n)}function pe(...n){let e=Ns(n);return ct(n,e)}function Zl(n,e){let t=xe(n)?n:()=>n,r=i=>i.error(t());return new be(e?i=>e.schedule(r,0,i):r)}function xE(n){return!!n&&(n instanceof be||xe(n.lift)&&xe(n.subscribe))}var bo=zl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return Qe((t,r)=>{let i=0;t.subscribe(qe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:gz}=Array;function mz(n,e){return gz(e)?n(...e):n(e)}function wm(n){return me(e=>mz(n,e))}var{isArray:yz}=Array,{getPrototypeOf:_z,prototype:vz,keys:wz}=Object;function Em(n){if(n.length===1){let e=n[0];if(yz(e))return{args:e,keys:null};if(Ez(e)){let t=wz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Ez(n){return n&&typeof n=="object"&&_z(n)===vz}function Im(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function nc(...n){let e=Ns(n),t=cm(n),{args:r,keys:i}=Em(n);if(r.length===0)return ct([],e);let o=new be(Iz(r,e,i?s=>Im(i,s):lr));return t?o.pipe(wm(t)):o}function Iz(n,e,t=lr){return r=>{hx(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hx(e,()=>{let u=ct(n[c],e),h=!1;u.subscribe(qe(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hx(n,e,t){n?Wn(t,n,e):e()}function fx(n,e,t,r,i,o,s,a){let c=[],u=0,h=0,g=!1,I=()=>{g&&!c.length&&!u&&e.complete()},T=L=>u<r?k(L):c.push(L),k=L=>{o&&e.next(L),u++;let O=!1;Bt(t(L,h++)).subscribe(qe(e,q=>{i?.(q),o?T(q):e.next(q)},()=>{O=!0},void 0,()=>{if(O)try{for(u--;c.length&&u<r;){let q=c.shift();s?Wn(e,s,()=>k(q)):k(q)}I()}catch(q){e.error(q)}}))};return n.subscribe(qe(e,T,()=>{g=!0,I()})),()=>{a?.()}}function Ft(n,e,t=1/0){return xe(e)?Ft((r,i)=>me((o,s)=>e(r,o,i,s))(Bt(n(r,i))),t):(typeof e=="number"&&(t=e),Qe((r,i)=>fx(r,i,n,t)))}function Xl(n=1/0){return Ft(lr,n)}function px(){return Xl(1)}function eu(...n){return px()(ct(n,Ns(n)))}function bm(n){return new be(e=>{Bt(n()).subscribe(e)})}function RE(...n){let e=cm(n),{args:t,keys:r}=Em(n),i=new be(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let g=!1;Bt(t[h]).subscribe(qe(o,I=>{g||(g=!0,u--),a[h]=I},()=>c--,void 0,()=>{(!c||!g)&&(u||o.next(r?Im(r,a):a),o.complete())}))}});return e?i.pipe(wm(e)):i}function Pn(n,e){return Qe((t,r)=>{let i=0;t.subscribe(qe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ur(n){return Qe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(qe(t,void 0,void 0,s=>{o=Bt(n(s,ur(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gx(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(qe(s,h=>{let g=u++;c=a?n(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Si(n,e){return xe(e)?Ft(n,e,1):Ft(n,1)}function Vs(n){return Qe((e,t)=>{let r=!1;e.subscribe(qe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xn(n){return n<=0?()=>Gn:Qe((e,t)=>{let r=0;e.subscribe(qe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cm(n=bz){return Qe((e,t)=>{let r=!1;e.subscribe(qe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bz(){return new bo}function rc(n){return Qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Co(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pn((i,o)=>n(i,o,r)):lr,xn(1),t?Vs(e):Cm(()=>new bo))}function tu(n){return n<=0?()=>Gn:Qe((e,t)=>{let r=[];e.subscribe(qe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pn((i,o)=>n(i,o,r)):lr,tu(1),t?Vs(e):Cm(()=>new bo))}function Tm(n,e){return Qe(gx(n,e,arguments.length>=2,!0))}function Sm(...n){let e=Ns(n);return Qe((t,r)=>{(e?eu(n,t,e):eu(n,t)).subscribe(r)})}function Rn(n,e){return Qe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(qe(r,c=>{i?.unsubscribe();let u=0,h=o++;Bt(n(c,h)).subscribe(i=qe(r,g=>r.next(e?e(c,g,h,u++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function nu(n){return Qe((e,t)=>{Bt(n).subscribe(qe(t,()=>t.complete(),zh)),!t.closed&&e.subscribe(t)})}function on(n,e,t){let r=xe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Qe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(qe(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):lr}var VE={JSACTION:"jsaction"},UE={JSACTION:"__jsaction",OWNER:"__owner"},vx={};function Cz(n){return n[UE.JSACTION]}function mx(n,e){n[UE.JSACTION]=e}function Tz(n){return vx[n]}function Sz(n,e){vx[n]=e}var ve={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},Az=[ve.MOUSEENTER,ve.MOUSELEAVE,"pointerenter","pointerleave"],Hpe=[ve.CLICK,ve.DBLCLICK,ve.FOCUSIN,ve.FOCUSOUT,ve.KEYDOWN,ve.KEYUP,ve.KEYPRESS,ve.MOUSEOVER,ve.MOUSEOUT,ve.SUBMIT,ve.TOUCHSTART,ve.TOUCHEND,ve.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Dz=[ve.FOCUS,ve.BLUR,ve.ERROR,ve.LOAD,ve.TOGGLE],BE=n=>Dz.indexOf(n)>=0;function Mz(n){return n===ve.MOUSEENTER?ve.MOUSEOVER:n===ve.MOUSELEAVE?ve.MOUSEOUT:n===ve.POINTERENTER?ve.POINTEROVER:n===ve.POINTERLEAVE?ve.POINTEROUT:n}function Pz(n,e,t,r){let i=!1;BE(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function xz(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Rz(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var yx=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function kz(n){return n.which===2||n.which==null&&n.button===4}function Oz(n){return yx&&n.metaKey||!yx&&n.ctrlKey||kz(n)||n.shiftKey}function Nz(n,e,t){let r=n.relatedTarget;return(n.type===ve.MOUSEOVER&&e===ve.MOUSEENTER||n.type===ve.MOUSEOUT&&e===ve.MOUSELEAVE||n.type===ve.POINTEROVER&&e===ve.POINTERENTER||n.type===ve.POINTEROUT&&e===ve.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function Lz(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===ve.MOUSEOVER?t.type=ve.MOUSEENTER:n.type===ve.MOUSEOUT?t.type=ve.MOUSELEAVE:n.type===ve.POINTEROVER?t.type=ve.POINTERENTER:t.type=ve.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Fz=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Pm=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Fz&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Pz(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)xz(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Vz={EVENT_ACTION_SEPARATOR:":"};function Us(n){return n.eventType}function jE(n,e){n.eventType=e}function Dm(n){return n.event}function wx(n,e){n.event=e}function Ex(n){return n.targetElement}function Ix(n,e){n.targetElement=e}function bx(n){return n.eic}function Uz(n,e){n.eic=e}function Bz(n){return n.timeStamp}function jz(n,e){n.timeStamp=e}function Mm(n){return n.eia}function Cx(n,e,t){n.eia=[e,t]}function OE(n){n.eia=void 0}function Am(n){return n[1]}function zz(n){return n.eirp}function Tx(n,e){n.eirp=e}function Sx(n){return n.eir}function Ax(n,e){n.eir=e}function Dx(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function $z(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var NE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Us(this.eventInfo)}setEventType(e){jE(this.eventInfo,e)}getEvent(){return Dm(this.eventInfo)}setEvent(e){wx(this.eventInfo,e)}getTargetElement(){return Ex(this.eventInfo)}setTargetElement(e){Ix(this.eventInfo,e)}getContainer(){return bx(this.eventInfo)}setContainer(e){Uz(this.eventInfo,e)}getTimestamp(){return Bz(this.eventInfo)}setTimestamp(e){jz(this.eventInfo,e)}getAction(){let e=Mm(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){OE(this.eventInfo);return}Cx(this.eventInfo,e.name,e.element)}getIsReplay(){return zz(this.eventInfo)}setIsReplay(e){Tx(this.eventInfo,e)}getResolved(){return Sx(this.eventInfo)}setResolved(e){Ax(this.eventInfo,e)}clone(){return new n(Dx(this.eventInfo))}},Hz={},qz=/\s*;\s*/,Gz=ve.CLICK,LE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Us(e)===ve.CLICK&&Oz(Dm(e))?jE(e,ve.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Sx(e)||(this.populateAction(e,Ex(e)),Ax(e,!0))}resolveParentAction(e){let t=Mm(e),r=t&&Am(t);OE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==bx(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Mm(e));)r=this.getParentNode(r);let i=Mm(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Us(e)===ve.MOUSEENTER||Us(e)===ve.MOUSELEAVE||Us(e)===ve.POINTERENTER||Us(e)===ve.POINTERLEAVE)))if(Nz(Dm(e),Us(e),Am(i))){let o=Lz(Dm(e),Am(i));wx(e,o),Ix(e,Am(i))}else OE(e)}getParentNode(e){let t=e[UE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Us(t)];i!==void 0&&Cx(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Cz(e);if(!t){let r=e.getAttribute(VE.JSACTION);if(!r)t=Hz,mx(e,t);else{if(t=Tz(r),!t){t={};let i=r.split(qz);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(Vz.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?s.substr(0,a).trim():Gz,h=c?s.substr(a+1).trim():s;t[u]=h}Sz(r,t)}mx(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},Mx=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(Mx||{}),FE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new NE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&Wz(r.element,t)&&Rz(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function Wz(n,e){return n.tagName==="A"&&(e.getEventType()===ve.CLICK||e.getEventType()===ve.CLICKMOD)}var Px=Symbol.for("propagationStopped"),zE={REPLAY:101};var Kz="`preventDefault` called during event replay.";var Qz="`composedPath` called during event replay.",xm=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new LE({clickModSupport:t}),this.dispatcher=new FE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&Zz(e),Yz(e);e.getAction();){if(Xz(e),BE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),Jz(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function Yz(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[Px]=!0,t()};ic(e,"stopPropagation",r),ic(e,"stopImmediatePropagation",r)}function Jz(n){return!!n.getEvent()[Px]}function Zz(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);ic(e,"target",t),ic(e,"eventPhase",zE.REPLAY),ic(e,"preventDefault",()=>{throw r(),new Error(Kz+"")}),ic(e,"composedPath",()=>{throw new Error(Qz+"")})}function Xz(n){let e=n.getEvent(),t=n.getAction()?.element;t&&ic(e,"currentTarget",t,{configurable:!0})}function ic(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function xx(n,e){n.ecrd(t=>{e.dispatch(t)},Mx.I_AM_THE_JSACTION_FRAMEWORK)}function e6(n){return n?.q??[]}function t6(n){n&&(_x(n.c,n.et,n.h),_x(n.c,n.etc,n.h,!0))}function _x(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var n6=!1,Rx=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=n6;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=$z(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){Tx(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Az.indexOf(t)>=0)return;let o=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[t]=o;let s=Mz(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),t6(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=Dx(i);jE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function kx(n,e=window){return e6(e._ejsas?.[n])}function $E(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var PR="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,t){super(wy(e,t)),this.code=e}};function r6(n){return`NG0${Math.abs(n)}`}function wy(n,e){return`${r6(n)}${e?": "+e:""}`}var xR=Symbol("InputSignalNode#UNSET"),i6=he($({},Jg),{transformFn:void 0,applyValueToInputSignal(n,e){Bh(n,e)}});function RR(n,e){let t=Object.create(i6);t.value=n,t.transformFn=e?.transform;function r(){if(Uh(t),t.value===xR){let i=null;throw new ie(-950,i)}return t.value}return r[Tr]=t,r}function Xh(n){return{toString:n}.toString()}var Rm="__parameters__";function o6(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kR(n,e,t){return Xh(()=>{let r=o6(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let g=c.hasOwnProperty(Rm)?c[Rm]:Object.defineProperty(c,Rm,{value:[]})[Rm];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Hm=globalThis;function mt(n){for(let e in n)if(n[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function s6(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Yn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Yn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function aI(n,e){return n?e?`${n} ${e}`:n:e||""}var a6=mt({__forward_ref__:mt});function ki(n){return n.__forward_ref__=ki,n.toString=function(){return Yn(this())},n}function Un(n){return OR(n)?n():n}function OR(n){return typeof n=="function"&&n.hasOwnProperty(a6)&&n.__forward_ref__===ki}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ar(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ey(n){return Ox(n,LR)||Ox(n,FR)}function NR(n){return Ey(n)!==null}function Ox(n,e){return n.hasOwnProperty(e)?n[e]:null}function c6(n){let e=n&&(n[LR]||n[FR]);return e||null}function Nx(n){return n&&(n.hasOwnProperty(Lx)||n.hasOwnProperty(l6))?n[Lx]:null}var LR=mt({\u0275prov:mt}),Lx=mt({\u0275inj:mt}),FR=mt({ngInjectableDef:mt}),l6=mt({ngInjectorDef:mt}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function VR(n){return n&&!!n.\u0275providers}var u6=mt({\u0275cmp:mt}),d6=mt({\u0275dir:mt}),h6=mt({\u0275pipe:mt}),f6=mt({\u0275mod:mt}),qm=mt({\u0275fac:mt}),Wh=mt({__NG_ELEMENT_ID__:mt}),Fx=mt({__NG_ENV_ID__:mt});function hu(n){return typeof n=="string"?n:n==null?"":String(n)}function p6(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hu(n)}function UR(n,e){throw new ie(-200,n)}function ZI(n,e){throw new ie(-201,!1)}var Fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Fe||{}),cI;function BR(){return cI}function Kn(n){let e=cI;return cI=n,e}function jR(n,e,t){let r=Ey(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Fe.Optional)return null;if(e!==void 0)return e;ZI(n,"Injector")}var g6={},oc=g6,lI="__NG_DI_FLAG__",Gm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Zg:oc,r)}},Wm="ngTempTokenPath",m6="ngTokenPath",y6=/\n/gm,_6="\u0275",Vx="__source";function v6(n,e=Fe.Default){if(jh()===void 0)throw new ie(-203,!1);if(jh()===null)return jR(n,void 0,e);{let t=jh(),r;return t instanceof Gm?r=t.injector:r=t,r.get(n,e&Fe.Optional?null:void 0,e)}}function ue(n,e=Fe.Default){return(BR()||v6)(Un(n),e)}function j(n,e=Fe.Default){return ue(n,Iy(e))}function Iy(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uI(n){let e=[];for(let t=0;t<n.length;t++){let r=Un(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,o=Fe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=w6(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ue(i,o))}else e.push(ue(r))}return e}function zR(n,e){return n[lI]=e,n.prototype[lI]=e,n}function w6(n){return n[lI]}function E6(n,e,t,r){let i=n[Wm];throw e[Vx]&&i.unshift(e[Vx]),n.message=I6(`
`+n.message,i,t,r),n[m6]=i,n[Wm]=null,n}function I6(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==_6?n.slice(2):n;let i=Yn(e);if(Array.isArray(e))i=e.map(Yn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Yn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(y6,`
  `)}`}var cn=zR(kR("Optional"),8);var b6=zR(kR("SkipSelf"),4);function ac(n,e){let t=n.hasOwnProperty(qm);return t?n[qm]:null}function XI(n,e){n.forEach(t=>Array.isArray(t)?XI(t,e):e(t))}function $R(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Km(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function C6(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function T6(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function eb(n,e,t){let r=ef(n,e);return r>=0?n[r|1]=t:(r=~r,T6(n,r,e,t)),r}function HE(n,e){let t=ef(n,e);if(t>=0)return n[t|1]}function ef(n,e){return S6(n,e,1)}function S6(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var cc={},Qn=[],js=new J(""),HR=new J("",-1),qR=new J(""),Qm=class{get(e,t=oc){if(t===oc){let r=new Error(`NullInjectorError: No provider for ${Yn(e)}!`);throw r.name="NullInjectorError",r}return t}};function GR(n,e){let t=n[f6]||null;if(!t&&e===!0)throw new Error(`Type ${Yn(n)} does not have '\u0275mod' property.`);return t}function zs(n){return n[u6]||null}function WR(n){return n[d6]||null}function KR(n){return n[h6]||null}function In(n){return{\u0275providers:n}}function A6(...n){return{\u0275providers:tb(!0,n),\u0275fromNgModule:!0}}function tb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return XI(e,s=>{let a=s;dI(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QR(i,o),t}function QR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];nb(i,o=>{e(o,r)})}}function dI(n,e,t,r){if(n=Un(n),!n)return!1;let i=null,o=Nx(n),s=!o&&zs(n);if(!o&&!s){let c=n.ngModule;if(o=Nx(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)dI(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{XI(o.imports,h=>{dI(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&QR(u,e)}if(!a){let u=ac(i)||(()=>new i);e({provide:i,useFactory:u,deps:Qn},i),e({provide:qR,useValue:i,multi:!0},i),e({provide:js,useValue:()=>ue(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;nb(c,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function nb(n,e){for(let t of n)VR(t)&&(t=t.\u0275providers),Array.isArray(t)?nb(t,e):e(t)}var D6=mt({provide:String,useValue:mt});function YR(n){return n!==null&&typeof n=="object"&&D6 in n}function M6(n){return!!(n&&n.useExisting)}function P6(n){return!!(n&&n.useFactory)}function fu(n){return typeof n=="function"}function x6(n){return!!n.useClass}var by=new J(""),Fm={},Ux={},qE;function rb(){return qE===void 0&&(qE=new Qm),qE}var an=class{},Kh=class extends an{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,fI(e,s=>this.processProvider(s)),this.records.set(HR,ru(void 0,this)),i.has("environment")&&this.records.set(an,ru(void 0,this));let o=this.records.get(by);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qR,Qn,Fe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Zg:oc,r)}destroy(){qh(this),this._destroyed=!0;let e=He(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return qh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){qh(this);let t=Io(this),r=Kn(void 0),i;try{return e()}finally{Io(t),Kn(r)}}get(e,t=oc,r=Fe.Default){if(qh(this),e.hasOwnProperty(Fx))return e[Fx](this);r=Iy(r);let i,o=Io(this),s=Kn(void 0);try{if(!(r&Fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=L6(e)&&Ey(e);u&&this.injectableDefInScope(u)?c=ru(hI(e),Fm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Fe.Self?rb():this.parent;return t=r&Fe.Optional&&t===oc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Wm]=a[Wm]||[]).unshift(Yn(e)),o)throw a;return E6(a,e,"R3InjectorError",this.source)}else throw a}finally{Kn(s),Io(o)}}resolveInjectorInitializers(){let e=He(null),t=Io(this),r=Kn(void 0),i;try{let o=this.get(js,Qn,Fe.Self);for(let s of o)s()}finally{Io(t),Kn(r),He(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Yn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Un(e);let t=fu(e)?e:Un(e&&e.provide),r=k6(e);if(!fu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ru(void 0,Fm,!0),i.factory=()=>uI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=He(null);try{return t.value===Ux?UR(Yn(e)):t.value===Fm&&(t.value=Ux,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&N6(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Un(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function hI(n){let e=Ey(n),t=e!==null?e.factory:ac(n);if(t!==null)return t;if(n instanceof J)throw new ie(204,!1);if(n instanceof Function)return R6(n);throw new ie(204,!1)}function R6(n){if(n.length>0)throw new ie(204,!1);let t=c6(n);return t!==null?()=>t.factory(n):()=>new n}function k6(n){if(YR(n))return ru(void 0,n.useValue);{let e=JR(n);return ru(e,Fm)}}function JR(n,e,t){let r;if(fu(n)){let i=Un(n);return ac(i)||hI(i)}else if(YR(n))r=()=>Un(n.useValue);else if(P6(n))r=()=>n.useFactory(...uI(n.deps||[]));else if(M6(n))r=(i,o)=>ue(Un(n.useExisting),o!==void 0&&o&Fe.Optional?Fe.Optional:void 0);else{let i=Un(n&&(n.useClass||n.provide));if(O6(n))r=()=>new i(...uI(n.deps));else return ac(i)||hI(i)}return r}function qh(n){if(n.destroyed)throw new ie(205,!1)}function ru(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function O6(n){return!!n.deps}function N6(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function L6(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function fI(n,e){for(let t of n)Array.isArray(t)?fI(t,e):t&&VR(t)?fI(t.\u0275providers,e):e(t)}function mn(n,e){let t;n instanceof Kh?(qh(n),t=n):t=new Gm(n);let r,i=Io(t),o=Kn(void 0);try{return e()}finally{Io(i),Kn(o)}}function ZR(){return BR()!==void 0||jh()!=null}function Cy(n){if(!ZR())throw new ie(-203,!1)}function F6(n){return typeof n=="function"}var fr=0,Ae=1,Re=2,gn=3,Jr=4,er=5,Xr=6,Ym=7,Jn=8,Di=9,So=10,pt=11,Qh=12,Bx=13,Iu=14,Zn=15,pu=16,iu=17,gu=18,Ty=19,XR=20,Bs=21,GE=22,Jm=23,Sr=24,cu=25,Pt=26,ek=1,Ao=6,Do=7,Zm=8,Xm=9,hr=10;function Zr(n){return Array.isArray(n)&&typeof n[ek]=="object"}function Oi(n){return Array.isArray(n)&&n[ek]===!0}function ib(n){return(n.flags&4)!==0}function pc(n){return n.componentOffset>-1}function Sy(n){return(n.flags&1)===1}function Mi(n){return!!n.template}function Yh(n){return(n[Re]&512)!==0}function gc(n){return(n[Re]&256)===256}var pI=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var pr=(()=>{let n=()=>nk;return n.ngInherit=!0,n})();function nk(n){return n.type.prototype.ngOnChanges&&(n.setInput=U6),V6}function V6(){let n=ik(this),e=n?.current;if(e){let t=n.previous;if(t===cc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function U6(n,e,t,r,i){let o=this.declaredInputs[r],s=ik(n)||B6(n,{previous:cc,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new pI(u&&u.currentValue,t,c===cc),tk(n,e,i,t)}var rk="__ngSimpleChanges__";function ik(n){return n[rk]||null}function B6(n,e){return n[rk]=e}var jx=null;var lt=function(n,e=null,t){jx?.(n,e,t)},j6="svg",z6="math";function ei(n){for(;Array.isArray(n);)n=n[fr];return n}function ok(n,e){return ei(e[n])}function ti(n,e){return ei(e[n.index])}function Ay(n,e){return n.data[e]}function sk(n,e){return n[e]}function $6(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Pi(n,e){let t=e[n];return Zr(t)?t:t[fr]}function ob(n){return(n[Re]&128)===128}function H6(n){return Oi(n[gn])}function mu(n,e){return e==null?null:n[e]}function ak(n){n[iu]=0}function ck(n){n[Re]&1024||(n[Re]|=1024,ob(n)&&tf(n))}function q6(n,e){for(;n>0;)e=e[Iu],n--;return e}function Dy(n){return!!(n[Re]&9216||n[Sr]?.dirty)}function gI(n){n[So].changeDetectionScheduler?.notify(8),n[Re]&64&&(n[Re]|=1024),Dy(n)&&tf(n)}function tf(n){n[So].changeDetectionScheduler?.notify(0);let e=lc(n);for(;e!==null&&!(e[Re]&8192||(e[Re]|=8192,!ob(e)));)e=lc(e)}function lk(n,e){if(gc(n))throw new ie(911,!1);n[Bs]===null&&(n[Bs]=[]),n[Bs].push(e)}function G6(n,e){if(n[Bs]===null)return;let t=n[Bs].indexOf(e);t!==-1&&n[Bs].splice(t,1)}function lc(n){let e=n[gn];return Oi(e)?e[gn]:e}function uk(n){return n[Ym]??=[]}function dk(n){return n.cleanup??=[]}var Ue={lFrame:yk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mI=!1;function W6(){return Ue.lFrame.elementDepthCount}function K6(){Ue.lFrame.elementDepthCount++}function Q6(){Ue.lFrame.elementDepthCount--}function sb(){return Ue.bindingsEnabled}function bu(){return Ue.skipHydrationRootTNode!==null}function Y6(n){return Ue.skipHydrationRootTNode===n}function J6(n){Ue.skipHydrationRootTNode=n}function Z6(){Ue.skipHydrationRootTNode=null}function et(){return Ue.lFrame.lView}function ln(){return Ue.lFrame.tView}function oe(n){return Ue.lFrame.contextLView=n,n[Jn]}function se(n){return Ue.lFrame.contextLView=null,n}function Bn(){let n=hk();for(;n!==null&&n.type===64;)n=n.parent;return n}function hk(){return Ue.lFrame.currentTNode}function X6(){let n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function mc(n,e){let t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function ab(){return Ue.lFrame.isParent}function cb(){Ue.lFrame.isParent=!1}function e9(){return Ue.lFrame.contextLView}function fk(){return mI}function zx(n){let e=mI;return mI=n,e}function t9(){let n=Ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function n9(){return Ue.lFrame.bindingIndex}function r9(n){return Ue.lFrame.bindingIndex=n}function My(){return Ue.lFrame.bindingIndex++}function lb(n){let e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function i9(){return Ue.lFrame.inI18n}function o9(n,e){let t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,yI(e)}function s9(){return Ue.lFrame.currentDirectiveIndex}function yI(n){Ue.lFrame.currentDirectiveIndex=n}function a9(n){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function pk(n){Ue.lFrame.currentQueryIndex=n}function c9(n){let e=n[Ae];return e.type===2?e.declTNode:e.type===1?n[er]:null}function gk(n,e,t){if(t&Fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Fe.Host);)if(i=c9(o),i===null||(o=o[Iu],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ue.lFrame=mk();return r.currentTNode=e,r.lView=n,!0}function ub(n){let e=mk(),t=n[Ae];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mk(){let n=Ue.lFrame,e=n===null?null:n.child;return e===null?yk(n):e}function yk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _k(){let n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vk=_k;function db(){let n=_k();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function l9(n){return(Ue.lFrame.contextLView=q6(n,Ue.lFrame.contextLView))[Jn]}function Hs(){return Ue.lFrame.selectedIndex}function uc(n){Ue.lFrame.selectedIndex=n}function Py(){let n=Ue.lFrame;return Ay(n.tView,n.selectedIndex)}function wk(){return Ue.lFrame.currentNamespace}var Ek=!0;function xy(){return Ek}function qs(n){Ek=n}function u9(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nk(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function hb(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vm(n,e,t){Ik(n,e,3,t)}function Um(n,e,t,r){(n[Re]&3)===t&&Ik(n,e,t,r)}function WE(n,e){let t=n[Re];(t&3)===e&&(t&=16383,t+=1,n[Re]=t)}function Ik(n,e,t,r){let i=r!==void 0?n[iu]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[iu]+=65536),(a<o||o==-1)&&(d9(n,t,e,c),n[iu]=(n[iu]&4294901760)+c+2),c++}function $x(n,e){lt(4,n,e);let t=He(null);try{e.call(n)}finally{He(t),lt(5,n,e)}}function d9(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Re]>>14<n[iu]>>16&&(n[Re]&3)===e&&(n[Re]+=16384,$x(a,o)):$x(a,o)}var lu=-1,dc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function h9(n){return(n.flags&8)!==0}function f9(n){return(n.flags&16)!==0}function p9(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];g9(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function bk(n){return n===3||n===4||n===6}function g9(n){return n.charCodeAt(0)===64}function yu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Hx(n,t,i,null,e[++r]):Hx(n,t,i,null,null))}}return n}function Hx(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Ck(n){return n!==lu}function ey(n){return n&32767}function m9(n){return n>>16}function ty(n,e){let t=m9(n),r=e;for(;t>0;)r=r[Iu],t--;return r}var _I=!0;function ny(n){let e=_I;return _I=n,e}var y9=256,Tk=y9-1,Sk=5,_9=0,Ai={};function v9(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wh)&&(r=t[Wh]),r==null&&(r=t[Wh]=_9++);let i=r&Tk,o=1<<i;e.data[n+(i>>Sk)]|=o}function ry(n,e){let t=Ak(n,e);if(t!==-1)return t;let r=e[Ae];r.firstCreatePass&&(n.injectorIndex=e.length,KE(r.data,n),KE(e,null),KE(r.blueprint,null));let i=fb(n,e),o=n.injectorIndex;if(Ck(i)){let s=ey(i),a=ty(i,e),c=a[Ae].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function KE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ak(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function fb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Rk(i),r===null)return lu;if(t++,i=i[Iu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return lu}function vI(n,e,t){v9(n,e,t)}function w9(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(bk(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Dk(n,e,t){if(t&Fe.Optional||n!==void 0)return n;ZI(e,"NodeInjector")}function Mk(n,e,t,r){if(t&Fe.Optional&&r===void 0&&(r=null),(t&(Fe.Self|Fe.Host))===0){let i=n[Di],o=Kn(void 0);try{return i?i.get(e,r,t&Fe.Optional):jR(e,r,t&Fe.Optional)}finally{Kn(o)}}return Dk(r,e,t)}function Pk(n,e,t,r=Fe.Default,i){if(n!==null){if(e[Re]&2048&&!(r&Fe.Self)){let s=T9(n,e,t,r,Ai);if(s!==Ai)return s}let o=xk(n,e,t,r,Ai);if(o!==Ai)return o}return Mk(e,t,r,i)}function xk(n,e,t,r,i){let o=b9(t);if(typeof o=="function"){if(!gk(e,n,r))return r&Fe.Host?Dk(i,t,r):Mk(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Fe.Optional))ZI(t);else return s}finally{vk()}}else if(typeof o=="number"){let s=null,a=Ak(n,e),c=lu,u=r&Fe.Host?e[Zn][er]:null;for((a===-1||r&Fe.SkipSelf)&&(c=a===-1?fb(n,e):e[a+8],c===lu||!Gx(r,!1)?a=-1:(s=e[Ae],a=ey(c),e=ty(c,e)));a!==-1;){let h=e[Ae];if(qx(o,a,h.data)){let g=E9(a,e,t,s,r,u);if(g!==Ai)return g}c=e[a+8],c!==lu&&Gx(r,e[Ae].data[a+8]===u)&&qx(o,a,e)?(s=h,a=ey(c),e=ty(c,e)):a=-1}}return i}function E9(n,e,t,r,i,o){let s=e[Ae],a=s.data[n+8],c=r==null?pc(a)&&_I:r!=s&&(a.type&3)!==0,u=i&Fe.Host&&o===a,h=I9(a,s,t,c,u);return h!==null?iy(e,s,h,a,i):Ai}function I9(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,h=o>>20,g=r?a:a+h,I=i?a+h:u;for(let T=g;T<I;T++){let k=s[T];if(T<c&&t===k||T>=c&&k.type===t)return T}if(i){let T=s[c];if(T&&Mi(T)&&T.type===t)return c}return null}function iy(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof dc){let a=o;a.resolving&&UR(p6(s[t]));let c=ny(a.canSeeViewProviders);a.resolving=!0;let u,h=a.injectImpl?Kn(a.injectImpl):null,g=gk(n,r,Fe.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&u9(t,s[t],e)}finally{h!==null&&Kn(h),ny(c),a.resolving=!1,vk()}}return o}function b9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wh)?n[Wh]:void 0;return typeof e=="number"?e>=0?e&Tk:C9:e}function qx(n,e,t){let r=1<<n;return!!(t[e+(n>>Sk)]&r)}function Gx(n,e){return!(n&Fe.Self)&&!(n&Fe.Host&&e)}var sc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Pk(this._tNode,this._lView,e,Iy(r),t)}};function C9(){return new sc(Bn(),et())}function xo(n){return Xh(()=>{let e=n.prototype.constructor,t=e[qm]||wI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qm]||wI(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function wI(n){return OR(n)?()=>{let e=wI(Un(n));return e&&e()}:ac(n)}function T9(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Re]&2048&&!Yh(s);){let a=xk(o,s,t,r|Fe.Self,Ai);if(a!==Ai)return a;let c=o.parent;if(!c){let u=s[XR];if(u){let h=u.get(t,Ai,r);if(h!==Ai)return h}c=Rk(s),s=s[Iu]}o=c}return i}function Rk(n){let e=n[Ae],t=e.type;return t===2?e.declTNode:t===1?n[er]:null}function pb(n){return w9(Bn(),n)}function Wx(n,e=null,t=null,r){let i=kk(n,e,t,r);return i.resolveInjectorInitializers(),i}function kk(n,e=null,t=null,r,i=new Set){let o=[t||Qn,A6(n)];return r=r||(typeof n=="object"?void 0:Yn(n)),new Kh(o,e||rb(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=oc;static NULL=new Qm;static create(e,t){if(Array.isArray(e))return Wx({name:""},t,e,"");{let r=e.name??"";return Wx({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>ue(HR)});static __NG_ELEMENT_ID__=-1};var S9=new J("");S9.__NG_ELEMENT_ID__=n=>{let e=Bn();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&Fe.Optional)return null;throw new ie(204,!1)};var Ok=!1,yc=(()=>{class n{static __NG_ELEMENT_ID__=A9;static __NG_ENV_ID__=t=>t}return n})(),EI=class extends yc{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return gc(t)?(e(),()=>{}):(lk(t,e),()=>G6(t,e))}};function A9(){return new EI(et())}var hc=class{},Ry=new J("",{providedIn:"root",factory:()=>!1});var Nk=new J(""),Lk=new J(""),Ni=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Lt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),nf=(()=>{class n{internalPendingTasks=j(Ni);scheduler=j(hc);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return S(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),II=class extends Rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ZR()&&(this.destroyRef=j(yc,{optional:!0})??void 0,this.pendingTasks=j(Ni,{optional:!0})??void 0)}emit(e){let t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=II;function oy(...n){}function Fk(n){let e,t;function r(){n=oy;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Kx(n){return queueMicrotask(()=>n()),()=>{n=oy}}var gb="isAngularZone",sy=gb+"_ID",D9=0,Oe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Ok}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,x9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,M9,oy,oy);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},M9={};function mb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function P9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Fk(()=>{n.callbackScheduled=!1,bI(n),n.isCheckStableRunning=!0,mb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),bI(n)}function x9(n){let e=()=>{P9(n)},t=D9++;n._inner=n._inner.fork({name:"angular",properties:{[gb]:!0,[sy]:t,[sy+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(R9(c))return r.invokeTask(o,s,a,c);try{return Qx(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Yx(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Qx(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!k9(c)&&e(),Yx(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,bI(n),mb(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function bI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Qx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Yx(n){n._nesting--,mb(n)}var CI=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function R9(n){return Vk(n,"__ignore_ng_zone__")}function k9(n){return Vk(n,"__scheduler_tick__")}function Vk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},O9=new J("",{providedIn:"root",factory:()=>{let n=j(Oe),e=j(xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Jx(n,e){return RR(n,e)}function N9(n){return RR(xR,n)}var Uk=(Jx.required=N9,Jx);function L9(){return ky(Bn(),et())}function ky(n,e){return new gr(ti(n,e))}var gr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=L9}return n})();function F9(n){return typeof n=="function"&&n[Tr]!==void 0}function _c(n,e){let t=mE(n,e?.equal),r=t[Tr];return t.set=i=>Bh(r,i),t.update=i=>yE(r,i),t.asReadonly=V9.bind(t),t}function V9(){let n=this[Tr];if(n.readonlyFn===void 0){let e=()=>this();e[Tr]=n,n.readonlyFn=e}return n.readonlyFn}function Bk(n){return F9(n)&&typeof n.set=="function"}var U9="ngSkipHydration",B9="ngskiphydration";function jk(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===B9)return!0}return!1}function zk(n){return n.hasAttribute(U9)}function ay(n){return(n.flags&128)===128}function j9(n){if(ay(n))return!0;let e=n.parent;for(;e;){if(ay(n)||jk(e))return!0;e=e.parent}return!1}var $k=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($k||{}),Hk=new Map,z9=0;function $9(){return z9++}function H9(n){Hk.set(n[Ty],n)}function TI(n){Hk.delete(n[Ty])}var Zx="__ngContext__";function Cu(n,e){Zr(e)?(n[Zx]=e[Ty],H9(e)):n[Zx]=e}function qk(n){return Wk(n[Qh])}function Gk(n){return Wk(n[Jr])}function Wk(n){for(;n!==null&&!Oi(n);)n=n[Jr];return n}var SI;function Kk(n){SI=n}function Oy(){if(SI!==void 0)return SI;if(typeof document<"u")return document;throw new ie(210,!1)}var To=new J("",{providedIn:"root",factory:()=>q9}),q9="ng",yb=new J(""),Li=new J("",{providedIn:"platform",factory:()=>"unknown"});var _b=new J("",{providedIn:"root",factory:()=>Oy().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function G9(){let n=new Tu;return n.store=W9(Oy(),j(To)),n}var Tu=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:G9});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function W9(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Qk="h",Yk="b",K9="f",Q9="n",Y9="e",J9="t",vb="c",Jk="x",cy="r",Z9="i",X9="n",Zk="d";var e8="di",t8="s",n8="p";var km=new J(""),Xk=!1,eO=new J("",{providedIn:"root",factory:()=>Xk});var tO=new J(""),r8=!1,i8=new J(""),Xx=new J("",{providedIn:"root",factory:()=>new Map}),wb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(wb||{}),Su=new J(""),eR=new Set;function Fi(n){eR.has(n)||(eR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var nO=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=o8}return n})();function o8(){return new nO(et(),Bn())}var ou=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ou||{}),rO=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),s8=[ou.EarlyRead,ou.Write,ou.MixedReadWrite,ou.Read],a8=(()=>{class n{ngZone=j(Oe);scheduler=j(hc);errorHandler=j(xi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Su,{optional:!0})}execute(){let t=this.sequences.size>0;t&&lt(16),this.executing=!0;for(let r of s8)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&lt(17)}register(t){let{view:r}=t;r!==void 0?((r[cu]??=[]).push(t),tf(r),r[Re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(wb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),AI=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[cu];e&&(this.view[cu]=e.filter(t=>t!==this))}};function Ny(n,e){!e?.injector&&Cy(Ny);let t=e?.injector??j(Tt);return Fi("NgAfterNextRender"),l8(n,t,e,!0)}function c8(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function l8(n,e,t,r){let i=e.get(rO);i.impl??=e.get(a8);let o=e.get(Su,null,{optional:!0}),s=t?.phase??ou.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(yc):null,c=e.get(nO,null,{optional:!0}),u=new AI(i.impl,c8(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var dr=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(dr||{}),tR=0,u8=1,sn=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(sn||{});var d8=0,Ly=1;var h8=4,f8=5;var p8=7,uu=8,g8=9,iO=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(iO||{});function Bm(n,e){let t=y8(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function m8(n){Bm(1,n),Bm(0,n),Bm(2,n)}function y8(n){let e=h8;return n===1?e=f8:n===2&&(e=g8),e}function oO(n){return n+1}function rf(n,e){let t=n[Ae],r=oO(e.index);return n[r]}function Fy(n,e){let t=oO(e.index);return n.data[t]}function _8(n,e,t){let r=e[Ae],i=Fy(r,t);switch(n){case sn.Complete:return i.primaryTmplIndex;case sn.Loading:return i.loadingTmplIndex;case sn.Error:return i.errorTmplIndex;case sn.Placeholder:return i.placeholderTmplIndex;default:return null}}function nR(n,e){return e===sn.Placeholder?n.placeholderBlockConfig?.[tR]??null:e===sn.Loading?n.loadingBlockConfig?.[tR]??null:null}function v8(n){return n.loadingBlockConfig?.[u8]??null}function rR(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function w8(n,e){let t=e.primaryTmplIndex+Pt;return Ay(n,t)}var Vy="ngb";var E8=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},I8=(n,e)=>{let t=n,r=t.getAttribute(Vy)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var b8=n=>{n.removeAttribute(VE.JSACTION),n.removeAttribute(Vy),n.__jsaction_fns=void 0},C8=new J("",{providedIn:"root",factory:()=>({})});function sO(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var DI=new Map;function T8(n,e){return DI.set(n,e),()=>DI.delete(n)}var iR=!1,aO=(n,e,t,r)=>{};function S8(n,e,t,r){aO(n,e,t,r)}function A8(){iR||(aO=(n,e,t,r)=>{let i=n[Di].get(To);DI.get(i)?.(e,t,r)},iR=!0)}var Eb=new J("");var D8="__nghData__",cO=D8,M8="__nghDeferData__",P8=M8,QE="ngh",x8="nghm",lO=()=>null;function R8(n,e,t=!1){let r=n.getAttribute(QE);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Tu,null,{optional:!0});h!==null&&(c=h.get(cO,[])[Number(r)])}let u={data:c,firstChild:n.firstChild??null};return t&&(u.firstChild=n,Uy(u,0,n.nextSibling)),a?n.setAttribute(QE,a):n.removeAttribute(QE),u}function k8(){lO=R8}function uO(n,e,t=!1){return lO(n,e,t)}function O8(n){let e=n._lView;return e[Ae].type===2?null:(Yh(e)&&(e=e[Pt]),e)}function N8(n){return n.textContent?.replace(/\s/gm,"")}function L8(n){let e=Oy(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=N8(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Uy(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function MI(n,e){return n.segmentHeads?.[e]??null}function F8(n){return n.get(i8,!1,{optional:!0})}function V8(n,e){let t=n.data,r=t[Y9]?.[e]??null;return r===null&&t[vb]?.[e]&&(r=Ib(n,e)),r}function dO(n,e){return n.data[vb]?.[e]??null}function Ib(n,e){let t=dO(n,e)??[],r=0;for(let i of t)r+=i[cy]*(i[Jk]??1);return r}function U8(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[Zk];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function of(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[Zk];n.disconnectedNodes=t?new Set(t):null}return!!U8(n)?.has(e)}function B8(n,e){let t=e.get(Eb),i=e.get(Tu).get(P8,{}),o=!1,s=n,a=null,c=[];for(;!o&&s;){o=t.has(s);let u=t.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}c.unshift(s),s=i[s][n8]}return{parentBlockPromise:a,hydrationQueue:c}}function YE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===x8}function oR(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function j8(n){for(let r of n.body.childNodes)if(YE(r))return;let e=oR(n.body.previousSibling);if(YE(e))return;let t=oR(n.head.lastChild);if(!YE(t))throw new ie(-507,!1)}function hO(n,e){let t=n.contentQueries;if(t!==null){let r=He(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];pk(o),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function PI(n,e,t){pk(0);let r=He(null);try{e(n,t)}finally{He(r)}}function bb(n,e,t){if(ib(e)){let r=He(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{He(r)}}}var Ri=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ri||{});var Om;function z8(){if(Om===void 0&&(Om=null,Hm.trustedTypes))try{Om=Hm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Om}function sR(n){return z8()?.createScriptURL(n)||n}var ly=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PR})`}};function Au(n){return n instanceof ly?n.changingThisBreaksApplicationSecurity:n}function Cb(n,e){let t=$8(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${PR})`)}return t===e}function $8(n){return n instanceof ly&&n.getTypeName()||null}var H8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fO(n){return n=String(n),n.match(H8)?n:"unsafe:"+n}var By=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(By||{});function Gs(n){let e=gO();return e?e.sanitize(By.URL,n)||"":Cb(n,"URL")?Au(n):fO(hu(n))}function q8(n){let e=gO();if(e)return sR(e.sanitize(By.RESOURCE_URL,n)||"");if(Cb(n,"ResourceURL"))return sR(Au(n));throw new ie(904,!1)}function G8(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?q8:Gs}function pO(n,e,t){return G8(e,t)(n)}function gO(){let n=et();return n&&n[So].sanitizer}var W8=/^>|^->|<!--|-->|--!>|<!-$/g,K8=/(<|>)/g,Q8="\u200B$1\u200B";function Y8(n){return n.replace(W8,e=>e.replace(K8,Q8))}function J8(n){return n.ownerDocument.body}function mO(n){return n instanceof Function?n():n}function Z8(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var yO="ng-template";function X8(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Z8(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Tb(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Tb(n){return n.type===4&&n.value!==yO}function e$(n,e,t){let r=n.type===4&&!t?yO:n.value;return e===r}function t$(n,e,t){let r=4,i=n.attrs,o=i!==null?i$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Qr(r)&&!Qr(c))return!1;if(s&&Qr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!e$(n,c,t)||c===""&&e.length===1){if(Qr(r))return!1;s=!0}}else if(r&8){if(i===null||!X8(n,i,c,t)){if(Qr(r))return!1;s=!0}}else{let u=e[++a],h=n$(c,i,Tb(n),t);if(h===-1){if(Qr(r))return!1;s=!0;continue}if(u!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&u!==g){if(Qr(r))return!1;s=!0}}}}return Qr(r)||s}function Qr(n){return(n&1)===0}function n$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return o$(e,n)}function _O(n,e,t=!1){for(let r=0;r<e.length;r++)if(t$(n,e[r],t))return!0;return!1}function r$(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function i$(n){for(let e=0;e<n.length;e++){let t=n[e];if(bk(t))return e}return n.length}function o$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function s$(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function aR(n,e){return n?":not("+e.trim()+")":e}function a$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Qr(s)&&(e+=aR(o,i),i=""),r=s,o=o||!Qr(r);t++}return i!==""&&(e+=aR(o,i)),e}function c$(n){return n.map(a$).join(",")}function l$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Qr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Dr={};function vO(n,e){return n.createText(e)}function u$(n,e,t){n.setValue(e,t)}function wO(n,e){return n.createComment(Y8(e))}function Sb(n,e,t){return n.createElement(e,t)}function uy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function EO(n,e,t){n.appendChild(e,t)}function cR(n,e,t,r,i){r!==null?uy(n,e,t,r,i):EO(n,e,t)}function Ab(n,e,t){n.removeChild(null,e,t)}function IO(n){n.textContent=""}function d$(n,e,t){n.setAttribute(e,"style",t)}function h$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bO(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&p9(n,e,r),i!==null&&h$(n,e,i),o!==null&&d$(n,e,o)}function Db(n,e,t,r,i,o,s,a,c,u,h){let g=Pt+r,I=g+i,T=f$(g,I),k=typeof u=="function"?u():u;return T[Ae]={type:n,blueprint:T,template:t,queries:null,viewQuery:a,declTNode:e,data:T.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function f$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dr);return t}function p$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Db(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mb(n,e,t,r,i,o,s,a,c,u,h){let g=e.blueprint.slice();return g[fr]=i,g[Re]=r|4|128|8|64|1024,(u!==null||n&&n[Re]&2048)&&(g[Re]|=2048),ak(g),g[gn]=g[Iu]=n,g[Jn]=t,g[So]=s||n&&n[So],g[pt]=a||n&&n[pt],g[Di]=c||n&&n[Di]||null,g[er]=o,g[Ty]=$9(),g[Xr]=h,g[XR]=u,g[Zn]=e.type==2?n[Zn]:g,g}function g$(n,e,t){let r=ti(e,n),i=p$(t),o=n[So].rendererFactory,s=Pb(n,Mb(n,i,null,CO(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function CO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function TO(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Pb(n,e){return n[Qh]?n[Bx][Jr]=e:n[Qh]=e,n[Bx]=e,e}function N(n=1){SO(ln(),et(),Hs()+n,!1)}function SO(n,e,t,r){if(!r)if((e[Re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Um(e,o,0,t)}uc(t)}var jy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(jy||{});function xI(n,e,t,r){let i=He(null);try{let[o,s,a]=n.inputs[t],c=null;(s&jy.SignalBased)!==0&&(c=e[o][Tr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):tk(e,c,o,r)}finally{He(i)}}function AO(n,e,t,r,i){let o=Hs(),s=r&2;try{uc(-1),s&&e.length>Pt&&SO(n,e,Pt,!1),lt(s?2:0,i),t(r,i)}finally{uc(o),lt(s?3:1,i)}}function zy(n,e,t){I$(n,e,t),(t.flags&64)===64&&b$(n,e,t)}function xb(n,e,t=ti){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function m$(n,e,t,r){let o=r.get(eO,Xk)||t===Ri.ShadowDom,s=n.selectRootElement(e,o);return y$(s),s}function y$(n){DO(n)}var DO=()=>null;function _$(n){zk(n)?IO(n):L8(n)}function v$(){DO=_$}function w$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Rb(n,e,t,r,i,o,s,a){if(!a&&Nb(e,n,t,r,i)){pc(e)&&E$(t,e.index);return}if(e.type&3){let c=ti(e,t);r=w$(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function E$(n,e){let t=Pi(e,n);t[Re]&16||(t[Re]|=64)}function I$(n,e,t){let r=t.directiveStart,i=t.directiveEnd;pc(t)&&g$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ry(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=iy(e,n,s,t);if(Cu(c,e),o!==null&&A$(e,s-r,c,a,t,o),Mi(a)){let u=Pi(t.index,e);u[Jn]=iy(e,n,s,t)}}}function b$(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=s9();try{uc(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];yI(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&C$(c,u)}}finally{uc(-1),yI(s)}}function C$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kb(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];_O(e,o.selectors,!1)&&(r??=[],Mi(o)?r.unshift(o):r.push(o))}return r}function T$(n,e,t,r,i,o){let s=ti(n,e);S$(e[pt],s,o,n.value,t,r,i)}function S$(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?hu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function A$(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];xI(r,t,c,u)}}function Ob(n,e){let t=n[Di],r=t?t.get(xi,null):null;r&&r.handleError(e)}function Nb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],g=e.data[u];xI(g,t[u],h,i),a=!0}if(o)for(let c of o){let u=t[c],h=e.data[c];xI(h,u,r,i),a=!0}return a}function D$(n,e){let t=Pi(e,n),r=t[Ae];M$(r,t);let i=t[fr];i!==null&&t[Xr]===null&&(t[Xr]=uO(i,t[Di])),lt(18),Lb(r,t,t[Jn]),lt(19,t[Jn])}function M$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Lb(n,e,t){ub(e);try{let r=n.viewQuery;r!==null&&PI(1,r,t);let i=n.template;i!==null&&AO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[gu]?.finishViewCreation(n),n.staticContentQueries&&hO(n,e),n.staticViewQueries&&PI(2,n.viewQuery,t);let o=n.components;o!==null&&P$(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Re]&=-5,db()}}function P$(n,e){for(let t=0;t<e.length;t++)D$(n,e[t])}function Fb(n,e,t,r){let i=He(null);try{let o=e.tView,a=n[Re]&4096?4096:16,c=Mb(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[pu]=u;let h=n[gu];return h!==null&&(c[gu]=h.createEmbeddedView(o)),Lb(o,c,t),c}finally{He(i)}}function dy(n,e){return!e||e.firstChild===null||ay(n)}var x$;function Vb(n,e){return x$(n,e)}var Mo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Mo||{});function vc(n){return(n.flags&32)===32}function su(n,e,t,r,i){if(r!=null){let o,s=!1;Oi(r)?o=r:Zr(r)&&(s=!0,r=r[fr]);let a=ei(r);n===0&&t!==null?i==null?EO(e,t,a):uy(e,t,a,i||null,!0):n===1&&t!==null?uy(e,t,a,i||null,!0):n===2?Ab(e,a,s):n===3&&e.destroyNode(a),o!=null&&j$(e,n,o,t,i)}}function R$(n,e){MO(n,e),e[fr]=null,e[er]=null}function k$(n,e,t,r,i,o){r[fr]=i,r[er]=e,Hy(n,r,t,1,i,o)}function MO(n,e){e[So].changeDetectionScheduler?.notify(9),Hy(n,e,e[pt],2,null,null)}function O$(n){let e=n[Qh];if(!e)return JE(n[Ae],n);for(;e;){let t=null;if(Zr(e))t=e[Qh];else{let r=e[hr];r&&(t=r)}if(!t){for(;e&&!e[Jr]&&e!==n;)Zr(e)&&JE(e[Ae],e),e=e[gn];e===null&&(e=n),Zr(e)&&JE(e[Ae],e),t=e&&e[Jr]}e=t}}function Ub(n,e){let t=n[Xm],r=t.indexOf(e);t.splice(r,1)}function Bb(n,e){if(gc(e))return;let t=e[pt];t.destroyNode&&Hy(n,e,t,3,null,null),O$(e)}function JE(n,e){if(gc(e))return;let t=He(null);try{e[Re]&=-129,e[Re]|=256,e[Sr]&&fE(e[Sr]),L$(n,e),N$(n,e),e[Ae].type===1&&e[pt].destroy();let r=e[pu];if(r!==null&&Oi(e[gn])){r!==e[gn]&&Ub(r,e);let i=e[gu];i!==null&&i.detachView(n)}TI(e)}finally{He(t)}}function N$(n,e){let t=n.cleanup,r=e[Ym];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ym]=null);let i=e[Bs];if(i!==null){e[Bs]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Jm];if(o!==null){e[Jm]=null;for(let s of o)s.destroy()}}function L$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof dc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];lt(4,a,c);try{c.call(a)}finally{lt(5,a,c)}}else{lt(4,i,o);try{o.call(i)}finally{lt(5,i,o)}}}}}function PO(n,e,t){return F$(n,e.parent,t)}function F$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[fr];if(pc(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ri.None||i===Ri.Emulated)return null}return ti(r,t)}function xO(n,e,t){return U$(n,e,t)}function V$(n,e,t){return n.type&40?ti(n,t):null}var U$=V$,lR;function $y(n,e,t,r){let i=PO(n,r,e),o=e[pt],s=r.parent||e[er],a=xO(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)cR(o,i,t[c],a,!1);else cR(o,i,t,a,!1);lR!==void 0&&lR(o,r,e,t,i)}function Gh(n,e){if(e!==null){let t=e.type;if(t&3)return ti(e,n);if(t&4)return RI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gh(n,r);{let i=n[e.index];return Oi(i)?RI(-1,i):ei(i)}}else{if(t&128)return Gh(n,e.next);if(t&32)return Vb(e,n)()||ei(n[e.index]);{let r=RO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=lc(n[Zn]);return Gh(i,r)}else return Gh(n,e.next)}}}return null}function RO(n,e){if(e!==null){let r=n[Zn][er],i=e.projection;return r.projection[i]}return null}function RI(n,e){let t=hr+n+1;if(t<e.length){let r=e[t],i=r[Ae].firstChild;if(i!==null)return Gh(r,i)}return e[Do]}function jb(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Cu(ei(a),r),t.flags|=2),!vc(t))if(c&8)jb(n,e,t.child,r,i,o,!1),su(e,n,i,a,o);else if(c&32){let u=Vb(t,r),h;for(;h=u();)su(e,n,i,h,o);su(e,n,i,a,o)}else c&16?kO(n,e,r,t,i,o):su(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hy(n,e,t,r,i,o){jb(t,r,n.firstChild,e,i,o,!1)}function B$(n,e,t){let r=e[pt],i=PO(n,t,e),o=t.parent||e[er],s=xO(o,t,e);kO(r,0,e,t,i,s)}function kO(n,e,t,r,i,o){let s=t[Zn],c=s[er].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];su(e,n,i,h,o)}else{let u=c,h=s[gn];ay(r)&&(u.flags|=128),jb(n,e,u,h,i,o,!0)}}function j$(n,e,t,r,i){let o=t[Do],s=ei(t);o!==s&&su(e,n,r,o,i);for(let a=hr;a<t.length;a++){let c=t[a];Hy(c[Ae],c,n,e,r,o)}}function z$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Mo.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Mo.Important),n.setStyle(t,r,i,o))}}function hy(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ei(o)),Oi(o)&&$$(o,r);let s=t.type;if(s&8)hy(n,e,t.child,r);else if(s&32){let a=Vb(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=RO(e,t);if(Array.isArray(a))r.push(...a);else{let c=lc(e[Zn]);hy(c[Ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function $$(n,e){for(let t=hr;t<n.length;t++){let r=n[t],i=r[Ae].firstChild;i!==null&&hy(r[Ae],r,i,e)}n[Do]!==n[fr]&&e.push(n[Do])}function OO(n){if(n[cu]!==null){for(let e of n[cu])e.impl.addSequence(e);n[cu].length=0}}var NO=[];function H$(n){return n[Sr]??q$(n)}function q$(n){let e=NO.pop()??Object.create(W$);return e.lView=n,e}function G$(n){n.lView[Sr]!==n&&(n.lView=null,NO.push(n))}var W$=he($({},Vh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tf(n.lView)},consumerOnSignalRead(){this.lView[Sr]=this}});function K$(n){let e=n[Sr]??Object.create(Q$);return e.lView=n,e}var Q$=he($({},Vh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=lc(n.lView);for(;e&&!LO(e[Ae]);)e=lc(e);e&&ck(e)},consumerOnSignalRead(){this.lView[Sr]=this}});function LO(n){return n.type!==2}function FO(n){if(n[Jm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Jm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Re]&8192)}}var Y$=100;function VO(n,e=!0,t=0){let i=n[So].rendererFactory,o=!1;o||i.begin?.();try{J$(n,t)}catch(s){throw e&&Ob(n,s),s}finally{o||i.end?.()}}function J$(n,e){let t=fk();try{zx(!0),kI(n,e);let r=0;for(;Dy(n);){if(r===Y$)throw new ie(103,!1);r++,kI(n,1)}}finally{zx(t)}}function Z$(n,e,t,r){if(gc(e))return;let i=e[Re],o=!1,s=!1;ub(e);let a=!0,c=null,u=null;o||(LO(n)?(u=H$(e),c=Kg(u)):aE()===null?(a=!1,u=K$(e),c=Kg(u)):e[Sr]&&(fE(e[Sr]),e[Sr]=null));try{ak(e),r9(n.bindingStartIndex),t!==null&&AO(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let T=n.preOrderCheckHooks;T!==null&&Vm(e,T,null)}else{let T=n.preOrderHooks;T!==null&&Um(e,T,0,null),WE(e,0)}if(s||X$(e),FO(e),UO(e,0),n.contentQueries!==null&&hO(n,e),!o)if(h){let T=n.contentCheckHooks;T!==null&&Vm(e,T)}else{let T=n.contentHooks;T!==null&&Um(e,T,1),WE(e,1)}tH(n,e);let g=n.components;g!==null&&jO(e,g,0);let I=n.viewQuery;if(I!==null&&PI(2,I,r),!o)if(h){let T=n.viewCheckHooks;T!==null&&Vm(e,T)}else{let T=n.viewHooks;T!==null&&Um(e,T,2),WE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[GE]){for(let T of e[GE])T();e[GE]=null}o||(OO(e),e[Re]&=-73)}catch(h){throw o||tf(e),h}finally{u!==null&&(dE(u,c),a&&G$(u)),db()}}function UO(n,e){for(let t=qk(n);t!==null;t=Gk(t))for(let r=hr;r<t.length;r++){let i=t[r];BO(i,e)}}function X$(n){for(let e=qk(n);e!==null;e=Gk(e)){if(!(e[Re]&2))continue;let t=e[Xm];for(let r=0;r<t.length;r++){let i=t[r];ck(i)}}}function eH(n,e,t){lt(18);let r=Pi(e,n);BO(r,t),lt(19,r[Jn])}function BO(n,e){ob(n)&&kI(n,e)}function kI(n,e){let r=n[Ae],i=n[Re],o=n[Sr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hE(o)),s||=!1,o&&(o.dirty=!1),n[Re]&=-9217,s)Z$(r,n,r.template,n[Jn]);else if(i&8192){FO(n),UO(n,1);let a=r.components;a!==null&&jO(n,a,1),OO(n)}}function jO(n,e,t){for(let r=0;r<e.length;r++)eH(n,e[r],t)}function tH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)uc(~i);else{let o=i,s=t[++r],a=t[++r];o9(s,o);let c=e[o];lt(24,c),a(2,c),lt(25,c)}}}finally{uc(-1)}}function qy(n,e){let t=fk()?64:1088;for(n[So].changeDetectionScheduler?.notify(e);n;){n[Re]|=t;let r=lc(n);if(Yh(n)&&!r)return n;n=r}return null}function zO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function zb(n,e,t,r=!0){let i=e[Ae];if(rH(i,e,n,t),r){let s=RI(t,n),a=e[pt],c=a.parentNode(n[Do]);c!==null&&k$(i,n[er],a,e,c,s)}let o=e[Xr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function nH(n,e){let t=fy(n,e);return t!==void 0&&Bb(t[Ae],t),t}function fy(n,e){if(n.length<=hr)return;let t=hr+e,r=n[t];if(r){let i=r[pu];i!==null&&i!==n&&Ub(i,r),e>0&&(n[t-1][Jr]=r[Jr]);let o=Km(n,hr+e);R$(r[Ae],r);let s=o[gu];s!==null&&s.detachView(o[Ae]),r[gn]=null,r[Jr]=null,r[Re]&=-129}return r}function rH(n,e,t,r){let i=hr+r,o=t.length;r>0&&(t[i-1][Jr]=e),r<o-hr?(e[Jr]=t[i],$R(t,hr+r,e)):(t.push(e),e[Jr]=null),e[gn]=t;let s=e[pu];s!==null&&t!==s&&$O(s,e);let a=e[gu];a!==null&&a.insertView(n),gI(e),e[Re]|=128}function $O(n,e){let t=n[Xm],r=e[gn];if(Zr(r))n[Re]|=2;else{let i=r[gn][Zn];e[Zn]!==i&&(n[Re]|=2)}t===null?n[Xm]=[e]:t.push(e)}var Jh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ae];return hy(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Jn]}set context(e){this._lView[Jn]=e}get destroyed(){return gc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(Oi(e)){let t=e[Zm],r=t?t.indexOf(this):-1;r>-1&&(fy(e,r),Km(t,r))}this._attachedToViewContainer=!1}Bb(this._lView[Ae],this._lView)}onDestroy(e){lk(this._lView,e)}markForCheck(){qy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Re]&=-129}reattach(){gI(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,VO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yh(this._lView),t=this._lView[pu];t!==null&&!e&&Ub(t,this._lView),MO(this._lView[Ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=Yh(this._lView),r=this._lView[pu];r!==null&&!t&&$O(r,this._lView),gI(this._lView)}};var Gy=(()=>{class n{static __NG_ELEMENT_ID__=sH}return n})(),iH=Gy,oH=class extends iH{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Fb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Jh(i)}};function sH(){return HO(Bn(),et())}function HO(n,e){return n.type&4?new oH(e,n,ky(n,e)):null}function sf(n,e,t,r,i){let o=n.data[e];if(o===null)o=aH(n,e,t,r,i),i9()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=X6();o.injectorIndex=s===null?-1:s.injectorIndex}return mc(o,!0),o}function aH(n,e,t,r,i){let o=hk(),s=ab(),a=s?o:o&&o.parent,c=n.data[e]=lH(n,a,t,e,r,i);return cH(n,c,o,s),c}function cH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function lH(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uH=new RegExp(`^(\\d+)*(${Yk}|${Qk})*(.*)`);function dH(n){let e=n.match(uH),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,u,h]of o.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(u,g)}return[s,...a]}function hH(n){return!n.prev&&n.parent?.type===8}function ZE(n){return n.index-Pt}function fH(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Wy(n,e,t,r){let i=ZE(r),o=fH(n,i);if(o===void 0){let s=n.data[X9];if(s?.[i])o=gH(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(hH(r)){let u=ZE(r.parent);o=MI(n,u)}else{let u=ti(c,t);if(a)o=u.firstChild;else{let h=ZE(c),g=MI(n,h);if(c.type===2&&g){let T=Ib(n,h)+1;o=Ky(T,g)}else o=u.nextSibling}}}}return o}function Ky(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function pH(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case K9:t=t.firstChild;break;case Q9:t=t.nextSibling;break}}return t}function gH(n,e){let[t,...r]=dH(n),i;if(t===Qk)i=e[Zn][fr];else if(t===Yk)i=J8(e[Zn][fr]);else{let o=Number(t);i=ei(e[o+Pt])}return pH(i,r)}var mH=!1;function yH(n){mH=n}function _H(n){let e=n[Xr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[pt];for(let o of r.values())vH(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function vH(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Pt);i&&Ab(n,i,!1)}}function qO(n){let e=n[Ao]??[],r=n[gn][pt],i=[];for(let o of e)o.data[e8]!==void 0?i.push(o):GO(o,r);n[Ao]=i}function wH(n){let{lContainer:e}=n,t=e[Ao];if(t===null)return;let i=e[gn][pt];for(let o of t)GO(o,i)}function GO(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[cy];for(;t<i;){let o=r.nextSibling;Ab(e,r,!1),r=o,t++}}}function Qy(n){qO(n);let e=n[fr];Zr(e)&&py(e);for(let t=hr;t<n.length;t++)py(n[t])}function py(n){_H(n);let e=n[Ae];for(let t=Pt;t<e.bindingStartIndex;t++)if(Oi(n[t])){let r=n[t];Qy(r)}else Zr(n[t])&&py(n[t])}function WO(n){let e=n._views;for(let t of e){let r=O8(t);r!==null&&r[fr]!==null&&(Zr(r)?py(r):Qy(r))}}function EH(n,e,t,r){n!==null&&(t.cleanup(e),Qy(n.lContainer),WO(r))}function IH(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Jk]??1);i++){let o={data:r,firstChild:null};r[cy]>0&&(o.firstChild=n,n=Ky(r[cy],n)),t.push(o)}return[n,t]}var KO=()=>null;function bH(n,e){let t=n[Ao];return!e||t===null||t.length===0?null:t[0].data[Z9]===e?t.shift():(qO(n),null)}function CH(){KO=bH}function OI(n,e){return KO(n,e)}var TH=class{},QO=class{},NI=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Yn(e)}.`)}},Yy=class{static NULL=new NI},_u=class{},Ro=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>SH()}return n})();function SH(){let n=et(),e=Bn(),t=Pi(e.index,n);return(Zr(t)?t:n)[pt]}var AH=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var XE={},du=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Iy(r);let i=this.injector.get(e,XE,r);return i!==XE||t===XE?i:this.parentInjector.get(e,t,r)}};function LI(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=aI(i,a);else if(o==2){let c=a,u=e[++s];r=aI(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function te(n,e=Fe.Default){let t=et();if(t===null)return ue(n,e);let r=Bn();return Pk(r,t,Un(n),e)}function YO(){let n="invalid";throw new Error(n)}function $b(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,h=MH(s);h===null?a=s:[a,c,u]=h,RH(n,e,t,a,o,c,u)}o!==null&&r!==null&&DH(t,r,o)}function DH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ie(-301,!1);r.push(e[i],o)}}function MH(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Mi(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,PH(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function PH(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function xH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RH(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let I=0;I<a;I++){let T=r[I];!c&&Mi(T)&&(c=!0,xH(n,t,I)),vI(ry(t,e),n,T.type)}VH(t,n.data.length,a);for(let I=0;I<a;I++){let T=r[I];T.providersResolver&&T.providersResolver(T)}let u=!1,h=!1,g=TO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let T=r[I];if(t.mergedAttrs=yu(t.mergedAttrs,T.hostAttrs),OH(n,t,e,g,T),FH(g,T,i),s!==null&&s.has(T)){let[L,O]=s.get(T);t.directiveToIndex.set(T.type,[g,L+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(T))&&t.directiveToIndex.set(T.type,g);T.contentQueries!==null&&(t.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(t.flags|=64);let k=T.type.prototype;!u&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}kH(n,t,o)}function kH(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))uR(0,e,i,r),uR(1,e,i,r),hR(e,r,!1);else{let o=t.get(i);dR(0,e,o,r),dR(1,e,o,r),hR(e,r,!0)}}}function uR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),JO(e,o)}}function dR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),JO(e,s)}}function JO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function hR(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Tb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function OH(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ac(i.type,!0)),s=new dc(o,Mi(i),te);n.blueprint[r]=s,t[r]=s,NH(n,e,r,TO(n,t,i.hostVars,Dr),i)}function NH(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;LH(s)!=a&&s.push(a),s.push(t,r,o)}}function LH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function FH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mi(e)&&(t[""]=n)}}function VH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ZO(n,e,t,r,i,o,s,a){let c=e.consts,u=mu(c,s),h=sf(e,n,2,r,u);return o&&$b(e,t,h,mu(c,a),i),h.mergedAttrs=yu(h.mergedAttrs,h.attrs),h.attrs!==null&&LI(h,h.attrs,!1),h.mergedAttrs!==null&&LI(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function XO(n,e){hb(n,e),ib(e)&&n.queries.elementEnd(e)}var gy=class extends Yy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zs(e);return new vu(t,this.ngModule)}};function UH(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&jy.SignalBased)!==0};return i&&(o.transform=i),o})}function BH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function jH(n,e,t){let r=e instanceof an?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new du(t,r):t}function zH(n){let e=n.get(_u,null);if(e===null)throw new ie(407,!1);let t=n.get(AH,null),r=n.get(hc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function $H(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Sb(e,t,t==="svg"?j6:t==="math"?z6:null)}var vu=class extends QO{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=UH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=BH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=c$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){lt(22);let o=He(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:l$(this.componentDef.selectors[0]),c=Db(0,null,null,1,0,null,null,null,null,[a],null),u=jH(s,i||this.ngModule,e),h=zH(u),g=h.rendererFactory.createRenderer(null,s),I=r?m$(g,r,s.encapsulation,u):$H(s,g),T=Mb(null,c,null,512|CO(s),null,null,h,g,u,null,uO(I,u,!0));T[Pt]=I,ub(T);let k=null;try{let L=ZO(Pt,c,T,"#host",()=>[this.componentDef],!0,0);I&&(bO(g,I,L),Cu(I,T)),zy(c,T,L),bb(c,L,T),XO(c,L),t!==void 0&&HH(L,this.ngContentSelectors,t),k=Pi(L.index,T),T[Jn]=k[Jn],Lb(c,T,null)}catch(L){throw k!==null&&TI(k),TI(T),L}finally{lt(23),db()}return new FI(this.componentType,T)}finally{He(o)}}},FI=class extends TH{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Ay(t[Ae],Pt),this.location=ky(this._tNode,t),this.instance=Pi(this._tNode.index,t)[Jn],this.hostView=this.changeDetectorRef=new Jh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Nb(r,i[Ae],i,e,t);this.previousInputValues.set(e,t);let s=Pi(r.index,i);qy(s,1)}get injector(){return new sc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function HH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Du=(()=>{class n{static __NG_ELEMENT_ID__=qH}return n})();function qH(){let n=Bn();return WH(n,et())}var GH=Du,eN=class extends GH{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ky(this._hostTNode,this._hostLView)}get injector(){return new sc(this._hostTNode,this._hostLView)}get parentInjector(){let e=fb(this._hostTNode,this._hostLView);if(Ck(e)){let t=ty(e,this._hostLView),r=ey(e),i=t[Ae].data[r+8];return new sc(i,t)}else return new sc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=OI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!F6(e),a;if(s)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef}let c=s?e:new vu(zs(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let L=(s?u:this.parentInjector).get(an,null);L&&(o=L)}let h=zs(c.componentType??{}),g=OI(this._lContainer,h?.id??null),I=g?.firstChild??null,T=c.create(u,i,I,o);return this.insertImpl(T.hostView,a,dy(this._hostTNode,g)),T}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(H6(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[gn],u=new eN(c,c[er],c[gn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return zb(s,i,o,r),e.attachToViewContainerRef(),$R(eI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fy(this._lContainer,t);r&&(Km(eI(this._lContainer),t),Bb(r[Ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=fy(this._lContainer,t);return r&&Km(eI(this._lContainer),t)!=null?new Jh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fR(n){return n[Zm]}function eI(n){return n[Zm]||(n[Zm]=[])}function WH(n,e){let t,r=e[n.index];return Oi(r)?t=r:(t=zO(r,e,null,n),e[n.index]=t,Pb(e,t)),tN(t,e,n,r),new eN(t,n,e)}function KH(n,e){let t=n[pt],r=t.createComment(""),i=ti(e,n),o=t.parentNode(i);return uy(t,o,r,t.nextSibling(i),!1),r}var tN=nN,Hb=()=>!1;function QH(n,e,t){return Hb(n,e,t)}function nN(n,e,t,r){if(n[Do])return;let i;t.type&8?i=ei(r):i=KH(e,t),n[Do]=i}function YH(n,e,t){if(n[Do]&&n[Ao])return!0;let r=t[Xr],i=e.index-Pt;if(!r||j9(e)||of(r,i))return!1;let s=MI(r,i),a=r.data[vb]?.[i],[c,u]=IH(s,a);return n[Do]=c,n[Ao]=u,!0}function JH(n,e,t,r){Hb(n,t,e)||nN(n,e,t,r)}function ZH(){tN=JH,Hb=YH}var wu=class{},qb=class{};var VI=class extends wu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gy(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=GR(e);this._bootstrapComponents=mO(o.bootstrap),this._r3Injector=kk(e,t,[{provide:wu,useValue:this},{provide:Yy,useValue:this.componentFactoryResolver},...r],Yn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},UI=class extends qb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new VI(this.moduleType,e,[])}};var my=class extends wu{injector;componentFactoryResolver=new gy(this);instance=null;constructor(e){super();let t=new Kh([...e.providers,{provide:wu,useValue:this},{provide:Yy,useValue:this.componentFactoryResolver}],e.parent||rb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mu(n,e,t=null){return new my({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var XH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=tb(!1,t.type),i=r.length>0?Mu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(ue(an))})}return n})();function wt(n){return Xh(()=>{let e=rN(n),t=he($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$k.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(XH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ri.Emulated,styles:n.styles||Qn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Fi("NgStandalone"),iN(t);let r=n.dependencies;return t.directiveDefs=pR(r,!1),t.pipeDefs=pR(r,!0),t.id=iq(t),t})}function eq(n){return zs(n)||WR(n)}function tq(n){return n!==null}function Mr(n){return Xh(()=>({type:n.type,bootstrap:n.bootstrap||Qn,declarations:n.declarations||Qn,imports:n.imports||Qn,exports:n.exports||Qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nq(n,e){if(n==null)return cc;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=jy.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function rq(n){if(n==null)return cc;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Et(n){return Xh(()=>{let e=rN(n);return iN(e),e})}function Gb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function rN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||cc,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nq(n.inputs,e),outputs:rq(n.outputs),debugInfo:null}}function iN(n){n.features?.forEach(e=>e(n))}function pR(n,e){if(!n)return null;let t=e?KR:eq;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(tq)}function iq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function oq(n){return Object.getPrototypeOf(n.prototype).constructor}function Pr(n){let e=oq(n.type),t=!0,r=[n];for(;e;){let i;if(Mi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=tI(n.inputs),s.declaredInputs=tI(n.declaredInputs),s.outputs=tI(n.outputs);let a=i.hostBindings;a&&uq(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&cq(n,c),u&&lq(n,u),sq(n,i),s6(n.outputs,i.outputs),Mi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Pr&&(t=!1)}}e=Object.getPrototypeOf(e)}aq(r)}function sq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function aq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yu(i.hostAttrs,t=yu(t,i.hostAttrs))}}function tI(n){return n===cc?{}:n===Qn?[]:n}function cq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function lq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function uq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function oN(n){return hq(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function dq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function hq(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fq(n,e,t){return n[e]=t}function Po(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pq(n,e,t,r){let i=Po(n,e,t);return Po(n,e+1,r)||i}function gq(n,e,t,r,i,o,s,a,c){let u=e.consts,h=sf(e,n,4,s||null,a||null);sb()&&$b(e,t,h,mu(u,c),kb),h.mergedAttrs=yu(h.mergedAttrs,h.attrs),hb(e,h);let g=h.tView=Db(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function sN(n,e,t,r,i,o,s,a,c,u){let h=t+Pt,g=e.firstCreatePass?gq(h,e,n,r,i,o,s,a,c):e.data[h];mc(g,!1);let I=aN(e,n,g,t);xy()&&$y(e,n,I,g),Cu(I,n);let T=zO(I,n,I,g);return n[h]=T,Pb(n,T),QH(T,g,n),Sy(g)&&zy(e,n,g),c!=null&&xb(n,g,u),g}function ce(n,e,t,r,i,o,s,a){let c=et(),u=ln(),h=mu(u.consts,o);return sN(c,u,n,e,t,r,i,h,s,a),ce}var aN=cN;function cN(n,e,t,r){return qs(!0),e[pt].createComment("")}function mq(n,e,t,r){let i=e[Xr],o=!i||bu()||vc(t)||of(i,r);if(qs(o),o)return cN(n,e);let s=i.data[J9]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Wy(i,n,e,t);Uy(i,r,a);let c=Ib(i,r);return Ky(c,a)}function yq(){aN=mq}var _q=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Mu(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n})}return n})();var vq=new J("");function nI(n,e,t){return n.get(_q).getOrCreateInjector(e,n,t,"")}function wq(n,e,t){if(n instanceof du){let i=n.injector,o=n.parentInjector,s=nI(o,e,t);return new du(i,s)}let r=n.get(an);if(r!==n){let i=nI(r,e,t);return new du(n,i)}return nI(n,e,t)}function au(n,e,t,r=!1){let i=t[gn],o=i[Ae];if(gc(i))return;let s=rf(i,e),a=s[Ly],c=s[p8];if(!(c!==null&&n<c)&&gR(a,n)&&gR(s[d8]??-1,n)){let u=Fy(o,e),g=!r&&!0&&(v8(u)!==null||nR(u,sn.Loading)!==null||nR(u,sn.Placeholder))?bq:Iq;try{g(n,s,t,e,i)}catch(I){Ob(i,I)}}}function Eq(n,e){let t=n[Ao]?.findIndex(i=>i.data[t8]===e[Ly])??-1;return{dehydratedView:t>-1?n[Ao][t]:null,dehydratedViewIx:t}}function Iq(n,e,t,r,i){lt(20);let o=_8(n,i,r);if(o!==null){e[Ly]=n;let s=i[Ae],a=o+Pt,c=Ay(s,a),u=0;nH(t,u);let h;if(n===sn.Complete){let k=Fy(s,r),L=k.providers;L&&L.length>0&&(h=wq(i[Di],k,L))}let{dehydratedView:g,dehydratedViewIx:I}=Eq(t,e),T=Fb(i,c,null,{injector:h,dehydratedView:g});if(zb(t,T,u,dy(c,g)),qy(T,2),I>-1&&t[Ao]?.splice(I,1),(n===sn.Complete||n===sn.Error)&&Array.isArray(e[uu])){for(let k of e[uu])k();e[uu]=null}}lt(21)}function gR(n,e){return n<e}function mR(n,e,t){n.loadingPromise.then(()=>{n.loadingState===dr.COMPLETE?au(sn.Complete,e,t):n.loadingState===dr.FAILED&&au(sn.Error,e,t)})}var bq=null;var Wb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var lN=new J("");var Cq=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new BI})}return n})(),BI=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ws(n){return!!n&&typeof n.then=="function"}function Kb(n){return!!n&&typeof n.subscribe=="function"}var uN=new J("");function Qb(n){return In([{provide:uN,multi:!0,useValue:n}])}var dN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(uN,{optional:!0})??[];injector=j(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mn(this.injector,i);if(Ws(o))t.push(o);else if(Kb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ks=new J("");function Tq(){gE(()=>{throw new ie(600,!1)})}function Sq(n){return n.isBoundToModule}var Aq=10;var Xn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(O9);afterRenderManager=j(rO);zonelessEnabled=j(Ry);rootEffectScheduler=j(Cq);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Rt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=j(Ni).hasPendingTasks.pipe(me(t=>!t));constructor(){j(Su,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(an);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tt.NULL){lt(10);let o=t instanceof QO;if(!this._injector.get(dN).done){let T="";throw new ie(405,T)}let a;o?a=t:a=this._injector.get(Yy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=Sq(a)?void 0:this._injector.get(wu),u=r||a.selector,h=a.create(i,[],u,c),g=h.location.nativeElement,I=h.injector.get(lN,null);return I?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),jm(this.components,h),I?.unregisterApplication(g)}),this._loadComponent(h),lt(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(wb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ie(101,!1);let t=He(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(t),this.afterTick.next(),lt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_u,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Aq;)lt(14),this.synchronizeOnce(),lt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Dq(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Dy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ks,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dq(n,e,t,r){if(!t&&!Dy(n))return;VO(n,e,t&&!r?0:1)}function Mq(n,e,t){let r=e[Di],i=e[Ae];if(n.loadingState!==dr.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=rf(e,t),s=w8(i,n);n.loadingState=dr.IN_PROGRESS,Bm(1,o);let a=n.dependencyResolverFn,c=r.get(nf).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let h=!1,g=[],I=[];for(let T of u)if(T.status==="fulfilled"){let k=T.value,L=zs(k)||WR(k);if(L)g.push(L);else{let O=KR(k);O&&I.push(O)}}else{h=!0;break}if(h){if(n.loadingState=dr.FAILED,n.errorTmplIndex===null){let T="",k=new ie(-750,!1);Ob(e,k)}}else{n.loadingState=dr.COMPLETE;let T=s.tView;if(g.length>0){T.directiveRegistry=rR(T.directiveRegistry,g);let k=g.map(O=>O.type),L=tb(!1,...k);n.providers=L}I.length>0&&(T.pipeRegistry=rR(T.pipeRegistry,I))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=dr.COMPLETE,c()}),n.loadingPromise)}function Pq(n,e){return e[Di].get(vq,null,{optional:!0})?.behavior!==iO.Manual}function xq(n,e,t){let r=e[Ae],i=e[t.index];if(!Pq(n,e))return;let o=rf(e,t),s=Fy(r,t);switch(m8(o),s.loadingState){case dr.NOT_STARTED:au(sn.Loading,t,i),Mq(s,e,t),s.loadingState===dr.IN_PROGRESS&&mR(s,t,i);break;case dr.IN_PROGRESS:au(sn.Loading,t,i),mR(s,t,i);break;case dr.COMPLETE:au(sn.Complete,t,i);break;case dr.FAILED:au(sn.Error,t,i);break;default:}}function Rq(n,e,t){return S(this,null,function*(){let r=n.get(Eb);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=B8(e,n);if(s.length===0)return;o!==null&&s.shift(),Nq(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield yR(n,s,t):r.awaitParentBlock(a,()=>S(null,null,function*(){return yield yR(n,s,t)}))})}function yR(n,e,t){return S(this,null,function*(){let r=n.get(Eb),i=r.hydrating,o=n.get(Ni),s=o.add();for(let c=0;c<e.length;c++){let u=e[c],h=r.get(u);if(h!=null){if(yield Fq(h),yield Lq(n),kq(h)){wH(h),_R(e.slice(c),r);break}i.get(u).resolve()}else{Oq(c,e,r),_R(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),t&&t(e),EH(r.get(a),e,r,n.get(Xn))})}function kq(n){return rf(n.lView,n.tNode)[Ly]===sn.Error}function Oq(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&Qy(i.lContainer)}function _R(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function Nq(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function Lq(n){return new Promise(e=>Ny(e,{injector:n}))}function Fq(n){return S(this,null,function*(){let{tNode:e,lView:t}=n,r=rf(t,e);return new Promise(i=>{Vq(r,i),xq(2,t,e)})})}function Vq(n,e){Array.isArray(n[uu])||(n[uu]=[]),n[uu].push(e)}function af(n,e,t,r){let i=et(),o=My();if(Po(i,o,e)){let s=ln(),a=Py();T$(a,i,n,e,t,r)}return af}function hN(n,e,t,r){return Po(n,My(),t)?e+hu(t)+r:Dr}function Uq(n,e,t,r,i,o){let s=n9(),a=pq(n,s,t,i);return lb(2),a?e+hu(t)+r+hu(i)+o:Dr}function Nm(n,e){return n<<17|e<<2}function fc(n){return n>>17&32767}function Bq(n){return(n&2)==2}function jq(n,e){return n&131071|e<<17}function jI(n){return n|2}function Eu(n){return(n&131068)>>2}function rI(n,e){return n&-131069|e<<2}function zq(n){return(n&1)===1}function zI(n){return n|1}function $q(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fc(s),c=Eu(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||ef(g,h)>0)&&(u=!0)}else h=t;if(i)if(c!==0){let I=fc(n[a+1]);n[r+1]=Nm(I,a),I!==0&&(n[I+1]=rI(n[I+1],r)),n[a+1]=jq(n[a+1],r)}else n[r+1]=Nm(a,0),a!==0&&(n[a+1]=rI(n[a+1],r)),a=r;else n[r+1]=Nm(c,0),a===0?a=r:n[c+1]=rI(n[c+1],r),c=r;u&&(n[r+1]=jI(n[r+1])),vR(n,h,r,!0),vR(n,h,r,!1),Hq(e,h,n,r,o),s=Nm(a,c),o?e.classBindings=s:e.styleBindings=s}function Hq(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ef(o,e)>=0&&(t[r+1]=zI(t[r+1]))}function vR(n,e,t,r){let i=n[t+1],o=e===null,s=r?fc(i):Eu(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];qq(c,e)&&(a=!0,n[s+1]=r?zI(u):jI(u)),s=r?fc(u):Eu(u)}a&&(n[t+1]=r?jI(i):zI(i))}function qq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ef(n,e)>=0:!1}var Yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gq(n){return n.substring(Yr.key,Yr.keyEnd)}function Wq(n){return Kq(n),fN(n,pN(n,0,Yr.textEnd))}function fN(n,e){let t=Yr.textEnd;return t===e?-1:(e=Yr.keyEnd=Qq(n,Yr.key=e,t),pN(n,e,t))}function Kq(n){Yr.key=0,Yr.keyEnd=0,Yr.value=0,Yr.valueEnd=0,Yr.textEnd=n.length}function pN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Qq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function z(n,e,t){let r=et(),i=My();if(Po(r,i,e)){let o=ln(),s=Py();Rb(o,s,r,n,e,r[pt],t,!1)}return z}function $I(n,e,t,r,i){Nb(e,n,t,i?"class":"style",r)}function wc(n,e){return Jq(n,e,null,!0),wc}function Qs(n){Zq(iG,Yq,n,!0)}function Yq(n,e){for(let t=Wq(e);t>=0;t=fN(e,t))eb(n,Gq(e),!0)}function Jq(n,e,t,r){let i=et(),o=ln(),s=lb(2);if(o.firstUpdatePass&&mN(o,n,s,r),e!==Dr&&Po(i,s,e)){let a=o.data[Hs()];yN(o,a,i,i[pt],n,i[s+1]=sG(e,t),r,s)}}function Zq(n,e,t,r){let i=ln(),o=lb(2);i.firstUpdatePass&&mN(i,null,o,r);let s=et();if(t!==Dr&&Po(s,o,t)){let a=i.data[Hs()];if(_N(a,r)&&!gN(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=aI(c,t||"")),$I(i,a,s,t,r)}else oG(i,a,s,s[pt],s[o+1],s[o+1]=rG(n,e,t),r,o)}}function gN(n,e){return e>=n.expandoStartIndex}function mN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Hs()],s=gN(n,t);_N(o,r)&&e===null&&!s&&(e=!1),e=Xq(i,o,e,r),$q(i,o,e,t,s,r)}}function Xq(n,e,t,r){let i=a9(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=iI(null,n,e,t,r),t=Zh(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=iI(i,n,e,t,r),o===null){let c=eG(n,e,r);c!==void 0&&Array.isArray(c)&&(c=iI(null,n,e,c[1],r),c=Zh(c,e.attrs,r),tG(n,e,r,c))}else o=nG(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function eG(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Eu(r)!==0)return n[fc(r)]}function tG(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fc(i)]=r}function nG(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Zh(r,s,t)}return Zh(r,e.attrs,t)}function iI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Zh(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Zh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),eb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function rG(n,e,t){if(t==null||t==="")return Qn;let r=[],i=Au(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function iG(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&eb(n,r,t)}function oG(n,e,t,r,i,o,s,a){i===Dr&&(i=Qn);let c=0,u=0,h=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;h!==null||g!==null;){let I=c<i.length?i[c+1]:void 0,T=u<o.length?o[u+1]:void 0,k=null,L;h===g?(c+=2,u+=2,I!==T&&(k=g,L=T)):g===null||h!==null&&h<g?(c+=2,k=h):(u+=2,k=g,L=T),k!==null&&yN(n,e,t,r,k,L,s,a),h=c<i.length?i[c]:null,g=u<o.length?o[u]:null}}function yN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],h=zq(u)?wR(c,e,t,i,Eu(u),s):void 0;if(!yy(h)){yy(o)||Bq(u)&&(o=wR(c,null,t,i,a,s));let g=ok(Hs(),t);z$(r,s,g,i,o)}}function wR(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),h=u?c[1]:c,g=h===null,I=t[i+1];I===Dr&&(I=g?Qn:void 0);let T=g?HE(I,r):h===r?I:void 0;if(u&&!yy(T)&&(T=HE(c,r)),yy(T)&&(a=T,s))return a;let k=n[i+1];i=s?fc(k):Eu(k)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=HE(c,r))}return a}function yy(n){return n!==void 0}function sG(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Yn(Au(n)))),n}function _N(n,e){return(n.flags&(e?8:16))!==0}function y(n,e,t,r){let i=et(),o=ln(),s=Pt+n,a=i[pt],c=o.firstCreatePass?ZO(s,o,i,e,kb,sb(),t,r):o.data[s],u=vN(o,i,c,a,e,n);i[s]=u;let h=Sy(c);return mc(c,!0),bO(a,u,c),!vc(c)&&xy()&&$y(o,i,u,c),(W6()===0||h)&&Cu(u,i),K6(),h&&(zy(o,i,c),bb(o,c,i)),r!==null&&xb(i,c),y}function m(){let n=Bn();ab()?cb():(n=n.parent,mc(n,!1));let e=n;Y6(e)&&Z6(),Q6();let t=ln();return t.firstCreatePass&&XO(t,e),e.classesWithoutHost!=null&&h9(e)&&$I(t,e,et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&f9(e)&&$I(t,e,et(),e.stylesWithoutHost,!1),m}function Ye(n,e,t,r){return y(n,e,t,r),m(),Ye}var vN=(n,e,t,r,i,o)=>(qs(!0),Sb(r,i,wk()));function aG(n,e,t,r,i,o){let s=e[Xr],a=!s||bu()||vc(t)||of(s,o);if(qs(a),a)return Sb(r,i,wk());let c=Wy(s,n,e,t);return dO(s,o)&&Uy(s,o,c.nextSibling),s&&(jk(t)||zk(c))&&pc(t)&&(J6(t),IO(c)),c}function cG(){vN=aG}function lG(n,e,t,r,i){let o=e.consts,s=mu(o,r),a=sf(e,n,8,"ng-container",s);s!==null&&LI(a,s,!0);let c=mu(o,i);return sb()&&$b(e,t,a,c,kb),a.mergedAttrs=yu(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Yb(n,e,t){let r=et(),i=ln(),o=n+Pt,s=i.firstCreatePass?lG(o,i,r,e,t):i.data[o];mc(s,!0);let a=wN(i,r,s,n);return r[o]=a,xy()&&$y(i,r,a,s),Cu(a,r),Sy(s)&&(zy(i,r,s),bb(i,s,r)),t!=null&&xb(r,s),Yb}function Jb(){let n=Bn(),e=ln();return ab()?cb():(n=n.parent,mc(n,!1)),e.firstCreatePass&&(hb(e,n),ib(n)&&e.queries.elementEnd(n)),Jb}var wN=(n,e,t,r)=>(qs(!0),wO(e[pt],""));function uG(n,e,t,r){let i,o=e[Xr],s=!o||bu()||of(o,r)||vc(t);if(qs(s),s)return wO(e[pt],"");let a=Wy(o,n,e,t),c=V8(o,r);return Uy(o,r,a),i=Ky(c,a),i}function dG(){wN=uG}function We(){return et()}var _y="en-US";var hG=_y;function fG(n){typeof n=="string"&&(hG=n.toLowerCase().replace(/_/g,"-"))}function ER(n,e,t){return function r(i){if(i===Function)return t;let o=pc(n)?Pi(n.index,e):e;qy(o,5);let s=e[Jn],a=IR(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=IR(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function IR(n,e,t,r){let i=He(null);try{return lt(6,e,t),t(r)!==!1}catch(o){return pG(n,o),!1}finally{lt(7,e,t),He(i)}}function pG(n,e){let t=n[Di],r=t?t.get(xi,null):null;r&&r.handleError(e)}function bR(n,e,t,r,i,o){let s=e[t],a=e[Ae],u=a.data[t].outputs[r],h=s[u],g=a.firstCreatePass?dk(a):null,I=uk(e),T=h.subscribe(o),k=I.length;I.push(o,T),g&&g.push(i,n.index,k,-(k+1))}function fe(n,e,t,r){let i=et(),o=ln(),s=Bn();return EN(o,i,i[pt],s,n,e,r),fe}function gG(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ym],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function EN(n,e,t,r,i,o,s){let a=Sy(r),u=n.firstCreatePass?dk(n):null,h=uk(e),g=!0;if(r.type&3||s){let I=ti(r,e),T=s?s(I):I,k=h.length,L=s?q=>s(ei(q[r.index])):r.index,O=null;if(!s&&a&&(O=gG(n,e,i,r.index)),O!==null){let q=O.__ngLastListenerFn__||O;q.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=ER(r,e,o),S8(e,T,i,o);let q=t.listen(T,i,o);h.push(o,q),u&&u.push(i,L,k,k+1)}}else o=ER(r,e,o);if(g){let I=r.outputs?.[i],T=r.hostDirectiveOutputs?.[i];if(T&&T.length)for(let k=0;k<T.length;k+=2){let L=T[k],O=T[k+1];bR(r,e,L,O,i,o)}if(I&&I.length)for(let k of I)bR(r,e,k,i,i,o)}}function K(n=1){return l9(n)}function mG(n,e){let t=null,r=r$(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?_O(n,o,!0):s$(r,o))return i}return t}function IN(n){let e=et()[Zn][er];if(!e.projection){let t=n?n.length:1,r=e.projection=C6(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?mG(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function bN(n,e=0,t,r,i,o){let s=et(),a=ln(),c=r?n+1:null;c!==null&&sN(s,a,c,r,i,o,null,t);let u=sf(a,Pt+n,16,null,t||null);u.projection===null&&(u.projection=e),cb();let g=!s[Xr]||bu();s[Zn][er].projection[u.projection]===null&&c!==null?yG(s,a,c):g&&!vc(u)&&B$(a,s,u)}function yG(n,e,t){let r=Pt+t,i=e.data[r],o=n[r],s=OI(o,i.tView.ssrId),a=Fb(n,i,void 0,{dehydratedView:s});zb(o,a,0,dy(i,s))}function Zb(n,e,t,r,i){let o=et(),s=hN(o,e,t,r);if(s!==Dr){let a=ln(),c=Py();Rb(a,c,o,n,s,o[pt],i,!1)}return Zb}function cf(n){let e=e9();return sk(e,Pt+n)}function v(n,e=""){let t=et(),r=ln(),i=n+Pt,o=r.firstCreatePass?sf(r,i,1,e,null):r.data[i],s=CN(r,t,o,e,n);t[i]=s,xy()&&$y(r,t,s,o),mc(o,!1)}var CN=(n,e,t,r,i)=>(qs(!0),vO(e[pt],r));function _G(n,e,t,r,i){let o=e[Xr],s=!o||bu()||vc(t)||of(o,i);return qs(s),s?vO(e[pt],r):Wy(o,n,e,t)}function vG(){CN=_G}function yt(n){return Ve("",n,""),yt}function Ve(n,e,t){let r=et(),i=hN(r,n,e,t);return i!==Dr&&TN(r,Hs(),i),Ve}function xr(n,e,t,r,i){let o=et(),s=Uq(o,n,e,t,r,i);return s!==Dr&&TN(o,Hs(),s),xr}function TN(n,e,t){let r=ok(e,n);u$(n[pt],r,t)}function Te(n,e,t){Bk(e)&&(e=e());let r=et(),i=My();if(Po(r,i,e)){let o=ln(),s=Py();Rb(o,s,r,n,e,r[pt],t,!1)}return Te}function De(n,e){let t=Bk(n);return t&&n.set(e),t}function Se(n,e){let t=et(),r=ln(),i=Bn();return EN(r,t,t[pt],i,n,e),Se}function wG(n,e,t){let r=ln();if(r.firstCreatePass){let i=Mi(n);HI(t,r.data,r.blueprint,i,!0),HI(e,r.data,r.blueprint,i,!1)}}function HI(n,e,t,r,i){if(n=Un(n),Array.isArray(n))for(let o=0;o<n.length;o++)HI(n[o],e,t,r,i);else{let o=ln(),s=et(),a=Bn(),c=fu(n)?n:Un(n.provide),u=JR(n),h=a.providerIndexes&1048575,g=a.directiveStart,I=a.providerIndexes>>20;if(fu(n)||!n.multi){let T=new dc(u,i,te),k=sI(c,e,i?h:h+I,g);k===-1?(vI(ry(a,s),o,c),oI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),s.push(T)):(t[k]=T,s[k]=T)}else{let T=sI(c,e,h+I,g),k=sI(c,e,h,h+I),L=T>=0&&t[T],O=k>=0&&t[k];if(i&&!O||!i&&!L){vI(ry(a,s),o,c);let q=bG(i?IG:EG,t.length,i,r,u);!i&&O&&(t[k].providerFactory=q),oI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=SN(t[i?k:T],u,!i&&r);oI(o,n,T>-1?T:k,q)}!i&&r&&O&&t[k].componentProviders++}}}function oI(n,e,t,r){let i=fu(e),o=x6(e);if(i||o){let c=(o?Un(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function SN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function EG(n,e,t,r,i){return qI(this.multi,[])}function IG(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=iy(r,r[Ae],this.providerFactory.index,i);s=c.slice(0,a),qI(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],qI(o,s);return s}function qI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function bG(n,e,t,r,i){let o=new dc(n,t,te);return o.multi=[],o.index=e,o.componentProviders=0,SN(o,i,r&&!t),o}function Vi(n,e=[]){return t=>{t.providersResolver=(r,i)=>wG(r,i?i(n):n,e)}}function CG(n,e){let t=n[e];return t===Dr?void 0:t}function TG(n,e,t,r,i,o){let s=e+t;return Po(n,s,i)?fq(n,s+1,o?r.call(o,i):r(i)):CG(n,s+1)}function Ui(n,e){let t=ln(),r,i=n+Pt;t.firstCreatePass?(r=SG(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ac(r.type,!0)),s,a=Kn(te);try{let c=ny(!1),u=o();return ny(c),$6(t,et(),i,u),u}finally{Kn(a)}}function SG(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Bi(n,e,t){let r=n+Pt,i=et(),o=sk(i,r);return AG(i,r)?TG(i,t9(),e,o.transform,t,o):o.transform(t)}function AG(n,e){return n[Ae].data[e].pure}function AN(n,e){return HO(n,e)}var $s=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},DN=new $s("19.2.15"),GI=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},MN=(()=>{class n{compileModuleSync(t){return new UI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=GR(t),o=mO(i.declarations).reduce((s,a)=>{let c=zs(a);return c&&s.push(new vu(c)),s},[]);return new GI(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DG=(()=>{class n{zone=j(Oe);changeDetectionScheduler=j(hc);applicationRef=j(Xn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MG=new J("",{factory:()=>!1});function PN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(he($({},RN()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:js,multi:!0,useFactory:()=>{let r=j(DG,{optional:!0});return()=>r.initialize()}},{provide:js,multi:!0,useFactory:()=>{let r=j(PG);return()=>{r.initialize()}}},e===!0?{provide:Nk,useValue:!0}:[],{provide:Lk,useValue:t??Ok}]}function xN(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=PN({ngZoneFactory:()=>{let i=RN(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Fi("NgZone_CoalesceEvent"),new Oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return In([{provide:MG,useValue:!0},{provide:Ry,useValue:!1},r])}function RN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var PG=(()=>{class n{subscription=new Mt;initialized=!1;zone=j(Oe);pendingTasks=j(Ni);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xG=(()=>{class n{appRef=j(Xn);taskService=j(Ni);ngZone=j(Oe);zonelessEnabled=j(Ry);tracing=j(Su,{optional:!0});disableScheduling=j(Nk,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(Lk,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof CI||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Kx:Fk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Kx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RG(){return typeof $localize<"u"&&$localize.locale||_y}var Xb=new J("",{providedIn:"root",factory:()=>j(Xb,Fe.Optional|Fe.SkipSelf)||RG()});var WI=new J(""),kG=new J("");function Hh(n){return!n.moduleRef}function OG(n){let e=Hh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{Hh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Hh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(WI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(WI);s.add(o),n.moduleRef.onDestroy(()=>{jm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return LG(r,t,()=>{let o=e.get(dN);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Xb,_y);if(fG(s||_y),!e.get(kG,!0))return Hh(n)?e.get(Xn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Hh(n)){let c=e.get(Xn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return NG(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function NG(n,e){let t=n.injector.get(Xn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}function LG(n,e,t){try{let r=t();return Ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var zm=null;function FG(n=[],e){return Tt.create({name:e,providers:[{provide:by,useValue:"platform"},{provide:WI,useValue:new Set([()=>zm=null])},...n]})}function VG(n=[]){if(zm)return zm;let e=FG(n);return zm=e,Tq(),UG(e),e}function UG(n){let e=n.get(yb,null);mn(n,()=>{e?.forEach(t=>t())})}function eC(){return!1}var Ys=(()=>{class n{static __NG_ELEMENT_ID__=BG}return n})();function BG(n){return jG(Bn(),et(),(n&16)===16)}function jG(n,e,t){if(pc(n)&&!t){let r=Pi(n.index,e);return new Jh(r,r)}else if(n.type&175){let r=e[Zn];return new Jh(r,e)}return null}var KI=class{constructor(){}supports(e){return oN(e)}create(e){return new QI(e)}},zG=(n,e)=>e,QI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||zG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<CR(r,i,o)?t:r,a=CR(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=c-i;if(u!=h){for(let I=0;I<u;I++){let T=I<o.length?o[I]:o[I]=0,k=T+I;h<=k&&k<u&&(o[I]=T+1)}let g=s.previousIndex;o[g]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!oN(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,dq(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new YI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},YI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},JI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new JI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function TR(){return new tC([new KI])}var tC=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:TR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TR()),deps:[[n,new b6,new cn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function kN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;lt(8);try{let o=i?.injector??VG(r),s=[PN({}),{provide:hc,useExisting:xG},...t||[]],a=new my({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return OG({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{lt(9)}}var Lm=new WeakSet,SR="",$m=[];function AR(n){return n.get(tO,r8)}function ON(){let n=[{provide:tO,useFactory:()=>{let e=!0;{let t=j(To);e=!!window._ejsas?.[t]}return e&&Fi("NgEventReplay"),e}}];return n.push({provide:js,useValue:()=>{let e=j(Xn),{injector:t}=e;if(!Lm.has(e)){let r=j(Xx);if(AR(t)){A8();let i=t.get(To),o=T8(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(E8(s,a,c),I8(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Ks,useFactory:()=>{let e=j(Xn),{injector:t}=e;return()=>{!AR(t)||Lm.has(e)||(Lm.add(e),e.onDestroy(()=>{Lm.delete(e);{let r=t.get(To);$E(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(C8);$G(r,t);let i=t.get(Xx);i.get(SR)?.forEach(b8),i.delete(SR);let o=r.instance;F8(t)?e.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),n}var $G=(n,e)=>{let t=e.get(To),r=window._ejsas[t],i=n.instance=new Rx(new Pm(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=kx(t);i.replayEarlyEventInfos(o),$E(t);let s=new xm(a=>{HG(e,a,a.currentTarget)});xx(i,s)};function HG(n,e,t){let r=(t&&t.getAttribute(Vy))??"";/d\d+/.test(r)?qG(r,n,e,t):e.eventPhase===zE.REPLAY&&sO(e,t)}function qG(n,e,t,r){$m.push({event:t,currentTarget:r}),Rq(e,n,GG)}function GG(n){let e=[...$m],t=new Set(n);$m=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(Vy);t.has(o)?sO(r,i):$m.push({event:r,currentTarget:i})}}var DR=!1;function WG(){DR||(DR=!0,k8(),cG(),vG(),dG(),yq(),ZH(),CH(),v$())}function KG(n){return n.whenStable()}function NN(){let n=[{provide:km,useFactory:()=>{let e=!0;return e=!!j(Tu,{optional:!0})?.get(cO,null),e&&Fi("NgHydration"),e}},{provide:js,useValue:()=>{yH(!1),j(km)&&(j8(Oy()),WG())},multi:!0}];return n.push({provide:eO,useFactory:()=>j(km)},{provide:Ks,useFactory:()=>{if(j(km)){let e=j(Xn);return()=>{KG(e).then(()=>{e.destroyed||WO(e)})}}return()=>{}},multi:!0}),In(n)}function Js(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Rr(n){return _E(n)}function Ec(n,e){return pE(n,e?.equal)}var MR=class{[Tr];constructor(e){this[Tr]=e}destroy(){this[Tr].destroy()}};function LN(n){let e=zs(n);if(!e)return null;let t=new vu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jt=new J("");var UN=null;function kr(){return UN}function nC(n){UN??=n}var lf=class{},uf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(BN),providedIn:"platform"})}return n})(),rC=new J(""),BN=(()=>{class n extends uf{_location;_history;_doc=j(jt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kr().getBaseHref(this._doc)}onPopState(t){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Jy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function FN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ni(n){return n&&n[0]!=="?"?`?${n}`:n}var ri=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(Xy),providedIn:"root"})}return n})(),Zy=new J(""),Xy=(()=>{class n extends ri{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Jy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ni(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(uf),ue(Zy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zs=(()=>{class n{_subject=new Rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=JG(FN(VN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ni(r))}normalize(t){return n.stripTrailingSlash(YG(this._basePath,VN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ni(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ni(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ni;static joinWithSlash=Jy;static stripTrailingSlash=FN;static \u0275fac=function(r){return new(r||n)(ue(ri))};static \u0275prov=X({token:n,factory:()=>QG(),providedIn:"root"})}return n})();function QG(){return new Zs(ue(ri))}function YG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VN(n){return n.replace(/\/index.html$/,"")}function JG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var sC=(()=>{class n extends ri{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Jy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(uf),ue(Zy,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var e_=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},tr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new e_(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),jN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);jN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Du),te(Gy),te(tC))};static \u0275dir=Et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function jN(n,e){n.context.$implicit=e.item}var un=(()=>{class n{_viewContainer;_context=new t_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Du),te(Gy))};static \u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),t_=class{$implicit=null;ngIf=null};function zN(n,e){if(n&&!n.createEmbeddedView)throw new ie(2020,!1)}function $N(n,e){return new ie(2100,!1)}var iC=class{createSubscription(e,t){return Rr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Rr(()=>e.unsubscribe())}},oC=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},ZG=new oC,XG=new iC,df=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ws(t))return ZG;if(Kb(t))return XG;throw $N(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(te(Ys,16))};static \u0275pipe=Gb({name:"async",type:n,pure:!1})}return n})();var e7=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ic=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw $N(n,t);return t.replace(e7,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Gb({name:"titlecase",type:n,pure:!0})}return n})();var zt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ar({})}return n})();function hf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var n_="browser",HN="server";function aC(n){return n===n_}function r_(n){return n===HN}var bc=class{};var qN=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new cC(j(jt),window)})}return n})(),cC=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=t7(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function t7(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var s_=new J(""),hC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ue(s_),ue(Oe))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),ff=class{_doc;constructor(e){this._doc=e}manager},i_="ng-app-id";function GN(n){for(let e of n)e.remove()}function WN(n,e){let t=e.createElement("style");return t.textContent=n,t}function n7(n,e,t,r){let i=n.head?.querySelectorAll(`style[${i_}="${e}"],link[${i_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(i_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function uC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var fC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=r_(o),n7(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,WN);r?.forEach(i=>this.addUsage(i,this.external,uC))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(GN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])GN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,WN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,uC(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(i_,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ue(jt),ue(To),ue(_b,8),ue(Li))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),lC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pC=/%COMP%/g;var QN="%COMP%",r7=`_nghost-${QN}`,i7=`_ngcontent-${QN}`,o7=!0,s7=new J("",{providedIn:"root",factory:()=>o7});function a7(n){return i7.replace(pC,n)}function c7(n){return r7.replace(pC,n)}function YN(n,e){return e.map(t=>t.replace(pC,n))}var gC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=h,this.platformIsServer=r_(a),this.defaultRenderer=new pf(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ri.ShadowDom&&(r=he($({},r),{encapsulation:Ri.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof o_?i.applyToHost(t):i instanceof gf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Ri.Emulated:o=new o_(c,u,r,this.appId,h,s,a,g,I);break;case Ri.ShadowDom:return new dC(c,u,t,r,s,a,this.nonce,g,I);default:o=new gf(c,u,r,h,s,a,g,I);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ue(hC),ue(fC),ue(To),ue(s7),ue(jt),ue(Li),ue(Oe),ue(_b),ue(Su,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),pf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(lC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(KN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(KN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=lC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Mo.DashCase|Mo.Important)?e.style.setProperty(t,r,i&Mo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Mo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kr().getGlobalEventTarget(this.doc,e),!e))throw new ie(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function KN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var dC=class extends pf{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=YN(i.id,h);for(let I of h){let T=document.createElement("style");a&&T.setAttribute("nonce",a),T.textContent=I,this.shadowRoot.appendChild(T)}let g=i.getExternalStyles?.();if(g)for(let I of g){let T=uC(I,o);a&&T.setAttribute("nonce",a),this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gf=class extends pf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?YN(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},o_=class extends gf{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,u,h),this.contentAttr=a7(h),this.hostAttr=c7(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var a_=class n extends lf{supportsDOMEvents=!0;static makeCurrent(){nC(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=l7();return t==null?null:u7(t)}resetBaseElement(){mf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hf(document.cookie,e)}},mf=null;function l7(){return mf=mf||document.head.querySelector("base"),mf?mf.getAttribute("href"):null}function u7(n){return new URL(n,document.baseURI).pathname}var d7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),ZN=(()=>{class n extends ff{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),JN=["alt","control","meta","shift"],h7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},XN=(()=>{class n extends ff{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JN.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=h7[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JN.forEach(s=>{if(s!==i){let a=f7[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function mC(n,e,t){return kN($({rootComponent:n,platformRef:t?.platformRef},p7(e)))}function p7(n){return{appProviders:[...v7,...n?.providers??[]],platformProviders:_7}}function g7(){a_.makeCurrent()}function m7(){return new xi}function y7(){return Kk(document),document}var _7=[{provide:Li,useValue:n_},{provide:yb,useValue:g7,multi:!0},{provide:jt,useFactory:y7}];var v7=[{provide:by,useValue:"root"},{provide:xi,useFactory:m7},{provide:s_,useClass:ZN,multi:!0,deps:[jt]},{provide:s_,useClass:XN,multi:!0,deps:[jt]},gC,fC,hC,{provide:_u,useExisting:gC},{provide:bc,useClass:d7},[]];var xu=class{},yf=class{},Oo=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var l_=class{encodeKey(e){return eL(e)}encodeValue(e){return eL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function w7(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var E7=/%(\d[a-f0-9])/gi,I7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eL(n){return encodeURIComponent(n).replace(E7,(e,t)=>I7[t]??e)}function c_(n){return`${n}`}var ko=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new l_,e.fromString){if(e.fromObject)throw new ie(2805,!1);this.map=w7(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(c_):[c_(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(c_(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(c_(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var u_=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function b7(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function tL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nL(n){return typeof Blob<"u"&&n instanceof Blob}function rL(n){return typeof FormData<"u"&&n instanceof FormData}function C7(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var iL="Content-Type",oL="Accept",sL="X-Request-URL",aL="text/plain",cL="application/json",T7=`${cL}, ${aL}, */*`,Pu=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(b7(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Oo,this.context??=new u_,!this.params)this.params=new ko,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||tL(this.body)||nL(this.body)||rL(this.body)||C7(this.body)?this.body:this.body instanceof ko?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rL(this.body)?null:nL(this.body)?this.body.type||null:tL(this.body)?null:typeof this.body=="string"?aL:this.body instanceof ko?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?cL:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((I,T)=>I.set(T,e.setHeaders[T]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((I,T)=>I.set(T,e.setParams[T]),h)),new n(t,r,s,{params:h,headers:u,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Cc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Cc||{}),Ru=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Oo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},d_=class n extends Ru{constructor(e={}){super(e)}type=Cc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tc=class n extends Ru{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Cc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_f=class extends Ru{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},S7=200,A7=204;function yC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var f_=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Pu)o=t;else{let c;i.headers instanceof Oo?c=i.headers:c=new Oo(i.headers);let u;i.params&&(i.params instanceof ko?u=i.params:u=new ko({fromObject:i.params})),o=new Pu(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=pe(o).pipe(Si(c=>this.handler.handle(c)));if(t instanceof Pu||i.observe==="events")return s;let a=s.pipe(Pn(c=>c instanceof Tc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ie(2806,!1);return c.body}));case"blob":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ie(2807,!1);return c.body}));case"text":return a.pipe(me(c=>{if(c.body!==null&&typeof c.body!="string")throw new ie(2808,!1);return c.body}));case"json":default:return a.pipe(me(c=>c.body))}case"response":return a;default:throw new ie(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ko().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yC(i,r))}post(t,r,i={}){return this.request("POST",t,yC(i,r))}put(t,r,i={}){return this.request("PUT",t,yC(i,r))}static \u0275fac=function(r){return new(r||n)(ue(xu))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var D7=new J("");function M7(n,e){return e(n)}function P7(n,e,t){return(r,i)=>mn(t,()=>e(r,o=>n(o,i)))}var lL=new J(""),vC=new J(""),uL=new J("",{providedIn:"root",factory:()=>!0});var h_=(()=>{class n extends xu{backend;injector;chain=null;pendingTasks=j(Ni);contributeToStability=j(uL);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(lL),...this.injector.get(vC,[])]));this.chain=r.reduceRight((i,o)=>P7(i,o,this.injector),M7)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(rc(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ue(yf),ue(an))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var x7=/^\)\]\}',?\n/,R7=RegExp(`^${sL}:`,"m");function k7(n){return"responseURL"in n&&n.responseURL?n.responseURL:R7.test(n.getAllResponseHeaders())?n.getResponseHeader(sL):null}var _C=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ie(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ct(r.\u0275loadImpl()):pe(null)).pipe(Rn(()=>new be(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((L,O)=>s.setRequestHeader(L,O.join(","))),t.headers.has(oL)||s.setRequestHeader(oL,T7),!t.headers.has(iL)){let L=t.detectContentTypeHeader();L!==null&&s.setRequestHeader(iL,L)}if(t.responseType){let L=t.responseType.toLowerCase();s.responseType=L!=="json"?L:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let L=s.statusText||"OK",O=new Oo(s.getAllResponseHeaders()),q=k7(s)||t.url;return c=new d_({headers:O,status:s.status,statusText:L,url:q}),c},h=()=>{let{headers:L,status:O,statusText:q,url:ee}=u(),W=null;O!==A7&&(W=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=W?S7:0);let de=O>=200&&O<300;if(t.responseType==="json"&&typeof W=="string"){let je=W;W=W.replace(x7,"");try{W=W!==""?JSON.parse(W):null}catch(ge){W=je,de&&(de=!1,W={error:ge,text:W})}}de?(o.next(new Tc({body:W,headers:L,status:O,statusText:q,url:ee||void 0})),o.complete()):o.error(new _f({error:W,headers:L,status:O,statusText:q,url:ee||void 0}))},g=L=>{let{url:O}=u(),q=new _f({error:L,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(q)},I=!1,T=L=>{I||(o.next(u()),I=!0);let O={type:Cc.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(O.total=L.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},k=L=>{let O={type:Cc.UploadProgress,loaded:L.loaded};L.lengthComputable&&(O.total=L.total),o.next(O)};return s.addEventListener("load",h),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",T),a!==null&&s.upload&&s.upload.addEventListener("progress",k)),s.send(a),o.next({type:Cc.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",h),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",T),a!==null&&s.upload&&s.upload.removeEventListener("progress",k)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ue(bc))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),dL=new J(""),O7="XSRF-TOKEN",N7=new J("",{providedIn:"root",factory:()=>O7}),L7="X-XSRF-TOKEN",F7=new J("",{providedIn:"root",factory:()=>L7}),vf=class{},V7=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=hf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ue(jt),ue(N7))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function U7(n,e){let t=n.url.toLowerCase();if(!j(dL)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=j(vf).getToken(),i=j(F7);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function wC(...n){let e=[f_,_C,h_,{provide:xu,useExisting:h_},{provide:yf,useFactory:()=>j(D7,{optional:!0})??j(_C)},{provide:lL,useValue:U7,multi:!0},{provide:dL,useValue:!0},{provide:vf,useClass:V7}];for(let t of n)e.push(...t.\u0275providers);return In(e)}var B7=new J(""),j7="b",z7="h",$7="s",H7="st",q7="u",G7="rt",EC=new J(""),W7=["GET","HEAD"];function K7(n,e){let I=j(EC),{isCacheActive:t}=I,r=Lh(I,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!W7.includes(o)||!r.includeRequestsWithAuthHeaders&&Q7(n)||r.filter?.(n)===!1)return e(n);let s=j(Tu);if(j(B7,{optional:!0}))throw new ie(2803,!1);let c=n.url,u=Y7(n,c),h=s.get(u,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[j7]:T,[G7]:k,[z7]:L,[$7]:O,[H7]:q,[q7]:ee}=h,W=T;switch(k){case"arraybuffer":W=new TextEncoder().encode(T).buffer;break;case"blob":W=new Blob([T]);break}let de=new Oo(L);return pe(new Tc({body:W,headers:de,status:O,statusText:q,url:ee}))}return e(n).pipe(on(T=>{T instanceof Tc}))}function Q7(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function hL(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Y7(n,e){let{params:t,method:r,responseType:i}=n,o=hL(t),s=n.serializeBody();s instanceof URLSearchParams?s=hL(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=J7(a);return c}function J7(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function fL(n){return[{provide:EC,useFactory:()=>(Fi("NgHttpTransferCache"),$({isCacheActive:!0},n))},{provide:vC,useValue:K7,multi:!0},{provide:Ks,multi:!0,useFactory:()=>{let e=j(Xn),t=j(EC);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var pL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ue(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(p_||{});function X7(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function gL(){return X7(p_.EventReplay,ON())}function mL(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(p_.HttpTransferCacheOptions);return In([[],NN(),t.has(p_.NoHttpTransferCache)||r?[]:fL({}),e])}var Ne="primary",Rf=Symbol("RouteTitle"),SC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Dc(n){return new SC(n)}function CL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}function zi(n,e){let t=n?AC(n):void 0,r=e?AC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!TL(n[i],e[i]))return!1;return!0}function AC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function SL(n){return n.length>0?n[n.length-1]:null}function ra(n){return xE(n)?n:Ws(n)?ct(Promise.resolve(n)):pe(n)}var nW={exact:DL,subset:ML},AL={exact:rW,subset:iW,ignored:()=>!0};function yL(n,e,t){return nW[t.paths](n.root,e.root,t.matrixParams)&&AL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rW(n,e){return zi(n,e)}function DL(n,e,t){if(!Sc(n.segments,e.segments)||!y_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DL(n.children[r],e.children[r],t))return!1;return!0}function iW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TL(n[t],e[t]))}function ML(n,e,t){return PL(n,e,e.segments,t)}function PL(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Sc(i,t)||e.hasChildren()||!y_(i,t,r))}else if(n.segments.length===t.length){if(!Sc(n.segments,t)||!y_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ML(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Sc(n.segments,i)||!y_(n.segments,i,r)||!n.children[Ne]?!1:PL(n.children[Ne],e,o,r)}}function y_(n,e,t){return e.every((r,i)=>AL[t](n[i].parameters,r.parameters))}var Hi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new st([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Dc(this.queryParams),this._queryParamMap}toString(){return aW.serialize(this)}},st=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return __(this)}},Xs=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Dc(this.parameters),this._parameterMap}toString(){return RL(this)}};function oW(n,e){return Sc(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}function Sc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sW(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ne&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ne&&(t=t.concat(e(i,r)))}),t}var Mc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new ea,providedIn:"root"})}return n})(),ea=class{parse(e){let t=new MC(e);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wf(e.root,!0)}`,r=uW(e.queryParams),i=typeof e.fragment=="string"?`#${cW(e.fragment)}`:"";return`${t}${r}${i}`}},aW=new ea;function __(n){return n.segments.map(e=>RL(e)).join("/")}function wf(n,e){if(!n.hasChildren())return __(n);if(e){let t=n.children[Ne]?wf(n.children[Ne],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ne&&r.push(`${i}:${wf(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sW(n,(r,i)=>i===Ne?[wf(n.children[Ne],!1)]:[`${i}:${wf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ne]!=null?`${__(n)}/${t[0]}`:`${__(n)}/(${t.join("//")})`}}function xL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function g_(n){return xL(n).replace(/%3B/gi,";")}function cW(n){return encodeURI(n)}function DC(n){return xL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function v_(n){return decodeURIComponent(n)}function _L(n){return v_(n.replace(/\+/g,"%20"))}function RL(n){return`${DC(n.path)}${lW(n.parameters)}`}function lW(n){return Object.entries(n).map(([e,t])=>`;${DC(e)}=${DC(t)}`).join("")}function uW(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${g_(t)}=${g_(i)}`).join("&"):`${g_(t)}=${g_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dW=/^[^\/()?;#]+/;function IC(n){let e=n.match(dW);return e?e[0]:""}var hW=/^[^\/()?;=#]+/;function fW(n){let e=n.match(hW);return e?e[0]:""}var pW=/^[^=?&#]+/;function gW(n){let e=n.match(pW);return e?e[0]:""}var mW=/^[^&#]+/;function yW(n){let e=n.match(mW);return e?e[0]:""}var MC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ne]=new st(e,t)),r}parseSegment(){let e=IC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Xs(v_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=IC(this.remaining);i&&(r=i,this.capture(r))}e[v_(t)]=v_(r)}parseQueryParam(e){let t=gW(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=yW(this.remaining);s&&(r=s,this.capture(r))}let i=_L(t),o=_L(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=IC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ne);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ne]:new st([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function kL(n){return n.segments.length>0?new st([],{[Ne]:n}):n}function OL(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=OL(i);if(r===Ne&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new st(n.segments,e);return _W(t)}function _W(n){if(n.numberOfChildren===1&&n.children[Ne]){let e=n.children[Ne];return new st(n.segments.concat(e.segments),e.children)}return n}function ta(n){return n instanceof Hi}function NL(n,e,t=null,r=null){let i=LL(n);return FL(i,e,t,r)}function LL(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new st(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=kL(r);return e??i}function FL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return bC(i,i,i,t,r);let o=vW(e);if(o.toRoot())return bC(i,i,new st([],{}),t,r);let s=wW(o,i,n),a=s.processChildren?If(s.segmentGroup,s.index,o.commands):UL(s.segmentGroup,s.index,o.commands);return bC(i,s.segmentGroup,a,t,r)}function E_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cf(n){return typeof n=="object"&&n!=null&&n.outlets}function bC(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=VL(n,e,t);let a=kL(OL(s));return new Hi(a,o,i)}function VL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=VL(o,e,t)}),new st(n.segments,r)}var I_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E_(r[0]))throw new ie(4003,!1);let i=r.find(Cf);if(i&&i!==SL(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vW(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new I_(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new I_(t,e,r)}var Nu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function wW(n,e,t){if(n.isAbsolute)return new Nu(e,!0,0);if(!t)return new Nu(e,!1,NaN);if(t.parent===null)return new Nu(t,!0,0);let r=E_(n.commands[0])?0:1,i=t.segments.length-1+r;return EW(t,i,n.numberOfDoubleDots)}function EW(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Nu(r,!1,i-o)}function IW(n){return Cf(n[0])?n[0].outlets:{[Ne]:n}}function UL(n,e,t){if(n??=new st([],{}),n.segments.length===0&&n.hasChildren())return If(n,e,t);let r=bW(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new st(n.segments.slice(0,r.pathIndex),{});return o.children[Ne]=new st(n.segments.slice(r.pathIndex),n.children),If(o,0,i)}else return r.match&&i.length===0?new st(n.segments,{}):r.match&&!n.hasChildren()?PC(n,e,t):r.match?If(n,0,i):PC(n,e,t)}function If(n,e,t){if(t.length===0)return new st(n.segments,{});{let r=IW(t),i={};if(Object.keys(r).some(o=>o!==Ne)&&n.children[Ne]&&n.numberOfChildren===1&&n.children[Ne].segments.length===0){let o=If(n.children[Ne],e,t);return new st(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=UL(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new st(n.segments,i)}}function bW(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Cf(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!wL(c,u,s))return o;r+=2}else{if(!wL(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function PC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Cf(o)){let c=CW(o.outlets);return new st(r,c)}if(i===0&&E_(t[0])){let c=n.segments[e];r.push(new Xs(c.path,vL(t[0]))),i++;continue}let s=Cf(o)?o.outlets[Ne]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&E_(a)?(r.push(new Xs(s,vL(a))),i+=2):(r.push(new Xs(s,{})),i++)}return new st(r,{})}function CW(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=PC(new st([],{}),0,r))}),e}function vL(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function wL(n,e,t){return n==t.path&&zi(e,t.parameters)}var w_="imperative",dn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dn||{}),yr=class{id;url;constructor(e,t){this.id=e,this.url=t}},na=class extends yr{type=dn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends yr{urlAfterRedirects;type=dn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nr||{}),Fu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Fu||{}),$i=class extends yr{reason;code;type=dn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qi=class extends yr{reason;code;type=dn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Vu=class extends yr{error;target;type=dn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tf=class extends yr{urlAfterRedirects;state;type=dn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class extends yr{urlAfterRedirects;state;type=dn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends yr{urlAfterRedirects;state;shouldActivate;type=dn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},T_=class extends yr{urlAfterRedirects;state;type=dn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},S_=class extends yr{urlAfterRedirects;state;type=dn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A_=class{route;type=dn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},D_=class{route;type=dn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},M_=class{snapshot;type=dn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},P_=class{snapshot;type=dn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{snapshot;type=dn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R_=class{snapshot;type=dn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uu=class{routerEvent;position;anchor;type=dn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sf=class{},Bu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TW(n,e){return n.providers&&!n._injector&&(n._injector=Mu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ii(n){return n.outlet||Ne}function SW(n,e){let t=n.filter(r=>ii(r)===e);return t.push(...n.filter(r=>ii(r)!==e)),t}function kf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var k_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return kf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Pc(this.rootInjector)}},Pc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new k_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ue(an))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=RC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RC(e,this._root).map(t=>t.value)}};function xC(n,e){if(n===e.value)return e;for(let t of e.children){let r=xC(n,t);if(r)return r}return null}function RC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=RC(n,t);if(r.length)return r.unshift(e),r}return[]}var mr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ou(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Af=class extends O_{snapshot;constructor(e,t){super(e),this.snapshot=t,BC(this,e)}toString(){return this.snapshot.toString()}};function BL(n){let e=AW(n),t=new Lt([new Xs("",{})]),r=new Lt({}),i=new Lt({}),o=new Lt({}),s=new Lt(""),a=new kn(t,r,o,s,i,Ne,n,e.root);return a.snapshot=e.root,new Af(new mr(a,[]),e)}function AW(n){let e={},t={},r={},i="",o=new Ac([],e,r,i,t,Ne,n,null,{});return new Df("",new mr(o,[]))}var kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(me(u=>u[Rf]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Dc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Dc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function N_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&zL(i)&&(r.resolve[Rf]=i.title),r}var Ac=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rf]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Df=class extends O_{url;constructor(e,t){super(t),this.url=e,BC(this,t)}toString(){return jL(this._root)}};function BC(n,e){e.value._routerState=n,e.children.forEach(t=>BC(n,t))}function jL(n){let e=n.children.length>0?` { ${n.children.map(jL).join(", ")} } `:"";return`${n.value}${e}`}function CC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zi(e.params,t.params)||n.paramsSubject.next(t.params),tW(e.url,t.url)||n.urlSubject.next(t.url),zi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kC(n,e){let t=zi(n.params,e.params)&&oW(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||kC(n.parent,e.parent))}function zL(n){return typeof n.title=="string"||n.title===null}var $L=new J(""),Of=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ne;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=Uk(void 0);parentContexts=j(Pc);location=j(Du);changeDetector=j(Ys);inputBinder=j(Nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new OC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pr]})}return n})(),OC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===kn?this.route:e===Pc?this.childContexts:e===$L?this.outletData:this.parent.get(e,t)}},Nf=new J(""),jC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=nc([r.queryParams,r.params,r.data]).pipe(Rn(([o,s,a],c)=>(a=$($($({},o),s),a),c===0?pe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=LN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),zC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ye(0,"router-outlet")},dependencies:[Of],encapsulation:2})}return n})();function $C(n){let e=n.children&&n.children.map($C),t=e?he($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=zC),t}function DW(n,e,t){let r=Mf(n,e._root,t?t._root:void 0);return new Af(r,e)}function Mf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=MW(n,e,t);return new mr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mf(n,a)),s}}let r=PW(e.value),i=e.children.map(o=>Mf(n,o));return new mr(r,i)}}function MW(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mf(n,r,i);return Mf(n,r)})}function PW(n){return new kn(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var ju=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},HL="ngNavigationCancelingError";function L_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qL(!1,nr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function qL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[HL]=!0,t.cancellationCode=e,t}function xW(n){return GL(n)&&ta(n.url)}function GL(n){return!!n&&n[HL]}var RW=(n,e,t,r)=>me(i=>(new NC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),NC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),CC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ou(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ou(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ou(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ou(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new R_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new P_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(CC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),CC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},F_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Lu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function kW(n,e,t){let r=n._root,i=e?e._root:null;return Ef(r,i,t,[r.value])}function OW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $u(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!NR(n)?n:e.get(n):r}function Ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ou(e);return n.children.forEach(s=>{NW(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bf(a,t.getContext(s),i)),i}function NW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=LW(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new F_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ef(n,e,a?a.children:null,r,i):Ef(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Lu(a.outlet.component,s))}else s&&bf(e,a,i),i.canActivateChecks.push(new F_(r)),o.component?Ef(n,null,a?a.children:null,r,i):Ef(n,null,t,r,i);return i}function LW(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Sc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sc(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kC(n,e)||!zi(n.queryParams,e.queryParams);case"paramsChange":default:return!kC(n,e)}}function bf(n,e,t){let r=Ou(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bf(s,e.children.getContext(o),t):bf(s,null,t):bf(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Lu(e.outlet.component,i)):t.canDeactivateChecks.push(new Lu(null,i)):t.canDeactivateChecks.push(new Lu(null,i))}function Lf(n){return typeof n=="function"}function FW(n){return typeof n=="boolean"}function VW(n){return n&&Lf(n.canLoad)}function UW(n){return n&&Lf(n.canActivate)}function BW(n){return n&&Lf(n.canActivateChild)}function jW(n){return n&&Lf(n.canDeactivate)}function zW(n){return n&&Lf(n.canMatch)}function WL(n){return n instanceof bo||n?.name==="EmptyError"}var m_=Symbol("INITIAL_VALUE");function zu(){return Rn(n=>nc(n.map(e=>e.pipe(xn(1),Sm(m_)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===m_)return m_;if(t===!1||$W(t))return t}return!0}),Pn(e=>e!==m_),xn(1)))}function $W(n){return ta(n)||n instanceof ju}function HW(n,e){return Ft(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?pe(he($({},t),{guardsResult:!0})):qW(s,r,i,n).pipe(Ft(a=>a&&FW(a)?GW(r,o,n,e):pe(a)),me(a=>he($({},t),{guardsResult:a})))})}function qW(n,e,t,r){return ct(n).pipe(Ft(i=>JW(i.component,i.route,t,e,r)),Co(i=>i!==!0,!0))}function GW(n,e,t,r){return ct(e).pipe(Si(i=>eu(KW(i.route.parent,r),WW(i.route,r),YW(n,i.path,t),QW(n,i.route,t))),Co(i=>i!==!0,!0))}function WW(n,e){return n!==null&&e&&e(new x_(n)),pe(!0)}function KW(n,e){return n!==null&&e&&e(new M_(n)),pe(!0)}function QW(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>bm(()=>{let s=kf(e)??t,a=$u(o,s),c=UW(a)?a.canActivate(e,n):mn(s,()=>a(e,n));return ra(c).pipe(Co())}));return pe(i).pipe(zu())}function YW(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>OW(s)).filter(s=>s!==null).map(s=>bm(()=>{let a=s.guards.map(c=>{let u=kf(s.node)??t,h=$u(c,u),g=BW(h)?h.canActivateChild(r,n):mn(u,()=>h(r,n));return ra(g).pipe(Co())});return pe(a).pipe(zu())}));return pe(o).pipe(zu())}function JW(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(a=>{let c=kf(e)??i,u=$u(a,c),h=jW(u)?u.canDeactivate(n,e,t,r):mn(c,()=>u(n,e,t,r));return ra(h).pipe(Co())});return pe(s).pipe(zu())}function ZW(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(s=>{let a=$u(s,n),c=VW(a)?a.canLoad(e,t):mn(n,()=>a(e,t));return ra(c)});return pe(o).pipe(zu(),KL(r))}function KL(n){return rm(on(e=>{if(typeof e!="boolean")throw L_(n,e)}),me(e=>e===!0))}function XW(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let a=$u(s,n),c=zW(a)?a.canMatch(e,t):mn(n,()=>a(e,t));return ra(c)});return pe(o).pipe(zu(),KL(r))}var Pf=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ku(n){return Zl(new Pf(n))}function eK(n){return Zl(new ie(4e3,!1))}function tK(n){return Zl(qL(!1,nr.GuardRejected))}var LC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Ne])return eK(`${e.redirectTo}`);i=i.children[Ne]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:h,url:g,outlet:I,params:T,data:k,title:L}=i,O=mn(o,()=>a({params:T,data:k,queryParams:c,fragment:u,routeConfig:h,url:g,outlet:I,title:L}));if(O instanceof Hi)throw new xf(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xf(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Hi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new st(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},FC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nK(n,e,t,r,i){let o=QL(n,e,t);return o.matched?(r=TW(e,r),XW(r,e,t,i).pipe(me(s=>s===!0?o:$({},FC)))):pe(o)}function QL(n,e,t){if(e.path==="**")return rK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},FC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||CL)(t,n,e);if(!i)return $({},FC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rK(n){return{matched:!0,parameters:n.length>0?SL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function EL(n,e,t,r){return t.length>0&&sK(n,t,r)?{segmentGroup:new st(e,oK(r,new st(t,n.children))),slicedSegments:[]}:t.length===0&&aK(n,t,r)?{segmentGroup:new st(n.segments,iK(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new st(n.segments,n.children),slicedSegments:t}}function iK(n,e,t,r){let i={};for(let o of t)if(U_(n,e,o)&&!r[ii(o)]){let s=new st([],{});i[ii(o)]=s}return $($({},r),i)}function oK(n,e){let t={};t[Ne]=e;for(let r of n)if(r.path===""&&ii(r)!==Ne){let i=new st([],{});t[ii(r)]=i}return t}function sK(n,e,t){return t.some(r=>U_(n,e,r)&&ii(r)!==Ne)}function aK(n,e,t){return t.some(r=>U_(n,e,r))}function U_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cK(n,e,t){return e.length===0&&!n.children[t]}var VC=class{};function lK(n,e,t,r,i,o,s="emptyOnly"){return new UC(n,e,t,r,i,s,o).recognize()}var uK=31,UC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new LC(this.urlSerializer,this.urlTree)}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=EL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new mr(r,t),o=new Df("",i),s=NL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ac([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ne,t).pipe(me(r=>({children:r,rootSnapshot:t})),ur(r=>{if(r instanceof xf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pf?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(me(s=>s instanceof mr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ct(o).pipe(Si(s=>{let a=r.children[s],c=SW(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Tm((s,a)=>(s.push(...a),s)),Vs(null),kE(),Ft(s=>{if(s===null)return ku(r);let a=YL(s);return dK(a),pe(a)}))}processSegment(e,t,r,i,o,s,a){return ct(t).pipe(Si(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ur(u=>{if(u instanceof Pf)return pe(null);throw u}))),Co(c=>!!c),ur(c=>{if(WL(c))return cK(r,i,o)?pe(new VC):ku(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ii(r)!==s&&(s===Ne||!U_(i,o,r))?ku(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ku(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:g,remainingSegments:I}=QL(t,i,o);if(!c)return ku(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uK&&(this.allowRedirects=!1));let T=new Ac(o,u,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,IL(i),ii(i),i.component??i._loadedComponent??null,i,bL(i)),k=N_(T,a,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let L=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,T,e);return this.applyRedirects.lineralizeSegments(i,L).pipe(Ft(O=>this.processSegment(e,r,t,O.concat(I),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=nK(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Rn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Rn(({routes:u})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:T}=c,k=new Ac(I,g,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,IL(r),ii(r),r.component??r._loadedComponent??null,r,bL(r)),L=N_(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(L.params),k.data=Object.freeze(L.data);let{segmentGroup:O,slicedSegments:q}=EL(t,I,T,u);if(q.length===0&&O.hasChildren())return this.processChildren(h,u,O,k).pipe(me(W=>new mr(k,W)));if(u.length===0&&q.length===0)return pe(new mr(k,[]));let ee=ii(r)===o;return this.processSegment(h,u,O,q,ee?Ne:o,!0,k).pipe(me(W=>new mr(k,W instanceof mr?[W]:[])))}))):ku(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):ZW(e,t,r,this.urlSerializer).pipe(Ft(i=>i?this.configLoader.loadChildren(e,t).pipe(on(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):tK(t))):pe({routes:[],injector:e})}};function dK(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}function hK(n){let e=n.value.routeConfig;return e&&e.path===""}function YL(n){let e=[],t=new Set;for(let r of n){if(!hK(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=YL(r.children);e.push(new mr(r.value,i))}return e.filter(r=>!t.has(r))}function IL(n){return n.data||{}}function bL(n){return n.resolve||{}}function fK(n,e,t,r,i,o){return Ft(s=>lK(n,e,t,r,s.extractedUrl,i,o).pipe(me(({state:a,tree:c})=>he($({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function pK(n,e){return Ft(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of JL(c))s.add(u);let a=0;return ct(s).pipe(Si(c=>o.has(c)?gK(c,r,n,e):(c.data=N_(c,c.parent,n).resolve,pe(void 0))),on(()=>a++),tu(1),Ft(c=>a===s.size?pe(t):Gn))})}function JL(n){let e=n.children.map(t=>JL(t)).flat();return[n,...e]}function gK(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!zL(i)&&(o[Rf]=i.title),mK(o,n,e,r).pipe(me(s=>(n._resolvedData=s,n.data=N_(n,n.parent,t).resolve,null)))}function mK(n,e,t,r){let i=AC(n);if(i.length===0)return pe({});let o={};return ct(i).pipe(Ft(s=>yK(n[s],e,t,r).pipe(Co(),on(a=>{if(a instanceof ju)throw L_(new ea,a);o[s]=a}))),tu(1),me(()=>o),ur(s=>WL(s)?Gn:Zl(s)))}function yK(n,e,t,r){let i=kf(e)??r,o=$u(n,i),s=o.resolve?o.resolve(e,t):mn(i,()=>o(e,t));return ra(s)}function TC(n){return Rn(e=>{let t=n(e);return t?ct(t).pipe(me(()=>e)):pe(e)})}var HC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ne);return r}getResolvedTitleForRoute(t){return t.data[Rf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(ZL),providedIn:"root"})}return n})(),ZL=(()=>{class n extends HC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ue(pL))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xc=new J("",{providedIn:"root",factory:()=>({})}),Rc=new J(""),B_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(MN);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ra(t.loadComponent()).pipe(me(eF),on(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rc(()=>{this.componentLoaders.delete(t)})),i=new Kl(r,()=>new Rt).pipe(Wl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=XL(r,this.compiler,t,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(r)})),s=new Kl(o,()=>new Rt).pipe(Wl());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XL(n,e,t,r){return ra(n.loadChildren()).pipe(me(eF),Ft(i=>i instanceof qb||Array.isArray(i)?pe(i):ct(e.compileModuleAsync(i))),me(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Rc,[],{optional:!0,self:!0}).flat()),{routes:s.map($C),injector:o}}))}function _K(n){return n&&typeof n=="object"&&"default"in n}function eF(n){return _K(n)?n.default:n}var j_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(vK),providedIn:"root"})}return n})(),vK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qC=new J(""),GC=new J("");function tF(n,e,t){let r=n.get(GC),i=n.get(jt);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),wK(n))),{onViewTransitionCreated:c}=r;return c&&mn(n,()=>c({transition:a,from:e,to:t})),s})}function wK(n){return new Promise(e=>{Ny({read:()=>setTimeout(e)},{injector:n})})}var WC=new J(""),z_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Rt;transitionAbortSubject=new Rt;configLoader=j(B_);environmentInjector=j(an);destroyRef=j(yc);urlSerializer=j(Mc);rootContexts=j(Pc);location=j(Zs);inputBindingEnabled=j(Nf,{optional:!0})!==null;titleStrategy=j(HC);options=j(xc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(j_);createViewTransition=j(qC,{optional:!0});navigationErrorHandler=j(WC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new A_(i)),r=i=>this.events.next(new D_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Lt(null),this.transitions.pipe(Pn(r=>r!==null),Rn(r=>{let i=!1,o=!1;return pe(r).pipe(Rn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),Gn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new qi(s.id,this.urlSerializer.serialize(s.rawUrl),u,Fu.IgnoredSameUrlNavigation)),s.resolve(!1),Gn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return pe(s).pipe(Rn(u=>(this.events.next(new na(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Gn:Promise.resolve(u))),fK(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),on(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=he($({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Tf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:h,source:g,restoredState:I,extras:T}=s,k=new na(u,this.urlSerializer.serialize(h),g,I);this.events.next(k);let L=BL(this.rootComponentType).snapshot;return this.currentTransition=r=he($({},s),{targetSnapshot:L,urlAfterRedirects:h,extras:he($({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,pe(r)}else{let u="";return this.events.next(new qi(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Fu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Gn}}),on(s=>{let a=new b_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),me(s=>(this.currentTransition=r=he($({},s),{guards:kW(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),HW(this.environmentInjector,s=>this.events.next(s)),on(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw L_(this.urlSerializer,s.guardsResult);let a=new C_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Pn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",nr.GuardRejected),!1)),TC(s=>{if(s.guards.canActivateChecks.length!==0)return pe(s).pipe(on(a=>{let c=new T_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Rn(a=>{let c=!1;return pe(a).pipe(pK(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",nr.NoDataFromResolver)}}))}),on(a=>{let c=new S_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),TC(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(on(h=>{c.component=h}),me(()=>{})));for(let h of c.children)u.push(...a(h));return u};return nc(a(s.targetSnapshot.root)).pipe(Vs(null),xn(1))}),TC(()=>this.afterPreactivation()),Rn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ct(c).pipe(me(()=>r)):pe(r)}),me(s=>{let a=DW(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he($({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),on(()=>{this.events.next(new Sf)}),RW(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),xn(1),on({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),nu(this.transitionAbortSubject.pipe(on(s=>{throw s}))),rc(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ur(s=>{if(this.destroyed)return r.resolve(!1),Gn;if(o=!0,GL(s))this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),xW(s)?this.events.next(new Bu(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Vu(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=mn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ju){let{message:u,cancellationCode:h}=L_(this.urlSerializer,c);this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new Bu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Gn}))}))}cancelNavigationTransition(t,r,i){let o=new $i(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EK(n){return n!==w_}var nF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(IK),providedIn:"root"})}return n})(),V_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IK=(()=>{class n extends V_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rF=(()=>{class n{urlSerializer=j(Mc);options=j(xc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Zs);urlHandlingStrategy=j(j_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Hi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Hi?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=BL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>j(bK),providedIn:"root"})}return n})(),bK=(()=>{class n extends rF{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof na?this.updateStateMemento():t instanceof qi?this.commitTransition(r):t instanceof Tf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof $i&&(t.code===nr.GuardRejected||t.code===nr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Vu?this.restoreHistory(r,!0):t instanceof Or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=$($({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $_(n,e){n.events.pipe(Pn(t=>t instanceof Or||t instanceof $i||t instanceof Vu||t instanceof qi),me(t=>t instanceof Or||t instanceof qi?0:(t instanceof $i?t.code===nr.Redirect||t.code===nr.SupersededByNewNavigation:!1)?2:1),Pn(t=>t!==2),xn(1)).subscribe(()=>{e()})}var CK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},It=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(Wb);stateManager=j(rF);options=j(xc,{optional:!0})||{};pendingTasks=j(Ni);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(z_);urlSerializer=j(Mc);location=j(Zs);urlHandlingStrategy=j(j_);_events=new Rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(nF);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Rc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Nf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $i&&r.code!==nr.Redirect&&r.code!==nr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Or)this.navigated=!0;else if(r instanceof Bu){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EK(i.source)},s);this.scheduleNavigation(a,w_,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}AK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),w_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($C),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=LL(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return FL(g,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ta(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,w_,null,r)}navigate(t,r={skipLocationChange:!1}){return SK(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},CK):r===!1?i=$({},TK):i=r,ta(t))return yL(this.currentUrlTree,t,i);let o=this.parseUrl(t);return yL(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((g,I)=>{a=g,c=I});let h=this.pendingTasks.add();return $_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SK(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function AK(n){return!(n instanceof Sf)&&!(n instanceof Bu)}var rr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Rt;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Or&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ta(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:pO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ta(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(te(It),te(kn),pb("tabindex"),te(Ro),te(gr),te(ri))};static \u0275dir=Et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&af("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Js],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Js],replaceUrl:[2,"replaceUrl","replaceUrl",Js],routerLink:"routerLink"},features:[pr]})}return n})();var Ff=class{};var iF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(t=>t instanceof Or),Si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Mu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ct(i).pipe(Xl())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let o=i.pipe(Ft(s=>s===null?pe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ct([o,s]).pipe(Xl())}else return o})}static \u0275fac=function(r){return new(r||n)(ue(It),ue(an),ue(Ff),ue(B_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oF=new J(""),xK=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof na?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qi&&t.code===Fu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){YO()};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function QC(n,...e){return In([{provide:Rc,multi:!0,useValue:n},[],{provide:kn,useFactory:sF,deps:[It]},{provide:Ks,multi:!0,useFactory:aF},e.map(t=>t.\u0275providers)])}function sF(n){return n.routerState.root}function Vf(n,e){return{\u0275kind:n,\u0275providers:e}}function aF(){let n=j(Tt);return e=>{let t=n.get(Xn);if(e!==t.components[0])return;let r=n.get(It),i=n.get(cF);n.get(YC)===1&&r.initialNavigation(),n.get(dF,null,Fe.Optional)?.setUpPreloading(),n.get(oF,null,Fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cF=new J("",{factory:()=>new Rt}),YC=new J("",{providedIn:"root",factory:()=>1});function lF(){let n=[{provide:YC,useValue:0},Qb(()=>{let e=j(Tt);return e.get(rC,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(It),o=e.get(cF);$_(i,()=>{r(!0)}),e.get(z_).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))})];return Vf(2,n)}function uF(){let n=[Qb(()=>{j(It).setUpLocationChangeListener()}),{provide:YC,useValue:2}];return Vf(3,n)}var dF=new J("");function hF(n){return Vf(0,[{provide:dF,useExisting:iF},{provide:Ff,useExisting:n}])}function fF(){return Vf(8,[jC,{provide:Nf,useExisting:jC}])}function pF(n){Fi("NgRouterViewTransitions");let e=[{provide:qC,useValue:tF},{provide:GC,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return Vf(9,e)}var gF=[Zs,{provide:Mc,useClass:ea},It,Pc,{provide:kn,useFactory:sF,deps:[It]},B_,[]],_r=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[gF,[],{provide:Rc,multi:!0,useValue:t},[],r?.errorHandler?{provide:WC,useValue:r.errorHandler}:[],{provide:xc,useValue:r||{}},r?.useHash?kK():OK(),RK(),r?.preloadingStrategy?hF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?NK(r):[],r?.bindToComponentInputs?fF().\u0275providers:[],r?.enableViewTransitions?pF().\u0275providers:[],LK()]}}static forChild(t){return{ngModule:n,providers:[{provide:Rc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ar({})}return n})();function RK(){return{provide:oF,useFactory:()=>{let n=j(qN),e=j(Oe),t=j(xc),r=j(z_),i=j(Mc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xK(i,r,n,e,t)}}}function kK(){return{provide:ri,useClass:sC}}function OK(){return{provide:ri,useClass:Xy}}function NK(n){return[n.initialNavigation==="disabled"?uF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?lF().\u0275providers:[]]}var KC=new J("");function LK(){return[{provide:KC,useFactory:aF},{provide:Ks,multi:!0,useExisting:KC}]}var mF=()=>{};var vF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},FK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},H_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,s||(I=64)),r.push(t[h],t[g],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||g==null)throw new ZC;let I=o<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),g!==64){let k=u<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ZC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},VK=function(n){let e=vF(n);return H_.encodeByteArray(e,!0)},Bf=function(n){return VK(n).replace(/\./g,"")},q_=function(n){try{return H_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UK=()=>eT().__FIREBASE_DEFAULTS__,BK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&q_(n[1]);return e&&JSON.parse(e)},G_=()=>{try{return mF()||UK()||BK()||jK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tT=n=>{var e,t;return(t=(e=G_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},W_=n=>{let e=tT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nT=()=>{var n;return(n=G_())===null||n===void 0?void 0:n.config},rT=n=>{var e;return(e=G_())===null||e===void 0?void 0:e[`_${n}`]};var kc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function si(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Hu(n){return S(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function K_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bf(JSON.stringify(t)),Bf(JSON.stringify(s)),""].join(".")}var Uf={};function zK(){let n={prod:[],emulator:[]};for(let e of Object.keys(Uf))Uf[e]?n.emulator.push(e):n.prod.push(e);return n}function $K(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var yF=!1;function qu(n,e){if(typeof window>"u"||typeof document>"u"||!si(window.location.host)||Uf[n]===e||Uf[n]||yF)return;Uf[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",o=zK().prod.length>0;function s(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,T){I.setAttribute("width","24"),I.setAttribute("id",T),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function u(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{yF=!0,s()},I}function h(I,T){I.setAttribute("id",T),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function g(){let I=$K(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),L=t("learnmore"),O=document.getElementById(L)||document.createElement("a"),q=t("preprendIcon"),ee=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let W=I.element;a(W),h(O,L);let de=u();c(ee,q),W.append(ee,k,O,de),document.body.appendChild(W)}o?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function HK(){var n;let e=(n=G_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CF(){let n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TF(){return!HK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jf(){try{return typeof indexedDB=="object"}catch{return!1}}function SF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var qK="FirebaseError",jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oi.prototype.create)}},oi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?GK(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new jn(i,a,r)}};function GK(n,e){return n.replace(WK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WK=/\{\$([^}]+)}/g;function AF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(_F(o)&&_F(s)){if(!Gi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _F(n){return n!==null&&typeof n=="object"}function Gu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ku(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function DF(n,e){let t=new XC(n,e);return t.subscribe.bind(t)}var XC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");KK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=JC),i.error===void 0&&(i.error=JC),i.complete===void 0&&(i.complete=JC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function JC(){}var Yve=4*60*60*1e3;function bt(n){return n&&n._delegate?n._delegate:n}var bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Oc="[DEFAULT]";var iT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new kc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YK(e))try{this.getOrInitializeService({instanceIdentifier:Oc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Oc){return this.instances.has(e)}getOptions(e=Oc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QK(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oc){return this.component?this.component.multipleInstances?e:Oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function QK(n){return n===Oc?void 0:n}function YK(n){return n.instantiationMode==="EAGER"}var Q_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new iT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var JK=[],ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ze||{}),ZK={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},XK=ze.INFO,eQ={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},tQ=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=eQ[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wi=class{constructor(e){this.name=e,this._logLevel=XK,this._logHandler=tQ,this._userLogHandler=null,JK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var nQ=(n,e)=>e.some(t=>n instanceof t),MF,PF;function rQ(){return MF||(MF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iQ(){return PF||(PF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xF=new WeakMap,sT=new WeakMap,RF=new WeakMap,oT=new WeakMap,cT=new WeakMap;function oQ(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ki(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&xF.set(t,n)}).catch(()=>{}),cT.set(e,n),e}function sQ(n){if(sT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});sT.set(n,e)}var aT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kF(n){aT=n(aT)}function aQ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Y_(this),e,...t);return RF.set(r,e.sort?e.sort():[e]),Ki(r)}:iQ().includes(n)?function(...e){return n.apply(Y_(this),e),Ki(xF.get(this))}:function(...e){return Ki(n.apply(Y_(this),e))}}function cQ(n){return typeof n=="function"?aQ(n):(n instanceof IDBTransaction&&sQ(n),nQ(n,rQ())?new Proxy(n,aT):n)}function Ki(n){if(n instanceof IDBRequest)return oQ(n);if(oT.has(n))return oT.get(n);let e=cQ(n);return e!==n&&(oT.set(n,e),cT.set(e,n)),e}var Y_=n=>cT.get(n);function J_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ki(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ki(s.result),c.oldVersion,c.newVersion,Ki(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var lQ=["get","getKey","getAll","getAllKeys","count"],uQ=["put","add","delete","clear"],lT=new Map;function OF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lT.get(e))return lT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=uQ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lQ.includes(t)))return;let o=function(s,...a){return S(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return lT.set(e,o),o}kF(n=>he($({},n),{get:(e,t,r)=>OF(e,t)||n.get(e,t,r),has:(e,t)=>!!OF(e,t)||n.has(e,t)}));var dT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dQ(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function dQ(n){let e=n.getComponent();return e?.type==="VERSION"}var hT="@firebase/app",NF="0.13.2";var Lo=new Wi("@firebase/app"),hQ="@firebase/app-compat",fQ="@firebase/analytics-compat",pQ="@firebase/analytics",gQ="@firebase/app-check-compat",mQ="@firebase/app-check",yQ="@firebase/auth",_Q="@firebase/auth-compat",vQ="@firebase/database",wQ="@firebase/data-connect",EQ="@firebase/database-compat",IQ="@firebase/functions",bQ="@firebase/functions-compat",CQ="@firebase/installations",TQ="@firebase/installations-compat",SQ="@firebase/messaging",AQ="@firebase/messaging-compat",DQ="@firebase/performance",MQ="@firebase/performance-compat",PQ="@firebase/remote-config",xQ="@firebase/remote-config-compat",RQ="@firebase/storage",kQ="@firebase/storage-compat",OQ="@firebase/firestore",NQ="@firebase/ai",LQ="@firebase/firestore-compat",FQ="firebase",VQ="11.10.0";var fT="[DEFAULT]",UQ={[hT]:"fire-core",[hQ]:"fire-core-compat",[pQ]:"fire-analytics",[fQ]:"fire-analytics-compat",[mQ]:"fire-app-check",[gQ]:"fire-app-check-compat",[yQ]:"fire-auth",[_Q]:"fire-auth-compat",[vQ]:"fire-rtdb",[wQ]:"fire-data-connect",[EQ]:"fire-rtdb-compat",[IQ]:"fire-fn",[bQ]:"fire-fn-compat",[CQ]:"fire-iid",[TQ]:"fire-iid-compat",[SQ]:"fire-fcm",[AQ]:"fire-fcm-compat",[DQ]:"fire-perf",[MQ]:"fire-perf-compat",[PQ]:"fire-rc",[xQ]:"fire-rc-compat",[RQ]:"fire-gcs",[kQ]:"fire-gcs-compat",[OQ]:"fire-fst",[LQ]:"fire-fst-compat",[NQ]:"fire-vertex","fire-js":"fire-js",[FQ]:"fire-js-all"};var zf=new Map,BQ=new Map,pT=new Map;function LF(n,e){try{n.container.addComponent(e)}catch(t){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vr(n){let e=n.name;if(pT.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;pT.set(e,n);for(let t of zf.values())LF(t,n);for(let t of BQ.values())LF(t,n);return!0}function oa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cn(n){return n==null?!1:n.settings!==void 0}var jQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new oi("app","Firebase",jQ);var gT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}};var Qi=VQ;function _T(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:fT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ia.create("bad-app-name",{appName:String(i)});if(t||(t=nT()),!t)throw ia.create("no-options");let o=zf.get(i);if(o){if(Gi(t,o.options)&&Gi(r,o.config))return o;throw ia.create("duplicate-app",{appName:i})}let s=new Q_(i);for(let c of pT.values())s.addComponent(c);let a=new gT(t,r,s);return zf.set(i,a),a}function Fo(n=fT){let e=zf.get(n);if(!e&&n===fT&&nT())return _T();if(!e)throw ia.create("no-app",{appName:n});return e}function Z_(){return Array.from(zf.values())}function _t(n,e,t){var r;let i=(r=UQ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lo.warn(a.join(" "));return}vr(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var zQ="firebase-heartbeat-database",$Q=1,$f="firebase-heartbeat-store",uT=null;function BF(){return uT||(uT=J_(zQ,$Q,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($f)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),uT}function HQ(n){return S(this,null,function*(){try{let t=(yield BF()).transaction($f),r=yield t.objectStore($f).get(jF(n));return yield t.done,r}catch(e){if(e instanceof jn)Lo.warn(e.message);else{let t=ia.create("idb-get",{originalErrorMessage:e?.message});Lo.warn(t.message)}}})}function FF(n,e){return S(this,null,function*(){try{let r=(yield BF()).transaction($f,"readwrite");yield r.objectStore($f).put(e,jF(n)),yield r.done}catch(t){if(t instanceof jn)Lo.warn(t.message);else{let r=ia.create("idb-set",{originalErrorMessage:t?.message});Lo.warn(r.message)}}})}function jF(n){return`${n.name}!${n.options.appId}`}var qQ=1024,GQ=30,mT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=VF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>GQ){let s=KQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Lo.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=VF(),{heartbeatsToSend:r,unsentEntries:i}=WQ(this._heartbeatsCache.heartbeats),o=Bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Lo.warn(t),""}})}};function VF(){return new Date().toISOString().substring(0,10)}function WQ(n,e=qQ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),UF(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),UF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return jf()?SF().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return FF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return FF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function UF(n){return Bf(JSON.stringify({version:2,heartbeats:n})).length}function KQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function QQ(n){vr(new bn("platform-logger",e=>new dT(e),"PRIVATE")),vr(new bn("heartbeat",e=>new mT(e),"PRIVATE")),_t(hT,NF,n),_t(hT,NF,"esm2017"),_t("fire-js","")}QQ("");var YQ="firebase",JQ="11.10.0";_t(YQ,JQ,"app");function vT(n){n===void 0&&(Cy(vT),n=j(Tt));let e=n.get(nf);return t=>new be(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Yi=new $s("ANGULARFIRE2_VERSION");function Lc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var sa=(n,e)=>{let t=e?[e]:Z_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Qu=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Qu||{}),zF=eC()&&typeof Zone<"u"?Qu.WARN:Qu.SILENT;var X_=class{zone;delegate;constructor(e,t=PE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ji=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(Oe);this.outsideAngular=t.runOutsideAngular(()=>new X_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new X_(typeof Zone>"u"?void 0:Zone.current,ME))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$F=!1;function ZQ(n,e){!$F&&(zF>Qu.SILENT||eC())&&($F=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),zF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function XQ(n){let e=j(Oe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Nc(n){let e=j(Oe,{optional:!0});return e?e.run(()=>n()):n()}var eY=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),mn(t,()=>Nc(()=>n.apply(void 0,r)))),ut=(n,e,t)=>(t||=e?Qu.WARN:Qu.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=j(Ji),s=j(nf),a=j(an)}catch{return ZQ(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Nc(()=>s.add())),i[u]=eY(i[u],r,a));let c=XQ(()=>n.apply(this,i));return e?c instanceof be?c.pipe(Fs(o.outsideAngular),Ls(o.insideAngular),vT(a)):c instanceof Promise?Nc(()=>new Promise((u,h)=>{s.run(()=>c).then(g=>mn(a,()=>Nc(()=>u(g))),g=>mn(a,()=>Nc(()=>h(g))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Nc(()=>c):c instanceof be?c.pipe(Fs(o.outsideAngular),Ls(o.insideAngular)):Nc(()=>c)});var ai=class{constructor(e){return e}},Vo=class{constructor(){return Z_()}};function tY(n){return n&&n.length===1?n[0]:new ai(Fo())}var wT=new J("angularfire2._apps"),nY={provide:ai,useFactory:tY,deps:[[new cn,wT]]},rY={provide:Vo,deps:[[new cn,wT]]};function iY(n){return(e,t)=>{let r=t.get(Li);_t("angularfire",Yi.full,"core"),_t("angularfire",Yi.full,"app"),_t("angular",DN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ai(i)}}function HF(n,...e){return In([nY,rY,{provide:wT,useFactory:iY(n),multi:!0,deps:[Oe,Tt,Ji,...e]}])}var qF=ut(_T,!0);var oY=new Map,sY={activated:!1,tokenObservers:[]},aY={initialized:!1,enabled:!1};function ci(n){return oY.get(n)||Object.assign({},sY)}function QF(){return aY}var cY="https://content-firebaseappcheck.googleapis.com/v1";var lY="exchangeDebugToken",GF={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},nwe=24*60*60*1e3;var bT=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new kc,this.pending.promise.catch(t=>{}),yield uY(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new kc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function uY(n){return new Promise(e=>{setTimeout(e,n)})}var dY={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},aa=new oi("appCheck","AppCheck",dY);function YF(n){if(!ci(n).activated)throw aa.create("use-before-activation",{appName:n.name})}function JF(r,i){return S(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let T=yield s.getHeartbeatsHeader();T&&(o["X-Firebase-Client"]=T)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(T){throw aa.create("fetch-network-error",{originalErrorMessage:T?.message})}if(c.status!==200)throw aa.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(T){throw aa.create("fetch-parse-error",{originalErrorMessage:T?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw aa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let g=Number(h[1])*1e3,I=Date.now();return{token:u.token,expireTimeMillis:I+g,issuedAtTimeMillis:I}})}function ZF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${cY}/projects/${t}/apps/${r}:${lY}?key=${i}`,body:{debug_token:e}}}var hY="firebase-app-check-database",fY=1,CT="firebase-app-check-store";var ev=null;function pY(){return ev||(ev=new Promise((n,e)=>{try{let t=indexedDB.open(hY,fY);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(aa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(CT,{keyPath:"compositeKey"})}}}catch(t){e(aa.create("storage-open",{originalErrorMessage:t?.message}))}}),ev)}function gY(n,e){return mY(yY(n),e)}function mY(n,e){return S(this,null,function*(){let r=(yield pY()).transaction(CT,"readwrite"),o=r.objectStore(CT).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(aa.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function yY(n){return`${n.options.appId}-${n.name}`}var Hf=new Wi("@firebase/app-check");function ET(n,e){return jf()?gY(n,e).catch(t=>{Hf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XF(){return QF().enabled}function e2(){return S(this,null,function*(){let n=QF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _Y={error:"UNKNOWN_ERROR"};function vY(n){return H_.encodeString(JSON.stringify(n),!1)}function TT(n,e=!1,t=!1){return S(this,null,function*(){let r=n.app;YF(r);let i=ci(r),o=i.token,s;if(o&&!qf(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(qf(u)?o=u:yield ET(r,void 0))}if(!e&&o&&qf(o))return{token:o.token};let a=!1;if(XF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=JF(ZF(r,yield e2()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield ET(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hf.warn(u.message):t&&Hf.error(u),IT(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ci(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hf.warn(u.message):t&&Hf.error(u),s=u}let c;return o?s?qf(o)?c={token:o.token,internalError:s}:c=IT(s):(c={token:o.token},i.token=o,yield ET(r,o)):c=IT(s),a&&bY(r,c),c})}function wY(n){return S(this,null,function*(){let e=n.app;YF(e);let{provider:t}=ci(e);if(XF()){let r=yield e2(),{token:i}=yield JF(ZF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EY(n,e,t,r){let{app:i}=n,o=ci(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&qf(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),WF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>WF(n))}function t2(n,e){let t=ci(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function WF(n){let{app:e}=n,t=ci(e),r=t.tokenRefresher;r||(r=IY(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function IY(n){let{app:e}=n;return new bT(()=>S(null,null,function*(){let t=ci(e),r;if(t.token?r=yield TT(n,!0):r=yield TT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},GF.RETRIAL_MIN_WAIT,GF.RETRIAL_MAX_WAIT)}function bY(n,e){let t=ci(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qf(n){return n.expireTimeMillis-Date.now()>0}function IT(n){return{token:vY(_Y),error:n}}var ST=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ci(this.app);for(let t of e)t2(this.app,t.next);return Promise.resolve()}};function CY(n,e){return new ST(n,e)}function TY(n){return{getToken:e=>TT(n,e),getLimitedUseToken:()=>wY(n),addTokenListener:e=>EY(n,"INTERNAL",e),removeTokenListener:e=>t2(n.app,e)}}var SY="@firebase/app-check",AY="0.10.1";var DY="app-check",KF="app-check-internal";function MY(){vr(new bn(DY,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return CY(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(KF).initialize()})),vr(new bn(KF,n=>{let e=n.getProvider("app-check").getImmediate();return TY(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_t(SY,AY)}MY();var PY="app-check";var ca=class{constructor(){return sa(PY)}};var xY=["localhost","0.0.0.0","127.0.0.1"],gwe=typeof window<"u"&&xY.includes(window.location.hostname);var n2=()=>{};var r2=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},RY=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},i2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,I=(a&15)<<2|u>>6,T=u&63;c||(T=64,s||(I=64)),r.push(t[h],t[g],t[I],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(r2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RY(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||g==null)throw new DT;let I=o<<2|a>>4;if(r.push(I),u!==64){let T=a<<4&240|u>>2;if(r.push(T),g!==64){let k=u<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},DT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kY=function(n){let e=r2(n);return i2.encodeByteArray(e,!0)},PT=function(n){return kY(n).replace(/\./g,"")},tv=function(n){try{return i2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function o2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OY=()=>o2().__FIREBASE_DEFAULTS__,NY=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LY=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&tv(n[1]);return e&&JSON.parse(e)},s2=()=>{try{return n2()||OY()||NY()||LY()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var a2=n=>s2()?.[`_${n}`];function Gf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function FY(){let n=s2()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u2(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function d2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h2(){return!FY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xT(){try{return typeof indexedDB=="object"}catch{return!1}}function f2(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var VY="FirebaseError",Nr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VY,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo.prototype.create)}},Uo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?UY(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Nr(i,a,r)}};function UY(n,e){return n.replace(BY,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BY=/\{\$([^}]+)}/g;function RT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function p2(n,e){let t=new MT(n,e);return t.subscribe.bind(t)}var MT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jY(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=AT),i.error===void 0&&(i.error=AT),i.complete===void 0&&(i.complete=AT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jY(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function AT(){}var wwe=4*60*60*1e3;function la(n){return n&&n._delegate?n._delegate:n}var li=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zY=[],$e=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}($e||{}),$Y={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},HY=$e.INFO,qY={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},GY=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=qY[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ua=class{constructor(e){this.name=e,this._logLevel=HY,this._logHandler=GY,this._userLogHandler=null,zY.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$Y[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}};var OT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WY(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function WY(n){return n.getComponent()?.type==="VERSION"}var NT="@firebase/app",g2="0.14.4";var jo=new ua("@firebase/app"),KY="@firebase/app-compat",QY="@firebase/analytics-compat",YY="@firebase/analytics",JY="@firebase/app-check-compat",ZY="@firebase/app-check",XY="@firebase/auth",eJ="@firebase/auth-compat",tJ="@firebase/database",nJ="@firebase/data-connect",rJ="@firebase/database-compat",iJ="@firebase/functions",oJ="@firebase/functions-compat",sJ="@firebase/installations",aJ="@firebase/installations-compat",cJ="@firebase/messaging",lJ="@firebase/messaging-compat",uJ="@firebase/performance",dJ="@firebase/performance-compat",hJ="@firebase/remote-config",fJ="@firebase/remote-config-compat",pJ="@firebase/storage",gJ="@firebase/storage-compat",mJ="@firebase/firestore",yJ="@firebase/ai",_J="@firebase/firestore-compat",vJ="firebase",wJ="12.4.0";var EJ={[NT]:"fire-core",[KY]:"fire-core-compat",[YY]:"fire-analytics",[QY]:"fire-analytics-compat",[ZY]:"fire-app-check",[JY]:"fire-app-check-compat",[XY]:"fire-auth",[eJ]:"fire-auth-compat",[tJ]:"fire-rtdb",[nJ]:"fire-data-connect",[rJ]:"fire-rtdb-compat",[iJ]:"fire-fn",[oJ]:"fire-fn-compat",[sJ]:"fire-iid",[aJ]:"fire-iid-compat",[cJ]:"fire-fcm",[lJ]:"fire-fcm-compat",[uJ]:"fire-perf",[dJ]:"fire-perf-compat",[hJ]:"fire-rc",[fJ]:"fire-rc-compat",[pJ]:"fire-gcs",[gJ]:"fire-gcs-compat",[mJ]:"fire-fst",[_J]:"fire-fst-compat",[yJ]:"fire-vertex","fire-js":"fire-js",[vJ]:"fire-js-all"};var IJ=new Map,bJ=new Map,m2=new Map;function y2(n,e){try{n.container.addComponent(e)}catch(t){jo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function da(n){let e=n.name;if(m2.has(e))return jo.debug(`There were multiple attempts to register component ${e}.`),!1;m2.set(e,n);for(let t of IJ.values())y2(t,n);for(let t of bJ.values())y2(t,n);return!0}function zo(n){return n==null?!1:n.settings!==void 0}var CJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},VT=new Uo("app","Firebase",CJ);var Yu=wJ;function Bo(n,e,t){let r=EJ[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jo.warn(s.join(" "));return}da(new li(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var TJ="firebase-heartbeat-database",SJ=1,Wf="firebase-heartbeat-store",kT=null;function I2(){return kT||(kT=J_(TJ,SJ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw VT.create("idb-open",{originalErrorMessage:n.message})})),kT}function AJ(n){return S(this,null,function*(){try{let t=(yield I2()).transaction(Wf),r=yield t.objectStore(Wf).get(b2(n));return yield t.done,r}catch(e){if(e instanceof Nr)jo.warn(e.message);else{let t=VT.create("idb-get",{originalErrorMessage:e?.message});jo.warn(t.message)}}})}function _2(n,e){return S(this,null,function*(){try{let r=(yield I2()).transaction(Wf,"readwrite");yield r.objectStore(Wf).put(e,b2(n)),yield r.done}catch(t){if(t instanceof Nr)jo.warn(t.message);else{let r=VT.create("idb-set",{originalErrorMessage:t?.message});jo.warn(r.message)}}})}function b2(n){return`${n.name}!${n.options.appId}`}var DJ=1024,MJ=30,LT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new FT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=v2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>MJ){let i=xJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jo.warn(e)}})}getHeartbeatsHeader(){return S(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=v2(),{heartbeatsToSend:t,unsentEntries:r}=PJ(this._heartbeatsCache.heartbeats),i=PT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return jo.warn(e),""}})}};function v2(){return new Date().toISOString().substring(0,10)}function PJ(n,e=DJ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),w2(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),w2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var FT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return xT()?f2().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield AJ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return _2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return _2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function w2(n){return PT(JSON.stringify({version:2,heartbeats:n})).length}function xJ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function RJ(n){da(new li("platform-logger",e=>new OT(e),"PRIVATE")),da(new li("heartbeat",e=>new LT(e),"PRIVATE")),Bo(NT,g2,n),Bo(NT,g2,"esm2020"),Bo("fire-js","")}RJ("");function x2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var R2=x2,k2=new Uo("auth","Firebase",x2());var ov=new ua("@firebase/auth");function FJ(n,...e){ov.logLevel<=$e.WARN&&ov.warn(`Auth (${Yu}): ${n}`,...e)}function rv(n,...e){ov.logLevel<=$e.ERROR&&ov.error(`Auth (${Yu}): ${n}`,...e)}function C2(n,...e){throw YT(n,...e)}function QT(n,...e){return YT(n,...e)}function O2(n,e,t){let r=he($({},R2()),{[e]:t});return new Uo("auth","Firebase",r).create(e,{appName:n.name})}function iv(n){return O2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return k2.create(n,...e)}function at(n,e,...t){if(!n)throw YT(e,...t)}function Kf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rv(e),new Error(e)}function sv(n,e){n||Kf(e)}function VJ(){return T2()==="http:"||T2()==="https:"}function T2(){return typeof self<"u"&&self.location?.protocol||null}function UJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VJ()||u2()||"connection"in navigator)?navigator.onLine:!0}function BJ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Uc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,sv(t>e,"Short delay should be less than long delay!"),this.isMobile=c2()||d2()}get(){return UJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jJ(n,e){sv(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var av=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $J=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HJ=new Uc(3e4,6e4);function N2(n,e){return n.tenantId&&!e.tenantId?he($({},e),{tenantId:n.tenantId}):e}function hv(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return L2(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let g=RT($({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=$({method:e,headers:I},u);return l2()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&Gf(n.emulatorConfig.host)&&(T.credentials="include"),av.fetch()(yield F2(n,n.config.apiHost,t,g),T)}))})}function L2(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=$($({},zJ),e);try{let i=new jT(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw nv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw nv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw nv(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw O2(n,h,u);C2(n,h)}}catch(i){if(i instanceof Nr)throw i;C2(n,"network-request-failed",{message:String(i)})}})}function F2(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?jJ(n.config,i):`${n.config.apiScheme}://${i}`;return $J.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var jT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(QT(this.auth,"network-request-failed")),HJ.get())})}};function nv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=QT(n,e,r);return i.customData._tokenResponse=t,i}function qJ(n,e){return S(this,null,function*(){return hv(n,"POST","/v1/accounts:delete",e)})}function cv(n,e){return S(this,null,function*(){return hv(n,"POST","/v1/accounts:lookup",e)})}function Qf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function V2(n,e=!1){return S(this,null,function*(){let t=la(n),r=yield t.getIdToken(e),i=U2(r);at(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Qf(UT(i.auth_time)),issuedAtTime:Qf(UT(i.iat)),expirationTime:Qf(UT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function UT(n){return Number(n)*1e3}function U2(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rv("JWT malformed, contained fewer than 3 sections"),null;try{let i=tv(t);return i?JSON.parse(i):(rv("Failed to decode base64 JWT payload"),null)}catch(i){return rv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function S2(n){let e=U2(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zT(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nr&&GJ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function GJ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var $T=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qf(this.lastLoginAt),this.creationTime=Qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lv(n){return S(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield zT(n,cv(e,{idToken:t}));at(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?j2(i.providerUserInfo):[],s=WJ(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function B2(n){return S(this,null,function*(){let e=la(n);yield lv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WJ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function j2(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Lh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function KJ(n,e){return S(this,null,function*(){let t=yield L2(n,{},()=>S(null,null,function*(){let r=RT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield F2(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Gf(n.emulatorConfig.host)&&(c.credentials="include"),av.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function QJ(n,e){return S(this,null,function*(){return hv(n,"POST","/v2/accounts:revokeToken",N2(n,e))})}var Yf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){at(e.length!==0,"internal-error");let t=S2(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield KJ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(at(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(at(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(at(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kf("not implemented")}};function ha(n,e){at(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Fc=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Lh(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $T(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield zT(this,this.stsTokenManager.getToken(this.auth,e));return at(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return V2(this,e)}reload(){return B2(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(he($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(zo(this.auth.app))return Promise.reject(iv(this.auth));let e=yield this.getIdToken();return yield zT(this,qJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return he($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:I,isAnonymous:T,providerData:k,stsTokenManager:L}=t;at(g&&L,e,"internal-error");let O=Yf.fromJSON(this.name,L);at(typeof g=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),at(typeof I=="boolean",e,"internal-error"),at(typeof T=="boolean",e,"internal-error"),ha(o,e.name),ha(s,e.name),ha(a,e.name),ha(c,e.name),ha(u,e.name),ha(h,e.name);let q=new n({uid:g,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:T,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:O,createdAt:u,lastLoginAt:h});return k&&Array.isArray(k)&&(q.providerData=k.map(ee=>$({},ee))),c&&(q._redirectEventId=c),q}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new Yf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];at(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?j2(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Yf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var A2=new Map;function Vc(n){sv(n instanceof Function,"Expected a class definition");let e=A2.get(n);return e?(sv(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,A2.set(n,e),e)}var YJ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),HT=YJ;function BT(n,e,t){return`firebase:${n}:${e}:${t}`}var uv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=BT(this.userKey,i.apiKey,o),this.fullPersistenceKey=BT("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield cv(this.auth,{idToken:e}).catch(()=>{});return t?Fc._fromGetAccountInfoResponse(this.auth,t,e):null}return Fc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(Vc(HT),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Vc(HT),s=BT(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let g;if(typeof h=="string"){let I=yield cv(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield Fc._fromGetAccountInfoResponse(e,I,h)}else g=Fc._fromJSON(e,h);u!==o&&(a=g),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function D2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JJ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nZ(e))return"Blackberry";if(rZ(e))return"Webos";if(ZJ(e))return"Safari";if((e.includes("chrome/")||XJ(e))&&!e.includes("edge/"))return"Chrome";if(tZ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function JJ(n=wr()){return/firefox\//i.test(n)}function ZJ(n=wr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XJ(n=wr()){return/crios\//i.test(n)}function eZ(n=wr()){return/iemobile/i.test(n)}function tZ(n=wr()){return/android/i.test(n)}function nZ(n=wr()){return/blackberry/i.test(n)}function rZ(n=wr()){return/webos/i.test(n)}function z2(n,e=[]){let t;switch(n){case"Browser":t=D2(wr());break;case"Worker":t=`${D2(wr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yu}/${r}`}var qT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function iZ(t){return S(this,arguments,function*(n,e={}){return hv(n,"GET","/v2/passwordPolicy",N2(n,e))})}var oZ=6,GT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oZ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var WT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new qT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vc(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield uv.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield cv(this,{idToken:e}),r=yield Fc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){if(zo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield lv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=BJ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(zo(this.app))return Promise.reject(iv(this));let t=e?la(e):null;return t&&at(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return zo(this.app)?Promise.reject(iv(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zo(this.app)?Promise.reject(iv(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Vc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield iZ(this),t=new GT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QJ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vc(e)||this._popupRedirectResolver;at(t,this,"argument-error"),this.redirectPersistenceManager=yield uv.create(this,[Vc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return S(this,null,function*(){if(zo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FJ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function sZ(n){return la(n)}var dv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=p2(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var aZ={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cZ(n){aZ=n}function lZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function uZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function JT(n,e,t,r){return la(n).onAuthStateChanged(e,t,r)}var Ywe=lZ("rcb"),Jwe=new Uc(3e4,6e4);var Zwe=new Uc(2e3,1e4);var Xwe=10*60*1e3;var eEe=new Uc(3e4,6e4);var tEe=new Uc(5e3,15e3);var nEe=encodeURIComponent("fac");var M2="@firebase/auth",P2="1.11.0";var KT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hZ(n){da(new li("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;at(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z2(n)},u=new WT(r,i,o,c);return uZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),da(new li("auth-internal",e=>{let t=sZ(e.getProvider("auth").getImmediate());return(r=>new KT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bo(M2,P2,dZ(n)),Bo(M2,P2,"esm2020")}var fZ=5*60,rEe=a2("authIdTokenMaxAge")||fZ;function pZ(){return document.getElementsByTagName("head")?.[0]??document}cZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=QT("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",pZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hZ("Browser");function $2(n){return new be(function(e){var t=JT(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function oV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sV=oV,aV=new oi("auth","Firebase",oV());var _v=new Wi("@firebase/auth");function yZ(n,...e){_v.logLevel<=ze.WARN&&_v.warn(`Auth (${Qi}): ${n}`,...e)}function pv(n,...e){_v.logLevel<=ze.ERROR&&_v.error(`Auth (${Qi}): ${n}`,...e)}function Lr(n,...e){throw wS(n,...e)}function ui(n,...e){return wS(n,...e)}function vS(n,e,t){let r=Object.assign(Object.assign({},sV()),{[e]:t});return new oi("auth","Firebase",r).create(e,{appName:n.name})}function qo(n){return vS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _Z(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(n,"argument-error"),vS(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return aV.create(n,...e)}function Ee(n,e,...t){if(!n)throw wS(e,...t)}function $o(n){let e="INTERNAL ASSERTION FAILED: "+n;throw pv(e),new Error(e)}function Go(n,e){n||$o(e)}function eS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vZ(){return H2()==="http:"||H2()==="https:"}function H2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function wZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vZ()||IF()||"connection"in navigator)?navigator.onLine:!0}function EZ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Bc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Go(t>e,"Short delay should be less than long delay!"),this.isMobile=wF()||bF()}get(){return wZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ES(n,e){Go(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var IZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CZ=new Bc(3e4,6e4);function ga(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wo(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return cV(n,i,()=>S(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let g=Gu(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let T=Object.assign({method:e,headers:I},u);return EF()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&si(n.emulatorConfig.host)&&(T.credentials="include"),vv.fetch()(yield lV(n,n.config.apiHost,t,g),T)}))})}function cV(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},IZ),e);try{let i=new tS(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw fv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw fv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw fv(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vS(n,h,u);Lr(n,h)}}catch(i){if(i instanceof jn)throw i;Lr(n,"network-request-failed",{message:String(i)})}})}function op(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){let u=yield Wo(n,e,t,r,i);return"mfaPendingCredential"in u&&Lr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function lV(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?ES(n.config,i):`${n.config.apiScheme}://${i}`;return bZ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function TZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var tS=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),CZ.get())})}};function fv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ui(n,e,r);return i.customData._tokenResponse=t,i}function q2(n){return n!==void 0&&n.enterprise!==void 0}var nS=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TZ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function SZ(n,e){return S(this,null,function*(){return Wo(n,"GET","/v2/recaptchaConfig",ga(n,e))})}function AZ(n,e){return S(this,null,function*(){return Wo(n,"POST","/v1/accounts:delete",e)})}function wv(n,e){return S(this,null,function*(){return Wo(n,"POST","/v1/accounts:lookup",e)})}function Xf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function IS(n,e=!1){return S(this,null,function*(){let t=bt(n),r=yield t.getIdToken(e),i=bS(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xf(ZT(i.auth_time)),issuedAtTime:Xf(ZT(i.iat)),expirationTime:Xf(ZT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ZT(n){return Number(n)*1e3}function bS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pv("JWT malformed, contained fewer than 3 sections"),null;try{let i=q_(t);return i?JSON.parse(i):(pv("Failed to decode base64 JWT payload"),null)}catch(i){return pv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function G2(n){let e=bS(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Zu(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof jn&&DZ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function DZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var rS=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var tp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xf(this.lastLoginAt),this.creationTime=Xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ev(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Zu(n,wv(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?uV(o.providerUserInfo):[],a=MZ(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=c?u:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function CS(n){return S(this,null,function*(){let e=bt(n);yield Ev(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function MZ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uV(n){return n.map(e=>{var{providerId:t}=e,r=lm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function PZ(n,e){return S(this,null,function*(){let t=yield cV(n,{},()=>S(null,null,function*(){let r=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield lV(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&si(n.emulatorConfig.host)&&(c.credentials="include"),vv.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function xZ(n,e){return S(this,null,function*(){return Wo(n,"POST","/v2/accounts:revokeToken",ga(n,e))})}var ep=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=G2(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield PZ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return $o("not implemented")}};function fa(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tp(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield Zu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return IS(this,e)}reload(){return CS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ev(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Cn(this.auth.app))return Promise.reject(qo(this.auth));let e=yield this.getIdToken();return yield Zu(this,AZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,L=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ee=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:W,emailVerified:de,isAnonymous:je,providerData:ge,stsTokenManager:M}=t;Ee(W&&M,e,"internal-error");let E=ep.fromJSON(this.name,M);Ee(typeof W=="string",e,"internal-error"),fa(g,e.name),fa(I,e.name),Ee(typeof de=="boolean",e,"internal-error"),Ee(typeof je=="boolean",e,"internal-error"),fa(T,e.name),fa(k,e.name),fa(L,e.name),fa(O,e.name),fa(q,e.name),fa(ee,e.name);let C=new n({uid:W,auth:e,email:I,emailVerified:de,displayName:g,isAnonymous:je,photoURL:k,phoneNumber:T,tenantId:L,stsTokenManager:E,createdAt:q,lastLoginAt:ee});return ge&&Array.isArray(ge)&&(C.providerData=ge.map(D=>Object.assign({},D))),O&&(C._redirectEventId=O),C}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new ep;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ev(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?uV(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ep;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new tp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var W2=new Map;function Ho(n){Go(n instanceof Function,"Expected a class definition");let e=W2.get(n);return e?(Go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W2.set(n,e),e)}var RZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),iS=RZ;function gv(n,e,t){return`firebase:${n}:${e}:${t}`}var Iv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=gv(this.userKey,i.apiKey,o),this.fullPersistenceKey=gv("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield wv(this.auth,{idToken:e}).catch(()=>{});return t?pa._fromGetAccountInfoResponse(this.auth,t,e):null}return pa._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(Ho(iS),e,r);let i=(yield Promise.all(t.map(u=>S(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ho(iS),s=gv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let g;if(typeof h=="string"){let I=yield wv(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield pa._fromGetAccountInfoResponse(e,I,h)}else g=pa._fromJSON(e,h);u!==o&&(a=g),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>S(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function K2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mV(e))return"Blackberry";if(yV(e))return"Webos";if(hV(e))return"Safari";if((e.includes("chrome/")||fV(e))&&!e.includes("edge/"))return"Chrome";if(gV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dV(n=yn()){return/firefox\//i.test(n)}function hV(n=yn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fV(n=yn()){return/crios\//i.test(n)}function pV(n=yn()){return/iemobile/i.test(n)}function gV(n=yn()){return/android/i.test(n)}function mV(n=yn()){return/blackberry/i.test(n)}function yV(n=yn()){return/webos/i.test(n)}function TS(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kZ(n=yn()){var e;return TS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OZ(){return CF()&&document.documentMode===10}function _V(n=yn()){return TS(n)||gV(n)||yV(n)||mV(n)||/windows phone/i.test(n)||pV(n)}function vV(n,e=[]){let t;switch(n){case"Browser":t=K2(yn());break;case"Worker":t=`${K2(yn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qi}/${r}`}var oS=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function NZ(t){return S(this,arguments,function*(n,e={}){return Wo(n,"GET","/v2/passwordPolicy",ga(n,e))})}var LZ=6,sS=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:LZ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var aS=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bv(this),this.idTokenSubscription=new bv(this),this.beforeStateQueue=new oS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ho(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Iv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield wv(this,{idToken:e}),r=yield pa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Cn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield Ev(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=EZ()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Cn(this.app))return Promise.reject(qo(this));let t=e?bt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Cn(this.app)?Promise.reject(qo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Cn(this.app)?Promise.reject(qo(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Ho(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield NZ(this),t=new sS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield xZ(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ho(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield Iv.create(this,[Ho(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&yZ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ma(n){return bt(n)}var bv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=DF(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Rv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FZ(n){Rv=n}function wV(n){return Rv.loadJS(n)}function VZ(){return Rv.recaptchaEnterpriseScript}function UZ(){return Rv.gapiScript}function EV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var cS=class{constructor(){this.enterprise=new lS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},lS=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var BZ="recaptcha-enterprise",IV="NO_RECAPTCHA",uS=class{constructor(e){this.type=BZ,this.auth=ma(e)}verify(e="verify",t=!1){return S(this,null,function*(){function r(o){return S(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>S(null,null,function*(){SZ(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new nS(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;q2(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(IV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cS().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&q2(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=VZ();c.length!==0&&(c+=a),wV(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Zf(n,e,t,r=!1,i=!1){return S(this,null,function*(){let o=new uS(n),s;if(i)s=IV;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function dS(n,e,t,r,i){return S(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Zf(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>S(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Zf(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Zf(n,e,t);return r(n,a).catch(c=>S(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Zf(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Zf(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function SS(n,e){let t=oa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Gi(o,e??{}))return i;Lr(i,"already-initialized")}return t.initialize({options:e})}function jZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ho);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AS(n,e,t){let r=ma(n);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=bV(e),{host:s,port:a}=zZ(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Gi(u,r.config.emulator)&&Gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,si(s)?(Hu(`${o}//${s}${c}`),qu("Auth",!0)):i||$Z()}function bV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zZ(n){let e=bV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Q2(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Q2(s)}}}function Q2(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function $Z(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Xu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $o("not implemented")}_getIdTokenResponse(e){return $o("not implemented")}_linkToIdToken(e,t){return $o("not implemented")}_getReauthenticationResolver(e){return $o("not implemented")}};function HZ(n,e){return S(this,null,function*(){return Wo(n,"POST","/v1/accounts:signUp",e)})}function qZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithPassword",ga(n,e))})}function GZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))})}function WZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))})}var np=class n extends Xu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dS(e,t,"signInWithPassword",qZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GZ(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dS(e,r,"signUpPassword",HZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WZ(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ju(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signInWithIdp",ga(n,e))})}var KZ="http://localhost",Cv=class n extends Xu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=lm(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ju(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ju(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ju(e,t)}buildRequest(){let e={requestUri:KZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gu(t)}return e}};function QZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YZ(n){let e=Wu(Ku(n)).link,t=e?Wu(Ku(e)).deep_link_id:null,r=Wu(Ku(n)).deep_link_id;return(r?Wu(Ku(r)).link:null)||r||t||e||n}var Tv=class n{constructor(e){var t,r,i,o,s,a;let c=Wu(Ku(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=QZ((i=c.mode)!==null&&i!==void 0?i:null);Ee(u&&h&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=YZ(e);try{return new n(t)}catch{return null}}};var CV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return np._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Tv.parseLink(r);return Ee(i,"argument-error"),np._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Sv=class extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var DS=(()=>{class n extends Sv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Cv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function JZ(n,e){return S(this,null,function*(){return op(n,"POST","/v1/accounts:signUp",ga(n,e))})}var ed=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return S(this,null,function*(){let o=yield pa._fromIdTokenResponse(e,r,i),s=Y2(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return S(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Y2(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Y2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var hS=class n extends jn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function TV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?hS._fromErrorAndOperation(n,o,e,r):o})}function ZZ(n,e,t=!1){return S(this,null,function*(){let r=yield Zu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ed._forOperation(n,"link",r)})}function XZ(n,e,t=!1){return S(this,null,function*(){let{auth:r}=n;if(Cn(r.app))return Promise.reject(qo(r));let i="reauthenticate";try{let o=yield Zu(n,TV(r,i,e,n),t);Ee(o.idToken,r,"internal-error");let s=bS(o.idToken);Ee(s,r,"internal-error");let{sub:a}=s;return Ee(n.uid===a,r,"user-mismatch"),ed._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Lr(r,"user-mismatch"),o}})}function SV(n,e,t=!1){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(qo(n));let r="signIn",i=yield TV(n,r,e),o=yield ed._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function MS(n,e){return S(this,null,function*(){return SV(ma(n),e)})}function AV(n){return S(this,null,function*(){let e=ma(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function PS(n,e,t){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(qo(n));let r=ma(n),s=yield dS(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JZ,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&AV(n),c}),a=yield ed._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function xS(n,e,t){return Cn(n.app)?Promise.reject(qo(n)):MS(bt(n),CV.credential(e,t)).catch(r=>S(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&AV(n),r}))}function eX(n,e){return S(this,null,function*(){return Wo(n,"POST","/v1/accounts:update",e)})}function RS(r,i){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=bt(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Zu(o,eX(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let u=o.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=o.displayName,u.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function kS(n,e,t,r){return bt(n).onIdTokenChanged(e,t,r)}function OS(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function NS(n){return bt(n).signOut()}var Av="__sak";var Dv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Av,"1"),this.storage.removeItem(Av),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var tX=1e3,nX=10,rX=(()=>{class n extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_V(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);OZ()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,nX):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},tX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return S(this,null,function*(){yield Ti(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return S(this,null,function*(){let r=yield Ti(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return S(this,null,function*(){yield Ti(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),DV=rX;var iX=(()=>{class n extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),LS=iX;function oX(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var sX=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>S(this,null,function*(){return h(r.origin,s)})),u=yield oX(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function FS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var fS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return S(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=FS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===u)switch(I.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(I.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Zi(){return window}function aX(n){Zi().location.href=n}function MV(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}function cX(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lX(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uX(){return MV()?self:null}var PV="firebaseLocalStorageDb",dX=1,Mv="firebaseLocalStorage",xV="fbase_key",jc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function kv(n,e){return n.transaction([Mv],e?"readwrite":"readonly").objectStore(Mv)}function hX(){let n=indexedDB.deleteDatabase(PV);return new jc(n).toPromise()}function pS(){let n=indexedDB.open(PV,dX);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Mv,{keyPath:xV})}catch(i){t(i)}}),n.addEventListener("success",()=>S(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Mv)?e(r):(r.close(),yield hX(),e(yield pS()))}))})}function J2(n,e,t){return S(this,null,function*(){let r=kv(n,!0).put({[xV]:e,value:t});return new jc(r).toPromise()})}function fX(n,e){return S(this,null,function*(){let t=kv(n,!1).get(e),r=yield new jc(t).toPromise();return r===void 0?null:r.value})}function Z2(n,e){let t=kv(n,!0).delete(e);return new jc(t).toPromise()}var pX=800,gX=3,mX=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield pS(),this.db)})}_withRetries(t){return S(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>gX)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return MV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=sX._getInstance(uX()),this.receiver._subscribe("keyChanged",(t,r)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,r;if(this.activeServiceWorker=yield cX(),!this.activeServiceWorker)return;this.sender=new fS(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lX()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield pS();return yield J2(t,Av,"1"),yield Z2(t,Av),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>J2(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let r=yield this._withRetries(i=>fX(i,t));return this.localCache[t]=r,r})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>Z2(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(o=>{let s=kv(o,!1).getAll();return new jc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),pX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),RV=mX;var GIe=EV("rcb"),WIe=new Bc(3e4,6e4);function kV(n,e){return e?Ho(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ip=class extends Xu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ju(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ju(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ju(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function yX(n){return SV(n.auth,new ip(n),n.bypassAuthState)}function _X(n){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),XZ(t,new ip(n),n.bypassAuthState)}function vX(n){return S(this,null,function*(){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),ZZ(t,new ip(n),n.bypassAuthState)})}var Pv=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yX;case"linkViaPopup":case"linkViaRedirect":return vX;case"reauthViaPopup":case"reauthViaRedirect":return _X;default:Lr(this.auth,"internal-error")}}resolve(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wX=new Bc(2e3,1e4);function VS(n,e,t){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));let r=ma(n);_Z(n,e,rp);let i=kV(r,t);return new EX(r,"signInViaPopup",e,i).executeNotNull()})}var EX=(()=>{class n extends Pv{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return Ee(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){Go(this.filter.length===1,"Popup operations only handle one event");let t=FS();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,wX.get())};t()}}n.currentPopupAction=null;return n})(),IX="pendingRedirect",mv=new Map,gS=class n extends Pv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return S(this,null,function*(){let e=mv.get(this.auth._key());if(!e){try{let r=(yield bX(this.resolver,this.auth))?yield Ti(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mv.set(this.auth._key(),e)}return this.bypassAuthState||mv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return Ti(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ti(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function bX(n,e){return S(this,null,function*(){let t=SX(e),r=TX(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function CX(n,e){mv.set(n._key(),e)}function TX(n){return Ho(n._redirectPersistence)}function SX(n){return gv(IX,n.config.apiKey,n.name)}function AX(n,e,t=!1){return S(this,null,function*(){if(Cn(n.app))return Promise.reject(qo(n));let r=ma(n),i=kV(r,e),s=yield new gS(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var DX=10*60*1e3,mS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!OV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DX&&this.cachedEventUids.clear(),this.cachedEventUids.has(X2(e))}saveEventToCache(e){this.cachedEventUids.add(X2(e)),this.lastProcessedEventTime=Date.now()}};function X2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function OV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function MX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OV(n);default:return!1}}function PX(t){return S(this,arguments,function*(n,e={}){return Wo(n,"GET","/v1/projects",e)})}var xX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RX=/^https?/;function kX(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield PX(n);for(let t of e)try{if(OX(t))return}catch{}Lr(n,"unauthorized-domain")})}function OX(n){let e=eS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!RX.test(t))return!1;if(xX.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var NX=new Bc(3e4,6e4);function eV(){let n=Zi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LX(n){return new Promise((e,t)=>{var r,i,o;function s(){eV(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eV(),t(ui(n,"network-request-failed"))},timeout:NX.get()})}if(!((i=(r=Zi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Zi().gapi)===null||o===void 0)&&o.load)s();else{let a=EV("iframefcb");return Zi()[a]=()=>{gapi.load?s():t(ui(n,"network-request-failed"))},wV(`${UZ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw yv=null,e})}var yv=null;function FX(n){return yv=yv||LX(n),yv}var VX=new Bc(5e3,15e3),UX="__/auth/iframe",BX="emulator/auth/iframe",jX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $X(n){let e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ES(e,BX):`https://${n.config.authDomain}/${UX}`,r={apiKey:e.apiKey,appName:n.name,v:Qi},i=zX.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Gu(r).slice(1)}`}function HX(n){return S(this,null,function*(){let e=yield FX(n),t=Zi().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:$X(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jX,dontclear:!0},r=>new Promise((i,o)=>S(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ui(n,"network-request-failed"),a=Zi().setTimeout(()=>{o(s)},VX.get());function c(){Zi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var qX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GX=500,WX=600,KX="_blank",QX="http://localhost",xv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function YX(n,e,t,r=GX,i=WX){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},qX),{width:r.toString(),height:i.toString(),top:o,left:s}),u=yn().toLowerCase();t&&(a=fV(u)?KX:t),dV(u)&&(e=e||QX,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[T,k])=>`${I}${T}=${k},`,"");if(kZ(u)&&a!=="_self")return JX(e||"",a),new xv(null);let g=window.open(e||"",a,h);Ee(g,n,"popup-blocked");try{g.focus()}catch{}return new xv(g)}function JX(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var ZX="__/auth/handler",XX="emulator/auth/handler",eee=encodeURIComponent("fac");function tV(n,e,t,r,i,o){return S(this,null,function*(){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qi,eventId:i};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",AF(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof Sv){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),u=c?`#${eee}=${encodeURIComponent(c)}`:"";return`${tee(n)}?${Gu(a).slice(1)}${u}`})}function tee({config:n}){return n.emulator?ES(n,XX):`https://${n.authDomain}/${ZX}`}var XT="webStorageSupport",yS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=AX,this._overrideRedirectResult=CX}_openPopup(e,t,r,i){return S(this,null,function*(){var o;Go((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield tV(e,t,r,eS(),i);return YX(e,s,FS())})}_openRedirect(e,t,r,i){return S(this,null,function*(){yield this._originValidation(e);let o=yield tV(e,t,r,eS(),i);return aX(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Go(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return S(this,null,function*(){let t=yield HX(e),r=new mS(e);return t.register("authEvent",i=>(Ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(XT,{type:XT},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[XT];s!==void 0&&t(!!s),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _V()||hV()||TS()}},NV=yS;var nV="@firebase/auth",rV="1.10.8";var _S=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function nee(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ree(n){vr(new bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vV(n)},u=new aS(r,i,o,c);return jZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vr(new bn("auth-internal",e=>{let t=ma(e.getProvider("auth").getImmediate());return(r=>new _S(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(nV,rV,nee(n)),_t(nV,rV,"esm2017")}var iee=5*60,oee=rT("authIdTokenMaxAge")||iee,iV=null,see=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oee)return;let i=t?.token;iV!==i&&(iV=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function US(n=Fo()){let e=oa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=SS(n,{popupRedirectResolver:NV,persistence:[RV,DV,LS]}),r=rT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=see(o.toString());OS(t,s,()=>s(t.currentUser)),kS(t,a=>s(a))}}let i=tT("auth");return i&&AS(t,`http://${i}`),t}function aee(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}FZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ui("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",aee().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ree("Browser");var LV="auth",zc=class{constructor(e){return e}},$c=class{constructor(){return sa(LV)}};var BS=new J("angularfire2.auth-instances");function Kee(n,e){let t=Lc(LV,n,e);return t&&new zc(t)}function Qee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zc(r)}}var Yee={provide:$c,deps:[[new cn,BS]]},Jee={provide:zc,useFactory:Kee,deps:[[new cn,BS],ai]};function FV(n,...e){return _t("angularfire",Yi.full,"auth"),In([Jee,Yee,{provide:BS,useFactory:Qee(n),multi:!0,deps:[Oe,Tt,Ji,Vo,[new cn,ca],...e]}])}var VV=ut($2,!0);var UV=ut(PS,!0,2);var BV=ut(US,!0);var jV=ut(xS,!0,2);var zV=ut(VS,!0,2);var $V=ut(NS,!0,2);var HV=ut(RS,!0,2);var qV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},GV={};var Ko,jS;(function(){var n;function e(M,E){function C(){}C.prototype=E.prototype,M.F=E.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(D,A,R){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,E,C){C||(C=0);let D=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;A<16;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=M.g[0],C=M.g[1],A=M.g[2];let R=M.g[3],b;b=E+(R^C&(A^R))+D[0]+3614090360&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[1]+3905402710&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[5]+1200080426&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[9]+2336552879&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[13]+4254626195&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^R&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[6]+3225465664&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[10]+38016083&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[14]+3275163606&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[2]+4243563512&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^R)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[8]+2272392833&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[4]+1272893353&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[0]+3936430074&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[12]+3873151461&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~R))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[7]+1126891415&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[3]+2399980690&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[15]+4264355552&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[11]+3174756917&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+R&4294967295}r.prototype.v=function(M,E){E===void 0&&(E=M.length);let C=E-this.blockSize,D=this.C,A=this.h,R=0;for(;R<E;){if(A==0)for(;R<=C;)i(this,M,R),R+=this.blockSize;if(typeof M=="string"){for(;R<E;)if(D[A++]=M.charCodeAt(R++),A==this.blockSize){i(this,D),A=0;break}}else for(;R<E;)if(D[A++]=M[R++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;E=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=E&255,E/=256;for(this.v(M),M=Array(16),E=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)M[E++]=this.g[C]>>>D&255;return M};function o(M,E){var C=a;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=E(M)}function s(M,E){this.h=E;let C=[],D=!0;for(let A=M.length-1;A>=0;A--){let R=M[A]|0;D&&R==E||(C[A]=R,D=!1)}this.g=C}var a={};function c(M){return-128<=M&&M<128?o(M,function(E){return new s([E|0],E<0?-1:0)}):new s([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return g;if(M<0)return O(u(-M));let E=[],C=1;for(let D=0;M>=C;D++)E[D]=M/C|0,C*=4294967296;return new s(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return O(h(M.substring(1),E));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');let C=u(Math.pow(E,8)),D=g;for(let R=0;R<M.length;R+=8){var A=Math.min(8,M.length-R);let b=parseInt(M.substring(R,R+A),E);A<8?(A=u(Math.pow(E,A)),D=D.j(A).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var g=c(0),I=c(1),T=c(16777216);n=s.prototype,n.m=function(){if(L(this))return-O(this).m();let M=0,E=1;for(let C=0;C<this.g.length;C++){let D=this.i(C);M+=(D>=0?D:4294967296+D)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(L(this))return"-"+O(this).toString(M);let E=u(Math.pow(M,6));var C=this;let D="";for(;;){let A=de(C,E).g;C=q(C,A.j(E));let R=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=A,k(C))return R+D;for(;R.length<6;)R="0"+R;D=R+D}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=q(this,M),L(M)?-1:k(M)?0:1};function O(M){let E=M.g.length,C=[];for(let D=0;D<E;D++)C[D]=~M.g[D];return new s(C,~M.h).add(I)}n.abs=function(){return L(this)?O(this):this},n.add=function(M){let E=Math.max(this.g.length,M.g.length),C=[],D=0;for(let A=0;A<=E;A++){let R=D+(this.i(A)&65535)+(M.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);D=b>>>16,R&=65535,b&=65535,C[A]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function q(M,E){return M.add(O(E))}n.j=function(M){if(k(this)||k(M))return g;if(L(this))return L(M)?O(this).j(O(M)):O(O(this).j(M));if(L(M))return O(this.j(O(M)));if(this.l(T)<0&&M.l(T)<0)return u(this.m()*M.m());let E=this.g.length+M.g.length,C=[];for(var D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let A=0;A<M.g.length;A++){let R=this.i(D)>>>16,b=this.i(D)&65535,Ct=M.i(A)>>>16,$n=M.i(A)&65535;C[2*D+2*A]+=b*$n,ee(C,2*D+2*A),C[2*D+2*A+1]+=R*$n,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=R*Ct,ee(C,2*D+2*A+2)}for(M=0;M<E;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=E;M<2*E;M++)C[M]=0;return new s(C,0)};function ee(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function W(M,E){this.g=M,this.h=E}function de(M,E){if(k(E))throw Error("division by zero");if(k(M))return new W(g,g);if(L(M))return E=de(O(M),E),new W(O(E.g),O(E.h));if(L(E))return E=de(M,O(E)),new W(O(E.g),E.h);if(M.g.length>30){if(L(M)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;D.l(M)<=0;)C=je(C),D=je(D);var A=ge(C,1),R=ge(D,1);for(D=ge(D,2),C=ge(C,2);!k(D);){var b=R.add(D);b.l(M)<=0&&(A=A.add(C),R=b),D=ge(D,1),C=ge(C,1)}return E=q(M,A.j(E)),new W(A,E)}for(A=g;M.l(E)>=0;){for(C=Math.max(1,Math.floor(M.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),R=u(C),b=R.j(E);L(b)||b.l(M)>0;)C-=D,R=u(C),b=R.j(E);k(R)&&(R=I),A=A.add(R),M=q(M,b)}return new W(A,M)}n.B=function(M){return de(this,M).h},n.and=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)&M.i(D);return new s(C,this.h&M.h)},n.or=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)|M.i(D);return new s(C,this.h|M.h)},n.xor=function(M){let E=Math.max(this.g.length,M.g.length),C=[];for(let D=0;D<E;D++)C[D]=this.i(D)^M.i(D);return new s(C,this.h^M.h)};function je(M){let E=M.g.length+1,C=[];for(let D=0;D<E;D++)C[D]=M.i(D)<<1|M.i(D-1)>>>31;return new s(C,M.h)}function ge(M,E){let C=E>>5;E%=32;let D=M.g.length-C,A=[];for(let R=0;R<D;R++)A[R]=E>0?M.i(R+C)>>>E|M.i(R+C+1)<<32-E:M.i(R+C);return new s(A,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jS=GV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Ko=GV.Integer=s}).apply(typeof qV<"u"?qV:typeof self<"u"?self:typeof window<"u"?window:{});var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qo={};var zS,Xee,td,$S,sp,Nv,HS,qS,GS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ov=="object"&&Ov];for(var p=0;p<d.length;++p){var w=d[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,p){if(p)e:{var w=r;d=d.split(".");for(var x=0;x<d.length-1;x++){var F=d[x];if(!(F in w))break e;w=w[F]}d=d[d.length-1],x=w[d],p=p(x),p!=x&&p!=null&&e(w,d,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(p){var w=[],x;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&w.push([x,p[x]]);return w}});var o=o||{},s=this||self;function a(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function c(d,p,w){return d.call.apply(d.bind,arguments)}function u(d,p,w){return u=c,u.apply(null,arguments)}function h(d,p){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function g(d,p){function w(){}w.prototype=p.prototype,d.Z=p.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(x,F,U){for(var Z=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Z[Ie-2]=arguments[Ie];return p.prototype[F].apply(x,Z)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){let p=d.length;if(p>0){let w=Array(p);for(let x=0;x<p;x++)w[x]=d[x];return w}return[]}function k(d,p){for(let x=1;x<arguments.length;x++){let F=arguments[x];var w=typeof F;if(w=w!="object"?w:F?Array.isArray(F)?"array":w:"null",w=="array"||w=="object"&&typeof F.length=="number"){w=d.length||0;let U=F.length||0;d.length=w+U;for(let Z=0;Z<U;Z++)d[w+Z]=F[Z]}else d.push(F)}}class L{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function O(d){s.setTimeout(()=>{throw d},0)}function q(){var d=M;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,w){let x=W.get();x.set(p,w),this.h?this.h.next=x:this.g=x,this.h=x}}var W=new L(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let je,ge=!1,M=new ee,E=()=>{let d=Promise.resolve(void 0);je=()=>{d.then(C)}};function C(){for(var d;d=q();){try{d.h.call(d.g)}catch(w){O(w)}var p=W;p.j(d),p.h<100&&(p.h++,d.next=p.g,p.g=d)}ge=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let w=()=>{};s.addEventListener("test",w,p),s.removeEventListener("test",w,p)}catch{}return d}();function b(d){return/^[\s\xa0]*$/.test(d)}function Ct(d,p){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,p)}g(Ct,A),Ct.prototype.init=function(d,p){let w=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget,p||(w=="mouseover"?p=d.fromElement:w=="mouseout"&&(p=d.toElement)),this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);let d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var $n="closure_listenable_"+(Math.random()*1e6|0),Zw=0;function Oa(d,p,w,x,F){this.listener=d,this.proxy=null,this.src=p,this.type=w,this.capture=!!x,this.ha=F,this.key=++Zw,this.da=this.fa=!1}function _i(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function hs(d,p,w){for(let x in d)p.call(w,d[x],x,d)}function _g(d,p){for(let w in d)p.call(void 0,d[w],w,d)}function vg(d){let p={};for(let w in d)p[w]=d[w];return p}let jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(d,p){let w,x;for(let F=1;F<arguments.length;F++){x=arguments[F];for(w in x)d[w]=x[w];for(let U=0;U<jr.length;U++)w=jr[U],Object.prototype.hasOwnProperty.call(x,w)&&(d[w]=x[w])}}function ml(d){this.src=d,this.g={},this.h=0}ml.prototype.add=function(d,p,w,x,F){let U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);let Z=fh(d,p,x,F);return Z>-1?(p=d[Z],w||(p.fa=!1)):(p=new Oa(p,this.src,U,!!x,F),p.fa=w,d.push(p)),p};function po(d,p){let w=p.type;if(w in d.g){var x=d.g[w],F=Array.prototype.indexOf.call(x,p,void 0),U;(U=F>=0)&&Array.prototype.splice.call(x,F,1),U&&(_i(p),d.g[w].length==0&&(delete d.g[w],d.h--))}}function fh(d,p,w,x){for(let F=0;F<d.length;++F){let U=d[F];if(!U.da&&U.listener==p&&U.capture==!!w&&U.ha==x)return F}return-1}var go="closure_lm_"+(Math.random()*1e6|0),ph={};function wg(d,p,w,x,F){if(x&&x.once)return _l(d,p,w,x,F);if(Array.isArray(p)){for(let U=0;U<p.length;U++)wg(d,p[U],w,x,F);return null}return w=Il(w),d&&d[$n]?d.J(p,w,a(x)?!!x.capture:!!x,F):Na(d,p,w,!1,x,F)}function Na(d,p,w,x,F,U){if(!p)throw Error("Invalid event type");let Z=a(F)?!!F.capture:!!F,Ie=El(d);if(Ie||(d[go]=Ie=new ml(d)),w=Ie.add(p,w,x,Z,U),w.proxy)return w;if(x=yl(),w.proxy=x,x.src=d,x.listener=w,d.addEventListener)R||(F=Z),F===void 0&&(F=!1),d.addEventListener(p.toString(),x,F);else if(d.attachEvent)d.attachEvent(wl(p.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yl(){function d(w){return p.call(d.src,d.listener,w)}let p=Eg;return d}function _l(d,p,w,x,F){if(Array.isArray(p)){for(let U=0;U<p.length;U++)_l(d,p[U],w,x,F);return null}return w=Il(w),d&&d[$n]?d.K(p,w,a(x)?!!x.capture:!!x,F):Na(d,p,w,!0,x,F)}function vl(d,p,w,x,F){if(Array.isArray(p))for(var U=0;U<p.length;U++)vl(d,p[U],w,x,F);else x=a(x)?!!x.capture:!!x,w=Il(w),d&&d[$n]?(d=d.i,U=String(p).toString(),U in d.g&&(p=d.g[U],w=fh(p,w,x,F),w>-1&&(_i(p[w]),Array.prototype.splice.call(p,w,1),p.length==0&&(delete d.g[U],d.h--)))):d&&(d=El(d))&&(p=d.g[p.toString()],d=-1,p&&(d=fh(p,w,x,F)),(w=d>-1?p[d]:null)&&La(w))}function La(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[$n])po(p.i,d);else{var w=d.type,x=d.proxy;p.removeEventListener?p.removeEventListener(w,x,d.capture):p.detachEvent?p.detachEvent(wl(w),x):p.addListener&&p.removeListener&&p.removeListener(x),(w=El(p))?(po(w,d),w.h==0&&(w.src=null,p[go]=null)):_i(d)}}}function wl(d){return d in ph?ph[d]:ph[d]="on"+d}function Eg(d,p){if(d.da)d=!0;else{p=new Ct(p,this);let w=d.listener,x=d.ha||d.src;d.fa&&La(d),d=w.call(x,p)}return d}function El(d){return d=d[go],d instanceof ml?d:null}var gh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Il(d){return typeof d=="function"?d:(d[gh]||(d[gh]=function(p){return d.handleEvent(p)}),d[gh])}function Xt(){D.call(this),this.i=new ml(this),this.M=this,this.G=null}g(Xt,D),Xt.prototype[$n]=!0,Xt.prototype.removeEventListener=function(d,p,w,x){vl(this,d,p,w,x)};function en(d,p){var w,x=d.G;if(x)for(w=[];x;x=x.G)w.push(x);if(d=d.M,x=p.type||p,typeof p=="string")p=new A(p,d);else if(p instanceof A)p.target=p.target||d;else{var F=p;p=new A(x,d),Zt(p,F)}F=!0;let U,Z;if(w)for(Z=w.length-1;Z>=0;Z--)U=p.g=w[Z],F=Fa(U,x,!0,p)&&F;if(U=p.g=d,F=Fa(U,x,!0,p)&&F,F=Fa(U,x,!1,p)&&F,w)for(Z=0;Z<w.length;Z++)U=p.g=w[Z],F=Fa(U,x,!1,p)&&F}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var d=this.i;for(let p in d.g){let w=d.g[p];for(let x=0;x<w.length;x++)_i(w[x]);delete d.g[p],d.h--}}this.G=null},Xt.prototype.J=function(d,p,w,x){return this.i.add(String(d),p,!1,w,x)},Xt.prototype.K=function(d,p,w,x){return this.i.add(String(d),p,!0,w,x)};function Fa(d,p,w,x){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();let F=!0;for(let U=0;U<p.length;++U){let Z=p[U];if(Z&&!Z.da&&Z.capture==w){let Ie=Z.listener,l=Z.ha||Z.src;Z.fa&&po(d.i,Z),F=Ie.call(l,x)!==!1&&F}}return F&&!x.defaultPrevented}function Xw(d,p){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:s.setTimeout(d,p||0)}function bl(d){d.g=Xw(()=>{d.g=null,d.i&&(d.i=!1,bl(d))},d.l);let p=d.h;d.h=null,d.m.apply(null,p)}class mh extends D{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:bl(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(d){D.call(this),this.h=d,this.g={}}g(mo,D);var tn=[];function pn(d){hs(d.g,function(p,w){this.g.hasOwnProperty(w)&&La(p)},d),d.g={}}mo.prototype.N=function(){mo.Z.N.call(this),pn(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=s.JSON.stringify,Ig=s.JSON.parse,bg=class{stringify(d){return s.JSON.stringify(d,void 0)}parse(d){return s.JSON.parse(d,void 0)}};function Cg(){}function ps(){}var gs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cl(){A.call(this,"d")}g(Cl,A);function Va(){A.call(this,"c")}g(Va,A);var yo={},Tg=null;function ms(){return Tg=Tg||new Xt}yo.Ia="serverreachability";function yh(d){A.call(this,yo.Ia,d)}g(yh,A);function ys(d){let p=ms();en(p,new yh(p))}yo.STAT_EVENT="statevent";function _s(d,p){A.call(this,yo.STAT_EVENT,d),this.stat=p}g(_s,A);function nn(d){let p=ms();en(p,new _s(p,d))}yo.Ja="timingevent";function Tl(d,p){A.call(this,yo.Ja,d),this.size=p}g(Tl,A);function or(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){d()},p)}function vs(){this.g=!0}vs.prototype.ua=function(){this.g=!1};function Sl(d,p,w,x,F,U){d.info(function(){if(d.g)if(U){var Z="",Ie=U.split("&");for(let f=0;f<Ie.length;f++){var l=Ie[f].split("=");if(l.length>1){let _=l[0];l=l[1];let P=_.split("_");Z=P.length>=2&&P[1]=="type"?Z+(_+"="+l+"&"):Z+(_+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+x+") [attempt "+F+"]: "+p+`
`+w+`
`+Z})}function Sg(d,p,w,x,F,U,Z){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+F+"]: "+p+`
`+w+`
`+U+" "+Z})}function br(d,p,w,x){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+En(d,w)+(x?" "+x:"")})}function Ag(d,p){d.info(function(){return"TIMEOUT: "+p})}vs.prototype.info=function(){};function En(d,p){if(!d.g)return p;if(!p)return null;try{let U=JSON.parse(p);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var w=U[d];if(!(w.length<2)){var x=w[1];if(Array.isArray(x)&&!(x.length<1)){var F=x[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<x.length;Z++)x[Z]=""}}}}return fs(U)}catch{return p}}var Ua={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ws={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Es;function _h(){}g(_h,Cg),_h.prototype.g=function(){return new XMLHttpRequest},Es=new _h;function Ba(d){return encodeURIComponent(String(d))}function Is(d){var p=1;d=d.split(":");let w=[];for(;p>0&&d.length;)w.push(d.shift()),p--;return d.length&&w.push(d.join(":")),w}function vi(d,p,w,x){this.j=d,this.i=p,this.l=w,this.S=x||1,this.V=new mo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dg}function Dg(){this.i=null,this.g="",this.h=!1}var ja={},Al={};function za(d,p,w){d.M=1,d.A=Ga(sr(p)),d.u=w,d.R=!0,$a(d,null)}function $a(d,p){d.F=Date.now(),bs(d),d.B=sr(d.A);var w=d.B,x=d.S;Array.isArray(x)||(x=[String(x)]),Og(w.i,"t",x),d.C=0,w=d.j.L,d.h=new Dg,d.g=Bl(d.j,w?p:null,!d.u),d.P>0&&(d.O=new mh(u(d.Y,d,d.g),d.P)),p=d.V,w=d.g,x=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(tn[0]=F.toString()),F=tn);for(let U=0;U<F.length;U++){let Z=wg(w,F[U],x||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=d.J?vg(d.J):{},d.u?(d.v||(d.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,p)):(d.v="GET",d.g.ea(d.B,d.v,null,p)),ys(),Sl(d.i,d.v,d.B,d.l,d.S,d.u)}vi.prototype.ba=function(d){d=d.target;let p=this.O;p&&it(d)==3?p.j():this.Y(d)},vi.prototype.Y=function(d){try{if(d==this.g)e:{let Ie=it(this.g),l=this.g.ya(),f=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||jg(this.g)))){this.K||Ie!=4||l==7||(l==8||f<=0?ys(3):ys(2)),Ml(this);var p=this.g.ca();this.X=p;var w=wi(this);if(this.o=p==200,Sg(this.i,this.v,this.B,this.l,this.S,Ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var x,F=this.g;if((x=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(x)){var U=x;break t}}U=null}if(d=U)br(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ts(this,d);else{this.o=!1,this.m=3,nn(12),_o(this),Cs(this);break e}}if(this.R){d=!0;let _;for(;!this.K&&this.C<w.length;)if(_=Mg(this,w),_==Al){Ie==4&&(this.m=4,nn(14),d=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(_==ja){this.m=4,nn(15),br(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else br(this.i,this.l,_,null),Ts(this,_);if(vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,nn(16),d=!1),this.o=this.o&&d,!d)br(this.i,this.l,w,"[Invalid Chunked Response]"),_o(this),Cs(this);else if(w.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Fl(Z),Z.P=!0,nn(11))}}else br(this.i,this.l,w,null),Ts(this,w);Ie==4&&_o(this),this.o&&!this.K&&(Ie==4?Rh(this.j,this):(this.o=!1,bs(this)))}else eE(this.g),p==400&&w.indexOf("Unknown SID")>0?(this.m=3,nn(12)):(this.m=0,nn(13)),_o(this),Cs(this)}}}catch{}finally{}};function wi(d){if(!vh(d))return d.g.la();let p=jg(d.g);if(p==="")return"";let w="",x=p.length,F=it(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return _o(d),Cs(d),"";d.h.i=new s.TextDecoder}for(let U=0;U<x;U++)d.h.h=!0,w+=d.h.i.decode(p[U],{stream:!(F&&U==x-1)});return p.length=0,d.h.g+=w,d.C=0,d.h.g}function vh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Mg(d,p){var w=d.C,x=p.indexOf(`
`,w);return x==-1?Al:(w=Number(p.substring(w,x)),isNaN(w)?ja:(x+=1,x+w>p.length?Al:(p=p.slice(x,x+w),d.C=x+w,p)))}vi.prototype.cancel=function(){this.K=!0,_o(this)};function bs(d){d.T=Date.now()+d.H,Dl(d,d.H)}function Dl(d,p){if(d.D!=null)throw Error("WatchDog timer not null");d.D=or(u(d.aa,d),p)}function Ml(d){d.D&&(s.clearTimeout(d.D),d.D=null)}vi.prototype.aa=function(){this.D=null;let d=Date.now();d-this.T>=0?(Ag(this.i,this.B),this.M!=2&&(ys(),nn(17)),_o(this),this.m=2,Cs(this)):Dl(this,this.T-d)};function Cs(d){d.j.I==0||d.K||Rh(d.j,d)}function _o(d){Ml(d);var p=d.O;p&&typeof p.dispose=="function"&&p.dispose(),d.O=null,pn(d.V),d.g&&(p=d.g,d.g=null,p.abort(),p.dispose())}function Ts(d,p){try{var w=d.j;if(w.I!=0&&(w.g==d||Ha(w.h,d))){if(!d.L&&Ha(w.h,d)&&w.I==3){try{var x=w.Ba.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var F=x;if(F[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Vl(w),vo(w);else break e;ks(w),nn(18)}}else w.xa=F[1],0<w.xa-w.K&&F[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=or(u(w.Va,w),6e3));Ei(w.h)<=1&&w.ta&&(w.ta=void 0)}else bi(w,11)}else if((d.L||w.g==d)&&Vl(w),!b(p))for(F=w.Ba.g.parse(p),p=0;p<F.length;p++){let f=F[p],_=f[0];if(!(_<=w.K))if(w.K=_,f=f[1],w.I==2)if(f[0]=="c"){w.M=f[1],w.ba=f[2];let P=f[3];P!=null&&(w.ka=P,w.j.info("VER="+w.ka));let V=f[4];V!=null&&(w.za=V,w.j.info("SVER="+w.za));let B=f[5];B!=null&&typeof B=="number"&&B>0&&(x=1.5*B,w.O=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;let Y=d.g;if(Y){let nt=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nt){var U=x.h;U.g||nt.indexOf("spdy")==-1&&nt.indexOf("quic")==-1&&nt.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(wh(U,U.h),U.h=null))}if(x.G){let Nt=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Nt&&(x.wa=Nt,ht(x.J,x.G,Nt))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),x=w;var Z=d;if(x.na=Ul(x,x.L?x.ba:null,x.W),Z.L){Eh(x.h,Z);var Ie=Z,l=x.O;l&&(Ie.H=l),Ie.D&&(Ml(Ie),bs(Ie)),x.g=Z}else Ll(x);w.i.length>0&&qn(w)}else f[0]!="stop"&&f[0]!="close"||bi(w,7);else w.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?bi(w,7):Nl(w):f[0]!="noop"&&w.l&&w.l.qa(f),w.A=0)}}ys(4)}catch{}}var Pg=class{constructor(d,p){this.g=d,this.map=p}};function Pl(d){this.l=d||10,s.PerformanceNavigationTiming?(d=s.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ss(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ei(d){return d.h?1:d.g?d.g.size:0}function Ha(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function wh(d,p){d.g?d.g.add(p):d.h=p}function Eh(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}Pl.prototype.cancel=function(){if(this.i=Ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ih(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let p=d.i;for(let w of d.g.values())p=p.concat(w.G);return p}return T(d.i)}var bh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(d,p){if(d){d=d.split("&");for(let w=0;w<d.length;w++){let x=d[w].indexOf("="),F,U=null;x>=0?(F=d[w].substring(0,x),U=d[w].substring(x+1)):F=d[w],p(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Cr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;d instanceof Cr?(this.l=d.l,As(this,d.j),this.o=d.o,this.g=d.g,qa(this,d.u),this.h=d.h,Th(this,Ng(d.i)),this.m=d.m):d&&(p=String(d).match(bh))?(this.l=!1,As(this,p[1]||"",!0),this.o=Wa(p[2]||""),this.g=Wa(p[3]||"",!0),qa(this,p[4]),this.h=Wa(p[5]||"",!0),Th(this,p[6]||"",!0),this.m=Wa(p[7]||"")):(this.l=!1,this.i=new $r(null,this.l))}Cr.prototype.toString=function(){let d=[];var p=this.j;p&&d.push(ar(p,Ka,!0),":");var w=this.g;return(w||p=="file")&&(d.push("//"),(p=this.o)&&d.push(ar(p,Ka,!0),"@"),d.push(Ba(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(ar(w,w.charAt(0)=="/"?xg:xl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",ar(w,Rl)),d.join("")},Cr.prototype.resolve=function(d){let p=sr(this),w=!!d.j;w?As(p,d.j):w=!!d.o,w?p.o=d.o:w=!!d.g,w?p.g=d.g:w=d.u!=null;var x=d.h;if(w)qa(p,d.u);else if(w=!!d.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var F=p.h.lastIndexOf("/");F!=-1&&(x=p.h.slice(0,F+1)+x)}if(F=x,F==".."||F==".")x="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){x=F.lastIndexOf("/",0)==0,F=F.split("/");let U=[];for(let Z=0;Z<F.length;){let Ie=F[Z++];Ie=="."?x&&Z==F.length&&U.push(""):Ie==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),x&&Z==F.length&&U.push("")):(U.push(Ie),x=!0)}x=U.join("/")}else x=F}return w?p.h=x:w=d.i.toString()!=="",w?Th(p,Ng(d.i)):w=!!d.m,w&&(p.m=d.m),p};function sr(d){return new Cr(d)}function As(d,p,w){d.j=w?Wa(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function qa(d,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);d.u=p}else d.u=null}function Th(d,p,w){p instanceof $r?(d.i=p,Qa(d.i,d.l)):(w||(p=ar(p,gt)),d.i=new $r(p,d.l))}function ht(d,p,w){d.i.set(p,w)}function Ga(d){return ht(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Wa(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ar(d,p,w){return typeof d=="string"?(d=encodeURI(d).replace(p,zr),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function zr(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ka=/[#\/\?@]/g,xl=/[#\?:]/g,xg=/[#\?]/g,gt=/[#\?@]/g,Rl=/#/g;function $r(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function cr(d){d.g||(d.g=new Map,d.h=0,d.i&&Ch(d.i,function(p,w){d.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}n=$r.prototype,n.add=function(d,p){cr(this),this.i=null,d=Ds(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(p),this.h+=1,this};function Rg(d,p){cr(d),p=Ds(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function Sh(d,p){return cr(d),p=Ds(d,p),d.g.has(p)}n.forEach=function(d,p){cr(this),this.g.forEach(function(w,x){w.forEach(function(F){d.call(p,F,x,this)},this)},this)};function kg(d,p){cr(d);let w=[];if(typeof p=="string")Sh(d,p)&&(w=w.concat(d.g.get(Ds(d,p))));else for(d=Array.from(d.g.values()),p=0;p<d.length;p++)w=w.concat(d[p]);return w}n.set=function(d,p){return cr(this),this.i=null,d=Ds(this,d),Sh(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},n.get=function(d,p){return d?(d=kg(this,d),d.length>0?String(d[0]):p):p};function Og(d,p,w){Rg(d,p),w.length>0&&(d.i=null,d.g.set(Ds(d,p),T(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],p=Array.from(this.g.keys());for(let x=0;x<p.length;x++){var w=p[x];let F=Ba(w);w=kg(this,w);for(let U=0;U<w.length;U++){let Z=F;w[U]!==""&&(Z+="="+Ba(w[U])),d.push(Z)}}return this.i=d.join("&")};function Ng(d){let p=new $r;return p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),p}function Ds(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function Qa(d,p){p&&!d.j&&(cr(d),d.i=null,d.g.forEach(function(w,x){let F=x.toLowerCase();x!=F&&(Rg(this,x),Og(this,F,w))},d)),d.j=p}function Ii(d,p){let w=new vs;if(s.Image){let x=new Image;x.onload=h(Hr,w,"TestLoadImage: loaded",!0,p,x),x.onerror=h(Hr,w,"TestLoadImage: error",!1,p,x),x.onabort=h(Hr,w,"TestLoadImage: abort",!1,p,x),x.ontimeout=h(Hr,w,"TestLoadImage: timeout",!1,p,x),s.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else p(!1)}function Lg(d,p){let w=new vs,x=new AbortController,F=setTimeout(()=>{x.abort(),Hr(w,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:x.signal}).then(U=>{clearTimeout(F),U.ok?Hr(w,"TestPingServer: ok",!0,p):Hr(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Hr(w,"TestPingServer: error",!1,p)})}function Hr(d,p,w,x,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),x(w)}catch{}}function Fg(){this.g=new bg}function qr(d){this.i=d.Sb||null,this.h=d.ab||!1}g(qr,Cg),qr.prototype.g=function(){return new kl(this.i,this.h)};function kl(d,p){Xt.call(this),this.H=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(kl,Xt),n=kl.prototype,n.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=p,this.readyState=1,Hn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(p.body=d),(this.H||s).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vg(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vg(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Ya(this):Hn(this),this.readyState==3&&Vg(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ya(this))},n.Na=function(d){this.g&&(this.response=d,Ya(this))},n.ga=function(){this.g&&Ya(this)};function Ya(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Hn(d)}n.setRequestHeader=function(d,p){this.A.append(d,p)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=p.next();return d.join(`\r
`)};function Hn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ug(d){let p="";return hs(d,function(w,x){p+=x,p+=":",p+=w,p+=`\r
`}),p}function Ah(d,p,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=Ug(w),typeof d=="string"?w!=null&&Ba(w):ht(d,p,w))}function ft(d){Xt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ft,Xt);var Ol=/^https?$/i,Bg=["POST","PUT"];n=ft.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,p,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Es.g(),this.g.onreadystatechange=I(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(U){Ms(this,U);return}if(d=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var F in x)w.set(F,x[F]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let U of x.keys())w.set(U,x.get(U));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(U=>U.toLowerCase()=="content-type"),F=s.FormData&&d instanceof s.FormData,!(Array.prototype.indexOf.call(Bg,p,void 0)>=0)||x||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Z]of w)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Ms(this,U)}};function Ms(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.o=5,Ps(d),xs(d)}function Ps(d){d.A||(d.A=!0,en(d,"complete"),en(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,en(this,"complete"),en(this,"abort"),xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),ft.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Dh(this):this.Xa())},n.Xa=function(){Dh(this)};function Dh(d){if(d.h&&typeof o<"u"){if(d.v&&it(d)==4)setTimeout(d.Ca.bind(d),0);else if(en(d,"readystatechange"),it(d)==4){d.h=!1;try{let U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var x;if(x=U===0){let Z=String(d.D).match(bh)[1]||null;!Z&&s.self&&s.self.location&&(Z=s.self.location.protocol.slice(0,-1)),x=!Ol.test(Z?Z.toLowerCase():"")}w=x}if(w)en(d,"complete"),en(d,"success");else{d.o=6;try{var F=it(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Ps(d)}}finally{xs(d)}}}}function xs(d,p){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);let w=d.g;d.g=null,p||en(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function it(d){return d.g?d.g.readyState:0}n.ca=function(){try{return it(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),Ig(p)}};function jg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function eE(d){let p={};d=(d.g&&it(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(b(d[x]))continue;var w=Is(d[x]);let F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let U=p[F]||[];p[F]=U,U.push(w)}_g(p,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(d,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||p}function Mh(d){this.za=0,this.i=[],this.j=new vs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rs("baseRetryDelayMs",5e3,d),this.Za=Rs("retryDelaySeedMs",1e4,d),this.Ta=Rs("forwardChannelMaxRetries",2,d),this.va=Rs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Pl(d&&d.concurrentRequestLimit),this.Ba=new Fg,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Mh.prototype,n.ka=8,n.I=1,n.connect=function(d,p,w,x){nn(0),this.W=d,this.H=p||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.J=Ul(this,null,this.W),qn(this)};function Nl(d){if(Ph(d),d.I==3){var p=d.V++,w=sr(d.J);if(ht(w,"SID",d.M),ht(w,"RID",p),ht(w,"TYPE","terminate"),Gr(d,w),p=new vi(d,d.j,p),p.M=2,p.A=Ga(sr(w)),w=!1,s.navigator&&s.navigator.sendBeacon)try{w=s.navigator.sendBeacon(p.A.toString(),"")}catch{}!w&&s.Image&&(new Image().src=p.A,w=!0),w||(p.g=Bl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),bs(p)}kh(d)}function vo(d){d.g&&(Fl(d),d.g.cancel(),d.g=null)}function Ph(d){vo(d),d.v&&(s.clearTimeout(d.v),d.v=null),Vl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&s.clearTimeout(d.m),d.m=null)}function qn(d){if(!Ss(d.h)&&!d.m){d.m=!0;var p=d.Ea;je||E(),ge||(je(),ge=!0),M.add(p,d),d.D=0}}function zg(d,p){return Ei(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=p.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=or(u(d.Ea,d,p),Os(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;let F=new vi(this,this.j,d),U=this.o;if(this.U&&(U?(U=vg(U),Zt(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,p>4096){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=xh(this,F,p),w=sr(this.J),ht(w,"RID",d),ht(w,"CVER",22),this.G&&ht(w,"X-HTTP-Session-Id",this.G),Gr(this,w),U&&(this.R?p="headers="+Ba(Ug(U))+"&"+p:this.u&&Ah(w,this.u,U)),wh(this.h,F),this.Ra&&ht(w,"TYPE","init"),this.S?(ht(w,"$req",p),ht(w,"SID","null"),F.U=!0,za(F,w,null)):za(F,w,p),this.I=2}}else this.I==3&&(d?$g(this,d):this.i.length==0||Ss(this.h)||$g(this))};function $g(d,p){var w;p?w=p.l:w=d.V++;let x=sr(d.J);ht(x,"SID",d.M),ht(x,"RID",w),ht(x,"AID",d.K),Gr(d,x),d.u&&d.o&&Ah(x,d.u,d.o),w=new vi(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),p&&(d.i=p.G.concat(d.i)),p=xh(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),wh(d.h,w),za(w,x,p)}function Gr(d,p){d.H&&hs(d.H,function(w,x){ht(p,x,w)}),d.l&&hs({},function(w,x){ht(p,x,w)})}function xh(d,p,w){w=Math.min(d.i.length,w);let x=d.l?u(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ie=-1;for(;;){let l=["count="+w];Ie==-1?w>0?(Ie=F[0].g,l.push("ofs="+Ie)):Ie=0:l.push("ofs="+Ie);let f=!0;for(let _=0;_<w;_++){var U=F[_].g;let P=F[_].map;if(U-=Ie,U<0)Ie=Math.max(0,F[_].g-100),f=!1;else try{U="req"+U+"_"||"";try{var Z=P instanceof Map?P:Object.entries(P);for(let[V,B]of Z){let Y=B;a(B)&&(Y=fs(B)),l.push(U+V+"="+encodeURIComponent(Y))}}catch(V){throw l.push(U+"type="+encodeURIComponent("_badmap")),V}}catch{x&&x(P)}}if(f){Z=l.join("&");break e}}Z=void 0}return d=d.i.splice(0,w),p.G=d,Z}function Ll(d){if(!d.g&&!d.v){d.Y=1;var p=d.Da;je||E(),ge||(je(),ge=!0),M.add(p,d),d.A=0}}function ks(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=or(u(d.Da,d),Os(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Ja(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=or(u(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nn(10),vo(this),Ja(this))};function Fl(d){d.B!=null&&(s.clearTimeout(d.B),d.B=null)}function Ja(d){d.g=new vi(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var p=sr(d.na);ht(p,"RID","rpc"),ht(p,"SID",d.M),ht(p,"AID",d.K),ht(p,"CI",d.F?"0":"1"),!d.F&&d.ia&&ht(p,"TO",d.ia),ht(p,"TYPE","xmlhttp"),Gr(d,p),d.u&&d.o&&Ah(p,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ga(sr(p)),w.u=null,w.R=!0,$a(w,d)}n.Va=function(){this.C!=null&&(this.C=null,vo(this),ks(this),nn(19))};function Vl(d){d.C!=null&&(s.clearTimeout(d.C),d.C=null)}function Rh(d,p){var w=null;if(d.g==p){Vl(d),Fl(d),d.g=null;var x=2}else if(Ha(d.h,p))w=p.G,Eh(d.h,p),x=1;else return;if(d.I!=0){if(p.o)if(x==1){w=p.u?p.u.length:0,p=Date.now()-p.F;var F=d.D;x=ms(),en(x,new Tl(x,w)),qn(d)}else Ll(d);else if(F=p.m,F==3||F==0&&p.X>0||!(x==1&&zg(d,p)||x==2&&ks(d)))switch(w&&w.length>0&&(p=d.h,p.i=p.i.concat(w)),F){case 1:bi(d,5);break;case 4:bi(d,10);break;case 3:bi(d,6);break;default:bi(d,2)}}}function Os(d,p){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*p}function bi(d,p){if(d.j.info("Error code "+p),p==2){var w=u(d.bb,d),x=d.Ua;let F=!x;x=new Cr(x||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||As(x,"https"),Ga(x),F?Ii(x.toString(),w):Lg(x.toString(),w)}else nn(2);d.I=0,d.l&&d.l.pa(p),kh(d),Ph(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function kh(d){if(d.I=0,d.ja=[],d.l){let p=Ih(d.h);(p.length!=0||d.i.length!=0)&&(k(d.ja,p),k(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function Ul(d,p,w){var x=w instanceof Cr?sr(w):new Cr(w);if(x.g!="")p&&(x.g=p+"."+x.g),qa(x,x.u);else{var F=s.location;x=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;let U=new Cr(null);x&&As(U,x),p&&(U.g=p),F&&qa(U,F),w&&(U.h=w),x=U}return w=d.G,p=d.wa,w&&p&&ht(x,w,p),ht(x,"VER",d.ka),Gr(d,x),x}function Bl(d,p,w){if(p&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Aa&&!d.ma?new ft(new qr({ab:w})):new ft(d.ma),p.Fa(d.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oh(){}n=Oh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wo(){}wo.prototype.g=function(d,p){return new An(d,p)};function An(d,p){Xt.call(this),this.g=new Mh(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(d?d["X-WebChannel-Client-Profile"]=p.sa:d={"X-WebChannel-Client-Profile":p.sa}),this.g.U=d,(d=p&&p.Qb)&&!b(d)&&(this.g.u=d),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!b(p)&&(this.g.G=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new Eo(this)}g(An,Xt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Nl(this.g)},An.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=fs(d),d=w);p.i.push(new Pg(p.Ya++,d)),p.I==3&&qn(p)},An.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,An.Z.N.call(this)};function Nh(d){Cl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(let w in p){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}g(Nh,Cl);function Ci(){Va.call(this),this.status=1}g(Ci,Va);function Eo(d){this.g=d}g(Eo,Oh),Eo.prototype.ra=function(){en(this.g,"a")},Eo.prototype.qa=function(d){en(this.g,new Nh(d))},Eo.prototype.pa=function(d){en(this.g,new Ci)},Eo.prototype.oa=function(){en(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,GS=Qo.createWebChannelTransport=function(){return new wo},qS=Qo.getStatEventTarget=function(){return ms()},HS=Qo.Event=yo,Nv=Qo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,sp=Qo.ErrorCode=Ua,ws.COMPLETE="complete",$S=Qo.EventType=ws,ps.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,td=Qo.WebChannel=ps,Xee=Qo.FetchXmlHttpFactory=qr,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,zS=Qo.XhrIo=ft}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var WV="@firebase/firestore",KV="4.9.2";var Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");var Sd="12.3.0";var Qc=new ua("@firebase/firestore");function nd(){return Qc.logLevel}function le(n,...e){if(Qc.logLevel<=$e.DEBUG){let t=e.map(xD);Qc.debug(`Firestore (${Sd}): ${n}`,...t)}}function Zo(n,...e){if(Qc.logLevel<=$e.ERROR){let t=e.map(xD);Qc.error(`Firestore (${Sd}): ${n}`,...t)}}function fp(n,...e){if(Qc.logLevel<=$e.WARN){let t=e.map(xD);Qc.warn(`Firestore (${Sd}): ${n}`,...t)}}function xD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LU(n,r,t)}function LU(n,e,t){let r=`FIRESTORE (${Sd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zo(r),new Error(r)}function xt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||LU(e,i,r)}function Ze(n,e){return n}var ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ye=class extends Nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ya=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var eA=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nn.UNAUTHENTICATED))}shutdown(){}};var nA=class{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ya,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ya)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new eA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}},rA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},iA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new rA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);let r=o=>{o.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,le("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ete(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var zv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ete(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ke(n,e){return n<e?-1:n>e?1:0}function sA(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return WS(i)===WS(o)?Ke(i,o):WS(i)?1:-1}return Ke(n.length,e.length)}var tte=55296,nte=57343;function WS(n){let e=n.charCodeAt(0);return e>=tte&&e<=nte}function pd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var QV="__name__",$v=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ke(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):sA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ko.fromString(e.substring(4,e.length-2))}},hn=class n extends $v{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},rte=/^[_a-zA-Z][_a-zA-Z0-9]*$/,di=class n extends $v{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return rte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QV}static keyField(){return new n([QV])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ye(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ye(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(hn.fromString(e))}static fromName(e){return new n(hn.fromString(e).popFirst(5))}static empty(){return new n(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new hn(e.slice()))}};function ite(n,e,t,r){if(e===!0&&r===!0)throw new ye(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ote(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ste(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function KS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ste(n);throw new ye(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ap(n,e){if(!ote(n))throw new ye(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ye(ne.INVALID_ARGUMENT,t);return!0}var YV=-62135596800,JV=1e6,zn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*JV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YV)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JV}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-YV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};zn._jsonSchemaVersion="firestore/timestamp/1.0",zn._jsonSchema={type:qt("string",zn._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};var Le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new zn(0,0))}static max(){return new n(new zn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pp=-1,aA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};aA.UNKNOWN_ID=-1;function ate(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new zn(t+1,0):new zn(t,r));return new Yc(i,Ce.empty(),e)}function cte(n){return new Yc(n.readTime,n.key,pp)}var Yc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Le.min(),Ce.empty(),pp)}static max(){return new n(Le.max(),Ce.empty(),pp)}};function lte(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}var ute="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function g0(n){return S(this,null,function*(){if(n.code!==ne.FAILED_PRECONDITION||n.message!==ute)throw n;le("LocalStore","Unexpectedly lost primary lease")})}var Q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function dte(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ad(n){return n.name==="IndexedDbTransactionError"}var RD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),hte=-1;function m0(n){return n==null}function Hv(n){return n===0&&1/n==-1/0}var FU="";function fte(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZV(e)),e=pte(n.get(t),e);return ZV(e)}function pte(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case FU:t+="";break;default:t+=o}}return t}function ZV(n){return n+FU+""}var gte="remoteDocuments",VU="owner";var UU="mutationQueues";var BU="mutations";var jU="documentMutations",mte="remoteDocumentsV14";var zU="remoteDocumentGlobal";var $U="targets";var HU="targetDocuments";var qU="targetGlobal",GU="collectionParents";var WU="clientMetadata";var KU="bundles";var QU="namedQueries";var yte="indexConfiguration";var _te="indexState";var vte="indexEntries";var YU="documentOverlays";var wte="globals";var Ete=[UU,BU,jU,gte,$U,VU,qU,HU,WU,zU,GU,KU,QU],Qbe=[...Ete,YU],Ite=[UU,BU,jU,mte,$U,VU,qU,HU,WU,zU,GU,KU,QU,YU],bte=Ite,Cte=[...bte,yte,_te,vte];var Ybe=[...Cte,wte];function XV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dp(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tte(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Vt=class n{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}},sd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}};Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1;Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _n=class n{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(e){return new qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hc=class n{constructor(e){this.fields=e,e.sort(di.comparator)}static empty(){return new n([])}unionWith(e){let t=new _n(di.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Gv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Gv("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ln.EMPTY_BYTE_STRING=new Ln("");var Ste=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(n){if(xt(!!n,39018),typeof n=="string"){let e=0,t=Ste.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function es(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}var JU="server_timestamp",ZU="__type__",XU="__previous_value__",e4="__local_write_time__";function kD(n){return(n?.mapValue?.fields||{})[ZU]?.stringValue===JU}function y0(n){let e=n.mapValue.fields[XU];return kD(e)?y0(e):e}function gp(n){let e=Xo(n.mapValue.fields[e4].timestampValue);return new zn(e.seconds,e.nanos)}var lA=class{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},uA="(default)",Wv=class n{constructor(e,t){this.projectId=e,this.database=t||uA}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===uA}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var t4="__type__",n4="__max__",Lv={mapValue:{fields:{__type__:{stringValue:n4}}}},r4="__vector__",mp="value";function _a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kD(n)?4:o4(n)?9007199254740991:i4(n)?10:11:Me(28295,{value:n})}function to(n,e){if(n===e)return!0;let t=_a(n);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gp(n).isEqual(gp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Xo(i.timestampValue),a=Xo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return es(i.bytesValue).isEqual(es(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return St(i.geoPointValue.latitude)===St(o.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return St(i.integerValue)===St(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=St(i.doubleValue),a=St(o.doubleValue);return s===a?Hv(s)===Hv(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return pd(n.arrayValue.values||[],e.arrayValue.values||[],to);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(XV(s)!==XV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!to(s[c],a[c])))return!1;return!0}(n,e);default:return Me(52216,{left:n})}}function yp(n,e){return(n.values||[]).find(t=>to(t,e))!==void 0}function gd(n,e){if(n===e)return 0;let t=_a(n),r=_a(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=St(o.integerValue||o.doubleValue),c=St(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return eU(n.timestampValue,e.timestampValue);case 4:return eU(gp(n),gp(e));case 5:return sA(n.stringValue,e.stringValue);case 6:return function(o,s){let a=es(o),c=es(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Ke(a[u],c[u]);if(h!==0)return h}return Ke(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ke(St(o.latitude),St(s.latitude));return a!==0?a:Ke(St(o.longitude),St(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return tU(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},c=s.fields||{},u=a[mp]?.arrayValue,h=c[mp]?.arrayValue,g=Ke(u?.values?.length||0,h?.values?.length||0);return g!==0?g:tU(u,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Lv.mapValue&&s===Lv.mapValue)return 0;if(o===Lv.mapValue)return 1;if(s===Lv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=sA(c[g],h[g]);if(I!==0)return I;let T=gd(a[c[g]],u[h[g]]);if(T!==0)return T}return Ke(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function eU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);let t=Xo(n),r=Xo(e),i=Ke(t.seconds,r.seconds);return i!==0?i:Ke(t.nanos,r.nanos)}function tU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=gd(t[i],r[i]);if(o)return o}return Ke(t.length,r.length)}function md(n){return dA(n)}function dA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Xo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=dA(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${dA(t.fields[s])}`;return i+"}"}(n.mapValue):Me(61005,{value:n})}function Uv(n){switch(_a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=y0(n);return e?16+Uv(e):16;case 5:return 2*n.stringValue.length;case 6:return es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Uv(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Dp(r.fields,(o,s)=>{i+=o.length+Uv(s)}),i}(n.mapValue);default:throw Me(13486,{value:n})}}function hA(n){return!!n&&"integerValue"in n}function OD(n){return!!n&&"arrayValue"in n}function nU(n){return!!n&&"nullValue"in n}function rU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function QS(n){return!!n&&"mapValue"in n}function i4(n){return(n?.mapValue?.fields||{})[t4]?.stringValue===r4}function cp(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Dp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cp(n.arrayValue.values[t]);return e}return $({},n)}function o4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===n4}var Zbe={mapValue:{fields:{[t4]:{stringValue:r4},[mp]:{arrayValue:{}}}}};var Yo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!QS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cp(t)}setAll(e){let t=di.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=cp(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());QS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return to(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];QS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dp(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cp(this.value))}};var hi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Le.min(),Le.min(),Le.min(),Yo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Le.min(),Le.min(),Yo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Le.min(),Le.min(),Yo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yd=class{constructor(e,t){this.position=e,this.inclusive=t}};function iU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ce.comparator(Ce.fromName(s.referenceValue),t.key):r=gd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!to(n.position[t],e.position[t]))return!1;return!0}var _d=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ate(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kv=class{},fn=class n extends Kv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pA(e,t,r):t==="array-contains"?new yA(e,r):t==="in"?new _A(e,r):t==="not-in"?new vA(e,r):t==="array-contains-any"?new wA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gA(e,r):new mA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gd(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},no=class n extends Kv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return s4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function s4(n){return n.op==="and"}function a4(n){return Dte(n)&&s4(n)}function Dte(n){for(let e of n.filters)if(e instanceof no)return!1;return!0}function fA(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+md(n.value);if(a4(n))return n.filters.map(e=>fA(e)).join(",");{let e=n.filters.map(t=>fA(t)).join(",");return`${n.op}(${e})`}}function c4(n,e){return n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&to(r.value,i.value)}(n,e):n instanceof no?function(r,i){return i instanceof no&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&c4(s,i.filters[a]),!0):!1}(n,e):void Me(19439)}function l4(n){return n instanceof fn?function(t){return`${t.field.canonicalString()} ${t.op} ${md(t.value)}`}(n):n instanceof no?function(t){return t.op.toString()+" {"+t.getFilters().map(l4).join(" ,")+"}"}(n):"Filter"}var pA=class extends fn{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){let t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}},gA=class extends fn{constructor(e,t){super(e,"in",t),this.keys=u4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},mA=class extends fn{constructor(e,t){super(e,"not-in",t),this.keys=u4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function u4(n,e){return(e.arrayValue?.values||[]).map(t=>Ce.fromName(t.referenceValue))}var yA=class extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return OD(t)&&yp(t.arrayValue,this.value)}},_A=class extends fn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&yp(this.value.arrayValue,t)}},vA=class extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yp(this.value.arrayValue,t)}},wA=class extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!OD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yp(this.value.arrayValue,r))}};var EA=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function sU(n,e=null,t=[],r=[],i=null,o=null,s=null){return new EA(n,e,t,r,i,o,s)}function ND(n){let e=Ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),m0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>md(r)).join(",")),e.Te=t}return e.Te}function LD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ate(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!c4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oU(n.startAt,e.startAt)&&oU(n.endAt,e.endAt)}function IA(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var vd=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Mte(n,e,t,r,i,o,s,a){return new vd(n,e,t,r,i,o,s,a)}function FD(n){return new vd(n)}function aU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Pte(n){return n.collectionGroup!==null}function lp(n){let e=Ze(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _n(di.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _d(o,r))}),t.has(di.keyField().canonicalString())||e.Ie.push(new _d(di.keyField(),r))}return e.Ie}function eo(n){let e=Ze(n);return e.Ee||(e.Ee=xte(e,lp(n))),e.Ee}function xte(n,e){if(n.limitType==="F")return sU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _d(i.field,o)});let t=n.endAt?new yd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yd(n.startAt.position,n.startAt.inclusive):null;return sU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function bA(n,e,t){return new vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _0(n,e){return LD(eo(n),eo(e))&&n.limitType===e.limitType}function d4(n){return`${ND(eo(n))}|lt:${n.limitType}`}function rd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>l4(i)).join(", ")}]`),m0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>md(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>md(i)).join(",")),`Target(${r})`}(eo(n))}; limitType=${n.limitType})`}function v0(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of lp(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=iU(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,lp(r),i)||r.endAt&&!function(s,a,c){let u=iU(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,lp(r),i))}(n,e)}function Rte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h4(n){return(e,t)=>{let r=!1;for(let i of lp(n)){let o=kte(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function kte(n,e,t){let r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?gd(c,u):Me(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:n.dir})}}var ts=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dp(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Tte(this.inner)}size(){return this.innerSize}};var Ote=new Vt(Ce.comparator);function va(){return Ote}var f4=new Vt(Ce.comparator);function ap(...n){let e=f4;for(let t of n)e=e.insert(t.key,t);return e}function Nte(n){let e=f4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qc(){return up()}function p4(){return up()}function up(){return new ts(n=>n.toString(),(n,e)=>n.isEqual(e))}var Xbe=new Vt(Ce.comparator),Lte=new _n(Ce.comparator);function tt(...n){let e=Lte;for(let t of n)e=e.add(t);return e}var Fte=new _n(Ke);function Vte(){return Fte}function Ute(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hv(e)?"-0":e}}function Bte(n){return{integerValue:""+n}}var wd=class{constructor(){this._=void 0}};function jte(n,e,t){return n instanceof _p?function(i,o){let s={fields:{[ZU]:{stringValue:JU},[e4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kD(o)&&(o=y0(o)),o&&(s.fields[XU]=o),{mapValue:s}}(t,e):n instanceof Ed?g4(n,e):n instanceof Id?m4(n,e):function(i,o){let s=$te(i,o),a=cU(s)+cU(i.Ae);return hA(s)&&hA(i.Ae)?Bte(a):Ute(i.serializer,a)}(n,e)}function zte(n,e,t){return n instanceof Ed?g4(n,e):n instanceof Id?m4(n,e):t}function $te(n,e){return n instanceof vp?function(r){return hA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var _p=class extends wd{},Ed=class extends wd{constructor(e){super(),this.elements=e}};function g4(n,e){let t=y4(e);for(let r of n.elements)t.some(i=>to(i,r))||t.push(r);return{arrayValue:{values:t}}}var Id=class extends wd{constructor(e){super(),this.elements=e}};function m4(n,e){let t=y4(e);for(let r of n.elements)t=t.filter(i=>!to(i,r));return{arrayValue:{values:t}}}var vp=class extends wd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function cU(n){return St(n.integerValue||n.doubleValue)}function y4(n){return OD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Hte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ed&&i instanceof Ed||r instanceof Id&&i instanceof Id?pd(r.elements,i.elements,to):r instanceof vp&&i instanceof vp?to(r.Ae,i.Ae):r instanceof _p&&i instanceof _p}(n.transform,e.transform)}var dp=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Bv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wp=class{};function _4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new CA(n.key,dp.none()):new Ep(n.key,n.data,dp.none());{let t=n.data,r=Yo.empty(),i=new _n(di.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new bd(n.key,r,new Hc(i.toArray()),dp.none())}}function qte(n,e,t){n instanceof Ep?function(i,o,s){let a=i.value.clone(),c=uU(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof bd?function(i,o,s){if(!Bv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=uU(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(v4(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function hp(n,e,t,r){return n instanceof Ep?function(o,s,a,c){if(!Bv(o.precondition,s))return a;let u=o.value.clone(),h=dU(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof bd?function(o,s,a,c){if(!Bv(o.precondition,s))return a;let u=dU(o.fieldTransforms,c,s),h=s.data;return h.setAll(v4(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return Bv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function lU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pd(r,i,(o,s)=>Hte(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ep=class extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bd=class extends wp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function v4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function uU(n,e,t){let r=new Map;xt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zte(s,a,t[i]))}return r}function dU(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,jte(o,s,e))}return r}var CA=class extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var TA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&qte(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=p4();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=_4(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tt())}isEqual(e){return this.batchId===e.batchId&&pd(this.mutations,e.mutations,(t,r)=>lU(t,r))&&pd(this.baseMutations,e.baseMutations,(t,r)=>lU(t,r))}};var SA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var AA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Je;function w4(n){if(n===void 0)return Zo("GRPC error has no .code"),ne.UNKNOWN;switch(n){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return Me(39323,{code:n})}}(Je=$t||($t={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";var Gte=null;function Wte(){return new TextEncoder}var Kte=new Ko([4294967295,4294967295],0);function hU(n){let e=Wte().encode(n),t=new jS;return t.update(e),new Uint8Array(t.digest())}function fU(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ko([t,r],0),new Ko([i,o],0)]}var DA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(r<0)throw new Gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ko.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ko.fromNumber(r)));return i.compare(Kte)===1&&(i=new Ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=hU(e),[r,i]=fU(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=hU(e),[r,i]=fU(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Gc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Le.min(),i,new Vt(Ke),va(),tt())}},Ip=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,tt(),tt(),tt())}};var ad=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Yv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Jv=class{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Zv=class{constructor(){this.ve=0,this.Fe=pU(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),r=tt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me(38017,{changeType:o})}}),new Ip(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=pU()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},MA=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=va(),this.Je=Fv(),this.He=Fv(),this.Ye=new Vt(Ke)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(IA(o))if(r===0){let s=new Ce(o.path);this.et(t,s,hi.newNoDocument(s,Le.min()))}else xt(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}Gte?.lt(function(h,g,I,T,k){let L={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},O=g.unchangedNames;return O&&(L.bloomFilter={applied:k===0,hashCount:O?.hashCount??0,bitmapLength:O?.bits?.bitmap?.length??0,padding:O?.bits?.padding??0,mightContain:q=>T?.mightContain(q)??!1}),L}(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=es(r).toUint8Array()}catch(c){if(c instanceof Gv)return fp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new DA(s,i,o)}catch(c){return fp(c instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&IA(a.target)){let c=new Ce(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,hi.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=tt();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Qv(e,t,this.Ye,this.je,r);return this.je=va(),this.Je=Fv(),this.He=Fv(),this.Ye=new Vt(Ke),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Zv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Fv(){return new Vt(Ce.comparator)}function pU(){return new Vt(Ce.comparator)}var Qte={asc:"ASCENDING",desc:"DESCENDING"},Yte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jte={and:"AND",or:"OR"},PA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xA(n,e){return n.useProto3Json||m0(e)?e:{value:e}}function Zte(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xte(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cd(n){return xt(!!n,49232),Le.fromTimestamp(function(t){let r=Xo(t);return new zn(r.seconds,r.nanos)}(n))}function ene(n,e){return RA(n,e).canonicalString()}function RA(n,e){let t=function(i){return new hn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function E4(n){let e=hn.fromString(n);return xt(S4(e),10190,{key:e.toString()}),e}function YS(n,e){let t=E4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(b4(t))}function I4(n,e){return ene(n.databaseId,e)}function tne(n){let e=E4(n);return e.length===4?hn.emptyPath():b4(e)}function gU(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b4(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nne(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Me(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(xt(h===void 0||typeof h=="string",58123),Ln.fromBase64String(h||"")):(xt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ln.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?ne.UNKNOWN:w4(u.code);return new ye(h,u.message||"")}(s);t=new Jv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=YS(n,r.document.name),o=cd(r.document.updateTime),s=r.document.createTime?cd(r.document.createTime):Le.min(),a=new Yo({mapValue:{fields:r.document.fields}}),c=hi.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new ad(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=YS(n,r.document),o=r.readTime?cd(r.readTime):Le.min(),s=hi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ad([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=YS(n,r.document),o=r.removedTargetIds||[];t=new ad([],o,i,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new AA(i,o),a=r.targetId;t=new Yv(a,s)}}return t}function rne(n,e){return{documents:[I4(n,e.path)]}}function ine(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=I4(n,i);let o=function(u){if(u.length!==0)return T4(no.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:id(I.field),direction:ane(I.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=xA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function one(n){let e=tne(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){xt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let I=C4(g);return I instanceof no&&a4(I)?I.getFilters():[I]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(I=>function(k){return new _d(od(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,m0(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,T=g.values||[];return new yd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let I=!g.before,T=g.values||[];return new yd(T,I)}(t.endAt)),Mte(e,i,s,o,a,"F",c,u)}function sne(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C4(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=od(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=od(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=od(t.unaryFilter.field);return fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=od(t.unaryFilter.field);return fn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(n):n.fieldFilter!==void 0?function(t){return fn.create(od(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return no.create(t.compositeFilter.filters.map(r=>C4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(t.compositeFilter.op))}(n):Me(30097,{filter:n})}function ane(n){return Qte[n]}function cne(n){return Yte[n]}function lne(n){return Jte[n]}function id(n){return{fieldPath:n.canonicalString()}}function od(n){return di.fromServerFormat(n.fieldPath)}function T4(n){return n instanceof fn?function(t){if(t.op==="=="){if(rU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NAN"}};if(nU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NAN"}};if(nU(t.value))return{unaryFilter:{field:id(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:id(t.field),op:cne(t.op),value:t.value}}}(n):n instanceof no?function(t){let r=t.getFilters().map(i=>T4(i));return r.length===1?r[0]:{compositeFilter:{op:lne(t.op),filters:r}}}(n):Me(54877,{filter:n})}function S4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bp=class n{constructor(e,t,r,i,o=Le.min(),s=Le.min(),a=Ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kA=class{constructor(e){this.yt=e}};function une(n){let e=one({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bA(e,e.limit,"L"):e}var Xv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){let r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Hv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Xo(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(es(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?o4(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):i4(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=mp,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Xv.Kt=new Xv;var OA=class{constructor(){this.Cn=new NA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Yc.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Yc.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},NA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(hn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(hn.comparator)).toArray()}};var eCe=new Uint8Array(0);var mU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A4=41943040,Fr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(A4,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var Cp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var yU="LruGarbageCollector",dne=1048576;function _U([n,e],[t,r]){let i=Ke(n,t);return i===0?Ke(e,r):i}var LA=class{constructor(e){this.Ir=e,this.buffer=new _n(_U),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();_U(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},FA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(yU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ad(t)?le(yU,"Ignoring IndexedDB error during garbage collection: ",t):yield g0(t)}yield this.Vr(3e5)}))}},VA=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(RD.ce);let r=new LA(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(mU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mU):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),nd()<=$e.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function hne(n,e){return new VA(n,e)}var UA=class{constructor(){this.changes=new ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var BA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var jA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hp(r.mutation,i,Hc.empty(),zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tt()){let i=qc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ap();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=qc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tt()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=va(),s=up(),a=function(){return up()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof bd)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),hp(h.mutation,u,h.mutation.getFieldMask(),zn.now())):s.set(u.key,Hc.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>a.set(u,new BA(h,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=up(),i=new Vt((s,a)=>s-a),o=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||Hc.empty();h=a.applyToLocalView(u,h),r.set(c,h);let g=(i.get(a.batchId)||tt()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,g=p4();h.forEach(I=>{if(!o.has(I)){let T=_4(t.get(I),r.get(I));T!==null&&g.set(I,T),o=o.add(I)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return Q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pte(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Q.resolve(qc()),a=pp,c=o;return s.next(u=>Q.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,tt())).next(h=>({batchId:a,changes:Nte(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let i=ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ap();return this.indexManager.getCollectionParents(e,o).next(a=>Q.forEach(a,c=>{let u=function(g,I){return new vd(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,I)=>{s=s.insert(g,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,hi.newInvalidDocument(h)))});let a=ap();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&hp(h.mutation,u,Hc.empty(),zn.now()),v0(t,u)&&(a=a.insert(c,u))}),a})}};var zA=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:cd(i.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:une(i.bundledQuery),readTime:cd(i.readTime)}}(t)),Q.resolve()}};var $A=class{constructor(){this.overlays=new Vt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=qc();return Q.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){let i=qc(),o=t.length+1,s=new Ce(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Vt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=qc(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=qc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new SA(t,r));let o=this.qr.get(t);o===void 0&&(o=tt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var HA=class{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}};var Tp=class{constructor(){this.Qr=new _n(Ht.$r),this.Ur=new _n(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Ce(new hn([])),r=new Ht(t,e),i=new Ht(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ce(new hn([])),r=new Ht(t,e),i=new Ht(t,e+1),o=tt();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ht=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}};var qA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Ht.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new TA(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ht(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?hte:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ke);return t.forEach(i=>{let o=new Ht(i,0),s=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Ce.isDocumentKey(o)||(o=o.child(""));let s=new Ht(new Ce(o),0),a=new _n(Ke);return this.Zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},s),Q.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(t.mutations,i=>{let o=new Ht(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var GA=class{constructor(e){this.ri=e,this.docs=function(){return new Vt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(t))}getEntries(e,t){let r=va();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hi.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=va(),s=t.path,a=new Ce(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||lte(cte(h),r)<=0||(i.has(h.key)||v0(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Me(9500)}ii(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WA(this)}getSize(e){return Q.resolve(this.size)}},WA=class extends UA{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var KA=class{constructor(e){this.persistence=e,this.si=new ts(t=>ND(t),LD),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new Tp,this.targetCount=0,this.ai=Cp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Cp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}};var e0=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new RD(0),this.li=!1,this.li=!0,this.hi=new HA,this.referenceDelegate=e(this),this.Pi=new KA(this),this.indexManager=new OA,this.remoteDocumentCache=function(i){return new GA(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new kA(t),this.Ii=new zA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $A,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new qA(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);let i=new QA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},QA=class extends cA{constructor(e){super(),this.currentSequenceNumber=e}},YA=class n{constructor(e){this.persistence=e,this.Ri=new Tp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{let i=Ce.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},t0=class n{constructor(e,t){this.persistence=e,this.pi=new ts(r=>fte(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hne(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?Q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uv(e.data.value)),t}br(e,t,r){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var JA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=tt(),i=tt();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ZA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XA=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return h2()?8:dte(wr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ZA;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(nd()<=$e.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",rd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(nd()<=$e.DEBUG&&le("QueryEngine","Query:",rd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(nd()<=$e.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",rd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eo(t))):Q.resolve())}ys(e,t){if(aU(t))return Q.resolve(null);let r=eo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bA(t,null,"F"),r=eo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=tt(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Ds(t,a);return this.Cs(t,u,s,c.readTime)?this.ys(e,bA(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,r,i){return aU(t)||i.isEqual(Le.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?Q.resolve(null):(nd()<=$e.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rd(t)),this.vs(e,s,t,ate(i,pp)).next(a=>a))})}Ds(e,t){let r=new _n(h4(e));return t.forEach((i,o)=>{v0(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return nd()<=$e.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",rd(t)),this.ps.getDocumentsMatchingQuery(e,t,Yc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var VD="LocalStore",fne=3e8,eD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(Ke),this.xs=new ts(o=>ND(o),LD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function pne(n,e,t,r){return new eD(n,e,t,r)}function D4(n,e){return S(this,null,function*(){let t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=tt();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function M4(n){let e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function gne(n,e){let t=Ze(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,g)));let T=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Ln.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(g,T),function(L,O,q){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=fne?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.Pi.updateTargetData(o,T))});let c=va(),u=tt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(mne(o,s,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Le.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return Q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ms=i,o))}function mne(n,e,t){let r=tt(),i=tt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=va();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):le(VD,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:s,qs:i}})}function yne(n,e){let t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new bp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function tD(n,e,t){return S(this,null,function*(){let r=Ze(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ad(s))throw s;le(VD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function vU(n,e,t){let r=Ze(n),i=Le.min(),o=tt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let g=Ze(c),I=g.xs.get(h);return I!==void 0?Q.resolve(g.Ms.get(I)):g.Pi.getTargetData(u,h)}(r,s,eo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Le.min(),t?o:tt())).next(a=>(_ne(r,Rte(e),a),{documents:a,Qs:o})))}function _ne(n,e,t){let r=n.Os.get(e)||Le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var n0=class{constructor(){this.activeTargetIds=Vte()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nD=class{constructor(){this.Mo=new n0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rD=class{Oo(e){}shutdown(){}};var wU="ConnectivityMonitor",r0=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(wU,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){le(wU,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vv=null;function iD(){return Vv===null?Vv=function(){return 268435456+Math.round(2147483648*Math.random())}():Vv++,"0x"+Vv.toString(16)}var JS="RestConnection",vne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},oD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===uA?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=iD(),a=this.zo(e,t.toUriEncodedString());le(JS,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:u}=new URL(a),h=Gf(u);return this.Jo(e,a,c,r,h).then(g=>(le(JS,`Received RPC '${e}' ${s}: `,g),g),g=>{throw fp(JS,`RPC '${e}' ${s} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=vne[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var sD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var On="WebChannelConnection",aD=class extends oD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=iD();return new Promise((a,c)=>{let u=new zS;u.setWithCredentials(!0),u.listenOnce($S.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sp.NO_ERROR:let g=u.getResponseJson();le(On,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case sp.TIMEOUT:le(On,`RPC '${e}' ${s} timed out`),c(new ye(ne.DEADLINE_EXCEEDED,"Request time out"));break;case sp.HTTP_ERROR:let I=u.getStatus();if(le(On,`RPC '${e}' ${s} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ee)>=0?ee:ne.UNKNOWN}(k.status);c(new ye(L,k.message))}else c(new ye(ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(ne.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{le(On,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);le(On,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}T_(e,t,r){let i=iD(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=GS(),a=qS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");le(On,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c);this.I_(g);let I=!1,T=!1,k=new sD({Yo:O=>{T?le(On,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(le(On,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),le(On,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),L=(O,q,ee)=>{O.listen(q,W=>{try{ee(W)}catch(de){setTimeout(()=>{throw de},0)}})};return L(g,td.EventType.OPEN,()=>{T||(le(On,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),L(g,td.EventType.CLOSE,()=>{T||(T=!0,le(On,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(g))}),L(g,td.EventType.ERROR,O=>{T||(T=!0,fp(On,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),k.a_(new ye(ne.UNAVAILABLE,"The operation could not be completed")))}),L(g,td.EventType.MESSAGE,O=>{if(!T){let q=O.data[0];xt(!!q,16349);let ee=q,W=ee?.error||ee[0]?.error;if(W){le(On,`RPC '${e}' stream ${i} received error:`,W);let de=W.status,je=function(E){let C=$t[E];if(C!==void 0)return w4(C)}(de),ge=W.message;je===void 0&&(je=ne.INTERNAL,ge="Unknown error status: "+de+" with message "+W.message),T=!0,k.a_(new ye(je,ge)),g.close()}else le(On,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}}),L(a,HS.STAT_EVENT,O=>{O.stat===Nv.PROXY?le(On,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Nv.NOPROXY&&le(On,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function ZS(){return typeof document<"u"?document:null}function P4(n){return new PA(n,!0)}var i0=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var EU="PersistentStream",cD=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new i0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return S(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return S(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Zo(t.toString()),Zo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ye(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>S(this,null,function*(){this.state=0,this.start()}))}z_(e){return le(EU,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(le(EU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lD=class extends cD{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=nne(this.serializer,e),r=function(o){if(!("targetChange"in o))return Le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Le.min():s.readTime?cd(s.readTime):Le.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=gU(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=IA(c)?{documents:rne(o,c)}:{query:ine(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Xte(o,s.resumeToken);let u=xA(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Le.min())>0){a.readTime=Zte(o,s.snapshotVersion.toTimestamp());let u=xA(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=sne(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=gU(this.serializer),t.removeTarget=e,this.q_(t)}};var uD=class{},dD=class extends uD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,RA(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ne.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,RA(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ne.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},hD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zo(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Cd="RemoteStore",fD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){Pp(this)&&(le(Cd,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Ze(c);u.Ea.add(4),yield Mp(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield w0(u)})}(this))}))}),this.Ra=new hD(r,i)}};function w0(n){return S(this,null,function*(){if(Pp(n))for(let e of n.da)yield e(!0)})}function Mp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function x4(n,e){let t=Ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zD(t)?jD(t):Dd(t).O_()&&BD(t,e))}function UD(n,e){let t=Ze(n),r=Dd(t);t.Ia.delete(e),r.O_()&&R4(t,e),t.Ia.size===0&&(r.O_()?r.L_():Pp(t)&&t.Ra.set("Unknown"))}function BD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dd(n).Y_(e)}function R4(n,e){n.Va.Ue(e),Dd(n).Z_(e)}function jD(n){n.Va=new MA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Dd(n).start(),n.Ra.ua()}function zD(n){return Pp(n)&&!Dd(n).x_()&&n.Ia.size>0}function Pp(n){return Ze(n).Ea.size===0}function k4(n){n.Va=void 0}function wne(n){return S(this,null,function*(){n.Ra.set("Online")})}function Ene(n){return S(this,null,function*(){n.Ia.forEach((e,t)=>{BD(n,e)})})}function Ine(n,e){return S(this,null,function*(){k4(n),zD(n)?(n.Ra.ha(e),jD(n)):n.Ra.set("Unknown")})}function bne(n,e,t){return S(this,null,function*(){if(n.Ra.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){le(Cd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield IU(n,r)}else if(e instanceof ad?n.Va.Ze(e):e instanceof Yv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{let r=yield M4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(u);h&&o.Ia.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Ln.EMPTY_BYTE_STRING,h.snapshotVersion)),R4(o,c);let g=new bp(h.target,c,u,h.sequenceNumber);BD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){le(Cd,"Failed to raise snapshot:",r),yield IU(n,r)}})}function IU(n,e,t){return S(this,null,function*(){if(!Ad(e))throw e;n.Ea.add(1),yield Mp(n),n.Ra.set("Offline"),t||(t=()=>M4(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){le(Cd,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield w0(n)}))})}function bU(n,e){return S(this,null,function*(){let t=Ze(n);t.asyncQueue.verifyOperationInProgress(),le(Cd,"RemoteStore received new credentials");let r=Pp(t);t.Ea.add(3),yield Mp(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield w0(t)})}function Cne(n,e){return S(this,null,function*(){let t=Ze(n);e?(t.Ea.delete(2),yield w0(t)):e||(t.Ea.add(2),yield Mp(t),t.Ra.set("Unknown"))})}function Dd(n){return n.ma||(n.ma=function(t,r,i){let o=Ze(t);return o.sa(),new lD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:wne.bind(null,n),t_:Ene.bind(null,n),r_:Ine.bind(null,n),H_:bne.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.B_(),zD(n)?jD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),k4(n))}))),n.ma}var pD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function O4(n,e){if(Zo("AsyncQueue",`${e}: ${n}`),Ad(n))return new ye(ne.UNAVAILABLE,`${e}: ${n}`);throw n}var o0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=ap(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var s0=class{constructor(){this.ga=new Vt(Ce.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Td=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,o0.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var gD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},mD=class{constructor(){this.queries=CU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ze(t),o=i.queries;i.queries=CU(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ye(ne.ABORTED,"Firestore shutting down"))}};function CU(){return new ts(n=>d4(n),_0)}function Tne(n,e){return S(this,null,function*(){let t=Ze(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new gD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=O4(s,`Initialization of query '${rd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&$D(t)})}function Sne(n,e){return S(this,null,function*(){let t=Ze(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Ane(n,e){let t=Ze(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&$D(t)}function Dne(n,e,t){let r=Ze(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function $D(n){n.Ca.forEach(e=>{e.next()})}var yD,TU;(TU=yD||(yD={})).Ma="default",TU.Cache="cache";var _D=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Td(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yD.Cache}};var a0=class{constructor(e){this.key=e}},c0=class{constructor(e){this.key=e}},vD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=h4(e),this.tu=new o0(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new s0,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),T=v0(this.query,g)?g:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),O=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),O=!0):this.su(I,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.eu(T,c)>0||u&&this.eu(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),O=!0):I&&!T&&(r.track({type:1,doc:I}),O=!0,(c||u)&&(a=!0)),O&&(T?(s=s.add(T),o=L?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>function(T,k){let L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:O})}};return L(T)-L(k)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new Td(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=tt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new c0(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new a0(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=tt();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Td.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},HD="SyncEngine",wD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ED=class{constructor(e){this.key=e,this.hu=!1}},ID=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ts(a=>d4(a),_0),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Ce.comparator),this.Au=new Map,this.Ru=new Tp,this.Vu={},this.mu=new Map,this.fu=Cp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Mne(n,e,t=!0){return S(this,null,function*(){let r=U4(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield N4(r,e,t,!0),i})}function Pne(n,e){return S(this,null,function*(){let t=U4(n);yield N4(t,e,!0,!1)})}function N4(n,e,t,r){return S(this,null,function*(){let i=yield yne(n.localStore,eo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield xne(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&x4(n.remoteStore,i),a})}function xne(n,e,t,r,i){return S(this,null,function*(){n.pu=(g,I,T)=>function(L,O,q,ee){return S(this,null,function*(){let W=O.view.ru(q);W.Cs&&(W=yield vU(L.localStore,O.query,!1).then(({documents:M})=>O.view.ru(M,W)));let de=ee&&ee.targetChanges.get(O.targetId),je=ee&&ee.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(W,L.isPrimaryClient,de,je);return AU(L,O.targetId,ge.au),ge.snapshot})}(n,g,I,T);let o=yield vU(n.localStore,e,!0),s=new vD(e,o.Qs),a=s.ru(o.documents),c=Ip.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);AU(n,t,u.au);let h=new wD(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Rne(n,e,t){return S(this,null,function*(){let r=Ze(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!_0(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&UD(r.remoteStore,i.targetId),bD(r,i.targetId)}).catch(g0))):(bD(r,i.targetId),yield tD(r.localStore,i.targetId,!0))})}function kne(n,e){return S(this,null,function*(){let t=Ze(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),UD(t.remoteStore,r.targetId))})}function L4(n,e){return S(this,null,function*(){let t=Ze(n);try{let r=yield gne(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?xt(s.hu,14607):i.removedDocuments.size>0&&(xt(s.hu,42227),s.hu=!1))}),yield V4(t,r,e)}catch(r){yield g0(r)}})}function SU(n,e,t){let r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ze(s);c.onlineState=a;let u=!1;c.queries.forEach((h,g)=>{for(let I of g.Sa)I.va(a)&&(u=!0)}),u&&$D(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function One(n,e,t){return S(this,null,function*(){let r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Vt(Ce.comparator);s=s.insert(o,hi.newNoDocument(o,Le.min()));let a=tt().add(o),c=new Qv(Le.min(),new Map,new Vt(Ke),s,a);yield L4(r,c),r.du=r.du.remove(o),r.Au.delete(e),qD(r)}else yield tD(r.localStore,e,!1).then(()=>bD(r,e,t)).catch(g0)})}function bD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||F4(n,r)})}function F4(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(UD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qD(n))}function AU(n,e,t){for(let r of t)r instanceof a0?(n.Ru.addReference(r.key,e),Nne(n,r)):r instanceof c0?(le(HD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||F4(n,r.key)):Me(19791,{wu:r})}function Nne(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(HD,"New document in limbo: "+t),n.Eu.add(r),qD(n))}function qD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ce(hn.fromString(e)),r=n.fu.next();n.Au.set(r,new ED(t)),n.du=n.du.insert(t,r),x4(n.remoteStore,new bp(eo(FD(t.path)),r,"TargetPurposeLimboResolution",RD.ce))}}function V4(n,e,t){return S(this,null,function*(){let r=Ze(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=JA.As(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(c,u){return S(this,null,function*(){let h=Ze(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(u,I=>Q.forEach(I.Es,T=>h.persistence.referenceDelegate.addReference(g,I.targetId,T)).next(()=>Q.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(g,I.targetId,T)))))}catch(g){if(!Ad(g))throw g;le(VD,"Failed to update sequence numbers: "+g)}for(let g of u){let I=g.targetId;if(!g.fromCache){let T=h.Ms.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(I,L)}}})}(r.localStore,o))})}function Lne(n,e){return S(this,null,function*(){let t=Ze(n);if(!t.currentUser.isEqual(e)){le(HD,"User change. New user:",e.toKey());let r=yield D4(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new ye(ne.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield V4(t,r.Ls)}})}function Fne(n,e){let t=Ze(n),r=t.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let i=tt(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function U4(n){let e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=L4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=One.bind(null,e),e.Pu.H_=Ane.bind(null,e.eventManager),e.Pu.yu=Dne.bind(null,e.eventManager),e}var B4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=P4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return pne(this.persistence,new XA,t.initialUser,this.serializer)}Cu(t){return new e0(YA.mi,this.serializer)}Du(t){return new nD}terminate(){return S(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),CD=class extends B4{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xt(this.persistence.referenceDelegate instanceof t0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new FA(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new e0(r=>t0.mi(r,t),this.serializer)}};var Vne=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lne.bind(null,this.syncEngine),yield Cne(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mD}()}createDatastore(t){let r=P4(t.databaseInfo.databaseId),i=function(s){return new aD(s)}(t.databaseInfo);return function(s,a,c,u){return new dD(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new fD(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>SU(this.syncEngine,r,0),function(){return r0.v()?new r0:new rD}())}createSyncEngine(t,r){return function(o,s,a,c,u,h,g){let I=new ID(o,s,a,c,u,h);return g&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){yield function(r){return S(this,null,function*(){let i=Ze(r);le(Cd,"RemoteStore shutting down."),i.Ea.add(5),yield Mp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var TD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wa="FirestoreClient",SD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){le(wa,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(le(wa,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=O4(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function XS(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),le(wa,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield D4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function DU(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Une(n);le(wa,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>bU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>bU(e.remoteStore,i)),n._onlineComponents=e})}function Une(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(wa,"Using user provided OfflineComponentProvider");try{yield XS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fp("Error using user provided cache. Falling back to memory cache: "+t),yield XS(n,new B4)}}else le(wa,"Using default OfflineComponentProvider"),yield XS(n,new CD(void 0));return n._offlineComponents})}function Bne(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(wa,"Using user provided OnlineComponentProvider"),yield DU(n,n._uninitializedComponentsProvider._online)):(le(wa,"Using default OnlineComponentProvider"),yield DU(n,new Vne))),n._onlineComponents})}function MU(n){return S(this,null,function*(){let e=yield Bne(n),t=e.eventManager;return t.onListen=Mne.bind(null,e.syncEngine),t.onUnlisten=Rne.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Pne.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kne.bind(null,e.syncEngine),t})}function j4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var PU=new Map;var jne="firestore.googleapis.com",xU=!0,l0=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jne,this.ssl=xU}else this.host=e.host,this.ssl=e.ssl??xU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dne)throw new ye(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ite("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j4(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},AD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tA;switch(r.type){case"firstParty":return new iA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=PU.get(t);r&&(le("ComponentProvider","Removing Datastore"),PU.delete(t),r.terminate())}(this),Promise.resolve()}};var u0=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Jo=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new DD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ap(t,n._jsonSchema))return new n(e,r||null,new Ce(hn.fromString(t.referencePath)))}};Jo._jsonSchemaVersion="firestore/documentReference/1.0",Jo._jsonSchema={type:qt("string",Jo._jsonSchemaVersion),referencePath:qt("string")};var DD=class n extends u0{constructor(e,t,r){super(e,t,FD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Jo(this.firestore,null,new Ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var RU="AsyncQueue",d0=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i0(this,"async_queue_retry"),this._c=()=>{let r=ZS();r&&le(RU,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=ZS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=ZS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new ya;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return S(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ad(e))throw e;le(RU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Zo("INTERNAL UNHANDLED ERROR: ",kU(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=pD.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Me(47125,{Pc:kU(this.nc)})}verifyOperationInProgress(){}Tc(){return S(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function kU(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function OU(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sp=class extends AD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d0,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new d0(e),this._firestoreClient=void 0,yield e}})}};function zne(n){if(n._terminated)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$ne(n),n._firestoreClient}function $ne(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new lA(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,j4(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new SD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var ld=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ln.fromBase64String(e))}catch(t){throw new ye(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ap(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ld._jsonSchemaVersion="firestore/bytes/1.0",ld._jsonSchema={type:qt("string",ld._jsonSchemaVersion),bytes:qt("string")};var h0=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ud=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ud._jsonSchemaVersion="firestore/geoPoint/1.0",ud._jsonSchema={type:qt("string",ud._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};var dd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ap(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ye(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};dd._jsonSchemaVersion="firestore/vectorValue/1.0",dd._jsonSchema={type:qt("string",dd._jsonSchemaVersion),vectorValues:qt("object")};var Hne=new RegExp("[~\\*/\\[\\]]");function qne(n,e,t){if(e.search(Hne)>=0)throw NU(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new h0(...e.split("."))._internalPath}catch{throw NU(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function NU(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ye(ne.INVALID_ARGUMENT,a+n+c)}var f0=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Jo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(z4("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},MD=class extends f0{data(){return super.data()}};function z4(n,e){return typeof e=="string"?qne(n,e):e instanceof h0?e._internalPath:e._delegate._internalPath}function Gne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var PD=class{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Dp(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[mp].arrayValue?.values?.map(r=>St(r.doubleValue));return new dd(t)}convertGeoPoint(e){return new ud(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=y0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){let t=Xo(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=hn.fromString(e);xt(S4(r),9688,{name:e});let i=new Wv(r.get(1),r.get(3)),o=new Ce(r.popFirst(5));return i.isEqual(t)||Zo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Wc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Kc=class n extends f0{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(z4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kc._jsonSchema={type:qt("string",Kc._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};var hd=class extends Kc{data(e={}){return super.data(e)}},fd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hd(this._firestore,this._userDataWriter,r.key,r,new Wc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Wne(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Wne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}fd._jsonSchemaVersion="firestore/querySnapshot/1.0",fd._jsonSchema={type:qt("string",fd._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};var p0=class extends PD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ld(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jo(this.firestore,null,t)}};function $4(n,...e){n=la(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||OU(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(OU(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Jo)s=KS(n.firestore,Sp),a=FD(n._key.path),o={next:c=>{e[r]&&e[r](Kne(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=KS(n,u0);s=KS(c.firestore,Sp),a=c._query;let u=new p0(s);o={next:h=>{e[r]&&e[r](new fd(s,u,c,h))},error:e[r+1],complete:e[r+2]},Gne(n._query)}return function(u,h,g,I){let T=new TD(I),k=new _D(h,T,g);return u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Tne(yield MU(u),k)})),()=>{T.Nu(),u.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Sne(yield MU(u),k)}))}}(zne(s),a,i,o)}function Kne(n,e,t){let r=t.docs.get(e._key),i=new p0(n);return new Kc(n,i,e._key,r,new Wc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Sd=i})(Yu),da(new li("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Sp(new nA(r.getProvider("auth-internal")),new oA(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wv(u.options.projectId,h)}(s,i),s);return o=$({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Bo(WV,KV,e),Bo(WV,KV,"esm2020")})();var E0=function(){return E0=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},E0.apply(this,arguments)};var Qne={includeMetadataChanges:!1};function H4(n,e){return e===void 0&&(e=Qne),new be(function(t){var r=$4(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function q4(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:E0(E0({},r),(t={},t[e.idField]=n.id,t))}function G4(n){return H4(n,{includeMetadataChanges:!0}).pipe(me(function(e){return e.docs}))}function W4(n,e){return e===void 0&&(e={}),G4(n).pipe(me(function(t){return t.map(function(r){return q4(r,e)})}))}var K4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q4={};var ns,GD;(function(){var n;function e(M,E){function C(){}C.prototype=E.prototype,M.D=E.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(D,A,R){for(var b=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)b[Ct-2]=arguments[Ct];return E.prototype[A].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,E,C){C||(C=0);var D=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)D[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;16>A;++A)D[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=M.g[0],C=M.g[1],A=M.g[2];var R=M.g[3],b=E+(R^C&(A^R))+D[0]+3614090360&4294967295;E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[1]+3905402710&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[4]+4118548399&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[5]+1200080426&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[8]+1770035416&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[9]+2336552879&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(R^C&(A^R))+D[12]+1804603682&4294967295,E=C+(b<<7&4294967295|b>>>25),b=R+(A^E&(C^A))+D[13]+4254626195&4294967295,R=E+(b<<12&4294967295|b>>>20),b=A+(C^R&(E^C))+D[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=C+(E^A&(R^E))+D[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=E+(A^R&(C^A))+D[1]+4129170786&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[6]+3225465664&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[5]+3593408605&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[10]+38016083&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[9]+568446438&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[14]+3275163606&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(A^R&(C^A))+D[13]+2850285829&4294967295,E=C+(b<<5&4294967295|b>>>27),b=R+(C^A&(E^C))+D[2]+4243563512&4294967295,R=E+(b<<9&4294967295|b>>>23),b=A+(E^C&(R^E))+D[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=C+(R^E&(A^R))+D[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=E+(C^A^R)+D[5]+4294588738&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[8]+2272392833&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[1]+2763975236&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[4]+1272893353&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[13]+681279174&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[0]+3936430074&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(C^A^R)+D[9]+3654602809&4294967295,E=C+(b<<4&4294967295|b>>>28),b=R+(E^C^A)+D[12]+3873151461&4294967295,R=E+(b<<11&4294967295|b>>>21),b=A+(R^E^C)+D[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=C+(A^R^E)+D[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=E+(A^(C|~R))+D[0]+4096336452&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[7]+1126891415&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[12]+1700485571&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[3]+2399980690&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[8]+1873313359&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[15]+4264355552&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=E+(A^(C|~R))+D[4]+4149444226&4294967295,E=C+(b<<6&4294967295|b>>>26),b=R+(C^(E|~A))+D[11]+3174756917&4294967295,R=E+(b<<10&4294967295|b>>>22),b=A+(E^(R|~C))+D[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=C+(R^(A|~E))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+R&4294967295}r.prototype.u=function(M,E){E===void 0&&(E=M.length);for(var C=E-this.blockSize,D=this.B,A=this.h,R=0;R<E;){if(A==0)for(;R<=C;)i(this,M,R),R+=this.blockSize;if(typeof M=="string"){for(;R<E;)if(D[A++]=M.charCodeAt(R++),A==this.blockSize){i(this,D),A=0;break}}else for(;R<E;)if(D[A++]=M[R++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;var C=8*this.o;for(E=M.length-8;E<M.length;++E)M[E]=C&255,C/=256;for(this.u(M),M=Array(16),E=C=0;4>E;++E)for(var D=0;32>D;D+=8)M[C++]=this.g[E]>>>D&255;return M};function o(M,E){var C=a;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=E(M)}function s(M,E){this.h=E;for(var C=[],D=!0,A=M.length-1;0<=A;A--){var R=M[A]|0;D&&R==E||(C[A]=R,D=!1)}this.g=C}var a={};function c(M){return-128<=M&&128>M?o(M,function(E){return new s([E|0],0>E?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return O(u(-M));for(var E=[],C=1,D=0;M>=C;D++)E[D]=M/C|0,C*=4294967296;return new s(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return O(h(M.substring(1),E));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(E,8)),D=g,A=0;A<M.length;A+=8){var R=Math.min(8,M.length-A),b=parseInt(M.substring(A,A+R),E);8>R?(R=u(Math.pow(E,R)),D=D.j(R).add(u(b))):(D=D.j(C),D=D.add(u(b)))}return D}var g=c(0),I=c(1),T=c(16777216);n=s.prototype,n.m=function(){if(L(this))return-O(this).m();for(var M=0,E=1,C=0;C<this.g.length;C++){var D=this.i(C);M+=(0<=D?D:4294967296+D)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(L(this))return"-"+O(this).toString(M);for(var E=u(Math.pow(M,6)),C=this,D="";;){var A=de(C,E).g;C=q(C,A.j(E));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=A,k(C))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=q(this,M),L(M)?-1:k(M)?0:1};function O(M){for(var E=M.g.length,C=[],D=0;D<E;D++)C[D]=~M.g[D];return new s(C,~M.h).add(I)}n.abs=function(){return L(this)?O(this):this},n.add=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0,A=0;A<=E;A++){var R=D+(this.i(A)&65535)+(M.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);D=b>>>16,R&=65535,b&=65535,C[A]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function q(M,E){return M.add(O(E))}n.j=function(M){if(k(this)||k(M))return g;if(L(this))return L(M)?O(this).j(O(M)):O(O(this).j(M));if(L(M))return O(this.j(O(M)));if(0>this.l(T)&&0>M.l(T))return u(this.m()*M.m());for(var E=this.g.length+M.g.length,C=[],D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<M.g.length;A++){var R=this.i(D)>>>16,b=this.i(D)&65535,Ct=M.i(A)>>>16,$n=M.i(A)&65535;C[2*D+2*A]+=b*$n,ee(C,2*D+2*A),C[2*D+2*A+1]+=R*$n,ee(C,2*D+2*A+1),C[2*D+2*A+1]+=b*Ct,ee(C,2*D+2*A+1),C[2*D+2*A+2]+=R*Ct,ee(C,2*D+2*A+2)}for(D=0;D<E;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=E;D<2*E;D++)C[D]=0;return new s(C,0)};function ee(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function W(M,E){this.g=M,this.h=E}function de(M,E){if(k(E))throw Error("division by zero");if(k(M))return new W(g,g);if(L(M))return E=de(O(M),E),new W(O(E.g),O(E.h));if(L(E))return E=de(M,O(E)),new W(O(E.g),E.h);if(30<M.g.length){if(L(M)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=E;0>=D.l(M);)C=je(C),D=je(D);var A=ge(C,1),R=ge(D,1);for(D=ge(D,2),C=ge(C,2);!k(D);){var b=R.add(D);0>=b.l(M)&&(A=A.add(C),R=b),D=ge(D,1),C=ge(C,1)}return E=q(M,A.j(E)),new W(A,E)}for(A=g;0<=M.l(E);){for(C=Math.max(1,Math.floor(M.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=u(C),b=R.j(E);L(b)||0<b.l(M);)C-=D,R=u(C),b=R.j(E);k(R)&&(R=I),A=A.add(R),M=q(M,b)}return new W(A,M)}n.A=function(M){return de(this,M).h},n.and=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)&M.i(D);return new s(C,this.h&M.h)},n.or=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)|M.i(D);return new s(C,this.h|M.h)},n.xor=function(M){for(var E=Math.max(this.g.length,M.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)^M.i(D);return new s(C,this.h^M.h)};function je(M){for(var E=M.g.length+1,C=[],D=0;D<E;D++)C[D]=M.i(D)<<1|M.i(D-1)>>>31;return new s(C,M.h)}function ge(M,E){var C=E>>5;E%=32;for(var D=M.g.length-C,A=[],R=0;R<D;R++)A[R]=0<E?M.i(R+C)>>>E|M.i(R+C+1)<<32-E:M.i(R+C);return new s(A,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GD=Q4.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,ns=Q4.Integer=s}).apply(typeof K4<"u"?K4:typeof self<"u"?self:typeof window<"u"?window:{});var I0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rs={};var WD,Yne,Md,KD,xp,b0,QD,YD,JD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,_){return l==Array.prototype||l==Object.prototype||(l[f]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof I0=="object"&&I0];for(var f=0;f<l.length;++f){var _=l[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var _=r;l=l.split(".");for(var P=0;P<l.length-1;P++){var V=l[P];if(!(V in _))break e;_=_[V]}l=l[l.length-1],P=_[l],f=f(P),f!=P&&f!=null&&e(_,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var _=0,P=!1,V={next:function(){if(!P&&_<l.length){var B=_++;return{value:f(B,l[B]),done:!1}}return P=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,_){return _})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,_){return l.call.apply(l.bind,arguments)}function g(l,f,_){if(!l)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,P),l.apply(f,V)}}return function(){return l.apply(f,arguments)}}function I(l,f,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,I.apply(null,arguments)}function T(l,f){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),l.apply(this,P)}}function k(l,f){function _(){}_.prototype=f.prototype,l.aa=f.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(P,V,B){for(var Y=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Y[nt-2]=arguments[nt];return f.prototype[V].apply(P,Y)}}function L(l){let f=l.length;if(0<f){let _=Array(f);for(let P=0;P<f;P++)_[P]=l[P];return _}return[]}function O(l,f){for(let _=1;_<arguments.length;_++){let P=arguments[_];if(c(P)){let V=l.length||0,B=P.length||0;l.length=V+B;for(let Y=0;Y<B;Y++)l[V+Y]=P[Y]}else l.push(P)}}class q{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ee(l){return/^[\s\xa0]*$/.test(l)}function W(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var je=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ge(l,f,_){for(let P in l)f.call(_,l[P],P,l)}function M(l,f){for(let _ in l)f.call(void 0,l[_],_,l)}function E(l){let f={};for(let _ in l)f[_]=l[_];return f}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,f){let _,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(_ in P)l[_]=P[_];for(let B=0;B<C.length;B++)_=C[B],Object.prototype.hasOwnProperty.call(P,_)&&(l[_]=P[_])}}function A(l){var f=1;l=l.split(":");let _=[];for(;0<f&&l.length;)_.push(l.shift()),f--;return l.length&&_.push(l.join(":")),_}function R(l){a.setTimeout(()=>{throw l},0)}function b(){var l=hs;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ct{constructor(){this.h=this.g=null}add(f,_){let P=$n.get();P.set(f,_),this.h?this.h.next=P:this.g=P,this.h=P}}var $n=new q(()=>new Zw,l=>l.reset());class Zw{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Oa,_i=!1,hs=new Ct,_g=()=>{let l=a.Promise.resolve(void 0);Oa=()=>{l.then(vg)}};var vg=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(_){R(_)}var f=$n;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}_i=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Zt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var ml=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let _=()=>{};a.addEventListener("test",_,f),a.removeEventListener("test",_,f)}catch{}return l}();function po(l,f){if(Zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,P=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(je){e:{try{de(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else _=="mouseover"?f=l.fromElement:_=="mouseout"&&(f=l.toElement);this.relatedTarget=f,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:fh[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&po.aa.h.call(this)}}k(po,Zt);var fh={2:"touch",3:"pen",4:"mouse"};po.prototype.h=function(){po.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var go="closure_listenable_"+(1e6*Math.random()|0),ph=0;function wg(l,f,_,P,V){this.listener=l,this.proxy=null,this.src=f,this.type=_,this.capture=!!P,this.ha=V,this.key=++ph,this.da=this.fa=!1}function Na(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function yl(l){this.src=l,this.g={},this.h=0}yl.prototype.add=function(l,f,_,P,V){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var Y=vl(l,f,P,V);return-1<Y?(f=l[Y],_||(f.fa=!1)):(f=new wg(f,this.src,B,!!P,V),f.fa=_,l.push(f)),f};function _l(l,f){var _=f.type;if(_ in l.g){var P=l.g[_],V=Array.prototype.indexOf.call(P,f,void 0),B;(B=0<=V)&&Array.prototype.splice.call(P,V,1),B&&(Na(f),l.g[_].length==0&&(delete l.g[_],l.h--))}}function vl(l,f,_,P){for(var V=0;V<l.length;++V){var B=l[V];if(!B.da&&B.listener==f&&B.capture==!!_&&B.ha==P)return V}return-1}var La="closure_lm_"+(1e6*Math.random()|0),wl={};function Eg(l,f,_,P,V){if(P&&P.once)return Il(l,f,_,P,V);if(Array.isArray(f)){for(var B=0;B<f.length;B++)Eg(l,f[B],_,P,V);return null}return _=mo(_),l&&l[go]?l.K(f,_,u(P)?!!P.capture:!!P,V):El(l,f,_,!1,P,V)}function El(l,f,_,P,V,B){if(!f)throw Error("Invalid event type");var Y=u(V)?!!V.capture:!!V,nt=bl(l);if(nt||(l[La]=nt=new yl(l)),_=nt.add(f,_,P,Y,B),_.proxy)return _;if(P=gh(),_.proxy=P,P.src=l,P.listener=_,l.addEventListener)ml||(V=Y),V===void 0&&(V=!1),l.addEventListener(f.toString(),P,V);else if(l.attachEvent)l.attachEvent(Fa(f.toString()),P);else if(l.addListener&&l.removeListener)l.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gh(){function l(_){return f.call(l.src,l.listener,_)}let f=Xw;return l}function Il(l,f,_,P,V){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Il(l,f[B],_,P,V);return null}return _=mo(_),l&&l[go]?l.L(f,_,u(P)?!!P.capture:!!P,V):El(l,f,_,!0,P,V)}function Xt(l,f,_,P,V){if(Array.isArray(f))for(var B=0;B<f.length;B++)Xt(l,f[B],_,P,V);else P=u(P)?!!P.capture:!!P,_=mo(_),l&&l[go]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],_=vl(B,_,P,V),-1<_&&(Na(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=bl(l))&&(f=l.g[f.toString()],l=-1,f&&(l=vl(f,_,P,V)),(_=-1<l?f[l]:null)&&en(_))}function en(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[go])_l(f.i,l);else{var _=l.type,P=l.proxy;f.removeEventListener?f.removeEventListener(_,P,l.capture):f.detachEvent?f.detachEvent(Fa(_),P):f.addListener&&f.removeListener&&f.removeListener(P),(_=bl(f))?(_l(_,l),_.h==0&&(_.src=null,f[La]=null)):Na(l)}}}function Fa(l){return l in wl?wl[l]:wl[l]="on"+l}function Xw(l,f){if(l.da)l=!0;else{f=new po(f,this);var _=l.listener,P=l.ha||l.src;l.fa&&en(l),l=_.call(P,f)}return l}function bl(l){return l=l[La],l instanceof yl?l:null}var mh="__closure_events_fn_"+(1e9*Math.random()>>>0);function mo(l){return typeof l=="function"?l:(l[mh]||(l[mh]=function(f){return l.handleEvent(f)}),l[mh])}function tn(){jr.call(this),this.i=new yl(this),this.M=this,this.F=null}k(tn,jr),tn.prototype[go]=!0,tn.prototype.removeEventListener=function(l,f,_,P){Xt(this,l,f,_,P)};function pn(l,f){var _,P=l.F;if(P)for(_=[];P;P=P.F)_.push(P);if(l=l.M,P=f.type||f,typeof f=="string")f=new Zt(f,l);else if(f instanceof Zt)f.target=f.target||l;else{var V=f;f=new Zt(P,l),D(f,V)}if(V=!0,_)for(var B=_.length-1;0<=B;B--){var Y=f.g=_[B];V=fs(Y,P,!0,f)&&V}if(Y=f.g=l,V=fs(Y,P,!0,f)&&V,V=fs(Y,P,!1,f)&&V,_)for(B=0;B<_.length;B++)Y=f.g=_[B],V=fs(Y,P,!1,f)&&V}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var _=l.g[f],P=0;P<_.length;P++)Na(_[P]);delete l.g[f],l.h--}}this.F=null},tn.prototype.K=function(l,f,_,P){return this.i.add(String(l),f,!1,_,P)},tn.prototype.L=function(l,f,_,P){return this.i.add(String(l),f,!0,_,P)};function fs(l,f,_,P){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,B=0;B<f.length;++B){var Y=f[B];if(Y&&!Y.da&&Y.capture==_){var nt=Y.listener,Nt=Y.ha||Y.src;Y.fa&&_l(l.i,Y),V=nt.call(Nt,P)!==!1&&V}}return V&&!P.defaultPrevented}function Ig(l,f,_){if(typeof l=="function")_&&(l=I(l,_));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function bg(l){l.g=Ig(()=>{l.g=null,l.i&&(l.i=!1,bg(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Cg extends jr{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:bg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(l){jr.call(this),this.h=l,this.g={}}k(ps,jr);var gs=[];function Cl(l){ge(l.g,function(f,_){this.g.hasOwnProperty(_)&&en(f)},l),l.g={}}ps.prototype.N=function(){ps.aa.N.call(this),Cl(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Va=a.JSON.stringify,yo=a.JSON.parse,Tg=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ms(){}ms.prototype.h=null;function yh(l){return l.h||(l.h=l.i())}function ys(){}var _s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){Zt.call(this,"d")}k(nn,Zt);function Tl(){Zt.call(this,"c")}k(Tl,Zt);var or={},vs=null;function Sl(){return vs=vs||new tn}or.La="serverreachability";function Sg(l){Zt.call(this,or.La,l)}k(Sg,Zt);function br(l){let f=Sl();pn(f,new Sg(f))}or.STAT_EVENT="statevent";function Ag(l,f){Zt.call(this,or.STAT_EVENT,l),this.stat=f}k(Ag,Zt);function En(l){let f=Sl();pn(f,new Ag(f,l))}or.Ma="timingevent";function Ua(l,f){Zt.call(this,or.Ma,l),this.size=f}k(Ua,Zt);function ws(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function _h(l,f,_,P,V,B){l.info(function(){if(l.g)if(B)for(var Y="",nt=B.split("&"),Nt=0;Nt<nt.length;Nt++){var rt=nt[Nt].split("=");if(1<rt.length){var Dn=rt[0];rt=rt[1];var Mn=Dn.split("_");Y=2<=Mn.length&&Mn[1]=="type"?Y+(Dn+"="+rt+"&"):Y+(Dn+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+f+`
`+_+`
`+Y})}function Ba(l,f,_,P,V,B,Y){l.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+f+`
`+_+`
`+B+" "+Y})}function Is(l,f,_,P){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Dg(l,_)+(P?" "+P:"")})}function vi(l,f){l.info(function(){return"TIMEOUT: "+f})}Es.prototype.info=function(){};function Dg(l,f){if(!l.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var P=_[l];if(!(2>P.length)){var V=P[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return Va(_)}catch{return f}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},za;function $a(){}k($a,ms),$a.prototype.g=function(){return new XMLHttpRequest},$a.prototype.i=function(){return{}},za=new $a;function wi(l,f,_,P){this.j=l,this.i=f,this.l=_,this.R=P||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vh}function vh(){this.i=null,this.g="",this.h=!1}var Mg={},bs={};function Dl(l,f,_){l.L=1,l.v=Rl(zr(f)),l.m=_,l.P=!0,Ml(l,null)}function Ml(l,f){l.F=Date.now(),Ts(l),l.A=zr(l.v);var _=l.A,P=l.R;Array.isArray(P)||(P=[String(P)]),Fg(_.i,"t",P),l.C=0,_=l.j.J,l.h=new vh,l.g=p(l.j,_?f:null,!l.m),0<l.O&&(l.M=new Cg(I(l.Y,l,l.g),l.O)),f=l.U,_=l.g,P=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(gs[0]=V.toString()),V=gs);for(var B=0;B<V.length;B++){var Y=Eg(_,V[B],P||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),br(),_h(l.i,l.u,l.A,l.l,l.R,l.m)}wi.prototype.ca=function(l){l=l.target;let f=this.M;f&&qn(l)==3?f.j():this.Y(l)},wi.prototype.Y=function(l){try{if(l==this.g)e:{let Mn=qn(this.g);var f=this.g.Ba();let jl=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||zg(this.g)))){this.J||Mn!=4||f==7||(f==8||0>=jl?br(3):br(2)),Pl(this);var _=this.g.Z();this.X=_;t:if(Cs(this)){var P=zg(this.g);l="";var V=P.length,B=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ei(this),Ss(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,l+=this.h.i.decode(P[f],{stream:!(B&&f==V-1)});P.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=_==200,Ba(this.i,this.u,this.A,this.l,this.R,Mn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Nt=this.g;if((nt=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(nt)){var rt=nt;break t}}rt=null}if(_=rt)Is(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,_);else{this.o=!1,this.s=3,En(12),Ei(this),Ss(this);break e}}if(this.P){_=!0;let Wr;for(;!this.J&&this.C<Y.length;)if(Wr=_o(this,Y),Wr==bs){Mn==4&&(this.s=4,En(14),_=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==Mg){this.s=4,En(15),Is(this.i,this.l,Y,"[Invalid Chunk]"),_=!1;break}else Is(this.i,this.l,Wr,null),Ha(this,Wr);if(Cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||Y.length!=0||this.h.h||(this.s=1,En(16),_=!1),this.o=this.o&&_,!_)Is(this.i,this.l,Y,"[Invalid Chunked Response]"),Ei(this),Ss(this);else if(0<Y.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Bl(Dn),Dn.M=!0,En(11))}}else Is(this.i,this.l,Y,null),Ha(this,Y);Mn==4&&Ei(this),this.o&&!this.J&&(Mn==4?An(this.j,this):(this.o=!1,Ts(this)))}else $g(this.g),_==400&&0<Y.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),Ei(this),Ss(this)}}}catch{}finally{}};function Cs(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _o(l,f){var _=l.C,P=f.indexOf(`
`,_);return P==-1?bs:(_=Number(f.substring(_,P)),isNaN(_)?Mg:(P+=1,P+_>f.length?bs:(f=f.slice(P,P+_),l.C=P+_,f)))}wi.prototype.cancel=function(){this.J=!0,Ei(this)};function Ts(l){l.S=Date.now()+l.I,Pg(l,l.I)}function Pg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ws(I(l.ba,l),f)}function Pl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}wi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(vi(this.i,this.A),this.L!=2&&(br(),En(17)),Ei(this),this.s=2,Ss(this)):Pg(this,this.S-l)};function Ss(l){l.j.G==0||l.J||An(l.j,l)}function Ei(l){Pl(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Cl(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ha(l,f){try{var _=l.j;if(_.G!=0&&(_.g==l||Ch(_.h,l))){if(!l.K&&Ch(_.h,l)&&_.G==3){try{var P=_.Da.g.parse(f)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)wo(_),ks(_);else break e;Ul(_),En(18)}}else _.za=V[1],0<_.za-_.T&&37500>V[2]&&_.F&&_.v==0&&!_.C&&(_.C=ws(I(_.Za,_),6e3));if(1>=bh(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ci(_,11)}else if((l.K||_.g==l)&&wo(_),!ee(f))for(V=_.Da.g.parse(f),f=0;f<V.length;f++){let rt=V[f];if(_.T=rt[0],rt=rt[1],_.G==2)if(rt[0]=="c"){_.K=rt[1],_.ia=rt[2];let Dn=rt[3];Dn!=null&&(_.la=Dn,_.j.info("VER="+_.la));let Mn=rt[4];Mn!=null&&(_.Aa=Mn,_.j.info("SVER="+_.Aa));let jl=rt[5];jl!=null&&typeof jl=="number"&&0<jl&&(P=1.5*jl,_.L=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;let Wr=l.g;if(Wr){let Hg=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hg){var B=P.h;B.g||Hg.indexOf("spdy")==-1&&Hg.indexOf("quic")==-1&&Hg.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Cr(B,B.h),B.h=null))}if(P.D){let tE=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;tE&&(P.ya=tE,gt(P.I,P.D,tE))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),P=_;var Y=l;if(P.qa=d(P,P.J?P.ia:null,P.W),Y.K){sr(P.h,Y);var nt=Y,Nt=P.L;Nt&&(nt.I=Nt),nt.B&&(Pl(nt),Ts(nt)),P.g=Y}else kh(P);0<_.i.length&&Ja(_)}else rt[0]!="stop"&&rt[0]!="close"||Ci(_,7);else _.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ci(_,7):Ll(_):rt[0]!="noop"&&_.l&&_.l.ta(rt),_.v=0)}}br(4)}catch{}}var wh=class{constructor(l,f){this.g=l,this.map=f}};function Eh(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ih(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function bh(l){return l.h?1:l.g?l.g.size:0}function Ch(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Cr(l,f){l.g?l.g.add(f):l.h=f}function sr(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Eh.prototype.cancel=function(){if(this.i=As(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function As(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let _ of l.g.values())f=f.concat(_.D);return f}return L(l.i)}function qa(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],_=l.length,P=0;P<_;P++)f.push(l[P]);return f}f=[],_=0;for(P in l)f[_++]=l[P];return f}function Th(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var _=0;_<l;_++)f.push(_);return f}f=[],_=0;for(let P in l)f[_++]=P;return f}}}function ht(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var _=Th(l),P=qa(l),V=P.length,B=0;B<V;B++)f.call(void 0,P[B],_&&_[B],l)}var Ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(l,f){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var P=l[_].indexOf("="),V=null;if(0<=P){var B=l[_].substring(0,P);V=l[_].substring(P+1)}else B=l[_];f(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ka(this,l.j),this.o=l.o,this.g=l.g,xl(this,l.s),this.l=l.l;var f=l.i,_=new Qa;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),xg(this,_),this.m=l.m}else l&&(f=String(l).match(Ga))?(this.h=!1,Ka(this,f[1]||"",!0),this.o=$r(f[2]||""),this.g=$r(f[3]||"",!0),xl(this,f[4]),this.l=$r(f[5]||"",!0),xg(this,f[6]||"",!0),this.m=$r(f[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(cr(f,Sh,!0),":");var _=this.g;return(_||f=="file")&&(l.push("//"),(f=this.o)&&l.push(cr(f,Sh,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(cr(_,_.charAt(0)=="/"?Og:kg,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",cr(_,Ds)),l.join("")};function zr(l){return new ar(l)}function Ka(l,f,_){l.j=_?$r(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function xl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function xg(l,f,_){f instanceof Qa?(l.i=f,kl(l.i,l.h)):(_||(f=cr(f,Ng)),l.i=new Qa(f,l.h))}function gt(l,f,_){l.i.set(f,_)}function Rl(l){return gt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $r(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function cr(l,f,_){return typeof l=="string"?(l=encodeURI(l).replace(f,Rg),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Rg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Sh=/[#\/\?@]/g,kg=/[#\?:]/g,Og=/[#\?]/g,Ng=/[#\?@]/g,Ds=/#/g;function Qa(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Ii(l){l.g||(l.g=new Map,l.h=0,l.i&&Wa(l.i,function(f,_){l.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}n=Qa.prototype,n.add=function(l,f){Ii(this),this.i=null,l=qr(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(f),this.h+=1,this};function Lg(l,f){Ii(l),f=qr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Hr(l,f){return Ii(l),f=qr(l,f),l.g.has(f)}n.forEach=function(l,f){Ii(this),this.g.forEach(function(_,P){_.forEach(function(V){l.call(f,V,P,this)},this)},this)},n.na=function(){Ii(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let P=0;P<f.length;P++){let V=l[P];for(let B=0;B<V.length;B++)_.push(f[P])}return _},n.V=function(l){Ii(this);let f=[];if(typeof l=="string")Hr(this,l)&&(f=f.concat(this.g.get(qr(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)f=f.concat(l[_])}return f},n.set=function(l,f){return Ii(this),this.i=null,l=qr(this,l),Hr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Fg(l,f,_){Lg(l,f),0<_.length&&(l.i=null,l.g.set(qr(l,f),L(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var P=f[_];let B=encodeURIComponent(String(P)),Y=this.V(P);for(P=0;P<Y.length;P++){var V=B;Y[P]!==""&&(V+="="+encodeURIComponent(String(Y[P]))),l.push(V)}}return this.i=l.join("&")};function qr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function kl(l,f){f&&!l.j&&(Ii(l),l.i=null,l.g.forEach(function(_,P){var V=P.toLowerCase();P!=V&&(Lg(this,P),Fg(this,V,_))},l)),l.j=f}function Vg(l,f){let _=new Es;if(a.Image){let P=new Image;P.onload=T(Hn,_,"TestLoadImage: loaded",!0,f,P),P.onerror=T(Hn,_,"TestLoadImage: error",!1,f,P),P.onabort=T(Hn,_,"TestLoadImage: abort",!1,f,P),P.ontimeout=T(Hn,_,"TestLoadImage: timeout",!1,f,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=l}else f(!1)}function Ya(l,f){let _=new Es,P=new AbortController,V=setTimeout(()=>{P.abort(),Hn(_,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:P.signal}).then(B=>{clearTimeout(V),B.ok?Hn(_,"TestPingServer: ok",!0,f):Hn(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Hn(_,"TestPingServer: error",!1,f)})}function Hn(l,f,_,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(_)}catch{}}function Ug(){this.g=new Tg}function Ah(l,f,_){let P=_||"";try{ht(l,function(V,B){let Y=V;u(V)&&(Y=Va(V)),f.push(P+B+"="+encodeURIComponent(Y))})}catch(V){throw f.push(P+"type="+encodeURIComponent("_badmap")),V}}function ft(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ft,ms),ft.prototype.g=function(){return new Ol(this.l,this.j)},ft.prototype.i=function(l){return function(){return l}}({});function Ol(l,f){tn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ol,tn),n=Ol.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Ps(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Ms(this):Ps(this),this.readyState==3&&Bg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ms(this))},n.Qa=function(l){this.g&&(this.response=l,Ms(this))},n.ga=function(){this.g&&Ms(this)};function Ms(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ps(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=f.next();return l.join(`\r
`)};function Ps(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Dh(l){let f="";return ge(l,function(_,P){f+=P,f+=":",f+=_,f+=`\r
`}),f}function xs(l,f,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Dh(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):gt(l,f,_))}function it(l){tn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(it,tn);var jg=/^https?$/i,eE=["POST","PUT"];n=it.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():za.g(),this.v=this.o?yh(this.o):yh(za),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Rs(this,B);return}if(l=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)_.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(let B of P.keys())_.set(B,P.get(B));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eE,f,void 0))||P||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Y]of _)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ph(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Rs(this,B)}};function Rs(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Mh(l),vo(l)}function Mh(l){l.A||(l.A=!0,pn(l,"complete"),pn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pn(this,"complete"),pn(this,"abort"),vo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nl(this):this.bb())},n.bb=function(){Nl(this)};function Nl(l){if(l.h&&typeof s<"u"&&(!l.v[1]||qn(l)!=4||l.Z()!=2)){if(l.u&&qn(l)==4)Ig(l.Ea,0,l);else if(pn(l,"readystatechange"),qn(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var _;if(!(_=f)){var P;if(P=Y===0){var V=String(l.D).match(Ga)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),P=!jg.test(V?V.toLowerCase():"")}_=P}if(_)pn(l,"complete"),pn(l,"success");else{l.m=6;try{var B=2<qn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Mh(l)}}finally{vo(l)}}}}function vo(l,f){if(l.g){Ph(l);let _=l.g,P=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||pn(l,"ready");try{_.onreadystatechange=P}catch{}}}function Ph(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function qn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),yo(f)}};function zg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function $g(l){let f={};l=(l.g&&2<=qn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<l.length;P++){if(ee(l[P]))continue;var _=A(l[P]);let V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let B=f[V]||[];f[V]=B,B.push(_)}M(f,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(l,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||f}function xh(l){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,l),this.cb=Gr("retryDelaySeedMs",1e4,l),this.Wa=Gr("forwardChannelMaxRetries",2,l),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Eh(l&&l.concurrentRequestLimit),this.Da=new Ug,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xh.prototype,n.la=8,n.G=1,n.connect=function(l,f,_,P){En(0),this.W=l,this.H=f||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.I=d(this,null,this.W),Ja(this)};function Ll(l){if(Fl(l),l.G==3){var f=l.U++,_=zr(l.I);if(gt(_,"SID",l.K),gt(_,"RID",f),gt(_,"TYPE","terminate"),Os(l,_),f=new wi(l,l.j,f),f.L=2,f.v=Rl(zr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=f.v,_=!0),_||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ts(f)}Eo(l)}function ks(l){l.g&&(Bl(l),l.g.cancel(),l.g=null)}function Fl(l){ks(l),l.u&&(a.clearTimeout(l.u),l.u=null),wo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ja(l){if(!Ih(l.h)&&!l.s){l.s=!0;var f=l.Ga;Oa||_g(),_i||(Oa(),_i=!0),hs.add(f,l),l.B=0}}function Vl(l,f){return bh(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ws(I(l.Ga,l,f),Nh(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new wi(this,this.j,l),B=this.o;if(this.S&&(B?(B=E(B),D(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var f=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(f+=P,4096<f){f=_;break e}if(f===4096||_===this.i.length-1){f=_+1;break e}}f=1e3}else f=1e3;f=bi(this,V,f),_=zr(this.I),gt(_,"RID",l),gt(_,"CVER",22),this.D&&gt(_,"X-HTTP-Session-Id",this.D),Os(this,_),B&&(this.O?f="headers="+encodeURIComponent(String(Dh(B)))+"&"+f:this.m&&xs(_,this.m,B)),Cr(this.h,V),this.Ua&&gt(_,"TYPE","init"),this.P?(gt(_,"$req",f),gt(_,"SID","null"),V.T=!0,Dl(V,_,null)):Dl(V,_,f),this.G=2}}else this.G==3&&(l?Rh(this,l):this.i.length==0||Ih(this.h)||Rh(this))};function Rh(l,f){var _;f?_=f.l:_=l.U++;let P=zr(l.I);gt(P,"SID",l.K),gt(P,"RID",_),gt(P,"AID",l.T),Os(l,P),l.m&&l.o&&xs(P,l.m,l.o),_=new wi(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),f&&(l.i=f.D.concat(l.i)),f=bi(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cr(l.h,_),Dl(_,P,f)}function Os(l,f){l.H&&ge(l.H,function(_,P){gt(f,P,_)}),l.l&&ht({},function(_,P){gt(f,P,_)})}function bi(l,f,_){_=Math.min(l.i.length,_);var P=l.l?I(l.l.Na,l.l,l):null;e:{var V=l.i;let B=-1;for(;;){let Y=["count="+_];B==-1?0<_?(B=V[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let nt=!0;for(let Nt=0;Nt<_;Nt++){let rt=V[Nt].g,Dn=V[Nt].map;if(rt-=B,0>rt)B=Math.max(0,V[Nt].g-100),nt=!1;else try{Ah(Dn,Y,"req"+rt+"_")}catch{P&&P(Dn)}}if(nt){P=Y.join("&");break e}}}return l=l.i.splice(0,_),f.D=l,P}function kh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Oa||_g(),_i||(Oa(),_i=!0),hs.add(f,l),l.v=0}}function Ul(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ws(I(l.Fa,l),Nh(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Oh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ws(I(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),ks(this),Oh(this))};function Bl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Oh(l){l.g=new wi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=zr(l.qa);gt(f,"RID","rpc"),gt(f,"SID",l.K),gt(f,"AID",l.T),gt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&gt(f,"TO",l.ja),gt(f,"TYPE","xmlhttp"),Os(l,f),l.m&&l.o&&xs(f,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Rl(zr(f)),_.m=null,_.P=!0,Ml(_,l)}n.Za=function(){this.C!=null&&(this.C=null,ks(this),Ul(this),En(19))};function wo(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function An(l,f){var _=null;if(l.g==f){wo(l),Bl(l),l.g=null;var P=2}else if(Ch(l.h,f))_=f.D,sr(l.h,f),P=1;else return;if(l.G!=0){if(f.o)if(P==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var V=l.B;P=Sl(),pn(P,new Ua(P,_)),Ja(l)}else kh(l);else if(V=f.s,V==3||V==0&&0<f.X||!(P==1&&Vl(l,f)||P==2&&Ul(l)))switch(_&&0<_.length&&(f=l.h,f.i=f.i.concat(_)),V){case 1:Ci(l,5);break;case 4:Ci(l,10);break;case 3:Ci(l,6);break;default:Ci(l,2)}}}function Nh(l,f){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*f}function Ci(l,f){if(l.j.info("Error code "+f),f==2){var _=I(l.fb,l),P=l.Xa;let V=!P;P=new ar(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ka(P,"https"),Rl(P),V?Vg(P.toString(),_):Ya(P.toString(),_)}else En(2);l.G=0,l.l&&l.l.sa(f),Eo(l),Fl(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function Eo(l){if(l.G=0,l.ka=[],l.l){let f=As(l.h);(f.length!=0||l.i.length!=0)&&(O(l.ka,f),O(l.ka,l.i),l.h.i.length=0,L(l.i),l.i.length=0),l.l.ra()}}function d(l,f,_){var P=_ instanceof ar?zr(_):new ar(_);if(P.g!="")f&&(P.g=f+"."+P.g),xl(P,P.s);else{var V=a.location;P=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var B=new ar(null);P&&Ka(B,P),f&&(B.g=f),V&&xl(B,V),_&&(B.l=_),P=B}return _=l.D,f=l.ya,_&&f&&gt(P,_,f),gt(P,"VER",l.la),Os(l,P),P}function p(l,f,_){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new it(new ft({eb:_})):new it(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function w(){}n=w.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function x(){}x.prototype.g=function(l,f){return new F(l,f)};function F(l,f){tn.call(this),this.g=new xh(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ee(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ee(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ie(this)}k(F,tn),F.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},F.prototype.close=function(){Ll(this.g)},F.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Va(l),l=_);f.i.push(new wh(f.Ya++,l)),f.G==3&&Ja(f)},F.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,F.aa.N.call(this)};function U(l){nn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let _ in f){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(U,nn);function Z(){Tl.call(this),this.status=1}k(Z,Tl);function Ie(l){this.g=l}k(Ie,w),Ie.prototype.ua=function(){pn(this.g,"a")},Ie.prototype.ta=function(l){pn(this.g,new U(l))},Ie.prototype.sa=function(l){pn(this.g,new Z)},Ie.prototype.ra=function(){pn(this.g,"b")},x.prototype.createWebChannel=x.prototype.g,F.prototype.send=F.prototype.o,F.prototype.open=F.prototype.m,F.prototype.close=F.prototype.close,JD=rs.createWebChannelTransport=function(){return new x},YD=rs.getStatEventTarget=function(){return Sl()},QD=rs.Event=or,b0=rs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,xp=rs.ErrorCode=ja,Al.COMPLETE="complete",KD=rs.EventType=Al,ys.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Md=rs.WebChannel=ys,Yne=rs.FetchXmlHttpFactory=ft,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,WD=rs.XhrIo=it}).apply(typeof I0<"u"?I0:typeof self<"u"?self:typeof window<"u"?window:{});var Y4="@firebase/firestore",J4="4.8.0";var vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");var Yd="11.10.0";var tl=new Wi("@firebase/firestore");function Pd(){return tl.logLevel}function ae(n,...e){if(tl.logLevel<=ze.DEBUG){let t=e.map(UM);tl.debug(`Firestore (${Yd}): ${n}`,...t)}}function os(n,...e){if(tl.logLevel<=ze.ERROR){let t=e.map(UM);tl.error(`Firestore (${Yd}): ${n}`,...t)}}function Ta(n,...e){if(tl.logLevel<=ze.WARN){let t=e.map(UM);tl.warn(`Firestore (${Yd}): ${n}`,...t)}}function UM(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,z3(n,r,t)}function z3(n,e,t){let r=`FIRESTORE (${Yd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw os(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||z3(e,i,r)}function Pe(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},re=class extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var fi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var P0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},n1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}},r1=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},i1=class{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new P0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new vn(e)}},o1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},s1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new o1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},x0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},a1=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);let r=o=>{o.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,ae("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new x0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new x0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Jne(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function $3(){return new TextEncoder}var Fp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Jne(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Be(n,e){return n<e?-1:n>e?1:0}function c1(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Be(r,i);{let o=$3(),s=Zne(o.encode(Z4(n,t)),o.encode(Z4(e,t)));return s!==0?s:Be(r,i)}}t+=r>65535?2:1}return Be(n.length,e.length)}function Z4(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Zne(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Be(n[t],e[t]);return Be(n.length,e.length)}function Vd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var X4="__name__",R0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):c1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}},Dt=class n extends R0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Xne=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ir=class n extends R0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Xne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X4}static keyField(){return new n([X4])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var _e=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};function H3(n,e,t){if(!t)throw new re(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ere(n,e,t,r){if(e===!0&&r===!0)throw new re(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function e3(n){if(!_e.isDocumentKey(n))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function t3(n){if(_e.isDocumentKey(n))throw new re(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=hw(n);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tre(n,e){if(e<=0)throw new re(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Qt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Yp(n,e){if(!q3(n))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new re(H.INVALID_ARGUMENT,t);return!0}var n3=-62135596800,r3=1e6,Yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*r3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<n3)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r3}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-n3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Qt("string",Yt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Yt(0,0))}static max(){return new n(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vp=-1,l1=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};l1.UNKNOWN_ID=-1;function nre(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Yt(t+1,0):new Yt(t,r));return new nl(i,_e.empty(),e)}function rre(n){return new nl(n.readTime,n.key,Vp)}var nl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),_e.empty(),Vp)}static max(){return new n(ke.max(),_e.empty(),Vp)}};function ire(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}var ore="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",u1=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jd(n){return S(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==ore)throw n;ae("LocalStore","Unexpectedly lost primary lease")})}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function sre(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zd(n){return n.name==="IndexedDbTransactionError"}var BM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),jM=-1;function fw(n){return n==null}function Up(n){return n===0&&1/n==-1/0}function are(n){return typeof n=="number"&&Number.isInteger(n)&&!Up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var G3="";function cre(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=i3(e)),e=lre(n.get(t),e);return i3(e)}function lre(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case G3:t+="";break;default:t+=o}}return t}function i3(n){return n+G3+""}var ure="remoteDocuments",W3="owner";var K3="mutationQueues";var Q3="mutations";var Y3="documentMutations",dre="remoteDocumentsV14";var J3="remoteDocumentGlobal";var Z3="targets";var X3="targetDocuments";var eB="targetGlobal",tB="collectionParents";var nB="clientMetadata";var rB="bundles";var iB="namedQueries";var hre="indexConfiguration";var fre="indexState";var pre="indexEntries";var oB="documentOverlays";var gre="globals";var mre=[K3,Q3,Y3,ure,Z3,W3,eB,X3,nB,J3,tB,rB,iB],TCe=[...mre,oB],yre=[K3,Q3,Y3,dre,Z3,W3,eB,X3,nB,J3,tB,rB,iB,oB],_re=yre,vre=[..._re,hre,fre,pre];var SCe=[...vre,gre];function o3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ra(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kt=class n{constructor(e,t){this.comparator=e,this.root=t||ro.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ro.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ro.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}},Od=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ro=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};ro.EMPTY=null,ro.RED=!0,ro.BLACK=!1;ro.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ro(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wn=class n{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new k0(this.data.getIterator())}getIteratorFrom(e){return new k0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},k0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ur=class n{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new n([])}unionWith(e){let t=new wn(Ir.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var O0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Vn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new O0("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Vn.EMPTY_BYTE_STRING=new Vn("");var wre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(n){if(dt(!!n,39018),typeof n=="string"){let e=0,t=wre.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cs(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}var aB="server_timestamp",cB="__type__",lB="__previous_value__",uB="__local_write_time__";function zM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cB])===null||t===void 0?void 0:t.stringValue)===aB}function pw(n){let e=n.mapValue.fields[lB];return zM(e)?pw(e):e}function Bp(n){let e=as(n.mapValue.fields[uB].timestampValue);return new Yt(e.seconds,e.nanos)}var d1=class{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},N0="(default)",L0=class n{constructor(e,t){this.projectId=e,this.database=t||N0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===N0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $M="__type__",dB="__max__",C0={mapValue:{fields:{__type__:{stringValue:dB}}}},HM="__vector__",Ud="value";function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zM(n)?4:fB(n)?9007199254740991:hB(n)?10:11:we(28295,{value:n})}function so(n,e){if(n===e)return!0;let t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bp(n).isEqual(Bp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=as(i.timestampValue),a=as(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return cs(i.bytesValue).isEqual(cs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=At(i.doubleValue),a=At(o.doubleValue);return s===a?Up(s)===Up(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Vd(n.arrayValue.values||[],e.arrayValue.values||[],so);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(o3(s)!==o3(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!so(s[c],a[c])))return!1;return!0}(n,e);default:return we(52216,{left:n})}}function jp(n,e){return(n.values||[]).find(t=>so(t,e))!==void 0}function Bd(n,e){if(n===e)return 0;let t=Sa(n),r=Sa(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=At(o.integerValue||o.doubleValue),c=At(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return s3(n.timestampValue,e.timestampValue);case 4:return s3(Bp(n),Bp(e));case 5:return c1(n.stringValue,e.stringValue);case 6:return function(o,s){let a=cs(o),c=cs(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Be(a[u],c[u]);if(h!==0)return h}return Be(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Be(At(o.latitude),At(s.latitude));return a!==0?a:Be(At(o.longitude),At(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return a3(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,h;let g=o.fields||{},I=s.fields||{},T=(a=g[Ud])===null||a===void 0?void 0:a.arrayValue,k=(c=I[Ud])===null||c===void 0?void 0:c.arrayValue,L=Be(((u=T?.values)===null||u===void 0?void 0:u.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return L!==0?L:a3(T,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===C0.mapValue&&s===C0.mapValue)return 0;if(o===C0.mapValue)return 1;if(s===C0.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=c1(c[g],h[g]);if(I!==0)return I;let T=Bd(a[c[g]],u[h[g]]);if(T!==0)return T}return Be(c.length,h.length)}(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function s3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);let t=as(n),r=as(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function a3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Bd(t[i],r[i]);if(o)return o}return Be(t.length,r.length)}function jd(n){return h1(n)}function h1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=as(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=h1(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${h1(t.fields[s])}`;return i+"}"}(n.mapValue):we(61005,{value:n})}function A0(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pw(n);return e?16+A0(e):16;case 5:return 2*n.stringValue.length;case 6:return cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+A0(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ra(r.fields,(o,s)=>{i+=o.length+A0(s)}),i}(n.mapValue);default:throw we(13486,{value:n})}}function c3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function f1(n){return!!n&&"integerValue"in n}function qM(n){return!!n&&"arrayValue"in n}function l3(n){return!!n&&"nullValue"in n}function u3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function D0(n){return!!n&&"mapValue"in n}function hB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$M])===null||t===void 0?void 0:t.stringValue)===HM}function kp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ra(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dB}var DCe={mapValue:{fields:{[$M]:{stringValue:HM},[Ud]:{arrayValue:{}}}}};var Er=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!D0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kp(t)}setAll(e){let t=Ir.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=kp(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());D0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];D0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ra(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(kp(this.value))}};function pB(n){let e=[];return Ra(n.fields,(t,r)=>{let i=new Ir([t]);if(D0(r)){let o=pB(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ur(e)}var pi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),Er.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),Er.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),Er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zd=class{constructor(e,t){this.position=e,this.inclusive=t}};function d3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(s.referenceValue),t.key):r=Bd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function h3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!so(n.position[t],e.position[t]))return!1;return!0}var rl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ere(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var F0=class{},Kt=class n extends F0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new g1(e,t,r):t==="array-contains"?new _1(e,r):t==="in"?new v1(e,r):t==="not-in"?new w1(e,r):t==="array-contains-any"?new E1(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new m1(e,r):new y1(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bd(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(Bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gi=class n extends F0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return gB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function gB(n){return n.op==="and"}function mB(n){return Ire(n)&&gB(n)}function Ire(n){for(let e of n.filters)if(e instanceof gi)return!1;return!0}function p1(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+jd(n.value);if(mB(n))return n.filters.map(e=>p1(e)).join(",");{let e=n.filters.map(t=>p1(t)).join(",");return`${n.op}(${e})`}}function yB(n,e){return n instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&so(r.value,i.value)}(n,e):n instanceof gi?function(r,i){return i instanceof gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&yB(s,i.filters[a]),!0):!1}(n,e):void we(19439)}function _B(n){return n instanceof Kt?function(t){return`${t.field.canonicalString()} ${t.op} ${jd(t.value)}`}(n):n instanceof gi?function(t){return t.op.toString()+" {"+t.getFilters().map(_B).join(" ,")+"}"}(n):"Filter"}var g1=class extends Kt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){let t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}},m1=class extends Kt{constructor(e,t){super(e,"in",t),this.keys=vB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},y1=class extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=vB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}var _1=class extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return qM(t)&&jp(t.arrayValue,this.value)}},v1=class extends Kt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jp(this.value.arrayValue,t)}},w1=class extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jp(this.value.arrayValue,t)}},E1=class extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!qM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jp(this.value.arrayValue,r))}};var I1=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function f3(n,e=null,t=[],r=[],i=null,o=null,s=null){return new I1(n,e,t,r,i,o,s)}function GM(n){let e=Pe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>p1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),fw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jd(r)).join(",")),e.Pe=t}return e.Pe}function WM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ere(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!h3(n.startAt,e.startAt)&&h3(n.endAt,e.endAt)}function b1(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Aa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function bre(n,e,t,r,i,o,s,a){return new Aa(n,e,t,r,i,o,s,a)}function KM(n){return new Aa(n)}function p3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wB(n){return n.collectionGroup!==null}function Op(n){let e=Pe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wn(Ir.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new rl(o,r))}),t.has(Ir.keyField().canonicalString())||e.Te.push(new rl(Ir.keyField(),r))}return e.Te}function io(n){let e=Pe(n);return e.Ie||(e.Ie=Cre(e,Op(n))),e.Ie}function Cre(n,e){if(n.limitType==="F")return f3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new rl(i.field,o)});let t=n.endAt?new zd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zd(n.startAt.position,n.startAt.inclusive):null;return f3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function C1(n,e){let t=n.filters.concat([e]);return new Aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function V0(n,e,t){return new Aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gw(n,e){return WM(io(n),io(e))&&n.limitType===e.limitType}function EB(n){return`${GM(io(n))}|lt:${n.limitType}`}function xd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_B(i)).join(", ")}]`),fw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jd(i)).join(",")),`Target(${r})`}(io(n))}; limitType=${n.limitType})`}function mw(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Op(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=d3(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Op(r),i)||r.endAt&&!function(s,a,c){let u=d3(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Op(r),i))}(n,e)}function Tre(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IB(n){return(e,t)=>{let r=!1;for(let i of Op(n)){let o=Sre(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Sre(n,e,t){let r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Bd(c,u):we(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var ls=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return sB(this.inner)}size(){return this.innerSize}};var Are=new kt(_e.comparator);function us(){return Are}var bB=new kt(_e.comparator);function Rp(...n){let e=bB;for(let t of n)e=e.insert(t.key,t);return e}function CB(n){let e=bB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jc(){return Np()}function TB(){return Np()}function Np(){return new ls(n=>n.toString(),(n,e)=>n.isEqual(e))}var Dre=new kt(_e.comparator),Mre=new wn(_e.comparator);function Ge(...n){let e=Mre;for(let t of n)e=e.add(t);return e}var Pre=new wn(Be);function xre(){return Pre}function QM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function SB(n){return{integerValue:""+n}}function Rre(n,e){return are(e)?SB(e):QM(n,e)}var $d=class{constructor(){this._=void 0}};function kre(n,e,t){return n instanceof Hd?function(i,o){let s={fields:{[cB]:{stringValue:aB},[uB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zM(o)&&(o=pw(o)),o&&(s.fields[lB]=o),{mapValue:s}}(t,e):n instanceof il?DB(n,e):n instanceof ol?MB(n,e):function(i,o){let s=AB(i,o),a=g3(s)+g3(i.Ee);return f1(s)&&f1(i.Ee)?SB(a):QM(i.serializer,a)}(n,e)}function Ore(n,e,t){return n instanceof il?DB(n,e):n instanceof ol?MB(n,e):t}function AB(n,e){return n instanceof qd?function(r){return f1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Hd=class extends $d{},il=class extends $d{constructor(e){super(),this.elements=e}};function DB(n,e){let t=PB(e);for(let r of n.elements)t.some(i=>so(i,r))||t.push(r);return{arrayValue:{values:t}}}var ol=class extends $d{constructor(e){super(),this.elements=e}};function MB(n,e){let t=PB(e);for(let r of n.elements)t=t.filter(i=>!so(i,r));return{arrayValue:{values:t}}}var qd=class extends $d{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function g3(n){return At(n.integerValue||n.doubleValue)}function PB(n){return qM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Nre(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof il&&i instanceof il||r instanceof ol&&i instanceof ol?Vd(r.elements,i.elements,so):r instanceof qd&&i instanceof qd?so(r.Ee,i.Ee):r instanceof Hd&&i instanceof Hd}(n.transform,e.transform)}var T1=class{constructor(e,t){this.version=e,this.transformResults=t}},is=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function M0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Gd=class{};function xB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zp(n.key,is.none()):new sl(n.key,n.data,is.none());{let t=n.data,r=Er.empty(),i=new wn(Ir.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ao(n.key,r,new Ur(i.toArray()),is.none())}}function Lre(n,e,t){n instanceof sl?function(i,o,s){let a=i.value.clone(),c=y3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ao?function(i,o,s){if(!M0(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=y3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(RB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Lp(n,e,t,r){return n instanceof sl?function(o,s,a,c){if(!M0(o.precondition,s))return a;let u=o.value.clone(),h=_3(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ao?function(o,s,a,c){if(!M0(o.precondition,s))return a;let u=_3(o.fieldTransforms,c,s),h=s.data;return h.setAll(RB(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return M0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Fre(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=AB(r.transform,i||null);o!=null&&(t===null&&(t=Er.empty()),t.set(r.field,o))}return t||null}function m3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vd(r,i,(o,s)=>Nre(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var sl=class extends Gd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ao=class extends Gd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function y3(n,e,t){let r=new Map;dt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ore(s,a,t[i]))}return r}function _3(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,kre(o,s,e))}return r}var zp=class extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},S1=class extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var A1=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Lre(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TB();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=xB(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,(t,r)=>m3(t,r))&&Vd(this.baseMutations,e.baseMutations,(t,r)=>m3(t,r))}},D1=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Dre}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var M1=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var P1=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Gt,Xe;function Vre(n){switch(n){case H.OK:return we(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function kB(n){if(n===void 0)return os("GRPC error has no .code"),H.UNKNOWN;switch(n){case Gt.OK:return H.OK;case Gt.CANCELLED:return H.CANCELLED;case Gt.UNKNOWN:return H.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return H.INTERNAL;case Gt.UNAVAILABLE:return H.UNAVAILABLE;case Gt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Gt.NOT_FOUND:return H.NOT_FOUND;case Gt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Gt.ABORTED:return H.ABORTED;case Gt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Gt.DATA_LOSS:return H.DATA_LOSS;default:return we(39323,{code:n})}}(Xe=Gt||(Gt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";var v3=null;var Ure=new ns([4294967295,4294967295],0);function w3(n){let e=$3().encode(n),t=new GD;return t.update(e),new Uint8Array(t.digest())}function E3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ns([t,r],0),new ns([i,o],0)]}var x1=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(r<0)throw new Zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ns.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ns.fromNumber(r)));return i.compare(Ure)===1&&(i=new ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=w3(e),[r,i]=E3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=w3(e),[r,i]=E3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Zc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var U0=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$p.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new kt(Be),us(),Ge())}},$p=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ge(),Ge(),Ge())}};var Nd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},B0=class{constructor(e,t){this.targetId=e,this.De=t}},j0=class{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},z0=class{constructor(){this.ve=0,this.Ce=I3(),this.Fe=Vn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:o})}}),new $p(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=I3()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},R1=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=us(),this.je=T0(),this.Je=T0(),this.He=new kt(Be)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(b1(o))if(r===0){let s=new _e(o.path);this.Xe(t,s,pi.newNoDocument(s,ke.min()))}else dt(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}v3?.ct(function(h,g,I,T,k){var L,O,q,ee,W,de;let je={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},ge=g.unchangedNames;return ge&&(je.bloomFilter={applied:k===0,hashCount:(L=ge?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(ee=(q=(O=ge?.bits)===null||O===void 0?void 0:O.bitmap)===null||q===void 0?void 0:q.length)!==null&&ee!==void 0?ee:0,padding:(de=(W=ge?.bits)===null||W===void 0?void 0:W.padding)!==null&&de!==void 0?de:0,mightContain:M=>{var E;return(E=T?.mightContain(M))!==null&&E!==void 0&&E}}),je}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=cs(r).toUint8Array()}catch(c){if(c instanceof O0)return Ta("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new x1(s,i,o)}catch(c){return Ta(c instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&b1(a.target)){let c=new _e(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,pi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ge();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new U0(e,t,this.He,this.ze,r);return this.ze=us(),this.je=T0(),this.Je=T0(),this.He=new kt(Be),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new z0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wn(Be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wn(Be),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new z0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function T0(){return new kt(_e.comparator)}function I3(){return new kt(_e.comparator)}var Bre={asc:"ASCENDING",desc:"DESCENDING"},jre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zre={and:"AND",or:"OR"},k1=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function O1(n,e){return n.useProto3Json||fw(e)?e:{value:e}}function $0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $re(n,e){return $0(n,e.toTimestamp())}function oo(n){return dt(!!n,49232),ke.fromTimestamp(function(t){let r=as(t);return new Yt(r.seconds,r.nanos)}(n))}function YM(n,e){return N1(n,e).canonicalString()}function N1(n,e){let t=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function NB(n){let e=Dt.fromString(n);return dt(BB(e),10190,{key:e.toString()}),e}function L1(n,e){return YM(n.databaseId,e.path)}function ZD(n,e){let t=NB(e);if(t.get(1)!==n.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(FB(t))}function LB(n,e){return YM(n.databaseId,e)}function Hre(n){let e=NB(n);return e.length===4?Dt.emptyPath():FB(e)}function F1(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FB(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function b3(n,e,t){return{name:L1(n,e),fields:t.value.mapValue.fields}}function qre(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(dt(h===void 0||typeof h=="string",58123),Vn.fromBase64String(h||"")):(dt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?H.UNKNOWN:kB(u.code);return new re(h,u.message||"")}(s);t=new j0(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ZD(n,r.document.name),o=oo(r.document.updateTime),s=r.document.createTime?oo(r.document.createTime):ke.min(),a=new Er({mapValue:{fields:r.document.fields}}),c=pi.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Nd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ZD(n,r.document),o=r.readTime?oo(r.readTime):ke.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Nd([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ZD(n,r.document),o=r.removedTargetIds||[];t=new Nd([],o,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new P1(i,o),a=r.targetId;t=new B0(a,s)}}return t}function Gre(n,e){let t;if(e instanceof sl)t={update:b3(n,e.key,e.value)};else if(e instanceof zp)t={delete:L1(n,e.key)};else if(e instanceof ao)t={update:b3(n,e.key,e.data),updateMask:tie(e.fieldMask)};else{if(!(e instanceof S1))return we(16599,{Rt:e.type});t={verify:L1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Hd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof il)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ol)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qd)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw we(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$re(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(n,e.precondition)),t}function Wre(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?oo(i.updateTime):oo(o);return s.isEqual(ke.min())&&(s=oo(o)),new T1(s,i.transformResults||[])}(t,e))):[]}function Kre(n,e){return{documents:[LB(n,e.path)]}}function Qre(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LB(n,i);let o=function(u){if(u.length!==0)return UB(gi.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:Rd(I.field),direction:Zre(I.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=O1(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function Yre(n){let e=Hre(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){dt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let I=VB(g);return I instanceof gi&&mB(I)?I.getFilters():[I]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(I=>function(k){return new rl(kd(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(g){let I;return I=typeof g=="object"?g.value:g,fw(I)?null:I}(t.limit));let c=null;t.startAt&&(c=function(g){let I=!!g.before,T=g.values||[];return new zd(T,I)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let I=!g.before,T=g.values||[];return new zd(T,I)}(t.endAt)),bre(e,i,s,o,a,"F",c,u)}function Jre(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=kd(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=kd(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=kd(t.unaryFilter.field);return Kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=kd(t.unaryFilter.field);return Kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(n):n.fieldFilter!==void 0?function(t){return Kt.create(kd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gi.create(t.compositeFilter.filters.map(r=>VB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(t.compositeFilter.op))}(n):we(30097,{filter:n})}function Zre(n){return Bre[n]}function Xre(n){return jre[n]}function eie(n){return zre[n]}function Rd(n){return{fieldPath:n.canonicalString()}}function kd(n){return Ir.fromServerFormat(n.fieldPath)}function UB(n){return n instanceof Kt?function(t){if(t.op==="=="){if(u3(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NAN"}};if(l3(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(u3(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NOT_NAN"}};if(l3(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rd(t.field),op:Xre(t.op),value:t.value}}}(n):n instanceof gi?function(t){let r=t.getFilters().map(i=>UB(i));return r.length===1?r[0]:{compositeFilter:{op:eie(t.op),filters:r}}}(n):we(54877,{filter:n})}function tie(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hp=class n{constructor(e,t,r,i,o=ke.min(),s=ke.min(),a=Vn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var V1=class{constructor(e){this.gt=e}};function nie(n){let e=Yre({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V0(e,e.limit,"L"):e}var H0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Up(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=as(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(cs(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?fB(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hB(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):we(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ud,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(At(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),_e.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};H0.Ut=new H0;var U1=class{constructor(){this.Dn=new B1}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(nl.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(nl.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},B1=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(Dt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(Dt.comparator)).toArray()}};var MCe=new Uint8Array(0);var C3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jB=41943040,Vr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(jB,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);var qp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var T3="LruGarbageCollector",rie=1048576;function S3([n,e],[t,r]){let i=Be(n,t);return i===0?Be(e,r):i}var j1=class{constructor(e){this.Tr=e,this.buffer=new wn(S3),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();S3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},z1=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(T3,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zd(t)?ae(T3,"Ignoring IndexedDB error during garbage collection: ",t):yield Jd(t)}yield this.Rr(3e5)}))}},$1=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(BM.ue);let r=new j1(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(C3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C3):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),Pd()<=ze.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function iie(n,e){return new $1(n,e)}var H1=class{constructor(){this.changes=new ls(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var q1=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var G1=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Lp(r.mutation,i,Ur.empty(),Yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ge()){let i=Jc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rp();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=us(),s=Np(),a=function(){return Np()}();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ao)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Lp(h.mutation,u,h.mutation.getFieldMask(),Yt.now())):s.set(u.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new q1(h,(g=s.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Np(),i=new kt((s,a)=>s-a),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||Ur.empty();h=a.applyToLocalView(u,h),r.set(c,h);let g=(i.get(a.batchId)||Ge()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,g=TB();h.forEach(I=>{if(!o.has(I)){let T=xB(t.get(I),r.get(I));T!==null&&g.set(I,T),o=o.add(I)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(Jc()),a=Vp,c=o;return s.next(u=>G.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ge())).next(h=>({batchId:a,changes:CB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Rp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Rp();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,c=>{let u=function(g,I){return new Aa(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,I)=>{s=s.insert(g,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,pi.newInvalidDocument(h)))});let a=Rp();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Lp(h.mutation,u,Ur.empty(),Yt.now()),mw(t,u)&&(a=a.insert(c,u))}),a})}};var W1=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:oo(i.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:nie(i.bundledQuery),readTime:oo(i.readTime)}}(t)),G.resolve()}};var K1=class{constructor(){this.overlays=new kt(_e.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Jc();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Jc(),o=t.length+1,s=new _e(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new kt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Jc(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Jc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return G.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new M1(t,r));let o=this.kr.get(t);o===void 0&&(o=Ge(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Q1=class{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Gp=class{constructor(){this.qr=new wn(Wt.Qr),this.$r=new wn(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Wt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Wt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new _e(new Dt([])),r=new Wt(t,e),i=new Wt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new _e(new Dt([])),r=new Wt(t,e),i=new Wt(t,e+1),o=Ge();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Wt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Wt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}};var Y1=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wn(Wt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new A1(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Wt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?jM:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Be);return t.forEach(i=>{let o=new Wt(i,0),s=new Wt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;_e.isDocumentKey(o)||(o=o.child(""));let s=new Wt(new _e(o),0),a=new wn(Be);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),G.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(t.mutations,i=>{let o=new Wt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Wt(t,0),i=this.Yr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var J1=class{constructor(e){this.ni=e,this.docs=function(){return new kt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pi.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=us(),s=t.path,a=new _e(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||ire(rre(h),r)<=0||(i.has(h.key)||mw(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ri(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z1(this)}getSize(e){return G.resolve(this.size)}},Z1=class extends H1{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var X1=class{constructor(e){this.persistence=e,this.ii=new ls(t=>GM(t),WM),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new Gp,this.targetCount=0,this._i=qp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}};var q0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new BM(0),this.ci=!1,this.ci=!0,this.li=new Q1,this.referenceDelegate=e(this),this.hi=new X1(this),this.indexManager=new U1,this.remoteDocumentCache=function(i){return new J1(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new V1(t),this.Ti=new W1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Y1(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);let i=new eM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return G.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},eM=class extends u1{constructor(e){super(),this.currentSequenceNumber=e}},tM=class n{constructor(e){this.persistence=e,this.Ai=new Gp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,r=>{let i=_e.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},G0=class n{constructor(e,t){this.persistence=e,this.gi=new ls(r=>cre(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=iie(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return G.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=A0(e.data.value)),t}Sr(e,t,r){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var nM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ge(),i=Ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var rM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iM=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return TF()?8:sre(yn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rM;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Pd()<=ze.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",xd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Pd()<=ze.DEBUG&&ae("QueryEngine","Query:",xd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Pd()<=ze.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",xd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,io(t))):G.resolve())}ps(e,t){if(p3(t))return G.resolve(null);let r=io(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=V0(t,null,"F"),r=io(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ge(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,V0(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return p3(t)||i.isEqual(ke.min())?G.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?G.resolve(null):(Pd()<=ze.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xd(t)),this.vs(e,s,t,nre(i,Vp)).next(a=>a))})}bs(e,t){let r=new wn(IB(e));return t.forEach((i,o)=>{mw(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Pd()<=ze.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",xd(t)),this.gs.getDocumentsMatchingQuery(e,t,nl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var JM="LocalStore",oie=3e8,oM=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kt(Be),this.Ms=new ls(o=>GM(o),WM),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G1(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function sie(n,e,t,r){return new oM(n,e,t,r)}function zB(n,e){return S(this,null,function*(){let t=Pe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ge();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function aie(n,e){let t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let g=u.batch,I=g.keys(),T=G.resolve();return I.forEach(k=>{T=T.next(()=>h.getEntry(c,k)).next(L=>{let O=u.docVersions.get(k);dt(O!==null,48541),L.version.compareTo(O)<0&&(g.applyToRemoteDocument(L,u),L.isValidDocument()&&(L.setReadTime(u.commitVersion),h.addEntry(L)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ge();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $B(n){let e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function cie(n,e){let t=Pe(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,g)));let T=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(g,T),function(L,O,q){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=oie?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,T,h)&&a.push(t.hi.updateTargetData(o,T))});let c=us(),u=Ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lie(o,s,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(ke.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(g=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function lie(n,e,t){let r=Ge(),i=Ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=us();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ae(JM,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function uie(n,e){let t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jM),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function die(n,e){let t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Hp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function sM(n,e,t){return S(this,null,function*(){let r=Pe(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zd(s))throw s;ae(JM,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function A3(n,e,t){let r=Pe(n),i=ke.min(),o=Ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let g=Pe(c),I=g.Ms.get(h);return I!==void 0?G.resolve(g.Fs.get(I)):g.hi.getTargetData(u,h)}(r,s,io(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ke.min(),t?o:Ge())).next(a=>(hie(r,Tre(e),a),{documents:a,qs:o})))}function hie(n,e,t){let r=n.xs.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var W0=class{constructor(){this.activeTargetIds=xre()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aM=class{constructor(){this.Fo=new W0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new W0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cM=class{xo(e){}shutdown(){}};var D3="ConnectivityMonitor",K0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(D3,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ae(D3,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var S0=null;function lM(){return S0===null?S0=function(){return 268435456+Math.round(2147483648*Math.random())}():S0++,"0x"+S0.toString(16)}var XD="RestConnection",fie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},uM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===N0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=lM(),a=this.Go(e,t.toUriEncodedString());ae(XD,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),h=si(u);return this.jo(e,a,c,r,h).then(g=>(ae(XD,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Ta(XD,`RPC '${e}' ${s} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=fie[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var dM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Fn="WebChannelConnection",hM=class extends uM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=lM();return new Promise((a,c)=>{let u=new WD;u.setWithCredentials(!0),u.listenOnce(KD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xp.NO_ERROR:let g=u.getResponseJson();ae(Fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case xp.TIMEOUT:ae(Fn,`RPC '${e}' ${s} timed out`),c(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case xp.HTTP_ERROR:let I=u.getStatus();if(ae(Fn,`RPC '${e}' ${s} failed with status:`,I,"response text:",u.getResponseText()),I>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);let k=T?.error;if(k&&k.status&&k.message){let L=function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN}(k.status);c(new re(L,k.message))}else c(new re(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new re(H.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ae(Fn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);ae(Fn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}P_(e,t,r){let i=lM(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JD(),a=YD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");ae(Fn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c);this.T_(g);let I=!1,T=!1,k=new dM({Ho:O=>{T?ae(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(ae(Fn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),ae(Fn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Yo:()=>g.close()}),L=(O,q,ee)=>{O.listen(q,W=>{try{ee(W)}catch(de){setTimeout(()=>{throw de},0)}})};return L(g,Md.EventType.OPEN,()=>{T||(ae(Fn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),L(g,Md.EventType.CLOSE,()=>{T||(T=!0,ae(Fn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(g))}),L(g,Md.EventType.ERROR,O=>{T||(T=!0,Ta(Fn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),k.__(new re(H.UNAVAILABLE,"The operation could not be completed")))}),L(g,Md.EventType.MESSAGE,O=>{var q;if(!T){let ee=O.data[0];dt(!!ee,16349);let W=ee,de=W?.error||((q=W[0])===null||q===void 0?void 0:q.error);if(de){ae(Fn,`RPC '${e}' stream ${i} received error:`,de);let je=de.status,ge=function(C){let D=Gt[C];if(D!==void 0)return kB(D)}(je),M=de.message;ge===void 0&&(ge=H.INTERNAL,M="Unknown error status: "+je+" with message "+de.message),T=!0,k.__(new re(ge,M)),g.close()}else ae(Fn,`RPC '${e}' stream ${i} received:`,ee),k.a_(ee)}}),L(a,QD.STAT_EVENT,O=>{O.stat===b0.PROXY?ae(Fn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===b0.NOPROXY&&ae(Fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function e1(){return typeof document<"u"?document:null}function yw(n){return new k1(n,!0)}var Q0=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var M3="PersistentStream",Y0=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Q0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return S(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return S(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new re(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>S(this,null,function*(){this.state=0,this.start()}))}G_(e){return ae(M3,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ae(M3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fM=class extends Y0{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=qre(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ke.min():s.readTime?oo(s.readTime):ke.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=F1(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=b1(c)?{documents:Kre(o,c)}:{query:Qre(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OB(o,s.resumeToken);let u=O1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ke.min())>0){a.readTime=$0(o,s.snapshotVersion.toTimestamp());let u=O1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=Jre(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=F1(this.serializer),t.removeTarget=e,this.k_(t)}},pM=class extends Y0{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Wre(e.writeResults,e.commitTime),r=oo(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=F1(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Gre(this.serializer,r))};this.k_(t)}};var gM=class{},mM=class extends gM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,N1(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(H.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,N1(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(H.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},yM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(os(t),this._a=!1):ae("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var al="RemoteStore",_M=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){cl(this)&&(ae(al,"Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let u=Pe(c);u.Ia.add(4),yield Jp(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield _w(u)})}(this))}))}),this.Aa=new yM(r,i)}};function _w(n){return S(this,null,function*(){if(cl(n))for(let e of n.da)yield e(!0)})}function Jp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function HB(n,e){let t=Pe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),tP(t)?eP(t):Xd(t).x_()&&XM(t,e))}function ZM(n,e){let t=Pe(n),r=Xd(t);t.Ta.delete(e),r.x_()&&qB(t,e),t.Ta.size===0&&(r.x_()?r.B_():cl(t)&&t.Aa.set("Unknown"))}function XM(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xd(n).H_(e)}function qB(n,e){n.Ra.$e(e),Xd(n).Y_(e)}function eP(n){n.Ra=new R1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Xd(n).start(),n.Aa.aa()}function tP(n){return cl(n)&&!Xd(n).M_()&&n.Ta.size>0}function cl(n){return Pe(n).Ia.size===0}function GB(n){n.Ra=void 0}function pie(n){return S(this,null,function*(){n.Aa.set("Online")})}function gie(n){return S(this,null,function*(){n.Ta.forEach((e,t)=>{XM(n,e)})})}function mie(n,e){return S(this,null,function*(){GB(n),tP(n)?(n.Aa.la(e),eP(n)):n.Aa.set("Unknown")})}function yie(n,e,t){return S(this,null,function*(){if(n.Aa.set("Online"),e instanceof j0&&e.state===2&&e.cause)try{yield function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){ae(al,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield J0(n,r)}else if(e instanceof Nd?n.Ra.Ye(e):e instanceof B0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{let r=yield $B(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(Vn.EMPTY_BYTE_STRING,h.snapshotVersion)),qB(o,c);let g=new Hp(h.target,c,u,h.sequenceNumber);XM(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ae(al,"Failed to raise snapshot:",r),yield J0(n,r)}})}function J0(n,e,t){return S(this,null,function*(){if(!Zd(e))throw e;n.Ia.add(1),yield Jp(n),n.Aa.set("Offline"),t||(t=()=>$B(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){ae(al,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield _w(n)}))})}function WB(n,e){return e().catch(t=>J0(n,t,e))}function vw(n){return S(this,null,function*(){let e=Pe(n),t=Da(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jM;for(;_ie(e);)try{let i=yield uie(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,vie(e,i)}catch(i){yield J0(e,i)}KB(e)&&QB(e)})}function _ie(n){return cl(n)&&n.Pa.length<10}function vie(n,e){n.Pa.push(e);let t=Da(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function KB(n){return cl(n)&&!Da(n).M_()&&n.Pa.length>0}function QB(n){Da(n).start()}function wie(n){return S(this,null,function*(){Da(n).na()})}function Eie(n){return S(this,null,function*(){let e=Da(n);for(let t of n.Pa)e.X_(t.mutations)})}function Iie(n,e,t){return S(this,null,function*(){let r=n.Pa.shift(),i=D1.from(r,e,t);yield WB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vw(n)})}function bie(n,e){return S(this,null,function*(){e&&Da(n).Z_&&(yield function(r,i){return S(this,null,function*(){if(function(s){return Vre(s)&&s!==H.ABORTED}(i.code)){let o=r.Pa.shift();Da(r).N_(),yield WB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield vw(r)}})}(n,e)),KB(n)&&QB(n)})}function P3(n,e){return S(this,null,function*(){let t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ae(al,"RemoteStore received new credentials");let r=cl(t);t.Ia.add(3),yield Jp(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield _w(t)})}function Cie(n,e){return S(this,null,function*(){let t=Pe(n);e?(t.Ia.delete(2),yield _w(t)):e||(t.Ia.add(2),yield Jp(t),t.Aa.set("Unknown"))})}function Xd(n){return n.Va||(n.Va=function(t,r,i){let o=Pe(t);return o.ia(),new fM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:pie.bind(null,n),e_:gie.bind(null,n),n_:mie.bind(null,n),J_:yie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.Va.N_(),tP(n)?eP(n):n.Aa.set("Unknown")):(yield n.Va.stop(),GB(n))}))),n.Va}function Da(n){return n.ma||(n.ma=function(t,r,i){let o=Pe(t);return o.ia(),new pM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wie.bind(null,n),n_:bie.bind(null,n),ea:Eie.bind(null,n),ta:Iie.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.N_(),yield vw(n)):(yield n.ma.stop(),n.Pa.length>0&&(ae(al,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var vM=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nP(n,e){if(os("AsyncQueue",`${e}: ${n}`),Zd(n))return new re(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Z0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Rp(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var X0=class{constructor(){this.fa=new kt(_e.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Wd=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Z0.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},EM=class{constructor(){this.queries=x3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Pe(t),o=i.queries;i.queries=x3(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new re(H.ABORTED,"Firestore shutting down"))}};function x3(){return new ls(n=>EB(n),gw)}function YB(n,e){return S(this,null,function*(){let t=Pe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new wM,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=nP(s,`Initialization of query '${xd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&rP(t)})}function JB(n,e){return S(this,null,function*(){let t=Pe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Tie(n,e){let t=Pe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&rP(t)}function Sie(n,e,t){let r=Pe(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function rP(n){n.Da.forEach(e=>{e.next()})}var IM,R3;(R3=IM||(IM={})).Fa="default",R3.Cache="cache";var ew=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Wd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==IM.Cache}};var tw=class{constructor(e){this.key=e}},nw=class{constructor(e){this.key=e}},bM=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=IB(e),this.eu=new Z0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new X0,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),T=mw(this.query,g)?g:null,k=!!I&&this.mutatedKeys.has(I.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),O=!1;I&&T?I.data.isEqual(T.data)?k!==L&&(r.track({type:3,doc:T}),O=!0):this.iu(I,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.Xa(T,c)>0||u&&this.Xa(T,u)<0)&&(a=!0)):!I&&T?(r.track({type:0,doc:T}),O=!0):I&&!T&&(r.track({type:1,doc:I}),O=!0,(c||u)&&(a=!0)),O&&(T?(s=s.add(T),o=L?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,g)=>function(T,k){let L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:O})}};return L(T)-L(k)}(h.type,g.type)||this.Xa(h.doc,g.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Wd(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new X0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new nw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new tw(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ge();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},iP="SyncEngine",CM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},TM=class{constructor(e){this.key=e,this.lu=!1}},SM=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ls(a=>EB(a),gw),this.Tu=new Map,this.Iu=new Set,this.du=new kt(_e.comparator),this.Eu=new Map,this.Au=new Gp,this.Ru={},this.Vu=new Map,this.mu=qp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Aie(n,e,t=!0){return S(this,null,function*(){let r=rj(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield ZB(r,e,t,!0),i})}function Die(n,e){return S(this,null,function*(){let t=rj(n);yield ZB(t,e,!0,!1)})}function ZB(n,e,t,r){return S(this,null,function*(){let i=yield die(n.localStore,io(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Mie(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&HB(n.remoteStore,i),a})}function Mie(n,e,t,r,i){return S(this,null,function*(){n.gu=(g,I,T)=>function(L,O,q,ee){return S(this,null,function*(){let W=O.view.nu(q);W.Ds&&(W=yield A3(L.localStore,O.query,!1).then(({documents:M})=>O.view.nu(M,W)));let de=ee&&ee.targetChanges.get(O.targetId),je=ee&&ee.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(W,L.isPrimaryClient,de,je);return O3(L,O.targetId,ge._u),ge.snapshot})}(n,g,I,T);let o=yield A3(n.localStore,e,!0),s=new bM(e,o.qs),a=s.nu(o.documents),c=$p.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);O3(n,t,u._u);let h=new CM(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function Pie(n,e,t){return S(this,null,function*(){let r=Pe(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!gw(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sM(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ZM(r.remoteStore,i.targetId),AM(r,i.targetId)}).catch(Jd))):(AM(r,i.targetId),yield sM(r.localStore,i.targetId,!0))})}function xie(n,e){return S(this,null,function*(){let t=Pe(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ZM(t.remoteStore,r.targetId))})}function Rie(n,e,t){return S(this,null,function*(){let r=Uie(n);try{let i=yield function(s,a){let c=Pe(s),u=Yt.now(),h=a.reduce((T,k)=>T.add(k.key),Ge()),g,I;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=us(),L=Ge();return c.Os.getEntries(T,h).next(O=>{k=O,k.forEach((q,ee)=>{ee.isValidDocument()||(L=L.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,k)).next(O=>{g=O;let q=[];for(let ee of a){let W=Fre(ee,g.get(ee.key).overlayedDocument);W!=null&&q.push(new ao(ee.key,W,pB(W.value.mapValue),is.exists(!0)))}return c.mutationQueue.addMutationBatch(T,u,q,a)}).next(O=>{I=O;let q=O.applyToLocalDocumentSet(g,L);return c.documentOverlayCache.saveOverlays(T,O.batchId,q)})}).then(()=>({batchId:I.batchId,changes:CB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new kt(Be)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Zp(r,i.changes),yield vw(r.remoteStore)}catch(i){let o=nP(i,"Failed to persist write");t.reject(o)}})}function XB(n,e){return S(this,null,function*(){let t=Pe(n);try{let r=yield cie(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?dt(s.lu,14607):i.removedDocuments.size>0&&(dt(s.lu,42227),s.lu=!1))}),yield Zp(t,r,e)}catch(r){yield Jd(r)}})}function k3(n,e,t){let r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Pe(s);c.onlineState=a;let u=!1;c.queries.forEach((h,g)=>{for(let I of g.wa)I.va(a)&&(u=!0)}),u&&rP(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kie(n,e,t){return S(this,null,function*(){let r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new kt(_e.comparator);s=s.insert(o,pi.newNoDocument(o,ke.min()));let a=Ge().add(o),c=new U0(ke.min(),new Map,new kt(Be),s,a);yield XB(r,c),r.du=r.du.remove(o),r.Eu.delete(e),oP(r)}else yield sM(r.localStore,e,!1).then(()=>AM(r,e,t)).catch(Jd)})}function Oie(n,e){return S(this,null,function*(){let t=Pe(n),r=e.batch.batchId;try{let i=yield aie(t.localStore,e);tj(t,r,null),ej(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zp(t,i)}catch(i){yield Jd(i)}})}function Nie(n,e,t){return S(this,null,function*(){let r=Pe(n);try{let i=yield function(s,a){let c=Pe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(g=>(dt(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(u,g))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);tj(r,e,t),ej(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zp(r,i)}catch(i){yield Jd(i)}})}function ej(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function tj(n,e,t){let r=Pe(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function AM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||nj(n,r)})}function nj(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ZM(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),oP(n))}function O3(n,e,t){for(let r of t)r instanceof tw?(n.Au.addReference(r.key,e),Lie(n,r)):r instanceof nw?(ae(iP,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||nj(n,r.key)):we(19791,{yu:r})}function Lie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ae(iP,"New document in limbo: "+t),n.Iu.add(r),oP(n))}function oP(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new _e(Dt.fromString(e)),r=n.mu.next();n.Eu.set(r,new TM(t)),n.du=n.du.insert(t,r),HB(n.remoteStore,new Hp(io(KM(t.path)),r,"TargetPurposeLimboResolution",BM.ue))}}function Zp(n,e,t){return S(this,null,function*(){let r=Pe(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let g=u?!u.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(u){i.push(u);let g=nM.Es(c.targetId,u);o.push(g)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,u){return S(this,null,function*(){let h=Pe(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>G.forEach(u,I=>G.forEach(I.Is,T=>h.persistence.referenceDelegate.addReference(g,I.targetId,T)).next(()=>G.forEach(I.ds,T=>h.persistence.referenceDelegate.removeReference(g,I.targetId,T)))))}catch(g){if(!Zd(g))throw g;ae(JM,"Failed to update sequence numbers: "+g)}for(let g of u){let I=g.targetId;if(!g.fromCache){let T=h.Fs.get(I),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(I,L)}}})}(r.localStore,o))})}function Fie(n,e){return S(this,null,function*(){let t=Pe(n);if(!t.currentUser.isEqual(e)){ae(iP,"User change. New user:",e.toKey());let r=yield zB(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new re(H.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zp(t,r.Bs)}})}function Vie(n,e){let t=Pe(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let i=Ge(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function rj(n){let e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kie.bind(null,e),e.hu.J_=Tie.bind(null,e.eventManager),e.hu.pu=Sie.bind(null,e.eventManager),e}function Uie(n){let e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nie.bind(null,e),e}var ij=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=yw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return sie(this.persistence,new iM,t.initialUser,this.serializer)}Du(t){return new q0(tM.Vi,this.serializer)}bu(t){return new aM}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),DM=class extends ij{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){dt(this.persistence.referenceDelegate instanceof G0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new z1(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new q0(r=>G0.Vi(r,t),this.serializer)}};var Bie=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>k3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fie.bind(null,this.syncEngine),yield Cie(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new EM}()}createDatastore(t){let r=yw(t.databaseInfo.databaseId),i=function(s){return new hM(s)}(t.databaseInfo);return function(s,a,c,u){return new mM(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new _M(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>k3(this.syncEngine,r,0),function(){return K0.C()?new K0:new cM}())}createSyncEngine(t,r){return function(o,s,a,c,u,h,g){let I=new SM(o,s,a,c,u,h);return g&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(o){return S(this,null,function*(){let s=Pe(o);ae(al,"RemoteStore shutting down."),s.Ia.add(5),yield Jp(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var rw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ma="FirestoreClient",MM=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){ae(Ma,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ae(Ma,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=nP(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function t1(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ae(Ma,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield zB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ta("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ta("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function N3(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jie(n);ae(Ma,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>P3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>P3(e.remoteStore,i)),n._onlineComponents=e})}function jie(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Ma,"Using user provided OfflineComponentProvider");try{yield t1(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),yield t1(n,new ij)}}else ae(Ma,"Using default OfflineComponentProvider"),yield t1(n,new DM(void 0));return n._offlineComponents})}function oj(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Ma,"Using user provided OnlineComponentProvider"),yield N3(n,n._uninitializedComponentsProvider._online)):(ae(Ma,"Using default OnlineComponentProvider"),yield N3(n,new Bie))),n._onlineComponents})}function zie(n){return oj(n).then(e=>e.syncEngine)}function sj(n){return S(this,null,function*(){let e=yield oj(n),t=e.eventManager;return t.onListen=Aie.bind(null,e.syncEngine),t.onUnlisten=Pie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Die.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xie.bind(null,e.syncEngine),t})}function $ie(n,e,t={}){let r=new fi;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,u){let h=new rw({next:I=>{h.Ou(),s.enqueueAndForget(()=>JB(o,g));let T=I.docs.has(a);!T&&I.fromCache?u.reject(new re(H.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&I.fromCache&&c&&c.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(I)},error:I=>u.reject(I)}),g=new ew(KM(a.path),h,{includeMetadataChanges:!0,ka:!0});return YB(o,g)}(yield sj(n),n.asyncQueue,e,t,r)})),r.promise}function Hie(n,e,t={}){let r=new fi;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return function(o,s,a,c,u){let h=new rw({next:I=>{h.Ou(),s.enqueueAndForget(()=>JB(o,g)),I.fromCache&&c.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(I)},error:I=>u.reject(I)}),g=new ew(a,h,{includeMetadataChanges:!0,ka:!0});return YB(o,g)}(yield sj(n),n.asyncQueue,e,t,r)})),r.promise}function aj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var L3=new Map;var cj="firestore.googleapis.com",F3=!0,iw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cj,this.ssl=F3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:F3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rie)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ere("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Kd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new n1;switch(r.type){case"firstParty":return new s1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=L3.get(t);r&&(ae("ComponentProvider","Removing Datastore"),L3.delete(t),r.terminate())}(this),Promise.resolve()}};function lj(n,e,t,r={}){var i;n=ss(n,Kd);let o=si(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Hu(`https://${c}`),qu("Firestore",!0)),s.host!==cj&&s.host!==c&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Gi(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=vn.MOCK_USER;else{h=K_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new vn(I)}n._authCredentials=new r1(new P0(h,g))}}var Pa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yp(t,n._jsonSchema))return new n(e,r||null,new _e(Dt.fromString(t.referencePath)))}};Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Qt("string",Tn._jsonSchemaVersion),referencePath:Qt("string")};var Ea=class n extends Pa{constructor(e,t,r){super(e,t,KM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new _e(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uj(n,e,...t){if(n=bt(n),H3("collection","path",e),n instanceof Kd){let r=Dt.fromString(e,...t);return t3(r),new Ea(n,null,r)}{if(!(n instanceof Tn||n instanceof Ea))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return t3(r),new Ea(n.firestore,null,r)}}function sP(n,e,...t){if(n=bt(n),arguments.length===1&&(e=Fp.newId()),H3("doc","path",e),n instanceof Kd){let r=Dt.fromString(e,...t);return e3(r),new Tn(n,null,new _e(r))}{if(!(n instanceof Tn||n instanceof Ea))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return e3(r),new Tn(n.firestore,n instanceof Ea?n.converter:null,new _e(r))}}var V3="AsyncQueue",ow=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Q0(this,"async_queue_retry"),this.oc=()=>{let r=e1();r&&ae(V3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=e1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=e1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new fi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return S(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zd(e))throw e;ae(V3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,os("INTERNAL UNHANDLED ERROR: ",U3(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=vM.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:U3(this.tc)})}verifyOperationInProgress(){}Pc(){return S(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function U3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var xa=class extends Kd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ow,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ow(e),this._firestoreClient=void 0,yield e}})}};function dj(n,e){let t=typeof n=="object"?n:Fo(),r=typeof n=="string"?n:e||N0,i=oa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=W_("firestore");o&&lj(i,...o)}return i}function aP(n){if(n._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qie(n),n._firestoreClient}function qie(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,h){return new d1(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,aj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new MM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Ia=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Vn.fromBase64String(e))}catch(t){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ia._jsonSchemaVersion="firestore/bytes/1.0",Ia._jsonSchema={type:Qt("string",Ia._jsonSchemaVersion),bytes:Qt("string")};var Qd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wp=class{constructor(e){this._methodName=e}};var ba=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Yp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:Qt("string",ba._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};var Ca=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ca._jsonSchemaVersion="firestore/vectorValue/1.0",Ca._jsonSchema={type:Qt("string",Ca._jsonSchemaVersion),vectorValues:Qt("object")};var Gie=/^__.*__$/,PM=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}},sw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}var xM=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return cw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hj(this.Ec)&&Gie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},RM=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yw(e)}Dc(e,t,r,i=!1){return new xM({Ec:e,methodName:t,bc:r,path:Ir.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cP(n){let e=n._freezeSettings(),t=yw(n._databaseId);return new RM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wie(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);lP("Data must be an object, but it was:",s,r);let a=fj(r,s),c,u;if(o.merge)c=new Ur(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let I=kM(e,g,t);if(!s.contains(I))throw new re(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);gj(h,I)||h.push(I)}c=new Ur(h),u=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,u=s.fieldTransforms;return new PM(new Er(a),c,u)}var aw=class n extends Wp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Kie(n,e,t,r){let i=n.Dc(1,e,t);lP("Data must be an object, but it was:",i,r);let o=[],s=Er.empty();Ra(r,(c,u)=>{let h=uP(e,c,t);u=bt(u);let g=i.gc(h);if(u instanceof aw)o.push(h);else{let I=Xp(u,g);I!=null&&(o.push(h),s.set(h,I))}});let a=new Ur(o);return new sw(s,a,i.fieldTransforms)}function Qie(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[kM(e,r,t)],c=[i];if(o.length%2!=0)throw new re(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)a.push(kM(e,o[I])),c.push(o[I+1]);let u=[],h=Er.empty();for(let I=a.length-1;I>=0;--I)if(!gj(u,a[I])){let T=a[I],k=c[I];k=bt(k);let L=s.gc(T);if(k instanceof aw)u.push(T);else{let O=Xp(k,L);O!=null&&(u.push(T),h.set(T,O))}}let g=new Ur(u);return new sw(h,g,s.fieldTransforms)}function Yie(n,e,t,r=!1){return Xp(t,n.Dc(r?4:3,e))}function Xp(n,e){if(pj(n=bt(n)))return lP("Unsupported field value:",e,n),fj(n,e);if(n instanceof Wp)return function(r,i){if(!hj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Xp(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rre(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Yt.fromDate(r);return{timestampValue:$0(i.serializer,o)}}if(r instanceof Yt){let o=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$0(i.serializer,o)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:OB(i.serializer,r._byteString)};if(r instanceof Tn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:YM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ca)return function(s,a){return{mapValue:{fields:{[$M]:{stringValue:HM},[Ud]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return QM(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${hw(r)}`)}(n,e)}function fj(n,e){let t={};return sB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(n,(r,i)=>{let o=Xp(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof ba||n instanceof Ia||n instanceof Tn||n instanceof Wp||n instanceof Ca)}function lP(n,e,t){if(!pj(t)||!q3(t)){let r=hw(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function kM(n,e,t){if((e=bt(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return uP(n,e);throw cw("Field path arguments must be of type string or ",n,!1,void 0,t)}var Jie=new RegExp("[~\\*/\\[\\]]");function uP(n,e,t){if(e.search(Jie)>=0)throw cw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qd(...e.split("."))._internalPath}catch{throw cw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cw(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new re(H.INVALID_ARGUMENT,a+n+c)}function gj(n,e){return n.some(t=>t.isEqual(e))}var lw=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new OM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ww("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},OM=class extends lw{data(){return super.data()}};function ww(n,e){return typeof e=="string"?uP(n,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}function Zie(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kp=class{},Qp=class extends Kp{};function mj(n,e,...t){let r=[];e instanceof Kp&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof NM).length,a=o.filter(c=>c instanceof uw).length;if(s>1||s>0&&a>0)throw new re(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var uw=class n extends Qp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return wj(e._query,t),new Pa(e.firestore,e.converter,C1(e._query,t))}_parse(e){let t=cP(e.firestore);return function(o,s,a,c,u,h,g){let I;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){j3(g,h);let k=[];for(let L of g)k.push(B3(c,o,L));I={arrayValue:{values:k}}}else I=B3(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||j3(g,h),I=Yie(a,s,g,h==="in"||h==="not-in");return Kt.create(u,h,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yj(n,e,t){let r=e,i=ww("where",n);return uw._create(i,r,t)}var NM=class n extends Kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)wj(s,c),s=C1(s,c)}(e._query,t),new Pa(e.firestore,e.converter,C1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var LM=class n extends Qp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rl(o,s)}(e._query,this._field,this._direction);return new Pa(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Aa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function _j(n,e="asc"){let t=e,r=ww("orderBy",n);return LM._create(r,t)}var FM=class n extends Qp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Pa(e.firestore,e.converter,V0(e._query,this._limit,this._limitType))}};function vj(n){return tre("limit",n),FM._create("limit",n,"F")}function B3(n,e,t){if(typeof(t=bt(t))=="string"){if(t==="")throw new re(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wB(e)&&t.indexOf("/")!==-1)throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!_e.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return c3(n,new _e(r))}if(t instanceof Tn)return c3(n,t._key);throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hw(t)}.`)}function j3(n,e){if(!Array.isArray(n)||n.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wj(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var VM=class{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ra(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ud].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>At(s.doubleValue));return new Ca(o)}convertGeoPoint(e){return new ba(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=pw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bp(e));default:return null}}convertTimestamp(e){let t=as(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);dt(BB(r),9688,{name:e});let i=new L0(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(t)||os(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Xie(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Xc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},el=class n extends lw{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ww("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};el._jsonSchemaVersion="firestore/documentSnapshot/1.0",el._jsonSchema={type:Qt("string",el._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};var Ld=class extends el{data(e={}){return super.data(e)}},Fd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ld(this._firestore,this._userDataWriter,r.key,r,new Xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ld(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ld(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:eoe(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function eoe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function Ej(n){n=ss(n,Tn);let e=ss(n.firestore,xa);return $ie(aP(e),n._key).then(t=>toe(e,n,t))}Fd._jsonSchemaVersion="firestore/querySnapshot/1.0",Fd._jsonSchema={type:Qt("string",Fd._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};var dw=class extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}};function Ij(n){n=ss(n,Pa);let e=ss(n.firestore,xa),t=aP(e),r=new dw(e);return Zie(n._query),Hie(t,n._query).then(i=>new Fd(e,r,n,i))}function bj(n,e,t,...r){n=ss(n,Tn);let i=ss(n.firestore,xa),o=cP(i),s;return s=typeof(e=bt(e))=="string"||e instanceof Qd?Qie(o,"updateDoc",n._key,e,t,r):Kie(o,"updateDoc",n._key,e),dP(i,[s.toMutation(n._key,is.exists(!0))])}function Cj(n){return dP(ss(n.firestore,xa),[new zp(n._key,is.none())])}function Tj(n,e){let t=ss(n.firestore,xa),r=sP(n),i=Xie(n.converter,e);return dP(t,[Wie(cP(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,is.exists(!1))]).then(()=>r)}function dP(n,e){return function(r,i){let o=new fi;return r.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return Rie(yield zie(r),i,o)})),o.promise}(aP(n),e)}function toe(n,e,t){let r=t.docs.get(e._key),i=new dw(n);return new el(n,i,e._key,r,new Xc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Yd=i})(Qi),vr(new bn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new xa(new i1(r.getProvider("auth-internal")),new a1(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new L0(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),_t(Y4,J4,e),_t(Y4,J4,"esm2017")})();var ll=class{constructor(e){return e}},Sj="firestore",hP=class{constructor(){return sa(Sj)}};var fP=new J("angularfire2.firestore-instances");function noe(n,e){let t=Lc(Sj,n,e);return t&&new ll(t)}function roe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ll(r)}}var ioe={provide:hP,deps:[[new cn,fP]]},ooe={provide:ll,useFactory:noe,deps:[[new cn,fP],ai]};function Aj(n,...e){return _t("angularfire",Yi.full,"fst"),In([ooe,ioe,{provide:fP,useFactory:roe(n),multi:!0,deps:[Oe,Tt,Ji,Vo,[new cn,$c],[new cn,ca],...e]}])}var eg=ut(W4,!0);var Dj=ut(Tj,!0,2);var ul=ut(uj,!0,2);var Mj=ut(Cj,!0,2);var tg=ut(sP,!0,2);var Pj=ut(Ej,!0);var xj=ut(Ij,!0);var Rj=ut(dj,!0);var pP=ut(vj,!0,2);var Ew=ut(_j,!0,2),ng=ut(mj,!0,2);var gP=ut(bj,!0,2);var eh=ut(yj,!0,2);var Uj="firebasestorage.googleapis.com",Bj="storageBucket",aoe=2*60*1e3,coe=10*60*1e3;var Ot=class n extends jn{constructor(e,t,r=0){super(mP(e),`Firebase Storage: ${t} (${mP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ut=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ut||{});function mP(n){return"storage/"+n}function IP(){let n="An unknown error occurred, please check the error payload for server response.";return new Ot(Ut.UNKNOWN,n)}function loe(n){return new Ot(Ut.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function uoe(n){return new Ot(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function doe(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Ut.UNAUTHENTICATED,n)}function hoe(){return new Ot(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function foe(n){return new Ot(Ut.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function poe(){return new Ot(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function goe(){return new Ot(Ut.CANCELED,"User canceled the upload/download.")}function moe(n){return new Ot(Ut.INVALID_URL,"Invalid URL '"+n+"'.")}function yoe(n){return new Ot(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _oe(){return new Ot(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Bj+"' property when initializing the app?")}function voe(){return new Ot(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function woe(){return new Ot(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Eoe(n){return new Ot(Ut.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yP(n){return new Ot(Ut.INVALID_ARGUMENT,n)}function jj(){return new Ot(Ut.APP_DELETED,"The Firebase app was deleted.")}function Ioe(n){return new Ot(Ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ig(n,e){return new Ot(Ut.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rg(n){throw new Ot(Ut.INTERNAL_ERROR,"Internal error: "+n)}var mi=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw yoe(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(de){de.path_=decodeURIComponent(de.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",T=new RegExp(`^https?://${g}/${h}/b/${i}/o${I}`,"i"),k={bucket:1,path:3},L=t===Uj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",q=new RegExp(`^https?://${L}/${i}/${O}`,"i"),W=[{regex:a,indices:c,postModify:o},{regex:T,indices:k,postModify:u},{regex:q,indices:{bucket:1,path:2},postModify:u}];for(let de=0;de<W.length;de++){let je=W[de],ge=je.regex.exec(e);if(ge){let M=ge[je.indices.bucket],E=ge[je.indices.path];E||(E=""),r=new n(M,E),je.postModify(r);break}}if(r==null)throw moe(e);return r}},_P=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function boe(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function h(...O){u||(u=!0,e.apply(null,O))}function g(O){i=setTimeout(()=>{i=null,n(T,c())},O)}function I(){o&&clearTimeout(o)}function T(O,...q){if(u){I();return}if(O){I(),h.call(null,O,...q);return}if(c()||s){I(),h.call(null,O,...q);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,g(W)}let k=!1;function L(O){k||(k=!0,I(),!u&&(i!==null?(O||(a=2),clearTimeout(i),g(0)):O||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,L(!0)},t),L}function Coe(n){n(!1)}function Toe(n){return n!==void 0}function Soe(n){return typeof n=="object"&&!Array.isArray(n)}function bP(n){return typeof n=="string"||n instanceof String}function kj(n){return CP()&&n instanceof Blob}function CP(){return typeof Blob<"u"}function Oj(n,e,t,r){if(r<e)throw yP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw yP(`Invalid value for '${n}'. Expected ${t} or less.`)}function TP(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function zj(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var nh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(nh||{});function Aoe(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var vP=class{constructor(e,t,r,i,o,s,a,c,u,h,g,I=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=g,this.retry=I,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new th(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===nh.NO_ERROR,c=o.getStatus();if(!a||Aoe(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===nh.ABORT;r(!1,new th(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new th(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Toe(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=IP();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?jj():goe();s(c)}else{let c=poe();s(c)}};this.canceled_?t(!1,new th(!1,null,!0)):this.backoffId_=boe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Coe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},th=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Doe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Moe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Poe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function xoe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Roe(n,e,t,r,i,o,s=!0,a=!1){let c=zj(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return Poe(h,e),Doe(h,t),Moe(h,o),xoe(h,r),new vP(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function koe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ooe(...n){let e=koe();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(CP())return new Blob(n);throw new Ot(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Noe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Loe(n){if(typeof atob>"u")throw Eoe("base-64");return atob(n)}var co={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},og=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Foe(n,e){switch(n){case co.RAW:return new og($j(e));case co.BASE64:case co.BASE64URL:return new og(Hj(n,e));case co.DATA_URL:return new og(Uoe(e),Boe(e))}throw IP()}function $j(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Voe(n){let e;try{e=decodeURIComponent(n)}catch{throw ig(co.DATA_URL,"Malformed data URL.")}return $j(e)}function Hj(n,e){switch(n){case co.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ig(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case co.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ig(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Loe(e)}catch(i){throw i.message.includes("polyfill")?i:ig(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var bw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw ig(co.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=joe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Uoe(n){let e=new bw(n);return e.base64?Hj(co.BASE64,e.rest):Voe(e.rest)}function Boe(n){return new bw(n).contentType}function joe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Cw=class n{constructor(e,t){let r=0,i="";kj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(kj(this.data_)){let r=this.data_,i=Noe(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(CP()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Ooe.apply(null,t))}else{let t=e.map(s=>bP(s)?Foe(co.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function qj(n){let e;try{e=JSON.parse(n)}catch{return null}return Soe(e)?e:null}function zoe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $oe(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Gj(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Hoe(n,e){return e}var Sn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Hoe}},Iw=null;function qoe(n){return!bP(n)||n.length<2?n:Gj(n)}function Wj(){if(Iw)return Iw;let n=[];n.push(new Sn("bucket")),n.push(new Sn("generation")),n.push(new Sn("metageneration")),n.push(new Sn("name","fullPath",!0));function e(o,s){return qoe(s)}let t=new Sn("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Sn("size");return i.xform=r,n.push(i),n.push(new Sn("timeCreated")),n.push(new Sn("updated")),n.push(new Sn("md5Hash",null,!0)),n.push(new Sn("cacheControl",null,!0)),n.push(new Sn("contentDisposition",null,!0)),n.push(new Sn("contentEncoding",null,!0)),n.push(new Sn("contentLanguage",null,!0)),n.push(new Sn("contentType",null,!0)),n.push(new Sn("metadata","customMetadata",!0)),Iw=n,Iw}function Goe(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new mi(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Woe(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Goe(r,n),r}function Kj(n,e,t){let r=qj(e);return r===null?null:Woe(n,r,t)}function Koe(n,e,t,r){let i=qj(e);if(i===null||!bP(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=n.bucket,g=n.fullPath,I="/b/"+s(h)+"/o/"+s(g),T=TP(I,t,r),k=zj({alt:"media",token:u});return T+k})[0]}function Qoe(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Tw=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Qj(n){if(!n)throw IP()}function Yoe(n,e){function t(r,i){let o=Kj(n,i,e);return Qj(o!==null),o}return t}function Joe(n,e){function t(r,i){let o=Kj(n,i,e);return Qj(o!==null),Koe(o,i,n.host,n._protocol)}return t}function Yj(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=hoe():i=doe():t.getStatus()===402?i=uoe(n.bucket):t.getStatus()===403?i=foe(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Zoe(n){let e=Yj(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=loe(n.path)),o.serverResponse=i.serverResponse,o}return t}function Xoe(n,e,t){let r=e.fullServerUrl(),i=TP(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Tw(i,o,Joe(n,t),s);return a.errorHandler=Zoe(e),a}function ese(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function tse(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ese(null,e)),r}function nse(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let W="";for(let de=0;de<2;de++)W=W+Math.random().toString().slice(2);return W}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=tse(e,r,i),h=Qoe(u,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,I=`\r
--`+c+"--",T=Cw.getBlob(g,r,I);if(T===null)throw voe();let k={name:u.fullPath},L=TP(o,n.host,n._protocol),O="POST",q=n.maxUploadRetryTime,ee=new Tw(L,O,Yoe(n,t),q);return ee.urlParams=k,ee.headers=s,ee.body=T.uploadData(),ee.errorHandler=Yj(e),ee}var qTe=256*1024;var Nj=null,wP=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw rg("cannot .send() more than once");if(si(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},EP=class extends wP{initXhr(){this.xhr_.responseType="text"}};function Jj(){return Nj?Nj():new EP}var rh=class n{constructor(e,t){this._service=e,t instanceof mi?this._location=t:this._location=mi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gj(this._location.path)}get storage(){return this._service}get parent(){let e=zoe(this._location.path);if(e===null)return null;let t=new mi(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ioe(e)}};function rse(n,e,t){n._throwIfRoot("uploadBytes");let r=nse(n.storage,n._location,Wj(),new Cw(e,!0),t);return n.storage.makeRequestWithTokens(r,Jj).then(i=>({metadata:i,ref:n}))}function ise(n){n._throwIfRoot("getDownloadURL");let e=Xoe(n.storage,n._location,Wj());return n.storage.makeRequestWithTokens(e,Jj).then(t=>{if(t===null)throw woe();return t})}function ose(n,e){let t=$oe(n._location.path,e),r=new mi(n._location.bucket,t);return new rh(n.storage,r)}function sse(n){return/^[A-Za-z]+:\/\//.test(n)}function ase(n,e){return new rh(n,e)}function Zj(n,e){if(n instanceof sg){let t=n;if(t._bucket==null)throw _oe();let r=new rh(t,t._bucket);return e!=null?Zj(r,e):r}else return e!==void 0?ose(n,e):n}function cse(n,e){if(e&&sse(e)){if(n instanceof sg)return ase(n,e);throw yP("To use ref(service, url), the first argument must be a Storage instance.")}else return Zj(n,e)}function Lj(n,e){let t=e?.[Bj];return t==null?null:mi.makeFromBucketSpec(t,n)}function lse(n,e,t,r={}){n.host=`${e}:${t}`;let i=si(e);i&&(Hu(`https://${n.host}/b`),qu("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:K_(o,n.app.options.projectId))}var sg=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=Uj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aoe,this._maxUploadRetryTime=coe,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=Lj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=Lj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Oj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Oj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rh(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new _P(jj());{let s=Roe(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return S(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Fj="@firebase/storage",Vj="0.13.14";var Xj="storage";function e5(n,e,t){return n=bt(n),rse(n,e,t)}function t5(n){return n=bt(n),ise(n)}function n5(n,e){return n=bt(n),cse(n,e)}function r5(n=Fo(),e){n=bt(n);let r=oa(n,Xj).getImmediate({identifier:e}),i=W_("storage");return i&&i5(r,...i),r}function i5(n,e,t,r={}){lse(n,e,t,r)}function use(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sg(t,r,i,e,Qi)}function dse(){vr(new bn(Xj,use,"PUBLIC").setMultipleInstances(!0)),_t(Fj,Vj,""),_t(Fj,Vj,"esm2017")}dse();var dl=class{constructor(e){return e}},o5="storage",SP=class{constructor(){return sa(o5)}};var AP=new J("angularfire2.storage-instances");function hse(n,e){let t=Lc(o5,n,e);return t&&new dl(t)}function fse(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new dl(r)}}var pse={provide:SP,deps:[[new cn,AP]]},gse={provide:dl,useFactory:hse,deps:[[new cn,AP],ai]};function s5(n,...e){return _t("angularfire",Yi.full,"gcs"),In([gse,pse,{provide:AP,useFactory:fse(n),multi:!0,deps:[Oe,Tt,Ji,Vo,[new cn,$c],[new cn,ca],...e]}])}var a5=ut(t5,!0);var c5=ut(r5,!0);var l5=ut(n5,!0,2);var u5=ut(e5,!0);var w5=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(te(Ro),te(gr))};static \u0275dir=Et({type:n})}return n})(),kw=(()=>{class n extends w5{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275dir=Et({type:n,features:[Pr]})}return n})(),fg=new J(""),yse={provide:fg,useExisting:ki(()=>xP),multi:!0},xP=(()=>{class n extends kw{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Vi([yse]),Pr]})}return n})(),_se={provide:fg,useExisting:ki(()=>Br),multi:!0};function vse(){let n=kr()?kr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var wse=new J(""),Br=(()=>{class n extends w5{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!vse())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(te(Ro),te(gr),te(wse,8))};static \u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Vi([_se]),Pr]})}return n})();function Ese(n){return n==null||Ise(n)===0}function Ise(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var RP=new J(""),E5=new J("");function bse(n){return Ese(n.value)?{required:!0}:null}function d5(n){return null}function I5(n){return n!=null}function b5(n){return Ws(n)?ct(n):n}function C5(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function T5(n,e){return e.map(t=>t(n))}function Cse(n){return!n.validate}function S5(n){return n.map(e=>Cse(e)?e:t=>e.validate(t))}function Tse(n){if(!n)return null;let e=n.filter(I5);return e.length==0?null:function(t){return C5(T5(t,e))}}function kP(n){return n!=null?Tse(S5(n)):null}function Sse(n){if(!n)return null;let e=n.filter(I5);return e.length==0?null:function(t){let r=T5(t,e).map(b5);return RE(r).pipe(me(C5))}}function OP(n){return n!=null?Sse(S5(n)):null}function h5(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ase(n){return n._rawValidators}function Dse(n){return n._rawAsyncValidators}function DP(n){return n?Array.isArray(n)?n:[n]:[]}function Aw(n,e){return Array.isArray(n)?n.includes(e):n===e}function f5(n,e){let t=DP(e);return DP(n).forEach(i=>{Aw(t,i)||t.push(i)}),t}function p5(n,e){return DP(e).filter(t=>!Aw(n,t))}var Dw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},sh=class extends Dw{name;get formDirective(){return null}get path(){return null}},hg=class extends Dw{_parent=null;name=null;valueAccessor=null},Mw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Mse={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PSe=he($({},Mse),{"[class.ng-submitted]":"isSubmitted"}),lo=(()=>{class n extends Mw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(hg,2))};static \u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&wc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Pr]})}return n})(),ah=(()=>{class n extends Mw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(sh,10))};static \u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&wc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Pr]})}return n})();var ag="VALID",Sw="INVALID",ih="PENDING",cg="DISABLED",ka=class{},Pw=class extends ka{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ug=class extends ka{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dg=class extends ka{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},oh=class extends ka{status;source;constructor(e,t){super(),this.status=e,this.source=t}},MP=class extends ka{source;constructor(e){super(),this.source=e}},PP=class extends ka{source;constructor(e){super(),this.source=e}};function A5(n){return(Ow(n)?n.validators:n)||null}function Pse(n){return Array.isArray(n)?kP(n):n||null}function D5(n,e){return(Ow(e)?e.asyncValidators:n)||null}function xse(n){return Array.isArray(n)?OP(n):n||null}function Ow(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Rse(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function kse(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var xw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rr(this.statusReactive)}set status(e){Rr(()=>this.statusReactive.set(e))}_status=Ec(()=>this.statusReactive());statusReactive=_c(void 0);get valid(){return this.status===ag}get invalid(){return this.status===Sw}get pending(){return this.status==ih}get disabled(){return this.status===cg}get enabled(){return this.status!==cg}errors;get pristine(){return Rr(this.pristineReactive)}set pristine(e){Rr(()=>this.pristineReactive.set(e))}_pristine=Ec(()=>this.pristineReactive());pristineReactive=_c(!0);get dirty(){return!this.pristine}get touched(){return Rr(this.touchedReactive)}set touched(e){Rr(()=>this.touchedReactive.set(e))}_touched=Ec(()=>this.touchedReactive());touchedReactive=_c(!1);get untouched(){return!this.touched}_events=new Rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(f5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(f5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(p5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(p5(e,this._rawAsyncValidators))}hasValidator(e){return Aw(this._rawValidators,e)}hasAsyncValidator(e){return Aw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dg(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new dg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ug(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ug(!0,r))}markAsPending(e={}){this.status=ih;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cg,this.errors=null,this._forEachChild(i=>{i.disable(he($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pw(this.value,r)),this._events.next(new oh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ag,this._forEachChild(r=>{r.enable(he($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ag||this.status===ih)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pw(this.value,t)),this._events.next(new oh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cg:ag}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ih,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=b5(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?cg:this.errors?Sw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ih)?ih:this._anyControlsHaveStatus(Sw)?Sw:ag}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ug(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ow(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Pse(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xse(this._rawAsyncValidators)}},Rw=class extends xw{constructor(e,t,r){super(A5(t),D5(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kse(this,!0,e),Object.keys(e).forEach(r=>{Rse(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var NP=new J("",{providedIn:"root",factory:()=>LP}),LP="always";function Ose(n,e){return[...e.path,n]}function M5(n,e,t=LP){P5(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Lse(n,e),Vse(n,e),Fse(n,e),Nse(n,e)}function g5(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nse(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function P5(n,e){let t=Ase(n);e.validator!==null?n.setValidators(h5(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Dse(n);e.asyncValidator!==null?n.setAsyncValidators(h5(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();g5(e._rawValidators,i),g5(e._rawAsyncValidators,i)}function Lse(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&x5(n,e)})}function Fse(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&x5(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function x5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vse(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Use(n,e){n==null,P5(n,e)}function Bse(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function jse(n){return Object.getPrototypeOf(n.constructor)===kw}function zse(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $se(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Br?t=o:jse(o)?r=o:i=o}),i||r||t||null}var Hse={provide:sh,useExisting:ki(()=>hl)},lg=Promise.resolve(),hl=(()=>{class n extends sh{callSetDisabledState;get submitted(){return Rr(this.submittedReactive)}_submitted=Ec(()=>this.submittedReactive());submittedReactive=_c(!1);_directives=new Set;form;ngSubmit=new vt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Rw({},kP(t),OP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){lg.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),M5(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){lg.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){lg.then(()=>{let r=this._findContainer(t.path),i=new Rw({});Use(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){lg.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){lg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),zse(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new MP(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new PP(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(te(RP,10),te(E5,10),te(NP,8))};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Vi([Hse]),Pr]})}return n})();function m5(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function y5(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qse=class extends xw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(A5(t),D5(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ow(t)&&(t.nonNullable||t.initialValueIsDefault)&&(y5(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){m5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){m5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){y5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Gse={provide:hg,useExisting:ki(()=>yi)},_5=Promise.resolve(),yi=(()=>{class n extends hg{_changeDetectorRef;callSetDisabledState;control=new qse;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$se(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Bse(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){M5(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){_5.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Js(r);_5.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ose(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(te(sh,9),te(RP,10),te(E5,10),te(fg,10),te(Ys,8),te(NP,8))};static \u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Vi([Gse]),Pr,pr]})}return n})();var ch=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Wse={provide:fg,useExisting:ki(()=>lh),multi:!0};function R5(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Kse(n){return n.split(":")[0]}var lh=(()=>{class n extends kw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=R5(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Kse(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vi([Wse]),Pr]})}return n})(),Nw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(R5(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(gr),te(Ro),te(lh,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Qse={provide:fg,useExisting:ki(()=>k5),multi:!0};function v5(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Yse(n){return n.split(":")[0]}var k5=(()=>{class n extends kw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Yse(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vi([Qse]),Pr]})}return n})(),Lw=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(v5(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(v5(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(gr),te(Ro),te(k5,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Jse=(()=>{class n{_validator=d5;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):d5,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,features:[pr]})}return n})();var Zse={provide:RP,useExisting:ki(()=>fl),multi:!0};var fl=(()=>{class n extends Jse{required;inputName="required";normalizeInput=Js;createValidator=t=>bse;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xo(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&af("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Vi([Zse]),Pr]})}return n})();var Xse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ar({})}return n})();var uo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NP,useValue:t.callSetDisabledState??LP}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ar({imports:[Xse]})}return n})();var eae=["*"],mg=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Lt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(Rn(t=>{let r=new be(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let o=t.addListener(e,s=>{this._ngZone.run(()=>i.next(s))});if(!o){i.complete();return}return this._listeners.push(o),()=>o.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},gg={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},O5="500px",N5="500px",Fw=(()=>{class n{_elementRef=j(gr);_ngZone=j(Oe);_eventManager=new mg(j(Oe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=O5;width=N5;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||gg}_options=gg;mapInitialized=new vt;authFailure=new vt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=j(Li);if(this._isBrowser=aC(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(xn(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":L5(this.height)||O5,t.width=this.width===null?"":L5(this.width)||N5}}_combineOptions(){let t=this._options||{};return he($({},t),{center:this._center||t.center||gg.center,zoom:this._zoom??t.zoom??gg.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||gg.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wt({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[pr],ngContentSelectors:eae,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(IN(),Ye(0,"div",0),bN(1))},encapsulation:2,changeDetection:0})}return n})(),tae=/([A-Za-z%]+)$/;function L5(n){return n==null?"":tae.test(n)?n:`${n}px`}var F5=(()=>{class n{_googleMap=j(Fw);_elementRef=j(gr);_ngZone=j(Oe);_eventManager=new mg(j(Oe));_options=new Lt({});_position=new Lt(void 0);_destroy=new Rt;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new vt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(xn(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let o=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==o||!o)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:o,shouldFocus:r}))}_combineOptions(){return nc([this._options,this._position]).pipe(me(([t,r])=>he($({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(nu(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(nu(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var nae=new J("MAP_MARKER"),rae={position:{lat:37.421995,lng:-122.084092}},V5=(()=>{class n{_googleMap=j(Fw);_ngZone=j(Oe);_eventManager=new mg(j(Oe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new vt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:o,_label:s,_clickable:a,_icon:c,_visible:u}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&o&&r.setPosition(o),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&u!==void 0&&r.setVisible(u))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(xn(1)).toPromise()}_combineOptions(){let t=this._options||rae;return he($({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[Vi([{provide:nae,useExisting:n}]),pr]})}return n})();var U5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ar({})}return n})();function oae(n,e){n&1&&(y(0,"p",15),v(1," \u{1F4CD} Deine Position wird angezeigt "),m())}function sae(n,e){n&1&&(y(0,"p",16),v(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),m())}function aae(n,e){if(n&1){let t=We();y(0,"div",19)(1,"h4"),v(2),m(),y(3,"p")(4,"strong"),v(5),Ui(6,"titlecase"),m()(),y(7,"p"),v(8),m(),y(9,"p"),v(10),m(),y(11,"button",20),fe("click",function(){oe(t);let i=K().$implicit,o=K();return se(o.getDirections(i.shop))}),v(12," \u{1F697} Route berechnen "),m()()}if(n&2){let t=K().$implicit;N(2),yt(t.shop.name),N(3),yt(Bi(6,4,t.shop.type)),N(3),Ve("\u{1F4CD} ",t.shop.address.split(",")[0],""),N(2),Ve("\u2B50 ",t.shop.rating,"/5")}}function cae(n,e){n&1&&(y(0,"div",19)(1,"h4"),v(2,"\u{1F4CD} Deine Position"),m(),y(3,"p"),v(4,"Du bist hier"),m()())}function lae(n,e){if(n&1){let t=We();y(0,"map-marker",17),fe("mapClick",function(){let i=oe(t).$implicit,o=K();return se(o.onMarkerClick(i))}),y(1,"map-info-window"),ce(2,aae,13,6,"div",18)(3,cae,5,0,"div",18),m()()}if(n&2){let t=e.$implicit,r=K();z("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),N(2),z("ngIf",t.shop),N(),z("ngIf",t.isUserLocation)}}var Vw=class n{afroshops=[];userLocation=null;shopSelected=new vt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=he($({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[pr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h3"),v(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),m(),ce(4,oae,2,0,"p",2)(5,sae,2,0,"p",3),m(),y(6,"google-map",4),ce(7,lae,4,5,"map-marker",5),m(),y(8,"div",6)(9,"h4"),v(10,"Legende"),m(),y(11,"div",7)(12,"div",8)(13,"span",9),v(14,"\u{1F37D}\uFE0F"),m(),y(15,"span"),v(16,"Restaurants"),m()(),y(17,"div",8)(18,"span",10),v(19,"\u{1F6D2}"),m(),y(20,"span"),v(21,"Lebensmittel"),m()(),y(22,"div",8)(23,"span",11),v(24,"\u2702\uFE0F"),m(),y(25,"span"),v(26,"Friseure"),m()(),y(27,"div",8)(28,"span",12),v(29,"\u{1F457}"),m(),y(30,"span"),v(31,"Mode"),m()(),y(32,"div",8)(33,"span",13),v(34,"\u{1F3E6}"),m(),y(35,"span"),v(36,"Dienstleistungen"),m()(),y(37,"div",8)(38,"span",14),v(39,"\u{1F4CD}"),m(),y(40,"span"),v(41,"Deine Position"),m()()()()()),t&2&&(N(4),z("ngIf",r.userLocation),N(),z("ngIf",!r.userLocation),N(),z("options",r.mapOptions)("width","100%")("height","400px"),N(),z("ngForOf",r.markers))},dependencies:[zt,tr,un,Ic,U5,Fw,F5,V5],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var uh=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(o=>i.address.toLowerCase().includes(o.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ir=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=ul(this.firestore,"afroshops");return ct(xj(e)).pipe(me(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(o=>{let s=o.data();s.id=o.id,r.push(s)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(o=>o.name));let i=r.map(o=>this.mapFirebaseDocToAfroshopData(o));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(o=>o.name)),i.sort((o,s)=>o.name.localeCompare(s.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=ul(this.firestore,"afroshops"),r=ng(t,eh("city","==",e.toLowerCase()),Ew("name"));return eg(r,{idField:"id"})}getAfroshopsByType(e){let t=ul(this.firestore,"afroshops"),r=ng(t,eh("type","==",e),Ew("rating","desc"));return eg(r,{idField:"id"})}getAfroshopById(e){return S(this,null,function*(){try{let t=tg(this.firestore,"afroshops",e),r=yield Pj(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(he($({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return S(this,null,function*(){let t=ul(this.firestore,"afroshops"),r=he($({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield Dj(t,r)).id})}updateAfroshop(e,t){return S(this,null,function*(){let r=tg(this.firestore,"afroshops",e),i=he($({},t),{updatedAt:new Date});yield gP(r,i)})}deleteAfroshop(e){return S(this,null,function*(){let t=tg(this.firestore,"afroshops",e);yield Mj(t)})}searchAfroshops(e){let t=ul(this.firestore,"afroshops"),r=ng(t,eh("name",">=",e),eh("name","<=",e+"\uF8FF"),pP(20));return eg(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=ul(this.firestore,"afroshops"),r=ng(t,eh("verified","==",!0),Ew("rating","desc"),pP(e));return eg(r,{idField:"id"})}incrementViews(e){return S(this,null,function*(){try{let t=tg(this.firestore,"afroshops",e);yield gP(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return S(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let o=l5(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",o),console.log("\u2B06\uFE0F Upload en cours...");let s=yield u5(o,e);console.log("\u2705 Upload termin\xE9, snapshot:",s),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield a5(s.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(ue(ll),ue(dl))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var fo=class n{businessTypeTranslations={restaurant:"Restaurant",epicerie:"Lebensmittelgesch\xE4ft",coiffeur:"Friseur",vetement:"Modegesch\xE4ft",services:"Dienstleistungen"};businessTypePlural={restaurant:"Restaurants",epicerie:"Lebensmittelgesch\xE4fte",coiffeur:"Friseure",vetement:"Modegesch\xE4fte",services:"Dienstleistungen"};businessTypeIcons={restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"};errorMessages={"auth/user-not-found":"Benutzer nicht gefunden","auth/wrong-password":"Falsches Passwort","auth/email-already-in-use":"E-Mail-Adresse wird bereits verwendet","auth/weak-password":"Passwort ist zu schwach","auth/invalid-email":"Ung\xFCltige E-Mail-Adresse","auth/popup-blocked":"Popup wurde blockiert. Bitte erlauben Sie Popups f\xFCr diese Website.","auth/popup-closed-by-user":"Anmeldung wurde abgebrochen","auth/cancelled-popup-request":"Anmeldung wurde abgebrochen","popup-blocked":"Popup wurde von Ihrem Browser blockiert","connection-error":"Verbindungsfehler. \xDCberpr\xFCfen Sie Ihre Internetverbindung.","general-error":"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut."};generalMessages={"login-success":"Erfolgreich angemeldet!","logout-success":"Erfolgreich abgemeldet!","registration-success":"Konto erfolgreich erstellt!","data-saved":"Daten erfolgreich gespeichert!","data-deleted":"Daten erfolgreich gel\xF6scht!",loading:"Wird geladen...",saving:"Wird gespeichert...","confirma-delete":"Sind Sie sicher, dass Sie dies l\xF6schen m\xF6chten?"};getBusinessTypeName(e,t=!1){return t?this.businessTypePlural[e]||e:this.businessTypeTranslations[e]||e}getBusinessTypeIcon(e){return this.businessTypeIcons[e]||"\u{1F3EA}"}getBusinessTypeDisplay(e,t=!1){let r=this.getBusinessTypeIcon(e),i=this.getBusinessTypeName(e,t);return`${r} ${i}`}getErrorMessage(e){return this.errorMessages[e]||this.errorMessages["general-error"]}getMessage(e){return this.generalMessages[e]||e}getAllBusinessTypes(){return Object.keys(this.businessTypeTranslations).map(e=>({value:e,label:this.businessTypeTranslations[e],icon:this.businessTypeIcons[e]}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jt=class n{constructor(e,t){this.auth=e;this.translationService=t;this.user$=VV(this.auth)}user$;register(e,t,r){return S(this,null,function*(){try{let i=yield UV(this.auth,e,t);return r&&i.user&&(yield HV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return S(this,null,function*(){try{let r=yield jV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return S(this,null,function*(){try{console.log("\u{1F680} Initialisation du provider Google...");let e=new DS;e.setCustomParameters({prompt:"select_account"}),console.log("\u{1F50D} V\xE9rification du support des popups..."),this.checkPopupSupport(),console.log("\u{1F510} Tentative de connexion avec popup...");let t=yield zV(this.auth,e);return console.log("\u2705 Connexion r\xE9ussie, utilisateur:",t.user.email),{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("\u274C Erreur d\xE9taill\xE9e:",{name:e.name,code:e.code,message:e.message,customData:e.customData}),e.code==="auth/popup-blocked"?console.log("\u{1F6AB} Popup bloqu\xE9e d\xE9tect\xE9e"):e.code==="auth/popup-closed-by-user"?console.log("\u{1F44B} Popup ferm\xE9e par l'utilisateur"):e.code==="auth/cancelled-popup-request"&&console.log("\u{1F504} Requ\xEAte popup annul\xE9e"),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return S(this,null,function*(){try{yield $V(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Ein Fehler ist aufgetreten";if(e.code)switch(e.code){case"auth/email-already-in-use":t=this.translationService.getErrorMessage("auth/email-already-in-use");break;case"auth/weak-password":t=this.translationService.getErrorMessage("auth/weak-password");break;case"auth/invalid-email":t=this.translationService.getErrorMessage("auth/invalid-email");break;case"auth/user-not-found":t=this.translationService.getErrorMessage("auth/user-not-found");break;case"auth/wrong-password":t=this.translationService.getErrorMessage("auth/wrong-password");break;case"auth/too-many-requests":t="Zu viele Versuche. Bitte versuchen Sie es sp\xE4ter erneut";break;case"auth/user-disabled":t="Dieses Konto wurde deaktiviert";break;case"auth/operation-not-allowed":t="Diese Operation ist nicht erlaubt";break;case"auth/popup-closed-by-user":t=this.translationService.getErrorMessage("auth/popup-closed-by-user");break;case"auth/popup-blocked":t=this.translationService.getErrorMessage("auth/popup-blocked");break;case"popup-blocked":t=this.translationService.getErrorMessage("popup-blocked");break;case"auth/cancelled-popup-request":t=this.translationService.getErrorMessage("auth/cancelled-popup-request");break;default:t=this.translationService.getErrorMessage("general-error")}return new Error(t)}static \u0275fac=function(t){return new(t||n)(ue(zc),ue(fo))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bw=class n{constructor(){}getCurrentPosition(){return new be(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new be(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let o={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(o)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function dae(n,e){if(n&1){let t=We();y(0,"button",37),fe("click",function(){oe(t);let i=K(2);return se(i.openSettings())}),v(1,"\u2699\uFE0F"),m()}}function hae(n,e){if(n&1&&(Yb(0),ce(1,dae,2,0,"button",36),Jb()),n&2){let t=e.ngIf,r=K();N(),z("ngIf",r.isAdminUser(t))}}function fae(n,e){if(n&1&&(y(0,"span",43),v(1),m()),n&2){let t=K(2);N(),Ve("um ",t.getSelectedCityName(),"")}}function pae(n,e){n&1&&(y(0,"span",44),v(1,"um deinen Standort"),m())}function gae(n,e){if(n&1&&(y(0,"div",38)(1,"div",39),v(2," \u{1F3AF} Suche in 50km Umkreis "),ce(3,fae,2,1,"span",40)(4,pae,2,0,"span",41),m(),y(5,"div",42),v(6),m()()),n&2){let t=K();N(3),z("ngIf",t.selectedCity),N(),z("ngIf",!t.selectedCity),N(2),xr(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function mae(n,e){if(n&1){let t=We();y(0,"div",45)(1,"app-map",46),fe("shopSelected",function(i){oe(t);let o=K();return se(o.viewAfroshopDetail(i))}),m()()}if(n&2){let t=K();N(),z("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function yae(n,e){if(n&1){let t=We();y(0,"button",64),fe("click",function(i){oe(t);let o=K().$implicit,s=K(2);return se(s.editAfroshop(i,o.id))}),v(1," \u270F\uFE0F "),m()}}function _ae(n,e){if(n&1&&(y(0,"div",65),v(1),m()),n&2){let t=K().$implicit,r=K(2);N(),Ve(" \u{1F3AF} ",r.getDistanceFromUser(t)," ")}}function vae(n,e){if(n&1){let t=We();y(0,"div",49)(1,"div",50),fe("click",function(){let i=oe(t).$implicit,o=K(2);return se(o.viewAfroshopDetail(i.id))}),y(2,"img",51),fe("error",function(i){let o=oe(t).$implicit,s=K(2);return se(s.onImageError(i,o.type))}),m(),y(3,"div",52),v(4),m(),ce(5,yae,2,0,"button",53),y(6,"div",54)(7,"span",55),v(8,"\u{1F4CD} Details ansehen"),m()()(),y(9,"div",56)(10,"h3",57),v(11),m(),y(12,"p",58),v(13),m(),y(14,"div",59)(15,"span",60),v(16),m(),y(17,"span",61),v(18),m(),y(19,"span",62),v(20),Ui(21,"titlecase"),m()(),ce(22,_ae,2,1,"div",63),m()()}if(n&2){let t=e.$implicit,r=K(2);N(2),z("src",t.image||r.getDefaultImage(t.type),Gs)("alt",t.name),N(),Qs(t.type),N(),Ve(" ",r.getBusinessTypeDisplay(t.type)," "),N(),z("ngIf",r.canEditAfroshop(t)),N(6),yt(t.name),N(2),Ve("\u{1F4CD} ",r.getLocationDisplay(t.address),""),N(3),Ve("\u2B50 ",t.rating,""),N(2),yt(r.getPriceLevel(t.priceLevel)),N(2),yt(Bi(21,12,t.type)),N(2),z("ngIf",r.userLocation)}}function wae(n,e){if(n&1&&(y(0,"div",47),ce(1,vae,23,14,"div",48),m()),n&2){let t=K();N(),z("ngForOf",t.filteredAfroshops)}}function Eae(n,e){if(n&1){let t=We();y(0,"div",66)(1,"div",67)(2,"div",68),v(3,"\u{1F50D}"),m(),y(4,"h3"),v(5,"Kein Gesch\xE4ft gefunden"),m(),y(6,"p"),v(7,"Kein Afroshop entspricht deinen Suchkriterien"),m(),y(8,"button",69),fe("click",function(){oe(t);let i=K();return se(i.clearSearch())}),v(9," Alle Gesch\xE4fte anzeigen "),m()()()}}var jw=class n{constructor(e,t,r,i,o,s){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.translationService=i;this.router=o;this.geolocationService=s;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;addAfroshop(){alert("Formulaire d'ajout Afroshop \xE0 impl\xE9menter.")}openSettings(){this.router.navigate(["/admin"])}cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){let e=prompt(`\u{1F4CD} Standort automatisch nicht m\xF6glich

Bitte gib deine Stadt ein f\xFCr personalisierte Ergebnisse:

Beispiele: Dortmund, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf...

Deine Stadt:`,localStorage.getItem("afroconnect-user-city")||"Dortmund");if(e&&e.trim()){let t=e.toLowerCase().trim();localStorage.setItem("afroconnect-user-city",t),this.cityCoordinates[t]?(this.userLocation=this.cityCoordinates[t],this.selectedCity=t,alert(`\u2705 Standort auf ${this.formatCityName(t)} gesetzt!

\u{1F3AF} Afroshops werden nach Entfernung zu ${this.formatCityName(t)} sortiert.
\u{1F4CF} Du siehst jetzt relevante Gesch\xE4fte in deiner N\xE4he.`)):(this.userLocation=this.cityCoordinates.dortmund||this.cityCoordinates.berlin,this.selectedCity="dortmund",alert(`\u{1F4CD} Stadt "${e}" nicht erkannt

Dortmund wurde als Standard-Standort gew\xE4hlt.

Du kannst jederzeit:
\u2022 Eine andere Stadt aus der Liste w\xE4hlen
\u2022 Eine andere Stadt eingeben
\u2022 GPS nochmal versuchen`))}else this.userLocation=this.cityCoordinates.dortmund||this.cityCoordinates.berlin,this.selectedCity="dortmund",alert(`\u{1F4CD} Standard-Standort: Dortmund

Du kannst jederzeit:
\u2022 Eine Stadt aus der Liste w\xE4hlen
\u2022 Eine Stadt eingeben
\u2022 GPS erneut aktivieren`);this.applyFilters(),this.sortAfroshopsByDistance()}formatCityName(e){return{berlin:"Berlin",hamburg:"Hamburg",m\u00FCnchen:"M\xFCnchen",k\u00F6ln:"K\xF6ln",frankfurt:"Frankfurt am Main",stuttgart:"Stuttgart",d\u00FCsseldorf:"D\xFCsseldorf",dortmund:"Dortmund",essen:"Essen",leipzig:"Leipzig"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}isAdminUser(e){return!e||!e.email?!1:["youssoufdiamaldiallo@gmail.com","admin@afroconnect.de","contact@afroconnect.de"].includes(e.email)}goToAdmin(){this.router.navigate(["/admin"])}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}getBusinessTypeDisplay(e){return this.translationService.getBusinessTypeDisplay(e)}getBusinessTypeIcon(e){return this.translationService.getBusinessTypeIcon(e)}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return S(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],o=parseFloat(i.lat),s=parseFloat(i.lon);if(!isNaN(o)&&!isNaN(s)){this.userLocation={lat:o,lng:s},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${o.toFixed(4)}, ${s.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return he($({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=he($({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[o,s]of Object.entries(r))if(t.includes(o))return s;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[o,s]of Object.entries(i))if(e.includes(o))return s;return null}static \u0275fac=function(t){return new(t||n)(te(uh),te(ir),te(Jt),te(fo),te(It),te(Bw))};static \u0275cmp=wt({type:n,selectors:[["app-gallery"]],decls:57,vars:12,consts:[[1,"intro-section"],[1,"intro-message"],[1,"intro-actions"],[1,"add-shop-btn",3,"click"],[4,"ngIf"],[1,"controls-section"],[1,"controls-main"],[1,"controls-row"],[1,"gps-group"],["title","GPS aktivieren und Standort verwenden",1,"location-btn","gps-btn-desktop",3,"click"],["class","radius-info",4,"ngIf"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"city-search-group"],[1,"unified-input-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt...",1,"unified-input","city-input-compact",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn","search-btn",3,"click","disabled"],[1,"quick-cities-group"],[1,"unified-select","city-select-compact",3,"ngModelChange","ngModel"],["value",""],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn","confirm-btn",3,"click","disabled"],[1,"location-hint","mobile-only"],[1,"gallery-section"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],["class","settings-btn",3,"click",4,"ngIf"],[1,"settings-btn",3,"click"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(y(0,"section",0)(1,"div",1),v(2),m(),y(3,"div",2)(4,"button",3),fe("click",function(){return r.goToAddAfroshop()}),v(5,"\u2795 Afroshop hinzuf\xFCgen"),m(),ce(6,hae,2,1,"ng-container",4),Ui(7,"async"),m()(),y(8,"section",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"button",9),fe("click",function(){return r.useCurrentLocation()}),v(13," \u{1F4E1} GPS aktivieren "),m()(),ce(14,gae,7,4,"div",10),m(),y(15,"div",7)(16,"div",11)(17,"label",12),v(18,"\u{1F4CD} Deine Stadt:"),m(),y(19,"div",13)(20,"div",14)(21,"input",15),Se("ngModelChange",function(o){return De(r.customCityName,o)||(r.customCityName=o),o}),fe("keyup.enter",function(){return r.searchCity()}),m(),y(22,"button",16),fe("click",function(){return r.searchCity()}),v(23," \u{1F50D} Suchen "),m()()(),y(24,"div",17)(25,"div",14)(26,"select",18),Se("ngModelChange",function(o){return De(r.selectedCity,o)||(r.selectedCity=o),o}),y(27,"option",19),v(28,"Beliebte St\xE4dte..."),m(),y(29,"option",20),v(30,"Berlin"),m(),y(31,"option",21),v(32,"Hamburg"),m(),y(33,"option",22),v(34,"M\xFCnchen"),m(),y(35,"option",23),v(36,"K\xF6ln"),m(),y(37,"option",24),v(38,"Frankfurt am Main"),m(),y(39,"option",25),v(40,"Stuttgart"),m(),y(41,"option",26),v(42,"D\xFCsseldorf"),m(),y(43,"option",27),v(44,"Dortmund"),m(),y(45,"option",28),v(46,"Essen"),m(),y(47,"option",29),v(48,"Leipzig"),m()(),y(49,"button",30),fe("click",function(){return r.onCityChange()}),v(50," \u2713 Best\xE4tigen "),m()()()()(),y(51,"small",31),v(52," \u{1F3AF} Findet automatisch Afroshops in deiner N\xE4he "),m()()(),y(53,"section",32),ce(54,mae,2,2,"div",33)(55,wae,2,1,"div",34)(56,Eae,10,0,"div",35),m()),t&2&&(N(2),Ve(" \u{1F30D} Entdecke ",r.allAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he "),N(4),z("ngIf",Bi(7,10,r.user$)),N(8),z("ngIf",r.userLocation||r.selectedCity),N(7),Te("ngModel",r.customCityName),N(),z("disabled",!r.customCityName||!r.customCityName.trim()),N(4),Te("ngModel",r.selectedCity),N(23),z("disabled",!r.selectedCity),N(5),z("ngIf",r.showMap&&r.filteredAfroshops.length>0),N(),z("ngIf",!r.showMap&&r.filteredAfroshops.length>0),N(),z("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[zt,tr,un,df,Ic,uo,Nw,Lw,Br,lh,lo,yi,Vw],styles:["@media (max-width: 900px){.gallery-grid[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;align-items:center!important;justify-content:flex-start;width:100%;padding:0;margin:0;box-sizing:border-box}}.shop-card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:100%;max-width:420px;box-sizing:border-box}@media (max-width: 900px){.shop-card[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;width:calc(100% - 1rem);max-width:98vw}}@media (max-width: 600px){.shop-card[_ngcontent-%COMP%]{margin-left:.2rem;margin-right:.2rem;width:calc(100% - .4rem);max-width:99vw}}@media (max-width: 900px){.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{width:70%;min-width:120px;max-width:220px;margin-left:auto;margin-right:auto;display:block}}@media (max-width: 600px){.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{width:95%;min-width:90px;max-width:180px;font-size:.97rem;margin-left:auto;margin-right:auto;display:block}}@media (max-width: 900px){.location-btn[_ngcontent-%COMP%]{width:70%;min-width:120px;max-width:220px;padding-left:.5rem;padding-right:.5rem}}@media (max-width: 600px){.location-btn[_ngcontent-%COMP%]{width:95%;min-width:90px;max-width:180px;font-size:.97rem;padding-left:.3rem;padding-right:.3rem}}@media (max-width: 900px){.controls-section[_ngcontent-%COMP%], .controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%], .city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;align-items:center!important;width:100%!important;gap:.4rem}}@media (max-width: 900px){.intro-actions[_ngcontent-%COMP%], .controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;width:100%;align-items:center}.gps-group[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%], .city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem;align-items:center;display:flex;flex-direction:column;gap:.3rem}.unified-input-group[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:.3rem;align-items:center}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.2rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.2rem;box-shadow:0 1px 4px #00000014}.radius-info[_ngcontent-%COMP%]{text-align:center;font-size:.98rem;padding:.4rem .2rem;border-radius:7px}.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.7rem .1rem;border-radius:8px;box-shadow:0 1px 4px #00000014}}@media (max-width: 900px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.8rem .2rem;border-radius:10px;box-shadow:0 2px 8px #00000012}.intro-message[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.7rem}.controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:.7rem;width:100%;align-items:stretch}.location-container[_ngcontent-%COMP%], .radius-info[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:0 .2rem;box-sizing:border-box}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:1rem;margin-bottom:.4rem;box-shadow:0 1px 4px #00000014}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:.98rem}.gallery-section[_ngcontent-%COMP%]{padding:.5rem .1rem}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:1rem}.shop-card[_ngcontent-%COMP%]{min-width:0;width:100%;box-shadow:0 1px 6px #00000014;border-radius:10px}.card-info[_ngcontent-%COMP%]{font-size:.98rem;padding:.7rem .5rem}}@media (max-width: 600px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.4rem .05rem;border-radius:7px;box-shadow:0 1px 4px #0000000f}.intro-message[_ngcontent-%COMP%]{font-size:.98rem;margin-bottom:.5rem}.controls-section[_ngcontent-%COMP%]{gap:.5rem}.radius-info[_ngcontent-%COMP%]{font-size:.93rem;padding:.3rem .2rem;border-radius:6px}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{font-size:.95rem;min-width:0;padding:.4rem .5rem;margin-bottom:.3rem}.gallery-section[_ngcontent-%COMP%]{padding:.2rem .01rem}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:.7rem}.shop-card[_ngcontent-%COMP%]{border-radius:7px;box-shadow:0 1px 3px #00000012}.card-info[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem .2rem}}@media (max-width: 900px){.controls-main[_ngcontent-%COMP%], .controls-row[_ngcontent-%COMP%]{flex-direction:column;gap:1.2rem;width:100%;align-items:center}.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:1.2rem .5rem}.intro-message[_ngcontent-%COMP%]{font-size:1.1rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{width:100%;min-width:180px;font-size:1rem;margin-bottom:.5rem}.location-container[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:0 .5rem}.unified-input.city-input-compact[_ngcontent-%COMP%], .unified-select.city-select-compact[_ngcontent-%COMP%]{width:100%;min-width:0}}@media (max-width: 600px){.intro-section[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]{padding:.7rem .2rem;border-radius:10px}.intro-message[_ngcontent-%COMP%]{font-size:1rem}.controls-section[_ngcontent-%COMP%]{gap:1rem}.radius-info[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%], .location-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{font-size:.98rem;min-width:120px;padding:.5rem .7rem}}.controls-main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}.controls-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:2rem;width:100%;margin-bottom:1.2rem}.location-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.location-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:.6rem 1.2rem;border-radius:8px;background:#e0f7fa;color:#00796b;border:none;box-shadow:0 1px 4px #00000012;cursor:pointer;transition:background .2s,color .2s}.location-btn[_ngcontent-%COMP%]:hover{background:#b2ebf2;color:#004d40}.radius-info[_ngcontent-%COMP%]{background:#f3e5f5;border-radius:8px;padding:.7rem 1rem;margin-bottom:.5rem;text-align:center;color:#6a1b9a;font-weight:500;box-shadow:0 1px 4px #0000000a}.radius-indicator[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.3rem}.results-count[_ngcontent-%COMP%]{font-size:.95rem;color:#333}.location-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto;display:flex;flex-direction:column;gap:1rem}.unified-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#222}.city-search-group[_ngcontent-%COMP%], .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.unified-input.city-input-compact[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border-radius:8px;border:1px solid #e0e0e0;font-size:1rem}.search-btn[_ngcontent-%COMP%]{background:#e0f7fa;color:#00796b;border:none;border-radius:8px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s,color .2s}.search-btn[_ngcontent-%COMP%]:hover{background:#b2ebf2;color:#004d40}.quick-cities-group[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;gap:.5rem}.unified-select.city-select-compact[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;border:1px solid #e0e0e0;font-size:1rem}.confirm-btn[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a;border:none;border-radius:8px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s,color .2s}.confirm-btn[_ngcontent-%COMP%]:hover{background:#ce93d8;color:#4a148c}.location-hint[_ngcontent-%COMP%]{font-size:.95rem;color:#888;margin-top:.5rem;text-align:center}.intro-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1rem 1.5rem;background:#f8fafc;border-radius:16px;box-shadow:0 2px 8px #0000000a;margin-bottom:2rem}.intro-message[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#222;margin-bottom:1.2rem;text-align:center;letter-spacing:.5px}.intro-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.add-shop-btn[_ngcontent-%COMP%], .settings-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:.6rem 1.2rem;border-radius:8px;border:none;background:#fff;color:#222;box-shadow:0 1px 4px #00000012;cursor:pointer;transition:background .2s,box-shadow .2s}.add-shop-btn[_ngcontent-%COMP%]:hover{background:#e0f7fa;color:#00796b}.settings-btn[_ngcontent-%COMP%]:hover{background:#f3e5f5;color:#6a1b9a}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;box-shadow:0 4px 16px #00000026;gap:48px;align-items:start;padding:32px 40px;background:linear-gradient(135deg,#fff,#f4f7fa);border-radius:18px;box-shadow:0 8px 32px #00000014;margin-bottom:40px}.controls-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;align-items:flex-end;justify-content:flex-start}.controls-right[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;align-items:flex-end;justify-content:flex-end}.filter-container.unified-control-group[_ngcontent-%COMP%], .gps-group-above-city[_ngcontent-%COMP%]{margin:0;max-width:220px;width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{min-width:160px;max-width:220px;padding:12px 24px;margin:0;border-radius:10px;font-size:1rem;font-weight:600;box-shadow:0 4px 15px #28a7454d;display:flex;align-items:center;justify-content:center}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{margin:0;max-width:220px;width:100%}}.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:flex-start;max-width:100%;padding-left:0}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:280px;min-width:180px;margin:0}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.controls-desktop-layout[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:24px;margin-bottom:32px;box-shadow:0 8px 32px #00000014}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(250px,300px) 1fr;gap:40px;align-items:start}.filter-container[_ngcontent-%COMP%]{margin:0;text-align:left}.filter-container[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{padding-left:0}.location-container[_ngcontent-%COMP%]{margin:0}.desktop-city-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 2fr 1fr;gap:20px;align-items:end;width:100%}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.city-input-compact[_ngcontent-%COMP%]{min-width:200px;flex:1;max-width:300px}.city-select-compact[_ngcontent-%COMP%]{min-width:180px;flex:1;max-width:250px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:90px;flex-shrink:0}.gps-btn-desktop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #28a7454d;white-space:nowrap;width:100%;min-height:48px}.gps-btn-desktop[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #28a74566}.mobile-only[_ngcontent-%COMP%], .quick-cities[_ngcontent-%COMP%]   .unified-label[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1023px){.controls-desktop-layout[_ngcontent-%COMP%]{padding:20px}.desktop-city-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.city-input-compact[_ngcontent-%COMP%], .city-select-compact[_ngcontent-%COMP%]{flex:1}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px;flex-shrink:0}.gps-group[_ngcontent-%COMP%]{width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{width:100%;padding:14px}}@media (max-width: 767px){.controls-desktop-layout[_ngcontent-%COMP%]{background:none;border:none;padding:0;box-shadow:none}.desktop-city-controls[_ngcontent-%COMP%]{display:block}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{margin-bottom:16px}.gps-btn-desktop[_ngcontent-%COMP%]{background:var(--primary-color);width:100%;margin-top:0;padding:14px}.mobile-only[_ngcontent-%COMP%]{display:block}}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.admin-link-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);color:#fff;border:none;padding:8px 12px;border-radius:50%;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000001a;margin-left:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.admin-link-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7f8c8d,#95a5a6);transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #00000026}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}@media (min-width: 1400px){.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:320px;min-width:200px}.city-input-compact[_ngcontent-%COMP%]{max-width:350px;min-width:220px}.city-select-compact[_ngcontent-%COMP%]{max-width:280px;min-width:200px}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px}}"]})};function Iae(n,e){if(n&1){let t=We();y(0,"button",26),fe("click",function(){oe(t);let i=K(2);return se(i.editAfroshop())}),v(1," \u270F\uFE0F Bearbeiten "),m()}}function bae(n,e){if(n&1){let t=We();y(0,"div")(1,"img",27),fe("error",function(i){oe(t);let o=K(2);return se(o.onImageError(i))}),m()()}if(n&2){let t=K(2);N(),z("src",t.afroshop.image,Gs)("alt",t.afroshop.name)}}function Cae(n,e){if(n&1&&(y(0,"div",28)(1,"div",29),v(2,"\u{1F4F7}"),m(),y(3,"p"),v(4,"Kein Bild verf\xFCgbar"),m(),y(5,"small"),v(6),m()()),n&2){let t=K(2);N(6),yt(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function Tae(n,e){if(n&1&&(y(0,"div",30),v(1),m()),n&2){let t=K(2);N(),Ve(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function Sae(n,e){if(n&1&&(y(0,"div",31)(1,"span",32),v(2),m(),y(3,"span",33),v(4),m()()),n&2){let t=e.$implicit;wc("closed",!t.isOpen)("open",t.isOpen),N(2),Ve("",t.day,":"),N(),wc("closed-text",!t.isOpen),N(),Ve(" ",t.hours," ")}}function Aae(n,e){if(n&1){let t=We();y(0,"div",3)(1,"div",4)(2,"button",5),fe("click",function(){oe(t);let i=K();return se(i.goBack())}),v(3," \u2190 Zur\xFCck zur \xDCbersicht "),m(),ce(4,Iae,2,0,"button",6),m(),y(5,"div",7)(6,"div",8),ce(7,bae,2,2,"div",9)(8,Cae,7,1,"ng-template",null,0,AN),y(10,"div",10),v(11),Ui(12,"titlecase"),m()(),y(13,"div",11)(14,"h1"),v(15),m(),y(16,"div",12)(17,"div",13),v(18),m(),ce(19,Tae,2,1,"div",14),m(),y(20,"div",15)(21,"div",16)(22,"strong"),v(23,"\u{1F4CD} Adresse:"),m(),y(24,"p"),v(25),m()(),y(26,"div",16)(27,"strong"),v(28,"\u{1F4DE} Telefon:"),m(),y(29,"p")(30,"a",17),v(31),m()()(),y(32,"div",16)(33,"strong"),v(34,"\u{1F552} \xD6ffnungszeiten:"),m(),y(35,"div",18),ce(36,Sae,5,8,"div",19),m()()(),y(37,"div",20)(38,"h3"),v(39,"\xDCber uns"),m(),y(40,"p"),v(41),m()(),y(42,"div",21)(43,"button",22),fe("click",function(){oe(t);let i=K();return se(i.callPhone(i.afroshop.phone))}),v(44," \u{1F4DE} Anrufen "),m(),y(45,"button",23),fe("click",function(){oe(t);let i=K();return se(i.openInMaps())}),v(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),m(),y(47,"button",24),fe("click",function(){oe(t);let i=K();return se(i.getDirections())}),v(48," \u{1F9ED} Route "),m(),y(49,"button",25),fe("click",function(){oe(t);let i=K();return se(i.goBack())}),v(50," \u2190 Zur\xFCck "),m()()()()()}if(n&2){let t=cf(9),r=K();N(4),z("ngIf",r.canEdit()),N(3),z("ngIf",r.afroshop.image)("ngIfElse",t),N(3),Qs(r.afroshop.type),N(),xr(" ",r.getTypeIcon(r.afroshop.type)," ",Bi(12,17,r.afroshop.type)," "),N(4),yt(r.afroshop.name),N(3),xr(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),N(),z("ngIf",r.afroshop.cuisine),N(6),yt(r.afroshop.address),N(5),Zb("href","tel:",r.afroshop.phone,"",Gs),N(),Ve(" ",r.afroshop.phone," "),N(5),z("ngForOf",r.formattedHours),N(5),yt(r.afroshop.description)}}function Dae(n,e){if(n&1){let t=We();y(0,"div",34)(1,"h2"),v(2,"\u274C Gesch\xE4ft nicht gefunden"),m(),y(3,"p"),v(4,"Das gesuchte Gesch\xE4ft existiert nicht."),m(),y(5,"button",5),fe("click",function(){oe(t);let i=K();return se(i.goBack())}),v(6," \u2190 Zur\xFCck zur \xDCbersicht "),m()()}}var zw=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=o}afroshop;shopId="";formattedHours=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop),this.parseOpeningHours(this.afroshop.hours||"")):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getDirections(){if(this.afroshop){let e=`https://www.google.com/maps/dir/?api=1&destination=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}parseOpeningHours(e){if(this.formattedHours=[],!e)return;let t={Mo:"Montag",Di:"Dienstag",Mi:"Mittwoch",Do:"Donnerstag",Fr:"Freitag",Sa:"Samstag",So:"Sonntag"},r=e.split(",").map(s=>s.trim()),i=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],o={};i.forEach(s=>{o[s]={isOpen:!1,hours:"Geschlossen"}}),r.forEach(s=>{let a=s.indexOf(":");if(a===-1)return;let c=s.substring(0,a).trim(),u=s.substring(a+1).trim();if(c.includes("-")){let[h,g]=c.split("-").map(k=>k.trim()),I=t[h],T=t[g];if(I&&T){let k=i.indexOf(I),L=i.indexOf(T);if(k!==-1&&L!==-1)if(k<=L)for(let O=k;O<=L;O++)o[i[O]]={isOpen:!0,hours:u};else{for(let O=k;O<i.length;O++)o[i[O]]={isOpen:!0,hours:u};for(let O=0;O<=L;O++)o[i[O]]={isOpen:!0,hours:u}}}}else{let h=t[c];h&&(o[h]={isOpen:!0,hours:u})}}),i.forEach(s=>{this.formattedHours.push({day:s,hours:o[s].hours,isOpen:o[s].isOpen})})}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(te(kn),te(It),te(uh),te(ir),te(Jt))};static \u0275cmp=wt({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"opening-hours-display"],["class","day-row",3,"closed","open",4,"ngFor","ngForOf"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"day-row"],[1,"day-name"],[1,"day-hours"],[1,"error-container"]],template:function(t,r){t&1&&ce(0,Aae,51,19,"div",1)(1,Dae,7,0,"div",2),t&2&&(z("ngIf",r.afroshop),N(),z("ngIf",!r.afroshop))},dependencies:[zt,tr,un,Ic],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md)}.image-section[_ngcontent-%COMP%]{order:1}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.contact-item[_ngcontent-%COMP%]{text-align:left}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}.opening-hours-display[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);background:var(--surface-color);border-radius:var(--border-radius);padding:var(--spacing-md);border:1px solid var(--border-color)}.day-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-xs) 0;border-bottom:1px solid var(--border-light);transition:all var(--transition-normal)}.day-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.day-row.open[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf500d,#4caf5005)}.day-row.closed[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f443360d,#f4433605)}.day-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);min-width:100px;font-size:.95rem}.day-hours[_ngcontent-%COMP%]{color:#4caf50;font-weight:500;font-size:.95rem;text-align:right}.day-hours.closed-text[_ngcontent-%COMP%]{color:#f44336;font-style:italic}@media (max-width: 768px){.opening-hours-display[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.day-row[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.day-name[_ngcontent-%COMP%]{min-width:80px;font-size:.9rem}.day-hours[_ngcontent-%COMP%]{font-size:.9rem}}"]})};var hh=class n{constructor(e){this.http=e}GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY";GEOCODING_URL="https://maps.googleapis.com/maps/api/geocode/json";CITY_COORDINATES={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},munich:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},cologne:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767},nuremberg:{lat:49.4521,lng:11.0767},mannheim:{lat:49.4875,lng:8.466},karlsruhe:{lat:49.0069,lng:8.4037},wiesbaden:{lat:50.0782,lng:8.2398},m\u00FCnster:{lat:51.9607,lng:7.6261},augsburg:{lat:48.3705,lng:10.8978},m\u00F6nchengladbach:{lat:51.1805,lng:6.4428},braunschweig:{lat:52.2689,lng:10.5268},kiel:{lat:54.3233,lng:10.1228},aachen:{lat:50.7753,lng:6.0839},halle:{lat:51.4969,lng:11.9695},magdeburg:{lat:52.1205,lng:11.6276},freiburg:{lat:47.999,lng:7.8421},krefeld:{lat:51.3388,lng:6.5853},mainz:{lat:49.9929,lng:8.2473},l\u00FCbeck:{lat:53.8655,lng:10.6866},erfurt:{lat:50.9848,lng:11.0299},rostock:{lat:54.0887,lng:12.1446},kassel:{lat:51.3127,lng:9.4797},hagen:{lat:51.367,lng:7.4637},potsdam:{lat:52.3906,lng:13.0645},saarbr\u00FCcken:{lat:49.2401,lng:6.9969},hamm:{lat:51.68,lng:7.8137},soest:{lat:51.5671,lng:8.1065},lippstadt:{lat:51.6738,lng:8.3435},paderborn:{lat:51.7189,lng:8.7545},g\u00FCtersloh:{lat:51.9067,lng:8.3858},bielefeld:{lat:52.0302,lng:8.5325},detmold:{lat:51.9386,lng:8.8795},minden:{lat:52.2897,lng:8.9157},herford:{lat:52.1166,lng:8.671}};geocodeAddress(e){if(!e||e.trim().length===0)return pe(null);let t=e.trim();return console.log(`\u{1F5FA}\uFE0F G\xE9ocodage de l'adresse: "${t}"`),this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"?this.geocodeWithGoogleMaps(t).pipe(ur(r=>(console.warn("\u274C \xC9chec du g\xE9ocodage Google Maps, utilisation du fallback:",r),pe(this.geocodeWithFallback(t))))):(console.log("\u{1F527} Utilisation du syst\xE8me de g\xE9ocodage fallback (coordonn\xE9es pr\xE9d\xE9finies)"),pe(this.geocodeWithFallback(t)))}geocodeWithGoogleMaps(e){let t={address:e,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:t}).pipe(me(r=>{if(r.status==="OK"&&r.results&&r.results.length>0){let i=r.results[0],o=i.geometry.location;return console.log("\u2705 G\xE9ocodage Google Maps r\xE9ussi:",{address:i.formatted_address,coordinates:o}),{lat:o.lat,lng:o.lng,formatted_address:i.formatted_address,place_id:i.place_id,accuracy:i.geometry.location_type}}else return console.warn("\u274C Aucun r\xE9sultat trouv\xE9 pour:",e),null}),ur(r=>{throw console.error("\u274C Erreur API Google Maps:",r),r}))}geocodeWithFallback(e){let t=e.toLowerCase(),r=Object.entries(this.CITY_COORDINATES).sort((o,s)=>s[0].length-o[0].length);for(let[o,s]of r)if(new RegExp(`\\b${o}\\b`,"i").test(t))return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour ${o}:`,s),{lat:s.lat,lng:s.lng,formatted_address:`${o.charAt(0).toUpperCase()+o.slice(1)}, Deutschland`,accuracy:"APPROXIMATE"};let i=e.match(/\b(\d{5})\b/);if(i){let o=i[1],s=this.getCoordinatesFromPostalCode(o);if(s)return console.log(`\u2705 Coordonn\xE9es trouv\xE9es pour code postal ${o}:`,s),{lat:s.lat,lng:s.lng,formatted_address:`${o}, Deutschland`,accuracy:"APPROXIMATE"}}return console.warn("\u274C Impossible de g\xE9ocoder l'adresse:",e),null}getCoordinatesFromPostalCode(e){let t=parseInt(e);return t>=1e4&&t<=19999?{lat:52.52,lng:13.405}:t>=2e4&&t<=29999?{lat:53.5511,lng:9.9937}:t>=3e4&&t<=39999?{lat:52.3759,lng:9.732}:t>=4e4&&t<=49999?{lat:51.2277,lng:6.7735}:t>=5e4&&t<=59999?{lat:50.9375,lng:6.9603}:t>=6e4&&t<=69999?{lat:50.1109,lng:8.6821}:t>=7e4&&t<=79999?{lat:48.7758,lng:9.1829}:t>=8e4&&t<=89999?{lat:48.1351,lng:11.582}:t>=9e4&&t<=99999?{lat:49.4521,lng:11.0767}:null}reverseGeocode(e,t){if(this.GOOGLE_MAPS_API_KEY&&this.GOOGLE_MAPS_API_KEY!=="YOUR_GOOGLE_MAPS_API_KEY"){let r={latlng:`${e},${t}`,key:this.GOOGLE_MAPS_API_KEY,language:"de",region:"de"};return this.http.get(this.GEOCODING_URL,{params:r}).pipe(me(i=>{if(i.status==="OK"&&i.results&&i.results.length>0){let o=i.results[0];return{address:o.formatted_address,components:this.parseAddressComponents(o.address_components)}}return null}),ur(i=>(console.error("\u274C Erreur g\xE9ocodage inverse:",i),pe(null))))}else return pe({address:`${e.toFixed(4)}, ${t.toFixed(4)}`,components:{}})}parseAddressComponents(e){let t={};return e.forEach(r=>{let i=r.types;i.includes("street_number")?t.street_number=r.long_name:i.includes("route")?t.route=r.long_name:i.includes("locality")?t.locality=r.long_name:i.includes("postal_code")?t.postal_code=r.long_name:i.includes("country")&&(t.country=r.long_name)}),t}isValidCoordinates(e,t){return e!==0&&t!==0&&e>=-90&&e<=90&&t>=-180&&t<=180}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}deg2rad(e){return e*(Math.PI/180)}static \u0275fac=function(t){return new(t||n)(ue(f_))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Mae(n,e){n&1&&(y(0,"a",71),v(1," \u2190 Admin "),m())}function Pae(n,e){n&1&&(y(0,"span"),v(1,"\u{1F4E5} Importieren"),m())}function xae(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 L\xE4dt..."),m())}function Rae(n,e){if(n&1&&(y(0,"div",72),v(1),m()),n&2){let t=K();N(),Ve(" \u2705 ",t.successMessage," ")}}function kae(n,e){if(n&1&&(y(0,"div",73),v(1),m()),n&2){let t=K();N(),Ve(" \u274C ",t.errorMessage," ")}}function Oae(n,e){if(n&1&&(y(0,"option",74),v(1),m()),n&2){let t=e.$implicit;z("value",t.value),N(),xr(" ",t.icon," ",t.label," ")}}function Nae(n,e){n&1&&(y(0,"span"),v(1,"\u{1F4C1} Bild ausw\xE4hlen"),m())}function Lae(n,e){n&1&&(y(0,"span"),v(1,"\u{1F504} Anderes Bild w\xE4hlen"),m())}function Fae(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Wird bearbeitet..."),m())}function Vae(n,e){n&1&&(y(0,"div",75)(1,"div",76),Ye(2,"div",77),m(),y(3,"small"),v(4,"Bild wird komprimiert und vorbereitet..."),m()())}function Uae(n,e){if(n&1){let t=We();y(0,"div",78),Ye(1,"img",79),y(2,"button",80),fe("click",function(){oe(t);let i=K(),o=cf(47);return i.imagePreview=null,i.selectedFile=null,se(o.value="")}),v(3," \u2715 "),m()()}if(n&2){let t=K();N(),z("src",t.imagePreview,Gs)}}function Bae(n,e){n&1&&(y(0,"div",81),v(1," \u{1F5FA}\uFE0F Adresse wird georeferenziert... "),m())}function jae(n,e){if(n&1&&(y(0,"div",82),v(1),m()),n&2){let t=K();N(),xr(" \u2705 Standort gefunden: ",t.afroshop.coordinates.lat.toFixed(4),", ",t.afroshop.coordinates.lng.toFixed(4)," ")}}function zae(n,e){if(n&1){let t=We();y(0,"div",10)(1,"label",83),v(2,"K\xFCche"),m(),y(3,"input",84),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.afroshop.cuisine,i)||(o.afroshop.cuisine=i),se(i)}),m(),y(4,"small",31),v(5,"Spezifizieren Sie die Art der afrikanischen K\xFCche"),m()()}if(n&2){let t=K();N(3),Te("ngModel",t.afroshop.cuisine)}}function $ae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",86),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.monday.open,i)||(o.openingHours.monday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",95),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.monday.close,i)||(o.openingHours.monday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.monday.open),N(17),Te("ngModel",t.openingHours.monday.close)}}function Hae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",104),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.tuesday.open,i)||(o.openingHours.tuesday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",105),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.tuesday.close,i)||(o.openingHours.tuesday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.tuesday.open),N(17),Te("ngModel",t.openingHours.tuesday.close)}}function qae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",106),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.wednesday.open,i)||(o.openingHours.wednesday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",107),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.wednesday.close,i)||(o.openingHours.wednesday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.wednesday.open),N(17),Te("ngModel",t.openingHours.wednesday.close)}}function Gae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",108),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.thursday.open,i)||(o.openingHours.thursday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",109),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.thursday.close,i)||(o.openingHours.thursday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.thursday.open),N(17),Te("ngModel",t.openingHours.thursday.close)}}function Wae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",110),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.friday.open,i)||(o.openingHours.friday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",111),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.friday.close,i)||(o.openingHours.friday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.friday.open),N(17),Te("ngModel",t.openingHours.friday.close)}}function Kae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",112),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.saturday.open,i)||(o.openingHours.saturday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",113),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.saturday.close,i)||(o.openingHours.saturday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.saturday.open),N(17),Te("ngModel",t.openingHours.saturday.close)}}function Qae(n,e){if(n&1){let t=We();y(0,"div",85)(1,"select",114),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.sunday.open,i)||(o.openingHours.sunday.open=i),se(i)}),y(2,"option",87),v(3,"06:00"),m(),y(4,"option",88),v(5,"07:00"),m(),y(6,"option",89),v(7,"08:00"),m(),y(8,"option",90),v(9,"09:00"),m(),y(10,"option",91),v(11,"10:00"),m(),y(12,"option",92),v(13,"11:00"),m(),y(14,"option",93),v(15,"12:00"),m()(),y(16,"span",94),v(17,"bis"),m(),y(18,"select",115),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.openingHours.sunday.close,i)||(o.openingHours.sunday.close=i),se(i)}),y(19,"option",96),v(20,"16:00"),m(),y(21,"option",97),v(22,"17:00"),m(),y(23,"option",98),v(24,"18:00"),m(),y(25,"option",99),v(26,"19:00"),m(),y(27,"option",100),v(28,"20:00"),m(),y(29,"option",101),v(30,"21:00"),m(),y(31,"option",102),v(32,"22:00"),m(),y(33,"option",103),v(34,"23:00"),m()()()}if(n&2){let t=K();N(),Te("ngModel",t.openingHours.sunday.open),N(17),Te("ngModel",t.openingHours.sunday.close)}}function Yae(n,e){n&1&&(y(0,"span"),v(1,"\u274C Abbrechen"),m())}function Jae(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Warten..."),m())}function Zae(n,e){if(n&1&&(y(0,"span"),v(1),m()),n&2){let t=K();N(),yt(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function Xae(n,e){n&1&&(y(0,"span"),v(1,"\u{1F4E4} Bild wird hochgeladen..."),m())}function ece(n,e){if(n&1&&(y(0,"span"),v(1),m()),n&2){let t=K();N(),yt(t.isEditMode?"\u{1F4BE} \xC4nderungen speichern":"\u{1F3EA} Afroshop hinzuf\xFCgen")}}var yg=class n{constructor(e,t,r,i,o,s){this.firebaseService=e;this.authService=t;this.translationService=r;this.geocodingService=i;this.router=o;this.route=s}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:0,hours:"",website:""};openingHours={monday:{isOpen:!1,open:"09:00",close:"18:00"},tuesday:{isOpen:!1,open:"09:00",close:"18:00"},wednesday:{isOpen:!1,open:"09:00",close:"18:00"},thursday:{isOpen:!1,open:"09:00",close:"18:00"},friday:{isOpen:!1,open:"09:00",close:"18:00"},saturday:{isOpen:!1,open:"10:00",close:"16:00"},sunday:{isOpen:!1,open:"12:00",close:"16:00"}};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;isGeocoding=!1;isAdmin=!1;successMessage="";errorMessage="";ngOnInit(){this.authService.user$.subscribe(t=>{this.isAdmin=t?.email==="youssoufdiamaldiallo@gmail.com"});let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return S(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null,this.parseOpeningHoursFromString(t.hours||"")):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return S(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=o=>{this.imagePreview=o.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return S(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(s=>{e.toBlob(a=>s(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let o=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",o),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=o=>{let s=new Image;s.src=o.target.result,s.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),u=1200,h=1200,g=s.width,I=s.height;g>I?g>u&&(I*=u/g,g=u):I>h&&(g*=h/I,I=h),a.width=g,a.height=I,c?.drawImage(s,0,0,g,I),a.toBlob(T=>{if(T){let k=new File([T],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},s.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return S(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return S(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage()),(!this.afroshop.priceLevel||this.afroshop.priceLevel===0)&&(this.afroshop.priceLevel=2),this.afroshop.website=this.afroshop.website?.trim()||"",this.afroshop.cuisine=this.afroshop.cuisine?.trim()||"",this.afroshop.hours=this.convertOpeningHoursToString();let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=he($({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=he($({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?this.afroshop.address.trim()?this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)?this.afroshop.phone.trim()?this.afroshop.description.trim()?this.afroshop.website&&this.afroshop.website.trim()&&!/^https?:\/\/.+/.test(this.afroshop.website)?(this.errorMessage="Website URL muss mit http:// oder https:// beginnen",!1):(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Beschreibung ist erforderlich",!1):(this.errorMessage="Telefonnummer ist erforderlich",!1):(this.errorMessage="Adresse konnte nicht georeferenziert werden. Bitte \xFCberpr\xFCfen Sie die Adresse.",console.warn("\u274C Coordonn\xE9es invalides:",this.afroshop.coordinates),!1):(this.errorMessage="Adresse ist erforderlich",!1):(this.errorMessage="Name ist erforderlich",!1)}onAddressChange(){this.geocodeTimeout&&clearTimeout(this.geocodeTimeout),this.geocodeTimeout=setTimeout(()=>{this.setCoordinatesFromAddress()},1e3)}geocodeTimeout=null;setCoordinatesFromAddress(){if(!this.afroshop.address||this.afroshop.address.trim().length===0){console.log("\u274C Adresse vide, impossible de g\xE9ocoder"),this.isGeocoding=!1;return}if(this.geocodingService.isValidCoordinates(this.afroshop.coordinates.lat,this.afroshop.coordinates.lng)){console.log("\u2705 Coordonn\xE9es d\xE9j\xE0 valides:",this.afroshop.coordinates),this.isGeocoding=!1;return}console.log("\u{1F5FA}\uFE0F D\xE9marrage du g\xE9ocodage pour:",this.afroshop.address),this.isGeocoding=!0,this.geocodingService.geocodeAddress(this.afroshop.address).subscribe({next:e=>{this.isGeocoding=!1,e?(this.afroshop.coordinates={lat:e.lat,lng:e.lng},console.log("\u2705 G\xE9ocodage r\xE9ussi:",{address:this.afroshop.address,coordinates:this.afroshop.coordinates,formatted_address:e.formatted_address}),e.formatted_address&&e.accuracy!=="APPROXIMATE"&&(this.afroshop.address=e.formatted_address)):(console.warn("\u274C G\xE9ocodage \xE9chou\xE9 pour:",this.afroshop.address),this.afroshop.coordinates={lat:0,lng:0})},error:e=>{this.isGeocoding=!1,console.error("\u274C Erreur lors du g\xE9ocodage:",e),this.afroshop.coordinates={lat:0,lng:0}}})}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return S(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return S(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return S(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|mnchen|kln|frankfurt|dortmund|essen|dsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return S(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(o=>o&&o!=="www.facebook.com"&&o!=="facebook.com"&&o!=="p"&&!o.match(/^\d+$/)&&o.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return S(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}convertOpeningHoursToString(){let e=[{key:"monday",name:"Mo"},{key:"tuesday",name:"Di"},{key:"wednesday",name:"Mi"},{key:"thursday",name:"Do"},{key:"friday",name:"Fr"},{key:"saturday",name:"Sa"},{key:"sunday",name:"So"}],t=[];return e.forEach(r=>{let i=this.openingHours[r.key];i.isOpen&&t.push(`${r.name}: ${i.open}-${i.close}`)}),t.length>0?t.join(", "):"\xD6ffnungszeiten nicht angegeben"}parseOpeningHoursFromString(e){if(!e||e==="\xD6ffnungszeiten nicht angegeben")return;this.openingHours.monday.isOpen=!1,this.openingHours.tuesday.isOpen=!1,this.openingHours.wednesday.isOpen=!1,this.openingHours.thursday.isOpen=!1,this.openingHours.friday.isOpen=!1,this.openingHours.saturday.isOpen=!1,this.openingHours.sunday.isOpen=!1,e.split(",").forEach(r=>{let o=r.trim().match(/^(\w+):\s*(\d{2}:\d{2})-(\d{2}:\d{2})$/);if(o){let[,s,a,c]=o;switch(s.toLowerCase()){case"mo":this.openingHours.monday={isOpen:!0,open:a,close:c};break;case"di":this.openingHours.tuesday={isOpen:!0,open:a,close:c};break;case"mi":this.openingHours.wednesday={isOpen:!0,open:a,close:c};break;case"do":this.openingHours.thursday={isOpen:!0,open:a,close:c};break;case"fr":this.openingHours.friday={isOpen:!0,open:a,close:c};break;case"sa":this.openingHours.saturday={isOpen:!0,open:a,close:c};break;case"so":this.openingHours.sunday={isOpen:!0,open:a,close:c};break}}})}goBack(){this.router.navigate(["/"])}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}static \u0275fac=function(t){return new(t||n)(te(ir),te(Jt),te(fo),te(hh),te(It),te(kn))};static \u0275cmp=wt({type:n,selectors:[["app-add-afroshop"]],decls:163,vars:47,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"header-content"],[1,"header-text"],[1,"header-actions"],["routerLink","/admin","class","back-btn",4,"ngIf"],["routerLink","/gallery",1,"back-btn"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","geocoding-indicator",4,"ngIf"],["class","geocoding-success",4,"ngIf"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"opening-hours-container"],[1,"day-hours"],[1,"day-label"],[1,"hours-controls"],["type","checkbox","id","mon-open","name","mon-open",3,"ngModelChange","ngModel"],["for","mon-open",1,"checkbox-label"],["class","time-selectors",4,"ngIf"],["type","checkbox","id","tue-open","name","tue-open",3,"ngModelChange","ngModel"],["for","tue-open",1,"checkbox-label"],["type","checkbox","id","wed-open","name","wed-open",3,"ngModelChange","ngModel"],["for","wed-open",1,"checkbox-label"],["type","checkbox","id","thu-open","name","thu-open",3,"ngModelChange","ngModel"],["for","thu-open",1,"checkbox-label"],["type","checkbox","id","fri-open","name","fri-open",3,"ngModelChange","ngModel"],["for","fri-open",1,"checkbox-label"],["type","checkbox","id","sat-open","name","sat-open",3,"ngModelChange","ngModel"],["for","sat-open",1,"checkbox-label"],["type","checkbox","id","sun-open","name","sun-open",3,"ngModelChange","ngModel"],["for","sun-open",1,"checkbox-label"],["for","website"],["type","url","id","website","name","website","placeholder","https://www.beispiel.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/admin",1,"back-btn"],[1,"message","success"],[1,"message","error"],[3,"value"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],[1,"geocoding-indicator"],[1,"geocoding-success"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische, Nigerianische, Senegalesische",1,"form-input",3,"ngModelChange","ngModel"],[1,"time-selectors"],["name","mon-open-time",1,"time-select",3,"ngModelChange","ngModel"],["value","06:00"],["value","07:00"],["value","08:00"],["value","09:00"],["value","10:00"],["value","11:00"],["value","12:00"],[1,"time-separator"],["name","mon-close-time",1,"time-select",3,"ngModelChange","ngModel"],["value","16:00"],["value","17:00"],["value","18:00"],["value","19:00"],["value","20:00"],["value","21:00"],["value","22:00"],["value","23:00"],["name","tue-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-close-time",1,"time-select",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=We();y(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),v(5),m(),y(6,"p"),v(7),m()(),y(8,"div",5),ce(9,Mae,2,0,"a",6),y(10,"a",7),v(11," \u2190 Galerie "),m()()()(),y(12,"form",8),fe("ngSubmit",function(){return oe(i),se(r.onSubmit())}),y(13,"div",9)(14,"h3"),v(15,"\u{1F517} Schnell hinzuf\xFCgen"),m(),y(16,"p"),v(17,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),m(),y(18,"div",10)(19,"label",11),v(20,"Google Maps, Facebook, Nextdoor oder Website URL"),m(),y(21,"div",12)(22,"input",13),Se("ngModelChange",function(s){return oe(i),De(r.importUrl,s)||(r.importUrl=s),se(s)}),m(),y(23,"button",14),fe("click",function(){return oe(i),se(r.importFromUrl())}),ce(24,Pae,2,0,"span",15)(25,xae,2,0,"span",15),m()()(),y(26,"div",16)(27,"span"),v(28,"oder manuell eingeben"),m()()(),ce(29,Rae,2,1,"div",17)(30,kae,2,1,"div",18),y(31,"div",10)(32,"label",19),v(33,"Name des Gesch\xE4fts *"),m(),y(34,"input",20),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.name,s)||(r.afroshop.name=s),se(s)}),m()(),y(35,"div",10)(36,"label",21),v(37,"Typ *"),m(),y(38,"select",22),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.type,s)||(r.afroshop.type=s),se(s)}),y(39,"option",23),v(40,"Typ ausw\xE4hlen"),m(),ce(41,Oae,2,3,"option",24),m()(),y(42,"div",10)(43,"label",25),v(44,"\u{1F4F8} Bild hochladen"),m(),y(45,"div",26)(46,"input",27,0),fe("change",function(s){return oe(i),se(r.onFileSelected(s))}),m(),y(48,"button",28),fe("click",function(){oe(i);let s=cf(47);return se(s.click())}),ce(49,Nae,2,0,"span",15)(50,Lae,2,0,"span",15)(51,Fae,2,0,"span",15),m(),ce(52,Vae,5,0,"div",29)(53,Uae,4,1,"div",30),y(54,"small",31),v(55,"Max. 5MB - Wird automatisch komprimiert und optimiert"),m()()(),y(56,"div",10)(57,"label",32),v(58,"Adresse *"),m(),y(59,"input",33),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.address,s)||(r.afroshop.address=s),se(s)}),fe("ngModelChange",function(){return oe(i),se(r.onAddressChange())}),m(),y(60,"small"),v(61,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),m(),ce(62,Bae,2,0,"div",34)(63,jae,2,2,"div",35),m(),y(64,"div",10)(65,"label",36),v(66,"Telefon *"),m(),y(67,"input",37),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.phone,s)||(r.afroshop.phone=s),se(s)}),m()(),y(68,"div",10)(69,"label",38),v(70,"Beschreibung *"),m(),y(71,"textarea",39),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.description,s)||(r.afroshop.description=s),se(s)}),m()(),ce(72,zae,6,1,"div",40),y(73,"div",10)(74,"label"),v(75,"\xD6ffnungszeiten"),m(),y(76,"div",41)(77,"div",42)(78,"div",43),v(79,"Montag:"),m(),y(80,"div",44)(81,"input",45),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.monday.isOpen,s)||(r.openingHours.monday.isOpen=s),se(s)}),m(),y(82,"label",46),v(83,"Ge\xF6ffnet"),m(),ce(84,$ae,35,2,"div",47),m()(),y(85,"div",42)(86,"div",43),v(87,"Dienstag:"),m(),y(88,"div",44)(89,"input",48),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.tuesday.isOpen,s)||(r.openingHours.tuesday.isOpen=s),se(s)}),m(),y(90,"label",49),v(91,"Ge\xF6ffnet"),m(),ce(92,Hae,35,2,"div",47),m()(),y(93,"div",42)(94,"div",43),v(95,"Mittwoch:"),m(),y(96,"div",44)(97,"input",50),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.wednesday.isOpen,s)||(r.openingHours.wednesday.isOpen=s),se(s)}),m(),y(98,"label",51),v(99,"Ge\xF6ffnet"),m(),ce(100,qae,35,2,"div",47),m()(),y(101,"div",42)(102,"div",43),v(103,"Donnerstag:"),m(),y(104,"div",44)(105,"input",52),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.thursday.isOpen,s)||(r.openingHours.thursday.isOpen=s),se(s)}),m(),y(106,"label",53),v(107,"Ge\xF6ffnet"),m(),ce(108,Gae,35,2,"div",47),m()(),y(109,"div",42)(110,"div",43),v(111,"Freitag:"),m(),y(112,"div",44)(113,"input",54),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.friday.isOpen,s)||(r.openingHours.friday.isOpen=s),se(s)}),m(),y(114,"label",55),v(115,"Ge\xF6ffnet"),m(),ce(116,Wae,35,2,"div",47),m()(),y(117,"div",42)(118,"div",43),v(119,"Samstag:"),m(),y(120,"div",44)(121,"input",56),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.saturday.isOpen,s)||(r.openingHours.saturday.isOpen=s),se(s)}),m(),y(122,"label",57),v(123,"Ge\xF6ffnet"),m(),ce(124,Kae,35,2,"div",47),m()(),y(125,"div",42)(126,"div",43),v(127,"Sonntag:"),m(),y(128,"div",44)(129,"input",58),Se("ngModelChange",function(s){return oe(i),De(r.openingHours.sunday.isOpen,s)||(r.openingHours.sunday.isOpen=s),se(s)}),m(),y(130,"label",59),v(131,"Ge\xF6ffnet"),m(),ce(132,Qae,35,2,"div",47),m()(),y(133,"small",31),v(134,"W\xE4hlen Sie f\xFCr jeden Tag, ob das Gesch\xE4ft ge\xF6ffnet ist und die \xD6ffnungszeiten"),m()()(),y(135,"div",10)(136,"label",60),v(137,"Website"),m(),y(138,"input",61),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.website,s)||(r.afroshop.website=s),se(s)}),m(),y(139,"small",31),v(140,"Optional: Offizielle Website oder Social Media Profil"),m()(),y(141,"div",10)(142,"label",62),v(143,"Preisstufe"),m(),y(144,"select",63),Se("ngModelChange",function(s){return oe(i),De(r.afroshop.priceLevel,s)||(r.afroshop.priceLevel=s),se(s)}),y(145,"option",23),v(146,"-- Bitte w\xE4hlen --"),m(),y(147,"option",64),v(148,"\u20AC - G\xFCnstig (unter 10\u20AC)"),m(),y(149,"option",65),v(150,"\u20AC\u20AC - Moderat (10-20\u20AC)"),m(),y(151,"option",66),v(152,"\u20AC\u20AC\u20AC - Gehoben (20-40\u20AC)"),m(),y(153,"option",67),v(154,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig (\xFCber 40\u20AC)"),m()()(),y(155,"div",68)(156,"button",69),fe("click",function(){return oe(i),se(r.goBack())}),ce(157,Yae,2,0,"span",15)(158,Jae,2,0,"span",15),m(),y(159,"button",70),ce(160,Zae,2,1,"span",15)(161,Xae,2,0,"span",15)(162,ece,2,1,"span",15),m()()()()}t&2&&(N(5),yt(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),N(2),yt(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),N(2),z("ngIf",r.isAdmin),N(13),Te("ngModel",r.importUrl),N(),z("disabled",!r.importUrl||r.isImporting),N(),z("ngIf",!r.isImporting),N(),z("ngIf",r.isImporting),N(4),z("ngIf",r.successMessage),N(),z("ngIf",r.errorMessage),N(4),Te("ngModel",r.afroshop.name),N(4),Te("ngModel",r.afroshop.type),N(3),z("ngForOf",r.getAllBusinessTypes()),N(7),z("disabled",r.isUploadingImage),N(),z("ngIf",!r.imagePreview&&!r.isUploadingImage),N(),z("ngIf",r.imagePreview&&!r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",r.imagePreview),N(6),Te("ngModel",r.afroshop.address),N(3),z("ngIf",r.isGeocoding),N(),z("ngIf",r.afroshop.coordinates.lat!==0&&r.afroshop.coordinates.lng!==0),N(4),Te("ngModel",r.afroshop.phone),N(4),Te("ngModel",r.afroshop.description),N(),z("ngIf",r.afroshop.type==="restaurant"),N(9),Te("ngModel",r.openingHours.monday.isOpen),N(3),z("ngIf",r.openingHours.monday.isOpen),N(5),Te("ngModel",r.openingHours.tuesday.isOpen),N(3),z("ngIf",r.openingHours.tuesday.isOpen),N(5),Te("ngModel",r.openingHours.wednesday.isOpen),N(3),z("ngIf",r.openingHours.wednesday.isOpen),N(5),Te("ngModel",r.openingHours.thursday.isOpen),N(3),z("ngIf",r.openingHours.thursday.isOpen),N(5),Te("ngModel",r.openingHours.friday.isOpen),N(3),z("ngIf",r.openingHours.friday.isOpen),N(5),Te("ngModel",r.openingHours.saturday.isOpen),N(3),z("ngIf",r.openingHours.saturday.isOpen),N(5),Te("ngModel",r.openingHours.sunday.isOpen),N(3),z("ngIf",r.openingHours.sunday.isOpen),N(6),Te("ngModel",r.afroshop.website),N(6),Te("ngModel",r.afroshop.priceLevel),N(12),z("disabled",r.isSubmitting||r.isUploadingImage),N(),z("ngIf",!r.isSubmitting&&!r.isUploadingImage),N(),z("ngIf",r.isSubmitting||r.isUploadingImage),N(),z("disabled",r.isSubmitting||r.isUploadingImage),N(),z("ngIf",r.isSubmitting&&!r.isUploadingImage),N(),z("ngIf",r.isUploadingImage),N(),z("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[zt,tr,un,uo,ch,Nw,Lw,Br,xP,lh,lo,ah,fl,yi,hl,_r,rr],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.geocoding-indicator[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e3f2fd;color:#1976d2;border-radius:6px;font-size:.9em;border-left:4px solid #2196f3;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.geocoding-success[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:#e8f5e8;color:#2e7d32;border-radius:6px;font-size:.9em;border-left:4px solid #4caf50}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl);padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px;box-shadow:0 10px 30px #667eea4d}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.back-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;padding:8px 15px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px);text-decoration:none;color:#fff}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding:20px 0}.btn[_ngcontent-%COMP%]{padding:16px 32px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;display:inline-flex;align-items:center;justify-content:center;text-align:center;min-width:160px;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;transform:translateY(0)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722,#e64a19);color:#fff;box-shadow:0 6px 20px #ff7b0066;border:2px solid transparent}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8f00,#ff6f00,#f57c00);transform:translateY(-3px);box-shadow:0 12px 30px #ff7b0080}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #ff7b0099}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#bdbdbd,#9e9e9e);color:#fff;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a;opacity:.7;animation:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled){animation:_ngcontent-%COMP%_gentle-pulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gentle-pulse{0%,to{box-shadow:0 6px 20px #ff7b0066}50%{box-shadow:0 6px 25px #ff7b0099}}.btn-primary[_ngcontent-%COMP%]:hover{animation:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;box-shadow:0 4px 15px #0000001a;border:2px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#adb5bd}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 10px #0003}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.url-input[_ngcontent-%COMP%]{width:100%}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:20px 0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;font-size:16px;padding:18px 24px;min-width:auto}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg)}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.image-preview-container[_ngcontent-%COMP%]{max-width:100%}.image-preview[_ngcontent-%COMP%]{max-height:200px}}.opening-hours-container[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;margin-top:10px}.day-hours[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.day-hours[_ngcontent-%COMP%]:last-child{margin-bottom:0}.day-label[_ngcontent-%COMP%]{width:100px;font-weight:600;color:#495057;flex-shrink:0}.hours-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex:1}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;cursor:pointer;margin:0;padding:0}.time-selectors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:10px}.time-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;background:#fff;color:#495057;font-size:14px;cursor:pointer;transition:all .2s}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff7b00;box-shadow:0 0 0 3px #ff7b001a}.time-separator[_ngcontent-%COMP%]{color:#6c757d;font-weight:500;margin:0 5px}@media (max-width: 768px){.day-hours[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.day-label[_ngcontent-%COMP%]{width:auto;margin-bottom:5px}.hours-controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.time-selectors[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}}@media (max-width: 480px){.opening-hours-container[_ngcontent-%COMP%]{padding:15px}.time-selectors[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.time-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function tce(n,e){if(n&1&&(y(0,"div",16),v(1),m()),n&2){let t=K();N(),Ve(" ",t.errorMessage," ")}}function nce(n,e){n&1&&(y(0,"span"),v(1,"Anmelden"),m())}function rce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Anmeldung..."),m())}function ice(n,e){n&1&&(y(0,"span"),v(1,"\u{1F50D} Mit Google fortfahren"),m())}function oce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Google-Anmeldung..."),m())}var $w=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{console.log("\u{1F510} Tentative de connexion Google...");let e=yield this.authService.loginWithGoogle();console.log("\u2705 Connexion Google r\xE9ussie:",e);let t=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([t])}catch(e){console.error("\u274C Erreur connexion Google:",e);let t=e.message;e instanceof Error&&(console.log("Type d'erreur:",e.name),console.log("Code d'erreur:",e.code),console.log("Message complet:",e.message)),t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")||t.includes("popup-closed-by-user")||t.includes("cancelled")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")||t.includes("popup-blocked")?this.showPopupBlockedDialog():this.errorMessage=`Erreur de connexion: ${t}`}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It),te(kn))};static \u0275cmp=wt({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),v(4,"\u{1F510} Anmeldung"),m(),y(5,"p"),v(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),m()(),y(7,"form",3),fe("ngSubmit",function(){return r.onSubmit()}),y(8,"div",4)(9,"label",5),v(10,"E-Mail-Adresse"),m(),y(11,"input",6),Se("ngModelChange",function(o){return De(r.email,o)||(r.email=o),o}),m()(),y(12,"div",4)(13,"label",7),v(14,"Passwort"),m(),y(15,"input",8),Se("ngModelChange",function(o){return De(r.password,o)||(r.password=o),o}),m()(),ce(16,tce,2,1,"div",9),y(17,"button",10),ce(18,nce,2,0,"span",11)(19,rce,2,0,"span",11),m()(),y(20,"div",12)(21,"span"),v(22,"oder"),m()(),y(23,"button",13),fe("click",function(){return r.loginWithGoogle()}),ce(24,ice,2,0,"span",11)(25,oce,2,0,"span",11),m(),y(26,"div",14)(27,"p"),v(28,"Noch kein Konto? "),y(29,"a",15),v(30,"Registrieren"),m()()()()()),t&2&&(N(11),Te("ngModel",r.email),z("disabled",r.isLoading),N(4),Te("ngModel",r.password),z("disabled",r.isLoading),N(),z("ngIf",r.errorMessage),N(),z("disabled",r.isLoading||!r.email||!r.password),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading),N(4),z("disabled",r.isLoading),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading))},dependencies:[zt,un,uo,ch,Br,lo,ah,fl,yi,hl,_r,rr],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function sce(n,e){if(n&1&&(y(0,"div",20),v(1),m()),n&2){let t=K();N(),Ve(" ",t.errorMessage," ")}}function ace(n,e){n&1&&(y(0,"span"),v(1,"Registrieren"),m())}function cce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Registrierung..."),m())}function lce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F50D} Mit Google fortfahren"),m())}function uce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Google-Anmeldung..."),m())}var Hw=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return S(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return S(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),v(4,"\u{1F4DD} Registrierung"),m(),y(5,"p"),v(6,"Erstellen Sie Ihr AfroConnect-Konto"),m()(),y(7,"form",3),fe("ngSubmit",function(){return r.onSubmit()}),y(8,"div",4)(9,"label",5),v(10,"Anzeigename"),m(),y(11,"input",6),Se("ngModelChange",function(o){return De(r.displayName,o)||(r.displayName=o),o}),m()(),y(12,"div",4)(13,"label",7),v(14,"E-Mail-Adresse"),m(),y(15,"input",8),Se("ngModelChange",function(o){return De(r.email,o)||(r.email=o),o}),m()(),y(16,"div",4)(17,"label",9),v(18,"Passwort"),m(),y(19,"input",10),Se("ngModelChange",function(o){return De(r.password,o)||(r.password=o),o}),m()(),y(20,"div",4)(21,"label",11),v(22,"Passwort best\xE4tigen"),m(),y(23,"input",12),Se("ngModelChange",function(o){return De(r.confirmPassword,o)||(r.confirmPassword=o),o}),m()(),ce(24,sce,2,1,"div",13),y(25,"button",14),ce(26,ace,2,0,"span",15)(27,cce,2,0,"span",15),m()(),y(28,"div",16)(29,"span"),v(30,"oder"),m()(),y(31,"button",17),fe("click",function(){return r.loginWithGoogle()}),ce(32,lce,2,0,"span",15)(33,uce,2,0,"span",15),m(),y(34,"div",18)(35,"p"),v(36,"Bereits ein Konto? "),y(37,"a",19),v(38,"Anmelden"),m()()()()()),t&2&&(N(11),Te("ngModel",r.displayName),z("disabled",r.isLoading),N(4),Te("ngModel",r.email),z("disabled",r.isLoading),N(4),Te("ngModel",r.password),z("disabled",r.isLoading),N(4),Te("ngModel",r.confirmPassword),z("disabled",r.isLoading),N(),z("ngIf",r.errorMessage),N(),z("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading),N(4),z("disabled",r.isLoading),N(),z("ngIf",!r.isLoading),N(),z("ngIf",r.isLoading))},dependencies:[zt,un,uo,ch,Br,lo,ah,fl,yi,hl,_r,rr],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var qw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-privacy"]],decls:128,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),v(3,"Datenschutzerkl\xE4rung"),m(),y(4,"p",2),v(5),m(),y(6,"section")(7,"h2"),v(8,"1. Verantwortlicher"),m(),y(9,"p")(10,"strong"),v(11,"AfroConnect"),m(),Ye(12,"br"),v(13," Kapuzinerring 26"),Ye(14,"br"),v(15," 59457 Werl"),Ye(16,"br"),v(17," Deutschland"),Ye(18,"br")(19,"br"),v(20," E-Mail: lamaid0502@gmail.com"),Ye(21,"br")(22,"br"),v(23," Der Verantwortliche im Sinne der Datenschutz-Grundverordnung (DSGVO) und anderer nationaler Datenschutzgesetze der Mitgliedsstaaten sowie sonstiger datenschutzrechtlicher Bestimmungen ist die oben genannte Person. "),m()(),y(24,"section")(25,"h2"),v(26,"2. Erhobene Daten"),m(),y(27,"h3"),v(28,"2.1 Nutzungsdaten"),m(),y(29,"ul")(30,"li"),v(31,"IP-Adresse"),m(),y(32,"li"),v(33,"Browser-Informationen"),m(),y(34,"li"),v(35,"Zugriffszeitpunkt"),m(),y(36,"li"),v(37,"Besuchte Seiten"),m()(),y(38,"h3"),v(39,"2.2 Standortdaten"),m(),y(40,"p"),v(41," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),m(),y(42,"h3"),v(43,"2.3 Registrierungsdaten"),m(),y(44,"ul")(45,"li"),v(46,"E-Mail-Adresse"),m(),y(47,"li"),v(48,"Benutzername"),m(),y(49,"li"),v(50,"Passwort (verschl\xFCsselt)"),m()()(),y(51,"section")(52,"h2"),v(53,"3. Zweck der Datenverarbeitung"),m(),y(54,"ul")(55,"li"),v(56,"Bereitstellung der App-Funktionen"),m(),y(57,"li"),v(58,"Benutzerauthentifizierung"),m(),y(59,"li"),v(60,"Anzeige lokaler Afroshops"),m(),y(61,"li"),v(62,"Verbesserung der Nutzererfahrung"),m()()(),y(63,"section")(64,"h2"),v(65,"4. Rechtsgrundlage"),m(),y(66,"p"),v(67," Die Verarbeitung erfolgt auf Grundlage von: "),m(),y(68,"ul")(69,"li"),v(70,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),m(),y(71,"li"),v(72,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),m(),y(73,"li"),v(74,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),m()()(),y(75,"section")(76,"h2"),v(77,"5. Datenweitergabe"),m(),y(78,"p"),v(79," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),m(),y(80,"ul")(81,"li"),v(82,"Google Firebase (Hosting und Datenbank)"),m(),y(83,"li"),v(84,"Bei gesetzlicher Verpflichtung"),m()()(),y(85,"section")(86,"h2"),v(87,"6. Speicherdauer"),m(),y(88,"p"),v(89," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),m()(),y(90,"section")(91,"h2"),v(92,"7. Ihre Rechte"),m(),y(93,"ul")(94,"li"),v(95,"Auskunft \xFCber gespeicherte Daten"),m(),y(96,"li"),v(97,"Berichtigung falscher Daten"),m(),y(98,"li"),v(99,"L\xF6schung Ihrer Daten"),m(),y(100,"li"),v(101,"Einschr\xE4nkung der Verarbeitung"),m(),y(102,"li"),v(103,"Daten\xFCbertragbarkeit"),m(),y(104,"li"),v(105,"Widerspruch gegen Verarbeitung"),m()()(),y(106,"section")(107,"h2"),v(108,"8. Kontakt"),m(),y(109,"p")(110,"strong"),v(111,"Verantwortlicher f\xFCr den Datenschutz:"),m(),Ye(112,"br")(113,"br"),y(114,"strong"),v(115,"AfroConnect"),m(),Ye(116,"br"),v(117," Kapuzinerring 26"),Ye(118,"br"),v(119," 59457 Werl"),Ye(120,"br"),v(121," Deutschland"),Ye(122,"br")(123,"br"),v(124," E-Mail: lamaid0502@gmail.com"),Ye(125,"br")(126,"br"),v(127," Bei Fragen zum Datenschutz oder zur Aus\xFCbung Ihrer Rechte kontaktieren Sie uns gerne \xFCber die oben genannten Kontaktdaten. "),m()()()()),t&2&&(N(5),Ve("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem;text-align:center;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem;text-align:center}h3[_ngcontent-%COMP%]{color:#4caf50;text-align:center}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem;text-align:center}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}.legal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.legal-content[_ngcontent-%COMP%]{width:100%;max-width:800px}@media (max-width: 600px){.legal-container[_ngcontent-%COMP%]{padding:.5rem;min-height:90vh}h1[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{font-size:1.05rem;margin-top:1.2rem}h3[_ngcontent-%COMP%]{font-size:1rem}.legal-content[_ngcontent-%COMP%]{padding:.2rem}section[_ngcontent-%COMP%]{margin-bottom:1.2rem}}"]})};var Gw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-terms"]],decls:101,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),v(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),m(),y(4,"p",2),v(5),m(),y(6,"section")(7,"h2"),v(8,"\xA7 1 Geltungsbereich"),m(),y(9,"p"),v(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),m()(),y(11,"section")(12,"h2"),v(13,"\xA7 2 Beschreibung der Dienstleistung"),m(),y(14,"p"),v(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),m(),y(16,"h3"),v(17,"2.1 Funktionen"),m(),y(18,"ul")(19,"li"),v(20,"Suche nach Afroshops in der N\xE4he"),m(),y(21,"li"),v(22,"Detailinformationen zu Gesch\xE4ften"),m(),y(23,"li"),v(24,"Bewertungen und Kommentare"),m(),y(25,"li"),v(26,"Kartenansicht und Navigation"),m()()(),y(27,"section")(28,"h2"),v(29,"\xA7 3 Nutzerkonto"),m(),y(30,"h3"),v(31,"3.1 Registrierung"),m(),y(32,"p"),v(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),m(),y(34,"h3"),v(35,"3.2 Passwort und Sicherheit"),m(),y(36,"p"),v(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),m()(),y(38,"section")(39,"h2"),v(40,"\xA7 4 Nutzungsregeln"),m(),y(41,"p"),v(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),m(),y(43,"ul")(44,"li"),v(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),m(),y(46,"li"),v(47,"Keine beleidigenden oder diskriminierenden Inhalte"),m(),y(48,"li"),v(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),m(),y(50,"li"),v(51,"Die Rechte Dritter zu respektieren"),m()()(),y(52,"section")(53,"h2"),v(54,"\xA7 5 Inhalte und Urheberrecht"),m(),y(55,"h3"),v(56,"5.1 Nutzergenerierte Inhalte"),m(),y(57,"p"),v(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),m(),y(59,"h3"),v(60,"5.2 Verantwortung"),m(),y(61,"p"),v(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),m()(),y(63,"section")(64,"h2"),v(65,"\xA7 6 Haftung"),m(),y(66,"p"),v(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),m()(),y(68,"section")(69,"h2"),v(70,"\xA7 7 \xC4nderungen der AGB"),m(),y(71,"p"),v(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),m()(),y(73,"section")(74,"h2"),v(75,"\xA7 8 K\xFCndigung"),m(),y(76,"p"),v(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),m()(),y(78,"section")(79,"h2"),v(80,"\xA7 9 Anwendbares Recht"),m(),y(81,"p"),v(82," Es gilt deutsches Recht. Gerichtsstand ist Werl, Deutschland. "),m()(),y(83,"section")(84,"h2"),v(85,"\xA7 10 Kontakt"),m(),y(86,"p")(87,"strong"),v(88,"AfroConnect"),m(),Ye(89,"br"),v(90," Kapuzinerring 26"),Ye(91,"br"),v(92," 59457 Werl"),Ye(93,"br"),v(94," Deutschland"),Ye(95,"br")(96,"br"),v(97," E-Mail: lamaid0502@gmail.com"),Ye(98,"br")(99,"br"),v(100," Bei Fragen zu diesen AGB oder zur Nutzung der App kontaktieren Sie uns gerne \xFCber die oben genannten Kontaktdaten. "),m()()()()),t&2&&(N(5),Ve("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem;text-align:center;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem;text-align:center}h3[_ngcontent-%COMP%]{color:#4caf50;text-align:center}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem;text-align:center}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}.legal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.legal-content[_ngcontent-%COMP%]{width:100%;max-width:800px}@media (max-width: 600px){.legal-container[_ngcontent-%COMP%]{padding:.5rem;min-height:90vh}h1[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{font-size:1.05rem;margin-top:1.2rem}h3[_ngcontent-%COMP%]{font-size:1rem}.legal-content[_ngcontent-%COMP%]{padding:.2rem}section[_ngcontent-%COMP%]{margin-bottom:1.2rem}}"]})};var Ww=class n{constructor(e){this.firebaseService=e}getExistingAfroshops(){return S(this,null,function*(){return new Promise(e=>{this.firebaseService.getAllAfroshops().subscribe({next:t=>e(t),error:t=>{console.warn("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es existantes:",t),e([])}})})})}cleanDuplicates(){return S(this,null,function*(){try{console.log("\u{1F9F9} Nettoyage des doublons en cours...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops trouv\xE9s en base`);let t=new Map;e.forEach(o=>{let s=`${o.name}|${o.address}`;t.has(s)||t.set(s,[]),t.get(s).push(o)});let r=0,i=0;for(let[o,s]of t)if(s.length>1){console.log(`\u{1F50D} Doublon trouv\xE9: ${s[0].name} (${s.length} copies)`),i++;for(let a=1;a<s.length;a++)try{yield this.firebaseService.deleteAfroshop(s[a].id),r++,console.log(`\u{1F5D1}\uFE0F Supprim\xE9: ${s[a].name} (ID: ${s[a].id})`),yield this.delay(100)}catch(c){console.error(`\u274C Erreur suppression ${s[a].id}:`,c)}}else i++;return console.log(`\u2705 Nettoyage termin\xE9: ${r} supprim\xE9s, ${i} conserv\xE9s`),{removed:r,kept:i}}catch(e){throw console.error("\u274C Erreur lors du nettoyage:",e),e}})}afroshopsData=[{name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches westafrikanisches Restaurant mit traditionellen Gerichten aus Ghana und Nigeria. Spezialit\xE4ten: Jollof Rice, Fufu, Kelewele.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Fr: 12:00-22:00, Sa: 14:00-23:00, So: 14:00-21:00",website:"https://mama-afrika-berlin.de"},{name:"Ethiopian Queen Restaurant",type:"restaurant",address:"Kreuzbergstra\xDFe 45, 10965 Berlin",coordinates:{lat:52.4995,lng:13.3883},phone:"+49 30 23456789",description:"Traditionelle \xE4thiopische K\xFCche in gem\xFCtlicher Atmosph\xE4re. Injera, Doro Wat und vegetarische Optionen.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:"https://ethiopian-queen.de"},{name:"Afro Hair Salon Berlin",type:"coiffeur",address:"Hermannstra\xDFe 89, 12049 Berlin",coordinates:{lat:52.4755,lng:13.4324},phone:"+49 30 34567890",description:"Spezialist f\xFCr afroamerikanische Haarpflege. Braids, Weaves, Natural Hair Care und chemische Behandlungen.",rating:4.7,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Afrika Market Berlin",type:"epicerie",address:"Turmstra\xDFe 234, 10551 Berlin",coordinates:{lat:52.5252,lng:13.3415},phone:"+49 30 45678901",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Berlin. Yams, Kochbananen, Palm\xF6l, Gew\xFCrze und Fleischspezialit\xE4ten.",rating:4.2,image:"https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Sa: 08:00-20:00, So: 10:00-18:00",website:"https://afrika-market-berlin.de"},{name:"Senegal Restaurant Hamburg",type:"restaurant",address:"Reeperbahn 456, 20359 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 12345678",description:"Authentische senegalesische K\xFCche. Thieboudienne, Yassa Poulet und frische Meeresfr\xFCchte.",rating:4.4,image:"https://images.unsplash.com/photo-1547592180-85f173990554?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mo-Fr: 18:00-24:00, Sa-So: 17:00-01:00",website:"https://senegal-restaurant-hh.de"},{name:"Afro Style Hamburg",type:"coiffeur",address:"Steindamm 123, 20099 Hamburg",coordinates:{lat:53.553,lng:10.0061},phone:"+49 40 23456789",description:"Moderner Afro-Friseursalon mit internationalen Stylisten. Cuts, Farben und Extensions.",rating:4.6,image:"https://images.unsplash.com/photo-1521490878783-35eb2c52f3b7?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-20:00, Sa: 09:00-18:00",website:""},{name:"Kamerun Eck M\xFCnchen",type:"restaurant",address:"Maximilianstra\xDFe 78, 80539 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 12345678",description:"Kamerunische Spezialit\xE4ten in bayerischer Atmosph\xE4re. Ndol\xE9, Poulet DG und Kochbananen.",rating:4.1,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Kamerunische",priceLevel:2,hours:"Mo-Sa: 11:30-22:00",website:""},{name:"Nigerianisches Restaurant K\xF6ln",type:"restaurant",address:"Z\xFClpicher Stra\xDFe 234, 50937 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 12345678",description:"Authentische nigerianische K\xFCche. Jollof Rice, Suya, Pounded Yam und Egusi Soup.",rating:4.3,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Nigerianische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa-So: 14:00-22:00",website:"https://nigerian-restaurant-koeln.de"},{name:"Eritrea Restaurant Frankfurt",type:"restaurant",address:"Berger Stra\xDFe 145, 60316 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 12345678",description:"Eritreische und \xE4thiopische K\xFCche. Injera, Zigni und traditionelle Kaffeezeremonie.",rating:4.5,image:"https://images.unsplash.com/photo-1554978991-33ef7f31d658?w=800&h=600&fit=crop",cuisine:"Eritreische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:""},{name:"Afrika Laden Stuttgart",type:"epicerie",address:"K\xF6nigstra\xDFe 89, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 12345678",description:"Afrikanische Lebensmittel und Gew\xFCrze. Maniok, Kochbananen, Palm\xF6l und traditionelle Snacks.",rating:4,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Marokkanisches Restaurant D\xFCsseldorf",type:"restaurant",address:"Immermannstra\xDFe 23, 40210 D\xFCsseldorf",coordinates:{lat:51.2277,lng:6.7735},phone:"+49 211 12345678",description:"Nordafrikanische K\xFCche. Tajine, Couscous, Pastilla und marokkanische Tees.",rating:4.2,image:"https://images.unsplash.com/photo-1539353130027-9532750e7146?w=800&h=600&fit=crop",cuisine:"Marokkanische",priceLevel:3,hours:"Mo-So: 17:00-24:00",website:"https://marokko-restaurant-dus.de"},{name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 12345678",description:"Westafrikanische und zentralafrikanische K\xFCche in modernem Ambiente.",rating:4.1,image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Sa: 12:00-22:00",website:""},{name:"African Beauty Salon Essen",type:"coiffeur",address:"Kettwiger Stra\xDFe 67, 45127 Essen",coordinates:{lat:51.4556,lng:7.0116},phone:"+49 201 12345678",description:"Kompletter Service f\xFCr afrikanisches Haar. Relaxer, Braids, Weaves und Naturhaar-Styling.",rating:4.4,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-18:00, Sa: 08:00-16:00",website:""},{name:"\xC4thiopisches Restaurant Leipzig",type:"restaurant",address:"Karl-Liebknecht-Stra\xDFe 123, 04107 Leipzig",coordinates:{lat:51.3397,lng:12.3731},phone:"+49 341 12345678",description:"Traditionelle \xE4thiopische Gerichte in famili\xE4rer Atmosph\xE4re.",rating:4.3,image:"https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-Sa: 17:00-22:00",website:""},{name:"Afrika Shop Bremen",type:"epicerie",address:"Osterstra\xDFe 234, 28199 Bremen",coordinates:{lat:53.0793,lng:8.8017},phone:"+49 421 12345678",description:"Afrikanische Spezialit\xE4ten und Kosmetik. Shea-Butter, schwarze Seife und exotische Fr\xFCchte.",rating:4.1,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-17:00",website:""},{name:"Sudanesisches Restaurant Dresden",type:"restaurant",address:"Prager Stra\xDFe 89, 01069 Dresden",coordinates:{lat:51.0504,lng:13.7373},phone:"+49 351 12345678",description:"Sudanesische und ostafriikanische K\xFCche. Ful Medames, Kisra und Bamya.",rating:4,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"Sudanesische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa: 14:00-22:00",website:""},{name:"African Fashion Hannover",type:"vetement",address:"Georgstra\xDFe 156, 30159 Hannover",coordinates:{lat:52.3759,lng:9.732},phone:"+49 511 12345678",description:"Afrikanische Mode und Accessoires. Dashiki, Kente-Stoffe und handgemachter Schmuck.",rating:4.2,image:"https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-18:00",website:"https://african-fashion-hannover.de"},{name:"Westafrica N\xFCrnberg",type:"restaurant",address:"K\xF6nigstra\xDFe 234, 90402 N\xFCrnberg",coordinates:{lat:49.4521,lng:11.0767},phone:"+49 911 12345678",description:"Ghanaische und ivorische K\xFCche. Banku, Atti\xE9k\xE9 und Palm Nut Soup.",rating:4.4,image:"https://images.unsplash.com/photo-1551218808-94e220e084d2?w=800&h=600&fit=crop",cuisine:"Ghanaische",priceLevel:2,hours:"Mo-Sa: 11:00-22:00",website:""}];kleinestadtAfroshops=[{name:"Afrika Imbiss Soest",type:"restaurant",address:"Thom\xE4stra\xDFe 12, 59494 Soest",coordinates:{lat:51.5671,lng:8.1067},phone:"+49 2921 123456",description:"Kleiner gem\xFCtlicher Imbiss mit westafrikanischen Spezialit\xE4ten. Hausgemachtes Jollof Rice.",rating:4.2,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:1,hours:"Mo-Fr: 11:00-20:00, Sa: 12:00-21:00",website:""},{name:"Afro Hair Werl",type:"coiffeur",address:"Hammer Stra\xDFe 34, 59457 Werl",coordinates:{lat:51.5531,lng:7.9119},phone:"+49 2922 234567",description:"Spezialisiert auf afrikanische Frisuren in ruhiger Kleinstadt-Atmosph\xE4re.",rating:4.5,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-18:00, Sa: 09:00-15:00",website:""}];seedDatabase(){return S(this,null,function*(){try{console.log("\u{1F331} D\xE9but du peuplement de la base de donn\xE9es...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops d\xE9j\xE0 en base`);let r=[...this.afroshopsData,...this.kleinestadtAfroshops].filter(s=>!e.some(a=>a.name===s.name&&a.address===s.address));if(console.log(`\u2728 ${r.length} nouveaux Afroshops \xE0 ajouter`),r.length===0)throw new Error("\u26A0\uFE0F Tous les Afroshops sont d\xE9j\xE0 en base ! Aucun nouvel ajout n\xE9cessaire.");let i=0,o=0;for(let s of r)try{let a=he($({},s),{city:this.extractCityFromAddress(s.address),verified:!0,createdBy:"system",createdByName:"System Import",views:Math.floor(Math.random()*100)+10,likes:Math.floor(Math.random()*20)+5});yield this.firebaseService.addAfroshop(a),i++,console.log(`\u2705 ${s.name} ajout\xE9 avec succ\xE8s`),yield this.delay(100)}catch(a){o++,console.error(`\u274C Erreur lors de l'ajout de ${s.name}:`,a)}console.log(`\u{1F389} Import termin\xE9: ${i} ajout\xE9s, ${o} erreurs`)}catch(e){console.error("\u{1F4A5} Erreur g\xE9n\xE9rale lors du seeding:",e)}})}extractCityFromAddress(e){let t=e.split(",");if(t.length>=2){let r=t[t.length-1].trim(),i=r.match(/\d+\s+(.+)/);return i?i[1].toLowerCase():r.toLowerCase()}return""}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||n)(ue(ir))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var pl={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"},adminConfig:{adminEmails:["youssoufdiamaldiallo@gmail.com"]}};var Kw=class n{constructor(){}isAdminUser(e){return!e||!e.email?!1:pl.production?(console.warn("\u{1F6AB} Admin check disabled in production - use server-side verification"),!1):(pl.adminConfig?.adminEmails||[]).includes(e.email)}getSecurityMessage(){return pl.production?"Administration d\xE9sactiv\xE9e en production pour des raisons de s\xE9curit\xE9. Contactez l'administrateur syst\xE8me.":"Mode d\xE9veloppement - Acc\xE8s admin disponible."}shouldHideAdminInterface(){return pl.production}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function fce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F680} Datenbank mit Afroshops f\xFCllen"),m())}function pce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Import l\xE4uft..."),m())}function gce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F9F9} Doublons entfernen"),m())}function mce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Nettoyage l\xE4uft..."),m())}function yce(n,e){n&1&&(y(0,"div",22),Ye(1,"div",23),y(2,"p"),v(3,"Afroshops werden hinzugef\xFCgt... Bitte warten."),m()())}function _ce(n,e){n&1&&(y(0,"div",22),Ye(1,"div",23),y(2,"p"),v(3,"Doublons werden entfernt... Bitte warten."),m()())}function vce(n,e){if(n&1&&(y(0,"div",24),v(1),m()),n&2){let t=K(2);Qs(t.seedingMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.seedingMessage," ")}}function wce(n,e){if(n&1&&(y(0,"div",24),v(1),m()),n&2){let t=K(2);Qs(t.cleaningMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.cleaningMessage," ")}}function Ece(n,e){n&1&&(y(0,"span"),v(1,"\u{1F504} Actualiser"),m())}function Ice(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Chargement..."),m())}function bce(n,e){if(n&1){let t=We();y(0,"div",29)(1,"div",30)(2,"div",31)(3,"h4"),v(4),m(),y(5,"p",32),v(6),m(),y(7,"p",33),v(8),m()(),y(9,"div",34)(10,"span",35),v(11),m()()(),y(12,"div",36)(13,"button",37),fe("click",function(){let i=oe(t).$implicit,o=K(3);return se(o.editAfroshop(i))}),v(14," \u270F\uFE0F Bearbeiten "),m(),y(15,"button",38),fe("click",function(){let i=oe(t).$implicit,o=K(3);return se(o.confirmDelete(i))}),v(16," \u{1F5D1}\uFE0F L\xF6schen "),m()()()}if(n&2){let t=e.$implicit,r=K(3);N(4),yt(t.name),N(2),yt(r.getGermanBusinessType(t.type)),N(2),Ve("\u{1F4CD} ",t.address,""),N(3),Ve("ID: ",t.id,""),N(4),z("disabled",r.isDeleting)}}function Cce(n,e){if(n&1){let t=We();y(0,"div",25)(1,"div",26)(2,"h3"),v(3),m(),y(4,"button",27),fe("click",function(){oe(t);let i=K(2);return se(i.loadAfroshops())}),ce(5,Ece,2,0,"span",10)(6,Ice,2,0,"span",10),m()(),ce(7,bce,17,5,"div",28),m()}if(n&2){let t=K(2);N(3),Ve("\u{1F4CB} Liste des Afroshops (",t.afroshops.length,")"),N(),z("disabled",t.isLoading),N(),z("ngIf",!t.isLoading),N(),z("ngIf",t.isLoading),N(),z("ngForOf",t.afroshops)("ngForTrackBy",t.trackByAfroshop)}}function Tce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F4CB} Afroshops anzeigen"),m())}function Sce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Wird geladen..."),m())}function Ace(n,e){if(n&1){let t=We();y(0,"div",39)(1,"button",40),fe("click",function(){oe(t);let i=K(2);return se(i.loadAfroshops())}),ce(2,Tce,2,0,"span",10)(3,Sce,2,0,"span",10),m()()}if(n&2){let t=K(2);N(),z("disabled",t.isLoading),N(),z("ngIf",!t.isLoading),N(),z("ngIf",t.isLoading)}}function Dce(n,e){if(n&1&&(y(0,"div",24),v(1),m()),n&2){let t=K(2);Qs(t.deleteMessage.includes("\u274C")?"error":"success"),N(),Ve(" ",t.deleteMessage," ")}}function Mce(n,e){if(n&1){let t=We();y(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2"),v(4,"\u{1F331} Peuplement de la base de donn\xE9es"),m(),y(5,"p"),v(6,"Ajouter des Afroshops dans toute l'Allemagne pour donner vie \xE0 l'application"),m()(),y(7,"div",7)(8,"h3"),v(9,"\u{1F4CA} Donn\xE9es incluses:"),m(),y(10,"ul")(11,"li"),v(12,"\u{1F3D9}\uFE0F "),y(13,"strong"),v(14,"Grandes villes:"),m(),v(15," Berlin, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf, Dortmund, Essen"),m(),y(16,"li"),v(17,"\u{1F3D8}\uFE0F "),y(18,"strong"),v(19,"Villes moyennes:"),m(),v(20," Leipzig, Bremen, Dresden, Hannover, N\xFCrnberg"),m(),y(21,"li"),v(22,"\u{1F3E1} "),y(23,"strong"),v(24,"Petites villes & Kreise:"),m(),v(25," Soest, Werl (Kreis Soest) et autres"),m(),y(26,"li"),v(27,"\u{1F37D}\uFE0F "),y(28,"strong"),v(29,"Types:"),m(),v(30," Restaurants, Friseure, Lebensmittelgesch\xE4fte, Mode, Services"),m(),y(31,"li"),v(32,"\u{1F30D} "),y(33,"strong"),v(34,"Cuisines:"),m(),v(35," Westafrikanische, \xC4thiopische, Senegalesische, Kamerunische, Nigerianische, etc."),m()()(),y(36,"div",8)(37,"button",9),fe("click",function(){oe(t);let i=K();return se(i.seedDatabase())}),ce(38,fce,2,0,"span",10)(39,pce,2,0,"span",10),m(),y(40,"button",11),fe("click",function(){oe(t);let i=K();return se(i.cleanDuplicates())}),ce(41,gce,2,0,"span",10)(42,mce,2,0,"span",10),m(),ce(43,yce,4,0,"div",12)(44,_ce,4,0,"div",12),m(),ce(45,vce,2,3,"div",13)(46,wce,2,3,"div",13),m(),y(47,"div",14)(48,"div",6)(49,"h2"),v(50,"\u{1F5D1}\uFE0F Gestion des Afroshops"),m(),y(51,"p"),v(52,"Supprimer individuellement des Afroshops de la base de donn\xE9es"),m()(),ce(53,Cce,8,6,"div",15)(54,Ace,4,3,"div",16)(55,Dce,2,3,"div",13),m(),y(56,"div",17)(57,"div",6)(58,"h2"),v(59,"\u{1F527} Diagnostic Technique"),m(),y(60,"p"),v(61,"Outils de diagnostic pour r\xE9soudre les probl\xE8mes de g\xE9ocodage et coordonn\xE9es"),m()(),y(62,"div",8)(63,"a",18),v(64," \u{1F5FA}\uFE0F Diagnostic du G\xE9ocodage "),m(),y(65,"p",19),v(66," Testez le syst\xE8me de coordonn\xE9es, auditez les Afroshops existants et corrigez les probl\xE8mes de g\xE9olocalisation. "),m()()(),y(67,"div",20)(68,"button",21),fe("click",function(){oe(t);let i=K();return se(i.goToGallery())}),v(69," \u{1F3EA} Voir la galerie "),m()()()}if(n&2){let t=K();N(37),z("disabled",t.isSeeding||t.isCleaning),N(),z("ngIf",!t.isSeeding),N(),z("ngIf",t.isSeeding),N(),z("disabled",t.isCleaning||t.isSeeding),N(),z("ngIf",!t.isCleaning),N(),z("ngIf",t.isCleaning),N(),z("ngIf",t.isSeeding),N(),z("ngIf",t.isCleaning),N(),z("ngIf",t.seedingMessage),N(),z("ngIf",t.cleaningMessage),N(7),z("ngIf",t.afroshops.length>0),N(),z("ngIf",t.afroshops.length===0),N(),z("ngIf",t.deleteMessage)}}function Pce(n,e){n&1&&(y(0,"div",41)(1,"h2"),v(2,"\u{1F510} Authentification requise"),m(),y(3,"p"),v(4,"Vous devez \xEAtre connect\xE9 pour acc\xE9der aux outils d'administration."),m()())}var Qw=class n{constructor(e,t,r,i,o,s){this.dataSeedingService=e;this.authService=t;this.firebaseAfroshopService=r;this.translationService=i;this.adminSecurity=o;this.router=s;this.authService.user$.subscribe(a=>{if(!a){this.router.navigate(["/login"]);return}this.checkAdminAccess(a)})}isSeeding=!1;isCleaning=!1;seedingMessage="";cleaningMessage="";isAuthenticated=!1;afroshops=[];isLoading=!1;isDeleting=!1;deleteMessage="";checkAdminAccess(e){this.isAuthenticated=this.adminSecurity.isAdminUser(e),this.isAuthenticated||(console.warn("\u{1F6AB} Acc\xE8s admin refus\xE9:",this.adminSecurity.getSecurityMessage()),this.router.navigate(["/gallery"]))}seedDatabase(){return S(this,null,function*(){if(!this.isAuthenticated){this.seedingMessage="\u274C Vous devez \xEAtre connect\xE9 pour effectuer cette action";return}if(!(this.isSeeding||!confirm(`\u{1F6A8} ACHTUNG!

Diese Aktion wird etwa 50+ neue Afroshops in die Datenbank hinzuf\xFCgen.

\u{1F50D} Bereits vorhandene Gesch\xE4fte werden automatisch \xFCbersprungen.

M\xF6chten Sie fortfahren?`))){this.isSeeding=!0,this.seedingMessage="\u{1F331} Import l\xE4uft... Dies kann einige Minuten dauern.";try{yield this.dataSeedingService.seedDatabase(),this.seedingMessage="\u2705 Datenbank erfolgreich mit neuen Afroshops gef\xFCllt!"}catch(t){console.error("Fehler beim Seeding:",t),this.seedingMessage="\u274C Fehler beim Import. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isSeeding=!1}}})}editAfroshop(e){this.router.navigate(["/edit-afroshop",e.id])}goToGallery(){this.router.navigate(["/gallery"])}cleanDuplicates(){return S(this,null,function*(){if(!this.isAuthenticated){this.cleaningMessage="\u274C Sie m\xFCssen angemeldet sein, um diese Aktion durchzuf\xFChren";return}if(!(this.isCleaning||!confirm(`\u{1F9F9} DOUBLONS NETTOYAGE

Diese Aktion wird alle doppelten Afroshops l\xF6schen.

\u26A0\uFE0F Nur das erste Exemplar jedes Gesch\xE4fts wird beibehalten.

M\xF6chten Sie fortfahren?`))){this.isCleaning=!0,this.cleaningMessage="\u{1F9F9} Doublons werden entfernt... Bitte warten.";try{let t=yield this.dataSeedingService.cleanDuplicates();this.cleaningMessage=`\u2705 Nettoyage abgeschlossen! ${t.removed} Doublons entfernt, ${t.kept} Afroshops beibehalten.`}catch(t){console.error("Fehler beim Nettoyage:",t),this.cleaningMessage="\u274C Fehler beim Nettoyage. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isCleaning=!1}}})}loadAfroshops(){return S(this,null,function*(){this.isLoading=!0,this.deleteMessage="";try{this.firebaseAfroshopService.getAllAfroshops().subscribe({next:e=>{this.afroshops=e.sort((t,r)=>t.name.localeCompare(r.name)),this.isLoading=!1},error:e=>{console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}catch(e){console.error("Erreur lors du chargement:",e),this.deleteMessage="\u274C Fehler beim Laden der Afroshops.",this.isLoading=!1}})}confirmDelete(e){return S(this,null,function*(){confirm(`\u{1F5D1}\uFE0F Afroshop l\xF6schen

Name: ${e.name}
Typ: ${this.getGermanBusinessType(e.type)}
Adresse: ${e.address}

\u26A0\uFE0F Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden!

M\xF6chten Sie "${e.name}" wirklich l\xF6schen?`)&&(yield this.deleteAfroshop(e))})}deleteAfroshop(e){return S(this,null,function*(){this.isDeleting=!0,this.deleteMessage=`\u{1F5D1}\uFE0F "${e.name}" wird gel\xF6scht...`;try{yield this.firebaseAfroshopService.deleteAfroshop(e.id.toString()),this.afroshops=this.afroshops.filter(t=>t.id!==e.id),this.deleteMessage=`\u2705 "${e.name}" wurde erfolgreich gel\xF6scht.`,setTimeout(()=>{this.deleteMessage=""},3e3)}catch(t){console.error("Erreur lors de la suppression:",t),this.deleteMessage=`\u274C Fehler beim L\xF6schen von "${e.name}". Details in der Konsole.`}finally{this.isDeleting=!1}})}getGermanBusinessType(e){return this.translationService.getBusinessTypeName(e)}formatDate(e){if(!e)return"Datum unbekannt";try{let t;return e.toDate?t=e.toDate():e.seconds?t=new Date(e.seconds*1e3):t=new Date(e),t.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Erreur formatage date:",t),"Datum fehler"}}trackByAfroshop(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(te(Ww),te(Jt),te(ir),te(fo),te(Kw),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-admin"]],decls:8,vars:2,consts:[[1,"admin-container"],[1,"admin-header"],["class","admin-panel",4,"ngIf"],["class","auth-required",4,"ngIf"],[1,"admin-panel"],[1,"seeding-section"],[1,"section-header"],[1,"data-info"],[1,"action-section"],[1,"seed-btn",3,"click","disabled"],[4,"ngIf"],[1,"clean-btn",3,"click","disabled"],["class","progress-indicator",4,"ngIf"],["class","message",3,"class",4,"ngIf"],[1,"management-section"],["class","afroshops-list",4,"ngIf"],["class","load-button",4,"ngIf"],[1,"diagnostic-section"],["routerLink","/geocoding-diagnostic",1,"diagnostic-btn"],[1,"diagnostic-desc"],[1,"navigation-section"],[1,"nav-btn",3,"click"],[1,"progress-indicator"],[1,"spinner"],[1,"message"],[1,"afroshops-list"],[1,"list-header"],[1,"refresh-btn",3,"click","disabled"],["class","afroshop-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"afroshop-item"],[1,"afroshop-info"],[1,"basic-info"],[1,"type"],[1,"location"],[1,"meta-info"],[1,"id"],[1,"actions"],["title","Afroshop bearbeiten",1,"edit-btn",3,"click"],["title","Afroshop l\xF6schen",1,"delete-btn",3,"click","disabled"],[1,"load-button"],[1,"load-btn",3,"click","disabled"],[1,"auth-required"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),v(3,"\u{1F527} AfroConnect - Administration"),m(),y(4,"p"),v(5,"Outils pour g\xE9rer la base de donn\xE9es d'Afroshops"),m()(),ce(6,Mce,70,13,"div",2)(7,Pce,5,0,"div",3),m()),t&2&&(N(6),z("ngIf",r.isAuthenticated),N(),z("ngIf",!r.isAuthenticated))},dependencies:[zt,tr,un,_r,rr],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.admin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;font-size:2.5rem;margin-bottom:.5rem}.admin-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem}.admin-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.seeding-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;font-size:1.8rem;margin-bottom:.5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.data-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:12px;padding:1.5rem;margin-bottom:2rem}.data-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:1rem}.data-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.action-section[_ngcontent-%COMP%]{text-align:center;margin:2rem 0;display:flex;flex-direction:column;gap:1rem}.seed-btn[_ngcontent-%COMP%], .clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px #27ae604d;min-width:300px;margin:0 auto}.clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);box-shadow:0 6px 20px #e74c3c4d}.seed-btn[_ngcontent-%COMP%]:hover:not(:disabled), .clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 12px 30px #27ae6066}.clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 12px 30px #e74c3c66}.seed-btn[_ngcontent-%COMP%]:disabled, .clean-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a}.progress-indicator[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #27ae60;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-top:1.5rem;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.diagnostic-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:#f1f8ff;border:1px solid #d1ecf1;border-radius:12px}.diagnostic-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#06c;font-size:1.6rem}.diagnostic-btn[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;padding:.8rem 1.5rem;border-radius:10px;text-decoration:none;font-weight:500;transition:all .3s ease;border:none;cursor:pointer}.diagnostic-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #17a2b84d;text-decoration:none;color:#fff}.diagnostic-desc[_ngcontent-%COMP%]{margin-top:.8rem;color:#6c757d;font-size:.9rem;line-height:1.4}.navigation-section[_ngcontent-%COMP%]{text-align:center;padding-top:2rem;border-top:1px solid #e9ecef}.nav-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:10px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block}.nav-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.auth-required[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:#fff3cd;border:1px solid #ffeaa7;border-radius:12px;color:#856404}.auth-required[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#856404;margin-bottom:1rem}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.admin-panel[_ngcontent-%COMP%]{padding:1.5rem}.seed-btn[_ngcontent-%COMP%]{min-width:auto;width:100%;padding:1rem}.data-info[_ngcontent-%COMP%]{padding:1rem}}.management-section[_ngcontent-%COMP%]{margin-top:3rem;padding-top:2rem;border-top:2px solid #e9ecef}.management-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:1.8rem}.afroshops-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #dee2e6;overflow:hidden;margin-top:1rem}.list-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin:0;font-size:1.2rem}.refresh-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#138496);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #17a2b84d}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.afroshop-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f1f3f4;transition:background-color .3s ease}.afroshop-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.afroshop-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.afroshop-info[_ngcontent-%COMP%]{flex:1}.basic-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 .25rem;font-size:1.1rem}.basic-info[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0 0 .25rem;font-weight:600}.basic-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:#495057;font-size:.85rem;margin:0}.meta-info[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.meta-info[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{background:#e9ecef;color:#495057;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-family:monospace}.actions[_ngcontent-%COMP%]{margin-left:1rem;display:flex;gap:.5rem;align-items:center}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d;background:linear-gradient(135deg,#218838,#1e7e34)}.delete-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d;background:linear-gradient(135deg,#c82333,#a71e2a)}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.load-button[_ngcontent-%COMP%]{text-align:center;padding:2rem}.load-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;border:none;padding:1rem 2rem;border-radius:8px;cursor:pointer;font-size:1rem;transition:all .3s ease}.load-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.load-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.management-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem}.list-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.afroshop-item[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.actions[_ngcontent-%COMP%]{margin-left:0;width:100%}.delete-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.meta-info[_ngcontent-%COMP%]{justify-content:center}}"]})};function xce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F5FA}\uFE0F Tester"),m())}function Rce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Test..."),m())}function kce(n,e){if(n&1&&(y(0,"div",21)(1,"h4"),v(2,"\u2705 G\xE9ocodage R\xE9ussi"),m(),y(3,"p")(4,"strong"),v(5,"Coordonn\xE9es:"),m(),v(6),m(),y(7,"p")(8,"strong"),v(9,"Adresse format\xE9e:"),m(),v(10),m(),y(11,"p")(12,"strong"),v(13,"Pr\xE9cision:"),m(),v(14),m()()),n&2){let t=K(3);N(6),xr(" ",t.testResult.lat,", ",t.testResult.lng,""),N(4),Ve(" ",t.testResult.formatted_address,""),N(4),Ve(" ",t.testResult.accuracy,"")}}function Oce(n,e){n&1&&(y(0,"div",22)(1,"h4"),v(2,"\u274C G\xE9ocodage \xC9chou\xE9"),m(),y(3,"p"),v(4,"L'adresse n'a pas pu \xEAtre g\xE9ocod\xE9e."),m(),y(5,"p")(6,"em"),v(7,"V\xE9rifiez que l'adresse contient une ville allemande connue."),m()()())}function Nce(n,e){if(n&1&&(y(0,"div",18),ce(1,kce,15,4,"div",19)(2,Oce,8,0,"div",20),m()),n&2){let t=K(2);N(),z("ngIf",t.testResult.success),N(),z("ngIf",!t.testResult.success)}}function Lce(n,e){n&1&&(y(0,"span"),v(1,"\u{1F50D} Auditer tous les Afroshops"),m())}function Fce(n,e){n&1&&(y(0,"span"),v(1,"\u23F3 Audit en cours..."),m())}function Vce(n,e){if(n&1){let t=We();y(0,"div",31)(1,"strong"),v(2),m(),Ye(3,"br"),y(4,"small"),v(5),m(),Ye(6,"br"),y(7,"span",32),v(8),m(),y(9,"button",33),fe("click",function(){let i=oe(t).$implicit,o=K(4);return se(o.regeocodeAfroshop(i))}),v(10," \u{1F504} Re-g\xE9ocoder "),m()()}if(n&2){let t=e.$implicit,r=K(4);N(2),yt(t.name),N(3),yt(t.address),N(3),xr("Coordonn\xE9es: ",t.coordinates.lat,", ",t.coordinates.lng,""),N(),z("disabled",r.isRegeocoding)}}function Uce(n,e){if(n&1&&(y(0,"div",29)(1,"h5"),v(2,"\u26A0\uFE0F Afroshops avec Coordonn\xE9es Invalides"),m(),ce(3,Vce,11,5,"div",30),m()),n&2){let t=K(3);N(3),z("ngForOf",t.invalidAfroshops)}}function Bce(n,e){if(n&1&&(y(0,"div",23)(1,"h4"),v(2,"R\xE9sultats de l'Audit"),m(),y(3,"div",24)(4,"div",25)(5,"span",26),v(6),m(),y(7,"span",27),v(8,"Coordonn\xE9es Valides"),m()(),y(9,"div",25)(10,"span",26),v(11),m(),y(12,"span",27),v(13,"Coordonn\xE9es Invalides"),m()()(),ce(14,Uce,4,1,"div",28),m()),n&2){let t=K(2);N(6),yt(t.validCoordinates),N(5),yt(t.invalidCoordinates),N(3),z("ngIf",t.invalidAfroshops.length>0)}}function jce(n,e){if(n&1){let t=We();y(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),v(4,"\u{1F527} Diagnostic du G\xE9ocodage"),m(),y(5,"a",5),v(6," \u2190 Zur\xFCck zur Admin-Seite "),m()()(),y(7,"div",6)(8,"h3"),v(9,"Test d'Adresse"),m(),y(10,"div",7)(11,"input",8),Se("ngModelChange",function(i){oe(t);let o=K();return De(o.testAddress,i)||(o.testAddress=i),se(i)}),m(),y(12,"button",9),fe("click",function(){oe(t);let i=K();return se(i.testSingleAddress())}),ce(13,xce,2,0,"span",10)(14,Rce,2,0,"span",10),m()(),ce(15,Nce,3,2,"div",11),m(),y(16,"div",6)(17,"h3"),v(18,"Audit des Coordonn\xE9es"),m(),y(19,"button",12),fe("click",function(){oe(t);let i=K();return se(i.auditAfroshops())}),ce(20,Lce,2,0,"span",10)(21,Fce,2,0,"span",10),m(),ce(22,Bce,15,3,"div",13),m(),y(23,"div",6)(24,"h3"),v(25,"Configuration Syst\xE8me"),m(),y(26,"div",14)(27,"div",15)(28,"strong"),v(29,"Mode de g\xE9ocodage:"),m(),y(30,"span",16),v(31),m()(),y(32,"div",15)(33,"strong"),v(34,"Villes support\xE9es:"),m(),y(35,"span"),v(36),m()(),y(37,"div",15)(38,"strong"),v(39,"Estimation par code postal:"),m(),y(40,"span",17),v(41,"\u2705 Activ\xE9e"),m()()()()()}if(n&2){let t=K();N(11),Te("ngModel",t.testAddress),N(),z("disabled",t.isGeocoding),N(),z("ngIf",!t.isGeocoding),N(),z("ngIf",t.isGeocoding),N(),z("ngIf",t.testResult),N(4),z("disabled",t.isAuditing),N(),z("ngIf",!t.isAuditing),N(),z("ngIf",t.isAuditing),N(),z("ngIf",t.auditResults.length>0),N(9),yt(t.geocodingMode),N(5),Ve("",t.supportedCitiesCount," villes")}}function zce(n,e){n&1&&(y(0,"div",34),v(1," \u{1F512} Acc\xE8s r\xE9serv\xE9 aux administrateurs "),m())}var Yw=class n{constructor(e,t,r){this.geocodingService=e;this.firebaseService=t;this.authService=r;this.authService.user$.subscribe(i=>{this.isAdmin=i?.email==="youssoufdiamaldiallo@gmail.com"})}isAdmin=!1;testAddress="";isGeocoding=!1;isAuditing=!1;isRegeocoding=!1;testResult=null;auditResults=[];invalidAfroshops=[];get validCoordinates(){return this.auditResults.filter(e=>this.geocodingService.isValidCoordinates(e.coordinates.lat,e.coordinates.lng)).length}get invalidCoordinates(){return this.auditResults.length-this.validCoordinates}get geocodingMode(){return"Fallback (Villes pr\xE9d\xE9finies)"}get supportedCitiesCount(){return 50}testSingleAddress(){return S(this,null,function*(){if(this.testAddress.trim()){this.isGeocoding=!0,this.testResult=null;try{this.geocodingService.geocodeAddress(this.testAddress).subscribe({next:e=>{this.isGeocoding=!1,e?this.testResult={success:!0,lat:e.lat,lng:e.lng,formatted_address:e.formatted_address,accuracy:e.accuracy}:this.testResult={success:!1}},error:e=>{this.isGeocoding=!1,this.testResult={success:!1,error:e.message},console.error("Erreur test g\xE9ocodage:",e)}})}catch(e){this.isGeocoding=!1,this.testResult={success:!1},console.error("Erreur test g\xE9ocodage:",e)}}})}auditAfroshops(){return S(this,null,function*(){this.isAuditing=!0,this.auditResults=[],this.invalidAfroshops=[];try{this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.auditResults=e,this.invalidAfroshops=e.filter(t=>!this.geocodingService.isValidCoordinates(t.coordinates.lat,t.coordinates.lng)),console.log(`Audit termin\xE9: ${this.validCoordinates}/${this.auditResults.length} coordonn\xE9es valides`),this.isAuditing=!1},error:e=>{console.error("Erreur audit:",e),this.isAuditing=!1}})}catch(e){console.error("Erreur audit:",e),this.isAuditing=!1}})}regeocodeAfroshop(e){return S(this,null,function*(){this.isRegeocoding=!0;try{this.geocodingService.geocodeAddress(e.address).subscribe({next:t=>S(this,null,function*(){if(t){let r={coordinates:{lat:t.lat,lng:t.lng}};yield this.firebaseService.updateAfroshop(e.id,r);let i=this.invalidAfroshops.findIndex(o=>o.id===e.id);i>=0&&(this.invalidAfroshops[i].coordinates=r.coordinates),console.log(`\u2705 Re-g\xE9ocodage r\xE9ussi pour ${e.name}`)}else console.warn(`\u274C Re-g\xE9ocodage \xE9chou\xE9 pour ${e.name}`);this.isRegeocoding=!1}),error:t=>{console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}catch(t){console.error(`Erreur re-g\xE9ocodage ${e.name}:`,t),this.isRegeocoding=!1}})}static \u0275fac=function(t){return new(t||n)(te(hh),te(ir),te(Jt))};static \u0275cmp=wt({type:n,selectors:[["app-geocoding-diagnostic"]],decls:2,vars:2,consts:[["class","diagnostic-container",4,"ngIf"],["class","no-access",4,"ngIf"],[1,"diagnostic-container"],[1,"diagnostic-header"],[1,"header-content"],["routerLink","/admin",1,"back-to-admin-btn"],[1,"test-section"],[1,"input-group"],["type","text","placeholder","Saisissez une adresse allemande...",1,"test-input",3,"ngModelChange","ngModel"],[1,"test-btn",3,"click","disabled"],[4,"ngIf"],["class","result-box",4,"ngIf"],[1,"audit-btn",3,"click","disabled"],["class","audit-results",4,"ngIf"],[1,"config-info"],[1,"config-item"],[1,"mode-indicator"],[1,"feature-enabled"],[1,"result-box"],["class","success-result",4,"ngIf"],["class","error-result",4,"ngIf"],[1,"success-result"],[1,"error-result"],[1,"audit-results"],[1,"stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],["class","invalid-list",4,"ngIf"],[1,"invalid-list"],["class","invalid-item",4,"ngFor","ngForOf"],[1,"invalid-item"],[1,"coordinates"],[1,"regeocode-btn",3,"click","disabled"],[1,"no-access"]],template:function(t,r){t&1&&ce(0,jce,42,11,"div",0)(1,zce,2,0,"div",1),t&2&&(z("ngIf",r.isAdmin),N(),z("ngIf",!r.isAdmin))},dependencies:[zt,tr,un,uo,Br,lo,yi,_r,rr],styles:[".diagnostic-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.diagnostic-header[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e9ecef}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.back-to-admin-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;padding:8px 16px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:5px}.back-to-admin-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6268,#495057);transform:translateY(-1px);text-decoration:none;color:#fff}.test-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.test-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;border-bottom:2px solid #007bff;padding-bottom:8px}.input-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px}.test-input[_ngcontent-%COMP%]{flex:1;padding:10px;border:2px solid #ddd;border-radius:4px;font-size:14px}.test-btn[_ngcontent-%COMP%], .audit-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:600}.test-btn[_ngcontent-%COMP%]:hover, .audit-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.test-btn[_ngcontent-%COMP%]:disabled, .audit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.result-box[_ngcontent-%COMP%]{margin-top:15px;padding:15px;border-radius:6px}.success-result[_ngcontent-%COMP%]{background:#d4edda;border:1px solid #c3e6cb;color:#155724}.error-result[_ngcontent-%COMP%]{background:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.stats[_ngcontent-%COMP%]{display:flex;gap:20px;margin:15px 0}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#fff;border-radius:6px;box-shadow:0 1px 3px #0000001a}.stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#007bff}.stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:5px}.invalid-item[_ngcontent-%COMP%]{background:#fff;padding:15px;margin:10px 0;border-radius:6px;border-left:4px solid #ffc107}.coordinates[_ngcontent-%COMP%]{color:#666;font-family:monospace}.regeocode-btn[_ngcontent-%COMP%]{margin-top:8px;padding:5px 10px;background:#28a745;color:#fff;border:none;border-radius:3px;font-size:12px;cursor:pointer}.config-info[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px}.config-item[_ngcontent-%COMP%]{margin:10px 0;display:flex;justify-content:space-between}.mode-indicator[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:14px}.feature-enabled[_ngcontent-%COMP%]{color:#28a745}.no-access[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:18px}"]})};var gl=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(xn(1),me(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(ue(Jt),ue(It))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var z5=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:jw},{path:"afroshop/:id",component:zw},{path:"add-afroshop",component:yg,canActivate:[gl]},{path:"edit-afroshop/:id",component:yg,canActivate:[gl]},{path:"admin",component:Qw,canActivate:[gl]},{path:"geocoding-diagnostic",component:Yw,canActivate:[gl]},{path:"login",component:$w},{path:"register",component:Hw},{path:"privacy",component:qw},{path:"terms",component:Gw},{path:"**",redirectTo:"/gallery"}];var $5={providers:[xN({eventCoalescing:!0}),QC(z5),wC(),mL(gL()),HF(()=>qF(pl.firebase)),Aj(()=>Rj()),FV(()=>BV()),s5(()=>c5())]};function $ce(n,e){if(n&1){let t=We();y(0,"div",19)(1,"span",20),v(2),m(),y(3,"button",21),fe("click",function(){oe(t);let i=K();return se(i.logout())}),v(4," \u{1F6AA} Abmelden "),m()()}if(n&2){let t=e.ngIf;N(2),Ve("Hallo, ",t.displayName||t.email,"!")}}function Hce(n,e){n&1&&(y(0,"div",22)(1,"a",23),v(2,"\u{1F510} Anmelden"),m(),y(3,"a",24),v(4,"\u{1F4DD} Registrieren"),m()())}var Jw=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return S(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(te(Jt),te(It))};static \u0275cmp=wt({type:n,selectors:[["app-root"]],decls:34,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"rotating-globe"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["href","mailto:contact@afroconnect.de",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1")(6,"span",5),v(7,"\u{1F30D}"),m(),v(8," AfroConnect"),m()(),y(9,"p",6),v(10,"Verbinde dich mit der afrikanischen Community in Deutschland"),m()(),y(11,"div",7),ce(12,$ce,5,1,"div",8),Ui(13,"async"),ce(14,Hce,5,0,"div",9),Ui(15,"async"),m()()(),y(16,"main",10),Ye(17,"router-outlet"),m(),y(18,"footer",11)(19,"div",12)(20,"div",13)(21,"p"),v(22,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),m()(),y(23,"div",14)(24,"a",15),v(25,"Datenschutz"),m(),y(26,"span",16),v(27,"|"),m(),y(28,"a",17),v(29,"AGB"),m(),y(30,"span",16),v(31,"|"),m(),y(32,"a",18),v(33,"Kontakt"),m()()()()()),t&2&&(N(12),z("ngIf",Bi(13,2,r.user$)),N(2),z("ngIf",!Bi(15,4,r.user$)))},dependencies:[zt,un,df,Of,_r,rr],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (min-width: 1024px){.header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 2rem;gap:2rem}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;font-weight:400;letter-spacing:1px;text-align:left}.welcome-message[_ngcontent-%COMP%]{font-size:1.3rem;margin-top:.5rem;text-align:left}.app-main[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2.5rem 2rem;background:var(--background-light);border-radius:18px;box-shadow:0 2px 24px #00000012}.features[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:2.5rem}.feature-card[_ngcontent-%COMP%]{padding:2.5rem;font-size:1.1rem}.app-footer[_ngcontent-%COMP%]{font-size:1.1rem;padding:2rem 0}.footer-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 2rem}}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};mC(Jw,$5).catch(n=>console.error(n));
