var sz=Object.defineProperty,az=Object.defineProperties;var cz=Object.getOwnPropertyDescriptors;var gg=Object.getOwnPropertySymbols,lz=Object.getPrototypeOf,Vx=Object.prototype.hasOwnProperty,Ux=Object.prototype.propertyIsEnumerable,uz=Reflect.get;var Fx=(n,e,t)=>e in n?sz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})Vx.call(e,t)&&Fx(n,t,e[t]);if(gg)for(var t of gg(e))Ux.call(e,t)&&Fx(n,t,e[t]);return n},le=(n,e)=>az(n,cz(e));var sh=(n,e)=>{var t={};for(var r in n)Vx.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&gg)for(var r of gg(n))e.indexOf(r)<0&&Ux.call(n,r)&&(t[r]=n[r]);return t};var gi=(n,e,t)=>uz(lz(n),t,e);var T=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(d){i(d)}},s=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function Tw(n,e){return Object.is(n,e)}var Jt=null,mg=!1,Cw=1,_r=Symbol("SIGNAL");function Be(n){let e=Jt;return Jt=n,e}function Sw(){return Jt}var ch={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lh(n){if(mg)throw new Error("");if(Jt===null)return;Jt.consumerOnSignalRead(n);let e=Jt.nextProducerIndex++;if(wg(Jt),e<Jt.producerNode.length&&Jt.producerNode[e]!==n&&ah(Jt)){let t=Jt.producerNode[e];vg(t,Jt.producerIndexOfThis[e])}Jt.producerNode[e]!==n&&(Jt.producerNode[e]=n,Jt.producerIndexOfThis[e]=ah(Jt)?jx(n,Jt,e):0),Jt.producerLastReadVersion[e]=n.version}function Bx(){Cw++}function Dw(n){if(!(ah(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cw)){if(!n.producerMustRecompute(n)&&!Rw(n)){bw(n);return}n.producerRecomputeValue(n),bw(n)}}function Aw(n){if(n.liveConsumerNode===void 0)return;let e=mg;mg=!0;try{for(let t of n.liveConsumerNode)t.dirty||dz(t)}finally{mg=e}}function Mw(){return Jt?.consumerAllowSignalWrites!==!1}function dz(n){n.dirty=!0,Aw(n),n.consumerMarkedDirty?.(n)}function bw(n){n.dirty=!1,n.lastCleanEpoch=Cw}function _g(n){return n&&(n.nextProducerIndex=0),Be(n)}function xw(n,e){if(Be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ah(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)vg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Rw(n){wg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Dw(t),r!==t.version))return!0}return!1}function Pw(n){if(wg(n),ah(n))for(let e=0;e<n.producerNode.length;e++)vg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jx(n,e,t){if(zx(n),n.liveConsumerNode.length===0&&$x(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=jx(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function vg(n,e){if(zx(n),n.liveConsumerNode.length===1&&$x(n))for(let r=0;r<n.producerNode.length;r++)vg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];wg(i),i.producerIndexOfThis[r]=e}}function ah(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function wg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function zx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $x(n){return n.producerNode!==void 0}function kw(n,e){let t=Object.create(hz);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Dw(t),lh(t),t.value===yg)throw t.error;return t.value};return r[_r]=t,r}var Ew=Symbol("UNSET"),Iw=Symbol("COMPUTING"),yg=Symbol("ERRORED"),hz=le(j({},ch),{value:Ew,dirty:!0,error:null,equal:Tw,kind:"computed",producerMustRecompute(n){return n.value===Ew||n.value===Iw},producerRecomputeValue(n){if(n.value===Iw)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Iw;let t=_g(n),r,i=!1;try{r=n.computation(),Be(null),i=e!==Ew&&e!==yg&&r!==yg&&n.equal(e,r)}catch(o){r=yg,n.error=o}finally{xw(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fz(){throw new Error}var qx=fz;function Hx(n){qx(n)}function Ow(n){qx=n}var pz=null;function Nw(n,e){let t=Object.create(Eg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(lh(t),t.value);return r[_r]=t,r}function uh(n,e){Mw()||Hx(n),n.equal(n.value,e)||(n.value=e,gz(n))}function Lw(n,e){Mw()||Hx(n),uh(n,e(n.value))}var Eg=le(j({},ch),{equal:Tw,value:void 0,kind:"signal"});function gz(n){n.version++,Bx(),Aw(n),pz?.()}function Fw(n){let e=Be(null);try{return n()}finally{Be(e)}}var Vw;function dh(){return Vw}function ro(n){let e=Vw;return Vw=n,e}var Ig=Symbol("NotFound");function Me(n){return typeof n=="function"}function yl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bg=yl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function hh(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Me(r))try{r()}catch(o){e=o instanceof bg?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Gx(o)}catch(s){e=e??[],s instanceof bg?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Gx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&hh(t,e)}remove(e){let{_finalizers:t}=this;t&&hh(t,e),e instanceof n&&e._removeParent(this)}};Ot.EMPTY=(()=>{let n=new Ot;return n.closed=!0,n})();var Uw=Ot.EMPTY;function Tg(n){return n instanceof Ot||n&&"closed"in n&&Me(n.remove)&&Me(n.add)&&Me(n.unsubscribe)}function Gx(n){Me(n)?n():n.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _l={setTimeout(n,e,...t){let{delegate:r}=_l;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=_l;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cg(n){_l.setTimeout(()=>{let{onUnhandledError:e}=Lr;if(e)e(n);else throw n})}function fh(){}var Wx=Bw("C",void 0,void 0);function Kx(n){return Bw("E",void 0,n)}function Qx(n){return Bw("N",n,void 0)}function Bw(n,e,t){return{kind:n,value:e,error:t}}var Oa=null;function vl(n){if(Lr.useDeprecatedSynchronousErrorHandling){let e=!Oa;if(e&&(Oa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Oa;if(Oa=null,t)throw r}}else n()}function Yx(n){Lr.useDeprecatedSynchronousErrorHandling&&Oa&&(Oa.errorThrown=!0,Oa.error=n)}var Na=class extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tg(e)&&e.add(this)):this.destination=Ez}static create(e,t,r){return new wl(e,t,r)}next(e){this.isStopped?zw(Qx(e),this):this._next(e)}error(e){this.isStopped?zw(Kx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zw(Wx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vz=Function.prototype.bind;function jw(n,e){return vz.call(n,e)}var $w=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Sg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Sg(r)}else Sg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Sg(t)}}},wl=class extends Na{constructor(e,t,r){super();let i;if(Me(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Lr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jw(e.next,o),error:e.error&&jw(e.error,o),complete:e.complete&&jw(e.complete,o)}):i=e}this.destination=new $w(i)}};function Sg(n){Lr.useDeprecatedSynchronousErrorHandling?Yx(n):Cg(n)}function wz(n){throw n}function zw(n,e){let{onStoppedNotification:t}=Lr;t&&_l.setTimeout(()=>t(n,e))}var Ez={closed:!0,next:fh,error:wz,complete:fh};var El=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ir(n){return n}function Dg(...n){return qw(n)}function qw(n){return n.length===0?ir:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bz(t)?t:new wl(t,r,i);return vl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Jx(r),new r((i,o)=>{let s=new wl({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[El](){return this}pipe(...t){return qw(t)(this)}toPromise(t){return t=Jx(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Jx(n){var e;return(e=n??Lr.Promise)!==null&&e!==void 0?e:Promise}function Iz(n){return n&&Me(n.next)&&Me(n.error)&&Me(n.complete)}function bz(n){return n&&n instanceof Na||Iz(n)&&Tg(n)}function Hw(n){return Me(n?.lift)}function Ge(n){return e=>{if(Hw(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function je(n,e,t,r,i){return new Gw(n,e,t,r,i)}var Gw=class extends Na{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Il(){return Ge((n,e)=>{let t=null;n._refCount++;let r=je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var bl=class extends Le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;let t=this.getSubject();e.add(this.source.subscribe(je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return Il()(this)}};var Zx=yl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class n extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ag(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Zx}next(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Uw:(this.currentObservers=null,o.push(t),new Ot(()=>{this.currentObservers=null,hh(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Le;return t.source=this,t}}return n.create=(e,t)=>new Ag(e,t),n})(),Ag=class extends At{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uw}};var Nt=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Un=new Le(n=>n.complete());function Xx(n){return n&&Me(n.schedule)}function eR(n){return n[n.length-1]}function Mg(n){return Me(eR(n))?n.pop():void 0}function ys(n){return Xx(eR(n))?n.pop():void 0}function xg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nR(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(r.next(h))}catch(g){s(g)}}function c(h){try{d(r.throw(h))}catch(g){s(g)}}function d(h){h.done?o(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function tR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function La(n){return this instanceof La?(this.v=n,this):new La(n)}function rR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(S){return function(k){return Promise.resolve(k).then(S,g)}}function a(S,k){r[S]&&(i[S]=function(V){return new Promise(function(O,H){o.push([S,V,O,H])>1||c(S,V)})},k&&(i[S]=k(i[S])))}function c(S,k){try{d(r[S](k))}catch(V){C(o[0][3],V)}}function d(S){S.value instanceof La?Promise.resolve(S.value.v).then(h,g):C(o[0][2],S)}function h(S){c("next",S)}function g(S){c("throw",S)}function C(S,k){S(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function iR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tR=="function"?tR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var Rg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Pg(n){return Me(n?.then)}function kg(n){return Me(n[El])}function Og(n){return Symbol.asyncIterator&&Me(n?.[Symbol.asyncIterator])}function Ng(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Tz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lg=Tz();function Fg(n){return Me(n?.[Lg])}function Vg(n){return rR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield La(t.read());if(i)return yield La(void 0);yield yield La(r)}}finally{t.releaseLock()}})}function Ug(n){return Me(n?.getReader)}function Ut(n){if(n instanceof Le)return n;if(n!=null){if(kg(n))return Cz(n);if(Rg(n))return Sz(n);if(Pg(n))return Dz(n);if(Og(n))return oR(n);if(Fg(n))return Az(n);if(Ug(n))return Mz(n)}throw Ng(n)}function Cz(n){return new Le(e=>{let t=n[El]();if(Me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sz(n){return new Le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Dz(n){return new Le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cg)})}function Az(n){return new Le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oR(n){return new Le(e=>{xz(n,e).catch(t=>e.error(t))})}function Mz(n){return oR(Vg(n))}function xz(n,e){var t,r,i,o;return nR(this,void 0,void 0,function*(){try{for(t=iR(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Bg(n,e=0){return Ge((t,r)=>{t.subscribe(je(r,i=>Bn(r,n,()=>r.next(i),e),()=>Bn(r,n,()=>r.complete(),e),i=>Bn(r,n,()=>r.error(i),e)))})}function jg(n,e=0){return Ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sR(n,e){return Ut(n).pipe(jg(e),Bg(e))}function aR(n,e){return Ut(n).pipe(jg(e),Bg(e))}function cR(n,e){return new Le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lR(n,e){return new Le(t=>{let r;return Bn(t,e,()=>{r=n[Lg](),Bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Me(r?.return)&&r.return()})}function zg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Le(t=>{Bn(t,e,()=>{let r=n[Symbol.asyncIterator]();Bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function uR(n,e){return zg(Vg(n),e)}function dR(n,e){if(n!=null){if(kg(n))return sR(n,e);if(Rg(n))return cR(n,e);if(Pg(n))return aR(n,e);if(Og(n))return zg(n,e);if(Fg(n))return lR(n,e);if(Ug(n))return uR(n,e)}throw Ng(n)}function dt(n,e){return e?dR(n,e):Ut(n)}function _e(...n){let e=ys(n);return dt(n,e)}function Tl(n,e){let t=Me(n)?n:()=>n,r=i=>i.error(t());return new Le(e?i=>e.schedule(r,0,i):r)}function Ww(n){return!!n&&(n instanceof Le||Me(n.lift)&&Me(n.subscribe))}var io=yl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function be(n,e){return Ge((t,r)=>{let i=0;t.subscribe(je(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Rz}=Array;function Pz(n,e){return Rz(e)?n(...e):n(e)}function $g(n){return be(e=>Pz(n,e))}var{isArray:kz}=Array,{getPrototypeOf:Oz,prototype:Nz,keys:Lz}=Object;function qg(n){if(n.length===1){let e=n[0];if(kz(e))return{args:e,keys:null};if(Fz(e)){let t=Lz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Fz(n){return n&&typeof n=="object"&&Oz(n)===Nz}function Hg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Fa(...n){let e=ys(n),t=Mg(n),{args:r,keys:i}=qg(n);if(r.length===0)return dt([],e);let o=new Le(Vz(r,e,i?s=>Hg(i,s):ir));return t?o.pipe($g(t)):o}function Vz(n,e,t=ir){return r=>{hR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hR(e,()=>{let d=dt(n[c],e),h=!1;d.subscribe(je(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hR(n,e,t){n?Bn(t,n,e):e()}function fR(n,e,t,r,i,o,s,a){let c=[],d=0,h=0,g=!1,C=()=>{g&&!c.length&&!d&&e.complete()},S=V=>d<r?k(V):c.push(V),k=V=>{o&&e.next(V),d++;let O=!1;Ut(t(V,h++)).subscribe(je(e,H=>{i?.(H),o?S(H):e.next(H)},()=>{O=!0},void 0,()=>{if(O)try{for(d--;c.length&&d<r;){let H=c.shift();s?Bn(e,s,()=>k(H)):k(H)}C()}catch(H){e.error(H)}}))};return n.subscribe(je(e,S,()=>{g=!0,C()})),()=>{a?.()}}function Lt(n,e,t=1/0){return Me(e)?Lt((r,i)=>be((o,s)=>e(r,o,i,s))(Ut(n(r,i))),t):(typeof e=="number"&&(t=e),Ge((r,i)=>fR(r,i,n,t)))}function Cl(n=1/0){return Lt(ir,n)}function pR(){return Cl(1)}function Sl(...n){return pR()(dt(n,ys(n)))}function Gg(n){return new Le(e=>{Ut(n()).subscribe(e)})}function Kw(...n){let e=Mg(n),{args:t,keys:r}=qg(n),i=new Le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let h=0;h<s;h++){let g=!1;Ut(t[h]).subscribe(je(o,C=>{g||(g=!0,d--),a[h]=C},()=>c--,void 0,()=>{(!c||!g)&&(d||o.next(r?Hg(r,a):a),o.complete())}))}});return e?i.pipe($g(e)):i}function jn(n,e){return Ge((t,r)=>{let i=0;t.subscribe(je(r,o=>n.call(e,o,i++)&&r.next(o)))})}function oo(n){return Ge((e,t)=>{let r=null,i=!1,o;r=e.subscribe(je(t,void 0,void 0,s=>{o=Ut(n(s,oo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,d=0;o.subscribe(je(s,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function _s(n,e){return Me(e)?Lt(n,e,1):Lt(n,1)}function vs(n){return Ge((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function In(n){return n<=0?()=>Un:Ge((e,t)=>{let r=0;e.subscribe(je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wg(n=Uz){return Ge((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Uz(){return new io}function ph(n){return Ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function so(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,o)=>n(i,o,r)):ir,In(1),t?vs(e):Wg(()=>new io))}function Dl(n){return n<=0?()=>Un:Ge((e,t)=>{let r=[];e.subscribe(je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qw(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jn((i,o)=>n(i,o,r)):ir,Dl(1),t?vs(e):Wg(()=>new io))}function Kg(n,e){return Ge(gR(n,e,arguments.length>=2,!0))}function Qg(...n){let e=ys(n);return Ge((t,r)=>{(e?Sl(n,t,e):Sl(n,t)).subscribe(r)})}function zn(n,e){return Ge((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(je(r,c=>{i?.unsubscribe();let d=0,h=o++;Ut(n(c,h)).subscribe(i=je(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Al(n){return Ge((e,t)=>{Ut(n).subscribe(je(t,()=>t.complete(),fh)),!t.closed&&e.subscribe(t)})}function Zt(n,e,t){let r=Me(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(je(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ir}var eE={JSACTION:"jsaction"},tE={JSACTION:"__jsaction",OWNER:"__owner"},vR={};function Bz(n){return n[tE.JSACTION]}function mR(n,e){n[tE.JSACTION]=e}function jz(n){return vR[n]}function zz(n,e){vR[n]=e}var me={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},$z=[me.MOUSEENTER,me.MOUSELEAVE,"pointerenter","pointerleave"],yde=[me.CLICK,me.DBLCLICK,me.FOCUSIN,me.FOCUSOUT,me.KEYDOWN,me.KEYUP,me.KEYPRESS,me.MOUSEOVER,me.MOUSEOUT,me.SUBMIT,me.TOUCHSTART,me.TOUCHEND,me.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],qz=[me.FOCUS,me.BLUR,me.ERROR,me.LOAD,me.TOGGLE],nE=n=>qz.indexOf(n)>=0;function Hz(n){return n===me.MOUSEENTER?me.MOUSEOVER:n===me.MOUSELEAVE?me.MOUSEOUT:n===me.POINTERENTER?me.POINTEROVER:n===me.POINTERLEAVE?me.POINTEROUT:n}function Gz(n,e,t,r){let i=!1;nE(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function Wz(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Kz(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var yR=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Qz(n){return n.which===2||n.which==null&&n.button===4}function Yz(n){return yR&&n.metaKey||!yR&&n.ctrlKey||Qz(n)||n.shiftKey}function Jz(n,e,t){let r=n.relatedTarget;return(n.type===me.MOUSEOVER&&e===me.MOUSEENTER||n.type===me.MOUSEOUT&&e===me.MOUSELEAVE||n.type===me.POINTEROVER&&e===me.POINTERENTER||n.type===me.POINTEROUT&&e===me.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function Zz(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===me.MOUSEOVER?t.type=me.MOUSEENTER:n.type===me.MOUSEOUT?t.type=me.MOUSELEAVE:n.type===me.POINTEROVER?t.type=me.POINTERENTER:t.type=me.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Xz=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Xg=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Xz&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Gz(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)Wz(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},e3={EVENT_ACTION_SEPARATOR:":"};function ws(n){return n.eventType}function rE(n,e){n.eventType=e}function Jg(n){return n.event}function wR(n,e){n.event=e}function ER(n){return n.targetElement}function IR(n,e){n.targetElement=e}function bR(n){return n.eic}function t3(n,e){n.eic=e}function n3(n){return n.timeStamp}function r3(n,e){n.timeStamp=e}function Zg(n){return n.eia}function TR(n,e,t){n.eia=[e,t]}function Yw(n){n.eia=void 0}function Yg(n){return n[1]}function i3(n){return n.eirp}function CR(n,e){n.eirp=e}function SR(n){return n.eir}function DR(n,e){n.eir=e}function AR(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function o3(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var Jw=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return ws(this.eventInfo)}setEventType(e){rE(this.eventInfo,e)}getEvent(){return Jg(this.eventInfo)}setEvent(e){wR(this.eventInfo,e)}getTargetElement(){return ER(this.eventInfo)}setTargetElement(e){IR(this.eventInfo,e)}getContainer(){return bR(this.eventInfo)}setContainer(e){t3(this.eventInfo,e)}getTimestamp(){return n3(this.eventInfo)}setTimestamp(e){r3(this.eventInfo,e)}getAction(){let e=Zg(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){Yw(this.eventInfo);return}TR(this.eventInfo,e.name,e.element)}getIsReplay(){return i3(this.eventInfo)}setIsReplay(e){CR(this.eventInfo,e)}getResolved(){return SR(this.eventInfo)}setResolved(e){DR(this.eventInfo,e)}clone(){return new n(AR(this.eventInfo))}},s3={},a3=/\s*;\s*/,c3=me.CLICK,Zw=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&ws(e)===me.CLICK&&Yz(Jg(e))?rE(e,me.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){SR(e)||(this.populateAction(e,ER(e)),DR(e,!0))}resolveParentAction(e){let t=Zg(e),r=t&&Yg(t);Yw(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==bR(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Zg(e));)r=this.getParentNode(r);let i=Zg(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(ws(e)===me.MOUSEENTER||ws(e)===me.MOUSELEAVE||ws(e)===me.POINTERENTER||ws(e)===me.POINTERLEAVE)))if(Jz(Jg(e),ws(e),Yg(i))){let o=Zz(Jg(e),Yg(i));wR(e,o),IR(e,Yg(i))}else Yw(e)}getParentNode(e){let t=e[tE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[ws(t)];i!==void 0&&TR(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Bz(e);if(!t){let r=e.getAttribute(eE.JSACTION);if(!r)t=s3,mR(e,t);else{if(t=jz(r),!t){t={};let i=r.split(a3);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(e3.EVENT_ACTION_SEPARATOR),c=a!==-1,d=c?s.substr(0,a).trim():c3,h=c?s.substr(a+1).trim():s;t[d]=h}zz(r,t)}mR(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},MR=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(MR||{}),Xw=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new Jw(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&l3(r.element,t)&&Kz(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function l3(n,e){return n.tagName==="A"&&(e.getEventType()===me.CLICK||e.getEventType()===me.CLICKMOD)}var xR=Symbol.for("propagationStopped"),iE={REPLAY:101};var u3="`preventDefault` called during event replay.";var d3="`composedPath` called during event replay.",em=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new Zw({clickModSupport:t}),this.dispatcher=new Xw(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&p3(e),h3(e);e.getAction();){if(g3(e),nE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),f3(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function h3(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[xR]=!0,t()};Va(e,"stopPropagation",r),Va(e,"stopImmediatePropagation",r)}function f3(n){return!!n.getEvent()[xR]}function p3(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);Va(e,"target",t),Va(e,"eventPhase",iE.REPLAY),Va(e,"preventDefault",()=>{throw r(),new Error(u3+"")}),Va(e,"composedPath",()=>{throw new Error(d3+"")})}function g3(n){let e=n.getEvent(),t=n.getAction()?.element;t&&Va(e,"currentTarget",t,{configurable:!0})}function Va(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function RR(n,e){n.ecrd(t=>{e.dispatch(t)},MR.I_AM_THE_JSACTION_FRAMEWORK)}function m3(n){return n?.q??[]}function y3(n){n&&(_R(n.c,n.et,n.h),_R(n.c,n.etc,n.h,!0))}function _R(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var _3=!1,PR=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=_3;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=o3(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){CR(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&$z.indexOf(t)>=0)return;let o=(a,c,d)=>{this.handleEvent(a,c,d)};this.eventHandlers[t]=o;let s=Hz(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),y3(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=AR(i);rE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function kR(n,e=window){return m3(e._ejsas?.[n])}function oE(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var RP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,t){super(qm(e,t)),this.code=e}};function v3(n){return`NG0${Math.abs(n)}`}function qm(n,e){return`${v3(n)}${e?": "+e:""}`}var PP=Symbol("InputSignalNode#UNSET"),w3=le(j({},Eg),{transformFn:void 0,applyValueToInputSignal(n,e){uh(n,e)}});function kP(n,e){let t=Object.create(w3);t.value=n,t.transformFn=e?.transform;function r(){if(lh(t),t.value===PP){let i=null;throw new ie(-950,i)}return t.value}return r[_r]=t,r}function Ch(n){return{toString:n}.toString()}var tm="__parameters__";function E3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function OP(n,e,t){return Ch(()=>{let r=E3(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,d,h){let g=c.hasOwnProperty(tm)?c[tm]:Object.defineProperty(c,tm,{value:[]})[tm];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var fm=globalThis;function pt(n){for(let e in n)if(n[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function I3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function bE(n,e){return n?e?`${n} ${e}`:n:e||""}var b3=pt({__forward_ref__:pt});function Ii(n){return n.__forward_ref__=Ii,n.toString=function(){return Hn(this())},n}function Pn(n){return NP(n)?n():n}function NP(n){return typeof n=="function"&&n.hasOwnProperty(b3)&&n.__forward_ref__===Ii}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $r(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hm(n){return OR(n,FP)||OR(n,VP)}function LP(n){return Hm(n)!==null}function OR(n,e){return n.hasOwnProperty(e)?n[e]:null}function T3(n){let e=n&&(n[FP]||n[VP]);return e||null}function NR(n){return n&&(n.hasOwnProperty(LR)||n.hasOwnProperty(C3))?n[LR]:null}var FP=pt({\u0275prov:pt}),LR=pt({\u0275inj:pt}),VP=pt({ngInjectableDef:pt}),C3=pt({ngInjectorDef:pt}),Y=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UP(n){return n&&!!n.\u0275providers}var S3=pt({\u0275cmp:pt}),D3=pt({\u0275dir:pt}),A3=pt({\u0275pipe:pt}),M3=pt({\u0275mod:pt}),pm=pt({\u0275fac:pt}),_h=pt({__NG_ELEMENT_ID__:pt}),FR=pt({__NG_ENV_ID__:pt});function Vl(n){return typeof n=="string"?n:n==null?"":String(n)}function x3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Vl(n)}function BP(n,e){throw new ie(-200,n)}function fI(n,e){throw new ie(-201,!1)}var Ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ne||{}),TE;function jP(){return TE}function $n(n){let e=TE;return TE=n,e}function zP(n,e,t){let r=Hm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ne.Optional)return null;if(e!==void 0)return e;fI(n,"Injector")}var R3={},Ua=R3,CE="__NG_DI_FLAG__",gm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Ig:Ua,r)}},mm="ngTempTokenPath",P3="ngTokenPath",k3=/\n/gm,O3="\u0275",VR="__source";function N3(n,e=Ne.Default){if(dh()===void 0)throw new ie(-203,!1);if(dh()===null)return zP(n,void 0,e);{let t=dh(),r;return t instanceof gm?r=t.injector:r=t,r.get(n,e&Ne.Optional?null:void 0,e)}}function ue(n,e=Ne.Default){return(jP()||N3)(Pn(n),e)}function z(n,e=Ne.Default){return ue(n,Gm(e))}function Gm(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function SE(n){let e=[];for(let t=0;t<n.length;t++){let r=Pn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,o=Ne.Default;for(let s=0;s<r.length;s++){let a=r[s],c=L3(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ue(i,o))}else e.push(ue(r))}return e}function $P(n,e){return n[CE]=e,n.prototype[CE]=e,n}function L3(n){return n[CE]}function F3(n,e,t,r){let i=n[mm];throw e[VR]&&i.unshift(e[VR]),n.message=V3(`
`+n.message,i,t,r),n[P3]=i,n[mm]=null,n}function V3(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==O3?n.slice(2):n;let i=Hn(e);if(Array.isArray(e))i=e.map(Hn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Hn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(k3,`
  `)}`}var en=$P(OP("Optional"),8);var U3=$P(OP("SkipSelf"),4);function ja(n,e){let t=n.hasOwnProperty(pm);return t?n[pm]:null}function pI(n,e){n.forEach(t=>Array.isArray(t)?pI(t,e):e(t))}function qP(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ym(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function B3(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function j3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function gI(n,e,t){let r=Sh(n,e);return r>=0?n[r|1]=t:(r=~r,j3(n,r,e,t)),r}function sE(n,e){let t=Sh(n,e);if(t>=0)return n[t|1]}function Sh(n,e){return z3(n,e,1)}function z3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var za={},qn=[],Is=new Y(""),HP=new Y("",-1),GP=new Y(""),_m=class{get(e,t=Ua){if(t===Ua){let r=new Error(`NullInjectorError: No provider for ${Hn(e)}!`);throw r.name="NullInjectorError",r}return t}};function WP(n,e){let t=n[M3]||null;if(!t&&e===!0)throw new Error(`Type ${Hn(n)} does not have '\u0275mod' property.`);return t}function bs(n){return n[S3]||null}function KP(n){return n[D3]||null}function QP(n){return n[A3]||null}function bn(n){return{\u0275providers:n}}function $3(...n){return{\u0275providers:mI(!0,n),\u0275fromNgModule:!0}}function mI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return pI(e,s=>{let a=s;DE(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YP(i,o),t}function YP(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];yI(i,o=>{e(o,r)})}}function DE(n,e,t,r){if(n=Pn(n),!n)return!1;let i=null,o=NR(n),s=!o&&bs(n);if(!o&&!s){let c=n.ngModule;if(o=NR(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)DE(d,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{pI(o.imports,h=>{DE(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&YP(d,e)}if(!a){let d=ja(i)||(()=>new i);e({provide:i,useFactory:d,deps:qn},i),e({provide:GP,useValue:i,multi:!0},i),e({provide:Is,useValue:()=>ue(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=n;yI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function yI(n,e){for(let t of n)UP(t)&&(t=t.\u0275providers),Array.isArray(t)?yI(t,e):e(t)}var q3=pt({provide:String,useValue:pt});function JP(n){return n!==null&&typeof n=="object"&&q3 in n}function H3(n){return!!(n&&n.useExisting)}function G3(n){return!!(n&&n.useFactory)}function Ul(n){return typeof n=="function"}function W3(n){return!!n.useClass}var Wm=new Y(""),sm={},UR={},aE;function _I(){return aE===void 0&&(aE=new _m),aE}var kn=class{},vh=class extends kn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ME(e,s=>this.processProvider(s)),this.records.set(HP,Ml(void 0,this)),i.has("environment")&&this.records.set(kn,Ml(void 0,this));let o=this.records.get(Wm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(GP,qn,Ne.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Ig:Ua,r)}destroy(){mh(this),this._destroyed=!0;let e=Be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(e)}}onDestroy(e){return mh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){mh(this);let t=ro(this),r=$n(void 0),i;try{return e()}finally{ro(t),$n(r)}}get(e,t=Ua,r=Ne.Default){if(mh(this),e.hasOwnProperty(FR))return e[FR](this);r=Gm(r);let i,o=ro(this),s=$n(void 0);try{if(!(r&Ne.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=Z3(e)&&Hm(e);d&&this.injectableDefInScope(d)?c=Ml(AE(e),sm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Ne.Self?_I():this.parent;return t=r&Ne.Optional&&t===Ua?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[mm]=a[mm]||[]).unshift(Hn(e)),o)throw a;return F3(a,e,"R3InjectorError",this.source)}else throw a}finally{$n(s),ro(o)}}resolveInjectorInitializers(){let e=Be(null),t=ro(this),r=$n(void 0),i;try{let o=this.get(Is,qn,Ne.Self);for(let s of o)s()}finally{ro(t),$n(r),Be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Hn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pn(e);let t=Ul(e)?e:Pn(e&&e.provide),r=Q3(e);if(!Ul(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ml(void 0,sm,!0),i.factory=()=>SE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Be(null);try{return t.value===UR?BP(Hn(e)):t.value===sm&&(t.value=UR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&J3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function AE(n){let e=Hm(n),t=e!==null?e.factory:ja(n);if(t!==null)return t;if(n instanceof Y)throw new ie(204,!1);if(n instanceof Function)return K3(n);throw new ie(204,!1)}function K3(n){if(n.length>0)throw new ie(204,!1);let t=T3(n);return t!==null?()=>t.factory(n):()=>new n}function Q3(n){if(JP(n))return Ml(void 0,n.useValue);{let e=ZP(n);return Ml(e,sm)}}function ZP(n,e,t){let r;if(Ul(n)){let i=Pn(n);return ja(i)||AE(i)}else if(JP(n))r=()=>Pn(n.useValue);else if(G3(n))r=()=>n.useFactory(...SE(n.deps||[]));else if(H3(n))r=(i,o)=>ue(Pn(n.useExisting),o!==void 0&&o&Ne.Optional?Ne.Optional:void 0);else{let i=Pn(n&&(n.useClass||n.provide));if(Y3(n))r=()=>new i(...SE(n.deps));else return ja(i)||AE(i)}return r}function mh(n){if(n.destroyed)throw new ie(205,!1)}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Y3(n){return!!n.deps}function J3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Z3(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function ME(n,e){for(let t of n)Array.isArray(t)?ME(t,e):t&&UP(t)?ME(t.\u0275providers,e):e(t)}function cr(n,e){let t;n instanceof vh?(mh(n),t=n):t=new gm(n);let r,i=ro(t),o=$n(void 0);try{return e()}finally{ro(i),$n(o)}}function XP(){return jP()!==void 0||dh()!=null}function e1(n){if(!XP())throw new ie(-203,!1)}function X3(n){return typeof n=="function"}var ar=0,Te=1,xe=2,an=3,Ur=4,Qn=5,jr=6,vm=7,Gn=8,yi=9,co=10,ht=11,wh=12,BR=13,Gl=14,Wn=15,Bl=16,xl=17,jl=18,Km=19,t1=20,Es=21,cE=22,wm=23,vr=24,Ol=25,Mt=26,n1=1,lo=6,uo=7,Em=8,Im=9,sr=10;function Br(n){return Array.isArray(n)&&typeof n[n1]=="object"}function bi(n){return Array.isArray(n)&&n[n1]===!0}function r1(n){return(n.flags&4)!==0}function Ka(n){return n.componentOffset>-1}function vI(n){return(n.flags&1)===1}function _i(n){return!!n.template}function Eh(n){return(n[xe]&512)!==0}function Qa(n){return(n[xe]&256)===256}var xE=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function i1(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lr=(()=>{let n=()=>o1;return n.ngInherit=!0,n})();function o1(n){return n.type.prototype.ngOnChanges&&(n.setInput=t5),e5}function e5(){let n=a1(this),e=n?.current;if(e){let t=n.previous;if(t===za)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function t5(n,e,t,r,i){let o=this.declaredInputs[r],s=a1(n)||n5(n,{previous:za,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new xE(d&&d.currentValue,t,c===za),i1(n,e,i,t)}var s1="__ngSimpleChanges__";function a1(n){return n[s1]||null}function n5(n,e){return n[s1]=e}var jR=null;var st=function(n,e=null,t){jR?.(n,e,t)},r5="svg",i5="math";function zr(n){for(;Array.isArray(n);)n=n[ar];return n}function c1(n,e){return zr(e[n])}function qr(n,e){return zr(e[n.index])}function Qm(n,e){return n.data[e]}function l1(n,e){return n[e]}function o5(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vi(n,e){let t=e[n];return Br(t)?t:t[ar]}function wI(n){return(n[xe]&128)===128}function s5(n){return bi(n[an])}function bm(n,e){return e==null?null:n[e]}function u1(n){n[xl]=0}function d1(n){n[xe]&1024||(n[xe]|=1024,wI(n)&&Dh(n))}function a5(n,e){for(;n>0;)e=e[Gl],n--;return e}function Ym(n){return!!(n[xe]&9216||n[vr]?.dirty)}function RE(n){n[co].changeDetectionScheduler?.notify(8),n[xe]&64&&(n[xe]|=1024),Ym(n)&&Dh(n)}function Dh(n){n[co].changeDetectionScheduler?.notify(0);let e=$a(n);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!wI(e)));)e=$a(e)}function h1(n,e){if(Qa(n))throw new ie(911,!1);n[Es]===null&&(n[Es]=[]),n[Es].push(e)}function c5(n,e){if(n[Es]===null)return;let t=n[Es].indexOf(e);t!==-1&&n[Es].splice(t,1)}function $a(n){let e=n[an];return bi(e)?e[an]:e}function f1(n){return n[vm]??=[]}function p1(n){return n.cleanup??=[]}var Ve={lFrame:b1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var PE=!1;function l5(){return Ve.lFrame.elementDepthCount}function u5(){Ve.lFrame.elementDepthCount++}function d5(){Ve.lFrame.elementDepthCount--}function g1(){return Ve.bindingsEnabled}function Wl(){return Ve.skipHydrationRootTNode!==null}function h5(n){return Ve.skipHydrationRootTNode===n}function f5(n){Ve.skipHydrationRootTNode=n}function p5(){Ve.skipHydrationRootTNode=null}function Xe(){return Ve.lFrame.lView}function gn(){return Ve.lFrame.tView}function se(n){return Ve.lFrame.contextLView=n,n[Gn]}function ae(n){return Ve.lFrame.contextLView=null,n}function Yn(){let n=m1();for(;n!==null&&n.type===64;)n=n.parent;return n}function m1(){return Ve.lFrame.currentTNode}function g5(){let n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ah(n,e){let t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function y1(){return Ve.lFrame.isParent}function _1(){Ve.lFrame.isParent=!1}function m5(){return Ve.lFrame.contextLView}function v1(){return PE}function zR(n){let e=PE;return PE=n,e}function y5(){let n=Ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _5(){return Ve.lFrame.bindingIndex}function v5(n){return Ve.lFrame.bindingIndex=n}function Jm(){return Ve.lFrame.bindingIndex++}function EI(n){let e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function w5(){return Ve.lFrame.inI18n}function E5(n,e){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,kE(e)}function I5(){return Ve.lFrame.currentDirectiveIndex}function kE(n){Ve.lFrame.currentDirectiveIndex=n}function b5(n){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function w1(n){Ve.lFrame.currentQueryIndex=n}function T5(n){let e=n[Te];return e.type===2?e.declTNode:e.type===1?n[Qn]:null}function E1(n,e,t){if(t&Ne.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ne.Host);)if(i=T5(o),i===null||(o=o[Gl],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ve.lFrame=I1();return r.currentTNode=e,r.lView=n,!0}function II(n){let e=I1(),t=n[Te];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function I1(){let n=Ve.lFrame,e=n===null?null:n.child;return e===null?b1(n):e}function b1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function T1(){let n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var C1=T1;function bI(){let n=T1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function C5(n){return(Ve.lFrame.contextLView=a5(n,Ve.lFrame.contextLView))[Gn]}function Cs(){return Ve.lFrame.selectedIndex}function qa(n){Ve.lFrame.selectedIndex=n}function Zm(){let n=Ve.lFrame;return Qm(n.tView,n.selectedIndex)}function S1(){return Ve.lFrame.currentNamespace}var D1=!0;function TI(){return D1}function Ss(n){D1=n}function S5(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=o1(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function A1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function am(n,e,t){M1(n,e,3,t)}function cm(n,e,t,r){(n[xe]&3)===t&&M1(n,e,t,r)}function lE(n,e){let t=n[xe];(t&3)===e&&(t&=16383,t+=1,n[xe]=t)}function M1(n,e,t,r){let i=r!==void 0?n[xl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[xl]+=65536),(a<o||o==-1)&&(D5(n,t,e,c),n[xl]=(n[xl]&4294901760)+c+2),c++}function $R(n,e){st(4,n,e);let t=Be(null);try{e.call(n)}finally{Be(t),st(5,n,e)}}function D5(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[xe]>>14<n[xl]>>16&&(n[xe]&3)===e&&(n[xe]+=16384,$R(a,o)):$R(a,o)}var Nl=-1,Ha=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function A5(n){return(n.flags&8)!==0}function M5(n){return(n.flags&16)!==0}function x5(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];R5(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function x1(n){return n===3||n===4||n===6}function R5(n){return n.charCodeAt(0)===64}function Ih(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?qR(n,t,i,null,e[++r]):qR(n,t,i,null,null))}}return n}function qR(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function R1(n){return n!==Nl}function Tm(n){return n&32767}function P5(n){return n>>16}function Cm(n,e){let t=P5(n),r=e;for(;t>0;)r=r[Gl],t--;return r}var OE=!0;function Sm(n){let e=OE;return OE=n,e}var k5=256,P1=k5-1,k1=5,O5=0,mi={};function N5(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_h)&&(r=t[_h]),r==null&&(r=t[_h]=O5++);let i=r&P1,o=1<<i;e.data[n+(i>>k1)]|=o}function Dm(n,e){let t=O1(n,e);if(t!==-1)return t;let r=e[Te];r.firstCreatePass&&(n.injectorIndex=e.length,uE(r.data,n),uE(e,null),uE(r.blueprint,null));let i=CI(n,e),o=n.injectorIndex;if(R1(i)){let s=Tm(i),a=Cm(i,e),c=a[Te].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=i,o}function uE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function O1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function CI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=U1(i),r===null)return Nl;if(t++,i=i[Gl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Nl}function NE(n,e,t){N5(n,e,t)}function L5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(x1(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function N1(n,e,t){if(t&Ne.Optional||n!==void 0)return n;fI(e,"NodeInjector")}function L1(n,e,t,r){if(t&Ne.Optional&&r===void 0&&(r=null),(t&(Ne.Self|Ne.Host))===0){let i=n[yi],o=$n(void 0);try{return i?i.get(e,r,t&Ne.Optional):zP(e,r,t&Ne.Optional)}finally{$n(o)}}return N1(r,e,t)}function F1(n,e,t,r=Ne.Default,i){if(n!==null){if(e[xe]&2048&&!(r&Ne.Self)){let s=j5(n,e,t,r,mi);if(s!==mi)return s}let o=V1(n,e,t,r,mi);if(o!==mi)return o}return L1(e,t,r,i)}function V1(n,e,t,r,i){let o=U5(t);if(typeof o=="function"){if(!E1(e,n,r))return r&Ne.Host?N1(i,t,r):L1(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ne.Optional))fI(t);else return s}finally{C1()}}else if(typeof o=="number"){let s=null,a=O1(n,e),c=Nl,d=r&Ne.Host?e[Wn][Qn]:null;for((a===-1||r&Ne.SkipSelf)&&(c=a===-1?CI(n,e):e[a+8],c===Nl||!GR(r,!1)?a=-1:(s=e[Te],a=Tm(c),e=Cm(c,e)));a!==-1;){let h=e[Te];if(HR(o,a,h.data)){let g=F5(a,e,t,s,r,d);if(g!==mi)return g}c=e[a+8],c!==Nl&&GR(r,e[Te].data[a+8]===d)&&HR(o,a,e)?(s=h,a=Tm(c),e=Cm(c,e)):a=-1}}return i}function F5(n,e,t,r,i,o){let s=e[Te],a=s.data[n+8],c=r==null?Ka(a)&&OE:r!=s&&(a.type&3)!==0,d=i&Ne.Host&&o===a,h=V5(a,s,t,c,d);return h!==null?Am(e,s,h,a,i):mi}function V5(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?a:a+h,C=i?a+h:d;for(let S=g;S<C;S++){let k=s[S];if(S<c&&t===k||S>=c&&k.type===t)return S}if(i){let S=s[c];if(S&&_i(S)&&S.type===t)return c}return null}function Am(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ha){let a=o;a.resolving&&BP(x3(s[t]));let c=Sm(a.canSeeViewProviders);a.resolving=!0;let d,h=a.injectImpl?$n(a.injectImpl):null,g=E1(n,r,Ne.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&S5(t,s[t],e)}finally{h!==null&&$n(h),Sm(c),a.resolving=!1,C1()}}return o}function U5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_h)?n[_h]:void 0;return typeof e=="number"?e>=0?e&P1:B5:e}function HR(n,e,t){let r=1<<n;return!!(t[e+(n>>k1)]&r)}function GR(n,e){return!(n&Ne.Self)&&!(n&Ne.Host&&e)}var Ba=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return F1(this._tNode,this._lView,e,Gm(r),t)}};function B5(){return new Ba(Yn(),Xe())}function po(n){return Ch(()=>{let e=n.prototype.constructor,t=e[pm]||LE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pm]||LE(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function LE(n){return NP(n)?()=>{let e=LE(Pn(n));return e&&e()}:ja(n)}function j5(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[xe]&2048&&!Eh(s);){let a=V1(o,s,t,r|Ne.Self,mi);if(a!==mi)return a;let c=o.parent;if(!c){let d=s[t1];if(d){let h=d.get(t,mi,r);if(h!==mi)return h}c=U1(s),s=s[Gl]}o=c}return i}function U1(n){let e=n[Te],t=e.type;return t===2?e.declTNode:t===1?n[Qn]:null}function SI(n){return L5(Yn(),n)}function WR(n,e=null,t=null,r){let i=B1(n,e,t,r);return i.resolveInjectorInitializers(),i}function B1(n,e=null,t=null,r,i=new Set){let o=[t||qn,$3(n)];return r=r||(typeof n=="object"?void 0:Hn(n)),new vh(o,e||_I(),r||null,i)}var xt=class n{static THROW_IF_NOT_FOUND=Ua;static NULL=new _m;static create(e,t){if(Array.isArray(e))return WR({name:""},t,e,"");{let r=e.name??"";return WR({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:n,providedIn:"any",factory:()=>ue(HP)});static __NG_ELEMENT_ID__=-1};var z5=new Y("");z5.__NG_ELEMENT_ID__=n=>{let e=Yn();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&Ne.Optional)return null;throw new ie(204,!1)};var j1=!1,Kl=(()=>{class n{static __NG_ELEMENT_ID__=$5;static __NG_ENV_ID__=t=>t}return n})(),FE=class extends Kl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Qa(t)?(e(),()=>{}):(h1(t,e),()=>c5(t,e))}};function $5(){return new FE(Xe())}var Ga=class{},Xm=new Y("",{providedIn:"root",factory:()=>!1});var z1=new Y(""),$1=new Y(""),go=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Nt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),q5=(()=>{class n{internalPendingTasks=z(go);scheduler=z(Ga);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return T(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),VE=class extends At{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,XP()&&(this.destroyRef=z(Kl,{optional:!0})??void 0,this.pendingTasks=z(go,{optional:!0})??void 0)}emit(e){let t=Be(null);try{super.next(e)}finally{Be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ot&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},mt=VE;function Mm(...n){}function q1(n){let e,t;function r(){n=Mm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function KR(n){return queueMicrotask(()=>n()),()=>{n=Mm}}var DI="isAngularZone",xm=DI+"_ID",H5=0,Fe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new mt(!1);onMicrotaskEmpty=new mt(!1);onStable=new mt(!1);onError=new mt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=j1}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,K5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(DI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,G5,Mm,Mm);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},G5={};function AI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function W5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){q1(()=>{n.callbackScheduled=!1,UE(n),n.isCheckStableRunning=!0,AI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),UE(n)}function K5(n){let e=()=>{W5(n)},t=H5++;n._inner=n._inner.fork({name:"angular",properties:{[DI]:!0,[xm]:t,[xm+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Q5(c))return r.invokeTask(o,s,a,c);try{return QR(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YR(n)}},onInvoke:(r,i,o,s,a,c,d)=>{try{return QR(n),r.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Y5(c)&&e(),YR(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,UE(n),AI(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function UE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YR(n){n._nesting--,AI(n)}var BE=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new mt;onMicrotaskEmpty=new mt;onStable=new mt;onError=new mt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Q5(n){return H1(n,"__ignore_ng_zone__")}function Y5(n){return H1(n,"__scheduler_tick__")}function H1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var wi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},J5=new Y("",{providedIn:"root",factory:()=>{let n=z(Fe),e=z(wi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function JR(n,e){return kP(n,e)}function Z5(n){return kP(PP,n)}var G1=(JR.required=Z5,JR);function X5(){return ey(Yn(),Xe())}function ey(n,e){return new ur(qr(n,e))}var ur=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=X5}return n})();function e6(n){return typeof n=="function"&&n[_r]!==void 0}function Ql(n,e){let t=Nw(n,e?.equal),r=t[_r];return t.set=i=>uh(r,i),t.update=i=>Lw(r,i),t.asReadonly=t6.bind(t),t}function t6(){let n=this[_r];if(n.readonlyFn===void 0){let e=()=>this();e[_r]=n,n.readonlyFn=e}return n.readonlyFn}function W1(n){return e6(n)&&typeof n.set=="function"}var n6="ngSkipHydration",r6="ngskiphydration";function K1(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===r6)return!0}return!1}function Q1(n){return n.hasAttribute(n6)}function Rm(n){return(n.flags&128)===128}function i6(n){if(Rm(n))return!0;let e=n.parent;for(;e;){if(Rm(n)||K1(e))return!0;e=e.parent}return!1}var Y1=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Y1||{}),J1=new Map,o6=0;function s6(){return o6++}function a6(n){J1.set(n[Km],n)}function jE(n){J1.delete(n[Km])}var ZR="__ngContext__";function Mh(n,e){Br(e)?(n[ZR]=e[Km],a6(e)):n[ZR]=e}function Z1(n){return ek(n[wh])}function X1(n){return ek(n[Ur])}function ek(n){for(;n!==null&&!bi(n);)n=n[Ur];return n}var zE;function tk(n){zE=n}function ty(){if(zE!==void 0)return zE;if(typeof document<"u")return document;throw new ie(210,!1)}var ao=new Y("",{providedIn:"root",factory:()=>c6}),c6="ng",MI=new Y(""),Ti=new Y("",{providedIn:"platform",factory:()=>"unknown"});var xI=new Y("",{providedIn:"root",factory:()=>ty().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function l6(){let n=new Yl;return n.store=u6(ty(),z(ao)),n}var Yl=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:l6});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function u6(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var nk="h",rk="b",d6="f",h6="n",f6="e",p6="t",RI="c",ik="x",Pm="r",g6="i",m6="n",ok="d";var y6="di",_6="s",v6="p";var nm=new Y(""),sk=!1,ak=new Y("",{providedIn:"root",factory:()=>sk});var ck=new Y(""),w6=!1,E6=new Y(""),XR=new Y("",{providedIn:"root",factory:()=>new Map}),PI=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(PI||{}),Jl=new Y(""),eP=new Set;function Ci(n){eP.has(n)||(eP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lk=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=I6}return n})();function I6(){return new lk(Xe(),Yn())}var Rl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Rl||{}),uk=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),b6=[Rl.EarlyRead,Rl.Write,Rl.MixedReadWrite,Rl.Read],T6=(()=>{class n{ngZone=z(Fe);scheduler=z(Ga);errorHandler=z(wi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){z(Jl,{optional:!0})}execute(){let t=this.sequences.size>0;t&&st(16),this.executing=!0;for(let r of b6)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&st(17)}register(t){let{view:r}=t;r!==void 0?((r[Ol]??=[]).push(t),Dh(r),r[xe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(PI.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),$E=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ol];e&&(this.view[Ol]=e.filter(t=>t!==this))}};function ny(n,e){!e?.injector&&e1(ny);let t=e?.injector??z(xt);return Ci("NgAfterNextRender"),S6(n,t,e,!0)}function C6(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function S6(n,e,t,r){let i=e.get(uk);i.impl??=e.get(T6);let o=e.get(Jl,null,{optional:!0}),s=t?.phase??Rl.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Kl):null,c=e.get(lk,null,{optional:!0}),d=new $E(i.impl,C6(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(d),d}var or=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(or||{}),tP=0,D6=1,Xt=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(Xt||{});var A6=0,ry=1;var M6=4,x6=5;var R6=7,Ll=8,P6=9,dk=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(dk||{});function lm(n,e){let t=O6(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function k6(n){lm(1,n),lm(0,n),lm(2,n)}function O6(n){let e=M6;return n===1?e=x6:n===2&&(e=P6),e}function hk(n){return n+1}function xh(n,e){let t=n[Te],r=hk(e.index);return n[r]}function iy(n,e){let t=hk(e.index);return n.data[t]}function N6(n,e,t){let r=e[Te],i=iy(r,t);switch(n){case Xt.Complete:return i.primaryTmplIndex;case Xt.Loading:return i.loadingTmplIndex;case Xt.Error:return i.errorTmplIndex;case Xt.Placeholder:return i.placeholderTmplIndex;default:return null}}function nP(n,e){return e===Xt.Placeholder?n.placeholderBlockConfig?.[tP]??null:e===Xt.Loading?n.loadingBlockConfig?.[tP]??null:null}function L6(n){return n.loadingBlockConfig?.[D6]??null}function rP(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function F6(n,e){let t=e.primaryTmplIndex+Mt;return Qm(n,t)}var oy="ngb";var V6=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},U6=(n,e)=>{let t=n,r=t.getAttribute(oy)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var B6=n=>{n.removeAttribute(eE.JSACTION),n.removeAttribute(oy),n.__jsaction_fns=void 0},j6=new Y("",{providedIn:"root",factory:()=>({})});function fk(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var qE=new Map;function z6(n,e){return qE.set(n,e),()=>qE.delete(n)}var iP=!1,pk=(n,e,t,r)=>{};function $6(n,e,t,r){pk(n,e,t,r)}function q6(){iP||(pk=(n,e,t,r)=>{let i=n[yi].get(ao);qE.get(i)?.(e,t,r)},iP=!0)}var kI=new Y("");var H6="__nghData__",gk=H6,G6="__nghDeferData__",W6=G6,dE="ngh",K6="nghm",mk=()=>null;function Q6(n,e,t=!1){let r=n.getAttribute(dE);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Yl,null,{optional:!0});h!==null&&(c=h.get(gk,[])[Number(r)])}let d={data:c,firstChild:n.firstChild??null};return t&&(d.firstChild=n,sy(d,0,n.nextSibling)),a?n.setAttribute(dE,a):n.removeAttribute(dE),d}function Y6(){mk=Q6}function yk(n,e,t=!1){return mk(n,e,t)}function J6(n){let e=n._lView;return e[Te].type===2?null:(Eh(e)&&(e=e[Mt]),e)}function Z6(n){return n.textContent?.replace(/\s/gm,"")}function X6(n){let e=ty(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Z6(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function sy(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function HE(n,e){return n.segmentHeads?.[e]??null}function e9(n){return n.get(E6,!1,{optional:!0})}function t9(n,e){let t=n.data,r=t[f6]?.[e]??null;return r===null&&t[RI]?.[e]&&(r=OI(n,e)),r}function _k(n,e){return n.data[RI]?.[e]??null}function OI(n,e){let t=_k(n,e)??[],r=0;for(let i of t)r+=i[Pm]*(i[ik]??1);return r}function n9(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[ok];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Rh(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[ok];n.disconnectedNodes=t?new Set(t):null}return!!n9(n)?.has(e)}function r9(n,e){let t=e.get(kI),i=e.get(Yl).get(W6,{}),o=!1,s=n,a=null,c=[];for(;!o&&s;){o=t.has(s);let d=t.hydrating.get(s);if(a===null&&d!=null){a=d.promise;break}c.unshift(s),s=i[s][v6]}return{parentBlockPromise:a,hydrationQueue:c}}function hE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===K6}function oP(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function i9(n){for(let r of n.body.childNodes)if(hE(r))return;let e=oP(n.body.previousSibling);if(hE(e))return;let t=oP(n.head.lastChild);if(!hE(t))throw new ie(-507,!1)}function vk(n,e){let t=n.contentQueries;if(t!==null){let r=Be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];w1(o),a.contentQueries(2,e[s],s)}}}finally{Be(r)}}}function GE(n,e,t){w1(0);let r=Be(null);try{e(n,t)}finally{Be(r)}}function wk(n,e,t){if(r1(e)){let r=Be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Be(r)}}}var Ei=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ei||{});var rm;function o9(){if(rm===void 0&&(rm=null,fm.trustedTypes))try{rm=fm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rm}function sP(n){return o9()?.createScriptURL(n)||n}var km=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RP})`}};function Zl(n){return n instanceof km?n.changingThisBreaksApplicationSecurity:n}function NI(n,e){let t=s9(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${RP})`)}return t===e}function s9(n){return n instanceof km&&n.getTypeName()||null}var a9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ek(n){return n=String(n),n.match(a9)?n:"unsafe:"+n}var ay=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ay||{});function Ds(n){let e=bk();return e?e.sanitize(ay.URL,n)||"":NI(n,"URL")?Zl(n):Ek(Vl(n))}function c9(n){let e=bk();if(e)return sP(e.sanitize(ay.RESOURCE_URL,n)||"");if(NI(n,"ResourceURL"))return sP(Zl(n));throw new ie(904,!1)}function l9(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?c9:Ds}function Ik(n,e,t){return l9(e,t)(n)}function bk(){let n=Xe();return n&&n[co].sanitizer}var u9=/^>|^->|<!--|-->|--!>|<!-$/g,d9=/(<|>)/g,h9="\u200B$1\u200B";function f9(n){return n.replace(u9,e=>e.replace(d9,h9))}function p9(n){return n.ownerDocument.body}function Tk(n){return n instanceof Function?n():n}function g9(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Ck="ng-template";function m9(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&g9(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(LI(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function LI(n){return n.type===4&&n.value!==Ck}function y9(n,e,t){let r=n.type===4&&!t?Ck:n.value;return e===r}function _9(n,e,t){let r=4,i=n.attrs,o=i!==null?E9(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Fr(r)&&!Fr(c))return!1;if(s&&Fr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!y9(n,c,t)||c===""&&e.length===1){if(Fr(r))return!1;s=!0}}else if(r&8){if(i===null||!m9(n,i,c,t)){if(Fr(r))return!1;s=!0}}else{let d=e[++a],h=v9(c,i,LI(n),t);if(h===-1){if(Fr(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Fr(r))return!1;s=!0}}}}return Fr(r)||s}function Fr(n){return(n&1)===0}function v9(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return I9(e,n)}function Sk(n,e,t=!1){for(let r=0;r<e.length;r++)if(_9(n,e[r],t))return!0;return!1}function w9(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function E9(n){for(let e=0;e<n.length;e++){let t=n[e];if(x1(t))return e}return n.length}function I9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function b9(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function aP(n,e){return n?":not("+e.trim()+")":e}function T9(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Fr(s)&&(e+=aP(o,i),i=""),r=s,o=o||!Fr(r);t++}return i!==""&&(e+=aP(o,i)),e}function C9(n){return n.map(T9).join(",")}function S9(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Fr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wr={};function Dk(n,e){return n.createText(e)}function D9(n,e,t){n.setValue(e,t)}function Ak(n,e){return n.createComment(f9(e))}function FI(n,e,t){return n.createElement(e,t)}function Om(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Mk(n,e,t){n.appendChild(e,t)}function cP(n,e,t,r,i){r!==null?Om(n,e,t,r,i):Mk(n,e,t)}function VI(n,e,t){n.removeChild(null,e,t)}function xk(n){n.textContent=""}function A9(n,e,t){n.setAttribute(e,"style",t)}function M9(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Rk(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&x5(n,e,r),i!==null&&M9(n,e,i),o!==null&&A9(n,e,o)}function UI(n,e,t,r,i,o,s,a,c,d,h){let g=Mt+r,C=g+i,S=x9(g,C),k=typeof d=="function"?d():d;return S[Te]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function x9(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function R9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=UI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function BI(n,e,t,r,i,o,s,a,c,d,h){let g=e.blueprint.slice();return g[ar]=i,g[xe]=r|4|128|8|64|1024,(d!==null||n&&n[xe]&2048)&&(g[xe]|=2048),u1(g),g[an]=g[Gl]=n,g[Gn]=t,g[co]=s||n&&n[co],g[ht]=a||n&&n[ht],g[yi]=c||n&&n[yi]||null,g[Qn]=o,g[Km]=s6(),g[jr]=h,g[t1]=d,g[Wn]=e.type==2?n[Wn]:g,g}function P9(n,e,t){let r=qr(e,n),i=R9(t),o=n[co].rendererFactory,s=jI(n,BI(n,i,null,Pk(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Pk(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function kk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jI(n,e){return n[wh]?n[BR][Ur]=e:n[wh]=e,n[BR]=e,e}function F(n=1){Ok(gn(),Xe(),Cs()+n,!1)}function Ok(n,e,t,r){if(!r)if((e[xe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&am(e,o,t)}else{let o=n.preOrderHooks;o!==null&&cm(e,o,0,t)}qa(t)}var cy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(cy||{});function WE(n,e,t,r){let i=Be(null);try{let[o,s,a]=n.inputs[t],c=null;(s&cy.SignalBased)!==0&&(c=e[o][_r]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):i1(e,c,o,r)}finally{Be(i)}}function Nk(n,e,t,r,i){let o=Cs(),s=r&2;try{qa(-1),s&&e.length>Mt&&Ok(n,e,Mt,!1),st(s?2:0,i),t(r,i)}finally{qa(o),st(s?3:1,i)}}function zI(n,e,t){U9(n,e,t),(t.flags&64)===64&&B9(n,e,t)}function Lk(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function k9(n,e,t,r){let o=r.get(ak,sk)||t===Ei.ShadowDom,s=n.selectRootElement(e,o);return O9(s),s}function O9(n){Fk(n)}var Fk=()=>null;function N9(n){Q1(n)?xk(n):X6(n)}function L9(){Fk=N9}function F9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $I(n,e,t,r,i,o,s,a){if(!a&&HI(e,n,t,r,i)){Ka(e)&&V9(t,e.index);return}if(e.type&3){let c=qr(e,t);r=F9(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function V9(n,e){let t=vi(e,n);t[xe]&16||(t[xe]|=64)}function U9(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ka(t)&&P9(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Dm(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Am(e,n,s,t);if(Mh(c,e),o!==null&&q9(e,s-r,c,a,t,o),_i(a)){let d=vi(t.index,e);d[Gn]=Am(e,n,s,t)}}}function B9(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=I5();try{qa(o);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];kE(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&j9(c,d)}}finally{qa(-1),kE(s)}}function j9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Vk(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Sk(e,o.selectors,!1)&&(r??=[],_i(o)?r.unshift(o):r.push(o))}return r}function z9(n,e,t,r,i,o){let s=qr(n,e);$9(e[ht],s,o,n.value,t,r,i)}function $9(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Vl(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function q9(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],d=s[a+1];WE(r,t,c,d)}}function qI(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function HI(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],h=s[c+1],g=e.data[d];WE(g,t[d],h,i),a=!0}if(o)for(let c of o){let d=t[c],h=e.data[c];WE(h,d,r,i),a=!0}return a}function H9(n,e){let t=vi(e,n),r=t[Te];G9(r,t);let i=t[ar];i!==null&&t[jr]===null&&(t[jr]=yk(i,t[yi])),st(18),GI(r,t,t[Gn]),st(19,t[Gn])}function G9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function GI(n,e,t){II(e);try{let r=n.viewQuery;r!==null&&GE(1,r,t);let i=n.template;i!==null&&Nk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[jl]?.finishViewCreation(n),n.staticContentQueries&&vk(n,e),n.staticViewQueries&&GE(2,n.viewQuery,t);let o=n.components;o!==null&&W9(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[xe]&=-5,bI()}}function W9(n,e){for(let t=0;t<e.length;t++)H9(n,e[t])}function WI(n,e,t,r){let i=Be(null);try{let o=e.tView,a=n[xe]&4096?4096:16,c=BI(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Bl]=d;let h=n[jl];return h!==null&&(c[jl]=h.createEmbeddedView(o)),GI(o,c,t),c}finally{Be(i)}}function Nm(n,e){return!e||e.firstChild===null||Rm(n)}var K9;function KI(n,e){return K9(n,e)}var ho=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ho||{});function Ya(n){return(n.flags&32)===32}function Pl(n,e,t,r,i){if(r!=null){let o,s=!1;bi(r)?o=r:Br(r)&&(s=!0,r=r[ar]);let a=zr(r);n===0&&t!==null?i==null?Mk(e,t,a):Om(e,t,a,i||null,!0):n===1&&t!==null?Om(e,t,a,i||null,!0):n===2?VI(e,a,s):n===3&&e.destroyNode(a),o!=null&&i$(e,n,o,t,i)}}function Q9(n,e){Uk(n,e),e[ar]=null,e[Qn]=null}function Y9(n,e,t,r,i,o){r[ar]=i,r[Qn]=e,ly(n,r,t,1,i,o)}function Uk(n,e){e[co].changeDetectionScheduler?.notify(9),ly(n,e,e[ht],2,null,null)}function J9(n){let e=n[wh];if(!e)return fE(n[Te],n);for(;e;){let t=null;if(Br(e))t=e[wh];else{let r=e[sr];r&&(t=r)}if(!t){for(;e&&!e[Ur]&&e!==n;)Br(e)&&fE(e[Te],e),e=e[an];e===null&&(e=n),Br(e)&&fE(e[Te],e),t=e&&e[Ur]}e=t}}function QI(n,e){let t=n[Im],r=t.indexOf(e);t.splice(r,1)}function YI(n,e){if(Qa(e))return;let t=e[ht];t.destroyNode&&ly(n,e,t,3,null,null),J9(e)}function fE(n,e){if(Qa(e))return;let t=Be(null);try{e[xe]&=-129,e[xe]|=256,e[vr]&&Pw(e[vr]),X9(n,e),Z9(n,e),e[Te].type===1&&e[ht].destroy();let r=e[Bl];if(r!==null&&bi(e[an])){r!==e[an]&&QI(r,e);let i=e[jl];i!==null&&i.detachView(n)}jE(e)}finally{Be(t)}}function Z9(n,e){let t=n.cleanup,r=e[vm];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[vm]=null);let i=e[Es];if(i!==null){e[Es]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[wm];if(o!==null){e[wm]=null;for(let s of o)s.destroy()}}function X9(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ha)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];st(4,a,c);try{c.call(a)}finally{st(5,a,c)}}else{st(4,i,o);try{o.call(i)}finally{st(5,i,o)}}}}}function Bk(n,e,t){return e$(n,e.parent,t)}function e$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];if(Ka(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ei.None||i===Ei.Emulated)return null}return qr(r,t)}function jk(n,e,t){return n$(n,e,t)}function t$(n,e,t){return n.type&40?qr(n,t):null}var n$=t$,lP;function JI(n,e,t,r){let i=Bk(n,r,e),o=e[ht],s=r.parent||e[Qn],a=jk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)cP(o,i,t[c],a,!1);else cP(o,i,t,a,!1);lP!==void 0&&lP(o,r,e,t,i)}function yh(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return KE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return yh(n,r);{let i=n[e.index];return bi(i)?KE(-1,i):zr(i)}}else{if(t&128)return yh(n,e.next);if(t&32)return KI(e,n)()||zr(n[e.index]);{let r=zk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$a(n[Wn]);return yh(i,r)}else return yh(n,e.next)}}}return null}function zk(n,e){if(e!==null){let r=n[Wn][Qn],i=e.projection;return r.projection[i]}return null}function KE(n,e){let t=sr+n+1;if(t<e.length){let r=e[t],i=r[Te].firstChild;if(i!==null)return yh(r,i)}return e[uo]}function ZI(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Mh(zr(a),r),t.flags|=2),!Ya(t))if(c&8)ZI(n,e,t.child,r,i,o,!1),Pl(e,n,i,a,o);else if(c&32){let d=KI(t,r),h;for(;h=d();)Pl(e,n,i,h,o);Pl(e,n,i,a,o)}else c&16?$k(n,e,r,t,i,o):Pl(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ly(n,e,t,r,i,o){ZI(t,r,n.firstChild,e,i,o,!1)}function r$(n,e,t){let r=e[ht],i=Bk(n,t,e),o=t.parent||e[Qn],s=jk(o,t,e);$k(r,0,e,t,i,s)}function $k(n,e,t,r,i,o){let s=t[Wn],c=s[Qn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Pl(e,n,i,h,o)}else{let d=c,h=s[an];Rm(r)&&(d.flags|=128),ZI(n,e,d,h,i,o,!0)}}function i$(n,e,t,r,i){let o=t[uo],s=zr(t);o!==s&&Pl(e,n,r,o,i);for(let a=sr;a<t.length;a++){let c=t[a];ly(c[Te],c,n,e,r,o)}}function o$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ho.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ho.Important),n.setStyle(t,r,i,o))}}function Lm(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(zr(o)),bi(o)&&s$(o,r);let s=t.type;if(s&8)Lm(n,e,t.child,r);else if(s&32){let a=KI(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=zk(e,t);if(Array.isArray(a))r.push(...a);else{let c=$a(e[Wn]);Lm(c[Te],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function s$(n,e){for(let t=sr;t<n.length;t++){let r=n[t],i=r[Te].firstChild;i!==null&&Lm(r[Te],r,i,e)}n[uo]!==n[ar]&&e.push(n[uo])}function qk(n){if(n[Ol]!==null){for(let e of n[Ol])e.impl.addSequence(e);n[Ol].length=0}}var Hk=[];function a$(n){return n[vr]??c$(n)}function c$(n){let e=Hk.pop()??Object.create(u$);return e.lView=n,e}function l$(n){n.lView[vr]!==n&&(n.lView=null,Hk.push(n))}var u$=le(j({},ch),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Dh(n.lView)},consumerOnSignalRead(){this.lView[vr]=this}});function d$(n){let e=n[vr]??Object.create(h$);return e.lView=n,e}var h$=le(j({},ch),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=$a(n.lView);for(;e&&!Gk(e[Te]);)e=$a(e);e&&d1(e)},consumerOnSignalRead(){this.lView[vr]=this}});function Gk(n){return n.type!==2}function Wk(n){if(n[wm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[wm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[xe]&8192)}}var f$=100;function Kk(n,e=!0,t=0){let i=n[co].rendererFactory,o=!1;o||i.begin?.();try{p$(n,t)}catch(s){throw e&&qI(n,s),s}finally{o||i.end?.()}}function p$(n,e){let t=v1();try{zR(!0),QE(n,e);let r=0;for(;Ym(n);){if(r===f$)throw new ie(103,!1);r++,QE(n,1)}}finally{zR(t)}}function g$(n,e,t,r){if(Qa(e))return;let i=e[xe],o=!1,s=!1;II(e);let a=!0,c=null,d=null;o||(Gk(n)?(d=a$(e),c=_g(d)):Sw()===null?(a=!1,d=d$(e),c=_g(d)):e[vr]&&(Pw(e[vr]),e[vr]=null));try{u1(e),v5(n.bindingStartIndex),t!==null&&Nk(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let S=n.preOrderCheckHooks;S!==null&&am(e,S,null)}else{let S=n.preOrderHooks;S!==null&&cm(e,S,0,null),lE(e,0)}if(s||m$(e),Wk(e),Qk(e,0),n.contentQueries!==null&&vk(n,e),!o)if(h){let S=n.contentCheckHooks;S!==null&&am(e,S)}else{let S=n.contentHooks;S!==null&&cm(e,S,1),lE(e,1)}_$(n,e);let g=n.components;g!==null&&Jk(e,g,0);let C=n.viewQuery;if(C!==null&&GE(2,C,r),!o)if(h){let S=n.viewCheckHooks;S!==null&&am(e,S)}else{let S=n.viewHooks;S!==null&&cm(e,S,2),lE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cE]){for(let S of e[cE])S();e[cE]=null}o||(qk(e),e[xe]&=-73)}catch(h){throw o||Dh(e),h}finally{d!==null&&(xw(d,c),a&&l$(d)),bI()}}function Qk(n,e){for(let t=Z1(n);t!==null;t=X1(t))for(let r=sr;r<t.length;r++){let i=t[r];Yk(i,e)}}function m$(n){for(let e=Z1(n);e!==null;e=X1(e)){if(!(e[xe]&2))continue;let t=e[Im];for(let r=0;r<t.length;r++){let i=t[r];d1(i)}}}function y$(n,e,t){st(18);let r=vi(e,n);Yk(r,t),st(19,r[Gn])}function Yk(n,e){wI(n)&&QE(n,e)}function QE(n,e){let r=n[Te],i=n[xe],o=n[vr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Rw(o)),s||=!1,o&&(o.dirty=!1),n[xe]&=-9217,s)g$(r,n,r.template,n[Gn]);else if(i&8192){Wk(n),Qk(n,1);let a=r.components;a!==null&&Jk(n,a,1),qk(n)}}function Jk(n,e,t){for(let r=0;r<e.length;r++)y$(n,e[r],t)}function _$(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qa(~i);else{let o=i,s=t[++r],a=t[++r];E5(s,o);let c=e[o];st(24,c),a(2,c),st(25,c)}}}finally{qa(-1)}}function uy(n,e){let t=v1()?64:1088;for(n[co].changeDetectionScheduler?.notify(e);n;){n[xe]|=t;let r=$a(n);if(Eh(n)&&!r)return n;n=r}return null}function Zk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function XI(n,e,t,r=!0){let i=e[Te];if(w$(i,e,n,t),r){let s=KE(t,n),a=e[ht],c=a.parentNode(n[uo]);c!==null&&Y9(i,n[Qn],a,e,c,s)}let o=e[jr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function v$(n,e){let t=Fm(n,e);return t!==void 0&&YI(t[Te],t),t}function Fm(n,e){if(n.length<=sr)return;let t=sr+e,r=n[t];if(r){let i=r[Bl];i!==null&&i!==n&&QI(i,r),e>0&&(n[t-1][Ur]=r[Ur]);let o=ym(n,sr+e);Q9(r[Te],r);let s=o[jl];s!==null&&s.detachView(o[Te]),r[an]=null,r[Ur]=null,r[xe]&=-129}return r}function w$(n,e,t,r){let i=sr+r,o=t.length;r>0&&(t[i-1][Ur]=e),r<o-sr?(e[Ur]=t[i],qP(t,sr+r,e)):(t.push(e),e[Ur]=null),e[an]=t;let s=e[Bl];s!==null&&t!==s&&Xk(s,e);let a=e[jl];a!==null&&a.insertView(n),RE(e),e[xe]|=128}function Xk(n,e){let t=n[Im],r=e[an];if(Br(r))n[xe]|=2;else{let i=r[an][Wn];e[Wn]!==i&&(n[xe]|=2)}t===null?n[Im]=[e]:t.push(e)}var bh=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Te];return Lm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Gn]}set context(e){this._lView[Gn]=e}get destroyed(){return Qa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(bi(e)){let t=e[Em],r=t?t.indexOf(this):-1;r>-1&&(Fm(e,r),ym(t,r))}this._attachedToViewContainer=!1}YI(this._lView[Te],this._lView)}onDestroy(e){h1(this._lView,e)}markForCheck(){uy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){RE(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,Kk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Eh(this._lView),t=this._lView[Bl];t!==null&&!e&&QI(t,this._lView),Uk(this._lView[Te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=Eh(this._lView),r=this._lView[Bl];r!==null&&!t&&Xk(r,this._lView),RE(this._lView)}};var dy=(()=>{class n{static __NG_ELEMENT_ID__=b$}return n})(),E$=dy,I$=class extends E${_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=WI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new bh(i)}};function b$(){return eO(Yn(),Xe())}function eO(n,e){return n.type&4?new I$(e,n,ey(n,e)):null}function hy(n,e,t,r,i){let o=n.data[e];if(o===null)o=T$(n,e,t,r,i),w5()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=g5();o.injectorIndex=s===null?-1:s.injectorIndex}return Ah(o,!0),o}function T$(n,e,t,r,i){let o=m1(),s=y1(),a=s?o:o&&o.parent,c=n.data[e]=S$(n,a,t,e,r,i);return C$(n,c,o,s),c}function C$(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function S$(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Wl()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var D$=new RegExp(`^(\\d+)*(${rk}|${nk})*(.*)`);function A$(n){let e=n.match(D$),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,d,h]of o.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;a.push(d,g)}return[s,...a]}function M$(n){return!n.prev&&n.parent?.type===8}function pE(n){return n.index-Mt}function x$(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function fy(n,e,t,r){let i=pE(r),o=x$(n,i);if(o===void 0){let s=n.data[m6];if(s?.[i])o=P$(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(M$(r)){let d=pE(r.parent);o=HE(n,d)}else{let d=qr(c,t);if(a)o=d.firstChild;else{let h=pE(c),g=HE(n,h);if(c.type===2&&g){let S=OI(n,h)+1;o=py(S,g)}else o=d.nextSibling}}}}return o}function py(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function R$(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case d6:t=t.firstChild;break;case h6:t=t.nextSibling;break}}return t}function P$(n,e){let[t,...r]=A$(n),i;if(t===nk)i=e[Wn][ar];else if(t===rk)i=p9(e[Wn][ar]);else{let o=Number(t);i=zr(e[o+Mt])}return R$(i,r)}var k$=!1;function O$(n){k$=n}function N$(n){let e=n[jr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ht];for(let o of r.values())L$(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function L$(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Mt);i&&VI(n,i,!1)}}function tO(n){let e=n[lo]??[],r=n[an][ht],i=[];for(let o of e)o.data[y6]!==void 0?i.push(o):nO(o,r);n[lo]=i}function F$(n){let{lContainer:e}=n,t=e[lo];if(t===null)return;let i=e[an][ht];for(let o of t)nO(o,i)}function nO(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Pm];for(;t<i;){let o=r.nextSibling;VI(e,r,!1),r=o,t++}}}function gy(n){tO(n);let e=n[ar];Br(e)&&Vm(e);for(let t=sr;t<n.length;t++)Vm(n[t])}function Vm(n){N$(n);let e=n[Te];for(let t=Mt;t<e.bindingStartIndex;t++)if(bi(n[t])){let r=n[t];gy(r)}else Br(n[t])&&Vm(n[t])}function rO(n){let e=n._views;for(let t of e){let r=J6(t);r!==null&&r[ar]!==null&&(Br(r)?Vm(r):gy(r))}}function V$(n,e,t,r){n!==null&&(t.cleanup(e),gy(n.lContainer),rO(r))}function U$(n,e){let t=[];for(let r of e)for(let i=0;i<(r[ik]??1);i++){let o={data:r,firstChild:null};r[Pm]>0&&(o.firstChild=n,n=py(r[Pm],n)),t.push(o)}return[n,t]}var iO=()=>null;function B$(n,e){let t=n[lo];return!e||t===null||t.length===0?null:t[0].data[g6]===e?t.shift():(tO(n),null)}function j$(){iO=B$}function YE(n,e){return iO(n,e)}var z$=class{},oO=class{},JE=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Hn(e)}.`)}},my=class{static NULL=new JE},zl=class{},mo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>$$()}return n})();function $$(){let n=Xe(),e=Yn(),t=vi(e.index,n);return(Br(t)?t:n)[ht]}var q$=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}return n})();var gE={},Fl=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Gm(r);let i=this.injector.get(e,gE,r);return i!==gE||t===gE?i:this.parentInjector.get(e,t,r)}};function uP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=bE(i,a);else if(o==2){let c=a,d=e[++s];r=bE(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function te(n,e=Ne.Default){let t=Xe();if(t===null)return ue(n,e);let r=Yn();return F1(r,t,Pn(n),e)}function sO(){let n="invalid";throw new Error(n)}function aO(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,d=null,h=G$(s);h===null?a=s:[a,c,d]=h,Q$(n,e,t,a,o,c,d)}o!==null&&r!==null&&H$(t,r,o)}function H$(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ie(-301,!1);r.push(e[i],o)}}function G$(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&_i(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,W$(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function W$(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function K$(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Q$(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let C=0;C<a;C++){let S=r[C];!c&&_i(S)&&(c=!0,K$(n,t,C)),NE(Dm(t,e),n,S.type)}tq(t,n.data.length,a);for(let C=0;C<a;C++){let S=r[C];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,g=kk(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let C=0;C<a;C++){let S=r[C];if(t.mergedAttrs=Ih(t.mergedAttrs,S.hostAttrs),J$(n,t,e,g,S),eq(g,S,i),s!==null&&s.has(S)){let[V,O]=s.get(S);t.directiveToIndex.set(S.type,[g,V+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(S))&&t.directiveToIndex.set(S.type,g);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let k=S.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}Y$(n,t,o)}function Y$(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))dP(0,e,i,r),dP(1,e,i,r),fP(e,r,!1);else{let o=t.get(i);hP(0,e,o,r),hP(1,e,o,r),fP(e,r,!0)}}}function dP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),cO(e,o)}}function hP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cO(e,s)}}function cO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function fP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||LI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function J$(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ja(i.type,!0)),s=new Ha(o,_i(i),te);n.blueprint[r]=s,t[r]=s,Z$(n,e,r,kk(n,t,i.hostVars,wr),i)}function Z$(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;X$(s)!=a&&s.push(a),s.push(t,r,o)}}function X$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eq(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function tq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function lO(n,e,t,r,i,o,s,a){let c=e.consts,d=bm(c,s),h=hy(e,n,2,r,d);return o&&aO(e,t,h,bm(c,a),i),h.mergedAttrs=Ih(h.mergedAttrs,h.attrs),h.attrs!==null&&uP(h,h.attrs,!1),h.mergedAttrs!==null&&uP(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function uO(n,e){A1(n,e),r1(e)&&n.queries.elementEnd(e)}var Um=class extends my{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bs(e);return new $l(t,this.ngModule)}};function nq(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&cy.SignalBased)!==0};return i&&(o.transform=i),o})}function rq(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function iq(n,e,t){let r=e instanceof kn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Fl(t,r):t}function oq(n){let e=n.get(zl,null);if(e===null)throw new ie(407,!1);let t=n.get(q$,null),r=n.get(Ga,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function sq(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return FI(e,t,t==="svg"?r5:t==="math"?i5:null)}var $l=class extends oO{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=nq(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rq(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=C9(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){st(22);let o=Be(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:S9(this.componentDef.selectors[0]),c=UI(0,null,null,1,0,null,null,null,null,[a],null),d=iq(s,i||this.ngModule,e),h=oq(d),g=h.rendererFactory.createRenderer(null,s),C=r?k9(g,r,s.encapsulation,d):sq(s,g),S=BI(null,c,null,512|Pk(s),null,null,h,g,d,null,yk(C,d,!0));S[Mt]=C,II(S);let k=null;try{let V=lO(Mt,c,S,"#host",()=>[this.componentDef],!0,0);C&&(Rk(g,C,V),Mh(C,S)),zI(c,S,V),wk(c,V,S),uO(c,V),t!==void 0&&aq(V,this.ngContentSelectors,t),k=vi(V.index,S),S[Gn]=k[Gn],GI(c,S,null)}catch(V){throw k!==null&&jE(k),jE(S),V}finally{st(23),bI()}return new ZE(this.componentType,S)}finally{Be(o)}}},ZE=class extends z${_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Qm(t[Te],Mt),this.location=ey(this._tNode,t),this.instance=vi(this._tNode.index,t)[Gn],this.hostView=this.changeDetectorRef=new bh(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=HI(r,i[Te],i,e,t);this.previousInputValues.set(e,t);let s=vi(r.index,i);uy(s,1)}get injector(){return new Ba(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function aq(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Xl=(()=>{class n{static __NG_ELEMENT_ID__=cq}return n})();function cq(){let n=Yn();return uq(n,Xe())}var lq=Xl,dO=class extends lq{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ey(this._hostTNode,this._hostLView)}get injector(){return new Ba(this._hostTNode,this._hostLView)}get parentInjector(){let e=CI(this._hostTNode,this._hostLView);if(R1(e)){let t=Cm(e,this._hostLView),r=Tm(e),i=t[Te].data[r+8];return new Ba(i,t)}else return new Ba(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=YE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Nm(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!X3(e),a;if(s)a=t;else{let k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef}let c=s?e:new $l(bs(e)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let V=(s?d:this.parentInjector).get(kn,null);V&&(o=V)}let h=bs(c.componentType??{}),g=YE(this._lContainer,h?.id??null),C=g?.firstChild??null,S=c.create(d,i,C,o);return this.insertImpl(S.hostView,a,Nm(this._hostTNode,g)),S}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(s5(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],d=new dO(c,c[Qn],c[an]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return XI(s,i,o,r),e.attachToViewContainerRef(),qP(mE(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fm(this._lContainer,t);r&&(ym(mE(this._lContainer),t),YI(r[Te],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fm(this._lContainer,t);return r&&ym(mE(this._lContainer),t)!=null?new bh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pP(n){return n[Em]}function mE(n){return n[Em]||(n[Em]=[])}function uq(n,e){let t,r=e[n.index];return bi(r)?t=r:(t=Zk(r,e,null,n),e[n.index]=t,jI(e,t)),hO(t,e,n,r),new dO(t,n,e)}function dq(n,e){let t=n[ht],r=t.createComment(""),i=qr(e,n),o=t.parentNode(i);return Om(t,o,r,t.nextSibling(i),!1),r}var hO=fO,eb=()=>!1;function hq(n,e,t){return eb(n,e,t)}function fO(n,e,t,r){if(n[uo])return;let i;t.type&8?i=zr(r):i=dq(e,t),n[uo]=i}function fq(n,e,t){if(n[uo]&&n[lo])return!0;let r=t[jr],i=e.index-Mt;if(!r||i6(e)||Rh(r,i))return!1;let s=HE(r,i),a=r.data[RI]?.[i],[c,d]=U$(s,a);return n[uo]=c,n[lo]=d,!0}function pq(n,e,t,r){eb(n,t,e)||fO(n,e,t,r)}function gq(){hO=pq,eb=fq}var ql=class{},tb=class{};var XE=class extends ql{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Um(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=WP(e);this._bootstrapComponents=Tk(o.bootstrap),this._r3Injector=B1(e,t,[{provide:ql,useValue:this},{provide:my,useValue:this.componentFactoryResolver},...r],Hn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},eI=class extends tb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new XE(this.moduleType,e,[])}};var Bm=class extends ql{injector;componentFactoryResolver=new Um(this);instance=null;constructor(e){super();let t=new vh([...e.providers,{provide:ql,useValue:this},{provide:my,useValue:this.componentFactoryResolver}],e.parent||_I(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function eu(n,e,t=null){return new Bm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var mq=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=mI(!1,t.type),i=r.length>0?eu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(ue(kn))})}return n})();function It(n){return Ch(()=>{let e=pO(n),t=le(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Y1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(mq).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ei.Emulated,styles:n.styles||qn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ci("NgStandalone"),gO(t);let r=n.dependencies;return t.directiveDefs=gP(r,!1),t.pipeDefs=gP(r,!0),t.id=Eq(t),t})}function yq(n){return bs(n)||KP(n)}function _q(n){return n!==null}function Hr(n){return Ch(()=>({type:n.type,bootstrap:n.bootstrap||qn,declarations:n.declarations||qn,imports:n.imports||qn,exports:n.exports||qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function vq(n,e){if(n==null)return za;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=cy.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function wq(n){if(n==null)return za;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function yt(n){return Ch(()=>{let e=pO(n);return gO(e),e})}function nb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pO(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||za,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vq(n.inputs,e),outputs:wq(n.outputs),debugInfo:null}}function gO(n){n.features?.forEach(e=>e(n))}function gP(n,e){if(!n)return null;let t=e?QP:yq;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(_q)}function Eq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Iq(n){return Object.getPrototypeOf(n.prototype).constructor}function Er(n){let e=Iq(n.type),t=!0,r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=yE(n.inputs),s.declaredInputs=yE(n.declaredInputs),s.outputs=yE(n.outputs);let a=i.hostBindings;a&&Dq(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&Cq(n,c),d&&Sq(n,d),bq(n,i),I3(n.outputs,i.outputs),_i(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Er&&(t=!1)}}e=Object.getPrototypeOf(e)}Tq(r)}function bq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Tq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ih(i.hostAttrs,t=Ih(t,i.hostAttrs))}}function yE(n){return n===za?{}:n===qn?[]:n}function Cq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Sq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Dq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function mO(n){return Mq(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Aq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Mq(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xq(n,e,t){return n[e]=t}function fo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Rq(n,e,t,r){let i=fo(n,e,t);return fo(n,e+1,r)||i}function Pq(n,e,t,r,i,o,s,a,c){let d=e.consts,h=hy(e,n,4,s||null,a||null);g1()&&aO(e,t,h,bm(d,c),Vk),h.mergedAttrs=Ih(h.mergedAttrs,h.attrs),A1(e,h);let g=h.tView=UI(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function yO(n,e,t,r,i,o,s,a,c,d){let h=t+Mt,g=e.firstCreatePass?Pq(h,e,n,r,i,o,s,a,c):e.data[h];Ah(g,!1);let C=_O(e,n,g,t);TI()&&JI(e,n,C,g),Mh(C,n);let S=Zk(C,n,C,g);return n[h]=S,jI(n,S),hq(S,g,n),vI(g)&&zI(e,n,g),c!=null&&Lk(n,g,d),g}function he(n,e,t,r,i,o,s,a){let c=Xe(),d=gn(),h=bm(d.consts,o);return yO(c,d,n,e,t,r,i,h,s,a),he}var _O=vO;function vO(n,e,t,r){return Ss(!0),e[ht].createComment("")}function kq(n,e,t,r){let i=e[jr],o=!i||Wl()||Ya(t)||Rh(i,r);if(Ss(o),o)return vO(n,e);let s=i.data[p6]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=fy(i,n,e,t);sy(i,r,a);let c=OI(i,r);return py(c,a)}function Oq(){_O=kq}var Nq=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?eu(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n})}return n})();var Lq=new Y("");function _E(n,e,t){return n.get(Nq).getOrCreateInjector(e,n,t,"")}function Fq(n,e,t){if(n instanceof Fl){let i=n.injector,o=n.parentInjector,s=_E(o,e,t);return new Fl(i,s)}let r=n.get(kn);if(r!==n){let i=_E(r,e,t);return new Fl(n,i)}return _E(n,e,t)}function kl(n,e,t,r=!1){let i=t[an],o=i[Te];if(Qa(i))return;let s=xh(i,e),a=s[ry],c=s[R6];if(!(c!==null&&n<c)&&mP(a,n)&&mP(s[A6]??-1,n)){let d=iy(o,e),g=!r&&!0&&(L6(d)!==null||nP(d,Xt.Loading)!==null||nP(d,Xt.Placeholder))?Bq:Uq;try{g(n,s,t,e,i)}catch(C){qI(i,C)}}}function Vq(n,e){let t=n[lo]?.findIndex(i=>i.data[_6]===e[ry])??-1;return{dehydratedView:t>-1?n[lo][t]:null,dehydratedViewIx:t}}function Uq(n,e,t,r,i){st(20);let o=N6(n,i,r);if(o!==null){e[ry]=n;let s=i[Te],a=o+Mt,c=Qm(s,a),d=0;v$(t,d);let h;if(n===Xt.Complete){let k=iy(s,r),V=k.providers;V&&V.length>0&&(h=Fq(i[yi],k,V))}let{dehydratedView:g,dehydratedViewIx:C}=Vq(t,e),S=WI(i,c,null,{injector:h,dehydratedView:g});if(XI(t,S,d,Nm(c,g)),uy(S,2),C>-1&&t[lo]?.splice(C,1),(n===Xt.Complete||n===Xt.Error)&&Array.isArray(e[Ll])){for(let k of e[Ll])k();e[Ll]=null}}st(21)}function mP(n,e){return n<e}function yP(n,e,t){n.loadingPromise.then(()=>{n.loadingState===or.COMPLETE?kl(Xt.Complete,e,t):n.loadingState===or.FAILED&&kl(Xt.Error,e,t)})}var Bq=null;var rb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var wO=new Y("");var jq=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new tI})}return n})(),tI=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function As(n){return!!n&&typeof n.then=="function"}function ib(n){return!!n&&typeof n.subscribe=="function"}var EO=new Y("");function ob(n){return bn([{provide:EO,multi:!0,useValue:n}])}var IO=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=z(EO,{optional:!0})??[];injector=z(xt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=cr(this.injector,i);if(As(o))t.push(o);else if(ib(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ms=new Y("");function zq(){Ow(()=>{throw new ie(600,!1)})}function $q(n){return n.isBoundToModule}var qq=10;var Kn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(J5);afterRenderManager=z(uk);zonelessEnabled=z(Xm);rootEffectScheduler=z(jq);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new At;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=z(go).hasPendingTasks.pipe(be(t=>!t));constructor(){z(Jl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=z(kn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xt.NULL){st(10);let o=t instanceof oO;if(!this._injector.get(IO).done){let S="";throw new ie(405,S)}let a;o?a=t:a=this._injector.get(my).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=$q(a)?void 0:this._injector.get(ql),d=r||a.selector,h=a.create(i,[],d,c),g=h.location.nativeElement,C=h.injector.get(wO,null);return C?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),um(this.components,h),C?.unregisterApplication(g)}),this._loadComponent(h),st(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){st(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(PI.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ie(101,!1);let t=Be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Be(t),this.afterTick.next(),st(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zl,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<qq;)st(14),this.synchronizeOnce(),st(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Hq(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ym(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;um(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ms,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>um(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function um(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hq(n,e,t,r){if(!t&&!Ym(n))return;Kk(n,e,t&&!r?0:1)}function Gq(n,e,t){let r=e[yi],i=e[Te];if(n.loadingState!==or.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=xh(e,t),s=F6(i,n);n.loadingState=or.IN_PROGRESS,lm(1,o);let a=n.dependencyResolverFn,c=r.get(q5).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(d=>{let h=!1,g=[],C=[];for(let S of d)if(S.status==="fulfilled"){let k=S.value,V=bs(k)||KP(k);if(V)g.push(V);else{let O=QP(k);O&&C.push(O)}}else{h=!0;break}if(h){if(n.loadingState=or.FAILED,n.errorTmplIndex===null){let S="",k=new ie(-750,!1);qI(e,k)}}else{n.loadingState=or.COMPLETE;let S=s.tView;if(g.length>0){S.directiveRegistry=rP(S.directiveRegistry,g);let k=g.map(O=>O.type),V=mI(!1,...k);n.providers=V}C.length>0&&(S.pipeRegistry=rP(S.pipeRegistry,C))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=or.COMPLETE,c()}),n.loadingPromise)}function Wq(n,e){return e[yi].get(Lq,null,{optional:!0})?.behavior!==dk.Manual}function Kq(n,e,t){let r=e[Te],i=e[t.index];if(!Wq(n,e))return;let o=xh(e,t),s=iy(r,t);switch(k6(o),s.loadingState){case or.NOT_STARTED:kl(Xt.Loading,t,i),Gq(s,e,t),s.loadingState===or.IN_PROGRESS&&yP(s,t,i);break;case or.IN_PROGRESS:kl(Xt.Loading,t,i),yP(s,t,i);break;case or.COMPLETE:kl(Xt.Complete,t,i);break;case or.FAILED:kl(Xt.Error,t,i);break;default:}}function Qq(n,e,t){return T(this,null,function*(){let r=n.get(kI);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=r9(e,n);if(s.length===0)return;o!==null&&s.shift(),Zq(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield _P(n,s,t):r.awaitParentBlock(a,()=>T(null,null,function*(){return yield _P(n,s,t)}))})}function _P(n,e,t){return T(this,null,function*(){let r=n.get(kI),i=r.hydrating,o=n.get(go),s=o.add();for(let c=0;c<e.length;c++){let d=e[c],h=r.get(d);if(h!=null){if(yield eH(h),yield Xq(n),Yq(h)){F$(h),vP(e.slice(c),r);break}i.get(d).resolve()}else{Jq(c,e,r),vP(e.slice(c),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),t&&t(e),V$(r.get(a),e,r,n.get(Kn))})}function Yq(n){return xh(n.lView,n.tNode)[ry]===Xt.Error}function Jq(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&gy(i.lContainer)}function vP(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function Zq(n,e){for(let t of e)n.hydrating.set(t,Promise.withResolvers())}function Xq(n){return new Promise(e=>ny(e,{injector:n}))}function eH(n){return T(this,null,function*(){let{tNode:e,lView:t}=n,r=xh(t,e);return new Promise(i=>{tH(r,i),Kq(2,t,e)})})}function tH(n,e){Array.isArray(n[Ll])||(n[Ll]=[]),n[Ll].push(e)}function Ph(n,e,t,r){let i=Xe(),o=Jm();if(fo(i,o,e)){let s=gn(),a=Zm();z9(a,i,n,e,t,r)}return Ph}function bO(n,e,t,r){return fo(n,Jm(),t)?e+Vl(t)+r:wr}function nH(n,e,t,r,i,o){let s=_5(),a=Rq(n,s,t,i);return EI(2),a?e+Vl(t)+r+Vl(i)+o:wr}function im(n,e){return n<<17|e<<2}function Wa(n){return n>>17&32767}function rH(n){return(n&2)==2}function iH(n,e){return n&131071|e<<17}function nI(n){return n|2}function Hl(n){return(n&131068)>>2}function vE(n,e){return n&-131069|e<<2}function oH(n){return(n&1)===1}function rI(n){return n|1}function sH(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wa(s),c=Hl(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Sh(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let C=Wa(n[a+1]);n[r+1]=im(C,a),C!==0&&(n[C+1]=vE(n[C+1],r)),n[a+1]=iH(n[a+1],r)}else n[r+1]=im(a,0),a!==0&&(n[a+1]=vE(n[a+1],r)),a=r;else n[r+1]=im(c,0),a===0?a=r:n[c+1]=vE(n[c+1],r),c=r;d&&(n[r+1]=nI(n[r+1])),wP(n,h,r,!0),wP(n,h,r,!1),aH(e,h,n,r,o),s=im(a,c),o?e.classBindings=s:e.styleBindings=s}function aH(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Sh(o,e)>=0&&(t[r+1]=rI(t[r+1]))}function wP(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wa(i):Hl(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];cH(c,e)&&(a=!0,n[s+1]=r?rI(d):nI(d)),s=r?Wa(d):Hl(d)}a&&(n[t+1]=r?nI(i):rI(i))}function cH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Sh(n,e)>=0:!1}var Vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lH(n){return n.substring(Vr.key,Vr.keyEnd)}function uH(n){return dH(n),TO(n,CO(n,0,Vr.textEnd))}function TO(n,e){let t=Vr.textEnd;return t===e?-1:(e=Vr.keyEnd=hH(n,Vr.key=e,t),CO(n,e,t))}function dH(n){Vr.key=0,Vr.keyEnd=0,Vr.value=0,Vr.valueEnd=0,Vr.textEnd=n.length}function CO(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function hH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function q(n,e,t){let r=Xe(),i=Jm();if(fo(r,i,e)){let o=gn(),s=Zm();$I(o,s,r,n,e,r[ht],t,!1)}return q}function iI(n,e,t,r,i){HI(e,n,t,i?"class":"style",r)}function yy(n,e){return pH(n,e,null,!0),yy}function Ja(n){gH(EH,fH,n,!0)}function fH(n,e){for(let t=uH(e);t>=0;t=TO(e,t))gI(n,lH(e),!0)}function pH(n,e,t,r){let i=Xe(),o=gn(),s=EI(2);if(o.firstUpdatePass&&DO(o,n,s,r),e!==wr&&fo(i,s,e)){let a=o.data[Cs()];AO(o,a,i,i[ht],n,i[s+1]=bH(e,t),r,s)}}function gH(n,e,t,r){let i=gn(),o=EI(2);i.firstUpdatePass&&DO(i,null,o,r);let s=Xe();if(t!==wr&&fo(s,o,t)){let a=i.data[Cs()];if(MO(a,r)&&!SO(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=bE(c,t||"")),iI(i,a,s,t,r)}else IH(i,a,s,s[ht],s[o+1],s[o+1]=wH(n,e,t),r,o)}}function SO(n,e){return e>=n.expandoStartIndex}function DO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Cs()],s=SO(n,t);MO(o,r)&&e===null&&!s&&(e=!1),e=mH(i,o,e,r),sH(i,o,e,t,s,r)}}function mH(n,e,t,r){let i=b5(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wE(null,n,e,t,r),t=Th(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wE(i,n,e,t,r),o===null){let c=yH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=wE(null,n,e,c[1],r),c=Th(c,e.attrs,r),_H(n,e,r,c))}else o=vH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function yH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Hl(r)!==0)return n[Wa(r)]}function _H(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wa(i)]=r}function vH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Th(r,s,t)}return Th(r,e.attrs,t)}function wE(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Th(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Th(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),gI(n,s,t?!0:e[++o]))}return n===void 0?null:n}function wH(n,e,t){if(t==null||t==="")return qn;let r=[],i=Zl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function EH(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&gI(n,r,t)}function IH(n,e,t,r,i,o,s,a){i===wr&&(i=qn);let c=0,d=0,h=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;h!==null||g!==null;){let C=c<i.length?i[c+1]:void 0,S=d<o.length?o[d+1]:void 0,k=null,V;h===g?(c+=2,d+=2,C!==S&&(k=g,V=S)):g===null||h!==null&&h<g?(c+=2,k=h):(d+=2,k=g,V=S),k!==null&&AO(n,e,t,r,k,V,s,a),h=c<i.length?i[c]:null,g=d<o.length?o[d]:null}}function AO(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=oH(d)?EP(c,e,t,i,Hl(d),s):void 0;if(!jm(h)){jm(o)||rH(d)&&(o=EP(c,null,t,i,a,s));let g=c1(Cs(),t);o$(r,s,g,i,o)}}function EP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,C=t[i+1];C===wr&&(C=g?qn:void 0);let S=g?sE(C,r):h===r?C:void 0;if(d&&!jm(S)&&(S=sE(c,r)),jm(S)&&(a=S,s))return a;let k=n[i+1];i=s?Wa(k):Hl(k)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=sE(c,r))}return a}function jm(n){return n!==void 0}function bH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hn(Zl(n)))),n}function MO(n,e){return(n.flags&(e?8:16))!==0}function y(n,e,t,r){let i=Xe(),o=gn(),s=Mt+n,a=i[ht],c=o.firstCreatePass?lO(s,o,i,e,Vk,g1(),t,r):o.data[s],d=xO(o,i,c,a,e,n);i[s]=d;let h=vI(c);return Ah(c,!0),Rk(a,d,c),!Ya(c)&&TI()&&JI(o,i,d,c),(l5()===0||h)&&Mh(d,i),u5(),h&&(zI(o,i,c),wk(o,c,i)),r!==null&&Lk(i,c),y}function v(){let n=Yn();y1()?_1():(n=n.parent,Ah(n,!1));let e=n;h5(e)&&p5(),d5();let t=gn();return t.firstCreatePass&&uO(t,e),e.classesWithoutHost!=null&&A5(e)&&iI(t,e,Xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&M5(e)&&iI(t,e,Xe(),e.stylesWithoutHost,!1),v}function vt(n,e,t,r){return y(n,e,t,r),v(),vt}var xO=(n,e,t,r,i,o)=>(Ss(!0),FI(r,i,S1()));function TH(n,e,t,r,i,o){let s=e[jr],a=!s||Wl()||Ya(t)||Rh(s,o);if(Ss(a),a)return FI(r,i,S1());let c=fy(s,n,e,t);return _k(s,o)&&sy(s,o,c.nextSibling),s&&(K1(t)||Q1(c))&&Ka(t)&&(f5(t),xk(c)),c}function CH(){xO=TH}var SH=(n,e,t,r)=>(Ss(!0),Ak(e[ht],""));function DH(n,e,t,r){let i,o=e[jr],s=!o||Wl()||Rh(o,r)||Ya(t);if(Ss(s),s)return Ak(e[ht],"");let a=fy(o,n,e,t),c=t9(o,r);return sy(o,r,a),i=py(c,a),i}function AH(){SH=DH}function nt(){return Xe()}var zm="en-US";var MH=zm;function xH(n){typeof n=="string"&&(MH=n.toLowerCase().replace(/_/g,"-"))}function IP(n,e,t){return function r(i){if(i===Function)return t;let o=Ka(n)?vi(n.index,e):e;uy(o,5);let s=e[Gn],a=bP(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=bP(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function bP(n,e,t,r){let i=Be(null);try{return st(6,e,t),t(r)!==!1}catch(o){return RH(n,o),!1}finally{st(7,e,t),Be(i)}}function RH(n,e){let t=n[yi],r=t?t.get(wi,null):null;r&&r.handleError(e)}function TP(n,e,t,r,i,o){let s=e[t],a=e[Te],d=a.data[t].outputs[r],h=s[d],g=a.firstCreatePass?p1(a):null,C=f1(e),S=h.subscribe(o),k=C.length;C.push(o,S),g&&g.push(i,n.index,k,-(k+1))}function fe(n,e,t,r){let i=Xe(),o=gn(),s=Yn();return RO(o,i,i[ht],s,n,e,r),fe}function PH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[vm],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function RO(n,e,t,r,i,o,s){let a=vI(r),d=n.firstCreatePass?p1(n):null,h=f1(e),g=!0;if(r.type&3||s){let C=qr(r,e),S=s?s(C):C,k=h.length,V=s?H=>s(zr(H[r.index])):r.index,O=null;if(!s&&a&&(O=PH(n,e,i,r.index)),O!==null){let H=O.__ngLastListenerFn__||O;H.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=IP(r,e,o),$6(e,S,i,o);let H=t.listen(S,i,o);h.push(o,H),d&&d.push(i,V,k,k+1)}}else o=IP(r,e,o);if(g){let C=r.outputs?.[i],S=r.hostDirectiveOutputs?.[i];if(S&&S.length)for(let k=0;k<S.length;k+=2){let V=S[k],O=S[k+1];TP(r,e,V,O,i,o)}if(C&&C.length)for(let k of C)TP(r,e,k,i,i,o)}}function J(n=1){return C5(n)}function kH(n,e){let t=null,r=w9(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?Sk(n,o,!0):b9(r,o))return i}return t}function PO(n){let e=Xe()[Wn][Qn];if(!e.projection){let t=n?n.length:1,r=e.projection=B3(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?kH(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function kO(n,e=0,t,r,i,o){let s=Xe(),a=gn(),c=r?n+1:null;c!==null&&yO(s,a,c,r,i,o,null,t);let d=hy(a,Mt+n,16,null,t||null);d.projection===null&&(d.projection=e),_1();let g=!s[jr]||Wl();s[Wn][Qn].projection[d.projection]===null&&c!==null?OH(s,a,c):g&&!Ya(d)&&r$(a,s,d)}function OH(n,e,t){let r=Mt+t,i=e.data[r],o=n[r],s=YE(o,i.tView.ssrId),a=WI(n,i,void 0,{dehydratedView:s});XI(o,a,0,Nm(i,s))}function sb(n,e,t,r,i){let o=Xe(),s=bO(o,e,t,r);if(s!==wr){let a=gn(),c=Zm();$I(a,c,o,n,s,o[ht],i,!1)}return sb}function kh(n){let e=m5();return l1(e,Mt+n)}function b(n,e=""){let t=Xe(),r=gn(),i=n+Mt,o=r.firstCreatePass?hy(r,i,1,e,null):r.data[i],s=OO(r,t,o,e,n);t[i]=s,TI()&&JI(r,t,s,o),Ah(o,!1)}var OO=(n,e,t,r,i)=>(Ss(!0),Dk(e[ht],r));function NH(n,e,t,r,i){let o=e[jr],s=!o||Wl()||Ya(t)||Rh(o,i);return Ss(s),s?Dk(e[ht],r):fy(o,n,e,t)}function LH(){OO=NH}function tn(n){return rt("",n,""),tn}function rt(n,e,t){let r=Xe(),i=bO(r,n,e,t);return i!==wr&&NO(r,Cs(),i),rt}function yo(n,e,t,r,i){let o=Xe(),s=nH(o,n,e,t,r,i);return s!==wr&&NO(o,Cs(),s),yo}function NO(n,e,t){let r=c1(e,n);D9(n[ht],r,t)}function Ce(n,e,t){W1(e)&&(e=e());let r=Xe(),i=Jm();if(fo(r,i,e)){let o=gn(),s=Zm();$I(o,s,r,n,e,r[ht],t,!1)}return Ce}function Re(n,e){let t=W1(n);return t&&n.set(e),t}function Se(n,e){let t=Xe(),r=gn(),i=Yn();return RO(r,t,t[ht],i,n,e),Se}function FH(n,e,t){let r=gn();if(r.firstCreatePass){let i=_i(n);oI(t,r.data,r.blueprint,i,!0),oI(e,r.data,r.blueprint,i,!1)}}function oI(n,e,t,r,i){if(n=Pn(n),Array.isArray(n))for(let o=0;o<n.length;o++)oI(n[o],e,t,r,i);else{let o=gn(),s=Xe(),a=Yn(),c=Ul(n)?n:Pn(n.provide),d=ZP(n),h=a.providerIndexes&1048575,g=a.directiveStart,C=a.providerIndexes>>20;if(Ul(n)||!n.multi){let S=new Ha(d,i,te),k=IE(c,e,i?h:h+C,g);k===-1?(NE(Dm(a,s),o,c),EE(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)):(t[k]=S,s[k]=S)}else{let S=IE(c,e,h+C,g),k=IE(c,e,h,h+C),V=S>=0&&t[S],O=k>=0&&t[k];if(i&&!O||!i&&!V){NE(Dm(a,s),o,c);let H=BH(i?UH:VH,t.length,i,r,d);!i&&O&&(t[k].providerFactory=H),EE(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),s.push(H)}else{let H=LO(t[i?k:S],d,!i&&r);EE(o,n,S>-1?S:k,H)}!i&&r&&O&&t[k].componentProviders++}}}function EE(n,e,t,r){let i=Ul(e),o=W3(e);if(i||o){let c=(o?Pn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function LO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function IE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function VH(n,e,t,r,i){return sI(this.multi,[])}function UH(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Am(r,r[Te],this.providerFactory.index,i);s=c.slice(0,a),sI(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],sI(o,s);return s}function sI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function BH(n,e,t,r,i){let o=new Ha(n,t,te);return o.multi=[],o.index=e,o.componentProviders=0,LO(o,i,r&&!t),o}function Si(n,e=[]){return t=>{t.providersResolver=(r,i)=>FH(r,i?i(n):n,e)}}function jH(n,e){let t=n[e];return t===wr?void 0:t}function zH(n,e,t,r,i,o){let s=e+t;return fo(n,s,i)?xq(n,s+1,o?r.call(o,i):r(i)):jH(n,s+1)}function Gr(n,e){let t=gn(),r,i=n+Mt;t.firstCreatePass?(r=$H(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ja(r.type,!0)),s,a=$n(te);try{let c=Sm(!1),d=o();return Sm(c),o5(t,Xe(),i,d),d}finally{$n(a)}}function $H(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Wr(n,e,t){let r=n+Mt,i=Xe(),o=l1(i,r);return qH(i,r)?zH(i,y5(),e,o.transform,t,o):o.transform(t)}function qH(n,e){return n[Te].data[e].pure}function FO(n,e){return eO(n,e)}var Ts=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},VO=new Ts("19.2.15"),aI=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},UO=(()=>{class n{compileModuleSync(t){return new eI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=WP(t),o=Tk(i.declarations).reduce((s,a)=>{let c=bs(a);return c&&s.push(new $l(c)),s},[]);return new aI(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HH=(()=>{class n{zone=z(Fe);changeDetectionScheduler=z(Ga);applicationRef=z(Kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GH=new Y("",{factory:()=>!1});function BO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Fe(le(j({},zO()),{scheduleInRootZone:t})),[{provide:Fe,useFactory:n},{provide:Is,multi:!0,useFactory:()=>{let r=z(HH,{optional:!0});return()=>r.initialize()}},{provide:Is,multi:!0,useFactory:()=>{let r=z(WH);return()=>{r.initialize()}}},e===!0?{provide:z1,useValue:!0}:[],{provide:$1,useValue:t??j1}]}function jO(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=BO({ngZoneFactory:()=>{let i=zO(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ci("NgZone_CoalesceEvent"),new Fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return bn([{provide:GH,useValue:!0},{provide:Xm,useValue:!1},r])}function zO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WH=(()=>{class n{subscription=new Ot;initialized=!1;zone=z(Fe);pendingTasks=z(go);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var KH=(()=>{class n{appRef=z(Kn);taskService=z(go);ngZone=z(Fe);zonelessEnabled=z(Xm);tracing=z(Jl,{optional:!0});disableScheduling=z(z1,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z($1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof BE||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?KR:q1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QH(){return typeof $localize<"u"&&$localize.locale||zm}var ab=new Y("",{providedIn:"root",factory:()=>z(ab,Ne.Optional|Ne.SkipSelf)||QH()});var cI=new Y(""),YH=new Y("");function gh(n){return!n.moduleRef}function JH(n){let e=gh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Fe);return t.run(()=>{gh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),gh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(cI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(cI);s.add(o),n.moduleRef.onDestroy(()=>{um(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return XH(r,t,()=>{let o=e.get(IO);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ab,zm);if(xH(s||zm),!e.get(YH,!0))return gh(n)?e.get(Kn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(gh(n)){let c=e.get(Kn);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return ZH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function ZH(n,e){let t=n.injector.get(Kn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}function XH(n,e,t){try{let r=t();return As(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var dm=null;function e8(n=[],e){return xt.create({name:e,providers:[{provide:Wm,useValue:"platform"},{provide:cI,useValue:new Set([()=>dm=null])},...n]})}function t8(n=[]){if(dm)return dm;let e=e8(n);return dm=e,zq(),n8(e),e}function n8(n){let e=n.get(MI,null);cr(n,()=>{e?.forEach(t=>t())})}var xs=(()=>{class n{static __NG_ELEMENT_ID__=r8}return n})();function r8(n){return i8(Yn(),Xe(),(n&16)===16)}function i8(n,e,t){if(Ka(n)&&!t){let r=vi(n.index,e);return new bh(r,r)}else if(n.type&175){let r=e[Wn];return new bh(r,e)}return null}var lI=class{constructor(){}supports(e){return mO(e)}create(e){return new uI(e)}},o8=(n,e)=>e,uI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||o8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<CP(r,i,o)?t:r,a=CP(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,h=c-i;if(d!=h){for(let C=0;C<d;C++){let S=C<o.length?o[C]:o[C]=0,k=S+C;h<=k&&k<d&&(o[C]=S+1)}let g=s.previousIndex;o[g]=h-d}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!mO(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,Aq(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new dI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $m),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $m),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},hI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},$m=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new hI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function SP(){return new cb([new lI])}var cb=(()=>{class n{factories;static \u0275prov=ee({token:n,providedIn:"root",factory:SP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||SP()),deps:[[n,new U3,new en]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function $O(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;st(8);try{let o=i?.injector??t8(r),s=[BO({}),{provide:Ga,useExisting:KH},...t||[]],a=new Bm({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return JH({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{st(9)}}var om=new WeakSet,DP="",hm=[];function AP(n){return n.get(ck,w6)}function qO(){let n=[{provide:ck,useFactory:()=>{let e=!0;{let t=z(ao);e=!!window._ejsas?.[t]}return e&&Ci("NgEventReplay"),e}}];return n.push({provide:Is,useValue:()=>{let e=z(Kn),{injector:t}=e;if(!om.has(e)){let r=z(XR);if(AP(t)){q6();let i=t.get(ao),o=z6(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(V6(s,a,c),U6(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Ms,useFactory:()=>{let e=z(Kn),{injector:t}=e;return()=>{!AP(t)||om.has(e)||(om.add(e),e.onDestroy(()=>{om.delete(e);{let r=t.get(ao);oE(r)}}),e.whenStable().then(()=>{if(e.destroyed)return;let r=t.get(j6);s8(r,t);let i=t.get(XR);i.get(DP)?.forEach(B6),i.delete(DP);let o=r.instance;e9(t)?e.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),n}var s8=(n,e)=>{let t=e.get(ao),r=window._ejsas[t],i=n.instance=new PR(new Xg(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=kR(t);i.replayEarlyEventInfos(o),oE(t);let s=new em(a=>{a8(e,a,a.currentTarget)});RR(i,s)};function a8(n,e,t){let r=(t&&t.getAttribute(oy))??"";/d\d+/.test(r)?c8(r,n,e,t):e.eventPhase===iE.REPLAY&&fk(e,t)}function c8(n,e,t,r){hm.push({event:t,currentTarget:r}),Qq(e,n,l8)}function l8(n){let e=[...hm],t=new Set(n);hm=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(oy);t.has(o)?fk(r,i):hm.push({event:r,currentTarget:i})}}var MP=!1;function u8(){MP||(MP=!0,Y6(),CH(),LH(),AH(),Oq(),gq(),j$(),L9())}function d8(n){return n.whenStable()}function HO(){let n=[{provide:nm,useFactory:()=>{let e=!0;return e=!!z(Yl,{optional:!0})?.get(gk,null),e&&Ci("NgHydration"),e}},{provide:Is,useValue:()=>{O$(!1),z(nm)&&(i9(ty()),u8())},multi:!0}];return n.push({provide:ak,useFactory:()=>z(nm)},{provide:Ms,useFactory:()=>{if(z(nm)){let e=z(Kn);return()=>{d8(e).then(()=>{e.destroyed||rO(e)})}}return()=>{}},multi:!0}),bn(n)}function Rs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Kr(n){return Fw(n)}function tu(n,e){return kw(n,e?.equal)}var xP=class{[_r];constructor(e){this[_r]=e}destroy(){this[_r].destroy()}};function GO(n){let e=bs(n);if(!e)return null;let t=new $l(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cn=new Y("");var QO=null;function Ir(){return QO}function lb(n){QO??=n}var Oh=class{},Nh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(YO),providedIn:"platform"})}return n})(),ub=new Y(""),YO=(()=>{class n extends Nh{_location;_history;_doc=z(cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function _y(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function WO(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qr(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(wy),providedIn:"root"})}return n})(),vy=new Y(""),wy=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _y(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(Nh),ue(vy,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ps=(()=>{class n{_subject=new At;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=p8(WO(KO(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(f8(this._basePath,KO(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qr;static joinWithSlash=_y;static stripTrailingSlash=WO;static \u0275fac=function(r){return new(r||n)(ue(Yr))};static \u0275prov=ee({token:n,factory:()=>h8(),providedIn:"root"})}return n})();function h8(){return new Ps(ue(Yr))}function f8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function KO(n){return n.replace(/\/index.html$/,"")}function p8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var fb=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_y(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(Nh),ue(vy,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();var Ey=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ks=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ey(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),JO(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);JO(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Xl),te(dy),te(cb))};static \u0275dir=yt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function JO(n,e){n.context.$implicit=e.item}var mn=(()=>{class n{_viewContainer;_context=new Iy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZO(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZO(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(Xl),te(dy))};static \u0275dir=yt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Iy=class{$implicit=null;ngIf=null};function ZO(n,e){if(n&&!n.createEmbeddedView)throw new ie(2020,!1)}function XO(n,e){return new ie(2100,!1)}var db=class{createSubscription(e,t){return Kr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Kr(()=>e.unsubscribe())}},hb=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},g8=new hb,m8=new db,Lh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(As(t))return g8;if(ib(t))return m8;throw XO(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(te(xs,16))};static \u0275pipe=nb({name:"async",type:n,pure:!1})}return n})();var y8=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Za=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw XO(n,t);return t.replace(y8,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=nb({name:"titlecase",type:n,pure:!0})}return n})();var ln=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function pb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var by="browser",eN="server";function gb(n){return n===by}function Ty(n){return n===eN}var Fh=class{};var tN=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new mb(z(cn),window)})}return n})(),mb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=_8(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function _8(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Dy=new Y(""),wb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ue(Dy),ue(Fe))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Vh=class{_doc;constructor(e){this._doc=e}manager},Cy="ng-app-id";function nN(n){for(let e of n)e.remove()}function rN(n,e){let t=e.createElement("style");return t.textContent=n,t}function v8(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Cy}="${e}"],link[${Cy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Cy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function _b(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Eb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Ty(o),v8(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,rN);r?.forEach(i=>this.addUsage(i,this.external,_b))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(nN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])nN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,rN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,_b(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Cy,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ue(cn),ue(ao),ue(xI,8),ue(Ti))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),yb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ib=/%COMP%/g;var oN="%COMP%",w8=`_nghost-${oN}`,E8=`_ngcontent-${oN}`,I8=!0,b8=new Y("",{providedIn:"root",factory:()=>I8});function T8(n){return E8.replace(Ib,n)}function C8(n){return w8.replace(Ib,n)}function sN(n,e){return e.map(t=>t.replace(Ib,n))}var bb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=Ty(a),this.defaultRenderer=new Uh(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ei.ShadowDom&&(r=le(j({},r),{encapsulation:Ei.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Sy?i.applyToHost(t):i instanceof Bh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,C=this.tracingService;switch(r.encapsulation){case Ei.Emulated:o=new Sy(c,d,r,this.appId,h,s,a,g,C);break;case Ei.ShadowDom:return new vb(c,d,t,r,s,a,this.nonce,g,C);default:o=new Bh(c,d,r,h,s,a,g,C);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ue(wb),ue(Eb),ue(ao),ue(b8),ue(cn),ue(Ti),ue(Fe),ue(xI),ue(Jl,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Uh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(yb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=yb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=yb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ho.DashCase|ho.Important)?e.style.setProperty(t,r,i&ho.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ho.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ir().getGlobalEventTarget(this.doc,e),!e))throw new ie(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function iN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var vb=class extends Uh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=sN(i.id,h);for(let C of h){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=C,this.shadowRoot.appendChild(S)}let g=i.getExternalStyles?.();if(g)for(let C of g){let S=_b(C,o);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bh=class extends Uh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?sN(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Sy=class extends Bh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,d){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,d,h),this.contentAttr=T8(h),this.hostAttr=C8(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ay=class n extends Oh{supportsDOMEvents=!0;static makeCurrent(){lb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S8();return t==null?null:D8(t)}resetBaseElement(){jh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pb(document.cookie,e)}},jh=null;function S8(){return jh=jh||document.head.querySelector("base"),jh?jh.getAttribute("href"):null}function D8(n){return new URL(n,document.baseURI).pathname}var A8=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),cN=(()=>{class n extends Vh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ue(cn))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),aN=["alt","control","meta","shift"],M8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},x8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},lN=(()=>{class n extends Vh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aN.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=M8[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aN.forEach(s=>{if(s!==i){let a=x8[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ue(cn))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function Tb(n,e,t){return $O(j({rootComponent:n,platformRef:t?.platformRef},R8(e)))}function R8(n){return{appProviders:[...L8,...n?.providers??[]],platformProviders:N8}}function P8(){Ay.makeCurrent()}function k8(){return new wi}function O8(){return tk(document),document}var N8=[{provide:Ti,useValue:by},{provide:MI,useValue:P8,multi:!0},{provide:cn,useFactory:O8}];var L8=[{provide:Wm,useValue:"root"},{provide:wi,useFactory:k8},{provide:Dy,useClass:cN,multi:!0,deps:[cn]},{provide:Dy,useClass:lN,multi:!0,deps:[cn]},bb,Eb,wb,{provide:zl,useExisting:bb},{provide:Fh,useClass:A8},[]];var zh=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var F8="X-Request-URL",V8="text/plain",U8="application/json",Dpe=`${U8}, ${V8}, */*`;var Sb=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Sb||{}),Cb=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new zh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var $h=class n extends Cb{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Sb.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var uN=new Y("");var Ape=RegExp(`^${F8}:`,"m");var B8=new Y(""),j8="b",z8="h",$8="s",q8="st",H8="u",G8="rt",Db=new Y(""),W8=["GET","HEAD"];function K8(n,e){let C=z(Db),{isCacheActive:t}=C,r=sh(C,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!W8.includes(o)||!r.includeRequestsWithAuthHeaders&&Q8(n)||r.filter?.(n)===!1)return e(n);let s=z(Yl);if(z(B8,{optional:!0}))throw new ie(2803,!1);let c=n.url,d=Y8(n,c),h=s.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),h){let{[j8]:S,[G8]:k,[z8]:V,[$8]:O,[q8]:H,[H8]:re}=h,Z=S;switch(k){case"arraybuffer":Z=new TextEncoder().encode(S).buffer;break;case"blob":Z=new Blob([S]);break}let de=new zh(V);return _e(new $h({body:Z,headers:de,status:O,statusText:H,url:re}))}return e(n).pipe(Zt(S=>{S instanceof $h}))}function Q8(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function dN(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Y8(n,e){let{params:t,method:r,responseType:i}=n,o=dN(t),s=n.serializeBody();s instanceof URLSearchParams?s=dN(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=J8(a);return c}function J8(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function hN(n){return[{provide:Db,useFactory:()=>(Ci("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:uN,useValue:K8,multi:!0},{provide:Ms,multi:!0,useFactory:()=>{let e=z(Kn),t=z(Db);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var fN=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ue(cn))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var My=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(My||{});function Z8(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function pN(){return Z8(My.EventReplay,qO())}function gN(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(My.HttpTransferCacheOptions);return bn([[],HO(),t.has(My.NoHttpTransferCache)||r?[]:hN({}),e])}var Pe="primary",nf=Symbol("RouteTitle"),Pb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function tc(n){return new Pb(n)}function bN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function eG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Di(n[t],e[t]))return!1;return!0}function Di(n,e){let t=n?kb(n):void 0,r=e?kb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!TN(n[i],e[i]))return!1;return!0}function kb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function CN(n){return n.length>0?n[n.length-1]:null}function Vs(n){return Ww(n)?n:As(n)?dt(Promise.resolve(n)):_e(n)}var tG={exact:DN,subset:AN},SN={exact:nG,subset:rG,ignored:()=>!0};function mN(n,e,t){return tG[t.paths](n.root,e.root,t.matrixParams)&&SN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function nG(n,e){return Di(n,e)}function DN(n,e,t){if(!Xa(n.segments,e.segments)||!Py(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DN(n.children[r],e.children[r],t))return!1;return!0}function rG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TN(n[t],e[t]))}function AN(n,e,t){return MN(n,e,e.segments,t)}function MN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Xa(i,t)||e.hasChildren()||!Py(i,t,r))}else if(n.segments.length===t.length){if(!Xa(n.segments,t)||!Py(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!AN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Xa(n.segments,i)||!Py(n.segments,i,r)||!n.children[Pe]?!1:MN(n.children[Pe],e,o,r)}}function Py(n,e,t){return e.every((r,i)=>SN[t](n[i].parameters,r.parameters))}var Mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new it([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tc(this.queryParams),this._queryParamMap}toString(){return sG.serialize(this)}},it=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ky(this)}},Os=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=tc(this.parameters),this._parameterMap}toString(){return RN(this)}};function iG(n,e){return Xa(n,e)&&n.every((t,r)=>Di(t.parameters,e[r].parameters))}function Xa(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function oG(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var nc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new Ns,providedIn:"root"})}return n})(),Ns=class{parse(e){let t=new Nb(e);return new Mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qh(e.root,!0)}`,r=lG(e.queryParams),i=typeof e.fragment=="string"?`#${aG(e.fragment)}`:"";return`${t}${r}${i}`}},sG=new Ns;function ky(n){return n.segments.map(e=>RN(e)).join("/")}function qh(n,e){if(!n.hasChildren())return ky(n);if(e){let t=n.children[Pe]?qh(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Pe&&r.push(`${i}:${qh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=oG(n,(r,i)=>i===Pe?[qh(n.children[Pe],!1)]:[`${i}:${qh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${ky(n)}/${t[0]}`:`${ky(n)}/(${t.join("//")})`}}function xN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xy(n){return xN(n).replace(/%3B/gi,";")}function aG(n){return encodeURI(n)}function Ob(n){return xN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oy(n){return decodeURIComponent(n)}function yN(n){return Oy(n.replace(/\+/g,"%20"))}function RN(n){return`${Ob(n.path)}${cG(n.parameters)}`}function cG(n){return Object.entries(n).map(([e,t])=>`;${Ob(e)}=${Ob(t)}`).join("")}function lG(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xy(t)}=${xy(i)}`).join("&"):`${xy(t)}=${xy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uG=/^[^\/()?;#]+/;function Ab(n){let e=n.match(uG);return e?e[0]:""}var dG=/^[^\/()?;=#]+/;function hG(n){let e=n.match(dG);return e?e[0]:""}var fG=/^[^=?&#]+/;function pG(n){let e=n.match(fG);return e?e[0]:""}var gG=/^[^&#]+/;function mG(n){let e=n.match(gG);return e?e[0]:""}var Nb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new it(e,t)),r}parseSegment(){let e=Ab(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Os(Oy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ab(this.remaining);i&&(r=i,this.capture(r))}e[Oy(t)]=Oy(r)}parseQueryParam(e){let t=pG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=mG(this.remaining);s&&(r=s,this.capture(r))}let i=yN(t),o=yN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ab(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Pe]:new it([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function PN(n){return n.segments.length>0?new it([],{[Pe]:n}):n}function kN(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=kN(i);if(r===Pe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new it(n.segments,e);return yG(t)}function yG(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new it(n.segments.concat(e.segments),e.children)}return n}function Ls(n){return n instanceof Mi}function ON(n,e,t=null,r=null){let i=NN(n);return LN(i,e,t,r)}function NN(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let a=new it(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=PN(r);return e??i}function LN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mb(i,i,i,t,r);let o=_G(e);if(o.toRoot())return Mb(i,i,new it([],{}),t,r);let s=vG(o,i,n),a=s.processChildren?Gh(s.segmentGroup,s.index,o.commands):VN(s.segmentGroup,s.index,o.commands);return Mb(i,s.segmentGroup,a,t,r)}function Ly(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kh(n){return typeof n=="object"&&n!=null&&n.outlets}function Mb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let s;n===e?s=t:s=FN(n,e,t);let a=PN(kN(s));return new Mi(a,o,i)}function FN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=FN(o,e,t)}),new it(n.segments,r)}var Fy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ly(r[0]))throw new ie(4003,!1);let i=r.find(Kh);if(i&&i!==CN(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _G(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Fy(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fy(t,e,r)}var iu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vG(n,e,t){if(n.isAbsolute)return new iu(e,!0,0);if(!t)return new iu(e,!1,NaN);if(t.parent===null)return new iu(t,!0,0);let r=Ly(n.commands[0])?0:1,i=t.segments.length-1+r;return wG(t,i,n.numberOfDoubleDots)}function wG(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new iu(r,!1,i-o)}function EG(n){return Kh(n[0])?n[0].outlets:{[Pe]:n}}function VN(n,e,t){if(n??=new it([],{}),n.segments.length===0&&n.hasChildren())return Gh(n,e,t);let r=IG(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new it(n.segments.slice(0,r.pathIndex),{});return o.children[Pe]=new it(n.segments.slice(r.pathIndex),n.children),Gh(o,0,i)}else return r.match&&i.length===0?new it(n.segments,{}):r.match&&!n.hasChildren()?Lb(n,e,t):r.match?Gh(n,0,i):Lb(n,e,t)}function Gh(n,e,t){if(t.length===0)return new it(n.segments,{});{let r=EG(t),i={};if(Object.keys(r).some(o=>o!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let o=Gh(n.children[Pe],e,t);return new it(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=VN(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new it(n.segments,i)}}function IG(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Kh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!vN(c,d,s))return o;r+=2}else{if(!vN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Kh(o)){let c=bG(o.outlets);return new it(r,c)}if(i===0&&Ly(t[0])){let c=n.segments[e];r.push(new Os(c.path,_N(t[0]))),i++;continue}let s=Kh(o)?o.outlets[Pe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ly(a)?(r.push(new Os(s,_N(a))),i+=2):(r.push(new Os(s,{})),i++)}return new it(r,{})}function bG(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Lb(new it([],{}),0,r))}),e}function _N(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vN(n,e,t){return n==t.path&&Di(e,t.parameters)}var Ny="imperative",nn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nn||{}),hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Fs=class extends hr{type=nn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends hr{urlAfterRedirects;type=nn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jn||{}),su=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(su||{}),Ai=class extends hr{reason;code;type=nn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xi=class extends hr{reason;code;type=nn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},au=class extends hr{error;target;type=nn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qh=class extends hr{urlAfterRedirects;state;type=nn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends hr{urlAfterRedirects;state;type=nn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends hr{urlAfterRedirects;state;shouldActivate;type=nn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},By=class extends hr{urlAfterRedirects;state;type=nn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class extends hr{urlAfterRedirects;state;type=nn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class{route;type=nn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$y=class{route;type=nn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qy=class{snapshot;type=nn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=nn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{snapshot;type=nn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{snapshot;type=nn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cu=class{routerEvent;position;anchor;type=nn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Yh=class{},lu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TG(n,e){return n.providers&&!n._injector&&(n._injector=eu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||Pe}function CG(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function rf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ky=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return rf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new rc(this.rootInjector)}},rc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ky(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ue(kn))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Fb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Fb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Vb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vb(e,this._root).map(t=>t.value)}};function Fb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Fb(n,t);if(r)return r}return null}function Vb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Vb(n,t);if(r.length)return r.unshift(e),r}return[]}var dr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ru(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jh=class extends Qy{snapshot;constructor(e,t){super(e),this.snapshot=t,Gb(this,e)}toString(){return this.snapshot.toString()}};function UN(n){let e=SG(n),t=new Nt([new Os("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),s=new Nt(""),a=new Tn(t,r,o,s,i,Pe,n,e.root);return a.snapshot=e.root,new Jh(new dr(a,[]),e)}function SG(n){let e={},t={},r={},i="",o=new ec([],e,r,i,t,Pe,n,null,{});return new Zh("",new dr(o,[]))}var Tn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(be(d=>d[nf]))??_e(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(be(e=>tc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(be(e=>tc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&jN(i)&&(r.resolve[nf]=i.title),r}var ec=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nf]}constructor(e,t,r,i,o,s,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zh=class extends Qy{url;constructor(e,t){super(t),this.url=e,Gb(this,t)}toString(){return BN(this._root)}};function Gb(n,e){e.value._routerState=n,e.children.forEach(t=>Gb(n,t))}function BN(n){let e=n.children.length>0?` { ${n.children.map(BN).join(", ")} } `:"";return`${n.value}${e}`}function xb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Di(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Di(e.params,t.params)||n.paramsSubject.next(t.params),eG(e.url,t.url)||n.urlSubject.next(t.url),Di(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ub(n,e){let t=Di(n.params,e.params)&&iG(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ub(n.parent,e.parent))}function jN(n){return typeof n.title=="string"||n.title===null}var zN=new Y(""),of=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new mt;deactivateEvents=new mt;attachEvents=new mt;detachEvents=new mt;routerOutletData=G1(void 0);parentContexts=z(rc);location=z(Xl);changeDetector=z(xs);inputBinder=z(sf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Bb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=yt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[lr]})}return n})(),Bb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Tn?this.route:e===rc?this.childContexts:e===zN?this.outletData:this.parent.get(e,t)}},sf=new Y(""),Wb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Fa([r.queryParams,r.params,r.data]).pipe(zn(([o,s,a],c)=>(a=j(j(j({},o),s),a),c===0?_e(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=GO(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Kb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=It({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&vt(0,"router-outlet")},dependencies:[of],encapsulation:2})}return n})();function Qb(n){let e=n.children&&n.children.map(Qb),t=e?le(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=Kb),t}function DG(n,e,t){let r=Xh(n,e._root,t?t._root:void 0);return new Jh(r,e)}function Xh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=AG(n,e,t);return new dr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xh(n,a)),s}}let r=MG(e.value),i=e.children.map(o=>Xh(n,o));return new dr(r,i)}}function AG(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xh(n,r,i);return Xh(n,r)})}function MG(n){return new Tn(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}var uu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$N="ngNavigationCancelingError";function Jy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qN(!1,Jn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function qN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$N]=!0,t.cancellationCode=e,t}function xG(n){return HN(n)&&Ls(n.url)}function HN(n){return!!n&&n[$N]}var RG=(n,e,t,r)=>be(i=>(new jb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ru(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ru(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ru(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ru(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(xb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Zy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ou=class{component;route;constructor(e,t){this.component=e,this.route=t}};function PG(n,e,t){let r=n._root,i=e?e._root:null;return Hh(r,i,t,[r.value])}function kG(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!LP(n)?n:e.get(n):r}function Hh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ru(e);return n.children.forEach(s=>{OG(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Wh(a,t.getContext(s),i)),i}function OG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=NG(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Zy(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hh(n,e,a?a.children:null,r,i):Hh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ou(a.outlet.component,s))}else s&&Wh(e,a,i),i.canActivateChecks.push(new Zy(r)),o.component?Hh(n,null,a?a.children:null,r,i):Hh(n,null,t,r,i);return i}function NG(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Xa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xa(n.url,e.url)||!Di(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ub(n,e)||!Di(n.queryParams,e.queryParams);case"paramsChange":default:return!Ub(n,e)}}function Wh(n,e,t){let r=ru(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Wh(s,e.children.getContext(o),t):Wh(s,null,t):Wh(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ou(e.outlet.component,i)):t.canDeactivateChecks.push(new ou(null,i)):t.canDeactivateChecks.push(new ou(null,i))}function af(n){return typeof n=="function"}function LG(n){return typeof n=="boolean"}function FG(n){return n&&af(n.canLoad)}function VG(n){return n&&af(n.canActivate)}function UG(n){return n&&af(n.canActivateChild)}function BG(n){return n&&af(n.canDeactivate)}function jG(n){return n&&af(n.canMatch)}function GN(n){return n instanceof io||n?.name==="EmptyError"}var Ry=Symbol("INITIAL_VALUE");function du(){return zn(n=>Fa(n.map(e=>e.pipe(In(1),Qg(Ry)))).pipe(be(e=>{for(let t of e)if(t!==!0){if(t===Ry)return Ry;if(t===!1||zG(t))return t}return!0}),jn(e=>e!==Ry),In(1)))}function zG(n){return Ls(n)||n instanceof uu}function $G(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?_e(le(j({},t),{guardsResult:!0})):qG(s,r,i,n).pipe(Lt(a=>a&&LG(a)?HG(r,o,n,e):_e(a)),be(a=>le(j({},t),{guardsResult:a})))})}function qG(n,e,t,r){return dt(n).pipe(Lt(i=>YG(i.component,i.route,t,e,r)),so(i=>i!==!0,!0))}function HG(n,e,t,r){return dt(e).pipe(_s(i=>Sl(WG(i.route.parent,r),GG(i.route,r),QG(n,i.path,t),KG(n,i.route,t))),so(i=>i!==!0,!0))}function GG(n,e){return n!==null&&e&&e(new Gy(n)),_e(!0)}function WG(n,e){return n!==null&&e&&e(new qy(n)),_e(!0)}function KG(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return _e(!0);let i=r.map(o=>Gg(()=>{let s=rf(e)??t,a=hu(o,s),c=VG(a)?a.canActivate(e,n):cr(s,()=>a(e,n));return Vs(c).pipe(so())}));return _e(i).pipe(du())}function QG(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>kG(s)).filter(s=>s!==null).map(s=>Gg(()=>{let a=s.guards.map(c=>{let d=rf(s.node)??t,h=hu(c,d),g=UG(h)?h.canActivateChild(r,n):cr(d,()=>h(r,n));return Vs(g).pipe(so())});return _e(a).pipe(du())}));return _e(o).pipe(du())}function YG(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return _e(!0);let s=o.map(a=>{let c=rf(e)??i,d=hu(a,c),h=BG(d)?d.canDeactivate(n,e,t,r):cr(c,()=>d(n,e,t,r));return Vs(h).pipe(so())});return _e(s).pipe(du())}function JG(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return _e(!0);let o=i.map(s=>{let a=hu(s,n),c=FG(a)?a.canLoad(e,t):cr(n,()=>a(e,t));return Vs(c)});return _e(o).pipe(du(),WN(r))}function WN(n){return Dg(Zt(e=>{if(typeof e!="boolean")throw Jy(n,e)}),be(e=>e===!0))}function ZG(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return _e(!0);let o=i.map(s=>{let a=hu(s,n),c=jG(a)?a.canMatch(e,t):cr(n,()=>a(e,t));return Vs(c)});return _e(o).pipe(du(),WN(r))}var ef=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},tf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function nu(n){return Tl(new ef(n))}function XG(n){return Tl(new ie(4e3,!1))}function eW(n){return Tl(qN(!1,Jn.GuardRejected))}var zb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return _e(r);if(i.numberOfChildren>1||!i.children[Pe])return XG(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:h,url:g,outlet:C,params:S,data:k,title:V}=i,O=cr(o,()=>a({params:S,data:k,queryParams:c,fragment:d,routeConfig:h,url:g,outlet:C,title:V}));if(O instanceof Mi)throw new tf(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new tf(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Mi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new it(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},$b={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tW(n,e,t,r,i){let o=KN(n,e,t);return o.matched?(r=TG(e,r),ZG(r,e,t,i).pipe(be(s=>s===!0?o:j({},$b)))):_e(o)}function KN(n,e,t){if(e.path==="**")return nW(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},$b):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bN)(t,n,e);if(!i)return j({},$b);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nW(n){return{matched:!0,parameters:n.length>0?CN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wN(n,e,t,r){return t.length>0&&oW(n,t,r)?{segmentGroup:new it(e,iW(r,new it(t,n.children))),slicedSegments:[]}:t.length===0&&sW(n,t,r)?{segmentGroup:new it(n.segments,rW(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new it(n.segments,n.children),slicedSegments:t}}function rW(n,e,t,r){let i={};for(let o of t)if(e_(n,e,o)&&!r[Jr(o)]){let s=new it([],{});i[Jr(o)]=s}return j(j({},r),i)}function iW(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&Jr(r)!==Pe){let i=new it([],{});t[Jr(r)]=i}return t}function oW(n,e,t){return t.some(r=>e_(n,e,r)&&Jr(r)!==Pe)}function sW(n,e,t){return t.some(r=>e_(n,e,r))}function e_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function aW(n,e,t){return e.length===0&&!n.children[t]}var qb=class{};function cW(n,e,t,r,i,o,s="emptyOnly"){return new Hb(n,e,t,r,i,s,o).recognize()}var lW=31,Hb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new zb(this.urlSerializer,this.urlTree)}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=wN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(be(({children:t,rootSnapshot:r})=>{let i=new dr(r,t),o=new Zh("",i),s=ON(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ec([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,t).pipe(be(r=>({children:r,rootSnapshot:t})),oo(r=>{if(r instanceof tf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ef?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(be(s=>s instanceof dr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return dt(o).pipe(_s(s=>{let a=r.children[s],c=CG(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Kg((s,a)=>(s.push(...a),s)),vs(null),Qw(),Lt(s=>{if(s===null)return nu(r);let a=QN(s);return uW(a),_e(a)}))}processSegment(e,t,r,i,o,s,a){return dt(t).pipe(_s(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(oo(d=>{if(d instanceof ef)return _e(null);throw d}))),so(c=>!!c),oo(c=>{if(GN(c))return aW(r,i,o)?_e(new qb):nu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Jr(r)!==s&&(s===Pe||!e_(i,o,r))?nu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):nu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:C}=KN(t,i,o);if(!c)return nu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lW&&(this.allowRedirects=!1));let S=new ec(o,d,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,EN(i),Jr(i),i.component??i._loadedComponent??null,i,IN(i)),k=Yy(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let V=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,S,e);return this.applyRedirects.lineralizeSegments(i,V).pipe(Lt(O=>this.processSegment(e,r,t,O.concat(C),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=tW(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(zn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zn(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:C,remainingSegments:S}=c,k=new ec(C,g,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,EN(r),Jr(r),r.component??r._loadedComponent??null,r,IN(r)),V=Yy(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(V.params),k.data=Object.freeze(V.data);let{segmentGroup:O,slicedSegments:H}=wN(t,C,S,d);if(H.length===0&&O.hasChildren())return this.processChildren(h,d,O,k).pipe(be(Z=>new dr(k,Z)));if(d.length===0&&H.length===0)return _e(new dr(k,[]));let re=Jr(r)===o;return this.processSegment(h,d,O,H,re?Pe:o,!0,k).pipe(be(Z=>new dr(k,Z instanceof dr?[Z]:[])))}))):nu(t)))}getChildConfig(e,t,r){return t.children?_e({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?_e({routes:t._loadedRoutes,injector:t._loadedInjector}):JG(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(Zt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):eW(t))):_e({routes:[],injector:e})}};function uW(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function dW(n){let e=n.value.routeConfig;return e&&e.path===""}function QN(n){let e=[],t=new Set;for(let r of n){if(!dW(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=QN(r.children);e.push(new dr(r.value,i))}return e.filter(r=>!t.has(r))}function EN(n){return n.data||{}}function IN(n){return n.resolve||{}}function hW(n,e,t,r,i,o){return Lt(s=>cW(n,e,t,r,s.extractedUrl,i,o).pipe(be(({state:a,tree:c})=>le(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function fW(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return _e(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of YN(c))s.add(d);let a=0;return dt(s).pipe(_s(c=>o.has(c)?pW(c,r,n,e):(c.data=Yy(c,c.parent,n).resolve,_e(void 0))),Zt(()=>a++),Dl(1),Lt(c=>a===s.size?_e(t):Un))})}function YN(n){let e=n.children.map(t=>YN(t)).flat();return[n,...e]}function pW(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!jN(i)&&(o[nf]=i.title),gW(o,n,e,r).pipe(be(s=>(n._resolvedData=s,n.data=Yy(n,n.parent,t).resolve,null)))}function gW(n,e,t,r){let i=kb(n);if(i.length===0)return _e({});let o={};return dt(i).pipe(Lt(s=>mW(n[s],e,t,r).pipe(so(),Zt(a=>{if(a instanceof uu)throw Jy(new Ns,a);o[s]=a}))),Dl(1),be(()=>o),oo(s=>GN(s)?Un:Tl(s)))}function mW(n,e,t,r){let i=rf(e)??r,o=hu(n,i),s=o.resolve?o.resolve(e,t):cr(i,()=>o(e,t));return Vs(s)}function Rb(n){return zn(e=>{let t=n(e);return t?dt(t).pipe(be(()=>e)):_e(e)})}var Yb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[nf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(JN),providedIn:"root"})}return n})(),JN=(()=>{class n extends Yb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ue(fN))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ic=new Y("",{providedIn:"root",factory:()=>({})}),oc=new Y(""),t_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(UO);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _e(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Vs(t.loadComponent()).pipe(be(XN),Zt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ph(()=>{this.componentLoaders.delete(t)})),i=new bl(r,()=>new At).pipe(Il());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ZN(r,this.compiler,t,this.onLoadEndListener).pipe(ph(()=>{this.childrenLoaders.delete(r)})),s=new bl(o,()=>new At).pipe(Il());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZN(n,e,t,r){return Vs(n.loadChildren()).pipe(be(XN),Lt(i=>i instanceof tb||Array.isArray(i)?_e(i):dt(e.compileModuleAsync(i))),be(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(oc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Qb),injector:o}}))}function yW(n){return n&&typeof n=="object"&&"default"in n}function XN(n){return yW(n)?n.default:n}var n_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(_W),providedIn:"root"})}return n})(),_W=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jb=new Y(""),Zb=new Y("");function eL(n,e,t){let r=n.get(Zb),i=n.get(cn);return n.get(Fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),vW(n))),{onViewTransitionCreated:c}=r;return c&&cr(n,()=>c({transition:a,from:e,to:t})),s})}function vW(n){return new Promise(e=>{ny({read:()=>setTimeout(e)},{injector:n})})}var Xb=new Y(""),r_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new At;transitionAbortSubject=new At;configLoader=z(t_);environmentInjector=z(kn);destroyRef=z(Kl);urlSerializer=z(nc);rootContexts=z(rc);location=z(Ps);inputBindingEnabled=z(sf,{optional:!0})!==null;titleStrategy=z(Yb);options=z(ic,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z(n_);createViewTransition=z(Jb,{optional:!0});navigationErrorHandler=z(Xb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>_e(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new zy(i)),r=i=>this.events.next(new $y(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(jn(r=>r!==null),zn(r=>{let i=!1,o=!1;return _e(r).pipe(zn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),Un;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?le(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let d="";return this.events.next(new xi(s.id,this.urlSerializer.serialize(s.rawUrl),d,su.IgnoredSameUrlNavigation)),s.resolve(!1),Un}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return _e(s).pipe(zn(d=>(this.events.next(new Fs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Un:Promise.resolve(d))),hW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Zt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=le(j({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Qh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:C,extras:S}=s,k=new Fs(d,this.urlSerializer.serialize(h),g,C);this.events.next(k);let V=UN(this.rootComponentType).snapshot;return this.currentTransition=r=le(j({},s),{targetSnapshot:V,urlAfterRedirects:h,extras:le(j({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,_e(r)}else{let d="";return this.events.next(new xi(s.id,this.urlSerializer.serialize(s.extractedUrl),d,su.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Un}}),Zt(s=>{let a=new Vy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),be(s=>(this.currentTransition=r=le(j({},s),{guards:PG(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),$G(this.environmentInjector,s=>this.events.next(s)),Zt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Jy(this.urlSerializer,s.guardsResult);let a=new Uy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),jn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Jn.GuardRejected),!1)),Rb(s=>{if(s.guards.canActivateChecks.length!==0)return _e(s).pipe(Zt(a=>{let c=new By(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),zn(a=>{let c=!1;return _e(a).pipe(fW(this.paramsInheritanceStrategy,this.environmentInjector),Zt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Jn.NoDataFromResolver)}}))}),Zt(a=>{let c=new jy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Rb(s=>{let a=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Zt(h=>{c.component=h}),be(()=>{})));for(let h of c.children)d.push(...a(h));return d};return Fa(a(s.targetSnapshot.root)).pipe(vs(null),In(1))}),Rb(()=>this.afterPreactivation()),zn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?dt(c).pipe(be(()=>r)):_e(r)}),be(s=>{let a=DG(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=le(j({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Zt(()=>{this.events.next(new Yh)}),RG(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),In(1),Zt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Al(this.transitionAbortSubject.pipe(Zt(s=>{throw s}))),ph(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Jn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),oo(s=>{if(this.destroyed)return r.resolve(!1),Un;if(o=!0,HN(s))this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),xG(s)?this.events.next(new lu(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new au(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=cr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof uu){let{message:d,cancellationCode:h}=Jy(this.urlSerializer,c);this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new lu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Un}))}))}cancelNavigationTransition(t,r,i){let o=new Ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wW(n){return n!==Ny}var tL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(EW),providedIn:"root"})}return n})(),Xy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},EW=(()=>{class n extends Xy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nL=(()=>{class n{urlSerializer=z(nc);options=z(ic,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(Ps);urlHandlingStrategy=z(n_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Mi?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=UN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>z(IW),providedIn:"root"})}return n})(),IW=(()=>{class n extends nL{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Fs?this.updateStateMemento():t instanceof xi?this.commitTransition(r):t instanceof Qh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ai&&(t.code===Jn.GuardRejected||t.code===Jn.NoDataFromResolver)?this.restoreHistory(r):t instanceof au?this.restoreHistory(r,!0):t instanceof br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i_(n,e){n.events.pipe(jn(t=>t instanceof br||t instanceof Ai||t instanceof au||t instanceof xi),be(t=>t instanceof br||t instanceof xi?0:(t instanceof Ai?t.code===Jn.Redirect||t.code===Jn.SupersededByNewNavigation:!1)?2:1),jn(t=>t!==2),In(1)).subscribe(()=>{e()})}var bW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_t=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(rb);stateManager=z(nL);options=z(ic,{optional:!0})||{};pendingTasks=z(go);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z(r_);urlSerializer=z(nc);location=z(Ps);urlHandlingStrategy=z(n_);_events=new At;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(tL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(oc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(sf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ot;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ai&&r.code!==Jn.Redirect&&r.code!==Jn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof br)this.navigated=!0;else if(r instanceof lu){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wW(i.source)},s);this.scheduleNavigation(a,Ny,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ny,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Qb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let C=i?i.snapshot:this.routerState.snapshot.root;g=NN(C)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return LN(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ls(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ny,null,r)}navigate(t,r={skipLocationChange:!1}){return CW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},bW):r===!1?i=j({},TW):i=r,Ls(t))return mN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return mN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((g,C)=>{a=g,c=C});let h=this.pendingTasks.add();return i_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function SW(n){return!(n instanceof Yh)&&!(n instanceof lu)}var Us=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new At;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof br&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ls(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Ik(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ls(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(te(_t),te(Tn),SI("tabindex"),te(mo),te(ur),te(Yr))};static \u0275dir=yt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ph("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Rs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Rs],replaceUrl:[2,"replaceUrl","replaceUrl",Rs],routerLink:"routerLink"},features:[lr]})}return n})();var cf=class{};var rL=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(jn(t=>t instanceof br),_s(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=eu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return dt(i).pipe(Cl())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=_e(null);let o=i.pipe(Lt(s=>s===null?_e(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return dt([o,s]).pipe(Cl())}else return o})}static \u0275fac=function(r){return new(r||n)(ue(_t),ue(kn),ue(cf),ue(t_))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iL=new Y(""),xW=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof br?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof xi&&t.code===su.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof cu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new cu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){sO()};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function tT(n,...e){return bn([{provide:oc,multi:!0,useValue:n},[],{provide:Tn,useFactory:oL,deps:[_t]},{provide:Ms,multi:!0,useFactory:sL},e.map(t=>t.\u0275providers)])}function oL(n){return n.routerState.root}function lf(n,e){return{\u0275kind:n,\u0275providers:e}}function sL(){let n=z(xt);return e=>{let t=n.get(Kn);if(e!==t.components[0])return;let r=n.get(_t),i=n.get(aL);n.get(nT)===1&&r.initialNavigation(),n.get(uL,null,Ne.Optional)?.setUpPreloading(),n.get(iL,null,Ne.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aL=new Y("",{factory:()=>new At}),nT=new Y("",{providedIn:"root",factory:()=>1});function cL(){let n=[{provide:nT,useValue:0},ob(()=>{let e=z(xt);return e.get(ub,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(_t),o=e.get(aL);i_(i,()=>{r(!0)}),e.get(r_).afterPreactivation=()=>(r(!0),o.closed?_e(void 0):o),i.initialNavigation()}))})];return lf(2,n)}function lL(){let n=[ob(()=>{z(_t).setUpLocationChangeListener()}),{provide:nT,useValue:2}];return lf(3,n)}var uL=new Y("");function dL(n){return lf(0,[{provide:uL,useExisting:rL},{provide:cf,useExisting:n}])}function hL(){return lf(8,[Wb,{provide:sf,useExisting:Wb}])}function fL(n){Ci("NgRouterViewTransitions");let e=[{provide:Jb,useValue:eL},{provide:Zb,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return lf(9,e)}var pL=[Ps,{provide:nc,useClass:Ns},_t,rc,{provide:Tn,useFactory:oL,deps:[_t]},t_,[]],sc=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[pL,[],{provide:oc,multi:!0,useValue:t},[],r?.errorHandler?{provide:Xb,useValue:r.errorHandler}:[],{provide:ic,useValue:r||{}},r?.useHash?PW():kW(),RW(),r?.preloadingStrategy?dL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?OW(r):[],r?.bindToComponentInputs?hL().\u0275providers:[],r?.enableViewTransitions?fL().\u0275providers:[],NW()]}}static forChild(t){return{ngModule:n,providers:[{provide:oc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function RW(){return{provide:iL,useFactory:()=>{let n=z(tN),e=z(Fe),t=z(ic),r=z(r_),i=z(nc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xW(i,r,n,e,t)}}}function PW(){return{provide:Yr,useClass:fb}}function kW(){return{provide:Yr,useClass:wy}}function OW(n){return[n.initialNavigation==="disabled"?lL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?cL().\u0275providers:[]]}var eT=new Y("");function NW(){return[{provide:eT,useFactory:sL},{provide:Ms,multi:!0,useExisting:eT}]}var mL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},LW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},yL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,C=(a&15)<<2|d>>6,S=d&63;c||(S=64,s||(C=64)),r.push(t[h],t[g],t[C],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||d==null||g==null)throw new iT;let C=o<<2|a>>4;if(r.push(C),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},iT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},FW=function(n){let e=mL(n);return yL.encodeByteArray(e,!0)},uf=function(n){return FW(n).replace(/\./g,"")},sT=function(n){try{return yL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UW=()=>VW().__FIREBASE_DEFAULTS__,BW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&sT(n[1]);return e&&JSON.parse(e)},s_=()=>{try{return UW()||BW()||jW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aT=n=>{var e,t;return(t=(e=s_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},a_=n=>{let e=aT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cT=()=>{var n;return(n=s_())===null||n===void 0?void 0:n.config},lT=n=>{var e;return(e=s_())===null||e===void 0?void 0:e[`_${n}`]};var o_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function c_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[uf(JSON.stringify(t)),uf(JSON.stringify(s)),""].join(".")}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function zW(){var n;let e=(n=s_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IL(){let n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bL(){return!zW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function TL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var $W="FirebaseError",On=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$W,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vo.prototype.create)}},vo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?qW(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new On(i,a,r)}};function qW(n,e){return n.replace(HW,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HW=/\{\$([^}]+)}/g;function CL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ac(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(gL(o)&&gL(s)){if(!ac(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function gL(n){return n!==null&&typeof n=="object"}function fu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function gu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SL(n,e){let t=new oT(n,e);return t.subscribe.bind(t)}var oT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GW(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rT),i.error===void 0&&(i.error=rT),i.complete===void 0&&(i.complete=rT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function GW(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rT(){}var rme=4*60*60*1e3;function wt(n){return n&&n._delegate?n._delegate:n}var Zn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cc="[DEFAULT]";var dT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new o_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KW(e))try{this.getOrInitializeService({instanceIdentifier:cc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=cc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=cc){return this.instances.has(e)}getOptions(e=cc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WW(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cc){return this.component?this.component.multipleInstances?e:cc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WW(n){return n===cc?void 0:n}function KW(n){return n.instantiationMode==="EAGER"}var l_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new dT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var QW=[],ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ze||{}),YW={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},JW=ze.INFO,ZW={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},XW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ZW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},js=class{constructor(e){this.name=e,this._logLevel=JW,this._logHandler=XW,this._userLogHandler=null,QW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var e7=(n,e)=>e.some(t=>n instanceof t),DL,AL;function t7(){return DL||(DL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n7(){return AL||(AL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ML=new WeakMap,fT=new WeakMap,xL=new WeakMap,hT=new WeakMap,gT=new WeakMap;function r7(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ri(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&ML.set(t,n)}).catch(()=>{}),gT.set(e,n),e}function i7(n){if(fT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});fT.set(n,e)}var pT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RL(n){pT=n(pT)}function o7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(u_(this),e,...t);return xL.set(r,e.sort?e.sort():[e]),Ri(r)}:n7().includes(n)?function(...e){return n.apply(u_(this),e),Ri(ML.get(this))}:function(...e){return Ri(n.apply(u_(this),e))}}function s7(n){return typeof n=="function"?o7(n):(n instanceof IDBTransaction&&i7(n),e7(n,t7())?new Proxy(n,pT):n)}function Ri(n){if(n instanceof IDBRequest)return r7(n);if(hT.has(n))return hT.get(n);let e=s7(n);return e!==n&&(hT.set(n,e),gT.set(e,n)),e}var u_=n=>gT.get(n);function d_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ri(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ri(s.result),c.oldVersion,c.newVersion,Ri(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var a7=["get","getKey","getAll","getAllKeys","count"],c7=["put","add","delete","clear"],mT=new Map;function PL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mT.get(e))return mT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=c7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a7.includes(t)))return;let o=function(s,...a){return T(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return mT.set(e,o),o}RL(n=>le(j({},n),{get:(e,t,r)=>PL(e,t)||n.get(e,t,r),has:(e,t)=>!!PL(e,t)||n.has(e,t)}));var _T=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(l7(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function l7(n){let e=n.getComponent();return e?.type==="VERSION"}var vT="@firebase/app",kL="0.10.13";var wo=new js("@firebase/app"),u7="@firebase/app-compat",d7="@firebase/analytics-compat",h7="@firebase/analytics",f7="@firebase/app-check-compat",p7="@firebase/app-check",g7="@firebase/auth",m7="@firebase/auth-compat",y7="@firebase/database",_7="@firebase/data-connect",v7="@firebase/database-compat",w7="@firebase/functions",E7="@firebase/functions-compat",I7="@firebase/installations",b7="@firebase/installations-compat",T7="@firebase/messaging",C7="@firebase/messaging-compat",S7="@firebase/performance",D7="@firebase/performance-compat",A7="@firebase/remote-config",M7="@firebase/remote-config-compat",x7="@firebase/storage",R7="@firebase/storage-compat",P7="@firebase/firestore",k7="@firebase/vertexai-preview",O7="@firebase/firestore-compat",N7="firebase",L7="10.14.1";var wT="[DEFAULT]",F7={[vT]:"fire-core",[u7]:"fire-core-compat",[h7]:"fire-analytics",[d7]:"fire-analytics-compat",[p7]:"fire-app-check",[f7]:"fire-app-check-compat",[g7]:"fire-auth",[m7]:"fire-auth-compat",[y7]:"fire-rtdb",[_7]:"fire-data-connect",[v7]:"fire-rtdb-compat",[w7]:"fire-fn",[E7]:"fire-fn-compat",[I7]:"fire-iid",[b7]:"fire-iid-compat",[T7]:"fire-fcm",[C7]:"fire-fcm-compat",[S7]:"fire-perf",[D7]:"fire-perf-compat",[A7]:"fire-rc",[M7]:"fire-rc-compat",[x7]:"fire-gcs",[R7]:"fire-gcs-compat",[P7]:"fire-fst",[O7]:"fire-fst-compat",[k7]:"fire-vertex","fire-js":"fire-js",[N7]:"fire-js-all"};var df=new Map,V7=new Map,ET=new Map;function OL(n,e){try{n.container.addComponent(e)}catch(t){wo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pi(n){let e=n.name;if(ET.has(e))return wo.debug(`There were multiple attempts to register component ${e}.`),!1;ET.set(e,n);for(let t of df.values())OL(t,n);for(let t of V7.values())OL(t,n);return!0}function lc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tr(n){return n.settings!==void 0}var U7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new vo("app","Firebase",U7);var IT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}};var ki=L7;function CT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:wT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zs.create("bad-app-name",{appName:String(i)});if(t||(t=cT()),!t)throw zs.create("no-options");let o=df.get(i);if(o){if(ac(t,o.options)&&ac(r,o.config))return o;throw zs.create("duplicate-app",{appName:i})}let s=new l_(i);for(let c of ET.values())s.addComponent(c);let a=new IT(t,r,s);return df.set(i,a),a}function $s(n=wT){let e=df.get(n);if(!e&&n===wT&&cT())return CT();if(!e)throw zs.create("no-app",{appName:n});return e}function h_(){return Array.from(df.values())}function bt(n,e,t){var r;let i=(r=F7[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wo.warn(a.join(" "));return}Pi(new Zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var B7="firebase-heartbeat-database",j7=1,hf="firebase-heartbeat-store",yT=null;function VL(){return yT||(yT=d_(B7,j7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hf)}catch(t){console.warn(t)}}}}).catch(n=>{throw zs.create("idb-open",{originalErrorMessage:n.message})})),yT}function z7(n){return T(this,null,function*(){try{let t=(yield VL()).transaction(hf),r=yield t.objectStore(hf).get(UL(n));return yield t.done,r}catch(e){if(e instanceof On)wo.warn(e.message);else{let t=zs.create("idb-get",{originalErrorMessage:e?.message});wo.warn(t.message)}}})}function NL(n,e){return T(this,null,function*(){try{let r=(yield VL()).transaction(hf,"readwrite");yield r.objectStore(hf).put(e,UL(n)),yield r.done}catch(t){if(t instanceof On)wo.warn(t.message);else{let r=zs.create("idb-set",{originalErrorMessage:t?.message});wo.warn(r.message)}}})}function UL(n){return`${n.name}!${n.options.appId}`}var $7=1024,q7=30*24*60*60*1e3,bT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new TT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=LL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=q7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wo.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=LL(),{heartbeatsToSend:r,unsentEntries:i}=H7(this._heartbeatsCache.heartbeats),o=uf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return wo.warn(t),""}})}};function LL(){return new Date().toISOString().substring(0,10)}function H7(n,e=$7){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),FL(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var TT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return uT()?TL().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield z7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FL(n){return uf(JSON.stringify({version:2,heartbeats:n})).length}function G7(n){Pi(new Zn("platform-logger",e=>new _T(e),"PRIVATE")),Pi(new Zn("heartbeat",e=>new bT(e),"PRIVATE")),bt(vT,kL,n),bt(vT,kL,"esm2017"),bt("fire-js","")}G7("");var W7="firebase",K7="10.14.1";bt(W7,K7,"app");function Cn(n){return typeof n=="function"}function BL(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var f_=BL(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ff(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Oi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Cn(r))try{r()}catch(o){e=o instanceof f_?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jL(o)}catch(s){e=e??[],s instanceof f_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new f_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jL(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ff(t,e)}remove(e){let{_finalizers:t}=this;t&&ff(t,e),e instanceof n&&e._removeParent(this)}};Oi.EMPTY=(()=>{let n=new Oi;return n.closed=!0,n})();var Lme=Oi.EMPTY;function p_(n){return n instanceof Oi||n&&"closed"in n&&Cn(n.remove)&&Cn(n.add)&&Cn(n.unsubscribe)}function jL(n){Cn(n)?n():n.unsubscribe()}var Zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mu={setTimeout(n,e,...t){let{delegate:r}=mu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=mu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zL(n){mu.setTimeout(()=>{let{onUnhandledError:e}=Zr;if(e)e(n);else throw n})}function ST(){}var $L=DT("C",void 0,void 0);function qL(n){return DT("E",void 0,n)}function HL(n){return DT("N",n,void 0)}function DT(n,e,t){return{kind:n,value:e,error:t}}var uc=null;function GL(n){if(Zr.useDeprecatedSynchronousErrorHandling){let e=!uc;if(e&&(uc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=uc;if(uc=null,t)throw r}}else n()}function WL(n){Zr.useDeprecatedSynchronousErrorHandling&&uc&&(uc.errorThrown=!0,uc.error=n)}var dc=class extends Oi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,p_(e)&&e.add(this)):this.destination=J7}static create(e,t,r){return new yu(e,t,r)}next(e){this.isStopped?MT(HL(e),this):this._next(e)}error(e){this.isStopped?MT(qL(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?MT($L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Q7=Function.prototype.bind;function AT(n,e){return Q7.call(n,e)}var xT=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){g_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){g_(r)}else g_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){g_(t)}}},yu=class extends dc{constructor(e,t,r){super();let i;if(Cn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Zr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&AT(e.next,o),error:e.error&&AT(e.error,o),complete:e.complete&&AT(e.complete,o)}):i=e}this.destination=new xT(i)}};function g_(n){Zr.useDeprecatedSynchronousErrorHandling?WL(n):zL(n)}function Y7(n){throw n}function MT(n,e){let{onStoppedNotification:t}=Zr;t&&mu.setTimeout(()=>t(n,e))}var J7={closed:!0,next:ST,error:Y7,complete:ST};var KL=typeof Symbol=="function"&&Symbol.observable||"@@observable";function m_(n){return n}function QL(n){return n.length===0?m_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var y_=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=X7(t)?t:new yu(t,r,i);return GL(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=YL(r),new r((i,o)=>{let s=new yu({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[KL](){return this}pipe(...t){return QL(t)(this)}toPromise(t){return t=YL(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function YL(n){var e;return(e=n??Zr.Promise)!==null&&e!==void 0?e:Promise}function Z7(n){return n&&Cn(n.next)&&Cn(n.error)&&Cn(n.complete)}function X7(n){return n&&n instanceof dc||Z7(n)&&p_(n)}function eK(n){return Cn(n?.lift)}function _u(n){return e=>{if(eK(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function __(n,e,t,r,i){return new RT(n,e,t,r,i)}var RT=class extends dc{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var PT={now(){return(PT.delegate||Date).now()},delegate:void 0};var v_=class extends Oi{constructor(e,t){super()}schedule(e,t=0){return this}};var pf={setInterval(n,e,...t){let{delegate:r}=pf;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var vu=class extends v_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ff(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var wu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};wu.now=PT.now;var Eu=class extends wu{constructor(e,t=wu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var kT=new Eu(vu);var w_=class extends vu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var E_=class extends Eu{};var OT=new E_(w_);function I_(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function b_(n,e=0){return _u((t,r)=>{t.subscribe(__(r,i=>I_(r,n,()=>r.next(i),e),()=>I_(r,n,()=>r.complete(),e),i=>I_(r,n,()=>r.error(i),e)))})}function T_(n,e=0){return _u((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function NT(n,e,t){let r=Cn(n)||e||t?{next:n,error:e,complete:t}:n;return r?_u((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(__(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):m_}var Eo=new Ts("ANGULARFIRE2_VERSION");function bu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var fc=(n,e)=>{let t=e?[e]:h_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qs=class{constructor(){return fc(tK)}},tK="app-check";function Iu(){}var C_=class{zone;delegate;constructor(e,t=OT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},LT=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Iu,{},Iu,Iu)),t.pipe(NT({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new C_(Zone.current)),this.insideAngular=t.run(()=>new C_(Zone.current,kT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ue(Fe))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S_(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function nK(n){return S_().ngZone.runOutsideAngular(()=>n())}function hc(n){return S_().ngZone.run(()=>n())}function rK(n){return iK(S_())(n)}function iK(n){return function(t){return t=t.lift(new LT(n.ngZone)),t.pipe(T_(n.outsideAngular),b_(n.insideAngular))}}var oK=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),hc(()=>n.apply(void 0,r))},at=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=hc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Iu,{},Iu,Iu))),r[o]=oK(r[o],t));let i=nK(()=>n.apply(this,r));if(!e)if(i instanceof y_){let o=S_();return i.pipe(T_(o.outsideAngular),b_(o.insideAngular))}else return hc(()=>i);return i instanceof y_?i.pipe(rK):i instanceof Promise?hc(()=>new Promise((o,s)=>i.then(a=>hc(()=>o(a)),a=>hc(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:hc(()=>i)};var Xr=class{constructor(e){return e}},Io=class{constructor(){return h_()}};function sK(n){return n&&n.length===1?n[0]:new Xr($s())}var FT=new Y("angularfire2._apps"),aK={provide:Xr,useFactory:sK,deps:[[new en,FT]]},cK={provide:Io,deps:[[new en,FT]]};function lK(n){return(e,t)=>{let r=t.get(Ti);bt("angularfire",Eo.full,"core"),bt("angularfire",Eo.full,"app"),bt("angular",VO.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function JL(n,...e){return bn([aK,cK,{provide:FT,useFactory:lK(n),multi:!0,deps:[Fe,xt,Hs,...e]}])}var ZL=at(CT,!0);var XL=()=>{};var eF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},uK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},tF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,C=(a&15)<<2|d>>6,S=d&63;c||(S=64,s||(C=64)),r.push(t[h],t[g],t[C],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||d==null||g==null)throw new UT;let C=o<<2|a>>4;if(r.push(C),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},UT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dK=function(n){let e=eF(n);return tF.encodeByteArray(e,!0)},jT=function(n){return dK(n).replace(/\./g,"")},D_=function(n){try{return tF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hK=()=>nF().__FIREBASE_DEFAULTS__,fK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&D_(n[1]);return e&&JSON.parse(e)},rF=()=>{try{return XL()||hK()||fK()||pK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var iF=n=>rF()?.[`_${n}`];function gf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function gK(){let n=rF()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lF(){return!gK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zT(){try{return typeof indexedDB=="object"}catch{return!1}}function uF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var mK="FirebaseError",Cr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bo.prototype.create)}},bo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?yK(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Cr(i,a,r)}};function yK(n,e){return n.replace(_K,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _K=/\{\$([^}]+)}/g;function $T(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dF(n,e){let t=new BT(n,e);return t.subscribe.bind(t)}var BT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=VT),i.error===void 0&&(i.error=VT),i.complete===void 0&&(i.complete=VT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function VT(){}var A_e=4*60*60*1e3;function Gs(n){return n&&n._delegate?n._delegate:n}var ei=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var wK=[],Ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ue||{}),EK={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},IK=Ue.INFO,bK={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},TK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ws=class{constructor(e){this.name=e,this._logLevel=IK,this._logHandler=TK,this._userLogHandler=null,wK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var HT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CK(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function CK(n){return n.getComponent()?.type==="VERSION"}var GT="@firebase/app",hF="0.14.4";var Co=new Ws("@firebase/app"),SK="@firebase/app-compat",DK="@firebase/analytics-compat",AK="@firebase/analytics",MK="@firebase/app-check-compat",xK="@firebase/app-check",RK="@firebase/auth",PK="@firebase/auth-compat",kK="@firebase/database",OK="@firebase/data-connect",NK="@firebase/database-compat",LK="@firebase/functions",FK="@firebase/functions-compat",VK="@firebase/installations",UK="@firebase/installations-compat",BK="@firebase/messaging",jK="@firebase/messaging-compat",zK="@firebase/performance",$K="@firebase/performance-compat",qK="@firebase/remote-config",HK="@firebase/remote-config-compat",GK="@firebase/storage",WK="@firebase/storage-compat",KK="@firebase/firestore",QK="@firebase/ai",YK="@firebase/firestore-compat",JK="firebase",ZK="12.4.0";var XK={[GT]:"fire-core",[SK]:"fire-core-compat",[AK]:"fire-analytics",[DK]:"fire-analytics-compat",[xK]:"fire-app-check",[MK]:"fire-app-check-compat",[RK]:"fire-auth",[PK]:"fire-auth-compat",[kK]:"fire-rtdb",[OK]:"fire-data-connect",[NK]:"fire-rtdb-compat",[LK]:"fire-fn",[FK]:"fire-fn-compat",[VK]:"fire-iid",[UK]:"fire-iid-compat",[BK]:"fire-fcm",[jK]:"fire-fcm-compat",[zK]:"fire-perf",[$K]:"fire-perf-compat",[qK]:"fire-rc",[HK]:"fire-rc-compat",[GK]:"fire-gcs",[WK]:"fire-gcs-compat",[KK]:"fire-fst",[YK]:"fire-fst-compat",[QK]:"fire-vertex","fire-js":"fire-js",[JK]:"fire-js-all"};var eQ=new Map,tQ=new Map,fF=new Map;function pF(n,e){try{n.container.addComponent(e)}catch(t){Co.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ks(n){let e=n.name;if(fF.has(e))return Co.debug(`There were multiple attempts to register component ${e}.`),!1;fF.set(e,n);for(let t of eQ.values())pF(t,n);for(let t of tQ.values())pF(t,n);return!0}function So(n){return n==null?!1:n.settings!==void 0}var nQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},QT=new bo("app","Firebase",nQ);var Tu=ZK;function To(n,e,t){let r=XK[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Co.warn(s.join(" "));return}Ks(new ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var rQ="firebase-heartbeat-database",iQ=1,mf="firebase-heartbeat-store",qT=null;function vF(){return qT||(qT=d_(rQ,iQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mf)}catch(t){console.warn(t)}}}}).catch(n=>{throw QT.create("idb-open",{originalErrorMessage:n.message})})),qT}function oQ(n){return T(this,null,function*(){try{let t=(yield vF()).transaction(mf),r=yield t.objectStore(mf).get(wF(n));return yield t.done,r}catch(e){if(e instanceof Cr)Co.warn(e.message);else{let t=QT.create("idb-get",{originalErrorMessage:e?.message});Co.warn(t.message)}}})}function gF(n,e){return T(this,null,function*(){try{let r=(yield vF()).transaction(mf,"readwrite");yield r.objectStore(mf).put(e,wF(n)),yield r.done}catch(t){if(t instanceof Cr)Co.warn(t.message);else{let r=QT.create("idb-set",{originalErrorMessage:t?.message});Co.warn(r.message)}}})}function wF(n){return`${n.name}!${n.options.appId}`}var sQ=1024,aQ=30,WT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new KT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>aQ){let i=lQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Co.warn(e)}})}getHeartbeatsHeader(){return T(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=mF(),{heartbeatsToSend:t,unsentEntries:r}=cQ(this._heartbeatsCache.heartbeats),i=jT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Co.warn(e),""}})}};function mF(){return new Date().toISOString().substring(0,10)}function cQ(n,e=sQ){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),yF(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var KT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return zT()?uF().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield oQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return gF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return gF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function yF(n){return jT(JSON.stringify({version:2,heartbeats:n})).length}function lQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function uQ(n){Ks(new ei("platform-logger",e=>new HT(e),"PRIVATE")),Ks(new ei("heartbeat",e=>new WT(e),"PRIVATE")),To(GT,hF,n),To(GT,hF,"esm2020"),To("fire-js","")}uQ("");function AF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var MF=AF,xF=new bo("auth","Firebase",AF());var R_=new Ws("@firebase/auth");function gQ(n,...e){R_.logLevel<=Ue.WARN&&R_.warn(`Auth (${Tu}): ${n}`,...e)}function M_(n,...e){R_.logLevel<=Ue.ERROR&&R_.error(`Auth (${Tu}): ${n}`,...e)}function EF(n,...e){throw aC(n,...e)}function sC(n,...e){return aC(n,...e)}function RF(n,e,t){let r=le(j({},MF()),{[e]:t});return new bo("auth","Firebase",r).create(e,{appName:n.name})}function x_(n){return RF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xF.create(n,...e)}function ot(n,e,...t){if(!n)throw aC(e,...t)}function yf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw M_(e),new Error(e)}function P_(n,e){n||yf(e)}function mQ(){return IF()==="http:"||IF()==="https:"}function IF(){return typeof self<"u"&&self.location?.protocol||null}function yQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mQ()||aF()||"connection"in navigator)?navigator.onLine:!0}function _Q(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var mc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,P_(t>e,"Short delay should be less than long delay!"),this.isMobile=oF()||cF()}get(){return yQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vQ(n,e){P_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var k_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var wQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var EQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IQ=new mc(3e4,6e4);function PF(n,e){return n.tenantId&&!e.tenantId?le(j({},e),{tenantId:n.tenantId}):e}function V_(o,s,a,c){return T(this,arguments,function*(n,e,t,r,i={}){return kF(n,i,()=>T(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=$T(j({key:n.config.apiKey},h)).slice(1),C=yield n._getAdditionalHeaders();C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode);let S=j({method:e,headers:C},d);return sF()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&gf(n.emulatorConfig.host)&&(S.credentials="include"),k_.fetch()(yield OF(n,n.config.apiHost,t,g),S)}))})}function kF(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=j(j({},wQ),e);try{let i=new ZT(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw A_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw A_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw A_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw A_(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw RF(n,h,d);EF(n,h)}}catch(i){if(i instanceof Cr)throw i;EF(n,"network-request-failed",{message:String(i)})}})}function OF(n,e,t,r){return T(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?vQ(n.config,i):`${n.config.apiScheme}://${i}`;return EQ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var ZT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(sC(this.auth,"network-request-failed")),IQ.get())})}};function A_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=sC(n,e,r);return i.customData._tokenResponse=t,i}function bQ(n,e){return T(this,null,function*(){return V_(n,"POST","/v1/accounts:delete",e)})}function O_(n,e){return T(this,null,function*(){return V_(n,"POST","/v1/accounts:lookup",e)})}function _f(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function NF(n,e=!1){return T(this,null,function*(){let t=Gs(n),r=yield t.getIdToken(e),i=LF(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:_f(YT(i.auth_time)),issuedAtTime:_f(YT(i.iat)),expirationTime:_f(YT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function YT(n){return Number(n)*1e3}function LF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return M_("JWT malformed, contained fewer than 3 sections"),null;try{let i=D_(t);return i?JSON.parse(i):(M_("Failed to decode base64 JWT payload"),null)}catch(i){return M_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bF(n){let e=LF(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function XT(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Cr&&TQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function TQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var eC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_f(this.lastLoginAt),this.creationTime=_f(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function N_(n){return T(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield XT(n,O_(e,{idToken:t}));ot(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?VF(i.providerUserInfo):[],s=CQ(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function FF(n){return T(this,null,function*(){let e=Gs(n);yield N_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function CQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=sh(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function SQ(n,e){return T(this,null,function*(){let t=yield kF(n,{},()=>T(null,null,function*(){let r=$T({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield OF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&gf(n.emulatorConfig.host)&&(c.credentials="include"),k_.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function DQ(n,e){return T(this,null,function*(){return V_(n,"POST","/v2/accounts:revokeToken",PF(n,e))})}var vf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");let t=bF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield SQ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ot(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ot(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yf("not implemented")}};function Qs(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pc=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=sh(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield XT(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return NF(this,e)}reload(){return FF(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>j({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(le(j({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield N_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(So(this.auth.app))return Promise.reject(x_(this.auth));let e=yield this.getIdToken();return yield XT(this,bQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return le(j({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>j({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:C,isAnonymous:S,providerData:k,stsTokenManager:V}=t;ot(g&&V,e,"internal-error");let O=vf.fromJSON(this.name,V);ot(typeof g=="string",e,"internal-error"),Qs(r,e.name),Qs(i,e.name),ot(typeof C=="boolean",e,"internal-error"),ot(typeof S=="boolean",e,"internal-error"),Qs(o,e.name),Qs(s,e.name),Qs(a,e.name),Qs(c,e.name),Qs(d,e.name),Qs(h,e.name);let H=new n({uid:g,auth:e,email:i,emailVerified:C,displayName:r,isAnonymous:S,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:O,createdAt:d,lastLoginAt:h});return k&&Array.isArray(k)&&(H.providerData=k.map(re=>j({},re))),c&&(H._redirectEventId=c),H}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new vf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield N_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];ot(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new vf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,d),c})}};var TF=new Map;function gc(n){P_(n instanceof Function,"Expected a class definition");let e=TF.get(n);return e?(P_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TF.set(n,e),e)}var AQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),tC=AQ;function JT(n,e,t){return`firebase:${n}:${e}:${t}`}var L_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=JT(this.userKey,i.apiKey,o),this.fullPersistenceKey=JT("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield O_(this.auth,{idToken:e}).catch(()=>{});return t?pc._fromGetAccountInfoResponse(this.auth,t,e):null}return pc._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(gc(tC),e,r);let i=(yield Promise.all(t.map(d=>T(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||gc(tC),s=JT(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(s);if(h){let g;if(typeof h=="string"){let C=yield O_(e,{idToken:h}).catch(()=>{});if(!C)break;g=yield pc._fromGetAccountInfoResponse(e,C,h)}else g=pc._fromJSON(e,h);d!==o&&(a=g),o=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(d=>T(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function CF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OQ(e))return"Blackberry";if(NQ(e))return"Webos";if(xQ(e))return"Safari";if((e.includes("chrome/")||RQ(e))&&!e.includes("edge/"))return"Chrome";if(kQ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function MQ(n=fr()){return/firefox\//i.test(n)}function xQ(n=fr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RQ(n=fr()){return/crios\//i.test(n)}function PQ(n=fr()){return/iemobile/i.test(n)}function kQ(n=fr()){return/android/i.test(n)}function OQ(n=fr()){return/blackberry/i.test(n)}function NQ(n=fr()){return/webos/i.test(n)}function UF(n,e=[]){let t;switch(n){case"Browser":t=CF(fr());break;case"Worker":t=`${CF(fr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tu}/${r}`}var nC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function LQ(t){return T(this,arguments,function*(n,e={}){return V_(n,"GET","/v2/passwordPolicy",PF(n,e))})}var FQ=6,rC=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var iC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F_(this),this.idTokenSubscription=new F_(this),this.beforeStateQueue=new nC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gc(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield L_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield O_(this,{idToken:e}),r=yield pc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){if(So(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield N_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=_Q()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(So(this.app))return Promise.reject(x_(this));let t=e?Gs(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return So(this.app)?Promise.reject(x_(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return So(this.app)?Promise.reject(x_(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(gc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield LQ(this),t=new rC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield DQ(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&gc(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=yield L_.create(this,[gc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return T(this,null,function*(){if(So(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gQ(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function VQ(n){return Gs(n)}var F_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dF(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var UQ={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BQ(n){UQ=n}function jQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function zQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function cC(n,e,t,r){return Gs(n).onAuthStateChanged(e,t,r)}var ive=jQ("rcb"),ove=new mc(3e4,6e4);var sve=new mc(2e3,1e4);var ave=10*60*1e3;var cve=new mc(3e4,6e4);var lve=new mc(5e3,15e3);var uve=encodeURIComponent("fac");var SF="@firebase/auth",DF="1.11.0";var oC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $Q(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qQ(n){Ks(new ei("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ot(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UF(n)},d=new iC(r,i,o,c);return zQ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new ei("auth-internal",e=>{let t=VQ(e.getProvider("auth").getImmediate());return(r=>new oC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),To(SF,DF,$Q(n)),To(SF,DF,"esm2020")}var HQ=5*60,dve=iF("authIdTokenMaxAge")||HQ;function GQ(){return document.getElementsByTagName("head")?.[0]??document}BQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=sC("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",GQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qQ("Browser");function BF(n){return new Le(function(e){var t=cC(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function rV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iV=rV,oV=new vo("auth","Firebase",rV());var q_=new js("@firebase/auth");function QQ(n,...e){q_.logLevel<=ze.WARN&&q_.warn(`Auth (${ki}): ${n}`,...e)}function B_(n,...e){q_.logLevel<=ze.ERROR&&q_.error(`Auth (${ki}): ${n}`,...e)}function Sr(n,...e){throw MC(n,...e)}function ti(n,...e){return MC(n,...e)}function AC(n,e,t){let r=Object.assign(Object.assign({},iV()),{[e]:t});return new vo("auth","Firebase",r).create(e,{appName:n.name})}function Mo(n){return AC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YQ(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sr(n,"argument-error"),AC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function MC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oV.create(n,...e)}function ve(n,e,...t){if(!n)throw MC(e,...t)}function Do(n){let e="INTERNAL ASSERTION FAILED: "+n;throw B_(e),new Error(e)}function xo(n,e){n||Do(e)}function dC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JQ(){return jF()==="http:"||jF()==="https:"}function jF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function ZQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JQ()||wL()||"connection"in navigator)?navigator.onLine:!0}function XQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var yc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,xo(t>e,"Short delay should be less than long delay!"),this.isMobile=_L()||EL()}get(){return ZQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xC(n,e){xo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var H_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Do("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Do("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Do("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tY=new yc(3e4,6e4);function Js(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ro(o,s,a,c){return T(this,arguments,function*(n,e,t,r,i={}){return sV(n,i,()=>T(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=fu(Object.assign({key:n.config.apiKey},h)).slice(1),C=yield n._getAdditionalHeaders();C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:C},d);return vL()||(S.referrerPolicy="no-referrer"),H_.fetch()(aV(n,n.config.apiHost,t,g),S)}))})}function sV(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},eY),e);try{let i=new hC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw U_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw U_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw U_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw U_(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw AC(n,h,d);Sr(n,h)}}catch(i){if(i instanceof On)throw i;Sr(n,"network-request-failed",{message:String(i)})}})}function Df(o,s,a,c){return T(this,arguments,function*(n,e,t,r,i={}){let d=yield Ro(n,e,t,r,i);return"mfaPendingCredential"in d&&Sr(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function aV(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?xC(n.config,i):`${n.config.apiScheme}://${i}`}function nY(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var hC=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),tY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function U_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ti(n,e,r);return i.customData._tokenResponse=t,i}function zF(n){return n!==void 0&&n.enterprise!==void 0}var fC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nY(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function rY(n,e){return T(this,null,function*(){return Ro(n,"GET","/v2/recaptchaConfig",Js(n,e))})}function iY(n,e){return T(this,null,function*(){return Ro(n,"POST","/v1/accounts:delete",e)})}function cV(n,e){return T(this,null,function*(){return Ro(n,"POST","/v1/accounts:lookup",e)})}function Ef(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function RC(n,e=!1){return T(this,null,function*(){let t=wt(n),r=yield t.getIdToken(e),i=PC(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ef(lC(i.auth_time)),issuedAtTime:Ef(lC(i.iat)),expirationTime:Ef(lC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function lC(n){return Number(n)*1e3}function PC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return B_("JWT malformed, contained fewer than 3 sections"),null;try{let i=sT(t);return i?JSON.parse(i):(B_("Failed to decode base64 JWT payload"),null)}catch(i){return B_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $F(n){let e=PC(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Su(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof On&&oY(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function oY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var pC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ef(this.lastLoginAt),this.creationTime=Ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function G_(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Su(n,cV(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lV(o.providerUserInfo):[],a=sY(n.providerData,s),c=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!a?.length,h=c?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bf(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function kC(n){return T(this,null,function*(){let e=wt(n);yield G_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lV(n){return n.map(e=>{var{providerId:t}=e,r=xg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function aY(n,e){return T(this,null,function*(){let t=yield sV(n,{},()=>T(null,null,function*(){let r=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=aV(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H_.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function cY(n,e){return T(this,null,function*(){return Ro(n,"POST","/v2/accounts:revokeToken",Js(n,e))})}var If=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$F(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=$F(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield aY(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Do("not implemented")}};function Ys(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Du=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=xg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bf(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Su(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return RC(this,e)}reload(){return kC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield G_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(Tr(this.auth.app))return Promise.reject(Mo(this.auth));let e=yield this.getIdToken();return yield Su(this,iY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,C=(i=t.email)!==null&&i!==void 0?i:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,V=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,re=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:de,isAnonymous:qe,providerData:ge,stsTokenManager:M}=t;ve(Z&&M,e,"internal-error");let w=If.fromJSON(this.name,M);ve(typeof Z=="string",e,"internal-error"),Ys(g,e.name),Ys(C,e.name),ve(typeof de=="boolean",e,"internal-error"),ve(typeof qe=="boolean",e,"internal-error"),Ys(S,e.name),Ys(k,e.name),Ys(V,e.name),Ys(O,e.name),Ys(H,e.name),Ys(re,e.name);let I=new n({uid:Z,auth:e,email:C,emailVerified:de,displayName:g,isAnonymous:qe,photoURL:k,phoneNumber:S,tenantId:V,stsTokenManager:w,createdAt:H,lastLoginAt:re});return ge&&Array.isArray(ge)&&(I.providerData=ge.map(A=>Object.assign({},A))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new If;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield G_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lV(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new If;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,d),c})}};var qF=new Map;function Ao(n){xo(n instanceof Function,"Expected a class definition");let e=qF.get(n);return e?(xo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qF.set(n,e),e)}var lY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),gC=lY;function j_(n,e,t){return`firebase:${n}:${e}:${t}`}var W_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=j_(this.userKey,i.apiKey,o),this.fullPersistenceKey=j_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Du._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(Ao(gC),e,r);let i=(yield Promise.all(t.map(d=>T(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||Ao(gC),s=j_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(s);if(h){let g=Du._fromJSON(e,h);d!==o&&(a=g),o=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(d=>T(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function HF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gV(e))return"Blackberry";if(mV(e))return"Webos";if(dV(e))return"Safari";if((e.includes("chrome/")||hV(e))&&!e.includes("edge/"))return"Chrome";if(pV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uV(n=un()){return/firefox\//i.test(n)}function dV(n=un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hV(n=un()){return/crios\//i.test(n)}function fV(n=un()){return/iemobile/i.test(n)}function pV(n=un()){return/android/i.test(n)}function gV(n=un()){return/blackberry/i.test(n)}function mV(n=un()){return/webos/i.test(n)}function OC(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uY(n=un()){var e;return OC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dY(){return IL()&&document.documentMode===10}function yV(n=un()){return OC(n)||pV(n)||mV(n)||gV(n)||/windows phone/i.test(n)||fV(n)}function _V(n,e=[]){let t;switch(n){case"Browser":t=HF(un());break;case"Worker":t=`${HF(un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ki}/${r}`}var mC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function hY(t){return T(this,arguments,function*(n,e={}){return Ro(n,"GET","/v2/passwordPolicy",Js(n,e))})}var fY=6,yC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:fY,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var _C=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new mC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ao(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield W_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield cV(this,{idToken:e}),r=yield Du._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(Tr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield G_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=XQ()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(Tr(this.app))return Promise.reject(Mo(this));let t=e?wt(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return Tr(this.app)?Promise.reject(Mo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tr(this.app)?Promise.reject(Mo(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Ao(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield hY(this),t=new yC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield cY(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ao(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=yield W_.create(this,[Ao(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_V(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&QQ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zs(n){return wt(n)}var K_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=SL(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rv={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pY(n){rv=n}function vV(n){return rv.loadJS(n)}function gY(){return rv.recaptchaEnterpriseScript}function mY(){return rv.gapiScript}function wV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var yY="recaptcha-enterprise",_Y="NO_RECAPTCHA",vC=class{constructor(e){this.type=yY,this.auth=Zs(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>T(null,null,function*(){rY(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new fC(c);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;zF(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(_Y)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&zF(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gY();c.length!==0&&(c+=a),vV(c).then(()=>{i(a,o,s)}).catch(d=>{s(d)})}}).catch(a=>{s(a)})})})}};function GF(n,e,t,r=!1){return T(this,null,function*(){let i=new vC(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function wC(n,e,t,r){return T(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield GF(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>T(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield GF(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function NC(n,e){let t=lc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ac(o,e??{}))return i;Sr(i,"already-initialized")}return t.initialize({options:e})}function vY(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ao);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function LC(n,e,t){let r=Zs(n);ve(r._canInitEmulator,r,"emulator-config-failed"),ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=EV(e),{host:s,port:a}=wY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||EY()}function EV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wY(n){let e=EV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WF(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WF(s)}}}function WF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function EY(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Au=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Do("not implemented")}_getIdTokenResponse(e){return Do("not implemented")}_linkToIdToken(e,t){return Do("not implemented")}_getReauthenticationResolver(e){return Do("not implemented")}};function IY(n,e){return T(this,null,function*(){return Ro(n,"POST","/v1/accounts:signUp",e)})}function bY(n,e){return T(this,null,function*(){return Df(n,"POST","/v1/accounts:signInWithPassword",Js(n,e))})}function TY(n,e){return T(this,null,function*(){return Df(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))})}function CY(n,e){return T(this,null,function*(){return Df(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))})}var Tf=class n extends Au{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wC(e,t,"signInWithPassword",bY);case"emailLink":return TY(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wC(e,r,"signUpPassword",IY);case"emailLink":return CY(e,{idToken:t,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Cu(n,e){return T(this,null,function*(){return Df(n,"POST","/v1/accounts:signInWithIdp",Js(n,e))})}var SY="http://localhost",Q_=class n extends Au{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=xg(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Cu(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Cu(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Cu(e,t)}buildRequest(){let e={requestUri:SY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fu(t)}return e}};function DY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AY(n){let e=pu(gu(n)).link,t=e?pu(gu(e)).deep_link_id:null,r=pu(gu(n)).deep_link_id;return(r?pu(gu(r)).link:null)||r||t||e||n}var Y_=class n{constructor(e){var t,r,i,o,s,a;let c=pu(gu(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=DY((i=c.mode)!==null&&i!==void 0?i:null);ve(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=AY(e);try{return new n(t)}catch{return null}}};var IV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Tf._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Y_.parseLink(r);return ve(i,"argument-error"),Tf._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Cf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var J_=class extends Cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var FC=(()=>{class n extends J_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Q_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function MY(n,e){return T(this,null,function*(){return Df(n,"POST","/v1/accounts:signUp",Js(n,e))})}var Mu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let o=yield Du._fromIdTokenResponse(e,r,i),s=KF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function KF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var EC=class n extends On{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?EC._fromErrorAndOperation(n,o,e,r):o})}function xY(n,e,t=!1){return T(this,null,function*(){let r=yield Su(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Mu._forOperation(n,"link",r)})}function RY(n,e,t=!1){return T(this,null,function*(){let{auth:r}=n;if(Tr(r.app))return Promise.reject(Mo(r));let i="reauthenticate";try{let o=yield Su(n,bV(r,i,e,n),t);ve(o.idToken,r,"internal-error");let s=PC(o.idToken);ve(s,r,"internal-error");let{sub:a}=s;return ve(n.uid===a,r,"user-mismatch"),Mu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sr(r,"user-mismatch"),o}})}function TV(n,e,t=!1){return T(this,null,function*(){if(Tr(n.app))return Promise.reject(Mo(n));let r="signIn",i=yield bV(n,r,e),o=yield Mu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function VC(n,e){return T(this,null,function*(){return TV(Zs(n),e)})}function CV(n){return T(this,null,function*(){let e=Zs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function UC(n,e,t){return T(this,null,function*(){if(Tr(n.app))return Promise.reject(Mo(n));let r=Zs(n),s=yield wC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CV(n),c}),a=yield Mu._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function BC(n,e,t){return Tr(n.app)?Promise.reject(Mo(n)):VC(wt(n),IV.credential(e,t)).catch(r=>T(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&CV(n),r}))}function PY(n,e){return T(this,null,function*(){return Ro(n,"POST","/v1/accounts:update",e)})}function jC(r,i){return T(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=wt(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Su(o,PY(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let d=o.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=o.displayName,d.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function zC(n,e,t,r){return wt(n).onIdTokenChanged(e,t,r)}function $C(n,e,t){return wt(n).beforeAuthStateChanged(e,t)}function qC(n){return wt(n).signOut()}var Z_="__sak";var X_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Z_,"1"),this.storage.removeItem(Z_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var kY=1e3,OY=10,NY=(()=>{class n extends X_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);dY()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,OY):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},kY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return T(this,null,function*(){yield gi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return T(this,null,function*(){let r=yield gi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return T(this,null,function*(){yield gi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),SV=NY;var LY=(()=>{class n extends X_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),HC=LY;function FY(n){return Promise.all(n.map(e=>T(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var VY=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>T(this,null,function*(){return h(r.origin,s)})),d=yield FY(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function GC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var IC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let d=GC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let C=g;if(C.data.eventId===d)switch(C.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(C.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ni(){return window}function UY(n){Ni().location.href=n}function DV(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}function BY(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function jY(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zY(){return DV()?self:null}var AV="firebaseLocalStorageDb",$Y=1,ev="firebaseLocalStorage",MV="fbase_key",_c=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function iv(n,e){return n.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function qY(){let n=indexedDB.deleteDatabase(AV);return new _c(n).toPromise()}function bC(){let n=indexedDB.open(AV,$Y);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ev,{keyPath:MV})}catch(i){t(i)}}),n.addEventListener("success",()=>T(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ev)?e(r):(r.close(),yield qY(),e(yield bC()))}))})}function QF(n,e,t){return T(this,null,function*(){let r=iv(n,!0).put({[MV]:e,value:t});return new _c(r).toPromise()})}function HY(n,e){return T(this,null,function*(){let t=iv(n,!1).get(e),r=yield new _c(t).toPromise();return r===void 0?null:r.value})}function YF(n,e){let t=iv(n,!0).delete(e);return new _c(t).toPromise()}var GY=800,WY=3,KY=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield bC(),this.db)})}_withRetries(t){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>WY)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return DV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=VY._getInstance(zY()),this.receiver._subscribe("keyChanged",(t,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,r;if(this.activeServiceWorker=yield BY(),!this.activeServiceWorker)return;this.sender=new IC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||jY()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield bC();return yield QF(t,Z_,"1"),yield YF(t,Z_),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>QF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let r=yield this._withRetries(i=>HY(i,t));return this.localCache[t]=r,r})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>YF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let s=iv(o,!1).getAll();return new _c(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),GY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),xV=KY;var ewe=wV("rcb"),twe=new yc(3e4,6e4);function RV(n,e){return e?Ao(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Sf=class extends Au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function QY(n){return TV(n.auth,new Sf(n),n.bypassAuthState)}function YY(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),RY(t,new Sf(n),n.bypassAuthState)}function JY(n){return T(this,null,function*(){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),xY(t,new Sf(n),n.bypassAuthState)})}var tv=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QY;case"linkViaPopup":case"linkViaRedirect":return JY;case"reauthViaPopup":case"reauthViaRedirect":return YY;default:Sr(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ZY=new yc(2e3,1e4);function WC(n,e,t){return T(this,null,function*(){if(Tr(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));let r=Zs(n);YQ(n,e,Cf);let i=RV(r,t);return new XY(r,"signInViaPopup",e,i).executeNotNull()})}var XY=(()=>{class n extends tv{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return T(this,null,function*(){let t=yield this.execute();return ve(t,this.auth,"internal-error"),t})}onExecution(){return T(this,null,function*(){xo(this.filter.length===1,"Popup operations only handle one event");let t=GC();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ZY.get())};t()}}n.currentPopupAction=null;return n})(),eJ="pendingRedirect",z_=new Map,TC=class n extends tv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=z_.get(this.auth._key());if(!e){try{let r=(yield tJ(this.resolver,this.auth))?yield gi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}z_.set(this.auth._key(),e)}return this.bypassAuthState||z_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return gi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function tJ(n,e){return T(this,null,function*(){let t=iJ(e),r=rJ(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function nJ(n,e){z_.set(n._key(),e)}function rJ(n){return Ao(n._redirectPersistence)}function iJ(n){return j_(eJ,n.config.apiKey,n.name)}function oJ(n,e,t=!1){return T(this,null,function*(){if(Tr(n.app))return Promise.reject(Mo(n));let r=Zs(n),i=RV(r,e),s=yield new TC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var sJ=10*60*1e3,CC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!PV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(JF(e))}saveEventToCache(e){this.cachedEventUids.add(JF(e)),this.lastProcessedEventTime=Date.now()}};function JF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PV(n);default:return!1}}function cJ(t){return T(this,arguments,function*(n,e={}){return Ro(n,"GET","/v1/projects",e)})}var lJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uJ=/^https?/;function dJ(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield cJ(n);for(let t of e)try{if(hJ(t))return}catch{}Sr(n,"unauthorized-domain")})}function hJ(n){let e=dC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!uJ.test(t))return!1;if(lJ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fJ=new yc(3e4,6e4);function ZF(){let n=Ni().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pJ(n){return new Promise((e,t)=>{var r,i,o;function s(){ZF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZF(),t(ti(n,"network-request-failed"))},timeout:fJ.get()})}if(!((i=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ni().gapi)===null||o===void 0)&&o.load)s();else{let a=wV("iframefcb");return Ni()[a]=()=>{gapi.load?s():t(ti(n,"network-request-failed"))},vV(`${mY()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $_=null,e})}var $_=null;function gJ(n){return $_=$_||pJ(n),$_}var mJ=new yc(5e3,15e3),yJ="__/auth/iframe",_J="emulator/auth/iframe",vJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EJ(n){let e=n.config;ve(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?xC(e,_J):`https://${n.config.authDomain}/${yJ}`,r={apiKey:e.apiKey,appName:n.name,v:ki},i=wJ.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${fu(r).slice(1)}`}function IJ(n){return T(this,null,function*(){let e=yield gJ(n),t=Ni().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:EJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vJ,dontclear:!0},r=>new Promise((i,o)=>T(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ti(n,"network-request-failed"),a=Ni().setTimeout(()=>{o(s)},mJ.get());function c(){Ni().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var bJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TJ=500,CJ=600,SJ="_blank",DJ="http://localhost",nv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AJ(n,e,t,r=TJ,i=CJ){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},bJ),{width:r.toString(),height:i.toString(),top:o,left:s}),d=un().toLowerCase();t&&(a=hV(d)?SJ:t),uV(d)&&(e=e||DJ,c.scrollbars="yes");let h=Object.entries(c).reduce((C,[S,k])=>`${C}${S}=${k},`,"");if(uY(d)&&a!=="_self")return MJ(e||"",a),new nv(null);let g=window.open(e||"",a,h);ve(g,n,"popup-blocked");try{g.focus()}catch{}return new nv(g)}function MJ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var xJ="__/auth/handler",RJ="emulator/auth/handler",PJ=encodeURIComponent("fac");function XF(n,e,t,r,i,o){return T(this,null,function*(){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ki,eventId:i};if(e instanceof Cf){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",CL(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof J_){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${PJ}=${encodeURIComponent(c)}`:"";return`${kJ(n)}?${fu(a).slice(1)}${d}`})}function kJ({config:n}){return n.emulator?xC(n,RJ):`https://${n.authDomain}/${xJ}`}var uC="webStorageSupport",SC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HC,this._completeRedirectFn=oJ,this._overrideRedirectResult=nJ}_openPopup(e,t,r,i){return T(this,null,function*(){var o;xo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield XF(e,t,r,dC(),i);return AJ(e,s,GC())})}_openRedirect(e,t,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield XF(e,t,r,dC(),i);return UY(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(xo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return T(this,null,function*(){let t=yield IJ(e),r=new CC(e);return t.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uC,{type:uC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[uC];s!==void 0&&t(!!s),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yV()||dV()||OC()}},kV=SC;var eV="@firebase/auth",tV="1.7.9";var DC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NJ(n){Pi(new Zn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_V(n)},d=new _C(r,i,o,c);return vY(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new Zn("auth-internal",e=>{let t=Zs(e.getProvider("auth").getImmediate());return(r=>new DC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bt(eV,tV,OJ(n)),bt(eV,tV,"esm2017")}var LJ=5*60,FJ=lT("authIdTokenMaxAge")||LJ,nV=null,VJ=n=>e=>T(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FJ)return;let i=t?.token;nV!==i&&(nV=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function KC(n=$s()){let e=lc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=NC(n,{popupRedirectResolver:kV,persistence:[xV,SV,HC]}),r=lT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=VJ(o.toString());$C(t,s,()=>s(t.currentUser)),zC(t,a=>s(a))}}let i=aT("auth");return i&&LC(t,`http://${i}`),t}function UJ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pY({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ti("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",UJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NJ("Browser");var OV="auth",vc=class{constructor(e){return e}},wc=class{constructor(){return fc(OV)}};var QC=new Y("angularfire2.auth-instances");function DZ(n,e){let t=bu(OV,n,e);return t&&new vc(t)}function AZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vc(r)}}var MZ={provide:wc,deps:[[new en,QC]]},xZ={provide:vc,useFactory:DZ,deps:[[new en,QC],Xr]};function NV(n,...e){return bt("angularfire",Eo.full,"auth"),bn([xZ,MZ,{provide:QC,useFactory:AZ(n),multi:!0,deps:[Fe,xt,Hs,Io,[new en,qs],...e]}])}var LV=at(BF,!0);var FV=at(UC,!0);var VV=at(KC,!0);var UV=at(BC,!0);var BV=at(WC,!0);var jV=at(qC,!0);var zV=at(jC,!0);var $V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qV={};var Po,YC;(function(){var n;function e(M,w){function I(){}I.prototype=w.prototype,M.F=w.prototype,M.prototype=new I,M.prototype.constructor=M,M.D=function(A,D,P){for(var E=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)E[Et-2]=arguments[Et];return w.prototype[D].apply(A,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,w,I){I||(I=0);let A=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)A[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;D<16;++D)A[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=M.g[0],I=M.g[1],D=M.g[2];let P=M.g[3],E;E=w+(P^I&(D^P))+A[0]+3614090360&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[1]+3905402710&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[2]+606105819&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[4]+4118548399&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[5]+1200080426&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[6]+2821735955&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[8]+1770035416&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[9]+2336552879&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[10]+4294925233&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[12]+1804603682&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[13]+4254626195&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[14]+2792965006&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(D^P&(I^D))+A[1]+4129170786&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[6]+3225465664&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[11]+643717713&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[5]+3593408605&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[10]+38016083&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[15]+3634488961&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[9]+568446438&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[14]+3275163606&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[3]+4107603335&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[13]+2850285829&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[2]+4243563512&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[7]+1735328473&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(I^D^P)+A[5]+4294588738&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[8]+2272392833&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[11]+1839030562&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[1]+2763975236&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[4]+1272893353&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[7]+4139469664&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[13]+681279174&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[0]+3936430074&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[3]+3572445317&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[9]+3654602809&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[12]+3873151461&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[15]+530742520&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(D^(I|~P))+A[0]+4096336452&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[7]+1126891415&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[14]+2878612391&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[12]+1700485571&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[3]+2399980690&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[10]+4293915773&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[8]+1873313359&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[15]+4264355552&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[6]+2734768916&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[4]+4149444226&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[11]+3174756917&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[2]+718787259&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+P&4294967295}r.prototype.v=function(M,w){w===void 0&&(w=M.length);let I=w-this.blockSize,A=this.C,D=this.h,P=0;for(;P<w;){if(D==0)for(;P<=I;)i(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<w;)if(A[D++]=M.charCodeAt(P++),D==this.blockSize){i(this,A),D=0;break}}else for(;P<w;)if(A[D++]=M[P++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;w=this.o*8;for(var I=M.length-8;I<M.length;++I)M[I]=w&255,w/=256;for(this.v(M),M=Array(16),w=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)M[w++]=this.g[I]>>>A&255;return M};function o(M,w){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=w(M)}function s(M,w){this.h=w;let I=[],A=!0;for(let D=M.length-1;D>=0;D--){let P=M[D]|0;A&&P==w||(I[D]=P,A=!1)}this.g=I}var a={};function c(M){return-128<=M&&M<128?o(M,function(w){return new s([w|0],w<0?-1:0)}):new s([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return g;if(M<0)return O(d(-M));let w=[],I=1;for(let A=0;M>=I;A++)w[A]=M/I|0,I*=4294967296;return new s(w,0)}function h(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return O(h(M.substring(1),w));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(w,8)),A=g;for(let P=0;P<M.length;P+=8){var D=Math.min(8,M.length-P);let E=parseInt(M.substring(P,P+D),w);D<8?(D=d(Math.pow(w,D)),A=A.j(D).add(d(E))):(A=A.j(I),A=A.add(d(E)))}return A}var g=c(0),C=c(1),S=c(16777216);n=s.prototype,n.m=function(){if(V(this))return-O(this).m();let M=0,w=1;for(let I=0;I<this.g.length;I++){let A=this.i(I);M+=(A>=0?A:4294967296+A)*w,w*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(V(this))return"-"+O(this).toString(M);let w=d(Math.pow(M,6));var I=this;let A="";for(;;){let D=de(I,w).g;I=H(I,D.j(w));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(M);if(I=D,k(I))return P+A;for(;P.length<6;)P="0"+P;A=P+A}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function V(M){return M.h==-1}n.l=function(M){return M=H(this,M),V(M)?-1:k(M)?0:1};function O(M){let w=M.g.length,I=[];for(let A=0;A<w;A++)I[A]=~M.g[A];return new s(I,~M.h).add(C)}n.abs=function(){return V(this)?O(this):this},n.add=function(M){let w=Math.max(this.g.length,M.g.length),I=[],A=0;for(let D=0;D<=w;D++){let P=A+(this.i(D)&65535)+(M.i(D)&65535),E=(P>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);A=E>>>16,P&=65535,E&=65535,I[D]=E<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function H(M,w){return M.add(O(w))}n.j=function(M){if(k(this)||k(M))return g;if(V(this))return V(M)?O(this).j(O(M)):O(O(this).j(M));if(V(M))return O(this.j(O(M)));if(this.l(S)<0&&M.l(S)<0)return d(this.m()*M.m());let w=this.g.length+M.g.length,I=[];for(var A=0;A<2*w;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let D=0;D<M.g.length;D++){let P=this.i(A)>>>16,E=this.i(A)&65535,Et=M.i(D)>>>16,Ln=M.i(D)&65535;I[2*A+2*D]+=E*Ln,re(I,2*A+2*D),I[2*A+2*D+1]+=P*Ln,re(I,2*A+2*D+1),I[2*A+2*D+1]+=E*Et,re(I,2*A+2*D+1),I[2*A+2*D+2]+=P*Et,re(I,2*A+2*D+2)}for(M=0;M<w;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=w;M<2*w;M++)I[M]=0;return new s(I,0)};function re(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function Z(M,w){this.g=M,this.h=w}function de(M,w){if(k(w))throw Error("division by zero");if(k(M))return new Z(g,g);if(V(M))return w=de(O(M),w),new Z(O(w.g),O(w.h));if(V(w))return w=de(M,O(w)),new Z(O(w.g),w.h);if(M.g.length>30){if(V(M)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var I=C,A=w;A.l(M)<=0;)I=qe(I),A=qe(A);var D=ge(I,1),P=ge(A,1);for(A=ge(A,2),I=ge(I,2);!k(A);){var E=P.add(A);E.l(M)<=0&&(D=D.add(I),P=E),A=ge(A,1),I=ge(I,1)}return w=H(M,D.j(w)),new Z(D,w)}for(D=g;M.l(w)>=0;){for(I=Math.max(1,Math.floor(M.m()/w.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),P=d(I),E=P.j(w);V(E)||E.l(M)>0;)I-=A,P=d(I),E=P.j(w);k(P)&&(P=C),D=D.add(P),M=H(M,E)}return new Z(D,M)}n.B=function(M){return de(this,M).h},n.and=function(M){let w=Math.max(this.g.length,M.g.length),I=[];for(let A=0;A<w;A++)I[A]=this.i(A)&M.i(A);return new s(I,this.h&M.h)},n.or=function(M){let w=Math.max(this.g.length,M.g.length),I=[];for(let A=0;A<w;A++)I[A]=this.i(A)|M.i(A);return new s(I,this.h|M.h)},n.xor=function(M){let w=Math.max(this.g.length,M.g.length),I=[];for(let A=0;A<w;A++)I[A]=this.i(A)^M.i(A);return new s(I,this.h^M.h)};function qe(M){let w=M.g.length+1,I=[];for(let A=0;A<w;A++)I[A]=M.i(A)<<1|M.i(A-1)>>>31;return new s(I,M.h)}function ge(M,w){let I=w>>5;w%=32;let A=M.g.length-I,D=[];for(let P=0;P<A;P++)D[P]=w>0?M.i(P+I)>>>w|M.i(P+I+1)<<32-w:M.i(P+I);return new s(D,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YC=qV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Po=qV.Integer=s}).apply(typeof $V<"u"?$V:typeof self<"u"?self:typeof window<"u"?window:{});var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={};var JC,PZ,xu,ZC,Af,sv,XC,eS,tS;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ov=="object"&&ov];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(u,p){if(p)e:{var _=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var N=u[R];if(!(N in _))break e;_=_[N]}u=u[u.length-1],R=_[u],p=p(R),p!=R&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var _=[],R;for(R in p)Object.prototype.hasOwnProperty.call(p,R)&&_.push([R,p[R]]);return _}});var o=o||{},s=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,_){return u.call.apply(u.bind,arguments)}function d(u,p,_){return d=c,d.apply(null,arguments)}function h(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function g(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(R,N,U){for(var Q=Array(arguments.length-2),we=2;we<arguments.length;we++)Q[we-2]=arguments[we];return p.prototype[N].apply(R,Q)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function S(u){let p=u.length;if(p>0){let _=Array(p);for(let R=0;R<p;R++)_[R]=u[R];return _}return[]}function k(u,p){for(let R=1;R<arguments.length;R++){let N=arguments[R];var _=typeof N;if(_=_!="object"?_:N?Array.isArray(N)?"array":_:"null",_=="array"||_=="object"&&typeof N.length=="number"){_=u.length||0;let U=N.length||0;u.length=_+U;for(let Q=0;Q<U;Q++)u[_+Q]=N[Q]}else u.push(N)}}class V{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function O(u){s.setTimeout(()=>{throw u},0)}function H(){var u=M;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class re{constructor(){this.h=this.g=null}add(p,_){let R=Z.get();R.set(p,_),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new V(()=>new de,u=>u.reset());class de{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,ge=!1,M=new re,w=()=>{let u=Promise.resolve(void 0);qe=()=>{u.then(I)}};function I(){for(var u;u=H();){try{u.h.call(u.g)}catch(_){O(_)}var p=Z;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}ge=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let _=()=>{};s.addEventListener("test",_,p),s.removeEventListener("test",_,p)}catch{}return u}();function E(u){return/^[\s\xa0]*$/.test(u)}function Et(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}g(Et,D),Et.prototype.init=function(u,p){let _=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ln="closure_listenable_"+(Math.random()*1e6|0),yw=0;function ma(u,p,_,R,N){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!R,this.ha=N,this.key=++yw,this.da=this.fa=!1}function ci(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ko(u,p,_){for(let R in u)p.call(_,u[R],R,u)}function zp(u,p){for(let _ in u)p.call(void 0,u[_],_,u)}function $p(u){let p={};for(let _ in u)p[_]=u[_];return p}let Mr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(u,p){let _,R;for(let N=1;N<arguments.length;N++){R=arguments[N];for(_ in R)u[_]=R[_];for(let U=0;U<Mr.length;U++)_=Mr[U],Object.prototype.hasOwnProperty.call(R,_)&&(u[_]=R[_])}}function Hc(u){this.src=u,this.g={},this.h=0}Hc.prototype.add=function(u,p,_,R,N){let U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);let Q=Fd(u,p,R,N);return Q>-1?(p=u[Q],_||(p.fa=!1)):(p=new ma(p,this.src,U,!!R,N),p.fa=_,u.push(p)),p};function Qi(u,p){let _=p.type;if(_ in u.g){var R=u.g[_],N=Array.prototype.indexOf.call(R,p,void 0),U;(U=N>=0)&&Array.prototype.splice.call(R,N,1),U&&(ci(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Fd(u,p,_,R){for(let N=0;N<u.length;++N){let U=u[N];if(!U.da&&U.listener==p&&U.capture==!!_&&U.ha==R)return N}return-1}var Yi="closure_lm_"+(Math.random()*1e6|0),Vd={};function qp(u,p,_,R,N){if(R&&R.once)return Wc(u,p,_,R,N);if(Array.isArray(p)){for(let U=0;U<p.length;U++)qp(u,p[U],_,R,N);return null}return _=Jc(_),u&&u[Ln]?u.J(p,_,a(R)?!!R.capture:!!R,N):ya(u,p,_,!1,R,N)}function ya(u,p,_,R,N,U){if(!p)throw Error("Invalid event type");let Q=a(N)?!!N.capture:!!N,we=Yc(u);if(we||(u[Yi]=we=new Hc(u)),_=we.add(p,_,R,Q,U),_.proxy)return _;if(R=Gc(),_.proxy=R,R.src=u,R.listener=_,u.addEventListener)P||(N=Q),N===void 0&&(N=!1),u.addEventListener(p.toString(),R,N);else if(u.attachEvent)u.attachEvent(Qc(p.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Gc(){function u(_){return p.call(u.src,u.listener,_)}let p=Hp;return u}function Wc(u,p,_,R,N){if(Array.isArray(p)){for(let U=0;U<p.length;U++)Wc(u,p[U],_,R,N);return null}return _=Jc(_),u&&u[Ln]?u.K(p,_,a(R)?!!R.capture:!!R,N):ya(u,p,_,!0,R,N)}function Kc(u,p,_,R,N){if(Array.isArray(p))for(var U=0;U<p.length;U++)Kc(u,p[U],_,R,N);else R=a(R)?!!R.capture:!!R,_=Jc(_),u&&u[Ln]?(u=u.i,U=String(p).toString(),U in u.g&&(p=u.g[U],_=Fd(p,_,R,N),_>-1&&(ci(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[U],u.h--)))):u&&(u=Yc(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Fd(p,_,R,N)),(_=u>-1?p[u]:null)&&_a(_))}function _a(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ln])Qi(p.i,u);else{var _=u.type,R=u.proxy;p.removeEventListener?p.removeEventListener(_,R,u.capture):p.detachEvent?p.detachEvent(Qc(_),R):p.addListener&&p.removeListener&&p.removeListener(R),(_=Yc(p))?(Qi(_,u),_.h==0&&(_.src=null,p[Yi]=null)):ci(u)}}}function Qc(u){return u in Vd?Vd[u]:Vd[u]="on"+u}function Hp(u,p){if(u.da)u=!0;else{p=new Et(p,this);let _=u.listener,R=u.ha||u.src;u.fa&&_a(u),u=_.call(R,p)}return u}function Yc(u){return u=u[Yi],u instanceof Hc?u:null}var Ud="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jc(u){return typeof u=="function"?u:(u[Ud]||(u[Ud]=function(p){return u.handleEvent(p)}),u[Ud])}function Wt(){A.call(this),this.i=new Hc(this),this.M=this,this.G=null}g(Wt,A),Wt.prototype[Ln]=!0,Wt.prototype.removeEventListener=function(u,p,_,R){Kc(this,u,p,_,R)};function Kt(u,p){var _,R=u.G;if(R)for(_=[];R;R=R.G)_.push(R);if(u=u.M,R=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var N=p;p=new D(R,u),Gt(p,N)}N=!0;let U,Q;if(_)for(Q=_.length-1;Q>=0;Q--)U=p.g=_[Q],N=va(U,R,!0,p)&&N;if(U=p.g=u,N=va(U,R,!0,p)&&N,N=va(U,R,!1,p)&&N,_)for(Q=0;Q<_.length;Q++)U=p.g=_[Q],N=va(U,R,!1,p)&&N}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var u=this.i;for(let p in u.g){let _=u.g[p];for(let R=0;R<_.length;R++)ci(_[R]);delete u.g[p],u.h--}}this.G=null},Wt.prototype.J=function(u,p,_,R){return this.i.add(String(u),p,!1,_,R)},Wt.prototype.K=function(u,p,_,R){return this.i.add(String(u),p,!0,_,R)};function va(u,p,_,R){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let U=0;U<p.length;++U){let Q=p[U];if(Q&&!Q.da&&Q.capture==_){let we=Q.listener,l=Q.ha||Q.src;Q.fa&&Qi(u.i,Q),N=we.call(l,R)!==!1&&N}}return N&&!R.defaultPrevented}function _w(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:s.setTimeout(u,p||0)}function Zc(u){u.g=_w(()=>{u.g=null,u.i&&(u.i=!1,Zc(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Bd extends A{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Zc(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(u){A.call(this),this.h=u,this.g={}}g(Ji,A);var Qt=[];function sn(u){Ko(u.g,function(p,_){this.g.hasOwnProperty(_)&&_a(p)},u),u.g={}}Ji.prototype.N=function(){Ji.Z.N.call(this),sn(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=s.JSON.stringify,Gp=s.JSON.parse,Wp=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function Kp(){}function Yo(){}var Jo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xc(){D.call(this,"d")}g(Xc,D);function wa(){D.call(this,"c")}g(wa,D);var Zi={},Qp=null;function Zo(){return Qp=Qp||new Wt}Zi.Ia="serverreachability";function jd(u){D.call(this,Zi.Ia,u)}g(jd,D);function Xo(u){let p=Zo();Kt(p,new jd(p))}Zi.STAT_EVENT="statevent";function es(u,p){D.call(this,Zi.STAT_EVENT,u),this.stat=p}g(es,D);function Yt(u){let p=Zo();Kt(p,new es(p,u))}Zi.Ja="timingevent";function el(u,p){D.call(this,Zi.Ja,u),this.size=p}g(el,D);function er(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},p)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function tl(u,p,_,R,N,U){u.info(function(){if(u.g)if(U){var Q="",we=U.split("&");for(let f=0;f<we.length;f++){var l=we[f].split("=");if(l.length>1){let m=l[0];l=l[1];let x=m.split("_");Q=x.length>=2&&x[1]=="type"?Q+(m+"="+l+"&"):Q+(m+"=redacted&")}}}else Q=null;else Q=U;return"XMLHTTP REQ ("+R+") [attempt "+N+"]: "+p+`
`+_+`
`+Q})}function Yp(u,p,_,R,N,U,Q){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+N+"]: "+p+`
`+_+`
`+U+" "+Q})}function mr(u,p,_,R){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+pn(u,_)+(R?" "+R:"")})}function Jp(u,p){u.info(function(){return"TIMEOUT: "+p})}ts.prototype.info=function(){};function pn(u,p){if(!u.g)return p;if(!p)return null;try{let U=JSON.parse(p);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var _=U[u];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var N=R[0];if(N!="noop"&&N!="stop"&&N!="close")for(let Q=1;Q<R.length;Q++)R[Q]=""}}}}return Qo(U)}catch{return p}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ns={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rs;function zd(){}g(zd,Kp),zd.prototype.g=function(){return new XMLHttpRequest},rs=new zd;function Ia(u){return encodeURIComponent(String(u))}function is(u){var p=1;u=u.split(":");let _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function li(u,p,_,R){this.j=u,this.i=p,this.l=_,this.S=R||1,this.V=new Ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zp}function Zp(){this.i=null,this.g="",this.h=!1}var ba={},nl={};function Ta(u,p,_){u.M=1,u.A=Aa(tr(p)),u.u=_,u.R=!0,Ca(u,null)}function Ca(u,p){u.F=Date.now(),os(u),u.B=tr(u.A);var _=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),ig(_.i,"t",R),u.C=0,_=u.j.L,u.h=new Zp,u.g=gl(u.j,_?p:null,!u.u),u.P>0&&(u.O=new Bd(d(u.Y,u,u.g),u.P)),p=u.V,_=u.g,R=u.ba;var N="readystatechange";Array.isArray(N)||(N&&(Qt[0]=N.toString()),N=Qt);for(let U=0;U<N.length;U++){let Q=qp(_,N[U],R||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.J?$p(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Xo(),tl(u.i,u.v,u.B,u.l,u.S,u.u)}li.prototype.ba=function(u){u=u.target;let p=this.O;p&&tt(u)==3?p.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{let we=tt(this.g),l=this.g.ya(),f=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||dg(this.g)))){this.K||we!=4||l==7||(l==8||f<=0?Xo(3):Xo(2)),il(this);var p=this.g.ca();this.X=p;var _=ui(this);if(this.o=p==200,Yp(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var R,N=this.g;if((R=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(R)){var U=R;break t}}U=null}if(u=U)mr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,as(this,u);else{this.o=!1,this.m=3,Yt(12),Xi(this),ss(this);break e}}if(this.R){u=!0;let m;for(;!this.K&&this.C<_.length;)if(m=Xp(this,_),m==nl){we==4&&(this.m=4,Yt(14),u=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==ba){this.m=4,Yt(15),mr(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else mr(this.i,this.l,m,null),as(this,m);if($d(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||_.length!=0||this.h.h||(this.m=1,Yt(16),u=!1),this.o=this.o&&u,!u)mr(this.i,this.l,_,"[Invalid Chunked Response]"),Xi(this),ss(this);else if(_.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),hl(Q),Q.P=!0,Yt(11))}}else mr(this.i,this.l,_,null),as(this,_);we==4&&Xi(this),this.o&&!this.K&&(we==4?nh(this.j,this):(this.o=!1,os(this)))}else vw(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Xi(this),ss(this)}}}catch{}finally{}};function ui(u){if(!$d(u))return u.g.la();let p=dg(u.g);if(p==="")return"";let _="",R=p.length,N=tt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xi(u),ss(u),"";u.h.i=new s.TextDecoder}for(let U=0;U<R;U++)u.h.h=!0,_+=u.h.i.decode(p[U],{stream:!(N&&U==R-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function $d(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Xp(u,p){var _=u.C,R=p.indexOf(`
`,_);return R==-1?nl:(_=Number(p.substring(_,R)),isNaN(_)?ba:(R+=1,R+_>p.length?nl:(p=p.slice(R,R+_),u.C=R+_,p)))}li.prototype.cancel=function(){this.K=!0,Xi(this)};function os(u){u.T=Date.now()+u.H,rl(u,u.H)}function rl(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=er(d(u.aa,u),p)}function il(u){u.D&&(s.clearTimeout(u.D),u.D=null)}li.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(Jp(this.i,this.B),this.M!=2&&(Xo(),Yt(17)),Xi(this),this.m=2,ss(this)):rl(this,this.T-u)};function ss(u){u.j.I==0||u.K||nh(u.j,u)}function Xi(u){il(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,sn(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function as(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||Sa(_.h,u))){if(!u.L&&Sa(_.h,u)&&_.I==3){try{var R=_.Ba.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var N=R;if(N[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)fl(_),eo(_);else break e;gs(_),Yt(18)}}else _.xa=N[1],0<_.xa-_.K&&N[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=er(d(_.Va,_),6e3));di(_.h)<=1&&_.ta&&(_.ta=void 0)}else fi(_,11)}else if((u.L||_.g==u)&&fl(_),!E(p))for(N=_.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=_.K))if(_.K=m,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let x=f[3];x!=null&&(_.ka=x,_.j.info("VER="+_.ka));let L=f[4];L!=null&&(_.za=L,_.j.info("SVER="+_.za));let B=f[5];B!=null&&typeof B=="number"&&B>0&&(R=1.5*B,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;let W=u.g;if(W){let Je=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Je){var U=R.h;U.g||Je.indexOf("spdy")==-1&&Je.indexOf("quic")==-1&&Je.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(qd(U,U.h),U.h=null))}if(R.G){let kt=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;kt&&(R.wa=kt,lt(R.J,R.G,kt))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var Q=u;if(R.na=pl(R,R.L?R.ba:null,R.W),Q.L){Hd(R.h,Q);var we=Q,l=R.O;l&&(we.H=l),we.D&&(il(we),os(we)),R.g=Q}else dl(R);_.i.length>0&&Vn(_)}else f[0]!="stop"&&f[0]!="close"||fi(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?fi(_,7):ul(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}Xo(4)}catch{}}var eg=class{constructor(u,p){this.g=u,this.map=p}};function ol(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function di(u){return u.h?1:u.g?u.g.size:0}function Sa(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function qd(u,p){u.g?u.g.add(p):u.h=p}function Hd(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ol.prototype.cancel=function(){if(this.i=Gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Gd(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let _ of u.g.values())p=p.concat(_.G);return p}return S(u.i)}var Wd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kd(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){let R=u[_].indexOf("="),N,U=null;R>=0?(N=u[_].substring(0,R),U=u[_].substring(R+1)):N=u[_],p(N,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function yr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof yr?(this.l=u.l,ls(this,u.j),this.o=u.o,this.g=u.g,Da(this,u.u),this.h=u.h,Qd(this,og(u.i)),this.m=u.m):u&&(p=String(u).match(Wd))?(this.l=!1,ls(this,p[1]||"",!0),this.o=Ma(p[2]||""),this.g=Ma(p[3]||"",!0),Da(this,p[4]),this.h=Ma(p[5]||"",!0),Qd(this,p[6]||"",!0),this.m=Ma(p[7]||"")):(this.l=!1,this.i=new Rr(null,this.l))}yr.prototype.toString=function(){let u=[];var p=this.j;p&&u.push(nr(p,xa,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(nr(p,xa,!0),"@"),u.push(Ia(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(nr(_,_.charAt(0)=="/"?tg:sl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",nr(_,al)),u.join("")},yr.prototype.resolve=function(u){let p=tr(this),_=!!u.j;_?ls(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var R=u.h;if(_)Da(p,u.u);else if(_=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var N=p.h.lastIndexOf("/");N!=-1&&(R=p.h.slice(0,N+1)+R)}if(N=R,N==".."||N==".")R="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){R=N.lastIndexOf("/",0)==0,N=N.split("/");let U=[];for(let Q=0;Q<N.length;){let we=N[Q++];we=="."?R&&Q==N.length&&U.push(""):we==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),R&&Q==N.length&&U.push("")):(U.push(we),R=!0)}R=U.join("/")}else R=N}return _?p.h=R:_=u.i.toString()!=="",_?Qd(p,og(u.i)):_=!!u.m,_&&(p.m=u.m),p};function tr(u){return new yr(u)}function ls(u,p,_){u.j=_?Ma(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Da(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Qd(u,p,_){p instanceof Rr?(u.i=p,Ra(u.i,u.l)):(_||(p=nr(p,ft)),u.i=new Rr(p,u.l))}function lt(u,p,_){u.i.set(p,_)}function Aa(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ma(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nr(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,xr),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xa=/[#\/\?@]/g,sl=/[#\?:]/g,tg=/[#\?]/g,ft=/[#\?@]/g,al=/#/g;function Rr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&Kd(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Rr.prototype,n.add=function(u,p){rr(this),this.i=null,u=us(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function ng(u,p){rr(u),p=us(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Yd(u,p){return rr(u),p=us(u,p),u.g.has(p)}n.forEach=function(u,p){rr(this),this.g.forEach(function(_,R){_.forEach(function(N){u.call(p,N,R,this)},this)},this)};function rg(u,p){rr(u);let _=[];if(typeof p=="string")Yd(u,p)&&(_=_.concat(u.g.get(us(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}n.set=function(u,p){return rr(this),this.i=null,u=us(this,u),Yd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=rg(this,u),u.length>0?String(u[0]):p):p};function ig(u,p,_){ng(u,p),_.length>0&&(u.i=null,u.g.set(us(u,p),S(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(let R=0;R<p.length;R++){var _=p[R];let N=Ia(_);_=rg(this,_);for(let U=0;U<_.length;U++){let Q=N;_[U]!==""&&(Q+="="+Ia(_[U])),u.push(Q)}}return this.i=u.join("&")};function og(u){let p=new Rr;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function us(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Ra(u,p){p&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(_,R){let N=R.toLowerCase();R!=N&&(ng(this,R),ig(this,N,_))},u)),u.j=p}function hi(u,p){let _=new ts;if(s.Image){let R=new Image;R.onload=h(Pr,_,"TestLoadImage: loaded",!0,p,R),R.onerror=h(Pr,_,"TestLoadImage: error",!1,p,R),R.onabort=h(Pr,_,"TestLoadImage: abort",!1,p,R),R.ontimeout=h(Pr,_,"TestLoadImage: timeout",!1,p,R),s.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else p(!1)}function sg(u,p){let _=new ts,R=new AbortController,N=setTimeout(()=>{R.abort(),Pr(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:R.signal}).then(U=>{clearTimeout(N),U.ok?Pr(_,"TestPingServer: ok",!0,p):Pr(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Pr(_,"TestPingServer: error",!1,p)})}function Pr(u,p,_,R,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),R(_)}catch{}}function ag(){this.g=new Wp}function kr(u){this.i=u.Sb||null,this.h=u.ab||!1}g(kr,Kp),kr.prototype.g=function(){return new cl(this.i,this.h)};function cl(u,p){Wt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(cl,Wt),n=cl.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Fn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||s).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function cg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Pa(this):Fn(this),this.readyState==3&&cg(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Pa(this))},n.Na=function(u){this.g&&(this.response=u,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}n.setRequestHeader=function(u,p){this.A.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lg(u){let p="";return Ko(u,function(_,R){p+=R,p+=":",p+=_,p+=`\r
`}),p}function Jd(u,p,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=lg(_),typeof u=="string"?_!=null&&Ia(_):lt(u,p,_))}function ut(u){Wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ut,Wt);var ll=/^https?$/i,ug=["POST","PUT"];n=ut.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,p,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rs.g(),this.g.onreadystatechange=C(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){ds(this,U);return}if(u=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var N in R)_.set(N,R[N]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(let U of R.keys())_.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),N=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(ug,p,void 0)>=0)||R||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Q]of _)this.g.setRequestHeader(U,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){ds(this,U)}};function ds(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,hs(u),fs(u)}function hs(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Kt(this,"complete"),Kt(this,"abort"),fs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zd(this):this.Xa())},n.Xa=function(){Zd(this)};function Zd(u){if(u.h&&typeof o<"u"){if(u.v&&tt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Kt(u,"readystatechange"),tt(u)==4){u.h=!1;try{let U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var R;if(R=U===0){let Q=String(u.D).match(Wd)[1]||null;!Q&&s.self&&s.self.location&&(Q=s.self.location.protocol.slice(0,-1)),R=!ll.test(Q?Q.toLowerCase():"")}_=R}if(_)Kt(u,"complete"),Kt(u,"success");else{u.o=6;try{var N=tt(u)>2?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.ca()+"]",hs(u)}}finally{fs(u)}}}}function fs(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let _=u.g;u.g=null,p||Kt(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function tt(u){return u.g?u.g.readyState:0}n.ca=function(){try{return tt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Gp(p)}};function dg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vw(u){let p={};u=(u.g&&tt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(E(u[R]))continue;var _=is(u[R]);let N=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let U=p[N]||[];p[N]=U,U.push(_)}zp(p,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Xd(u){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ps("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ps("baseRetryDelayMs",5e3,u),this.Za=ps("retryDelaySeedMs",1e4,u),this.Ta=ps("forwardChannelMaxRetries",2,u),this.va=ps("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(u&&u.concurrentRequestLimit),this.Ba=new ag,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xd.prototype,n.ka=8,n.I=1,n.connect=function(u,p,_,R){Yt(0),this.W=u,this.H=p||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=pl(this,null,this.W),Vn(this)};function ul(u){if(eh(u),u.I==3){var p=u.V++,_=tr(u.J);if(lt(_,"SID",u.M),lt(_,"RID",p),lt(_,"TYPE","terminate"),Or(u,_),p=new li(u,u.j,p),p.M=2,p.A=Aa(tr(_)),_=!1,s.navigator&&s.navigator.sendBeacon)try{_=s.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&s.Image&&(new Image().src=p.A,_=!0),_||(p.g=gl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),os(p)}rh(u)}function eo(u){u.g&&(hl(u),u.g.cancel(),u.g=null)}function eh(u){eo(u),u.v&&(s.clearTimeout(u.v),u.v=null),fl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function Vn(u){if(!cs(u.h)&&!u.m){u.m=!0;var p=u.Ea;qe||w(),ge||(qe(),ge=!0),M.add(p,u),u.D=0}}function hg(u,p){return di(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=er(d(u.Ea,u,p),ms(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let N=new li(this,this.j,u),U=this.o;if(this.U&&(U?(U=$p(U),Gt(U,this.U)):U=this.U),this.u!==null||this.R||(N.J=U,U=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=th(this,N,p),_=tr(this.J),lt(_,"RID",u),lt(_,"CVER",22),this.G&&lt(_,"X-HTTP-Session-Id",this.G),Or(this,_),U&&(this.R?p="headers="+Ia(lg(U))+"&"+p:this.u&&Jd(_,this.u,U)),qd(this.h,N),this.Ra&&lt(_,"TYPE","init"),this.S?(lt(_,"$req",p),lt(_,"SID","null"),N.U=!0,Ta(N,_,null)):Ta(N,_,p),this.I=2}}else this.I==3&&(u?fg(this,u):this.i.length==0||cs(this.h)||fg(this))};function fg(u,p){var _;p?_=p.l:_=u.V++;let R=tr(u.J);lt(R,"SID",u.M),lt(R,"RID",_),lt(R,"AID",u.K),Or(u,R),u.u&&u.o&&Jd(R,u.u,u.o),_=new li(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=th(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),qd(u.h,_),Ta(_,R,p)}function Or(u,p){u.H&&Ko(u.H,function(_,R){lt(p,R,_)}),u.l&&Ko({},function(_,R){lt(p,R,_)})}function th(u,p,_){_=Math.min(u.i.length,_);let R=u.l?d(u.l.Ka,u.l,u):null;e:{var N=u.i;let we=-1;for(;;){let l=["count="+_];we==-1?_>0?(we=N[0].g,l.push("ofs="+we)):we=0:l.push("ofs="+we);let f=!0;for(let m=0;m<_;m++){var U=N[m].g;let x=N[m].map;if(U-=we,U<0)we=Math.max(0,N[m].g-100),f=!1;else try{U="req"+U+"_"||"";try{var Q=x instanceof Map?x:Object.entries(x);for(let[L,B]of Q){let W=B;a(B)&&(W=Qo(B)),l.push(U+L+"="+encodeURIComponent(W))}}catch(L){throw l.push(U+"type="+encodeURIComponent("_badmap")),L}}catch{R&&R(x)}}if(f){Q=l.join("&");break e}}Q=void 0}return u=u.i.splice(0,_),p.G=u,Q}function dl(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;qe||w(),ge||(qe(),ge=!0),M.add(p,u),u.A=0}}function gs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=er(d(u.Da,u),ms(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ka(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=er(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),eo(this),ka(this))};function hl(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function ka(u){u.g=new li(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=tr(u.na);lt(p,"RID","rpc"),lt(p,"SID",u.M),lt(p,"AID",u.K),lt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(p,"TO",u.ia),lt(p,"TYPE","xmlhttp"),Or(u,p),u.u&&u.o&&Jd(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Aa(tr(p)),_.u=null,_.R=!0,Ca(_,u)}n.Va=function(){this.C!=null&&(this.C=null,eo(this),gs(this),Yt(19))};function fl(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function nh(u,p){var _=null;if(u.g==p){fl(u),hl(u),u.g=null;var R=2}else if(Sa(u.h,p))_=p.G,Hd(u.h,p),R=1;else return;if(u.I!=0){if(p.o)if(R==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var N=u.D;R=Zo(),Kt(R,new el(R,_)),Vn(u)}else dl(u);else if(N=p.m,N==3||N==0&&p.X>0||!(R==1&&hg(u,p)||R==2&&gs(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),N){case 1:fi(u,5);break;case 4:fi(u,10);break;case 3:fi(u,6);break;default:fi(u,2)}}}function ms(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function fi(u,p){if(u.j.info("Error code "+p),p==2){var _=d(u.bb,u),R=u.Ua;let N=!R;R=new yr(R||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||ls(R,"https"),Aa(R),N?hi(R.toString(),_):sg(R.toString(),_)}else Yt(2);u.I=0,u.l&&u.l.pa(p),rh(u),eh(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function rh(u){if(u.I=0,u.ja=[],u.l){let p=Gd(u.h);(p.length!=0||u.i.length!=0)&&(k(u.ja,p),k(u.ja,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.oa()}}function pl(u,p,_){var R=_ instanceof yr?tr(_):new yr(_);if(R.g!="")p&&(R.g=p+"."+R.g),Da(R,R.u);else{var N=s.location;R=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let U=new yr(null);R&&ls(U,R),p&&(U.g=p),N&&Da(U,N),_&&(U.h=_),R=U}return _=u.G,p=u.wa,_&&p&&lt(R,_,p),lt(R,"VER",u.ka),Or(u,R),R}function gl(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ut(new kr({ab:_})):new ut(u.ma),p.Fa(u.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ih(){}n=ih.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function to(){}to.prototype.g=function(u,p){return new vn(u,p)};function vn(u,p){Wt.call(this),this.g=new Xd(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new no(this)}g(vn,Wt),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){ul(this.g)},vn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Qo(u),u=_);p.i.push(new eg(p.Ya++,u)),p.I==3&&Vn(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,vn.Z.N.call(this)};function oh(u){Xc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}g(oh,Xc);function pi(){wa.call(this),this.status=1}g(pi,wa);function no(u){this.g=u}g(no,ih),no.prototype.ra=function(){Kt(this.g,"a")},no.prototype.qa=function(u){Kt(this.g,new oh(u))},no.prototype.pa=function(u){Kt(this.g,new pi)},no.prototype.oa=function(){Kt(this.g,"b")},to.prototype.createWebChannel=to.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,tS=ko.createWebChannelTransport=function(){return new to},eS=ko.getStatEventTarget=function(){return Zo()},XC=ko.Event=Zi,sv=ko.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Af=ko.ErrorCode=Ea,ns.COMPLETE="complete",ZC=ko.EventType=ns,Yo.EventType=Jo,Jo.OPEN="a",Jo.CLOSE="b",Jo.ERROR="c",Jo.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,xu=ko.WebChannel=Yo,PZ=ko.FetchXmlHttpFactory=kr,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,JC=ko.XhrIo=ut}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var HV="@firebase/firestore",GV="4.9.2";var Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");var td="12.3.0";var Sc=new Ws("@firebase/firestore");function Ru(){return Sc.logLevel}function oe(n,...e){if(Sc.logLevel<=Ue.DEBUG){let t=e.map(BD);Sc.debug(`Firestore (${td}): ${n}`,...t)}}function Lo(n,...e){if(Sc.logLevel<=Ue.ERROR){let t=e.map(BD);Sc.error(`Firestore (${td}): ${n}`,...t)}}function Nf(n,...e){if(Sc.logLevel<=Ue.WARN){let t=e.map(BD);Sc.warn(`Firestore (${td}): ${n}`,...t)}}function BD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,O2(n,r,t)}function O2(n,e,t){let r=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Lo(r),new Error(r)}function St(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||O2(e,i,r)}function Ke(n,e){return n}var X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pe=class extends Cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xs=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var lS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dn.UNAUTHENTICATED))}shutdown(){}};var dS=class{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xs,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>T(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xs)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new lS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}},hS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new hS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,So(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){St(this.o===void 0,3512);let r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function kZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var fv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=kZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function He(n,e){return n<e?-1:n>e?1:0}function gS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return nS(i)===nS(o)?He(i,o):nS(i)?1:-1}return He(n.length,e.length)}var OZ=55296,NZ=57343;function nS(n){let e=n.charCodeAt(0);return e>=OZ&&e<=NZ}function $u(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var WV="__name__",pv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return He(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):gS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}},rn=class n extends pv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new pe(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=class n extends pv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WV}static keyField(){return new n([WV])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new pe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(rn.fromString(e))}static fromName(e){return new n(rn.fromString(e).popFirst(5))}static empty(){return new n(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new rn(e.slice()))}};function FZ(n,e,t,r){if(e===!0&&r===!0)throw new pe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function UZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function rS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=UZ(n);throw new pe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qf(n,e){if(!VZ(n))throw new pe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new pe(X.INVALID_ARGUMENT,t);return!0}var KV=-62135596800,QV=1e6,Nn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KV)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QV}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-KV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:zt("string",Nn._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Nn(0,0))}static max(){return new n(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lf=-1,mS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};mS.UNKNOWN_ID=-1;function BZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Nn(t+1,0):new Nn(t,r));return new Dc(i,Ee.empty(),e)}function jZ(n){return new Dc(n.readTime,n.key,Lf)}var Dc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),Ee.empty(),Lf)}static max(){return new n(ke.max(),Ee.empty(),Lf)}};function zZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}var $Z="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bv(n){return T(this,null,function*(){if(n.code!==X.FAILED_PRECONDITION||n.message!==$Z)throw n;oe("LocalStore","Unexpectedly lost primary lease")})}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(h=>{s[d]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function qZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nd(n){return n.name==="IndexedDbTransactionError"}var jD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),HZ=-1;function jv(n){return n==null}function gv(n){return n===0&&1/n==-1/0}var N2="";function GZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YV(e)),e=WZ(n.get(t),e);return YV(e)}function WZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case N2:t+="";break;default:t+=o}}return t}function YV(n){return n+N2+""}var KZ="remoteDocuments",L2="owner";var F2="mutationQueues";var V2="mutations";var U2="documentMutations",QZ="remoteDocumentsV14";var B2="remoteDocumentGlobal";var j2="targets";var z2="targetDocuments";var $2="targetGlobal",q2="collectionParents";var H2="clientMetadata";var G2="bundles";var W2="namedQueries";var YZ="indexConfiguration";var JZ="indexState";var ZZ="indexEntries";var K2="documentOverlays";var XZ="globals";var eX=[F2,V2,U2,KZ,j2,L2,$2,z2,H2,B2,q2,G2,W2],eEe=[...eX,K2],tX=[F2,V2,U2,QZ,j2,L2,$2,z2,H2,B2,q2,G2,W2,K2],nX=tX,rX=[...nX,YZ,JZ,ZZ];var tEe=[...rX,XZ];function JV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iX(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ft=class n{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nu(this.root,e,this.comparator,!0)}},Nu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Li=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}};Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1;Li.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dn=class n{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(e){return new mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},mv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ec=class n{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new n([])}unionWith(e){let t=new dn(ni.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var yv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var An=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yv("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};An.EMPTY_BYTE_STRING=new An("");var oX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(St(!!n,39018),typeof n=="string"){let e=0,t=oX.exec(n);if(St(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vo(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}var Q2="server_timestamp",Y2="__type__",J2="__previous_value__",Z2="__local_write_time__";function zD(n){return(n?.mapValue?.fields||{})[Y2]?.stringValue===Q2}function zv(n){let e=n.mapValue.fields[J2];return zD(e)?zv(e):e}function Ff(n){let e=Fo(n.mapValue.fields[Z2].timestampValue);return new Nn(e.seconds,e.nanos)}var _S=class{constructor(e,t,r,i,o,s,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},vS="(default)",_v=class n{constructor(e,t){this.projectId=e,this.database=t||vS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===vS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var X2="__type__",eU="__max__",av={mapValue:{fields:{__type__:{stringValue:eU}}}},tU="__vector__",Vf="value";function ea(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zD(n)?4:rU(n)?9007199254740991:nU(n)?10:11:De(28295,{value:n})}function Vi(n,e){if(n===e)return!0;let t=ea(n);if(t!==ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ff(n).isEqual(Ff(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fo(i.timestampValue),a=Fo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Vo(i.bytesValue).isEqual(Vo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Tt(i.doubleValue),a=Tt(o.doubleValue);return s===a?gv(s)===gv(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(JV(s)!==JV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Vi(s[c],a[c])))return!1;return!0}(n,e);default:return De(52216,{left:n})}}function Uf(n,e){return(n.values||[]).find(t=>Vi(t,e))!==void 0}function qu(n,e){if(n===e)return 0;let t=ea(n),r=ea(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Tt(o.integerValue||o.doubleValue),c=Tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ZV(n.timestampValue,e.timestampValue);case 4:return ZV(Ff(n),Ff(e));case 5:return gS(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Vo(o),c=Vo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=He(a[d],c[d]);if(h!==0)return h}return He(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=He(Tt(o.latitude),Tt(s.latitude));return a!==0?a:He(Tt(o.longitude),Tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return XV(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},c=s.fields||{},d=a[Vf]?.arrayValue,h=c[Vf]?.arrayValue,g=He(d?.values?.length||0,h?.values?.length||0);return g!==0?g:XV(d,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===av.mapValue&&s===av.mapValue)return 0;if(o===av.mapValue)return 1;if(s===av.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let C=gS(c[g],h[g]);if(C!==0)return C;let S=qu(a[c[g]],d[h[g]]);if(S!==0)return S}return He(c.length,h.length)}(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function ZV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);let t=Fo(n),r=Fo(e),i=He(t.seconds,r.seconds);return i!==0?i:He(t.nanos,r.nanos)}function XV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=qu(t[i],r[i]);if(o)return o}return He(t.length,r.length)}function Hu(n){return wS(n)}function wS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=wS(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wS(t.fields[s])}`;return i+"}"}(n.mapValue):De(61005,{value:n})}function uv(n){switch(ea(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=zv(n);return e?16+uv(e):16;case 5:return 2*n.stringValue.length;case 6:return Vo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+uv(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Yf(r.fields,(o,s)=>{i+=o.length+uv(s)}),i}(n.mapValue);default:throw De(13486,{value:n})}}function ES(n){return!!n&&"integerValue"in n}function $D(n){return!!n&&"arrayValue"in n}function e2(n){return!!n&&"nullValue"in n}function t2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function iS(n){return!!n&&"mapValue"in n}function nU(n){return(n?.mapValue?.fields||{})[X2]?.stringValue===tU}function xf(n){if(n.geoPointValue)return{geoPointValue:j({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:j({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Yf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xf(n.arrayValue.values[t]);return e}return j({},n)}function rU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eU}var rEe={mapValue:{fields:{[X2]:{stringValue:tU},[Vf]:{arrayValue:{}}}}};var Oo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!iS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=xf(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());iS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];iS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yf(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(xf(this.value))}};var ri=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),Oo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),Oo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),Oo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gu=class{constructor(e,t){this.position=e,this.inclusive=t}};function n2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(s.referenceValue),t.key):r=qu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function r2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}var Wu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vv=class{},on=class n extends vv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bS(e,t,r):t==="array-contains"?new SS(e,r):t==="in"?new DS(e,r):t==="not-in"?new AS(e,r):t==="array-contains-any"?new MS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TS(e,r):new CS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qu(t,this.value)):t!==null&&ea(this.value)===ea(t)&&this.matchesComparison(qu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ui=class n extends vv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return iU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function iU(n){return n.op==="and"}function oU(n){return aX(n)&&iU(n)}function aX(n){for(let e of n.filters)if(e instanceof Ui)return!1;return!0}function IS(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+Hu(n.value);if(oU(n))return n.filters.map(e=>IS(e)).join(",");{let e=n.filters.map(t=>IS(t)).join(",");return`${n.op}(${e})`}}function sU(n,e){return n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.field.isEqual(i.field)&&Vi(r.value,i.value)}(n,e):n instanceof Ui?function(r,i){return i instanceof Ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&sU(s,i.filters[a]),!0):!1}(n,e):void De(19439)}function aU(n){return n instanceof on?function(t){return`${t.field.canonicalString()} ${t.op} ${Hu(t.value)}`}(n):n instanceof Ui?function(t){return t.op.toString()+" {"+t.getFilters().map(aU).join(" ,")+"}"}(n):"Filter"}var bS=class extends on{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){let t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}},TS=class extends on{constructor(e,t){super(e,"in",t),this.keys=cU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},CS=class extends on{constructor(e,t){super(e,"not-in",t),this.keys=cU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function cU(n,e){return(e.arrayValue?.values||[]).map(t=>Ee.fromName(t.referenceValue))}var SS=class extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $D(t)&&Uf(t.arrayValue,this.value)}},DS=class extends on{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Uf(this.value.arrayValue,t)}},AS=class extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uf(this.value.arrayValue,t)}},MS=class extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$D(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uf(this.value.arrayValue,r))}};var xS=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function i2(n,e=null,t=[],r=[],i=null,o=null,s=null){return new xS(n,e,t,r,i,o,s)}function qD(n){let e=Ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hu(r)).join(",")),e.Te=t}return e.Te}function HD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!r2(n.startAt,e.startAt)&&r2(n.endAt,e.endAt)}function RS(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ku=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function cX(n,e,t,r,i,o,s,a){return new Ku(n,e,t,r,i,o,s,a)}function GD(n){return new Ku(n)}function o2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lX(n){return n.collectionGroup!==null}function Rf(n){let e=Ke(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new dn(ni.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Wu(o,r))}),t.has(ni.keyField().canonicalString())||e.Ie.push(new Wu(ni.keyField(),r))}return e.Ie}function Fi(n){let e=Ke(n);return e.Ee||(e.Ee=uX(e,Rf(n))),e.Ee}function uX(n,e){if(n.limitType==="F")return i2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wu(i.field,o)});let t=n.endAt?new Gu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gu(n.startAt.position,n.startAt.inclusive):null;return i2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function PS(n,e,t){return new Ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $v(n,e){return HD(Fi(n),Fi(e))&&n.limitType===e.limitType}function lU(n){return`${qD(Fi(n))}|lt:${n.limitType}`}function Pu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>aU(i)).join(", ")}]`),jv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hu(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function qv(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Rf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let d=n2(s,a,c);return s.inclusive?d<=0:d<0}(r.startAt,Rf(r),i)||r.endAt&&!function(s,a,c){let d=n2(s,a,c);return s.inclusive?d>=0:d>0}(r.endAt,Rf(r),i))}(n,e)}function dX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uU(n){return(e,t)=>{let r=!1;for(let i of Rf(n)){let o=hX(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hX(n,e,t){let r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?qu(c,d):De(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}var Uo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yf(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iX(this.inner)}size(){return this.innerSize}};var fX=new Ft(Ee.comparator);function ta(){return fX}var dU=new Ft(Ee.comparator);function Mf(...n){let e=dU;for(let t of n)e=e.insert(t.key,t);return e}function pX(n){let e=dU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ic(){return Pf()}function hU(){return Pf()}function Pf(){return new Uo(n=>n.toString(),(n,e)=>n.isEqual(e))}var iEe=new Ft(Ee.comparator),gX=new dn(Ee.comparator);function Ye(...n){let e=gX;for(let t of n)e=e.add(t);return e}var mX=new dn(He);function yX(){return mX}function _X(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gv(e)?"-0":e}}function vX(n){return{integerValue:""+n}}var Qu=class{constructor(){this._=void 0}};function wX(n,e,t){return n instanceof Bf?function(i,o){let s={fields:{[Y2]:{stringValue:Q2},[Z2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zD(o)&&(o=zv(o)),o&&(s.fields[J2]=o),{mapValue:s}}(t,e):n instanceof Yu?fU(n,e):n instanceof Ju?pU(n,e):function(i,o){let s=IX(i,o),a=s2(s)+s2(i.Ae);return ES(s)&&ES(i.Ae)?vX(a):_X(i.serializer,a)}(n,e)}function EX(n,e,t){return n instanceof Yu?fU(n,e):n instanceof Ju?pU(n,e):t}function IX(n,e){return n instanceof jf?function(r){return ES(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Bf=class extends Qu{},Yu=class extends Qu{constructor(e){super(),this.elements=e}};function fU(n,e){let t=gU(e);for(let r of n.elements)t.some(i=>Vi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ju=class extends Qu{constructor(e){super(),this.elements=e}};function pU(n,e){let t=gU(e);for(let r of n.elements)t=t.filter(i=>!Vi(i,r));return{arrayValue:{values:t}}}var jf=class extends Qu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function s2(n){return Tt(n.integerValue||n.doubleValue)}function gU(n){return $D(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bX(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Yu&&i instanceof Yu||r instanceof Ju&&i instanceof Ju?$u(r.elements,i.elements,Vi):r instanceof jf&&i instanceof jf?Vi(r.Ae,i.Ae):r instanceof Bf&&i instanceof Bf}(n.transform,e.transform)}var kf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zf=class{};function mU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kS(n.key,kf.none()):new $f(n.key,n.data,kf.none());{let t=n.data,r=Oo.empty(),i=new dn(ni.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Zu(n.key,r,new Ec(i.toArray()),kf.none())}}function TX(n,e,t){n instanceof $f?function(i,o,s){let a=i.value.clone(),c=c2(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Zu?function(i,o,s){if(!dv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=c2(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(yU(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Of(n,e,t,r){return n instanceof $f?function(o,s,a,c){if(!dv(o.precondition,s))return a;let d=o.value.clone(),h=l2(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zu?function(o,s,a,c){if(!dv(o.precondition,s))return a;let d=l2(o.fieldTransforms,c,s),h=s.data;return h.setAll(yU(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return dv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function a2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$u(r,i,(o,s)=>bX(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $f=class extends zf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zu=class extends zf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function yU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function c2(n,e,t){let r=new Map;St(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,EX(s,a,t[i]))}return r}function l2(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,wX(o,s,e))}return r}var kS=class extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var OS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&TX(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Of(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Of(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hU();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=mU(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,r)=>a2(t,r))&&$u(this.baseMutations,e.baseMutations,(t,r)=>a2(t,r))}};var NS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var LS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Bt,We;function _U(n){if(n===void 0)return Lo("GRPC error has no .code"),X.UNKNOWN;switch(n){case Bt.OK:return X.OK;case Bt.CANCELLED:return X.CANCELLED;case Bt.UNKNOWN:return X.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return X.INTERNAL;case Bt.UNAVAILABLE:return X.UNAVAILABLE;case Bt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Bt.NOT_FOUND:return X.NOT_FOUND;case Bt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Bt.ABORTED:return X.ABORTED;case Bt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Bt.DATA_LOSS:return X.DATA_LOSS;default:return De(39323,{code:n})}}(We=Bt||(Bt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var CX=null;function SX(){return new TextEncoder}var DX=new Po([4294967295,4294967295],0);function u2(n){let e=SX().encode(n),t=new YC;return t.update(e),new Uint8Array(t.digest())}function d2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,o],0)]}var FS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bc(`Invalid padding: ${t}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Po.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare(DX)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=u2(e),[r,i]=d2(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=u2(e),[r,i]=d2(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},bc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,qf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new Ft(He),ta(),Ye())}},qf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ye(),Ye(),Ye())}};var Lu=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Ev=class{constructor(e,t){this.targetId=e,this.Ce=t}},Iv=class{constructor(e,t,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bv=class{constructor(){this.ve=0,this.Fe=h2(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:o})}}),new qf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=h2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},VS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ta(),this.Je=cv(),this.He=cv(),this.Ye=new Ft(He)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(RS(o))if(r===0){let s=new Ee(o.path);this.et(t,s,ri.newNoDocument(s,ke.min()))}else St(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}CX?.lt(function(h,g,C,S,k){let V={localCacheCount:h,existenceFilterCount:g.count,databaseId:C.database,projectId:C.projectId},O=g.unchangedNames;return O&&(V.bloomFilter={applied:k===0,hashCount:O?.hashCount??0,bitmapLength:O?.bits?.bitmap?.length??0,padding:O?.bits?.padding??0,mightContain:H=>S?.mightContain(H)??!1}),V}(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Vo(r).toUint8Array()}catch(c){if(c instanceof yv)return Nf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new FS(s,i,o)}catch(c){return Nf(c instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&RS(a.target)){let c=new Ee(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,ri.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=Ye();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new wv(e,t,this.Ye,this.je,r);return this.je=ta(),this.Je=cv(),this.He=cv(),this.Ye=new Ft(He),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dn(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dn(He),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function cv(){return new Ft(Ee.comparator)}function h2(){return new Ft(Ee.comparator)}var AX={asc:"ASCENDING",desc:"DESCENDING"},MX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xX={and:"AND",or:"OR"},US=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function BS(n,e){return n.useProto3Json||jv(e)?e:{value:e}}function RX(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PX(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fu(n){return St(!!n,49232),ke.fromTimestamp(function(t){let r=Fo(t);return new Nn(r.seconds,r.nanos)}(n))}function kX(n,e){return jS(n,e).canonicalString()}function jS(n,e){let t=function(i){return new rn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vU(n){let e=rn.fromString(n);return St(TU(e),10190,{key:e.toString()}),e}function oS(n,e){let t=vU(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(EU(t))}function wU(n,e){return kX(n.databaseId,e)}function OX(n){let e=vU(n);return e.length===4?rn.emptyPath():EU(e)}function f2(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EU(n){return St(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NX(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:De(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(St(h===void 0||typeof h=="string",58123),An.fromBase64String(h||"")):(St(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),An.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let h=d.code===void 0?X.UNKNOWN:_U(d.code);return new pe(h,d.message||"")}(s);t=new Iv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=oS(n,r.document.name),o=Fu(r.document.updateTime),s=r.document.createTime?Fu(r.document.createTime):ke.min(),a=new Oo({mapValue:{fields:r.document.fields}}),c=ri.newFoundDocument(i,o,s,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Lu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=oS(n,r.document),o=r.readTime?Fu(r.readTime):ke.min(),s=ri.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Lu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=oS(n,r.document),o=r.removedTargetIds||[];t=new Lu([],o,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new LS(i,o),a=r.targetId;t=new Ev(a,s)}}return t}function LX(n,e){return{documents:[wU(n,e.path)]}}function FX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wU(n,i);let o=function(d){if(d.length!==0)return bU(Ui.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(h=>function(C){return{field:ku(C.field),direction:BX(C.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=BS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function VX(n){let e=OX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){St(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let C=IU(g);return C instanceof Ui&&oU(C)?C.getFilters():[C]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(C=>function(k){return new Wu(Ou(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(C))}(t.orderBy));let a=null;t.limit&&(a=function(g){let C;return C=typeof g=="object"?g.value:g,jv(C)?null:C}(t.limit));let c=null;t.startAt&&(c=function(g){let C=!!g.before,S=g.values||[];return new Gu(S,C)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let C=!g.before,S=g.values||[];return new Gu(S,C)}(t.endAt)),cX(e,i,s,o,a,"F",c,d)}function UX(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IU(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ou(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ou(t.unaryFilter.field);return on.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ou(t.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ou(t.unaryFilter.field);return on.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(n):n.fieldFilter!==void 0?function(t){return on.create(Ou(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ui.create(t.compositeFilter.filters.map(r=>IU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(t.compositeFilter.op))}(n):De(30097,{filter:n})}function BX(n){return AX[n]}function jX(n){return MX[n]}function zX(n){return xX[n]}function ku(n){return{fieldPath:n.canonicalString()}}function Ou(n){return ni.fromServerFormat(n.fieldPath)}function bU(n){return n instanceof on?function(t){if(t.op==="=="){if(t2(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NAN"}};if(e2(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t2(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NAN"}};if(e2(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(t.field),op:jX(t.op),value:t.value}}}(n):n instanceof Ui?function(t){let r=t.getFilters().map(i=>bU(i));return r.length===1?r[0]:{compositeFilter:{op:zX(t.op),filters:r}}}(n):De(54877,{filter:n})}function TU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hf=class n{constructor(e,t,r,i,o=ke.min(),s=ke.min(),a=An.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zS=class{constructor(e){this.yt=e}};function $X(n){let e=VX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?PS(e,e.limit,"L"):e}var Tv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),gv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Fo(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Vo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?rU(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):nU(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):De(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Vf,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Tt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Tv.Kt=new Tv;var $S=class{constructor(){this.Cn=new qS}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Dc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Dc.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},qS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dn(rn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dn(rn.comparator)).toArray()}};var oEe=new Uint8Array(0);var p2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CU=41943040,Dr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(CU,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);var Gf=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var g2="LruGarbageCollector",qX=1048576;function m2([n,e],[t,r]){let i=He(n,t);return i===0?He(e,r):i}var HS=class{constructor(e){this.Ir=e,this.buffer=new dn(m2),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();m2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},GS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(g2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){nd(t)?oe(g2,"Ignoring IndexedDB error during garbage collection: ",t):yield Bv(t)}yield this.Vr(3e5)}))}},WS=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(jD.ce);let r=new HS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(p2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p2):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ru()<=Ue.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function HX(n,e){return new WS(n,e)}var KS=class{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var QS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var YS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Of(r.mutation,i,Ec.empty(),Nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){let i=Ic();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Mf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ic();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ta(),s=Pf(),a=function(){return Pf()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Zu)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Of(h.mutation,d,h.mutation.getFieldMask(),Nn.now())):s.set(d.key,Ec.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>a.set(d,new QS(h,s.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Pf(),i=new Ft((s,a)=>s-a),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Ec.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Ye()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=hU();h.forEach(C=>{if(!o.has(C)){let S=mU(t.get(C),r.get(C));S!==null&&g.set(C,S),o=o.add(C)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lX(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(Ic()),a=Lf,c=o;return s.next(d=>G.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(C=>{c=c.insert(h,C)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Ye())).next(h=>({batchId:a,changes:pX(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let i=Mf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Mf();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,c=>{let d=function(g,C){return new Ku(C,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,C)=>{s=s.insert(g,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,ri.newInvalidDocument(h)))});let a=Mf();return s.forEach((c,d)=>{let h=o.get(c);h!==void 0&&Of(h.mutation,d,Ec.empty(),Nn.now()),qv(t,d)&&(a=a.insert(c,d))}),a})}};var JS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Fu(i.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:$X(i.bundledQuery),readTime:Fu(i.readTime)}}(t)),G.resolve()}};var ZS=class{constructor(){this.overlays=new Ft(Ee.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ic();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Ic(),o=t.length+1,s=new Ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ft((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Ic(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Ic(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new NS(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var XS=class{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Wf=class{constructor(){this.Qr=new dn(jt.$r),this.Ur=new dn(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new jt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Ee(new rn([])),r=new jt(t,e),i=new jt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ee(new rn([])),r=new jt(t,e),i=new jt(t,e+1),o=Ye();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new jt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},jt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}};var eD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dn(jt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new OS(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new jt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?HZ:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new jt(t,0),i=new jt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(He);return t.forEach(i=>{let o=new jt(i,0),s=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Ee.isDocumentKey(o)||(o=o.child(""));let s=new jt(new Ee(o),0),a=new dn(He);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},s),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){St(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let o=new jt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new jt(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var tD=class{constructor(e){this.ri=e,this.docs=function(){return new Ft(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=ta();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ri.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ta(),s=t.path,a=new Ee(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||zZ(jZ(h),r)<=0||(i.has(h.key)||qv(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nD(this)}getSize(e){return G.resolve(this.size)}},nD=class extends KS{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var rD=class{constructor(e){this.persistence=e,this.si=new Uo(t=>qD(t),HD),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Wf,this.targetCount=0,this.ai=Gf.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Gf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var Cv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new jD(0),this.li=!1,this.li=!0,this.hi=new XS,this.referenceDelegate=e(this),this.Pi=new rD(this),this.indexManager=new $S,this.remoteDocumentCache=function(i){return new tD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new zS(t),this.Ii=new JS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new iD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},iD=class extends yS{constructor(e){super(),this.currentSequenceNumber=e}},oD=class n{constructor(e){this.persistence=e,this.Ri=new Wf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=Ee.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Sv=class n{constructor(e,t){this.persistence=e,this.pi=new Uo(r=>GZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=HX(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uv(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var sD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ye(),i=Ye();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var aD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lF()?8:qZ(fr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new aD;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ru()<=Ue.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Pu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Ru()<=Ue.DEBUG&&oe("QueryEngine","Query:",Pu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ru()<=Ue.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Pu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):G.resolve())}ys(e,t){if(o2(t))return G.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=PS(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ye(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,s,c.readTime)?this.ys(e,PS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return o2(t)||i.isEqual(ke.min())?G.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?G.resolve(null):(Ru()<=Ue.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pu(t)),this.vs(e,s,t,BZ(i,Lf)).next(a=>a))})}Ds(e,t){let r=new dn(uU(e));return t.forEach((i,o)=>{qv(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ru()<=Ue.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Pu(t)),this.ps.getDocumentsMatchingQuery(e,t,Dc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var WD="LocalStore",GX=3e8,lD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ft(He),this.xs=new Uo(o=>qD(o),HD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function WX(n,e,t,r){return new lD(n,e,t,r)}function SU(n,e){return T(this,null,function*(){let t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ye();for(let d of i){s.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of o){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:a}))})})})}function DU(n){let e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function KX(n,e){let t=Ke(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let C=i.get(g);if(!C)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,g)));let S=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(An.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),function(V,O,H){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=GX?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(C,S,h)&&a.push(t.Pi.updateTargetData(o,S))});let c=ta(),d=Ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(QX(o,s,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ke.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.Ms=i,o))}function QX(n,e,t){let r=Ye(),i=Ye();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ta();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe(WD,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:s,qs:i}})}function YX(n,e){let t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Hf(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function uD(n,e,t){return T(this,null,function*(){let r=Ke(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!nd(s))throw s;oe(WD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function y2(n,e,t){let r=Ke(n),i=ke.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){let g=Ke(c),C=g.xs.get(h);return C!==void 0?G.resolve(g.Ms.get(C)):g.Pi.getTargetData(d,h)}(r,s,Fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ke.min(),t?o:Ye())).next(a=>(JX(r,dX(e),a),{documents:a,Qs:o})))}function JX(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Dv=class{constructor(){this.activeTargetIds=yX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dD=class{constructor(){this.Mo=new Dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hD=class{Oo(e){}shutdown(){}};var _2="ConnectivityMonitor",Av=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(_2,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){oe(_2,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lv=null;function fD(){return lv===null?lv=function(){return 268435456+Math.round(2147483648*Math.random())}():lv++,"0x"+lv.toString(16)}var sS="RestConnection",ZX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},pD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===vS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=fD(),a=this.zo(e,t.toUriEncodedString());oe(sS,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:d}=new URL(a),h=gf(d);return this.Jo(e,a,c,r,h).then(g=>(oe(sS,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Nf(sS,`RPC '${e}' ${s} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+td}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=ZX[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var gD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Sn="WebChannelConnection",mD=class extends pD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=fD();return new Promise((a,c)=>{let d=new JC;d.setWithCredentials(!0),d.listenOnce(ZC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Af.NO_ERROR:let g=d.getResponseJson();oe(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case Af.TIMEOUT:oe(Sn,`RPC '${e}' ${s} timed out`),c(new pe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:let C=d.getStatus();if(oe(Sn,`RPC '${e}' ${s} failed with status:`,C,"response text:",d.getResponseText()),C>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let k=S?.error;if(k&&k.status&&k.message){let V=function(H){let re=H.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(re)>=0?re:X.UNKNOWN}(k.status);c(new pe(V,k.message))}else c(new pe(X.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new pe(X.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(Sn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);oe(Sn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=fD(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tS(),a=eS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");oe(Sn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c);this.I_(g);let C=!1,S=!1,k=new gD({Yo:O=>{S?oe(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(C||(oe(Sn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),C=!0),oe(Sn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),V=(O,H,re)=>{O.listen(H,Z=>{try{re(Z)}catch(de){setTimeout(()=>{throw de},0)}})};return V(g,xu.EventType.OPEN,()=>{S||(oe(Sn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),V(g,xu.EventType.CLOSE,()=>{S||(S=!0,oe(Sn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(g))}),V(g,xu.EventType.ERROR,O=>{S||(S=!0,Nf(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),k.a_(new pe(X.UNAVAILABLE,"The operation could not be completed")))}),V(g,xu.EventType.MESSAGE,O=>{if(!S){let H=O.data[0];St(!!H,16349);let re=H,Z=re?.error||re[0]?.error;if(Z){oe(Sn,`RPC '${e}' stream ${i} received error:`,Z);let de=Z.status,qe=function(w){let I=Bt[w];if(I!==void 0)return _U(I)}(de),ge=Z.message;qe===void 0&&(qe=X.INTERNAL,ge="Unknown error status: "+de+" with message "+Z.message),S=!0,k.a_(new pe(qe,ge)),g.close()}else oe(Sn,`RPC '${e}' stream ${i} received:`,H),k.u_(H)}}),V(a,XC.STAT_EVENT,O=>{O.stat===sv.PROXY?oe(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===sv.NOPROXY&&oe(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function aS(){return typeof document<"u"?document:null}function AU(n){return new US(n,!0)}var Mv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var v2="PersistentStream",yD=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return T(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return T(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return T(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Lo(t.toString()),Lo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new pe(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>T(this,null,function*(){this.state=0,this.start()}))}z_(e){return oe(v2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oe(v2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_D=class extends yD{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=NX(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ke.min():s.readTime?Fu(s.readTime):ke.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=f2(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=RS(c)?{documents:LX(o,c)}:{query:FX(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PX(o,s.resumeToken);let d=BS(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(ke.min())>0){a.readTime=RX(o,s.snapshotVersion.toTimestamp());let d=BS(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=UX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=f2(this.serializer),t.removeTarget=e,this.q_(t)}};var vD=class{},wD=class extends vD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,jS(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(X.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,jS(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(X.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},ED=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lo(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Xu="RemoteStore",ID=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>T(this,null,function*(){Zf(this)&&(oe(Xu,"Restarting streams for network reachability change."),yield function(c){return T(this,null,function*(){let d=Ke(c);d.Ea.add(4),yield Jf(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield Hv(d)})}(this))}))}),this.Ra=new ED(r,i)}};function Hv(n){return T(this,null,function*(){if(Zf(n))for(let e of n.da)yield e(!0)})}function Jf(n){return T(this,null,function*(){for(let e of n.da)yield e(!1)})}function MU(n,e){let t=Ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),JD(t)?YD(t):rd(t).O_()&&QD(t,e))}function KD(n,e){let t=Ke(n),r=rd(t);t.Ia.delete(e),r.O_()&&xU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Zf(t)&&t.Ra.set("Unknown"))}function QD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rd(n).Y_(e)}function xU(n,e){n.Va.Ue(e),rd(n).Z_(e)}function YD(n){n.Va=new VS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rd(n).start(),n.Ra.ua()}function JD(n){return Zf(n)&&!rd(n).x_()&&n.Ia.size>0}function Zf(n){return Ke(n).Ea.size===0}function RU(n){n.Va=void 0}function XX(n){return T(this,null,function*(){n.Ra.set("Online")})}function eee(n){return T(this,null,function*(){n.Ia.forEach((e,t)=>{QD(n,e)})})}function tee(n,e){return T(this,null,function*(){RU(n),JD(n)?(n.Ra.ha(e),YD(n)):n.Ra.set("Unknown")})}function nee(n,e,t){return T(this,null,function*(){if(n.Ra.set("Online"),e instanceof Iv&&e.state===2&&e.cause)try{yield function(i,o){return T(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){oe(Xu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield w2(n,r)}else if(e instanceof Lu?n.Va.Ze(e):e instanceof Ev?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{let r=yield DU(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(An.EMPTY_BYTE_STRING,h.snapshotVersion)),xU(o,c);let g=new Hf(h.target,c,d,h.sequenceNumber);QD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){oe(Xu,"Failed to raise snapshot:",r),yield w2(n,r)}})}function w2(n,e,t){return T(this,null,function*(){if(!nd(e))throw e;n.Ea.add(1),yield Jf(n),n.Ra.set("Offline"),t||(t=()=>DU(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){oe(Xu,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Hv(n)}))})}function E2(n,e){return T(this,null,function*(){let t=Ke(n);t.asyncQueue.verifyOperationInProgress(),oe(Xu,"RemoteStore received new credentials");let r=Zf(t);t.Ea.add(3),yield Jf(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Hv(t)})}function ree(n,e){return T(this,null,function*(){let t=Ke(n);e?(t.Ea.delete(2),yield Hv(t)):e||(t.Ea.add(2),yield Jf(t),t.Ra.set("Unknown"))})}function rd(n){return n.ma||(n.ma=function(t,r,i){let o=Ke(t);return o.sa(),new _D(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:XX.bind(null,n),t_:eee.bind(null,n),r_:tee.bind(null,n),H_:nee.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.ma.B_(),JD(n)?YD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),RU(n))}))),n.ma}var bD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function PU(n,e){if(Lo("AsyncQueue",`${e}: ${n}`),nd(n))return new pe(X.UNAVAILABLE,`${e}: ${n}`);throw n}var xv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=Mf(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rv=class{constructor(){this.ga=new Ft(Ee.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ed=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,xv.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var TD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},CD=class{constructor(){this.queries=I2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ke(t),o=i.queries;i.queries=I2(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new pe(X.ABORTED,"Firestore shutting down"))}};function I2(){return new Uo(n=>lU(n),$v)}function iee(n,e){return T(this,null,function*(){let t=Ke(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new TD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=PU(s,`Initialization of query '${Pu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ZD(t)})}function oee(n,e){return T(this,null,function*(){let t=Ke(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function see(n,e){let t=Ke(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&ZD(t)}function aee(n,e,t){let r=Ke(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function ZD(n){n.Ca.forEach(e=>{e.next()})}var SD,b2;(b2=SD||(SD={})).Ma="default",b2.Cache="cache";var DD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==SD.Cache}};var Pv=class{constructor(e){this.key=e}},kv=class{constructor(e){this.key=e}},AD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=uU(e),this.tu=new xv(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Rv,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let C=i.get(h),S=qv(this.query,g)?g:null,k=!!C&&this.mutatedKeys.has(C.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),O=!1;C&&S?C.data.isEqual(S.data)?k!==V&&(r.track({type:3,doc:S}),O=!0):this.su(C,S)||(r.track({type:2,doc:S}),O=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!C&&S?(r.track({type:0,doc:S}),O=!0):C&&!S&&(r.track({type:1,doc:C}),O=!0,(c||d)&&(a=!0)),O&&(S?(s=s.add(S),o=V?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>function(S,k){let V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:O})}};return V(S)-V(k)}(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,s.length!==0||d?{snapshot:new ed(this.query,e.tu,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new kv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Pv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ed.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},XD="SyncEngine",MD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},xD=class{constructor(e){this.key=e,this.hu=!1}},RD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Uo(a=>lU(a),$v),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(Ee.comparator),this.Au=new Map,this.Ru=new Wf,this.Vu={},this.mu=new Map,this.fu=Gf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function cee(n,e,t=!0){return T(this,null,function*(){let r=FU(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield kU(r,e,t,!0),i})}function lee(n,e){return T(this,null,function*(){let t=FU(n);yield kU(t,e,!0,!1)})}function kU(n,e,t,r){return T(this,null,function*(){let i=yield YX(n.localStore,Fi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield uee(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&MU(n.remoteStore,i),a})}function uee(n,e,t,r,i){return T(this,null,function*(){n.pu=(g,C,S)=>function(V,O,H,re){return T(this,null,function*(){let Z=O.view.ru(H);Z.Cs&&(Z=yield y2(V.localStore,O.query,!1).then(({documents:M})=>O.view.ru(M,Z)));let de=re&&re.targetChanges.get(O.targetId),qe=re&&re.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(Z,V.isPrimaryClient,de,qe);return C2(V,O.targetId,ge.au),ge.snapshot})}(n,g,C,S);let o=yield y2(n.localStore,e,!0),s=new AD(e,o.Qs),a=s.ru(o.documents),c=qf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);C2(n,t,d.au);let h=new MD(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function dee(n,e,t){return T(this,null,function*(){let r=Ke(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!$v(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&KD(r.remoteStore,i.targetId),PD(r,i.targetId)}).catch(Bv))):(PD(r,i.targetId),yield uD(r.localStore,i.targetId,!0))})}function hee(n,e){return T(this,null,function*(){let t=Ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),KD(t.remoteStore,r.targetId))})}function OU(n,e){return T(this,null,function*(){let t=Ke(n);try{let r=yield KX(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?St(s.hu,14607):i.removedDocuments.size>0&&(St(s.hu,42227),s.hu=!1))}),yield LU(t,r,e)}catch(r){yield Bv(r)}})}function T2(n,e,t){let r=Ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ke(s);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let C of g.Sa)C.va(a)&&(d=!0)}),d&&ZD(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fee(n,e,t){return T(this,null,function*(){let r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ft(Ee.comparator);s=s.insert(o,ri.newNoDocument(o,ke.min()));let a=Ye().add(o),c=new wv(ke.min(),new Map,new Ft(He),s,a);yield OU(r,c),r.du=r.du.remove(o),r.Au.delete(e),eA(r)}else yield uD(r.localStore,e,!1).then(()=>PD(r,e,t)).catch(Bv)})}function PD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||NU(n,r)})}function NU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(KD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),eA(n))}function C2(n,e,t){for(let r of t)r instanceof Pv?(n.Ru.addReference(r.key,e),pee(n,r)):r instanceof kv?(oe(XD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||NU(n,r.key)):De(19791,{wu:r})}function pee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(oe(XD,"New document in limbo: "+t),n.Eu.add(r),eA(n))}function eA(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ee(rn.fromString(e)),r=n.fu.next();n.Au.set(r,new xD(t)),n.du=n.du.insert(t,r),MU(n.remoteStore,new Hf(Fi(GD(t.path)),r,"TargetPurposeLimboResolution",jD.ce))}}function LU(n,e,t){return T(this,null,function*(){let r=Ke(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=sD.As(c.targetId,d);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(c,d){return T(this,null,function*(){let h=Ke(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>G.forEach(d,C=>G.forEach(C.Es,S=>h.persistence.referenceDelegate.addReference(g,C.targetId,S)).next(()=>G.forEach(C.ds,S=>h.persistence.referenceDelegate.removeReference(g,C.targetId,S)))))}catch(g){if(!nd(g))throw g;oe(WD,"Failed to update sequence numbers: "+g)}for(let g of d){let C=g.targetId;if(!g.fromCache){let S=h.Ms.get(C),k=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(C,V)}}})}(r.localStore,o))})}function gee(n,e){return T(this,null,function*(){let t=Ke(n);if(!t.currentUser.isEqual(e)){oe(XD,"User change. New user:",e.toKey());let r=yield SU(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new pe(X.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield LU(t,r.Ls)}})}function mee(n,e){let t=Ke(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let i=Ye(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function FU(n){let e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fee.bind(null,e),e.Pu.H_=see.bind(null,e.eventManager),e.Pu.yu=aee.bind(null,e.eventManager),e}var VU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=AU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return WX(this.persistence,new cD,t.initialUser,this.serializer)}Cu(t){return new Cv(oD.mi,this.serializer)}Du(t){return new dD}terminate(){return T(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),kD=class extends VU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){St(this.persistence.referenceDelegate instanceof Sv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new GS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new Cv(r=>Sv.mi(r,t),this.serializer)}};var yee=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>T2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gee.bind(null,this.syncEngine),yield ree(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new CD}()}createDatastore(t){let r=AU(t.databaseInfo.databaseId),i=function(s){return new mD(s)}(t.databaseInfo);return function(s,a,c,d){return new wD(s,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new ID(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>T2(this.syncEngine,r,0),function(){return Av.v()?new Av:new hD}())}createSyncEngine(t,r){return function(o,s,a,c,d,h,g){let C=new RD(o,s,a,c,d,h);return g&&(C.gu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){yield function(r){return T(this,null,function*(){let i=Ke(r);oe(Xu,"RemoteStore shutting down."),i.Ea.add(5),yield Jf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var OD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var na="FirestoreClient",ND=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>T(this,null,function*(){oe(na,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(oe(na,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=PU(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function cS(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),oe(na,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield SU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function S2(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _ee(n);oe(na,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>E2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>E2(e.remoteStore,i)),n._onlineComponents=e})}function _ee(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(na,"Using user provided OfflineComponentProvider");try{yield cS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Nf("Error using user provided cache. Falling back to memory cache: "+t),yield cS(n,new VU)}}else oe(na,"Using default OfflineComponentProvider"),yield cS(n,new kD(void 0));return n._offlineComponents})}function vee(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(na,"Using user provided OnlineComponentProvider"),yield S2(n,n._uninitializedComponentsProvider._online)):(oe(na,"Using default OnlineComponentProvider"),yield S2(n,new yee))),n._onlineComponents})}function D2(n){return T(this,null,function*(){let e=yield vee(n),t=e.eventManager;return t.onListen=cee.bind(null,e.syncEngine),t.onUnlisten=dee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hee.bind(null,e.syncEngine),t})}function UU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var A2=new Map;var wee="firestore.googleapis.com",M2=!0,Ov=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wee,this.ssl=M2}else this.host=e.host,this.ssl=e.ssl??M2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qX)throw new pe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},LD=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uS;switch(r.type){case"firstParty":return new fS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=A2.get(t);r&&(oe("ComponentProvider","Removing Datastore"),A2.delete(t),r.terminate())}(this),Promise.resolve()}};var Nv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},No=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new FD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qf(t,n._jsonSchema))return new n(e,r||null,new Ee(rn.fromString(t.referencePath)))}};No._jsonSchemaVersion="firestore/documentReference/1.0",No._jsonSchema={type:zt("string",No._jsonSchemaVersion),referencePath:zt("string")};var FD=class n extends Nv{constructor(e,t,r){super(e,t,GD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new No(this.firestore,null,new Ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var x2="AsyncQueue",Lv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mv(this,"async_queue_retry"),this._c=()=>{let r=aS();r&&oe(x2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=aS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=aS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return T(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nd(e))throw e;oe(x2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Lo("INTERNAL UNHANDLED ERROR: ",R2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=bD.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:R2(this.nc)})}verifyOperationInProgress(){}Tc(){return T(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function R2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function P2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Kf=class extends LD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Lv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lv(e),this._firestoreClient=void 0,yield e}})}};function Eee(n){if(n._terminated)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Iee(n),n._firestoreClient}function Iee(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new _S(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,UU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ND(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Vu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(An.fromBase64String(e))}catch(t){throw new pe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Vu._jsonSchemaVersion="firestore/bytes/1.0",Vu._jsonSchema={type:zt("string",Vu._jsonSchemaVersion),bytes:zt("string")};var Fv=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Uu=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Uu._jsonSchemaVersion="firestore/geoPoint/1.0",Uu._jsonSchema={type:zt("string",Uu._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};var Bu=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new pe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bu._jsonSchemaVersion="firestore/vectorValue/1.0",Bu._jsonSchema={type:zt("string",Bu._jsonSchemaVersion),vectorValues:zt("object")};var bee=new RegExp("[~\\*/\\[\\]]");function Tee(n,e,t){if(e.search(bee)>=0)throw k2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fv(...e.split("."))._internalPath}catch{throw k2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function k2(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(X.INVALID_ARGUMENT,a+n+c)}var Vv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new No(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(BU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},VD=class extends Vv{data(){return super.data()}};function BU(n,e){return typeof e=="string"?Tee(n,e):e instanceof Fv?e._internalPath:e._delegate._internalPath}function Cee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var UD=class{convertValue(e,t="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Yf(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Vf].arrayValue?.values?.map(r=>Tt(r.doubleValue));return new Bu(t)}convertGeoPoint(e){return new Uu(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=zv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ff(e));default:return null}}convertTimestamp(e){let t=Fo(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=rn.fromString(e);St(TU(r),9688,{name:e});let i=new _v(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return i.isEqual(t)||Lo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Tc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cc=class n extends Vv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(BU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Cc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cc._jsonSchema={type:zt("string",Cc._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};var ju=class extends Cc{data(e={}){return super.data(e)}},zu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ju(this._firestore,this._userDataWriter,r.key,r,new Tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:See(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function See(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}zu._jsonSchemaVersion="firestore/querySnapshot/1.0",zu._jsonSchema={type:zt("string",zu._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};var Uv=class extends UD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}};function jU(n,...e){n=Gs(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||P2(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(P2(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof No)s=rS(n.firestore,Kf),a=GD(n._key.path),o={next:c=>{e[r]&&e[r](Dee(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=rS(n,Nv);s=rS(c.firestore,Kf),a=c._query;let d=new Uv(s);o={next:h=>{e[r]&&e[r](new zu(s,d,c,h))},error:e[r+1],complete:e[r+2]},Cee(n._query)}return function(d,h,g,C){let S=new OD(C),k=new DD(h,S,g);return d.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return iee(yield D2(d),k)})),()=>{S.Nu(),d.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return oee(yield D2(d),k)}))}}(Eee(s),a,i,o)}function Dee(n,e,t){let r=t.docs.get(e._key),i=new Uv(n);return new Cc(n,i,e._key,r,new Tc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){td=i})(Tu),Ks(new ei("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Kf(new dS(r.getProvider("auth-internal")),new pS(s,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new pe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _v(d.options.projectId,h)}(s,i),s);return o=j({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),To(HV,GV,e),To(HV,GV,"esm2020")})();var Gv=function(){return Gv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gv.apply(this,arguments)};var Aee={includeMetadataChanges:!1};function zU(n,e){return e===void 0&&(e=Aee),new Le(function(t){var r=jU(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function $U(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Gv(Gv({},r),(t={},t[e.idField]=n.id,t))}function qU(n){return zU(n,{includeMetadataChanges:!0}).pipe(be(function(e){return e.docs}))}function HU(n,e){return e===void 0&&(e={}),qU(n).pipe(be(function(t){return t.map(function(r){return $U(r,e)})}))}var GU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WU={};var ra,tA;(function(){var n;function e(M,w){function I(){}I.prototype=w.prototype,M.D=w.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(A,D,P){for(var E=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)E[Et-2]=arguments[Et];return w.prototype[D].apply(A,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,w,I){I||(I=0);var A=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)A[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;16>D;++D)A[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=M.g[0],I=M.g[1],D=M.g[2];var P=M.g[3],E=w+(P^I&(D^P))+A[0]+3614090360&4294967295;w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[1]+3905402710&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[2]+606105819&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[4]+4118548399&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[5]+1200080426&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[6]+2821735955&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[8]+1770035416&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[9]+2336552879&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[10]+4294925233&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(P^I&(D^P))+A[12]+1804603682&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(D^w&(I^D))+A[13]+4254626195&4294967295,P=w+(E<<12&4294967295|E>>>20),E=D+(I^P&(w^I))+A[14]+2792965006&4294967295,D=P+(E<<17&4294967295|E>>>15),E=I+(w^D&(P^w))+A[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(D^P&(I^D))+A[1]+4129170786&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[6]+3225465664&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[11]+643717713&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[5]+3593408605&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[10]+38016083&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[15]+3634488961&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[9]+568446438&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[14]+3275163606&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[3]+4107603335&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^P&(I^D))+A[13]+2850285829&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^D&(w^I))+A[2]+4243563512&4294967295,P=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(P^w))+A[7]+1735328473&4294967295,D=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(D^P))+A[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(I^D^P)+A[5]+4294588738&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[8]+2272392833&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[11]+1839030562&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[1]+2763975236&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[4]+1272893353&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[7]+4139469664&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[13]+681279174&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[0]+3936430074&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[3]+3572445317&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^P)+A[9]+3654602809&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^D)+A[12]+3873151461&4294967295,P=w+(E<<11&4294967295|E>>>21),E=D+(P^w^I)+A[15]+530742520&4294967295,D=P+(E<<16&4294967295|E>>>16),E=I+(D^P^w)+A[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(D^(I|~P))+A[0]+4096336452&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[7]+1126891415&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[14]+2878612391&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[12]+1700485571&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[3]+2399980690&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[10]+4293915773&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[8]+1873313359&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[15]+4264355552&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[6]+2734768916&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~P))+A[4]+4149444226&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~D))+A[11]+3174756917&4294967295,P=w+(E<<10&4294967295|E>>>22),E=D+(w^(P|~I))+A[2]+718787259&4294967295,D=P+(E<<15&4294967295|E>>>17),E=I+(P^(D|~w))+A[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+P&4294967295}r.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var I=w-this.blockSize,A=this.B,D=this.h,P=0;P<w;){if(D==0)for(;P<=I;)i(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<w;)if(A[D++]=M.charCodeAt(P++),D==this.blockSize){i(this,A),D=0;break}}else for(;P<w;)if(A[D++]=M[P++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=w},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var I=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=I&255,I/=256;for(this.u(M),M=Array(16),w=I=0;4>w;++w)for(var A=0;32>A;A+=8)M[I++]=this.g[w]>>>A&255;return M};function o(M,w){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=w(M)}function s(M,w){this.h=w;for(var I=[],A=!0,D=M.length-1;0<=D;D--){var P=M[D]|0;A&&P==w||(I[D]=P,A=!1)}this.g=I}var a={};function c(M){return-128<=M&&128>M?o(M,function(w){return new s([w|0],0>w?-1:0)}):new s([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return O(d(-M));for(var w=[],I=1,A=0;M>=I;A++)w[A]=M/I|0,I*=4294967296;return new s(w,0)}function h(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return O(h(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(w,8)),A=g,D=0;D<M.length;D+=8){var P=Math.min(8,M.length-D),E=parseInt(M.substring(D,D+P),w);8>P?(P=d(Math.pow(w,P)),A=A.j(P).add(d(E))):(A=A.j(I),A=A.add(d(E)))}return A}var g=c(0),C=c(1),S=c(16777216);n=s.prototype,n.m=function(){if(V(this))return-O(this).m();for(var M=0,w=1,I=0;I<this.g.length;I++){var A=this.i(I);M+=(0<=A?A:4294967296+A)*w,w*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(V(this))return"-"+O(this).toString(M);for(var w=d(Math.pow(M,6)),I=this,A="";;){var D=de(I,w).g;I=H(I,D.j(w));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=D,k(I))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function V(M){return M.h==-1}n.l=function(M){return M=H(this,M),V(M)?-1:k(M)?0:1};function O(M){for(var w=M.g.length,I=[],A=0;A<w;A++)I[A]=~M.g[A];return new s(I,~M.h).add(C)}n.abs=function(){return V(this)?O(this):this},n.add=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],A=0,D=0;D<=w;D++){var P=A+(this.i(D)&65535)+(M.i(D)&65535),E=(P>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);A=E>>>16,P&=65535,E&=65535,I[D]=E<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function H(M,w){return M.add(O(w))}n.j=function(M){if(k(this)||k(M))return g;if(V(this))return V(M)?O(this).j(O(M)):O(O(this).j(M));if(V(M))return O(this.j(O(M)));if(0>this.l(S)&&0>M.l(S))return d(this.m()*M.m());for(var w=this.g.length+M.g.length,I=[],A=0;A<2*w;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<M.g.length;D++){var P=this.i(A)>>>16,E=this.i(A)&65535,Et=M.i(D)>>>16,Ln=M.i(D)&65535;I[2*A+2*D]+=E*Ln,re(I,2*A+2*D),I[2*A+2*D+1]+=P*Ln,re(I,2*A+2*D+1),I[2*A+2*D+1]+=E*Et,re(I,2*A+2*D+1),I[2*A+2*D+2]+=P*Et,re(I,2*A+2*D+2)}for(A=0;A<w;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=w;A<2*w;A++)I[A]=0;return new s(I,0)};function re(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function Z(M,w){this.g=M,this.h=w}function de(M,w){if(k(w))throw Error("division by zero");if(k(M))return new Z(g,g);if(V(M))return w=de(O(M),w),new Z(O(w.g),O(w.h));if(V(w))return w=de(M,O(w)),new Z(O(w.g),w.h);if(30<M.g.length){if(V(M)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var I=C,A=w;0>=A.l(M);)I=qe(I),A=qe(A);var D=ge(I,1),P=ge(A,1);for(A=ge(A,2),I=ge(I,2);!k(A);){var E=P.add(A);0>=E.l(M)&&(D=D.add(I),P=E),A=ge(A,1),I=ge(I,1)}return w=H(M,D.j(w)),new Z(D,w)}for(D=g;0<=M.l(w);){for(I=Math.max(1,Math.floor(M.m()/w.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=d(I),E=P.j(w);V(E)||0<E.l(M);)I-=A,P=d(I),E=P.j(w);k(P)&&(P=C),D=D.add(P),M=H(M,E)}return new Z(D,M)}n.A=function(M){return de(this,M).h},n.and=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)&M.i(A);return new s(I,this.h&M.h)},n.or=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)|M.i(A);return new s(I,this.h|M.h)},n.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)^M.i(A);return new s(I,this.h^M.h)};function qe(M){for(var w=M.g.length+1,I=[],A=0;A<w;A++)I[A]=M.i(A)<<1|M.i(A-1)>>>31;return new s(I,M.h)}function ge(M,w){var I=w>>5;w%=32;for(var A=M.g.length-I,D=[],P=0;P<A;P++)D[P]=0<w?M.i(P+I)>>>w|M.i(P+I+1)<<32-w:M.i(P+I);return new s(D,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tA=WU.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,ra=WU.Integer=s}).apply(typeof GU<"u"?GU:typeof self<"u"?self:typeof window<"u"?window:{});var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bo={};var nA,Mee,id,rA,Xf,Kv,iA,oA,sA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wv=="object"&&Wv];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var L=l[x];if(!(L in m))break e;m=m[L]}l=l[l.length-1],x=m[l],f=f(x),f!=x&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var m=0,x=!1,L={next:function(){if(!x&&m<l.length){var B=m++;return{value:f(B,l[B]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function g(l,f,m){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function C(l,f,m){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,C.apply(null,arguments)}function S(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function k(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(x,L,B){for(var W=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)W[Je-2]=arguments[Je];return f.prototype[L].apply(x,W)}}function V(l){let f=l.length;if(0<f){let m=Array(f);for(let x=0;x<f;x++)m[x]=l[x];return m}return[]}function O(l,f){for(let m=1;m<arguments.length;m++){let x=arguments[m];if(c(x)){let L=l.length||0,B=x.length||0;l.length=L+B;for(let W=0;W<B;W++)l[L+W]=x[W]}else l.push(x)}}class H{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function re(l){return/^[\s\xa0]*$/.test(l)}function Z(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var qe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ge(l,f,m){for(let x in l)f.call(m,l[x],x,l)}function M(l,f){for(let m in l)f.call(void 0,l[m],m,l)}function w(l){let f={};for(let m in l)f[m]=l[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let m,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(m in x)l[m]=x[m];for(let B=0;B<I.length;B++)m=I[B],Object.prototype.hasOwnProperty.call(x,m)&&(l[m]=x[m])}}function D(l){var f=1;l=l.split(":");let m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function P(l){a.setTimeout(()=>{throw l},0)}function E(){var l=Ko;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Et{constructor(){this.h=this.g=null}add(f,m){let x=Ln.get();x.set(f,m),this.h?this.h.next=x:this.g=x,this.h=x}}var Ln=new H(()=>new yw,l=>l.reset());class yw{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ma,ci=!1,Ko=new Et,zp=()=>{let l=a.Promise.resolve(void 0);ma=()=>{l.then($p)}};var $p=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(m){P(m)}var f=Ln;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ci=!1};function Mr(){this.s=this.s,this.C=this.C}Mr.prototype.s=!1,Mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Gt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var Hc=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function Qi(l,f){if(Gt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(qe){e:{try{de(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Fd[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Qi.aa.h.call(this)}}k(Qi,Gt);var Fd={2:"touch",3:"pen",4:"mouse"};Qi.prototype.h=function(){Qi.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Yi="closure_listenable_"+(1e6*Math.random()|0),Vd=0;function qp(l,f,m,x,L){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!x,this.ha=L,this.key=++Vd,this.da=this.fa=!1}function ya(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Gc(l){this.src=l,this.g={},this.h=0}Gc.prototype.add=function(l,f,m,x,L){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var W=Kc(l,f,x,L);return-1<W?(f=l[W],m||(f.fa=!1)):(f=new qp(f,this.src,B,!!x,L),f.fa=m,l.push(f)),f};function Wc(l,f){var m=f.type;if(m in l.g){var x=l.g[m],L=Array.prototype.indexOf.call(x,f,void 0),B;(B=0<=L)&&Array.prototype.splice.call(x,L,1),B&&(ya(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Kc(l,f,m,x){for(var L=0;L<l.length;++L){var B=l[L];if(!B.da&&B.listener==f&&B.capture==!!m&&B.ha==x)return L}return-1}var _a="closure_lm_"+(1e6*Math.random()|0),Qc={};function Hp(l,f,m,x,L){if(x&&x.once)return Jc(l,f,m,x,L);if(Array.isArray(f)){for(var B=0;B<f.length;B++)Hp(l,f[B],m,x,L);return null}return m=Ji(m),l&&l[Yi]?l.K(f,m,d(x)?!!x.capture:!!x,L):Yc(l,f,m,!1,x,L)}function Yc(l,f,m,x,L,B){if(!f)throw Error("Invalid event type");var W=d(L)?!!L.capture:!!L,Je=Zc(l);if(Je||(l[_a]=Je=new Gc(l)),m=Je.add(f,m,x,W,B),m.proxy)return m;if(x=Ud(),m.proxy=x,x.src=l,x.listener=m,l.addEventListener)Hc||(L=W),L===void 0&&(L=!1),l.addEventListener(f.toString(),x,L);else if(l.attachEvent)l.attachEvent(va(f.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ud(){function l(m){return f.call(l.src,l.listener,m)}let f=_w;return l}function Jc(l,f,m,x,L){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Jc(l,f[B],m,x,L);return null}return m=Ji(m),l&&l[Yi]?l.L(f,m,d(x)?!!x.capture:!!x,L):Yc(l,f,m,!0,x,L)}function Wt(l,f,m,x,L){if(Array.isArray(f))for(var B=0;B<f.length;B++)Wt(l,f[B],m,x,L);else x=d(x)?!!x.capture:!!x,m=Ji(m),l&&l[Yi]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],m=Kc(B,m,x,L),-1<m&&(ya(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Zc(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Kc(f,m,x,L)),(m=-1<l?f[l]:null)&&Kt(m))}function Kt(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Yi])Wc(f.i,l);else{var m=l.type,x=l.proxy;f.removeEventListener?f.removeEventListener(m,x,l.capture):f.detachEvent?f.detachEvent(va(m),x):f.addListener&&f.removeListener&&f.removeListener(x),(m=Zc(f))?(Wc(m,l),m.h==0&&(m.src=null,f[_a]=null)):ya(l)}}}function va(l){return l in Qc?Qc[l]:Qc[l]="on"+l}function _w(l,f){if(l.da)l=!0;else{f=new Qi(f,this);var m=l.listener,x=l.ha||l.src;l.fa&&Kt(l),l=m.call(x,f)}return l}function Zc(l){return l=l[_a],l instanceof Gc?l:null}var Bd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ji(l){return typeof l=="function"?l:(l[Bd]||(l[Bd]=function(f){return l.handleEvent(f)}),l[Bd])}function Qt(){Mr.call(this),this.i=new Gc(this),this.M=this,this.F=null}k(Qt,Mr),Qt.prototype[Yi]=!0,Qt.prototype.removeEventListener=function(l,f,m,x){Wt(this,l,f,m,x)};function sn(l,f){var m,x=l.F;if(x)for(m=[];x;x=x.F)m.push(x);if(l=l.M,x=f.type||f,typeof f=="string")f=new Gt(f,l);else if(f instanceof Gt)f.target=f.target||l;else{var L=f;f=new Gt(x,l),A(f,L)}if(L=!0,m)for(var B=m.length-1;0<=B;B--){var W=f.g=m[B];L=Qo(W,x,!0,f)&&L}if(W=f.g=l,L=Qo(W,x,!0,f)&&L,L=Qo(W,x,!1,f)&&L,m)for(B=0;B<m.length;B++)W=f.g=m[B],L=Qo(W,x,!1,f)&&L}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],x=0;x<m.length;x++)ya(m[x]);delete l.g[f],l.h--}}this.F=null},Qt.prototype.K=function(l,f,m,x){return this.i.add(String(l),f,!1,m,x)},Qt.prototype.L=function(l,f,m,x){return this.i.add(String(l),f,!0,m,x)};function Qo(l,f,m,x){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,B=0;B<f.length;++B){var W=f[B];if(W&&!W.da&&W.capture==m){var Je=W.listener,kt=W.ha||W.src;W.fa&&Wc(l.i,W),L=Je.call(kt,x)!==!1&&L}}return L&&!x.defaultPrevented}function Gp(l,f,m){if(typeof l=="function")m&&(l=C(l,m));else if(l&&typeof l.handleEvent=="function")l=C(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Wp(l){l.g=Gp(()=>{l.g=null,l.i&&(l.i=!1,Wp(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Kp extends Mr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Wp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(l){Mr.call(this),this.h=l,this.g={}}k(Yo,Mr);var Jo=[];function Xc(l){ge(l.g,function(f,m){this.g.hasOwnProperty(m)&&Kt(f)},l),l.g={}}Yo.prototype.N=function(){Yo.aa.N.call(this),Xc(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=a.JSON.stringify,Zi=a.JSON.parse,Qp=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Zo(){}Zo.prototype.h=null;function jd(l){return l.h||(l.h=l.i())}function Xo(){}var es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yt(){Gt.call(this,"d")}k(Yt,Gt);function el(){Gt.call(this,"c")}k(el,Gt);var er={},ts=null;function tl(){return ts=ts||new Qt}er.La="serverreachability";function Yp(l){Gt.call(this,er.La,l)}k(Yp,Gt);function mr(l){let f=tl();sn(f,new Yp(f))}er.STAT_EVENT="statevent";function Jp(l,f){Gt.call(this,er.STAT_EVENT,l),this.stat=f}k(Jp,Gt);function pn(l){let f=tl();sn(f,new Jp(f,l))}er.Ma="timingevent";function Ea(l,f){Gt.call(this,er.Ma,l),this.size=f}k(Ea,Gt);function ns(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function rs(){this.g=!0}rs.prototype.xa=function(){this.g=!1};function zd(l,f,m,x,L,B){l.info(function(){if(l.g)if(B)for(var W="",Je=B.split("&"),kt=0;kt<Je.length;kt++){var Ze=Je[kt].split("=");if(1<Ze.length){var wn=Ze[0];Ze=Ze[1];var En=wn.split("_");W=2<=En.length&&En[1]=="type"?W+(wn+"="+Ze+"&"):W+(wn+"=redacted&")}}else W=null;else W=B;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+f+`
`+m+`
`+W})}function Ia(l,f,m,x,L,B,W){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+f+`
`+m+`
`+B+" "+W})}function is(l,f,m,x){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Zp(l,m)+(x?" "+x:"")})}function li(l,f){l.info(function(){return"TIMEOUT: "+f})}rs.prototype.info=function(){};function Zp(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var x=m[l];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return wa(m)}catch{return f}}var ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ta;function Ca(){}k(Ca,Zo),Ca.prototype.g=function(){return new XMLHttpRequest},Ca.prototype.i=function(){return{}},Ta=new Ca;function ui(l,f,m,x){this.j=l,this.i=f,this.l=m,this.R=x||1,this.U=new Yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $d}function $d(){this.i=null,this.g="",this.h=!1}var Xp={},os={};function rl(l,f,m){l.L=1,l.v=al(xr(f)),l.m=m,l.P=!0,il(l,null)}function il(l,f){l.F=Date.now(),as(l),l.A=xr(l.v);var m=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),ag(m.i,"t",x),l.C=0,m=l.j.J,l.h=new $d,l.g=p(l.j,m?f:null,!l.m),0<l.O&&(l.M=new Kp(C(l.Y,l,l.g),l.O)),f=l.U,m=l.g,x=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Jo[0]=L.toString()),L=Jo);for(var B=0;B<L.length;B++){var W=Hp(m,L[B],x||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),mr(),zd(l.i,l.u,l.A,l.l,l.R,l.m)}ui.prototype.ca=function(l){l=l.target;let f=this.M;f&&Vn(l)==3?f.j():this.Y(l)},ui.prototype.Y=function(l){try{if(l==this.g)e:{let En=Vn(this.g);var f=this.g.Ba();let ml=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||hg(this.g)))){this.J||En!=4||f==7||(f==8||0>=ml?mr(3):mr(2)),ol(this);var m=this.g.Z();this.X=m;t:if(ss(this)){var x=hg(this.g);l="";var L=x.length,B=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),cs(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(x[f],{stream:!(B&&f==L-1)});x.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,Ia(this.i,this.u,this.A,this.l,this.R,En,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,kt=this.g;if((Je=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Je)){var Ze=Je;break t}}Ze=null}if(m=Ze)is(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,m);else{this.o=!1,this.s=3,pn(12),di(this),cs(this);break e}}if(this.P){m=!0;let Nr;for(;!this.J&&this.C<W.length;)if(Nr=Xi(this,W),Nr==os){En==4&&(this.s=4,pn(14),m=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==Xp){this.s=4,pn(15),is(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else is(this.i,this.l,Nr,null),Sa(this,Nr);if(ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||W.length!=0||this.h.h||(this.s=1,pn(16),m=!1),this.o=this.o&&m,!m)is(this.i,this.l,W,"[Invalid Chunked Response]"),di(this),cs(this);else if(0<W.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),gl(wn),wn.M=!0,pn(11))}}else is(this.i,this.l,W,null),Sa(this,W);En==4&&di(this),this.o&&!this.J&&(En==4?vn(this.j,this):(this.o=!1,as(this)))}else fg(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),di(this),cs(this)}}}catch{}finally{}};function ss(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Xi(l,f){var m=l.C,x=f.indexOf(`
`,m);return x==-1?os:(m=Number(f.substring(m,x)),isNaN(m)?Xp:(x+=1,x+m>f.length?os:(f=f.slice(x,x+m),l.C=x+m,f)))}ui.prototype.cancel=function(){this.J=!0,di(this)};function as(l){l.S=Date.now()+l.I,eg(l,l.I)}function eg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ns(C(l.ba,l),f)}function ol(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ui.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(li(this.i,this.A),this.L!=2&&(mr(),pn(17)),di(this),this.s=2,cs(this)):eg(this,this.S-l)};function cs(l){l.j.G==0||l.J||vn(l.j,l)}function di(l){ol(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Xc(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Sa(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Kd(m.h,l))){if(!l.K&&Kd(m.h,l)&&m.G==3){try{var x=m.Da.g.parse(f)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)to(m),gs(m);else break e;pl(m),pn(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=ns(C(m.Za,m),6e3));if(1>=Wd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((l.K||m.g==l)&&to(m),!re(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let Ze=L[f];if(m.T=Ze[0],Ze=Ze[1],m.G==2)if(Ze[0]=="c"){m.K=Ze[1],m.ia=Ze[2];let wn=Ze[3];wn!=null&&(m.la=wn,m.j.info("VER="+m.la));let En=Ze[4];En!=null&&(m.Aa=En,m.j.info("SVER="+m.Aa));let ml=Ze[5];ml!=null&&typeof ml=="number"&&0<ml&&(x=1.5*ml,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;let Nr=l.g;if(Nr){let pg=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pg){var B=x.h;B.g||pg.indexOf("spdy")==-1&&pg.indexOf("quic")==-1&&pg.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(yr(B,B.h),B.h=null))}if(x.D){let ww=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;ww&&(x.ya=ww,ft(x.I,x.D,ww))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var W=l;if(x.qa=u(x,x.J?x.ia:null,x.W),W.K){tr(x.h,W);var Je=W,kt=x.L;kt&&(Je.I=kt),Je.B&&(ol(Je),as(Je)),x.g=W}else rh(x);0<m.i.length&&ka(m)}else Ze[0]!="stop"&&Ze[0]!="close"||pi(m,7);else m.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?pi(m,7):dl(m):Ze[0]!="noop"&&m.l&&m.l.ta(Ze),m.v=0)}}mr(4)}catch{}}var qd=class{constructor(l,f){this.g=l,this.map=f}};function Hd(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gd(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Wd(l){return l.h?1:l.g?l.g.size:0}function Kd(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function yr(l,f){l.g?l.g.add(f):l.h=f}function tr(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Hd.prototype.cancel=function(){if(this.i=ls(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function ls(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let m of l.g.values())f=f.concat(m.D);return f}return V(l.i)}function Da(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,x=0;x<m;x++)f.push(l[x]);return f}f=[],m=0;for(x in l)f[m++]=l[x];return f}function Qd(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(let x in l)f[m++]=x;return f}}}function lt(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=Qd(l),x=Da(l),L=x.length,B=0;B<L;B++)f.call(void 0,x[B],m&&m[B],l)}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var x=l[m].indexOf("="),L=null;if(0<=x){var B=l[m].substring(0,x);L=l[m].substring(x+1)}else B=l[m];f(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function nr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof nr){this.h=l.h,xa(this,l.j),this.o=l.o,this.g=l.g,sl(this,l.s),this.l=l.l;var f=l.i,m=new Ra;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),tg(this,m),this.m=l.m}else l&&(f=String(l).match(Aa))?(this.h=!1,xa(this,f[1]||"",!0),this.o=Rr(f[2]||""),this.g=Rr(f[3]||"",!0),sl(this,f[4]),this.l=Rr(f[5]||"",!0),tg(this,f[6]||"",!0),this.m=Rr(f[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}nr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(rr(f,Yd,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(rr(f,Yd,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(rr(m,m.charAt(0)=="/"?ig:rg,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",rr(m,us)),l.join("")};function xr(l){return new nr(l)}function xa(l,f,m){l.j=m?Rr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function sl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function tg(l,f,m){f instanceof Ra?(l.i=f,cl(l.i,l.h)):(m||(f=rr(f,og)),l.i=new Ra(f,l.h))}function ft(l,f,m){l.i.set(f,m)}function al(l){return ft(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Rr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function rr(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,ng),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ng(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Yd=/[#\/\?@]/g,rg=/[#\?:]/g,ig=/[#\?]/g,og=/[#\?@]/g,us=/#/g;function Ra(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function hi(l){l.g||(l.g=new Map,l.h=0,l.i&&Ma(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Ra.prototype,n.add=function(l,f){hi(this),this.i=null,l=kr(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function sg(l,f){hi(l),f=kr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Pr(l,f){return hi(l),f=kr(l,f),l.g.has(f)}n.forEach=function(l,f){hi(this),this.g.forEach(function(m,x){m.forEach(function(L){l.call(f,L,x,this)},this)},this)},n.na=function(){hi(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let x=0;x<f.length;x++){let L=l[x];for(let B=0;B<L.length;B++)m.push(f[x])}return m},n.V=function(l){hi(this);let f=[];if(typeof l=="string")Pr(this,l)&&(f=f.concat(this.g.get(kr(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return hi(this),this.i=null,l=kr(this,l),Pr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function ag(l,f,m){sg(l,f),0<m.length&&(l.i=null,l.g.set(kr(l,f),V(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var x=f[m];let B=encodeURIComponent(String(x)),W=this.V(x);for(x=0;x<W.length;x++){var L=B;W[x]!==""&&(L+="="+encodeURIComponent(String(W[x]))),l.push(L)}}return this.i=l.join("&")};function kr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function cl(l,f){f&&!l.j&&(hi(l),l.i=null,l.g.forEach(function(m,x){var L=x.toLowerCase();x!=L&&(sg(this,x),ag(this,L,m))},l)),l.j=f}function cg(l,f){let m=new rs;if(a.Image){let x=new Image;x.onload=S(Fn,m,"TestLoadImage: loaded",!0,f,x),x.onerror=S(Fn,m,"TestLoadImage: error",!1,f,x),x.onabort=S(Fn,m,"TestLoadImage: abort",!1,f,x),x.ontimeout=S(Fn,m,"TestLoadImage: timeout",!1,f,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else f(!1)}function Pa(l,f){let m=new rs,x=new AbortController,L=setTimeout(()=>{x.abort(),Fn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:x.signal}).then(B=>{clearTimeout(L),B.ok?Fn(m,"TestPingServer: ok",!0,f):Fn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Fn(m,"TestPingServer: error",!1,f)})}function Fn(l,f,m,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(m)}catch{}}function lg(){this.g=new Qp}function Jd(l,f,m){let x=m||"";try{lt(l,function(L,B){let W=L;d(L)&&(W=wa(L)),f.push(x+B+"="+encodeURIComponent(W))})}catch(L){throw f.push(x+"type="+encodeURIComponent("_badmap")),L}}function ut(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ut,Zo),ut.prototype.g=function(){return new ll(this.l,this.j)},ut.prototype.i=function(l){return function(){return l}}({});function ll(l,f){Qt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ll,Qt),n=ll.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,hs(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ug(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ug(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?ds(this):hs(this),this.readyState==3&&ug(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ds(this))},n.Qa=function(l){this.g&&(this.response=l,ds(this))},n.ga=function(){this.g&&ds(this)};function ds(l){l.readyState=4,l.l=null,l.j=null,l.v=null,hs(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function hs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zd(l){let f="";return ge(l,function(m,x){f+=x,f+=":",f+=m,f+=`\r
`}),f}function fs(l,f,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=Zd(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ft(l,f,m))}function tt(l){Qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,Qt);var dg=/^https?$/i,vw=["POST","PUT"];n=tt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ta.g(),this.v=this.o?jd(this.o):jd(Ta),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){ps(this,B);return}if(l=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)m.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let B of x.keys())m.set(B,x.get(B));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vw,f,void 0))||x||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,W]of m)this.g.setRequestHeader(B,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eh(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){ps(this,B)}};function ps(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Xd(l),eo(l)}function Xd(l){l.A||(l.A=!0,sn(l,"complete"),sn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,sn(this,"complete"),sn(this,"abort"),eo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eo(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ul(this):this.bb())},n.bb=function(){ul(this)};function ul(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)Gp(l.Ea,0,l);else if(sn(l,"readystatechange"),Vn(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var x;if(x=W===0){var L=String(l.D).match(Aa)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),x=!dg.test(L?L.toLowerCase():"")}m=x}if(m)sn(l,"complete"),sn(l,"success");else{l.m=6;try{var B=2<Vn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Xd(l)}}finally{eo(l)}}}}function eo(l,f){if(l.g){eh(l);let m=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||sn(l,"ready");try{m.onreadystatechange=x}catch{}}}function eh(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Zi(f)}};function hg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fg(l){let f={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(re(l[x]))continue;var m=D(l[x]);let L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let B=f[L]||[];f[L]=B,B.push(m)}M(f,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function th(l){this.Aa=0,this.i=[],this.j=new rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Or("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Or("baseRetryDelayMs",5e3,l),this.cb=Or("retryDelaySeedMs",1e4,l),this.Wa=Or("forwardChannelMaxRetries",2,l),this.wa=Or("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Hd(l&&l.concurrentRequestLimit),this.Da=new lg,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=th.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,x){pn(0),this.W=l,this.H=f||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=u(this,null,this.W),ka(this)};function dl(l){if(hl(l),l.G==3){var f=l.U++,m=xr(l.I);if(ft(m,"SID",l.K),ft(m,"RID",f),ft(m,"TYPE","terminate"),ms(l,m),f=new ui(l,l.j,f),f.L=2,f.v=al(xr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),as(f)}no(l)}function gs(l){l.g&&(gl(l),l.g.cancel(),l.g=null)}function hl(l){gs(l),l.u&&(a.clearTimeout(l.u),l.u=null),to(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ka(l){if(!Gd(l.h)&&!l.s){l.s=!0;var f=l.Ga;ma||zp(),ci||(ma(),ci=!0),Ko.add(f,l),l.B=0}}function fl(l,f){return Wd(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ns(C(l.Ga,l,f),oh(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let L=new ui(this,this.j,l),B=this.o;if(this.S&&(B?(B=w(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(f+=x,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=fi(this,L,f),m=xr(this.I),ft(m,"RID",l),ft(m,"CVER",22),this.D&&ft(m,"X-HTTP-Session-Id",this.D),ms(this,m),B&&(this.O?f="headers="+encodeURIComponent(String(Zd(B)))+"&"+f:this.m&&fs(m,this.m,B)),yr(this.h,L),this.Ua&&ft(m,"TYPE","init"),this.P?(ft(m,"$req",f),ft(m,"SID","null"),L.T=!0,rl(L,m,null)):rl(L,m,f),this.G=2}}else this.G==3&&(l?nh(this,l):this.i.length==0||Gd(this.h)||nh(this))};function nh(l,f){var m;f?m=f.l:m=l.U++;let x=xr(l.I);ft(x,"SID",l.K),ft(x,"RID",m),ft(x,"AID",l.T),ms(l,x),l.m&&l.o&&fs(x,l.m,l.o),m=new ui(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=fi(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yr(l.h,m),rl(m,x,f)}function ms(l,f){l.H&&ge(l.H,function(m,x){ft(f,x,m)}),l.l&&lt({},function(m,x){ft(f,x,m)})}function fi(l,f,m){m=Math.min(l.i.length,m);var x=l.l?C(l.l.Na,l.l,l):null;e:{var L=l.i;let B=-1;for(;;){let W=["count="+m];B==-1?0<m?(B=L[0].g,W.push("ofs="+B)):B=0:W.push("ofs="+B);let Je=!0;for(let kt=0;kt<m;kt++){let Ze=L[kt].g,wn=L[kt].map;if(Ze-=B,0>Ze)B=Math.max(0,L[kt].g-100),Je=!1;else try{Jd(wn,W,"req"+Ze+"_")}catch{x&&x(wn)}}if(Je){x=W.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,x}function rh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ma||zp(),ci||(ma(),ci=!0),Ko.add(f,l),l.v=0}}function pl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ns(C(l.Fa,l),oh(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ns(C(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),gs(this),ih(this))};function gl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function ih(l){l.g=new ui(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=xr(l.qa);ft(f,"RID","rpc"),ft(f,"SID",l.K),ft(f,"AID",l.T),ft(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ft(f,"TO",l.ja),ft(f,"TYPE","xmlhttp"),ms(l,f),l.m&&l.o&&fs(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=al(xr(f)),m.m=null,m.P=!0,il(m,l)}n.Za=function(){this.C!=null&&(this.C=null,gs(this),pl(this),pn(19))};function to(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function vn(l,f){var m=null;if(l.g==f){to(l),gl(l),l.g=null;var x=2}else if(Kd(l.h,f))m=f.D,tr(l.h,f),x=1;else return;if(l.G!=0){if(f.o)if(x==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;x=tl(),sn(x,new Ea(x,m)),ka(l)}else rh(l);else if(L=f.s,L==3||L==0&&0<f.X||!(x==1&&fl(l,f)||x==2&&pl(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),L){case 1:pi(l,5);break;case 4:pi(l,10);break;case 3:pi(l,6);break;default:pi(l,2)}}}function oh(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function pi(l,f){if(l.j.info("Error code "+f),f==2){var m=C(l.fb,l),x=l.Xa;let L=!x;x=new nr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xa(x,"https"),al(x),L?cg(x.toString(),m):Pa(x.toString(),m)}else pn(2);l.G=0,l.l&&l.l.sa(f),no(l),hl(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function no(l){if(l.G=0,l.ka=[],l.l){let f=ls(l.h);(f.length!=0||l.i.length!=0)&&(O(l.ka,f),O(l.ka,l.i),l.h.i.length=0,V(l.i),l.i.length=0),l.l.ra()}}function u(l,f,m){var x=m instanceof nr?xr(m):new nr(m);if(x.g!="")f&&(x.g=f+"."+x.g),sl(x,x.s);else{var L=a.location;x=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var B=new nr(null);x&&xa(B,x),f&&(B.g=f),L&&sl(B,L),m&&(B.l=m),x=B}return m=l.D,f=l.ya,m&&f&&ft(x,m,f),ft(x,"VER",l.la),ms(l,x),x}function p(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new tt(new ut({eb:m})):new tt(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function R(){}R.prototype.g=function(l,f){return new N(l,f)};function N(l,f){Qt.call(this),this.g=new th(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!re(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!re(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new we(this)}k(N,Qt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){dl(this.g)},N.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=wa(l),l=m);f.i.push(new qd(f.Ya++,l)),f.G==3&&ka(f)},N.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,N.aa.N.call(this)};function U(l){Yt.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(U,Yt);function Q(){el.call(this),this.status=1}k(Q,el);function we(l){this.g=l}k(we,_),we.prototype.ua=function(){sn(this.g,"a")},we.prototype.ta=function(l){sn(this.g,new U(l))},we.prototype.sa=function(l){sn(this.g,new Q)},we.prototype.ra=function(){sn(this.g,"b")},R.prototype.createWebChannel=R.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,sA=Bo.createWebChannelTransport=function(){return new R},oA=Bo.getStatEventTarget=function(){return tl()},iA=Bo.Event=er,Kv=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,Xf=Bo.ErrorCode=ba,nl.COMPLETE="complete",rA=Bo.EventType=nl,Xo.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,id=Bo.WebChannel=Xo,Mee=Bo.FetchXmlHttpFactory=ut,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,nA=Bo.XhrIo=tt}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var KU="@firebase/firestore";var hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");var bd="10.14.0";var Rc=new js("@firebase/firestore");function ep(){return Rc.logLevel}function ce(n,...e){if(Rc.logLevel<=ze.DEBUG){let t=e.map($M);Rc.debug(`Firestore (${bd}): ${n}`,...t)}}function zo(n,...e){if(Rc.logLevel<=ze.ERROR){let t=e.map($M);Rc.error(`Firestore (${bd}): ${n}`,...t)}}function dd(n,...e){if(Rc.logLevel<=ze.WARN){let t=e.map($M);Rc.warn(`Firestore (${bd}): ${n}`,...t)}}function $M(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ie(n="Unexpected state"){let e=`FIRESTORE (${bd}) INTERNAL ASSERTION FAILED: `+n;throw zo(e),new Error(e)}function ct(n,e){n||Ie()}function Ae(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends On{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ii=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Xv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}},hA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fA=class{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>T(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new Xv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new hn(e)}},pA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new pA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mA=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yA=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(this.o===void 0);let r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string"),this.R=t.token,new mA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function xee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var e0=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=xee(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function et(n,e){return n<e?-1:n>e?1:0}function hd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var yn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Oe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new yn(0,0))}static max(){return new n(new yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var t0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(),r===void 0?r=e.length-t:r>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Dt=class n extends t0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Ree=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gr=class n extends t0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Ree.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ne($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ye=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};var _A=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};_A.UNKNOWN_ID=-1;function Pee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new yn(t+1,0):new yn(t,r));return new Pc(i,ye.empty(),e)}function kee(n){return new Pc(n.readTime,n.key,-1)}var Pc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Oe.min(),ye.empty(),-1)}static max(){return new n(Oe.max(),ye.empty(),-1)}};function Oee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}var Nee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wp(n){return T(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==Nee)throw n;ce("LocalStore","Unexpectedly lost primary lease")})}var K=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(h=>{s[d]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Lee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ep(n){return n.name==="IndexedDbTransactionError"}var AB=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function k0(n){return n==null}function sp(n){return n===0&&1/n==-1/0}function Fee(n){return typeof n=="number"&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Vee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MEe=[...Vee,"documentOverlays"],Uee=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bee=Uee,jee=[...Bee,"indexConfiguration","indexState","indexEntries"];var xEe=[...jee,"globals"];function QU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}},cd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ji=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();let e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}};ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1;ji.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ji(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xn=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},n0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ar=class n{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new n([])}unionWith(e){let t=new xn(gr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var r0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new r0("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Rn.EMPTY_BYTE_STRING=new Rn("");var zee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(ct(!!n),typeof n=="string"){let e=0,t=zee.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}function qM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function HM(n){let e=n.mapValue.fields.__previous_value__;return qM(e)?HM(e):e}function ap(n){let e=$o(n.mapValue.fields.__local_write_time__.timestampValue);return new yn(e.seconds,e.nanos)}var wA=class{constructor(e,t,r,i,o,s,a,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},i0=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Qv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qM(n)?4:RB(n)?9007199254740991:xB(n)?10:11:Ie()}function qi(n,e){if(n===e)return!0;let t=kc(n);if(t!==kc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ap(n).isEqual(ap(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$o(i.timestampValue),a=$o(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return oa(i.bytesValue).isEqual(oa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ct(i.geoPointValue.latitude)===Ct(o.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ct(i.integerValue)===Ct(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ct(i.doubleValue),a=Ct(o.doubleValue);return s===a?sp(s)===sp(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return hd(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(QU(s)!==QU(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!qi(s[c],a[c])))return!1;return!0}(n,e);default:return Ie()}}function cp(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function fd(n,e){if(n===e)return 0;let t=kc(n),r=kc(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ct(o.integerValue||o.doubleValue),c=Ct(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return YU(n.timestampValue,e.timestampValue);case 4:return YU(ap(n),ap(e));case 5:return et(n.stringValue,e.stringValue);case 6:return function(o,s){let a=oa(o),c=oa(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=et(a[d],c[d]);if(h!==0)return h}return et(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=et(Ct(o.latitude),Ct(s.latitude));return a!==0?a:et(Ct(o.longitude),Ct(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return JU(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,d,h;let g=o.fields||{},C=s.fields||{},S=(a=g.value)===null||a===void 0?void 0:a.arrayValue,k=(c=C.value)===null||c===void 0?void 0:c.arrayValue,V=et(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return V!==0?V:JU(S,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Qv.mapValue&&s===Qv.mapValue)return 0;if(o===Qv.mapValue)return 1;if(s===Qv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let C=et(c[g],h[g]);if(C!==0)return C;let S=fd(a[c[g]],d[h[g]]);if(S!==0)return S}return et(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function YU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);let t=$o(n),r=$o(e),i=et(t.seconds,r.seconds);return i!==0?i:et(t.nanos,r.nanos)}function JU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=fd(t[i],r[i]);if(o)return o}return et(t.length,r.length)}function pd(n){return EA(n)}function EA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=$o(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=EA(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${EA(t.fields[s])}`;return i+"}"}(n.mapValue):Ie()}function ZU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function IA(n){return!!n&&"integerValue"in n}function GM(n){return!!n&&"arrayValue"in n}function XU(n){return!!n&&"nullValue"in n}function eB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jv(n){return!!n&&"mapValue"in n}function xB(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function np(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Vc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=np(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=np(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var pr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=np(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=np(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Jv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vc(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(np(this.value))}};function PB(n){let e=[];return Vc(n.fields,(t,r)=>{let i=new gr([t]);if(Jv(r)){let o=PB(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ar(e)}var oi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Oe.min(),Oe.min(),Oe.min(),pr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Oe.min(),Oe.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Oe.min(),Oe.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gd=class{constructor(e,t){this.position=e,this.inclusive=t}};function tB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(s.referenceValue),t.key):r=fd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nB(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}var Oc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $ee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var o0=class{},Ht=class n extends o0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TA(e,t,r):t==="array-contains"?new DA(e,r):t==="in"?new AA(e,r):t==="not-in"?new MA(e,r):t==="array-contains-any"?new xA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CA(e,r):new SA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fd(t,this.value)):t!==null&&kc(this.value)===kc(t)&&this.matchesComparison(fd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},si=class n extends o0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return kB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function kB(n){return n.op==="and"}function OB(n){return qee(n)&&kB(n)}function qee(n){for(let e of n.filters)if(e instanceof si)return!1;return!0}function bA(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+pd(n.value);if(OB(n))return n.filters.map(e=>bA(e)).join(",");{let e=n.filters.map(t=>bA(t)).join(",");return`${n.op}(${e})`}}function NB(n,e){return n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)}(n,e):n instanceof si?function(r,i){return i instanceof si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&NB(s,i.filters[a]),!0):!1}(n,e):void Ie()}function LB(n){return n instanceof Ht?function(t){return`${t.field.canonicalString()} ${t.op} ${pd(t.value)}`}(n):n instanceof si?function(t){return t.op.toString()+" {"+t.getFilters().map(LB).join(" ,")+"}"}(n):"Filter"}var TA=class extends Ht{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){let t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}},CA=class extends Ht{constructor(e,t){super(e,"in",t),this.keys=FB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},SA=class extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=FB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function FB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}var DA=class extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return GM(t)&&cp(t.arrayValue,this.value)}},AA=class extends Ht{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&cp(this.value.arrayValue,t)}},MA=class extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!cp(this.value.arrayValue,t)}},xA=class extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!GM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cp(this.value.arrayValue,r))}};var RA=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function rB(n,e=null,t=[],r=[],i=null,o=null,s=null){return new RA(n,e,t,r,i,o,s)}function WM(n){let e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),k0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pd(r)).join(",")),e.ue=t}return e.ue}function KM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$ee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nB(n.startAt,e.startAt)&&nB(n.endAt,e.endAt)}function PA(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var sa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Hee(n,e,t,r,i,o,s,a){return new sa(n,e,t,r,i,o,s,a)}function QM(n){return new sa(n)}function iB(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VB(n){return n.collectionGroup!==null}function rp(n){let e=Ae(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xn(gr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Oc(o,r))}),t.has(gr.keyField().canonicalString())||e.ce.push(new Oc(gr.keyField(),r))}return e.ce}function zi(n){let e=Ae(n);return e.le||(e.le=Gee(e,rp(n))),e.le}function Gee(n,e){if(n.limitType==="F")return rB(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Oc(i.field,o)});let t=n.endAt?new gd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gd(n.startAt.position,n.startAt.inclusive):null;return rB(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kA(n,e){let t=n.filters.concat([e]);return new sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function s0(n,e,t){return new sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function O0(n,e){return KM(zi(n),zi(e))&&n.limitType===e.limitType}function UB(n){return`${WM(zi(n))}|lt:${n.limitType}`}function od(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LB(i)).join(", ")}]`),k0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>pd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>pd(i)).join(",")),`Target(${r})`}(zi(n))}; limitType=${n.limitType})`}function N0(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of rp(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let d=tB(s,a,c);return s.inclusive?d<=0:d<0}(r.startAt,rp(r),i)||r.endAt&&!function(s,a,c){let d=tB(s,a,c);return s.inclusive?d>=0:d>0}(r.endAt,rp(r),i))}(n,e)}function Wee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BB(n){return(e,t)=>{let r=!1;for(let i of rp(n)){let o=Kee(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Kee(n,e,t){let r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?fd(c,d):Ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}var aa=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vc(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return MB(this.inner)}size(){return this.innerSize}};var Qee=new Rt(ye.comparator);function qo(){return Qee}var jB=new Rt(ye.comparator);function tp(...n){let e=jB;for(let t of n)e=e.insert(t.key,t);return e}function zB(n){let e=jB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ac(){return ip()}function $B(){return ip()}function ip(){return new aa(n=>n.toString(),(n,e)=>n.isEqual(e))}var Yee=new Rt(ye.comparator),Jee=new xn(ye.comparator);function $e(...n){let e=Jee;for(let t of n)e=e.add(t);return e}var Zee=new xn(et);function Xee(){return Zee}function YM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function qB(n){return{integerValue:""+n}}function ete(n,e){return Fee(e)?qB(e):YM(n,e)}var md=class{constructor(){this._=void 0}};function tte(n,e,t){return n instanceof yd?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qM(o)&&(o=HM(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Nc?GB(n,e):n instanceof Lc?WB(n,e):function(i,o){let s=HB(i,o),a=oB(s)+oB(i.Pe);return IA(s)&&IA(i.Pe)?qB(a):YM(i.serializer,a)}(n,e)}function nte(n,e,t){return n instanceof Nc?GB(n,e):n instanceof Lc?WB(n,e):t}function HB(n,e){return n instanceof _d?function(r){return IA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var yd=class extends md{},Nc=class extends md{constructor(e){super(),this.elements=e}};function GB(n,e){let t=KB(e);for(let r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Lc=class extends md{constructor(e){super(),this.elements=e}};function WB(n,e){let t=KB(e);for(let r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}var _d=class extends md{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function oB(n){return Ct(n.integerValue||n.doubleValue)}function KB(n){return GM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Nc&&i instanceof Nc||r instanceof Lc&&i instanceof Lc?hd(r.elements,i.elements,qi):r instanceof _d&&i instanceof _d?qi(r.Pe,i.Pe):r instanceof yd&&i instanceof yd}(n.transform,e.transform)}var OA=class{constructor(e,t){this.version=e,this.transformResults=t}},jo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Zv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vd=class{};function QB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lp(n.key,jo.none()):new Fc(n.key,n.data,jo.none());{let t=n.data,r=pr.empty(),i=new xn(gr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hi(n.key,r,new Ar(i.toArray()),jo.none())}}function ite(n,e,t){n instanceof Fc?function(i,o,s){let a=i.value.clone(),c=aB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hi?function(i,o,s){if(!Zv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=aB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(YB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function op(n,e,t,r){return n instanceof Fc?function(o,s,a,c){if(!Zv(o.precondition,s))return a;let d=o.value.clone(),h=cB(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hi?function(o,s,a,c){if(!Zv(o.precondition,s))return a;let d=cB(o.fieldTransforms,c,s),h=s.data;return h.setAll(YB(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return Zv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function ote(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=HB(r.transform,i||null);o!=null&&(t===null&&(t=pr.empty()),t.set(r.field,o))}return t||null}function sB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hd(r,i,(o,s)=>rte(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fc=class extends vd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hi=class extends vd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function aB(n,e,t){let r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,nte(s,a,t[i]))}return r}function cB(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,tte(o,s,e))}return r}var lp=class extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},NA=class extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var LA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ite(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=op(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=op(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$B();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=QB(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&hd(this.mutations,e.mutations,(t,r)=>sB(t,r))&&hd(this.baseMutations,e.baseMutations,(t,r)=>sB(t,r))}},FA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=function(){return Yee}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var VA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Qe;function ste(n){switch(n){default:return Ie();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function JB(n){if(n===void 0)return zo("GRPC error has no .code"),$.UNKNOWN;switch(n){case $t.OK:return $.OK;case $t.CANCELLED:return $.CANCELLED;case $t.UNKNOWN:return $.UNKNOWN;case $t.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case $t.INTERNAL:return $.INTERNAL;case $t.UNAVAILABLE:return $.UNAVAILABLE;case $t.UNAUTHENTICATED:return $.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case $t.NOT_FOUND:return $.NOT_FOUND;case $t.ALREADY_EXISTS:return $.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return $.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case $t.ABORTED:return $.ABORTED;case $t.OUT_OF_RANGE:return $.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return $.UNIMPLEMENTED;case $t.DATA_LOSS:return $.DATA_LOSS;default:return Ie()}}(Qe=$t||($t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var lB=null;function ate(){return new TextEncoder}var cte=new ra([4294967295,4294967295],0);function uB(n){let e=ate().encode(n),t=new tA;return t.update(e),new Uint8Array(t.digest())}function dB(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ra([t,r],0),new ra([i,o],0)]}var BA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mc(`Invalid padding: ${t}`);if(r<0)throw new Mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ra.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ra.fromNumber(r)));return i.compare(cte)===1&&(i=new ra([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=uB(e),[r,i]=dB(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=uB(e),[r,i]=dB(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Mc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var a0=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Oe.min(),i,new Rt(et),qo(),$e())}},up=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var ld=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},c0=class{constructor(e,t){this.targetId=e,this.me=t}},l0=class{constructor(e,t,r=Rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},u0=class{constructor(){this.fe=0,this.ge=fB(),this.pe=Rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),t=$e(),r=$e();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie()}}),new up(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=fB()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},jA=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qo(),this.qe=hB(),this.Qe=new Rt(et)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(PA(o))if(r===0){let s=new ye(o.path);this.Ue(t,s,oi.newNoDocument(s,Oe.min()))}else ct(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}lB?.et(function(h,g,C,S,k){var V,O,H,re,Z,de;let qe={localCacheCount:h,existenceFilterCount:g.count,databaseId:C.database,projectId:C.projectId},ge=g.unchangedNames;return ge&&(qe.bloomFilter={applied:k===0,hashCount:(V=ge?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(re=(H=(O=ge?.bits)===null||O===void 0?void 0:O.bitmap)===null||H===void 0?void 0:H.length)!==null&&re!==void 0?re:0,padding:(de=(Z=ge?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&de!==void 0?de:0,mightContain:M=>{var w;return(w=S?.mightContain(M))!==null&&w!==void 0&&w}}),qe}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=oa(r).toUint8Array()}catch(c){if(c instanceof r0)return dd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new BA(s,i,o)}catch(c){return dd(c instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&PA(a.target)){let c=new ye(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,oi.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=$e();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new a0(e,t,this.Qe,this.ke,r);return this.ke=qo(),this.qe=hB(),this.Qe=new Rt(et),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new u0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xn(et),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new u0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function hB(){return new Rt(ye.comparator)}function fB(){return new Rt(ye.comparator)}var lte={asc:"ASCENDING",desc:"DESCENDING"},ute={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dte={and:"AND",or:"OR"},zA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $A(n,e){return n.useProto3Json||k0(e)?e:{value:e}}function d0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hte(n,e){return d0(n,e.toTimestamp())}function $i(n){return ct(!!n),Oe.fromTimestamp(function(t){let r=$o(t);return new yn(r.seconds,r.nanos)}(n))}function JM(n,e){return qA(n,e).canonicalString()}function qA(n,e){let t=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XB(n){let e=Dt.fromString(n);return ct(i4(e)),e}function HA(n,e){return JM(n.databaseId,e.path)}function aA(n,e){let t=XB(e);if(t.get(1)!==n.databaseId.projectId)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(t4(t))}function e4(n,e){return JM(n.databaseId,e)}function fte(n){let e=XB(n);return e.length===4?Dt.emptyPath():t4(e)}function GA(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t4(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pB(n,e,t){return{name:HA(n,e),fields:t.value.mapValue.fields}}function pte(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(ct(h===void 0||typeof h=="string"),Rn.fromBase64String(h||"")):(ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Rn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let h=d.code===void 0?$.UNKNOWN:JB(d.code);return new ne(h,d.message||"")}(s);t=new l0(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=aA(n,r.document.name),o=$i(r.document.updateTime),s=r.document.createTime?$i(r.document.createTime):Oe.min(),a=new pr({mapValue:{fields:r.document.fields}}),c=oi.newFoundDocument(i,o,s,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new ld(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=aA(n,r.document),o=r.readTime?$i(r.readTime):Oe.min(),s=oi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ld([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=aA(n,r.document),o=r.removedTargetIds||[];t=new ld([],o,i,null)}else{if(!("filter"in e))return Ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new UA(i,o),a=r.targetId;t=new c0(a,s)}}return t}function gte(n,e){let t;if(e instanceof Fc)t={update:pB(n,e.key,e.value)};else if(e instanceof lp)t={delete:HA(n,e.key)};else if(e instanceof Hi)t={update:pB(n,e.key,e.data),updateMask:Tte(e.fieldMask)};else{if(!(e instanceof NA))return Ie();t={verify:HA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof yd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Nc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _d)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:hte(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie()}(n,e.precondition)),t}function mte(n,e){return n&&n.length>0?(ct(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?$i(i.updateTime):$i(o);return s.isEqual(Oe.min())&&(s=$i(o)),new OA(s,i.transformResults||[])}(t,e))):[]}function yte(n,e){return{documents:[e4(n,e.path)]}}function _te(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=e4(n,i);let o=function(d){if(d.length!==0)return r4(si.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(h=>function(C){return{field:sd(C.field),direction:Ete(C.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=$A(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function vte(n){let e=fte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ct(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let C=n4(g);return C instanceof si&&OB(C)?C.getFilters():[C]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(C=>function(k){return new Oc(ad(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(C))}(t.orderBy));let a=null;t.limit&&(a=function(g){let C;return C=typeof g=="object"?g.value:g,k0(C)?null:C}(t.limit));let c=null;t.startAt&&(c=function(g){let C=!!g.before,S=g.values||[];return new gd(S,C)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let C=!g.before,S=g.values||[];return new gd(S,C)}(t.endAt)),Hee(e,i,s,o,a,"F",c,d)}function wte(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n4(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ad(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ad(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ad(t.unaryFilter.field);return Ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ad(t.unaryFilter.field);return Ht.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return Ht.create(ad(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return si.create(t.compositeFilter.filters.map(r=>n4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function Ete(n){return lte[n]}function Ite(n){return ute[n]}function bte(n){return dte[n]}function sd(n){return{fieldPath:n.canonicalString()}}function ad(n){return gr.fromServerFormat(n.fieldPath)}function r4(n){return n instanceof Ht?function(t){if(t.op==="=="){if(eB(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NAN"}};if(XU(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eB(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NOT_NAN"}};if(XU(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sd(t.field),op:Ite(t.op),value:t.value}}}(n):n instanceof si?function(t){let r=t.getFilters().map(i=>r4(i));return r.length===1?r[0]:{compositeFilter:{op:bte(t.op),filters:r}}}(n):Ie()}function Tte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var dp=class n{constructor(e,t,r,i,o=Oe.min(),s=Oe.min(),a=Rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var WA=class{constructor(e){this.ct=e}};function Cte(n){let e=vte({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?s0(e,e.limit,"L"):e}var h0=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ct(e.integerValue));else if("doubleValue"in e){let r=Ct(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),sp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=$o(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(oa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?RB(e)?this.dt(t,Number.MAX_SAFE_INTEGER):xB(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ct(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};h0.vt=new h0;var KA=class{constructor(){this.un=new QA}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Pc.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Pc.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},QA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xn(Dt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(Dt.comparator)).toArray()}};var PEe=new Uint8Array(0);var Bi=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);var hp=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var YA=class{constructor(){this.changes=new aa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var JA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ZA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&op(r.mutation,i,Ar.empty(),yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=Ac();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=tp();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ac();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qo(),s=ip(),a=function(){return ip()}();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Hi)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),op(h.mutation,d,h.mutation.getFieldMask(),yn.now())):s.set(d.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new JA(h,(g=s.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ip(),i=new Rt((s,a)=>s-a),o=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Ar.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||$e()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=$B();h.forEach(C=>{if(!o.has(C)){let S=QB(t.get(C),r.get(C));S!==null&&g.set(C,S),o=o.add(C)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return K.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):K.resolve(Ac()),a=-1,c=o;return s.next(d=>K.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(C=>{c=c.insert(h,C)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,$e())).next(h=>({batchId:a,changes:zB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=tp();return this.indexManager.getCollectionParents(e,o).next(a=>K.forEach(a,c=>{let d=function(g,C){return new sa(C,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,C)=>{s=s.insert(g,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,oi.newInvalidDocument(h)))});let a=tp();return s.forEach((c,d)=>{let h=o.get(c);h!==void 0&&op(h.mutation,d,Ar.empty(),yn.now()),N0(t,d)&&(a=a.insert(c,d))}),a})}};var XA=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$i(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Cte(i.bundledQuery),readTime:$i(i.readTime)}}(t)),K.resolve()}};var eM=class{constructor(){this.overlays=new Rt(ye.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ac();return K.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){let i=Ac(),o=t.length+1,s=new ye(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Rt((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Ac(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Ac(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return K.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new VA(t,r));let o=this.Ir.get(t);o===void 0&&(o=$e(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var tM=class{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}};var fp=class{constructor(){this.Tr=new xn(qt.Er),this.dr=new xn(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new qt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ye(new Dt([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ye(new Dt([])),r=new qt(t,e),i=new qt(t,e+1),o=$e();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||et(e.wr,t.wr)}static Ar(e,t){return et(e.wr,t.wr)||ye.comparator(e.key,t.key)}};var nM=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xn(qt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new LA(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new qt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(s)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(et);return t.forEach(i=>{let o=new qt(i,0),s=new qt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ye.isDocumentKey(o)||(o=o.child(""));let s=new qt(new ye(o),0),a=new xn(et);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},s),K.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ct(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new qt(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rM=class{constructor(e){this.Mr=e,this.docs=function(){return new Rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():oi.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():oi.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qo(),s=t.path,a=new ye(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||Oee(kee(h),r)<=0||(i.has(h.key)||N0(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ie()}Or(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iM(this)}getSize(e){return K.resolve(this.size)}},iM=class extends YA{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var oM=class{constructor(e){this.persistence=e,this.Nr=new aa(t=>WM(t),KM),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fp,this.targetCount=0,this.kr=hp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new hp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}};var sM=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new AB(0),this.Kr=!1,this.Kr=!0,this.$r=new tM,this.referenceDelegate=e(this),this.Ur=new oM(this),this.indexManager=new KA,this.remoteDocumentCache=function(i){return new rM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new WA(t),this.Gr=new XA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new nM(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);let i=new aM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},aM=class extends vA{constructor(e){super(),this.currentSequenceNumber=e}},cM=class n{constructor(e){this.persistence=e,this.Jr=new fp,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{let i=ye.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var lM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=$e(),i=$e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dM=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bL()?8:Lee(un())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uM;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ep()<=ze.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",od(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(ep()<=ze.DEBUG&&ce("QueryEngine","Query:",od(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ep()<=ze.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",od(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):K.resolve())}Yi(e,t){if(iB(t))return K.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=s0(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=$e(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,a);return this.ns(t,d,s,c.readTime)?this.Yi(e,s0(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return iB(t)||i.isEqual(Oe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?K.resolve(null):(ep()<=ze.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),od(t)),this.rs(e,s,t,Pee(i,-1)).next(a=>a))})}ts(e,t){let r=new xn(BB(e));return t.forEach((i,o)=>{N0(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ep()<=ze.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",od(t)),this.Ji.getDocumentsMatchingQuery(e,t,Pc.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var hM=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Rt(et),this._s=new aa(o=>WM(o),KM),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Ste(n,e,t,r){return new hM(n,e,t,r)}function o4(n,e){return T(this,null,function*(){let t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=$e();for(let d of i){s.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of o){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:a}))})})})}function Dte(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){let g=d.batch,C=g.keys(),S=K.resolve();return C.forEach(k=>{S=S.next(()=>h.getEntry(c,k)).next(V=>{let O=d.docVersions.get(k);ct(O!==null),V.version.compareTo(O)<0&&(g.applyToRemoteDocument(V,d),V.isValidDocument()&&(V.setReadTime(d.commitVersion),h.addEntry(V)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=$e();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function s4(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Ate(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,g)=>{let C=i.get(g);if(!C)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,g)));let S=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(Rn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),function(V,O,H){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(C,S,h)&&a.push(t.Ur.updateTargetData(o,S))});let c=qo(),d=$e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Mte(o,s,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(Oe.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return K.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.os=i,o))}function Mte(n,e,t){let r=$e(),i=$e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qo();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Oe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function xte(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rte(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new dp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function fM(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ep(s))throw s;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gB(n,e,t){let r=Ae(n),i=Oe.min(),o=$e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){let g=Ae(c),C=g._s.get(h);return C!==void 0?K.resolve(g.os.get(C)):g.Ur.getTargetData(d,h)}(r,s,zi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Oe.min(),t?o:$e())).next(a=>(Pte(r,Wee(e),a),{documents:a,Ts:o})))}function Pte(n,e,t){let r=n.us.get(e)||Oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var f0=class{constructor(){this.activeTargetIds=Xee()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pM=class{constructor(){this.so=new f0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new f0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gM=class{_o(e){}shutdown(){}};var p0=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yv=null;function cA(){return Yv===null?Yv=function(){return 268435456+Math.round(2147483648*Math.random())}():Yv++,"0x"+Yv.toString(16)}var kte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var mM=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mn="WebChannelConnection",yM=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=cA(),c=this.xo(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,c,d,i).then(h=>(ce("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw dd("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bd}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=kte[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=cA();return new Promise((s,a)=>{let c=new nA;c.setWithCredentials(!0),c.listenOnce(rA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xf.NO_ERROR:let h=c.getResponseJson();ce(Mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Xf.TIMEOUT:ce(Mn,`RPC '${e}' ${o} timed out`),a(new ne($.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:let g=c.getStatus();if(ce(Mn,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let C=c.getResponseJson();Array.isArray(C)&&(C=C[0]);let S=C?.error;if(S&&S.status&&S.message){let k=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(H)>=0?H:$.UNKNOWN}(S.status);a(new ne(k,S.message))}else a(new ne($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ne($.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ce(Mn,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);ce(Mn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=cA(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sA(),a=oA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");ce(Mn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c),C=!1,S=!1,k=new mM({Io:O=>{S?ce(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(C||(ce(Mn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),C=!0),ce(Mn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},To:()=>g.close()}),V=(O,H,re)=>{O.listen(H,Z=>{try{re(Z)}catch(de){setTimeout(()=>{throw de},0)}})};return V(g,id.EventType.OPEN,()=>{S||(ce(Mn,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),V(g,id.EventType.CLOSE,()=>{S||(S=!0,ce(Mn,`RPC '${e}' stream ${i} transport closed`),k.So())}),V(g,id.EventType.ERROR,O=>{S||(S=!0,dd(Mn,`RPC '${e}' stream ${i} transport errored:`,O),k.So(new ne($.UNAVAILABLE,"The operation could not be completed")))}),V(g,id.EventType.MESSAGE,O=>{var H;if(!S){let re=O.data[0];ct(!!re);let Z=re,de=Z.error||((H=Z[0])===null||H===void 0?void 0:H.error);if(de){ce(Mn,`RPC '${e}' stream ${i} received error:`,de);let qe=de.status,ge=function(I){let A=$t[I];if(A!==void 0)return JB(A)}(qe),M=de.message;ge===void 0&&(ge=$.INTERNAL,M="Unknown error status: "+qe+" with message "+de.message),S=!0,k.So(new ne(ge,M)),g.close()}else ce(Mn,`RPC '${e}' stream ${i} received:`,re),k.bo(re)}}),V(a,iA.STAT_EVENT,O=>{O.stat===Kv.PROXY?ce(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Kv.NOPROXY&&ce(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function lA(){return typeof document<"u"?document:null}function L0(n){return new zA(n,!0)}var g0=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var m0=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g0(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return T(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return T(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return T(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new ne($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>T(this,null,function*(){this.state=0,this.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_M=class extends m0{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=pte(this.serializer,e),r=function(o){if(!("targetChange"in o))return Oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Oe.min():s.readTime?$i(s.readTime):Oe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=GA(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=PA(c)?{documents:yte(o,c)}:{query:_te(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ZB(o,s.resumeToken);let d=$A(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Oe.min())>0){a.readTime=d0(o,s.snapshotVersion.toTimestamp());let d=$A(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=wte(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=GA(this.serializer),t.removeTarget=e,this.a_(t)}},vM=class extends m0{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=mte(e.writeResults,e.commitTime),r=$i(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=GA(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>gte(this.serializer,r))};this.a_(t)}};var wM=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,qA(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne($.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,qA(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne($.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},EM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zo(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var IM=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>T(this,null,function*(){Uc(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),yield function(c){return T(this,null,function*(){let d=Ae(c);d.L_.add(4),yield Ip(d),d.q_.set("Unknown"),d.L_.delete(4),yield F0(d)})}(this))}))}),this.q_=new EM(r,i)}};function F0(n){return T(this,null,function*(){if(Uc(n))for(let e of n.B_)yield e(!0)})}function Ip(n){return T(this,null,function*(){for(let e of n.B_)yield e(!1)})}function a4(n,e){let t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tx(t)?ex(t):Td(t).r_()&&XM(t,e))}function ZM(n,e){let t=Ae(n),r=Td(t);t.N_.delete(e),r.r_()&&c4(t,e),t.N_.size===0&&(r.r_()?r.o_():Uc(t)&&t.q_.set("Unknown"))}function XM(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Td(n).A_(e)}function c4(n,e){n.Q_.xe(e),Td(n).R_(e)}function ex(n){n.Q_=new jA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Td(n).start(),n.q_.v_()}function tx(n){return Uc(n)&&!Td(n).n_()&&n.N_.size>0}function Uc(n){return Ae(n).L_.size===0}function l4(n){n.Q_=void 0}function Ote(n){return T(this,null,function*(){n.q_.set("Online")})}function Nte(n){return T(this,null,function*(){n.N_.forEach((e,t)=>{XM(n,e)})})}function Lte(n,e){return T(this,null,function*(){l4(n),tx(n)?(n.q_.M_(e),ex(n)):n.q_.set("Unknown")})}function Fte(n,e,t){return T(this,null,function*(){if(n.q_.set("Online"),e instanceof l0&&e.state===2&&e.cause)try{yield function(i,o){return T(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield y0(n,r)}else if(e instanceof ld?n.Q_.Ke(e):e instanceof c0?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Oe.min()))try{let r=yield s4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Rn.EMPTY_BYTE_STRING,h.snapshotVersion)),c4(o,c);let g=new dp(h.target,c,d,h.sequenceNumber);XM(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),yield y0(n,r)}})}function y0(n,e,t){return T(this,null,function*(){if(!Ep(e))throw e;n.L_.add(1),yield Ip(n),n.q_.set("Offline"),t||(t=()=>s4(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield F0(n)}))})}function u4(n,e){return e().catch(t=>y0(n,t,e))}function V0(n){return T(this,null,function*(){let e=Ae(n),t=ca(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Vte(e);)try{let i=yield xte(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Ute(e,i)}catch(i){yield y0(e,i)}d4(e)&&h4(e)})}function Vte(n){return Uc(n)&&n.O_.length<10}function Ute(n,e){n.O_.push(e);let t=ca(n);t.r_()&&t.V_&&t.m_(e.mutations)}function d4(n){return Uc(n)&&!ca(n).n_()&&n.O_.length>0}function h4(n){ca(n).start()}function Bte(n){return T(this,null,function*(){ca(n).p_()})}function jte(n){return T(this,null,function*(){let e=ca(n);for(let t of n.O_)e.m_(t.mutations)})}function zte(n,e,t){return T(this,null,function*(){let r=n.O_.shift(),i=FA.from(r,e,t);yield u4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield V0(n)})}function $te(n,e){return T(this,null,function*(){e&&ca(n).V_&&(yield function(r,i){return T(this,null,function*(){if(function(s){return ste(s)&&s!==$.ABORTED}(i.code)){let o=r.O_.shift();ca(r).s_(),yield u4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield V0(r)}})}(n,e)),d4(n)&&h4(n)})}function mB(n,e){return T(this,null,function*(){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");let r=Uc(t);t.L_.add(3),yield Ip(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield F0(t)})}function qte(n,e){return T(this,null,function*(){let t=Ae(n);e?(t.L_.delete(2),yield F0(t)):e||(t.L_.add(2),yield Ip(t),t.q_.set("Unknown"))})}function Td(n){return n.K_||(n.K_=function(t,r,i){let o=Ae(t);return o.w_(),new _M(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Ote.bind(null,n),Ro:Nte.bind(null,n),mo:Lte.bind(null,n),d_:Fte.bind(null,n)}),n.B_.push(e=>T(null,null,function*(){e?(n.K_.s_(),tx(n)?ex(n):n.q_.set("Unknown")):(yield n.K_.stop(),l4(n))}))),n.K_}function ca(n){return n.U_||(n.U_=function(t,r,i){let o=Ae(t);return o.w_(),new vM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Bte.bind(null,n),mo:$te.bind(null,n),f_:jte.bind(null,n),g_:zte.bind(null,n)}),n.B_.push(e=>T(null,null,function*(){e?(n.U_.s_(),yield V0(n)):(yield n.U_.stop(),n.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var bM=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nx(n,e){if(zo("AsyncQueue",`${e}: ${n}`),Ep(n))return new ne($.UNAVAILABLE,`${e}: ${n}`);throw n}var _0=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=tp(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var v0=class{constructor(){this.W_=new Rt(ye.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},wd=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,_0.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&O0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var TM=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},CM=class{constructor(){this.queries=yB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=yB(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new ne($.ABORTED,"Firestore shutting down"))}};function yB(){return new aa(n=>UB(n),O0)}function f4(n,e){return T(this,null,function*(){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new TM,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=nx(s,`Initialization of query '${od(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&rx(t)})}function p4(n,e){return T(this,null,function*(){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Hte(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&rx(t)}function Gte(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function rx(n){n.Y_.forEach(e=>{e.next()})}var SM,_B;(_B=SM||(SM={})).ea="default",_B.Cache="cache";var w0=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new wd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==SM.Cache}};var E0=class{constructor(e){this.key=e}},I0=class{constructor(e){this.key=e}},DM=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=BB(e),this.Ra=new _0(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new v0,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let C=i.get(h),S=N0(this.query,g)?g:null,k=!!C&&this.mutatedKeys.has(C.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),O=!1;C&&S?C.data.isEqual(S.data)?k!==V&&(r.track({type:3,doc:S}),O=!0):this.ga(C,S)||(r.track({type:2,doc:S}),O=!0,(c&&this.Aa(S,c)>0||d&&this.Aa(S,d)<0)&&(a=!0)):!C&&S?(r.track({type:0,doc:S}),O=!0):C&&!S&&(r.track({type:1,doc:C}),O=!0,(c||d)&&(a=!0)),O&&(S?(s=s.add(S),o=V?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,g)=>function(S,k){let V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return V(S)-V(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new wd(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new v0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=$e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new I0(r))}),this.da.forEach(r=>{e.has(r)||t.push(new E0(r))}),t}ba(e){this.Ta=e.Ts,this.da=$e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},AM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},MM=class{constructor(e){this.key=e,this.va=!1}},xM=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new aa(a=>UB(a),O0),this.Ma=new Map,this.xa=new Set,this.Oa=new Rt(ye.comparator),this.Na=new Map,this.La=new fp,this.Ba={},this.ka=new Map,this.qa=hp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Wte(n,e,t=!0){return T(this,null,function*(){let r=w4(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield g4(r,e,t,!0),i})}function Kte(n,e){return T(this,null,function*(){let t=w4(n);yield g4(t,e,!0,!1)})}function g4(n,e,t,r){return T(this,null,function*(){let i=yield Rte(n.localStore,zi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Qte(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&a4(n.remoteStore,i),a})}function Qte(n,e,t,r,i){return T(this,null,function*(){n.Ka=(g,C,S)=>function(V,O,H,re){return T(this,null,function*(){let Z=O.view.ma(H);Z.ns&&(Z=yield gB(V.localStore,O.query,!1).then(({documents:M})=>O.view.ma(M,Z)));let de=re&&re.targetChanges.get(O.targetId),qe=re&&re.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(Z,V.isPrimaryClient,de,qe);return wB(V,O.targetId,ge.wa),ge.snapshot})}(n,g,C,S);let o=yield gB(n.localStore,e,!0),s=new DM(e,o.Ts),a=s.ma(o.documents),c=up.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);wB(n,t,d.wa);let h=new AM(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function Yte(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!O0(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fM(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ZM(r.remoteStore,i.targetId),RM(r,i.targetId)}).catch(wp))):(RM(r,i.targetId),yield fM(r.localStore,i.targetId,!0))})}function Jte(n,e){return T(this,null,function*(){let t=Ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ZM(t.remoteStore,r.targetId))})}function Zte(n,e,t){return T(this,null,function*(){let r=one(n);try{let i=yield function(s,a){let c=Ae(s),d=yn.now(),h=a.reduce((S,k)=>S.add(k.key),$e()),g,C;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let k=qo(),V=$e();return c.cs.getEntries(S,h).next(O=>{k=O,k.forEach((H,re)=>{re.isValidDocument()||(V=V.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,k)).next(O=>{g=O;let H=[];for(let re of a){let Z=ote(re,g.get(re.key).overlayedDocument);Z!=null&&H.push(new Hi(re.key,Z,PB(Z.value.mapValue),jo.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,H,a)}).next(O=>{C=O;let H=O.applyToLocalDocumentSet(g,V);return c.documentOverlayCache.saveOverlays(S,O.batchId,H)})}).then(()=>({batchId:C.batchId,changes:zB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new Rt(et)),d=d.insert(a,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,t),yield bp(r,i.changes),yield V0(r.remoteStore)}catch(i){let o=nx(i,"Failed to persist write");t.reject(o)}})}function m4(n,e){return T(this,null,function*(){let t=Ae(n);try{let r=yield Ate(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ct(s.va):i.removedDocuments.size>0&&(ct(s.va),s.va=!1))}),yield bp(t,r,e)}catch(r){yield wp(r)}})}function vB(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ae(s);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let C of g.j_)C.Z_(a)&&(d=!0)}),d&&rx(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xte(n,e,t){return T(this,null,function*(){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Rt(ye.comparator);s=s.insert(o,oi.newNoDocument(o,Oe.min()));let a=$e().add(o),c=new a0(Oe.min(),new Map,new Rt(et),s,a);yield m4(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),ix(r)}else yield fM(r.localStore,e,!1).then(()=>RM(r,e,t)).catch(wp)})}function ene(n,e){return T(this,null,function*(){let t=Ae(n),r=e.batch.batchId;try{let i=yield Dte(t.localStore,e);_4(t,r,null),y4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bp(t,i)}catch(i){yield wp(i)}})}function tne(n,e,t){return T(this,null,function*(){let r=Ae(n);try{let i=yield function(s,a){let c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(ct(g!==null),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);_4(r,e,t),y4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bp(r,i)}catch(i){yield wp(i)}})}function y4(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function _4(n,e,t){let r=Ae(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function RM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||v4(n,r)})}function v4(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ZM(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ix(n))}function wB(n,e,t){for(let r of t)r instanceof E0?(n.La.addReference(r.key,e),nne(n,r)):r instanceof I0?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||v4(n,r.key)):Ie()}function nne(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),ix(n))}function ix(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ye(Dt.fromString(e)),r=n.qa.next();n.Na.set(r,new MM(t)),n.Oa=n.Oa.insert(t,r),a4(n.remoteStore,new dp(zi(QM(t.path)),r,"TargetPurposeLimboResolution",AB.oe))}}function bp(n,e,t){return T(this,null,function*(){let r=Ae(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=lM.Wi(c.targetId,d);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,d){return T(this,null,function*(){let h=Ae(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(d,C=>K.forEach(C.$i,S=>h.persistence.referenceDelegate.addReference(g,C.targetId,S)).next(()=>K.forEach(C.Ui,S=>h.persistence.referenceDelegate.removeReference(g,C.targetId,S)))))}catch(g){if(!Ep(g))throw g;ce("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let C=g.targetId;if(!g.fromCache){let S=h.os.get(C),k=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(C,V)}}})}(r.localStore,o))})}function rne(n,e){return T(this,null,function*(){let t=Ae(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());let r=yield o4(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new ne($.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bp(t,r.hs)}})}function ine(n,e){let t=Ae(n),r=t.Na.get(e);if(r&&r.va)return $e().add(r.key);{let i=$e(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function w4(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=m4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ine.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xte.bind(null,e),e.Ca.d_=Hte.bind(null,e.eventManager),e.Ca.$a=Gte.bind(null,e.eventManager),e}function one(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ene.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tne.bind(null,e),e}var EB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=L0(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Ste(this.persistence,new dM,t.initialUser,this.serializer)}Ga(t){return new sM(cM.Zr,this.serializer)}Wa(t){return new pM}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var sne=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vB(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rne.bind(null,this.syncEngine),yield qte(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new CM}()}createDatastore(t){let r=L0(t.databaseInfo.databaseId),i=function(s){return new yM(s)}(t.databaseInfo);return function(s,a,c,d){return new wM(s,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new IM(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>vB(this.syncEngine,r,0),function(){return p0.D()?new p0:new gM}())}createSyncEngine(t,r){return function(o,s,a,c,d,h,g){let C=new xM(o,s,a,c,d,h);return g&&(C.Qa=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield function(o){return T(this,null,function*(){let s=Ae(o);ce("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ip(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var b0=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var PM=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=e0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>T(this,null,function*(){ce("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ce("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=nx(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function uA(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield o4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function IB(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ane(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mB(e.remoteStore,i)),n._onlineComponents=e})}function ane(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dd("Error using user provided cache. Falling back to memory cache: "+t),yield uA(n,new EB)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),yield uA(n,new EB);return n._offlineComponents})}function E4(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield IB(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),yield IB(n,new sne))),n._onlineComponents})}function cne(n){return E4(n).then(e=>e.syncEngine)}function I4(n){return T(this,null,function*(){let e=yield E4(n),t=e.eventManager;return t.onListen=Wte.bind(null,e.syncEngine),t.onUnlisten=Yte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kte.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jte.bind(null,e.syncEngine),t})}function lne(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return function(o,s,a,c,d){let h=new b0({next:C=>{h.Za(),s.enqueueAndForget(()=>p4(o,g));let S=C.docs.has(a);!S&&C.fromCache?d.reject(new ne($.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&C.fromCache&&c&&c.source==="server"?d.reject(new ne($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(C)},error:C=>d.reject(C)}),g=new w0(QM(a.path),h,{includeMetadataChanges:!0,_a:!0});return f4(o,g)}(yield I4(n),n.asyncQueue,e,t,r)})),r.promise}function une(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return function(o,s,a,c,d){let h=new b0({next:C=>{h.Za(),s.enqueueAndForget(()=>p4(o,g)),C.fromCache&&c.source==="server"?d.reject(new ne($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(C)},error:C=>d.reject(C)}),g=new w0(a,h,{includeMetadataChanges:!0,_a:!0});return f4(o,g)}(yield I4(n),n.asyncQueue,e,t,r)})),r.promise}function b4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bB=new Map;function T4(n,e,t){if(!t)throw new ne($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dne(n,e,t,r){if(e===!0&&r===!0)throw new ne($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TB(n){if(!ye.isDocumentKey(n))throw new ne($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CB(n){if(ye.isDocumentKey(n))throw new ne($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function U0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function Ho(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=U0(n);throw new ne($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hne(n,e){if(e<=0)throw new ne($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var T0=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ed=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dA;switch(r.type){case"firstParty":return new gA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=bB.get(t);r&&(ce("ComponentProvider","Removing Datastore"),bB.delete(t),r.terminate())}(this),Promise.resolve()}};function C4(n,e,t,r={}){var i;let o=(n=Ho(n,Ed))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=hn.MOCK_USER;else{a=c_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ne($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new hn(d)}n._authCredentials=new hA(new Xv(a,c))}}var la=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ia=class n extends la{constructor(e,t,r){super(e,t,QM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ye(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function S4(n,e,...t){if(n=wt(n),T4("collection","path",e),n instanceof Ed){let r=Dt.fromString(e,...t);return CB(r),new ia(n,null,r)}{if(!(n instanceof Xn||n instanceof ia))throw new ne($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return CB(r),new ia(n.firestore,null,r)}}function ox(n,e,...t){if(n=wt(n),arguments.length===1&&(e=e0.newId()),T4("doc","path",e),n instanceof Ed){let r=Dt.fromString(e,...t);return TB(r),new Xn(n,null,new ye(r))}{if(!(n instanceof Xn||n instanceof ia))throw new ne($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return TB(r),new Xn(n.firestore,n instanceof ia?n.converter:null,new ye(r))}}var C0=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g0(this,"async_queue_retry"),this.Vu=()=>{let r=lA();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=lA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=lA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ep(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw zo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=bM.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var ua=class extends Ed{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new C0,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,yield e}})}};function D4(n,e){let t=typeof n=="object"?n:$s(),r=typeof n=="string"?n:e||"(default)",i=lc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=a_("firestore");o&&C4(i,...o)}return i}function sx(n){if(n._terminated)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fne(n),n._firestoreClient}function fne(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,d,h){return new wA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,b4(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new PM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var pp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Rn.fromBase64String(e))}catch(t){throw new ne($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Id=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gp=class{constructor(e){this._methodName=e}};var mp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}};var yp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var pne=/^__.*__$/,kM=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fc(e,this.data,t,this.fieldTransforms)}},S0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function A4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}var OM=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return A0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(A4(this.Cu)&&pne.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},NM=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||L0(e)}Qu(e,t,r,i=!1){return new OM({Cu:e,methodName:t,qu:r,path:gr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ax(n){let e=n._freezeSettings(),t=L0(n._databaseId);return new NM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gne(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);cx("Data must be an object, but it was:",s,r);let a=M4(r,s),c,d;if(o.merge)c=new Ar(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let C=LM(e,g,t);if(!s.contains(C))throw new ne($.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);R4(h,C)||h.push(C)}c=new Ar(h),d=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=s.fieldTransforms;return new kM(new pr(a),c,d)}var D0=class n extends gp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function mne(n,e,t,r){let i=n.Qu(1,e,t);cx("Data must be an object, but it was:",i,r);let o=[],s=pr.empty();Vc(r,(c,d)=>{let h=lx(e,c,t);d=wt(d);let g=i.Nu(h);if(d instanceof D0)o.push(h);else{let C=Tp(d,g);C!=null&&(o.push(h),s.set(h,C))}});let a=new Ar(o);return new S0(s,a,i.fieldTransforms)}function yne(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[LM(e,r,t)],c=[i];if(o.length%2!=0)throw new ne($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<o.length;C+=2)a.push(LM(e,o[C])),c.push(o[C+1]);let d=[],h=pr.empty();for(let C=a.length-1;C>=0;--C)if(!R4(d,a[C])){let S=a[C],k=c[C];k=wt(k);let V=s.Nu(S);if(k instanceof D0)d.push(S);else{let O=Tp(k,V);O!=null&&(d.push(S),h.set(S,O))}}let g=new Ar(d);return new S0(h,g,s.fieldTransforms)}function _ne(n,e,t,r=!1){return Tp(t,n.Qu(r?4:3,e))}function Tp(n,e){if(x4(n=wt(n)))return cx("Unsupported field value:",e,n),M4(n,e);if(n instanceof gp)return function(r,i){if(!A4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Tp(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ete(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=yn.fromDate(r);return{timestampValue:d0(i.serializer,o)}}if(r instanceof yn){let o=new yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:d0(i.serializer,o)}}if(r instanceof mp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pp)return{bytesValue:ZB(i.serializer,r._byteString)};if(r instanceof Xn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yp)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return YM(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${U0(r)}`)}(n,e)}function M4(n,e){let t={};return MB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(n,(r,i)=>{let o=Tp(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function x4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yn||n instanceof mp||n instanceof pp||n instanceof Xn||n instanceof gp||n instanceof yp)}function cx(n,e,t){if(!x4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=U0(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function LM(n,e,t){if((e=wt(e))instanceof Id)return e._internalPath;if(typeof e=="string")return lx(n,e);throw A0("Field path arguments must be of type string or ",n,!1,void 0,t)}var vne=new RegExp("[~\\*/\\[\\]]");function lx(n,e,t){if(e.search(vne)>=0)throw A0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw A0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function A0(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ne($.INVALID_ARGUMENT,a+n+c)}function R4(n,e){return n.some(t=>t.isEqual(e))}var M0=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new FM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(B0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},FM=class extends M0{data(){return super.data()}};function B0(n,e){return typeof e=="string"?lx(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function wne(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _p=class{},vp=class extends _p{};function P4(n,e,...t){let r=[];e instanceof _p&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof VM).length,a=o.filter(c=>c instanceof x0).length;if(s>1||s>0&&a>0)throw new ne($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var x0=class n extends vp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return L4(e._query,t),new la(e.firestore,e.converter,kA(e._query,t))}_parse(e){let t=ax(e.firestore);return function(o,s,a,c,d,h,g){let C;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){DB(g,h);let S=[];for(let k of g)S.push(SB(c,o,k));C={arrayValue:{values:S}}}else C=SB(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||DB(g,h),C=_ne(a,s,g,h==="in"||h==="not-in");return Ht.create(d,h,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function k4(n,e,t){let r=e,i=B0("where",n);return x0._create(i,r,t)}var VM=class n extends _p{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)L4(s,c),s=kA(s,c)}(e._query,t),new la(e.firestore,e.converter,kA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var UM=class n extends vp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(o,s)}(e._query,this._field,this._direction);return new la(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new sa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function O4(n,e="asc"){let t=e,r=B0("orderBy",n);return UM._create(r,t)}var BM=class n extends vp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new la(e.firestore,e.converter,s0(e._query,this._limit,this._limitType))}};function N4(n){return hne("limit",n),BM._create("limit",n,"F")}function SB(n,e,t){if(typeof(t=wt(t))=="string"){if(t==="")throw new ne($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VB(e)&&t.indexOf("/")!==-1)throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!ye.isDocumentKey(r))throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ZU(n,new ye(r))}if(t instanceof Xn)return ZU(n,t._key);throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U0(t)}.`)}function DB(n,e){if(!Array.isArray(n)||n.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L4(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var jM=class{convertValue(e,t="none"){switch(kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Vc(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ct(s.doubleValue));return new yp(o)}convertGeoPoint(e){return new mp(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=HM(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){let t=$o(e);return new yn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);ct(i4(r));let i=new i0(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return i.isEqual(t)||zo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ene(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var xc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},R0=class extends M0{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(B0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ud=class extends R0{data(e={}){return super.data(e)}},zM=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ud(this._firestore,this._userDataWriter,r.key,r,new xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Ine(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Ine(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}function F4(n){n=Ho(n,Xn);let e=Ho(n.firestore,ua);return lne(sx(e),n._key).then(t=>bne(e,n,t))}var P0=class extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new pp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}};function V4(n){n=Ho(n,la);let e=Ho(n.firestore,ua),t=sx(e),r=new P0(e);return wne(n._query),une(t,n._query).then(i=>new zM(e,r,n,i))}function U4(n,e,t,...r){n=Ho(n,Xn);let i=Ho(n.firestore,ua),o=ax(i),s;return s=typeof(e=wt(e))=="string"||e instanceof Id?yne(o,"updateDoc",n._key,e,t,r):mne(o,"updateDoc",n._key,e),ux(i,[s.toMutation(n._key,jo.exists(!0))])}function B4(n){return ux(Ho(n.firestore,ua),[new lp(n._key,jo.none())])}function j4(n,e){let t=Ho(n.firestore,ua),r=ox(n),i=Ene(n.converter,e);return ux(t,[gne(ax(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jo.exists(!1))]).then(()=>r)}function ux(n,e){return function(r,i){let o=new ii;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return Zte(yield cne(r),i,o)})),o.promise}(sx(n),e)}function bne(n,e,t){let r=t.docs.get(e._key),i=new P0(n);return new R0(n,i,e._key,r,new xc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){bd=i})(ki),Pi(new Zn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ua(new fA(r.getProvider("auth-internal")),new yA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new i0(d.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),bt(KU,"4.7.3",e),bt(KU,"4.7.3","esm2017")})();var Bc=class{constructor(e){return e}},z4="firestore",dx=class{constructor(){return fc(z4)}};var hx=new Y("angularfire2.firestore-instances");function Tne(n,e){let t=bu(z4,n,e);return t&&new Bc(t)}function Cne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bc(r)}}var Sne={provide:dx,deps:[[new en,hx]]},Dne={provide:Bc,useFactory:Tne,deps:[[new en,hx],Xr]};function $4(n,...e){return bt("angularfire",Eo.full,"fst"),bn([Dne,Sne,{provide:hx,useFactory:Cne(n),multi:!0,deps:[Fe,xt,Hs,Io,[new en,wc],[new en,qs],...e]}])}var Cp=at(HU,!0);var q4=at(j4,!0);var jc=at(S4,!0);var H4=at(B4,!0);var Sp=at(ox,!0);var G4=at(F4,!0);var W4=at(V4,!0);var K4=at(D4,!0);var fx=at(N4,!0);var j0=at(O4,!0);var Dp=at(P4,!0);var px=at(U4,!0);var Cd=at(k4,!0);var tj="firebasestorage.googleapis.com",nj="storageBucket",Mne=2*60*1e3,xne=10*60*1e3;var Pt=class n extends On{constructor(e,t,r=0){super(gx(e),`Firebase Storage: ${t} (${gx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Vt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Vt||{});function gx(n){return"storage/"+n}function Ex(){let n="An unknown error occurred, please check the error payload for server response.";return new Pt(Vt.UNKNOWN,n)}function Rne(n){return new Pt(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Pne(n){return new Pt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kne(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Vt.UNAUTHENTICATED,n)}function One(){return new Pt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Nne(n){return new Pt(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Lne(){return new Pt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Fne(){return new Pt(Vt.CANCELED,"User canceled the upload/download.")}function Vne(n){return new Pt(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}function Une(n){return new Pt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Bne(){return new Pt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nj+"' property when initializing the app?")}function jne(){return new Pt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zne(){return new Pt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $ne(n){return new Pt(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mx(n){return new Pt(Vt.INVALID_ARGUMENT,n)}function rj(){return new Pt(Vt.APP_DELETED,"The Firebase app was deleted.")}function qne(n){return new Pt(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mp(n,e){return new Pt(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ap(n){throw new Pt(Vt.INTERNAL_ERROR,"Internal error: "+n)}var ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Une(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(de){de.path_=decodeURIComponent(de.path)}let h="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",S=new RegExp(`^https?://${g}/${h}/b/${i}/o${C}`,"i"),k={bucket:1,path:3},V=t===tj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",H=new RegExp(`^https?://${V}/${i}/${O}`,"i"),Z=[{regex:a,indices:c,postModify:o},{regex:S,indices:k,postModify:d},{regex:H,indices:{bucket:1,path:2},postModify:d}];for(let de=0;de<Z.length;de++){let qe=Z[de],ge=qe.regex.exec(e);if(ge){let M=ge[qe.indices.bucket],w=ge[qe.indices.path];w||(w=""),r=new n(M,w),qe.postModify(r);break}}if(r==null)throw Vne(e);return r}},yx=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Hne(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let d=!1;function h(...O){d||(d=!0,e.apply(null,O))}function g(O){i=setTimeout(()=>{i=null,n(S,c())},O)}function C(){o&&clearTimeout(o)}function S(O,...H){if(d){C();return}if(O){C(),h.call(null,O,...H);return}if(c()||s){C(),h.call(null,O,...H);return}r<64&&(r*=2);let Z;a===1?(a=2,Z=0):Z=(r+Math.random())*1e3,g(Z)}let k=!1;function V(O){k||(k=!0,C(),!d&&(i!==null?(O||(a=2),clearTimeout(i),g(0)):O||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,V(!0)},t),V}function Gne(n){n(!1)}function Wne(n){return n!==void 0}function Kne(n){return typeof n=="object"&&!Array.isArray(n)}function Ix(n){return typeof n=="string"||n instanceof String}function Q4(n){return bx()&&n instanceof Blob}function bx(){return typeof Blob<"u"}function Y4(n,e,t,r){if(r<e)throw mx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mx(`Invalid value for '${n}'. Expected ${t} or less.`)}function Tx(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ij(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Dd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Dd||{});function Qne(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var _x=class{constructor(e,t,r,i,o,s,a,c,d,h,g,C=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,k)=>{this.resolve_=S,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Sd(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Dd.NO_ERROR,c=o.getStatus();if(!a||Qne(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Dd.ABORT;r(!1,new Sd(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new Sd(d,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Wne(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=Ex();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?rj():Fne();s(c)}else{let c=Lne();s(c)}};this.canceled_?t(!1,new Sd(!1,null,!0)):this.backoffId_=Hne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Gne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Sd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Yne(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Jne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Zne(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Xne(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ere(n,e,t,r,i,o,s=!0){let a=ij(n.urlParams),c=n.url+a,d=Object.assign({},n.headers);return Zne(d,e),Yne(d,t),Jne(d,o),Xne(d,r),new _x(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function tre(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nre(...n){let e=tre();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(bx())return new Blob(n);throw new Pt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rre(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function ire(n){if(typeof atob>"u")throw $ne("base-64");return atob(n)}var Gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},xp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function ore(n,e){switch(n){case Gi.RAW:return new xp(oj(e));case Gi.BASE64:case Gi.BASE64URL:return new xp(sj(n,e));case Gi.DATA_URL:return new xp(are(e),cre(e))}throw Ex()}function oj(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sre(n){let e;try{e=decodeURIComponent(n)}catch{throw Mp(Gi.DATA_URL,"Malformed data URL.")}return oj(e)}function sj(n,e){switch(n){case Gi.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Mp(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gi.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Mp(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=ire(e)}catch(i){throw i.message.includes("polyfill")?i:Mp(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var $0=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Mp(Gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=lre(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function are(n){let e=new $0(n);return e.base64?sj(Gi.BASE64,e.rest):sre(e.rest)}function cre(n){return new $0(n).contentType}function lre(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var q0=class n{constructor(e,t){let r=0,i="";Q4(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Q4(this.data_)){let r=this.data_,i=rre(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(bx()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(nre.apply(null,t))}else{let t=e.map(s=>Ix(s)?ore(Gi.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function aj(n){let e;try{e=JSON.parse(n)}catch{return null}return Kne(e)?e:null}function ure(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dre(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function cj(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function hre(n,e){return e}var _n=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||hre}},z0=null;function fre(n){return!Ix(n)||n.length<2?n:cj(n)}function lj(){if(z0)return z0;let n=[];n.push(new _n("bucket")),n.push(new _n("generation")),n.push(new _n("metageneration")),n.push(new _n("name","fullPath",!0));function e(o,s){return fre(s)}let t=new _n("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new _n("size");return i.xform=r,n.push(i),n.push(new _n("timeCreated")),n.push(new _n("updated")),n.push(new _n("md5Hash",null,!0)),n.push(new _n("cacheControl",null,!0)),n.push(new _n("contentDisposition",null,!0)),n.push(new _n("contentEncoding",null,!0)),n.push(new _n("contentLanguage",null,!0)),n.push(new _n("contentType",null,!0)),n.push(new _n("metadata","customMetadata",!0)),z0=n,z0}function pre(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new ai(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function gre(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return pre(r,n),r}function uj(n,e,t){let r=aj(e);return r===null?null:gre(n,r,t)}function mre(n,e,t,r){let i=aj(e);if(i===null||!Ix(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(d=>{let h=n.bucket,g=n.fullPath,C="/b/"+s(h)+"/o/"+s(g),S=Tx(C,t,r),k=ij({alt:"media",token:d});return S+k})[0]}function yre(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var H0=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function dj(n){if(!n)throw Ex()}function _re(n,e){function t(r,i){let o=uj(n,i,e);return dj(o!==null),o}return t}function vre(n,e){function t(r,i){let o=uj(n,i,e);return dj(o!==null),mre(o,i,n.host,n._protocol)}return t}function hj(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=One():i=kne():t.getStatus()===402?i=Pne(n.bucket):t.getStatus()===403?i=Nne(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function wre(n){let e=hj(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Rne(n.path)),o.serverResponse=i.serverResponse,o}return t}function Ere(n,e,t){let r=e.fullServerUrl(),i=Tx(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new H0(i,o,vre(n,t),s);return a.errorHandler=wre(e),a}function Ire(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function bre(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Ire(null,e)),r}function Tre(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let Z="";for(let de=0;de<2;de++)Z=Z+Math.random().toString().slice(2);return Z}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let d=bre(e,r,i),h=yre(d,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,C=`\r
--`+c+"--",S=q0.getBlob(g,r,C);if(S===null)throw jne();let k={name:d.fullPath},V=Tx(o,n.host,n._protocol),O="POST",H=n.maxUploadRetryTime,re=new H0(V,O,_re(n,t),H);return re.urlParams=k,re.headers=s,re.body=S.uploadData(),re.errorHandler=hj(e),re}var obe=256*1024;var J4=null,vx=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ap("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ap("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ap("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ap("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ap("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},wx=class extends vx{initXhr(){this.xhr_.responseType="text"}};function fj(){return J4?J4():new wx}var Ad=class n{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cj(this._location.path)}get storage(){return this._service}get parent(){let e=ure(this._location.path);if(e===null)return null;let t=new ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw qne(e)}};function Cre(n,e,t){n._throwIfRoot("uploadBytes");let r=Tre(n.storage,n._location,lj(),new q0(e,!0),t);return n.storage.makeRequestWithTokens(r,fj).then(i=>({metadata:i,ref:n}))}function Sre(n){n._throwIfRoot("getDownloadURL");let e=Ere(n.storage,n._location,lj());return n.storage.makeRequestWithTokens(e,fj).then(t=>{if(t===null)throw zne();return t})}function Dre(n,e){let t=dre(n._location.path,e),r=new ai(n._location.bucket,t);return new Ad(n.storage,r)}function Are(n){return/^[A-Za-z]+:\/\//.test(n)}function Mre(n,e){return new Ad(n,e)}function pj(n,e){if(n instanceof Rp){let t=n;if(t._bucket==null)throw Bne();let r=new Ad(t,t._bucket);return e!=null?pj(r,e):r}else return e!==void 0?Dre(n,e):n}function xre(n,e){if(e&&Are(e)){if(n instanceof Rp)return Mre(n,e);throw mx("To use ref(service, url), the first argument must be a Storage instance.")}else return pj(n,e)}function Z4(n,e){let t=e?.[nj];return t==null?null:ai.makeFromBucketSpec(t,n)}function Rre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:c_(i,n.app.options.projectId))}var Rp=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=tj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Mne,this._maxUploadRetryTime=xne,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=Z4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=Z4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return T(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return T(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ad(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new yx(rj());{let s=ere(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return T(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},X4="@firebase/storage",ej="0.13.2";var gj="storage";function mj(n,e,t){return n=wt(n),Cre(n,e,t)}function yj(n){return n=wt(n),Sre(n)}function _j(n,e){return n=wt(n),xre(n,e)}function vj(n=$s(),e){n=wt(n);let r=lc(n,gj).getImmediate({identifier:e}),i=a_("storage");return i&&wj(r,...i),r}function wj(n,e,t,r={}){Rre(n,e,t,r)}function Pre(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Rp(t,r,i,e,ki)}function kre(){Pi(new Zn(gj,Pre,"PUBLIC").setMultipleInstances(!0)),bt(X4,ej,""),bt(X4,ej,"esm2017")}kre();var zc=class{constructor(e){return e}},Ej="storage",Cx=class{constructor(){return fc(Ej)}};var Sx=new Y("angularfire2.storage-instances");function Ore(n,e){let t=bu(Ej,n,e);return t&&new zc(t)}function Nre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zc(r)}}var Lre={provide:Cx,deps:[[new en,Sx]]},Fre={provide:zc,useFactory:Ore,deps:[[new en,Sx],Xr]};function Ij(n,...e){return bt("angularfire",Eo.full,"gcs"),bn([Fre,Lre,{provide:Sx,useFactory:Nre(n),multi:!0,deps:[Fe,xt,Hs,Io,[new en,wc],[new en,qs],...e]}])}var bj=at(yj,!0);var Tj=at(vj,!0);var Cj=at(_j,!0);var Sj=at(mj,!0);var Lj=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(te(mo),te(ur))};static \u0275dir=yt({type:n})}return n})(),X0=(()=>{class n extends Lj{static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275dir=yt({type:n,features:[Er]})}return n})(),Vp=new Y(""),Ure={provide:Vp,useExisting:Ii(()=>xx),multi:!0},xx=(()=>{class n extends X0{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275dir=yt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Si([Ure]),Er]})}return n})(),Bre={provide:Vp,useExisting:Ii(()=>Wi),multi:!0};function jre(){let n=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var zre=new Y(""),Wi=(()=>{class n extends Lj{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!jre())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(te(mo),te(ur),te(zre,8))};static \u0275dir=yt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Si([Bre]),Er]})}return n})();function $re(n){return n==null||qre(n)===0}function qre(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Rx=new Y(""),Fj=new Y("");function Hre(n){return $re(n.value)?{required:!0}:null}function Dj(n){return null}function Vj(n){return n!=null}function Uj(n){return As(n)?dt(n):n}function Bj(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function jj(n,e){return e.map(t=>t(n))}function Gre(n){return!n.validate}function zj(n){return n.map(e=>Gre(e)?e:t=>e.validate(t))}function Wre(n){if(!n)return null;let e=n.filter(Vj);return e.length==0?null:function(t){return Bj(jj(t,e))}}function Px(n){return n!=null?Wre(zj(n)):null}function Kre(n){if(!n)return null;let e=n.filter(Vj);return e.length==0?null:function(t){let r=jj(t,e).map(Uj);return Kw(r).pipe(be(Bj))}}function kx(n){return n!=null?Kre(zj(n)):null}function Aj(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Qre(n){return n._rawValidators}function Yre(n){return n._rawAsyncValidators}function Dx(n){return n?Array.isArray(n)?n:[n]:[]}function W0(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mj(n,e){let t=Dx(e);return Dx(n).forEach(i=>{W0(t,i)||t.push(i)}),t}function xj(n,e){return Dx(e).filter(t=>!W0(n,t))}var K0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Px(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rd=class extends K0{name;get formDirective(){return null}get path(){return null}},Fp=class extends K0{_parent=null;name=null;valueAccessor=null},Q0=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Jre={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$be=le(j({},Jre),{"[class.ng-submitted]":"isSubmitted"}),ha=(()=>{class n extends Q0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(Fp,2))};static \u0275dir=yt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Er]})}return n})(),Pd=(()=>{class n extends Q0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(Rd,10))};static \u0275dir=yt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&yy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Er]})}return n})();var Pp="VALID",G0="INVALID",Md="PENDING",kp="DISABLED",da=class{},Y0=class extends da{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Np=class extends da{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Lp=class extends da{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},xd=class extends da{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Ax=class extends da{source;constructor(e){super(),this.source=e}},Mx=class extends da{source;constructor(e){super(),this.source=e}};function $j(n){return(ew(n)?n.validators:n)||null}function Zre(n){return Array.isArray(n)?Px(n):n||null}function qj(n,e){return(ew(e)?e.asyncValidators:n)||null}function Xre(n){return Array.isArray(n)?kx(n):n||null}function ew(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function eie(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function tie(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var J0=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kr(this.statusReactive)}set status(e){Kr(()=>this.statusReactive.set(e))}_status=tu(()=>this.statusReactive());statusReactive=Ql(void 0);get valid(){return this.status===Pp}get invalid(){return this.status===G0}get pending(){return this.status==Md}get disabled(){return this.status===kp}get enabled(){return this.status!==kp}errors;get pristine(){return Kr(this.pristineReactive)}set pristine(e){Kr(()=>this.pristineReactive.set(e))}_pristine=tu(()=>this.pristineReactive());pristineReactive=Ql(!0);get dirty(){return!this.pristine}get touched(){return Kr(this.touchedReactive)}set touched(e){Kr(()=>this.touchedReactive.set(e))}_touched=tu(()=>this.touchedReactive());touchedReactive=Ql(!1);get untouched(){return!this.touched}_events=new At;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Mj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xj(e,this._rawAsyncValidators))}hasValidator(e){return W0(this._rawValidators,e)}hasAsyncValidator(e){return W0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Lp(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Lp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Np(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Np(!0,r))}markAsPending(e={}){this.status=Md;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=kp,this.errors=null,this._forEachChild(i=>{i.disable(le(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Y0(this.value,r)),this._events.next(new xd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pp,this._forEachChild(r=>{r.enable(le(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pp||this.status===Md)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Y0(this.value,t)),this._events.next(new xd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kp:Pp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Md,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Uj(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new xd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new mt,this.statusChanges=new mt}_calculateStatus(){return this._allControlsDisabled()?kp:this.errors?G0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Md)?Md:this._anyControlsHaveStatus(G0)?G0:Pp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Np(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Lp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ew(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Zre(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Xre(this._rawAsyncValidators)}},Z0=class extends J0{constructor(e,t,r){super($j(t),qj(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){tie(this,!0,e),Object.keys(e).forEach(r=>{eie(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ox=new Y("",{providedIn:"root",factory:()=>Nx}),Nx="always";function nie(n,e){return[...e.path,n]}function Hj(n,e,t=Nx){Gj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),iie(n,e),sie(n,e),oie(n,e),rie(n,e)}function Rj(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rie(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Gj(n,e){let t=Qre(n);e.validator!==null?n.setValidators(Aj(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Yre(n);e.asyncValidator!==null?n.setAsyncValidators(Aj(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Rj(e._rawValidators,i),Rj(e._rawAsyncValidators,i)}function iie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Wj(n,e)})}function oie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Wj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Wj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sie(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function aie(n,e){n==null,Gj(n,e)}function cie(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function lie(n){return Object.getPrototypeOf(n.constructor)===X0}function uie(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function die(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wi?t=o:lie(o)?r=o:i=o}),i||r||t||null}var hie={provide:Rd,useExisting:Ii(()=>$c)},Op=Promise.resolve(),$c=(()=>{class n extends Rd{callSetDisabledState;get submitted(){return Kr(this.submittedReactive)}_submitted=tu(()=>this.submittedReactive());submittedReactive=Ql(!1);_directives=new Set;form;ngSubmit=new mt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Z0({},Px(t),kx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Op.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Hj(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Op.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Op.then(()=>{let r=this._findContainer(t.path),i=new Z0({});aie(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Op.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Op.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),uie(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Ax(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Mx(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(te(Rx,10),te(Fj,10),te(Ox,8))};static \u0275dir=yt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Si([hie]),Er]})}return n})();function Pj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kj(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fie=class extends J0{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super($j(t),qj(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ew(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kj(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pie={provide:Fp,useExisting:Ii(()=>Go)},Oj=Promise.resolve(),Go=(()=>{class n extends Fp{_changeDetectorRef;callSetDisabledState;control=new fie;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new mt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=die(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cie(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Hj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Oj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Rs(r);Oj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nie(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(te(Rd,9),te(Rx,10),te(Fj,10),te(Vp,10),te(xs,8),te(Ox,8))};static \u0275dir=yt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Si([pie]),Er,lr]})}return n})();var kd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=yt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var gie={provide:Vp,useExisting:Ii(()=>Od),multi:!0};function Kj(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function mie(n){return n.split(":")[0]}var Od=(()=>{class n extends X0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Kj(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=mie(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275dir=yt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Si([gie]),Er]})}return n})(),tw=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Kj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(ur),te(mo),te(Od,9))};static \u0275dir=yt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),yie={provide:Vp,useExisting:Ii(()=>Qj),multi:!0};function Nj(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _ie(n){return n.split(":")[0]}var Qj=(()=>{class n extends X0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],d=this._getOptionValue(c.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=_ie(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275dir=yt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Si([yie]),Er]})}return n})(),nw=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Nj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Nj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(ur),te(mo),te(Qj,9))};static \u0275dir=yt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var vie=(()=>{class n{_validator=Dj;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dj,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=yt({type:n,features:[lr]})}return n})();var wie={provide:Rx,useExisting:Ii(()=>qc),multi:!0};var qc=(()=>{class n extends vie{required;inputName="required";normalizeInput=Rs;createValidator=t=>Hre;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=po(n)))(i||n)}})();static \u0275dir=yt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ph("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Si([wie]),Er]})}return n})();var Eie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();var fa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ox,useValue:t.callSetDisabledState??Nx}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({imports:[Eie]})}return n})();var Iie=["*"],Bp=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Nt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(zn(t=>{let r=new Le(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let o=t.addListener(e,s=>{this._ngZone.run(()=>i.next(s))});if(!o){i.complete();return}return this._listeners.push(o),()=>o.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Up={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Yj="500px",Jj="500px",iw=(()=>{class n{_elementRef=z(ur);_ngZone=z(Fe);_eventManager=new Bp(z(Fe));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Yj;width=Jj;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||Up}_options=Up;mapInitialized=new mt;authFailure=new mt;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=z(Ti);if(this._isBrowser=gb(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(In(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":Zj(this.height)||Yj,t.width=this.width===null?"":Zj(this.width)||Jj}}_combineOptions(){let t=this._options||{};return le(j({},t),{center:this._center||t.center||Up.center,zoom:this._zoom??t.zoom??Up.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||Up.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=It({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[lr],ngContentSelectors:Iie,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(PO(),vt(0,"div",0),kO(1))},encapsulation:2,changeDetection:0})}return n})(),bie=/([A-Za-z%]+)$/;function Zj(n){return n==null?"":bie.test(n)?n:`${n}px`}var Xj=(()=>{class n{_googleMap=z(iw);_elementRef=z(ur);_ngZone=z(Fe);_eventManager=new Bp(z(Fe));_options=new Nt({});_position=new Nt(void 0);_destroy=new At;infoWindow;set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new mt;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(In(1)).subscribe(t=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,t):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(r=>{this._initialize(r.InfoWindow,t)})})})}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new t(r),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(t,r){this.open({getAnchor:()=>t},void 0,r)}open(t,r,i){this._assertInitialized();let o=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==o||!o)&&(this._elementRef.nativeElement.style.display=i?"none":"",i&&this.infoWindow.setContent(i),this.infoWindow.open({map:this._googleMap.googleMap,anchor:o,shouldFocus:r}))}_combineOptions(){return Fa([this._options,this._position]).pipe(be(([t,r])=>le(j({},t),{position:r||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Al(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(Al(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=yt({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return n})();var Tie=new Y("MAP_MARKER"),Cie={position:{lat:37.421995,lng:-122.084092}},ez=(()=>{class n{_googleMap=z(iw);_ngZone=z(Fe);_eventManager=new Bp(z(Fe));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new mt;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:o,_label:s,_clickable:a,_icon:c,_visible:d}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&o&&r.setPosition(o),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&d!==void 0&&r.setVisible(d))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(In(1)).toPromise()}_combineOptions(){let t=this._options||Cie;return le(j({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=yt({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[Si([{provide:Tie,useExisting:n}]),lr]})}return n})();var tz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();function Die(n,e){n&1&&(y(0,"p",15),b(1," \u{1F4CD} Deine Position wird angezeigt "),v())}function Aie(n,e){n&1&&(y(0,"p",16),b(1," \u26A0\uFE0F Standort nicht verf\xFCgbar - Zentrum Berlin angezeigt "),v())}function Mie(n,e){if(n&1){let t=nt();y(0,"div",19)(1,"h4"),b(2),v(),y(3,"p")(4,"strong"),b(5),Gr(6,"titlecase"),v()(),y(7,"p"),b(8),v(),y(9,"p"),b(10),v(),y(11,"button",20),fe("click",function(){se(t);let i=J().$implicit,o=J();return ae(o.getDirections(i.shop))}),b(12," \u{1F697} Route berechnen "),v()()}if(n&2){let t=J().$implicit;F(2),tn(t.shop.name),F(3),tn(Wr(6,4,t.shop.type)),F(3),rt("\u{1F4CD} ",t.shop.address.split(",")[0],""),F(2),rt("\u2B50 ",t.shop.rating,"/5")}}function xie(n,e){n&1&&(y(0,"div",19)(1,"h4"),b(2,"\u{1F4CD} Deine Position"),v(),y(3,"p"),b(4,"Du bist hier"),v()())}function Rie(n,e){if(n&1){let t=nt();y(0,"map-marker",17),fe("mapClick",function(){let i=se(t).$implicit,o=J();return ae(o.onMarkerClick(i))}),y(1,"map-info-window"),he(2,Mie,13,6,"div",18)(3,xie,5,0,"div",18),v()()}if(n&2){let t=e.$implicit,r=J();q("position",t.position)("title",t.title)("options",r.getMarkerOptions(t)),F(2),q("ngIf",t.shop),F(),q("ngIf",t.isUserLocation)}}var ow=class n{afroshops=[];userLocation=null;shopSelected=new mt;mapOptions={center:{lat:52.52,lng:13.405},zoom:12,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0};markers=[];constructor(){}ngOnInit(){this.updateMapCenter(),this.createMarkers()}ngOnChanges(){this.updateMapCenter(),this.createMarkers()}updateMapCenter(){this.userLocation&&(this.mapOptions=le(j({},this.mapOptions),{center:this.userLocation,zoom:13}))}createMarkers(){this.markers=this.afroshops.map(e=>({position:e.coordinates,title:e.name,shop:e})),this.userLocation&&this.markers.push({position:this.userLocation,title:"Deine Position",isUserLocation:!0})}getMarkerOptions(e){return e.isUserLocation?{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" fill="white"/>
            </svg>
          `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}}:{}}onMarkerClick(e){e.shop&&(console.log("Afroshop ausgew\xE4hlt:",e.shop),this.shopSelected.emit(e.shop.id))}getDirections(e){if(this.userLocation){let t=`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}else{let t=`https://www.google.com/maps/search/?api=1&query=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=It({type:n,selectors:[["app-map"]],inputs:{afroshops:"afroshops",userLocation:"userLocation"},outputs:{shopSelected:"shopSelected"},features:[lr],decls:42,vars:6,consts:[[1,"map-container"],[1,"map-header"],["class","location-info",4,"ngIf"],["class","no-location-info",4,"ngIf"],[1,"google-map",3,"options","width","height"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],[1,"map-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","restaurant"],[1,"legend-icon","epicerie"],[1,"legend-icon","coiffeur"],[1,"legend-icon","vetement"],[1,"legend-icon","services"],[1,"legend-icon","user"],[1,"location-info"],[1,"no-location-info"],[3,"mapClick","position","title","options"],["class","info-window",4,"ngIf"],[1,"info-window"],[1,"directions-btn",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h3"),b(3,"\u{1F5FA}\uFE0F Karte der Afroshops"),v(),he(4,Die,2,0,"p",2)(5,Aie,2,0,"p",3),v(),y(6,"google-map",4),he(7,Rie,4,5,"map-marker",5),v(),y(8,"div",6)(9,"h4"),b(10,"Legende"),v(),y(11,"div",7)(12,"div",8)(13,"span",9),b(14,"\u{1F37D}\uFE0F"),v(),y(15,"span"),b(16,"Restaurants"),v()(),y(17,"div",8)(18,"span",10),b(19,"\u{1F6D2}"),v(),y(20,"span"),b(21,"Lebensmittel"),v()(),y(22,"div",8)(23,"span",11),b(24,"\u2702\uFE0F"),v(),y(25,"span"),b(26,"Friseure"),v()(),y(27,"div",8)(28,"span",12),b(29,"\u{1F457}"),v(),y(30,"span"),b(31,"Mode"),v()(),y(32,"div",8)(33,"span",13),b(34,"\u{1F3E6}"),v(),y(35,"span"),b(36,"Dienstleistungen"),v()(),y(37,"div",8)(38,"span",14),b(39,"\u{1F4CD}"),v(),y(40,"span"),b(41,"Deine Position"),v()()()()()),t&2&&(F(4),q("ngIf",r.userLocation),F(),q("ngIf",!r.userLocation),F(),q("options",r.mapOptions)("width","100%")("height","400px"),F(),q("ngForOf",r.markers))},dependencies:[ln,ks,mn,Za,tz,iw,Xj,ez],styles:[".map-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--background-white);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin:var(--spacing-lg) 0}.map-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;margin-bottom:var(--spacing-xs)}.location-info[_ngcontent-%COMP%]{color:#27ae60;font-weight:500;margin:0}.no-location-info[_ngcontent-%COMP%]{color:#f39c12;font-weight:500;margin:0}.google-map[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:2px solid #e0e0e0;overflow:hidden;box-shadow:var(--shadow-sm)}.info-window[_ngcontent-%COMP%]{padding:var(--spacing-sm);min-width:200px}.info-window[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0 0 var(--spacing-xs) 0;font-size:1.1rem}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0;font-size:.9rem;color:var(--text-light)}.directions-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;font-size:.9rem;margin-top:var(--spacing-xs);transition:background .3s ease}.directions-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.map-legend[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding:var(--spacing-md);background:var(--background-light);border-radius:var(--border-radius);border-left:4px solid var(--primary-color)}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-dark);margin:0 0 var(--spacing-sm) 0;font-size:1.1rem}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--spacing-sm)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-light)}.legend-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.legend-icon.restaurant[_ngcontent-%COMP%]{color:#e74c3c}.legend-icon.epicerie[_ngcontent-%COMP%]{color:#27ae60}.legend-icon.coiffeur[_ngcontent-%COMP%]{color:#9b59b6}.legend-icon.vetement[_ngcontent-%COMP%]{color:#3498db}.legend-icon.services[_ngcontent-%COMP%]{color:#f1c40f}.legend-icon.user[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{padding:var(--spacing-md);margin:var(--spacing-md) 0}.google-map[_ngcontent-%COMP%]{height:300px!important}.legend-items[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs)}.legend-item[_ngcontent-%COMP%]{font-size:.8rem}}.map-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px;background:var(--background-light);border-radius:var(--border-radius)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var Nd=class n{afroshops=[{id:1,name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches Restaurant mit westafrikanischen Spezialit\xE4ten. Warme Atmosph\xE4re und traditionelle Gerichte mit Liebe zubereitet. Spezialit\xE4ten: Jollof Rice, Poulet Yassa, Atti\xE9k\xE9.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-So: 12:00-22:00"},{id:7,name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 567890",description:"Das beste afrikanische Restaurant im Herzen von Dortmund. Bekannt f\xFCr authentische nigerianische und ghanaische K\xFCche.",rating:4.7,image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Di-So: 17:00-23:00"},{id:8,name:"Sahara Markt Dortmund",type:"epicerie",address:"Steinstra\xDFe 33, 44147 Dortmund",coordinates:{lat:51.52,lng:7.46},phone:"+49 231 445566",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Dortmund. Frische Produkte, Gew\xFCrze und Spezialit\xE4ten aus ganz Afrika.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Sa: 09:00-20:00"},{id:9,name:"Style Africain Dortmund",type:"coiffeur",address:"Rheinische Stra\xDFe 89, 44137 Dortmund",coordinates:{lat:51.51,lng:7.47},phone:"+49 231 778899",description:"Spezialisiert auf afrikanische Frisuren, Braiding und Extensions. Erfahrene Stylisten aus ganz Afrika.",rating:4.6,image:"https://images.unsplash.com/photo-1562322140-8198e5d5067e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 10:00-19:00"},{id:10,name:"Kilimanjaro Hamburg",type:"restaurant",address:"Gro\xDFe Bergstra\xDFe 123, 22767 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 334455",description:"Ostafriikanisches Restaurant mit Swahili-K\xFCche. Authentische Gerichte aus Tansania und Kenia.",rating:4.4,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Ostafrikanische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:11,name:"Baobab Markt Hamburg",type:"epicerie",address:"Steindamm 55, 20099 Hamburg",coordinates:{lat:53.555,lng:10.005},phone:"+49 40 667788",description:"Afrikanische Lebensmittel und Produkte im Zentrum von Hamburg. Von Kochbananen bis Shea-Butter.",rating:4.2,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 08:00-20:00"},{id:12,name:"Senegal Eck K\xF6ln",type:"restaurant",address:"Venloer Stra\xDFe 234, 50823 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 889900",description:"Traditionelles senegalesisches Restaurant. Thieboudienne und Yassa-Spezialit\xE4ten in gem\xFCtlicher Atmosph\xE4re.",rating:4.8,image:"https://images.unsplash.com/photo-1493770348161-369560ae357d?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:2,hours:"Do-Mo: 17:00-22:00"},{id:13,name:"Afrika Center K\xF6ln",type:"services",address:"Wilhelmsplatz 12, 50674 K\xF6ln",coordinates:{lat:50.94,lng:6.95},phone:"+49 221 445566",description:"Beratungszentrum f\xFCr afrikanische Community. Geldtransfer, Visa-Service und kulturelle Veranstaltungen.",rating:4.1,image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00"},{id:14,name:"Addis Abeba Frankfurt",type:"restaurant",address:"Leipziger Stra\xDFe 78, 60487 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 778899",description:"\xC4thiopisches Restaurant mit traditioneller Injera und Wat. Authentische Gew\xFCrze direkt aus \xC4thiopien.",rating:4.6,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Di-So: 17:30-23:00"},{id:15,name:"Wax Print Fashion Frankfurt",type:"vetement",address:"Kaiserstra\xDFe 199, 60311 Frankfurt am Main",coordinates:{lat:50.115,lng:8.685},phone:"+49 69 556677",description:"Traditionelle afrikanische Mode und moderne Designs. Wax-Print Stoffe und ma\xDFgeschneiderte Kleidung.",rating:4.5,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 11:00-19:00"},{id:2,name:"Afro Market Hamburg",type:"epicerie",address:"Steindamm 78, 20099 Hamburg",coordinates:{lat:53.5511,lng:10.0067},phone:"+49 40 87654321",description:"Vollst\xE4ndiger afrikanischer Supermarkt mit frischen Produkten, authentischen Gew\xFCrzen, Kosmetik und traditionellen Artikeln. Gro\xDFe Auswahl an tropischen Gem\xFCsen und direkt aus Afrika importierten Produkten.",rating:4.3,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",priceLevel:2,hours:"Mo-Sa: 09:00-20:00"},{id:3,name:"Salon Nappy Queen",type:"coiffeur",address:"K\xF6nigstra\xDFe 45, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 98765432",description:"Friseursalon spezialisiert auf afro und krauses Haar. Flechtwerk, Gl\xE4ttung, nat\xFCrliche Pflege und sch\xFCtzende Frisuren. Erfahrenes Team und hochwertige Produkte.",rating:4.8,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",priceLevel:3,hours:"Di-Sa: 10:00-19:00"},{id:4,name:"Le Baobab M\xFCnchen",type:"restaurant",address:"Landwehrstra\xDFe 32, 80336 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 11223344",description:"Elegantes senegalesisches Restaurant mit raffinierter K\xFCche. Modernes Ambiente mit traditionellen Akzenten. Spezialit\xE4ten: Thieboudienne, Maf\xE9, hausgemachter Bissap.",rating:4.6,image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mi-So: 18:00-23:00"},{id:5,name:"Afrika Mode K\xF6ln",type:"vetement",address:"Ehrenstra\xDFe 67, 50672 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 55667788",description:"Afrikanische Modeboutique mit traditioneller und zeitgen\xF6ssischer Kleidung. Wax, Bogolan, Dashiki, authentischer Schmuck und Accessoires. Ma\xDFanfertigung verf\xFCgbar.",rating:4.4,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=800&h=600&fit=crop",priceLevel:3,hours:"Mo-Sa: 10:00-19:00"},{id:6,name:"Transfert Afrika Services",type:"services",address:"Warschauer Str. 34, 10243 Berlin",coordinates:{lat:52.5058,lng:13.4498},phone:"+49 30 99887766",description:"Geldtransfer nach Afrika, W\xE4hrungswechsel und Finanzberatung. Offizieller Partner von Western Union und Money Gram. Schneller und sicherer Service.",rating:4.2,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",priceLevel:1,hours:"Mo-Fr: 09:00-18:00, Sa: 10:00-16:00"}];constructor(){}getAllAfroshops(){return this.afroshops}getAfroshopById(e){return this.afroshops.find(t=>t.id==e)}getAfroshopsByType(e){return this.afroshops.filter(t=>t.type===e)}searchAfroshops(e){let t=e.toLowerCase();return this.afroshops.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}getAfroshopsByCity(e){if(!e)return this.afroshops;let r={berlin:["Berlin"],hamburg:["Hamburg"],m\u00FCnchen:["M\xFCnchen","Munich"],k\u00F6ln:["K\xF6ln","Cologne"],frankfurt:["Frankfurt am Main","Frankfurt"],stuttgart:["Stuttgart"],d\u00FCsseldorf:["D\xFCsseldorf"],dortmund:["Dortmund"],essen:["Essen"],leipzig:["Leipzig"],bremen:["Bremen"],dresden:["Dresden"],hannover:["Hannover"],n\u00FCrnberg:["N\xFCrnberg","Nuremberg"]}[e.toLowerCase()]||[e];return this.afroshops.filter(i=>r.some(o=>i.address.toLowerCase().includes(o.toLowerCase())))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ki=class n{constructor(e,t){this.firestore=e;this.storage=t}getAllAfroshops(){console.log("\u{1F525} D\xE9but getAllAfroshops()");let e=jc(this.firestore,"afroshops");return dt(W4(e)).pipe(be(t=>{console.log("\u{1F525} Documents bruts depuis Firebase:",t.size);let r=[];t.forEach(o=>{let s=o.data();s.id=o.id,r.push(s)}),console.log("\u{1F525} Premier document:",r[0]),console.log("\u{1F525} Tous les noms:",r.map(o=>o.name));let i=r.map(o=>this.mapFirebaseDocToAfroshopData(o));return console.log("\u{1F525} Documents mapp\xE9s:",i.length),console.log("\u{1F525} Noms apr\xE8s mapping:",i.map(o=>o.name)),i.sort((o,s)=>o.name.localeCompare(s.name)),i}))}mapFirebaseDocToAfroshopData(e){console.log("\u{1F525} Mapping document:",e.name,e);let t={id:e.id,name:e.name||"",type:e.type||"services",address:e.address||"",coordinates:{lat:e.coordinates?.lat||0,lng:e.coordinates?.lng||0},phone:e.phone||"",description:e.description||"",rating:e.rating||4,image:e.image||"",cuisine:e.cuisine||"",priceLevel:e.priceLevel||2,hours:e.hours||"",website:e.website||"",createdBy:e.createdBy,createdByName:e.createdByName,createdAt:e.createdAt,verified:e.verified};return console.log("\u{1F525} R\xE9sultat mapping:",t.name,t),console.log("\u{1F525} CreatedBy dans mapping:",t.createdBy),t}getAfroshopsByCity(e){let t=jc(this.firestore,"afroshops"),r=Dp(t,Cd("city","==",e.toLowerCase()),j0("name"));return Cp(r,{idField:"id"})}getAfroshopsByType(e){let t=jc(this.firestore,"afroshops"),r=Dp(t,Cd("type","==",e),j0("rating","desc"));return Cp(r,{idField:"id"})}getAfroshopById(e){return T(this,null,function*(){try{let t=Sp(this.firestore,"afroshops",e),r=yield G4(t);if(r.exists()){let i=r.data();return this.mapFirebaseDocToAfroshopData(le(j({},i),{id:r.id}))}return}catch(t){console.error("Fehler beim Laden des Afroshops:",t);return}})}addAfroshop(e){return T(this,null,function*(){let t=jc(this.firestore,"afroshops"),r=le(j({},e),{createdAt:new Date,updatedAt:new Date,views:0,likes:0,verified:!1});return(yield q4(t,r)).id})}updateAfroshop(e,t){return T(this,null,function*(){let r=Sp(this.firestore,"afroshops",e),i=le(j({},t),{updatedAt:new Date});yield px(r,i)})}deleteAfroshop(e){return T(this,null,function*(){let t=Sp(this.firestore,"afroshops",e);yield H4(t)})}searchAfroshops(e){let t=jc(this.firestore,"afroshops"),r=Dp(t,Cd("name",">=",e),Cd("name","<=",e+"\uF8FF"),fx(20));return Cp(r,{idField:"id"})}getTopRatedAfroshops(e=10){let t=jc(this.firestore,"afroshops"),r=Dp(t,Cd("verified","==",!0),j0("rating","desc"),fx(e));return Cp(r,{idField:"id"})}incrementViews(e){return T(this,null,function*(){try{let t=Sp(this.firestore,"afroshops",e);yield px(t,{views:1})}catch(t){console.error("Erreur lors de l'incr\xE9mentation des vues:",t)}})}uploadImage(e){return T(this,null,function*(){try{if(console.log("\u{1F525} Firebase Storage upload d\xE9marr\xE9..."),console.log("\u{1F4C1} Fichier \xE0 upload:",e.name,`${(e.size/1024).toFixed(0)}KB`),!this.storage)throw new Error("Firebase Storage non initialis\xE9");let t=Date.now(),r=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`afroshops/${t}_${r}`;console.log("\u{1F4DD} Nom du fichier:",i);let o=Cj(this.storage,i);console.log("\u{1F4CD} R\xE9f\xE9rence cr\xE9\xE9e:",o),console.log("\u2B06\uFE0F Upload en cours...");let s=yield Sj(o,e);console.log("\u2705 Upload termin\xE9, snapshot:",s),console.log("\u{1F517} R\xE9cup\xE9ration URL...");let a=yield bj(s.ref);return console.log("\u2705 URL obtenue:",a),a}catch(t){throw console.error("\u274C Erreur Firebase Storage:",t),console.error("\u274C Type d'erreur:",typeof t),console.error("\u274C Stack:",t instanceof Error?t.stack:"Pas de stack"),t instanceof Error?new Error(`Firebase Storage Fehler: ${t.message}`):new Error("Unbekannter Firebase Storage Fehler")}})}static \u0275fac=function(t){return new(t||n)(ue(Bc),ue(zc))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var pa=class n{businessTypeTranslations={restaurant:"Restaurant",epicerie:"Lebensmittelgesch\xE4ft",coiffeur:"Friseur",vetement:"Modegesch\xE4ft",services:"Dienstleistungen"};businessTypePlural={restaurant:"Restaurants",epicerie:"Lebensmittelgesch\xE4fte",coiffeur:"Friseure",vetement:"Modegesch\xE4fte",services:"Dienstleistungen"};businessTypeIcons={restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"};errorMessages={"auth/user-not-found":"Benutzer nicht gefunden","auth/wrong-password":"Falsches Passwort","auth/email-already-in-use":"E-Mail-Adresse wird bereits verwendet","auth/weak-password":"Passwort ist zu schwach","auth/invalid-email":"Ung\xFCltige E-Mail-Adresse","auth/popup-blocked":"Popup wurde blockiert. Bitte erlauben Sie Popups f\xFCr diese Website.","auth/popup-closed-by-user":"Anmeldung wurde abgebrochen","auth/cancelled-popup-request":"Anmeldung wurde abgebrochen","popup-blocked":"Popup wurde von Ihrem Browser blockiert","connection-error":"Verbindungsfehler. \xDCberpr\xFCfen Sie Ihre Internetverbindung.","general-error":"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut."};generalMessages={"login-success":"Erfolgreich angemeldet!","logout-success":"Erfolgreich abgemeldet!","registration-success":"Konto erfolgreich erstellt!","data-saved":"Daten erfolgreich gespeichert!","data-deleted":"Daten erfolgreich gel\xF6scht!",loading:"Wird geladen...",saving:"Wird gespeichert...","confirma-delete":"Sind Sie sicher, dass Sie dies l\xF6schen m\xF6chten?"};getBusinessTypeName(e,t=!1){return t?this.businessTypePlural[e]||e:this.businessTypeTranslations[e]||e}getBusinessTypeIcon(e){return this.businessTypeIcons[e]||"\u{1F3EA}"}getBusinessTypeDisplay(e,t=!1){let r=this.getBusinessTypeIcon(e),i=this.getBusinessTypeName(e,t);return`${r} ${i}`}getErrorMessage(e){return this.errorMessages[e]||this.errorMessages["general-error"]}getMessage(e){return this.generalMessages[e]||e}getAllBusinessTypes(){return Object.keys(this.businessTypeTranslations).map(e=>({value:e,label:this.businessTypeTranslations[e],icon:this.businessTypeIcons[e]}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var fn=class n{constructor(e,t){this.auth=e;this.translationService=t;this.user$=LV(this.auth)}user$;register(e,t,r){return T(this,null,function*(){try{let i=yield FV(this.auth,e,t);return r&&i.user&&(yield zV(i.user,{displayName:r})),{uid:i.user.uid,email:i.user.email,displayName:r||i.user.displayName,photoURL:i.user.photoURL}}catch(i){throw console.error("Erreur lors de l'inscription:",i),this.handleAuthError(i)}})}login(e,t){return T(this,null,function*(){try{let r=yield UV(this.auth,e,t);return{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL}}catch(r){throw console.error("Erreur lors de la connexion:",r),this.handleAuthError(r)}})}loginWithGoogle(){return T(this,null,function*(){try{console.log("\u{1F680} Initialisation du provider Google...");let e=new FC;e.setCustomParameters({prompt:"select_account"}),console.log("\u{1F50D} V\xE9rification du support des popups..."),this.checkPopupSupport(),console.log("\u{1F510} Tentative de connexion avec popup...");let t=yield BV(this.auth,e);return console.log("\u2705 Connexion r\xE9ussie, utilisateur:",t.user.email),{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,photoURL:t.user.photoURL}}catch(e){throw console.error("\u274C Erreur d\xE9taill\xE9e:",{name:e.name,code:e.code,message:e.message,customData:e.customData}),e.code==="auth/popup-blocked"?console.log("\u{1F6AB} Popup bloqu\xE9e d\xE9tect\xE9e"):e.code==="auth/popup-closed-by-user"?console.log("\u{1F44B} Popup ferm\xE9e par l'utilisateur"):e.code==="auth/cancelled-popup-request"&&console.log("\u{1F504} Requ\xEAte popup annul\xE9e"),this.handleAuthError(e)}})}checkPopupSupport(){try{let e=window.open("","_blank","width=1,height=1");if(e)e.close();else throw new Error("popup-blocked")}catch{throw new Error("popup-blocked")}}logout(){return T(this,null,function*(){try{yield jV(this.auth)}catch(e){throw console.error("Erreur lors de la d\xE9connexion:",e),this.handleAuthError(e)}})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}handleAuthError(e){let t="Ein Fehler ist aufgetreten";if(e.code)switch(e.code){case"auth/email-already-in-use":t=this.translationService.getErrorMessage("auth/email-already-in-use");break;case"auth/weak-password":t=this.translationService.getErrorMessage("auth/weak-password");break;case"auth/invalid-email":t=this.translationService.getErrorMessage("auth/invalid-email");break;case"auth/user-not-found":t=this.translationService.getErrorMessage("auth/user-not-found");break;case"auth/wrong-password":t=this.translationService.getErrorMessage("auth/wrong-password");break;case"auth/too-many-requests":t="Zu viele Versuche. Bitte versuchen Sie es sp\xE4ter erneut";break;case"auth/user-disabled":t="Dieses Konto wurde deaktiviert";break;case"auth/operation-not-allowed":t="Diese Operation ist nicht erlaubt";break;case"auth/popup-closed-by-user":t=this.translationService.getErrorMessage("auth/popup-closed-by-user");break;case"auth/popup-blocked":t=this.translationService.getErrorMessage("auth/popup-blocked");break;case"popup-blocked":t=this.translationService.getErrorMessage("popup-blocked");break;case"auth/cancelled-popup-request":t=this.translationService.getErrorMessage("auth/cancelled-popup-request");break;default:t=this.translationService.getErrorMessage("general-error")}return new Error(t)}static \u0275fac=function(t){return new(t||n)(ue(vc),ue(pa))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var aw=class n{constructor(){}getCurrentPosition(){return new Le(e=>{if(!navigator.geolocation){console.error("Geolocation ist in diesem Browser nicht verf\xFCgbar"),e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(r=>{let i={lat:r.coords.latitude,lng:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp};e.next(i),e.complete()},r=>{switch(console.error("Fehler beim Abrufen der Position:",r),r.code){case r.PERMISSION_DENIED:console.error("Standortzugriff wurde verweigert");break;case r.POSITION_UNAVAILABLE:console.error("Standortinformationen nicht verf\xFCgbar");break;case r.TIMEOUT:console.error("Zeit\xFCberschreitung beim Abrufen des Standorts");break}e.next(null),e.complete()},t)})}watchPosition(){return new Le(e=>{if(!navigator.geolocation){e.next(null),e.complete();return}let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4},r=navigator.geolocation.watchPosition(i=>{let o={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy,timestamp:i.timestamp};e.next(o)},i=>{console.error("Fehler beim \xDCberwachen der Position:",i),e.next(null)},t);return()=>{navigator.geolocation.clearWatch(r)}})}calculateDistance(e,t,r,i){let s=this.deg2rad(r-e),a=this.deg2rad(i-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(a/2)*Math.sin(a/2),h=6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return Math.round(h*100)/100}deg2rad(e){return e*(Math.PI/180)}isGeolocationSupported(){return"geolocation"in navigator}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function kie(n,e){if(n&1){let t=nt();y(0,"button",42),fe("click",function(){se(t);let i=J(2);return ae(i.goToAdmin())}),b(1," \u2699\uFE0F "),v()}}function Oie(n,e){if(n&1){let t=nt();y(0,"div",39)(1,"button",40),fe("click",function(){se(t);let i=J();return ae(i.goToAddAfroshop())}),b(2," \u2795 Afroshop hinzuf\xFCgen "),v(),he(3,kie,2,0,"button",41),v()}if(n&2){let t=e.ngIf,r=J();F(3),q("ngIf",r.isAdminUser(t))}}function Nie(n,e){if(n&1){let t=nt();y(0,"div",39)(1,"button",43),fe("click",function(){se(t);let i=J();return ae(i.addNewAfroshop())}),b(2," \u{1F510} Anmelden zum Hinzuf\xFCgen "),v()()}}function Lie(n,e){if(n&1&&(y(0,"option",44),b(1),v()),n&2){let t=e.$implicit;q("value",t.value),F(),yo(" ",t.icon," ",t.label," ")}}function Fie(n,e){if(n&1&&(y(0,"span",50),b(1),v()),n&2){let t=J(2);F(),rt("um ",t.getSelectedCityName(),"")}}function Vie(n,e){n&1&&(y(0,"span",51),b(1,"um deinen Standort"),v())}function Uie(n,e){if(n&1&&(y(0,"div",45)(1,"div",46),b(2," \u{1F3AF} Suche in 50km Umkreis "),he(3,Fie,2,1,"span",47)(4,Vie,2,0,"span",48),v(),y(5,"div",49),b(6),v()()),n&2){let t=J();F(3),q("ngIf",t.selectedCity),F(),q("ngIf",!t.selectedCity),F(2),yo(" ",t.filteredAfroshops.length," von ",t.allAfroshops.length," Afroshops angezeigt ")}}function Bie(n,e){if(n&1){let t=nt();y(0,"div",52)(1,"app-map",53),fe("shopSelected",function(i){se(t);let o=J();return ae(o.viewAfroshopDetail(i))}),v()()}if(n&2){let t=J();F(),q("afroshops",t.filteredAfroshops)("userLocation",t.userLocation)}}function jie(n,e){if(n&1){let t=nt();y(0,"button",71),fe("click",function(i){se(t);let o=J().$implicit,s=J(2);return ae(s.editAfroshop(i,o.id))}),b(1," \u270F\uFE0F "),v()}}function zie(n,e){if(n&1&&(y(0,"div",72),b(1),v()),n&2){let t=J().$implicit,r=J(2);F(),rt(" \u{1F3AF} ",r.getDistanceFromUser(t)," ")}}function $ie(n,e){if(n&1){let t=nt();y(0,"div",56)(1,"div",57),fe("click",function(){let i=se(t).$implicit,o=J(2);return ae(o.viewAfroshopDetail(i.id))}),y(2,"img",58),fe("error",function(i){let o=se(t).$implicit,s=J(2);return ae(s.onImageError(i,o.type))}),v(),y(3,"div",59),b(4),v(),he(5,jie,2,0,"button",60),y(6,"div",61)(7,"span",62),b(8,"\u{1F4CD} Details ansehen"),v()()(),y(9,"div",63)(10,"h3",64),b(11),v(),y(12,"p",65),b(13),v(),y(14,"div",66)(15,"span",67),b(16),v(),y(17,"span",68),b(18),v(),y(19,"span",69),b(20),Gr(21,"titlecase"),v()(),he(22,zie,2,1,"div",70),v()()}if(n&2){let t=e.$implicit,r=J(2);F(2),q("src",t.image||r.getDefaultImage(t.type),Ds)("alt",t.name),F(),Ja(t.type),F(),rt(" ",r.getBusinessTypeDisplay(t.type)," "),F(),q("ngIf",r.canEditAfroshop(t)),F(6),tn(t.name),F(2),rt("\u{1F4CD} ",r.getLocationDisplay(t.address),""),F(3),rt("\u2B50 ",t.rating,""),F(2),tn(r.getPriceLevel(t.priceLevel)),F(2),tn(Wr(21,12,t.type)),F(2),q("ngIf",r.userLocation)}}function qie(n,e){if(n&1&&(y(0,"div",54),he(1,$ie,23,14,"div",55),v()),n&2){let t=J();F(),q("ngForOf",t.filteredAfroshops)}}function Hie(n,e){if(n&1){let t=nt();y(0,"div",73)(1,"div",74)(2,"div",75),b(3,"\u{1F50D}"),v(),y(4,"h3"),b(5,"Kein Gesch\xE4ft gefunden"),v(),y(6,"p"),b(7,"Kein Afroshop entspricht deinen Suchkriterien"),v(),y(8,"button",76),fe("click",function(){se(t);let i=J();return ae(i.clearSearch())}),b(9," Alle Gesch\xE4fte anzeigen "),v()()()}}var cw=class n{constructor(e,t,r,i,o,s){this.afroshopService=e;this.firebaseService=t;this.authService=r;this.translationService=i;this.router=o;this.geolocationService=s;this.user$=this.authService.user$}allAfroshops=[];filteredAfroshops=[];searchTerm="";selectedType="";selectedCity="";customCityName="";showMap=!1;userLocation=null;user$;cityCoordinates={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}};ngOnInit(){this.firebaseService.getAllAfroshops().subscribe({next:e=>{this.allAfroshops=this.fixInvalidCoordinates(e),this.filteredAfroshops=this.allAfroshops},error:e=>{console.error("Erreur lors du chargement Firebase:",e),this.allAfroshops=this.afroshopService.getAllAfroshops(),this.filteredAfroshops=this.allAfroshops}})}onSearchChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}onTypeFilterChange(){this.applyFilters(),this.userLocation&&this.sortAfroshopsByDistance()}applyFilters(){let e=this.allAfroshops;if(this.userLocation&&(e=e.filter(t=>t.coordinates.lat===0&&t.coordinates.lng===0?!0:this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng)<=50)),this.selectedType&&(e=e.filter(t=>t.type===this.selectedType)),this.searchTerm.trim()!==""){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.cuisine?.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}this.filteredAfroshops=e}clearSearch(){this.searchTerm="",this.selectedType="",this.selectedCity="",this.userLocation=null,this.filteredAfroshops=this.allAfroshops,this.applyFilters()}viewAfroshopDetail(e){this.router.navigate(["/afroshop",e])}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}toggleMapView(){this.showMap=!this.showMap}onCityChange(){if(this.customCityName="",this.selectedCity){let e=this.cityCoordinates[this.selectedCity];e&&(this.userLocation=e,this.applyFilters(),this.sortAfroshopsByDistance())}else this.userLocation=null,this.applyFilters()}useCurrentLocation(){if(!confirm(`\u{1F4CD} GPS Standort aktivieren?

AfroConnect m\xF6chte deinen Standort nutzen um:
\u{1F3AF} Afroshops in deiner N\xE4he zu finden
\u{1F4CF} Entfernungen genau zu berechnen
\u{1F5FA}\uFE0F Dir die beste Route zu zeigen

Dein Standort wird NICHT gespeichert und bleibt privat.

GPS jetzt aktivieren?`)){alert(`\u{1F44D} Kein Problem!

Du kannst jederzeit:
\u2022 Eine Stadt manuell eingeben
\u2022 Aus der Liste w\xE4hlen
\u2022 GPS sp\xE4ter aktivieren`);return}this.geolocationService.getCurrentPosition().subscribe({next:t=>{t?(this.userLocation={lat:t.lat,lng:t.lng},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u2705 Standort erfolgreich ermittelt!

\u{1F3AF} Afroshops werden jetzt nach Entfernung sortiert.
\u{1F4CF} Du siehst die genauen Distanzen zu jedem Gesch\xE4ft.`)):this.fallbackToDefaultLocationWithChoice()},error:t=>{this.handleGeolocationError(t)}})}handleGeolocationError(e){if(e.code)switch(e.code){case 1:this.showGPSActivationDialog();break;case 2:this.showGPSUnavailableDialog();break;case 3:this.showGPSTimeoutDialog();break;default:this.showGenericGPSError()}else this.showHTTPSRequiredDialog()}showGPSActivationDialog(){confirm(`\u{1F4CD} Standort-Zugriff erforderlich

Um Afroshops in deiner N\xE4he zu finden, ben\xF6tigt AfroConnect Zugriff auf deinen Standort.

\u2705 Schritte:
1. Klicke "OK" um die Berechtigung zu erteilen
2. W\xE4hle "Zulassen" wenn der Browser fragt
3. Bei iOS: Einstellungen > Safari > Standort aktivieren

M\xF6chtest du es nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSUnavailableDialog(){confirm(`\u{1F6F0}\uFE0F GPS-Signal nicht verf\xFCgbar

Dein GPS-Signal ist momentan nicht erreichbar.

\u{1F4A1} L\xF6sungen:
\u2022 Gehe ins Freie oder n\xE4her zum Fenster
\u2022 Aktiviere GPS in den Ger\xE4te-Einstellungen
\u2022 Starte die App neu

Nochmal versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGPSTimeoutDialog(){confirm(`\u23F1\uFE0F GPS-Anfrage zu langsam

Die Standort-Ermittlung dauert zu lange.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfe deine Internetverbindung
\u2022 Gehe ins Freie f\xFCr besseres GPS-Signal
\u2022 Versuche es in ein paar Sekunden nochmal

Erneut versuchen?`)?this.useCurrentLocation():this.fallbackToDefaultLocationWithChoice()}showGenericGPSError(){alert(`\u274C Standort-Fehler

Ein unbekannter Fehler ist aufgetreten.

\u{1F4CD} Berlin wird als Standard verwendet.
Du kannst jederzeit eine Stadt manuell ausw\xE4hlen.`),this.fallbackToDefaultLocationWithChoice()}showHTTPSRequiredDialog(){let e=window.location.protocol==="https:";alert(e?`\u{1F527} Standort-Service Problem

Der Standort-Service ist momentan nicht verf\xFCgbar.

\u{1F4CD} Berlin wird als Standard verwendet.
Versuche es sp\xE4ter nochmal oder w\xE4hle eine Stadt manuell.`:`\u{1F512} HTTPS erforderlich

F\xFCr mobile Ger\xE4te ist eine sichere HTTPS-Verbindung n\xF6tig.

\u{1F310} Verwende: https://ydi5291.github.io/AfroConnect/

\u{1F4CD} Berlin wird als Standard verwendet.`),this.fallbackToDefaultLocationWithChoice()}fallbackToDefaultLocationWithChoice(){this.userLocation=this.cityCoordinates.berlin,this.selectedCity="berlin",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\uFFFD Standard-Standort aktiviert

Berlin wurde als dein Standort gew\xE4hlt.

\u{1F3AF} Du kannst jederzeit:
\u2022 Eine andere Stadt suchen
\u2022 Aus der Liste w\xE4hlen
\u2022 "\u{1F4E1} Mein Standort" nochmal probieren`)}sortAfroshopsByDistance(){this.userLocation&&this.filteredAfroshops.sort((e,t)=>{let r=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng),i=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,t.coordinates.lat,t.coordinates.lng);return r-i})}getDistanceFromUser(e){if(!this.userLocation)return"";let t=this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,e.coordinates.lat,e.coordinates.lng);return t<1?`${Math.round(t*1e3)}m entfernt`:`${t.toFixed(1)}km entfernt`}addNewAfroshop(){if(!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um einen Afroshop hinzuzuf\xFCgen."),this.router.navigate(["/login"]);return}this.router.navigate(["/add-afroshop"])}canEditAfroshop(e){let t=this.authService.getCurrentUser();return t?e.createdBy===t.uid:!1}editAfroshop(e,t){if(e.stopPropagation(),!this.authService.getCurrentUser()){alert("Bitte melden Sie sich an, um fortzufahren."),this.router.navigate(["/login"]);return}this.router.navigate(["/edit-afroshop",t])}goToAddAfroshop(){this.addNewAfroshop()}isAdminUser(e){return!e||!e.email?!1:["youssoufdiamaldiallo@gmail.com","admin@afroconnect.de","contact@afroconnect.de"].includes(e.email)}goToAdmin(){this.router.navigate(["/admin"])}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}getBusinessTypeDisplay(e){return this.translationService.getBusinessTypeDisplay(e)}getBusinessTypeIcon(e){return this.translationService.getBusinessTypeIcon(e)}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getSelectedCityName(){return this.selectedCity?this.selectedCity.charAt(0).toUpperCase()+this.selectedCity.slice(1):""}getDefaultImage(e){return{restaurant:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",epicerie:"https://images.unsplash.com/photo-1586350388589-e263efc1ba5a?w=400&h=300&fit=crop",coiffeur:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=300&fit=crop",vetement:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",services:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop"}[e]}onImageError(e,t){e.target.src=this.getDefaultImage(t)}getLocationDisplay(e){if(!e||e.trim()==="")return"Adresse \xE0 confirmer";let t=e.split(",");return t.length>1?t[1].trim():e}searchCity(){if(!this.customCityName?.trim())return;let e=this.customCityName.trim().toLowerCase(),t=Object.keys(this.cityCoordinates).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));if(t){this.selectedCity=t,this.userLocation=this.cityCoordinates[t],this.onCityChange();return}this.searchInAdditionalCities(e)||this.geocodeGermanCity(e)}searchInAdditionalCities(e){let t={werl:{lat:51.5533,lng:7.9111},lippstadt:{lat:51.6755,lng:8.3439},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}},r=Object.keys(t).find(i=>i.toLowerCase().includes(e)||e.includes(i.toLowerCase()));return r?(this.userLocation=t[r],this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance(),alert(`\u{1F4CD} Stadt gefunden: ${this.customCityName}`),!0):!1}geocodeGermanCity(e){return T(this,null,function*(){try{let t=yield fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&country=Germany&addressdetails=1&limit=5&format=json&featuretype=city,town,village`);if(!t.ok)throw new Error("Probl\xE8me de r\xE9seau");let r=yield t.json();if(r&&r.length>0){let i=r[0],o=parseFloat(i.lat),s=parseFloat(i.lon);if(!isNaN(o)&&!isNaN(s)){this.userLocation={lat:o,lng:s},this.selectedCity="",this.applyFilters(),this.sortAfroshopsByDistance();let a=i.display_name.split(",")[0];alert(`\u{1F4CD} Stadt gefunden: ${a}
\u{1F5FA}\uFE0F Koordinaten: ${o.toFixed(4)}, ${s.toFixed(4)}`)}else throw new Error("Coordonn\xE9es invalides")}else this.showCityNotFoundAlert()}catch(t){console.error("Erreur de g\xE9ocodage:",t),this.showCityNotFoundAlert()}})}showCityNotFoundAlert(){alert(`\u274C Stadt "${this.customCityName}" nicht gefunden.

\u{1F4A1} Tipps:
\u2022 \xDCberpr\xFCfen Sie die Schreibweise
\u2022 Verwenden Sie deutsche St\xE4dtenamen
\u2022 Versuchen Sie es mit einem Stadtteil oder einer nahegelegenen gr\xF6\xDFeren Stadt
\u2022 W\xE4hlen Sie aus der vordefinierten Liste`)}fixInvalidCoordinates(e){return e.map(t=>{if(t.coordinates.lat===0&&t.coordinates.lng===0){let r=this.guessCoordinatesFromAddress(t.address);if(r)return le(j({},t),{coordinates:r})}return t})}guessCoordinatesFromAddress(e){let t=e.toLowerCase(),r=le(j({},this.cityCoordinates),{lippstadt:{lat:51.6755,lng:8.3439},werl:{lat:51.5533,lng:7.9111},soest:{lat:51.5731,lng:8.1067},paderborn:{lat:51.7189,lng:8.7575},bielefeld:{lat:52.0302,lng:8.5325},m\u00FCnster:{lat:51.9607,lng:7.6261},bochum:{lat:51.4818,lng:7.2162},duisburg:{lat:51.4344,lng:6.7623},wuppertal:{lat:51.2562,lng:7.1508}});for(let[o,s]of Object.entries(r))if(t.includes(o))return s;let i={59555:{lat:51.6755,lng:8.3439},59594:{lat:51.5533,lng:7.9111},59494:{lat:51.5731,lng:8.1067},33098:{lat:51.7189,lng:8.7575}};for(let[o,s]of Object.entries(i))if(e.includes(o))return s;return null}static \u0275fac=function(t){return new(t||n)(te(Nd),te(Ki),te(fn),te(pa),te(_t),te(aw))};static \u0275cmp=It({type:n,selectors:[["app-gallery"]],decls:65,vars:17,consts:[[1,"gallery-container"],[1,"gallery-header"],[1,"header-content"],[1,"header-text"],["class","header-actions",4,"ngIf"],[1,"controls-desktop-layout"],[1,"filter-container","unified-control-group"],["for","type-filter",1,"unified-label"],[1,"unified-input-group"],["id","type-filter",1,"unified-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"unified-spacer"],[1,"location-container"],["for","city-input",1,"unified-label"],[1,"desktop-city-controls"],[1,"city-search-group"],["type","text","id","city-input","name","cityInput","placeholder","Jede deutsche Stadt...",1,"unified-input","city-input-compact",3,"ngModelChange","keyup.enter","ngModel"],["title","Stadt suchen",1,"unified-btn","search-btn",3,"click","disabled"],[1,"quick-cities-group"],[1,"unified-select","city-select-compact",3,"ngModelChange","ngModel"],["value","berlin"],["value","hamburg"],["value","m\xFCnchen"],["value","k\xF6ln"],["value","frankfurt"],["value","stuttgart"],["value","d\xFCsseldorf"],["value","dortmund"],["value","essen"],["value","leipzig"],["title","Ausgew\xE4hlte Stadt best\xE4tigen",1,"unified-btn","confirm-btn",3,"click","disabled"],[1,"gps-group"],["title","GPS aktivieren und Standort verwenden",1,"location-btn","gps-btn-desktop",3,"click"],[1,"location-hint","mobile-only"],["class","radius-info",4,"ngIf"],["class","map-view",4,"ngIf"],["class","gallery-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"header-actions"],["title","Neuen Afroshop hinzuf\xFCgen",1,"add-afroshop-btn","primary",3,"click"],["class","admin-link-btn","title","Administration",3,"click",4,"ngIf"],["title","Administration",1,"admin-link-btn",3,"click"],["title","Anmelden um einen Afroshop hinzuzuf\xFCgen",1,"add-afroshop-btn","disabled",3,"click"],[3,"value"],[1,"radius-info"],[1,"radius-indicator"],["class","city-name",4,"ngIf"],["class","current-location",4,"ngIf"],[1,"results-count"],[1,"city-name"],[1,"current-location"],[1,"map-view"],[3,"shopSelected","afroshops","userLocation"],[1,"gallery-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"],[1,"image-wrapper",3,"click"],[1,"gallery-image",3,"error","src","alt"],[1,"type-badge"],["class","edit-btn","title","Bearbeiten",3,"click",4,"ngIf"],[1,"image-overlay"],[1,"click-hint"],[1,"card-info"],[1,"shop-name"],[1,"shop-location"],[1,"shop-meta"],[1,"rating"],[1,"price"],[1,"type"],["class","distance",4,"ngIf"],["title","Bearbeiten",1,"edit-btn",3,"click"],[1,"distance"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"btn-clear-search",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5),v()(),he(6,Oie,4,1,"div",4),Gr(7,"async"),he(8,Nie,3,0,"div",4),Gr(9,"async"),v(),y(10,"div",5)(11,"div",6)(12,"label",7),b(13,"Nach Typ filtern:"),v(),y(14,"div",8)(15,"select",9),Se("ngModelChange",function(o){return Re(r.selectedType,o)||(r.selectedType=o),o}),fe("change",function(){return r.onTypeFilterChange()}),y(16,"option",10),b(17,"Alle Typen"),v(),he(18,Lie,2,3,"option",11),v(),vt(19,"div",12),v()(),y(20,"div",13)(21,"label",14),b(22,"\u{1F4CD} Deine Stadt:"),v(),y(23,"div",15)(24,"div",16)(25,"div",8)(26,"input",17),Se("ngModelChange",function(o){return Re(r.customCityName,o)||(r.customCityName=o),o}),fe("keyup.enter",function(){return r.searchCity()}),v(),y(27,"button",18),fe("click",function(){return r.searchCity()}),b(28," \u{1F50D} Suchen "),v()()(),y(29,"div",19)(30,"div",8)(31,"select",20),Se("ngModelChange",function(o){return Re(r.selectedCity,o)||(r.selectedCity=o),o}),y(32,"option",10),b(33,"Beliebte St\xE4dte..."),v(),y(34,"option",21),b(35,"Berlin"),v(),y(36,"option",22),b(37,"Hamburg"),v(),y(38,"option",23),b(39,"M\xFCnchen"),v(),y(40,"option",24),b(41,"K\xF6ln"),v(),y(42,"option",25),b(43,"Frankfurt am Main"),v(),y(44,"option",26),b(45,"Stuttgart"),v(),y(46,"option",27),b(47,"D\xFCsseldorf"),v(),y(48,"option",28),b(49,"Dortmund"),v(),y(50,"option",29),b(51,"Essen"),v(),y(52,"option",30),b(53,"Leipzig"),v()(),y(54,"button",31),fe("click",function(){return r.onCityChange()}),b(55," \u2713 Best\xE4tigen "),v()()(),y(56,"div",32)(57,"button",33),fe("click",function(){return r.useCurrentLocation()}),b(58," \u{1F4E1} GPS aktivieren "),v()()(),y(59,"small",34),b(60," \u{1F3AF} Findet automatisch Afroshops in deiner N\xE4he "),v()()(),he(61,Uie,7,4,"div",35),v()(),he(62,Bie,2,2,"div",36)(63,qie,2,1,"div",37)(64,Hie,10,0,"div",38)),t&2&&(F(5),rt("\u{1F30D} Entdecke ",r.filteredAfroshops.length," afrikanische Gesch\xE4fte in deiner N\xE4he"),F(),q("ngIf",Wr(7,13,r.user$)),F(2),q("ngIf",!Wr(9,15,r.user$)),F(7),Ce("ngModel",r.selectedType),F(3),q("ngForOf",r.getAllBusinessTypes()),F(8),Ce("ngModel",r.customCityName),F(),q("disabled",!r.customCityName||!r.customCityName.trim()),F(4),Ce("ngModel",r.selectedCity),F(23),q("disabled",!r.selectedCity),F(7),q("ngIf",r.userLocation&&(r.selectedCity||r.filteredAfroshops.length<r.allAfroshops.length)),F(),q("ngIf",r.showMap&&r.filteredAfroshops.length>0),F(),q("ngIf",!r.showMap&&r.filteredAfroshops.length>0),F(),q("ngIf",r.filteredAfroshops.length===0&&(r.searchTerm||r.selectedType)))},dependencies:[ln,ks,mn,Lh,Za,fa,tw,nw,Wi,Od,ha,Go,ow],styles:[".gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.gallery-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-text[_ngcontent-%COMP%]{text-align:center;flex:1}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm)}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:var(--spacing-lg)}.add-afroshop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;display:flex;justify-content:center}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.unified-control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);max-width:500px;margin:0 auto var(--spacing-md) auto;width:100%}.unified-label[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:600;margin-bottom:var(--spacing-xs);text-align:center}.unified-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;width:100%;height:50px}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:all .3s ease;height:100%;box-sizing:border-box}.unified-input[_ngcontent-%COMP%]:focus, .unified-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.unified-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:0 var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:120px;height:100%;box-sizing:border-box}.unified-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.unified-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{justify-content:center}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{flex:1;max-width:none;margin:0}.unified-spacer[_ngcontent-%COMP%]{width:120px;min-width:120px;visibility:hidden}.controls-desktop-layout[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:24px;margin-bottom:32px;box-shadow:0 8px 32px #00000014}@media (min-width: 1024px){.controls-desktop-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr;gap:40px;align-items:start}.filter-container[_ngcontent-%COMP%]{margin:0;text-align:left}.location-container[_ngcontent-%COMP%]{margin:0}.desktop-city-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 2fr 1fr;gap:20px;align-items:end;width:100%}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.city-input-compact[_ngcontent-%COMP%]{min-width:200px;flex:1}.city-select-compact[_ngcontent-%COMP%]{min-width:150px;flex:1}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:90px;flex-shrink:0}.gps-btn-desktop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #28a7454d;white-space:nowrap;width:100%;min-height:48px}.gps-btn-desktop[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #28a74566}.mobile-only[_ngcontent-%COMP%], .quick-cities[_ngcontent-%COMP%]   .unified-label[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1023px){.controls-desktop-layout[_ngcontent-%COMP%]{padding:20px}.desktop-city-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]{width:100%}.city-search-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%]   .unified-input-group[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.city-input-compact[_ngcontent-%COMP%], .city-select-compact[_ngcontent-%COMP%]{flex:1}.search-btn[_ngcontent-%COMP%], .confirm-btn[_ngcontent-%COMP%]{min-width:100px;flex-shrink:0}.gps-group[_ngcontent-%COMP%]{width:100%}.gps-btn-desktop[_ngcontent-%COMP%]{width:100%;padding:14px}}@media (max-width: 767px){.controls-desktop-layout[_ngcontent-%COMP%]{background:none;border:none;padding:0;box-shadow:none}.desktop-city-controls[_ngcontent-%COMP%]{display:block}.city-search-group[_ngcontent-%COMP%], .quick-cities-group[_ngcontent-%COMP%], .gps-group[_ngcontent-%COMP%]{margin-bottom:16px}.gps-btn-desktop[_ngcontent-%COMP%]{background:var(--primary-color);width:100%;margin-top:0;padding:14px}.mobile-only[_ngcontent-%COMP%]{display:block}}.search-container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto var(--spacing-lg) auto}.filter-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--spacing-lg) auto;text-align:center}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-xs)}.type-filter[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease}.type-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:var(--background-white);border:2px solid #e0e0e0;border-radius:25px;padding:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--text-light);font-size:1.1rem}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:var(--spacing-sm) var(--spacing-xs);font-size:1rem;background:transparent;color:var(--text-dark)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;margin-right:var(--spacing-xs);transition:background .3s ease}.clear-button[_ngcontent-%COMP%]:hover{background:#e74c3c}.search-results[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-sm);color:var(--primary-color);font-weight:500;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md);margin:var(--spacing-lg) auto;flex-wrap:wrap}.map-toggle-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease}.map-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--secondary-color);transform:translateY(-2px)}.map-toggle-btn.active[_ngcontent-%COMP%]{background:var(--secondary-color)}.map-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.add-afroshop-btn[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .3s ease;box-shadow:var(--shadow-sm)}.add-afroshop-btn.primary[_ngcontent-%COMP%]{background:var(--accent-color);padding:var(--spacing-md) var(--spacing-xl);font-size:1.1rem;box-shadow:var(--shadow-md)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]{background:#95a5a6;cursor:pointer}.add-afroshop-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#e67e22;transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-afroshop-btn.disabled[_ngcontent-%COMP%]:hover{background:#7f8c8d;transform:none}.add-afroshop-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.admin-link-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);color:#fff;border:none;padding:8px 12px;border-radius:50%;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000001a;margin-left:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.admin-link-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7f8c8d,#95a5a6);transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #00000026}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}@media (max-width: 600px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.add-afroshop-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;width:auto;min-width:200px}.add-afroshop-btn.primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);font-size:1rem}.header-content[_ngcontent-%COMP%]{align-items:center}.header-actions[_ngcontent-%COMP%]{margin-left:0}}.map-view[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.location-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto var(--spacing-lg) auto;text-align:center}.location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-dark);font-weight:500;margin-bottom:var(--spacing-sm);font-size:1.1rem}.city-search-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:center}.city-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);width:100%;max-width:500px;justify-content:center;align-items:stretch}.city-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:1rem;color:var(--text-dark);transition:border-color .3s ease}.city-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3498db1a}.city-input[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#2980b9);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:100px}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,var(--primary-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.search-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.quick-cities[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;margin:0 auto}.quick-label[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;white-space:nowrap;min-width:80px}.city-selector-compact[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:2px solid #e0e0e0;border-radius:var(--border-radius);background:var(--background-white);font-size:.9rem;color:var(--text-dark);cursor:pointer;transition:border-color .3s ease;min-width:180px}.city-selector-compact[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4a90e21a}.location-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs)}.location-btn[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:.9rem;cursor:pointer;white-space:nowrap;transition:all .3s ease}.location-btn[_ngcontent-%COMP%]:hover{background:#e67e22;transform:translateY(-1px)}.location-hint[_ngcontent-%COMP%]{color:#666;font-size:.8em;text-align:center;max-width:250px}.radius-info[_ngcontent-%COMP%]{margin-top:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;border-radius:var(--border-radius);text-align:center;max-width:500px;margin-left:auto;margin-right:auto}.radius-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;font-size:1rem;margin-bottom:var(--spacing-xs)}.city-name[_ngcontent-%COMP%], .current-location[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.results-count[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem;font-style:italic}.distance[_ngcontent-%COMP%]{color:var(--secondary-color);font-size:.85rem;font-weight:500;margin-top:var(--spacing-xs)}@media (max-width: 600px){.unified-control-group[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-sm)}.unified-input-group[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:var(--spacing-xs)}.unified-input[_ngcontent-%COMP%], .unified-select[_ngcontent-%COMP%], .unified-btn[_ngcontent-%COMP%]{height:50px;min-width:auto;width:100%}.filter-container.unified-control-group[_ngcontent-%COMP%]   .unified-select[_ngcontent-%COMP%]{max-width:100%}.city-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.search-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.quick-cities[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);max-width:100%}.quick-label[_ngcontent-%COMP%]{min-width:auto;text-align:center}.city-dropdown-group[_ngcontent-%COMP%]{width:100%;max-width:300px}.city-selector-compact[_ngcontent-%COMP%]{min-width:auto;width:100%;max-width:none}.location-container[_ngcontent-%COMP%]{max-width:100%;padding:0 var(--spacing-md)}}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:var(--spacing-xl)}.no-results-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.6}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:var(--spacing-lg);line-height:1.6}.btn-clear-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:transform .3s ease,box-shadow .3s ease}.btn-clear-search[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:var(--spacing-lg);max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-md);padding:0 var(--spacing-sm)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-sm);padding:0 var(--spacing-xs)}}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-radius:var(--border-radius-lg);overflow:hidden;background:var(--background-white);box-shadow:var(--shadow-sm)}.image-card[_ngcontent-%COMP%]:hover, .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg)}.type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-sm);left:var(--spacing-sm);background:#000c;color:#fff;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:1.2rem;z-index:2}.type-badge.restaurant[_ngcontent-%COMP%]{background:#e74c3ce6}.type-badge.epicerie[_ngcontent-%COMP%]{background:#27ae60e6}.type-badge.coiffeur[_ngcontent-%COMP%]{background:#9b59b6e6}.type-badge.vetement[_ngcontent-%COMP%]{background:#3498dbe6}.type-badge.services[_ngcontent-%COMP%]{background:#f1c40fe6;color:var(--text-dark)}.rating[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:var(--spacing-xs);opacity:.95}.image-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.gallery-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-card[_ngcontent-%COMP%]:hover   .gallery-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;color:#fff;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.click-hint[_ngcontent-%COMP%]{background:var(--primary-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:600;box-shadow:var(--shadow-md);transition:transform .2s ease}.image-overlay[_ngcontent-%COMP%]:hover   .click-hint[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 1024px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}@media (max-width: 768px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.image-overlay[_ngcontent-%COMP%]{position:static;transform:none;background:linear-gradient(135deg,#000c,#0009);margin-top:-60px;z-index:2;border-radius:0 0 var(--border-radius-lg) var(--border-radius-lg)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{transform:none}}@media (max-width: 480px){.gallery-container[_ngcontent-%COMP%]{padding:var(--spacing-xs)}.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1.3}.gallery-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.image-card[_ngcontent-%COMP%], .shop-card[_ngcontent-%COMP%]{margin:0 var(--spacing-xs)}.image-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.image-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 360px){.gallery-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.image-wrapper[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){.image-wrapper[_ngcontent-%COMP%]{height:250px}.search-container[_ngcontent-%COMP%]{max-width:100%;margin-bottom:var(--spacing-md)}.search-wrapper[_ngcontent-%COMP%]{border-radius:20px}.search-input[_ngcontent-%COMP%]{font-size:.9rem}.no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}}.edit-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;background:#fffffff2;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;transition:all var(--transition-normal);z-index:10}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:var(--primary-color);box-shadow:0 4px 12px #e639464d}.edit-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card-info[_ngcontent-%COMP%]{padding:var(--spacing-md);background:var(--background-white);border-top:1px solid var(--background-light)}.shop-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-dark);margin:0 0 var(--spacing-xs) 0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.shop-location[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0 0 var(--spacing-sm) 0;display:flex;align-items:center;gap:var(--spacing-xs)}.shop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.shop-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--success-color);font-weight:700;font-size:.95rem}.shop-meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-light);padding:.25rem .5rem;border-radius:var(--border-radius-sm);font-size:.85rem;font-weight:500}.city-dropdown-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:stretch;flex:1}.city-dropdown-group[_ngcontent-%COMP%]   .city-selector-compact[_ngcontent-%COMP%]{flex:1;min-width:180px}.validate-city-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),#27ae60);color:#fff;border:none;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);font-size:.85rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all .3s ease;min-width:90px}.validate-city-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#27ae60,var(--success-color));transform:translateY(-1px);box-shadow:var(--shadow-sm)}.validate-city-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;opacity:.6}@media (max-width: 768px){.city-dropdown-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs)}.validate-city-btn[_ngcontent-%COMP%]{min-width:auto;padding:var(--spacing-sm)}}"]})};function Gie(n,e){if(n&1){let t=nt();y(0,"button",24),fe("click",function(){se(t);let i=J(2);return ae(i.editAfroshop())}),b(1," \u270F\uFE0F Bearbeiten "),v()}}function Wie(n,e){if(n&1){let t=nt();y(0,"div")(1,"img",25),fe("error",function(i){se(t);let o=J(2);return ae(o.onImageError(i))}),v()()}if(n&2){let t=J(2);F(),q("src",t.afroshop.image,Ds)("alt",t.afroshop.name)}}function Kie(n,e){if(n&1&&(y(0,"div",26)(1,"div",27),b(2,"\u{1F4F7}"),v(),y(3,"p"),b(4,"Kein Bild verf\xFCgbar"),v(),y(5,"small"),b(6),v()()),n&2){let t=J(2);F(6),tn(t.afroshop.image?"Fehler beim Laden: "+t.afroshop.image:"Keine Bild-URL gespeichert")}}function Qie(n,e){if(n&1&&(y(0,"div",28),b(1),v()),n&2){let t=J(2);F(),rt(" \u{1F37D}\uFE0F ",t.afroshop.cuisine," K\xFCche ")}}function Yie(n,e){if(n&1){let t=nt();y(0,"div",3)(1,"div",4)(2,"button",5),fe("click",function(){se(t);let i=J();return ae(i.goBack())}),b(3," \u2190 Zur\xFCck zur \xDCbersicht "),v(),he(4,Gie,2,0,"button",6),v(),y(5,"div",7)(6,"div",8),he(7,Wie,2,2,"div",9)(8,Kie,7,1,"ng-template",null,0,FO),y(10,"div",10),b(11),Gr(12,"titlecase"),v()(),y(13,"div",11)(14,"h1"),b(15),v(),y(16,"div",12)(17,"div",13),b(18),v(),he(19,Qie,2,1,"div",14),v(),y(20,"div",15)(21,"div",16)(22,"strong"),b(23,"\u{1F4CD} Adresse:"),v(),y(24,"p"),b(25),v()(),y(26,"div",16)(27,"strong"),b(28,"\u{1F4DE} Telefon:"),v(),y(29,"p")(30,"a",17),b(31),v()()(),y(32,"div",16)(33,"strong"),b(34,"\u{1F552} \xD6ffnungszeiten:"),v(),y(35,"p"),b(36),v()()(),y(37,"div",18)(38,"h3"),b(39,"\xDCber uns"),v(),y(40,"p"),b(41),v()(),y(42,"div",19)(43,"button",20),fe("click",function(){se(t);let i=J();return ae(i.callPhone(i.afroshop.phone))}),b(44," \u{1F4DE} Anrufen "),v(),y(45,"button",21),fe("click",function(){se(t);let i=J();return ae(i.openInMaps())}),b(46," \u{1F5FA}\uFE0F Auf Karte anzeigen "),v(),y(47,"button",22),fe("click",function(){se(t);let i=J();return ae(i.getDirections())}),b(48," \u{1F9ED} Route "),v(),y(49,"button",23),fe("click",function(){se(t);let i=J();return ae(i.goBack())}),b(50," \u2190 Zur\xFCck "),v()()()()()}if(n&2){let t=kh(9),r=J();F(4),q("ngIf",r.canEdit()),F(3),q("ngIf",r.afroshop.image)("ngIfElse",t),F(3),Ja(r.afroshop.type),F(),yo(" ",r.getTypeIcon(r.afroshop.type)," ",Wr(12,17,r.afroshop.type)," "),F(4),tn(r.afroshop.name),F(3),yo(" \u2B50 ",r.afroshop.rating,"/5 \u2022 ",r.getPriceLevel(r.afroshop.priceLevel)," "),F(),q("ngIf",r.afroshop.cuisine),F(6),tn(r.afroshop.address),F(5),sb("href","tel:",r.afroshop.phone,"",Ds),F(),rt(" ",r.afroshop.phone," "),F(5),tn(r.afroshop.hours),F(5),tn(r.afroshop.description)}}function Jie(n,e){if(n&1){let t=nt();y(0,"div",29)(1,"h2"),b(2,"\u274C Gesch\xE4ft nicht gefunden"),v(),y(3,"p"),b(4,"Das gesuchte Gesch\xE4ft existiert nicht."),v(),y(5,"button",5),fe("click",function(){se(t);let i=J();return ae(i.goBack())}),b(6," \u2190 Zur\xFCck zur \xDCbersicht "),v()()}}var lw=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.afroshopService=r;this.firebaseService=i;this.authService=o}afroshop;shopId="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.shopId=e,console.log("\u{1F50D} Recherche Afroshop avec ID:",e),this.firebaseService.getAllAfroshops().subscribe({next:t=>{console.log("\u{1F50D} Afroshops disponibles:",t.map(r=>`${r.id}: ${r.name}`)),this.afroshop=t.find(r=>r.id===e||r.id===+e||r.id.toString()===e),this.afroshop?(console.log("\u2705 Afroshop trouv\xE9:",this.afroshop.name),console.log("\u{1F5BC}\uFE0F URL de l'image:",this.afroshop.image),console.log("\u{1F4E6} Donn\xE9es compl\xE8tes:",this.afroshop)):(console.log("\u274C Afroshop non trouv\xE9 avec ID:",e),console.log("\u274C Types des IDs:",t.map(r=>`${r.id} (${typeof r.id})`)))},error:t=>{console.error("Erreur lors du chargement Firebase:",t);let r=+e;this.afroshop=this.afroshopService.getAfroshopById(r)}}))}goBack(){this.router.navigate(["/gallery"])}onImageError(e){console.error("\u274C Erreur chargement image:",e),console.error("\u274C URL qui a \xE9chou\xE9:",e.target?.src)}callPhone(e){window.open(`tel:${e}`,"_self")}openInMaps(){if(this.afroshop){let e=`https://www.google.com/maps/search/?api=1&query=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getDirections(){if(this.afroshop){let e=`https://www.google.com/maps/dir/?api=1&destination=${this.afroshop.coordinates.lat},${this.afroshop.coordinates.lng}`;window.open(e,"_blank")}}getTypeIcon(e){return{restaurant:"\u{1F37D}\uFE0F",epicerie:"\u{1F6D2}",coiffeur:"\u2702\uFE0F",vetement:"\u{1F457}",services:"\u{1F3E6}"}[e]}getPriceLevel(e){return"\u20AC".repeat(e)}canEdit(){let e=this.authService.getCurrentUser();if(console.log("\u{1F50D} Debug canEdit:"),console.log("  - User connect\xE9:",e?.uid),console.log("  - User email:",e?.email),console.log("  - Afroshop:",this.afroshop),console.log("  - CreatedBy:",this.afroshop?.createdBy),!e||!this.afroshop)return console.log("  \u274C Pas de user ou pas d'afroshop"),!1;let t=this.afroshop.createdBy===e.uid;return console.log("  \u2705 Peut \xE9diter:",t),t}editAfroshop(){this.canEdit()&&this.router.navigate(["/edit-afroshop",this.shopId])}static \u0275fac=function(t){return new(t||n)(te(Tn),te(_t),te(Nd),te(Ki),te(fn))};static \u0275cmp=It({type:n,selectors:[["app-image-detail"]],decls:2,vars:2,consts:[["noImage",""],["class","detail-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-button",3,"click"],["class","edit-button","title","Bearbeiten",3,"click",4,"ngIf"],[1,"detail-content"],[1,"image-section"],[4,"ngIf","ngIfElse"],[1,"type-badge-large"],[1,"info-section"],[1,"quick-info"],[1,"rating-info"],["class","cuisine-info",4,"ngIf"],[1,"contact-section"],[1,"contact-item"],[1,"phone-link",3,"href"],[1,"description"],[1,"actions"],[1,"action-btn","call",3,"click"],[1,"action-btn","maps",3,"click"],[1,"action-btn","route",3,"click"],[1,"action-btn","secondary",3,"click"],["title","Bearbeiten",1,"edit-button",3,"click"],[1,"detail-image",3,"error","src","alt"],[1,"no-image-placeholder",2,"background","#f5f5f5","padding","2rem","text-align","center","border-radius","8px"],[2,"font-size","3rem"],[1,"cuisine-info"],[1,"error-container"]],template:function(t,r){t&1&&he(0,Yie,51,19,"div",1)(1,Jie,7,0,"div",2),t&2&&(q("ngIf",r.afroshop),F(),q("ngIf",!r.afroshop))},dependencies:[ln,mn,Za],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:var(--spacing-lg)}.detail-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.back-button[_ngcontent-%COMP%]{background:var(--text-light);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-5px)}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;gap:var(--spacing-xs)}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);align-items:start}.image-section[_ngcontent-%COMP%]{position:sticky;top:var(--spacing-lg)}.detail-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:70vh;object-fit:cover;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md)}.info-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:300}.type-badge-large[_ngcontent-%COMP%]{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:#000c;color:#fff;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-lg);font-weight:500;font-size:1.1rem;text-transform:capitalize}.quick-info[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.rating-info[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-dark);margin-bottom:var(--spacing-xs);font-weight:500}.cuisine-info[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;background:var(--background-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);display:inline-block}.contact-section[_ngcontent-%COMP%]{background:var(--background-light);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-lg);border-left:4px solid var(--primary-color)}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.contact-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);display:block;margin-bottom:var(--spacing-xs)}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin:0}.phone-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color)}.description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;margin-bottom:var(--spacing-sm);font-weight:500}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.8;font-size:1.1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;transition:all .3s ease;font-weight:500}.action-btn.call[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.action-btn.call[_ngcontent-%COMP%]:hover{background:#229954;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.maps[_ngcontent-%COMP%]{background:#3498db;color:#fff}.action-btn.maps[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.route[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.action-btn.route[_ngcontent-%COMP%]:hover{background:#d35400;transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-btn.secondary[_ngcontent-%COMP%]{background:var(--text-light);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-md)}.error-container[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);max-width:600px;margin:0 auto}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c;font-size:2rem;margin-bottom:var(--spacing-md)}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem;margin-bottom:var(--spacing-lg)}@media (max-width: 968px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}}@media (max-width: 1024px){.detail-content[_ngcontent-%COMP%]{gap:var(--spacing-lg)}.image-section[_ngcontent-%COMP%]{position:static}.detail-image[_ngcontent-%COMP%]{max-height:50vh}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.detail-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md)}.image-section[_ngcontent-%COMP%]{order:1}.info-section[_ngcontent-%COMP%]{order:2;padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.quick-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md)}.contact-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.contact-item[_ngcontent-%COMP%]{text-align:left}.actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:var(--spacing-sm)}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;text-align:center}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}}@media (max-width: 480px){.detail-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.info-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.quick-info[_ngcontent-%COMP%]{font-size:.9rem}.contact-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);padding:var(--spacing-sm);background:var(--background-light);border-radius:var(--border-radius)}.contact-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);color:var(--primary-color)}.actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);font-size:1rem}.back-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}}"]})};function Zie(n,e){n&1&&(y(0,"span"),b(1,"\u{1F4E5} Importieren"),v())}function Xie(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 L\xE4dt..."),v())}function eoe(n,e){if(n&1&&(y(0,"div",64),b(1),v()),n&2){let t=J();F(),rt(" \u2705 ",t.successMessage," ")}}function toe(n,e){if(n&1&&(y(0,"div",65),b(1),v()),n&2){let t=J();F(),rt(" \u274C ",t.errorMessage," ")}}function noe(n,e){if(n&1&&(y(0,"option",66),b(1),v()),n&2){let t=e.$implicit;q("value",t.value),F(),yo(" ",t.icon," ",t.label," ")}}function roe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F4C1} Bild ausw\xE4hlen"),v())}function ioe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F504} Anderes Bild w\xE4hlen"),v())}function ooe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Wird bearbeitet..."),v())}function soe(n,e){n&1&&(y(0,"div",67)(1,"div",68),vt(2,"div",69),v(),y(3,"small"),b(4,"Bild wird komprimiert und vorbereitet..."),v()())}function aoe(n,e){if(n&1){let t=nt();y(0,"div",70),vt(1,"img",71),y(2,"button",72),fe("click",function(){se(t);let i=J(),o=kh(41);return i.imagePreview=null,i.selectedFile=null,ae(o.value="")}),b(3," \u2715 "),v()()}if(n&2){let t=J();F(),q("src",t.imagePreview,Ds)}}function coe(n,e){if(n&1){let t=nt();y(0,"div",5)(1,"label",73),b(2,"K\xFCche"),v(),y(3,"input",74),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.afroshop.cuisine,i)||(o.afroshop.cuisine=i),ae(i)}),v(),y(4,"small",26),b(5,"Spezifizieren Sie die Art der afrikanischen K\xFCche"),v()()}if(n&2){let t=J();F(3),Ce("ngModel",t.afroshop.cuisine)}}function loe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",76),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.monday.open,i)||(o.openingHours.monday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",85),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.monday.close,i)||(o.openingHours.monday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.monday.open),F(17),Ce("ngModel",t.openingHours.monday.close)}}function uoe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",94),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.tuesday.open,i)||(o.openingHours.tuesday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",95),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.tuesday.close,i)||(o.openingHours.tuesday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.tuesday.open),F(17),Ce("ngModel",t.openingHours.tuesday.close)}}function doe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",96),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.wednesday.open,i)||(o.openingHours.wednesday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",97),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.wednesday.close,i)||(o.openingHours.wednesday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.wednesday.open),F(17),Ce("ngModel",t.openingHours.wednesday.close)}}function hoe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",98),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.thursday.open,i)||(o.openingHours.thursday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",99),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.thursday.close,i)||(o.openingHours.thursday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.thursday.open),F(17),Ce("ngModel",t.openingHours.thursday.close)}}function foe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",100),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.friday.open,i)||(o.openingHours.friday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",101),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.friday.close,i)||(o.openingHours.friday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.friday.open),F(17),Ce("ngModel",t.openingHours.friday.close)}}function poe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",102),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.saturday.open,i)||(o.openingHours.saturday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",103),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.saturday.close,i)||(o.openingHours.saturday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.saturday.open),F(17),Ce("ngModel",t.openingHours.saturday.close)}}function goe(n,e){if(n&1){let t=nt();y(0,"div",75)(1,"select",104),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.sunday.open,i)||(o.openingHours.sunday.open=i),ae(i)}),y(2,"option",77),b(3,"06:00"),v(),y(4,"option",78),b(5,"07:00"),v(),y(6,"option",79),b(7,"08:00"),v(),y(8,"option",80),b(9,"09:00"),v(),y(10,"option",81),b(11,"10:00"),v(),y(12,"option",82),b(13,"11:00"),v(),y(14,"option",83),b(15,"12:00"),v()(),y(16,"span",84),b(17,"bis"),v(),y(18,"select",105),Se("ngModelChange",function(i){se(t);let o=J();return Re(o.openingHours.sunday.close,i)||(o.openingHours.sunday.close=i),ae(i)}),y(19,"option",86),b(20,"16:00"),v(),y(21,"option",87),b(22,"17:00"),v(),y(23,"option",88),b(24,"18:00"),v(),y(25,"option",89),b(26,"19:00"),v(),y(27,"option",90),b(28,"20:00"),v(),y(29,"option",91),b(30,"21:00"),v(),y(31,"option",92),b(32,"22:00"),v(),y(33,"option",93),b(34,"23:00"),v()()()}if(n&2){let t=J();F(),Ce("ngModel",t.openingHours.sunday.open),F(17),Ce("ngModel",t.openingHours.sunday.close)}}function moe(n,e){n&1&&(y(0,"span"),b(1,"\u274C Abbrechen"),v())}function yoe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Warten..."),v())}function _oe(n,e){if(n&1&&(y(0,"span"),b(1),v()),n&2){let t=J();F(),tn(t.isEditMode?"\u23F3 Wird aktualisiert...":"\u23F3 Wird hinzugef\xFCgt...")}}function voe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F4E4} Bild wird hochgeladen..."),v())}function woe(n,e){if(n&1&&(y(0,"span"),b(1),v()),n&2){let t=J();F(),tn(t.isEditMode?"\u{1F4BE} \xC4nderungen speichern":"\u{1F3EA} Afroshop hinzuf\xFCgen")}}var jp=class n{constructor(e,t,r,i,o){this.firebaseService=e;this.authService=t;this.translationService=r;this.router=i;this.route=o}afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:0,hours:"",website:""};openingHours={monday:{isOpen:!1,open:"09:00",close:"18:00"},tuesday:{isOpen:!1,open:"09:00",close:"18:00"},wednesday:{isOpen:!1,open:"09:00",close:"18:00"},thursday:{isOpen:!1,open:"09:00",close:"18:00"},friday:{isOpen:!1,open:"09:00",close:"18:00"},saturday:{isOpen:!1,open:"10:00",close:"16:00"},sunday:{isOpen:!1,open:"12:00",close:"16:00"}};isEditMode=!1;editingId=null;selectedFile=null;imagePreview=null;isUploadingImage=!1;importUrl="";isImporting=!1;isSubmitting=!1;successMessage="";errorMessage="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.editingId=e,this.loadAfroshopForEdit(e))}loadAfroshopForEdit(e){return T(this,null,function*(){try{let t=yield this.firebaseService.getAfroshopById(e);t?(this.afroshop={name:t.name||"",type:t.type||"restaurant",address:t.address||"",coordinates:t.coordinates||{lat:0,lng:0},phone:t.phone||"",description:t.description||"",rating:t.rating||4,image:t.image||"",cuisine:t.cuisine||"",priceLevel:t.priceLevel||2,hours:t.hours||"",website:t.website||""},this.imagePreview=t.image||null,this.parseOpeningHoursFromString(t.hours||"")):(this.errorMessage="Afroshop nicht gefunden",setTimeout(()=>this.router.navigate(["/"]),2e3))}catch(t){console.error("Fehler beim Laden:",t),this.errorMessage="Fehler beim Laden des Afroshops"}})}onFileSelected(e){return T(this,null,function*(){let t=e.target.files[0];if(this.errorMessage="",t){if(console.log("\u{1F4C1} Datei ausgew\xE4hlt:",t.name,`${(t.size/1024).toFixed(0)}KB`),!t.type.startsWith("image/")){this.errorMessage="Bitte w\xE4hlen Sie eine Bilddatei (JPG, PNG, GIF)";return}if(t.size>5*1024*1024){this.errorMessage="Bild ist zu gro\xDF (max 5MB)";return}try{this.isUploadingImage=!0,console.log("\u{1F5DC}\uFE0F Komprimierung startet...");let r=yield this.compressImage(t);this.selectedFile=r,console.log("\u2705 Komprimierung abgeschlossen");let i=new FileReader;i.onload=o=>{this.imagePreview=o.target.result,console.log("\u{1F441}\uFE0F Vorschau erstellt")},i.readAsDataURL(r)}catch(r){console.error("\u274C Komprimierungsfehler:",r),this.errorMessage="Fehler bei der Bildkomprimierung"}finally{this.isUploadingImage=!1}}})}testFirebaseConnection(){return T(this,null,function*(){console.log("\u{1F525} Test Firebase Storage...");try{console.log("\u{1F50D} Storage service:",this.firebaseService),console.log("\u{1F50D} Storage instance:",this.firebaseService.storage);let e=document.createElement("canvas");e.width=100,e.height=100;let t=e.getContext("2d");t&&(t.fillStyle="#FF6B6B",t.fillRect(0,0,100,100),t.fillStyle="white",t.font="16px Arial",t.fillText("Test",30,55));let r=yield new Promise(s=>{e.toBlob(a=>s(a),"image/jpeg",.8)}),i=new File([r],"test-image.jpg",{type:"image/jpeg"});console.log("\u{1F9EA} Test upload avec image g\xE9n\xE9r\xE9e...",i.size,"bytes");let o=yield this.firebaseService.uploadImage(i);console.log("\u2705 Test r\xE9ussi! URL:",o),this.successMessage="Firebase Storage fonctionne correctement! Image upload\xE9e."}catch(e){console.error("\u274C Test \xE9chou\xE9:",e),e instanceof Error?e.message.includes("CORS")?this.errorMessage="Erreur CORS: V\xE9rifiez les r\xE8gles Firebase Storage et l'authentification.":e.message.includes("permission-denied")?this.errorMessage="Permission refus\xE9e: Connectez-vous et v\xE9rifiez les r\xE8gles Firebase.":e.message.includes("network")?this.errorMessage="Erreur r\xE9seau: V\xE9rifiez votre connexion internet.":this.errorMessage=`Erreur Firebase: ${e.message}`:this.errorMessage="Erreur inconnue lors du test Firebase Storage."}})}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=o=>{let s=new Image;s.src=o.target.result,s.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=1200,h=1200,g=s.width,C=s.height;g>C?g>d&&(C*=d/g,g=d):C>h&&(g*=h/C,C=h),a.width=g,a.height=C,c?.drawImage(s,0,0,g,C),a.toBlob(S=>{if(S){let k=new File([S],e.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`\u2705 Image compress\xE9e: ${(e.size/1024).toFixed(0)}KB \u2192 ${(k.size/1024).toFixed(0)}KB`),t(k)}else r(new Error("Compression \xE9chou\xE9e"))},"image/jpeg",.8)},s.onerror=()=>r(new Error("Erreur de chargement de l'image"))},i.onerror=()=>r(new Error("Erreur de lecture du fichier"))})}uploadImage(){return T(this,null,function*(){if(!this.selectedFile)return console.log("\u{1F4DD} Kein neues Bild, behalte das vorhandene"),this.afroshop.image;this.isUploadingImage=!0,console.log(`\u{1F4E4} Upload l\xE4uft... Gr\xF6\xDFe: ${(this.selectedFile.size/1024).toFixed(0)}KB`),console.log("\u{1F4C1} Datei:",this.selectedFile.name,this.selectedFile.type);try{console.log("\u{1F525} Service Firebase:",this.firebaseService);let e=yield this.firebaseService.uploadImage(this.selectedFile);return console.log("\u2705 Upload erfolgreich! URL:",e),this.afroshop.image=e,e}catch(e){throw console.error("\u274C Detaillierter Upload-Fehler:",e),console.error("\u274C Fehlertyp:",typeof e),console.error("\u274C Nachricht:",e instanceof Error?e.message:"Unbekannter Fehler"),e instanceof Error?this.errorMessage=`Upload-Fehler: ${e.message}`:this.errorMessage="Unbekannter Upload-Fehler",e}finally{this.isUploadingImage=!1}})}onSubmit(){return T(this,null,function*(){if(this.validateForm()){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let e=this.authService.getCurrentUser();if(!e){this.errorMessage="Sie m\xFCssen angemeldet sein";return}this.selectedFile&&(this.afroshop.image=yield this.uploadImage()),(!this.afroshop.priceLevel||this.afroshop.priceLevel===0)&&(this.afroshop.priceLevel=2),this.afroshop.website=this.afroshop.website?.trim()||"",this.afroshop.cuisine=this.afroshop.cuisine?.trim()||"",this.afroshop.hours=this.convertOpeningHoursToString();let t=this.extractCityFromAddress(this.afroshop.address);if(this.isEditMode&&this.editingId){let r=le(j({},this.afroshop),{city:t,updatedBy:e.uid,updatedByName:e.displayName||e.email,updatedAt:new Date});yield this.firebaseService.updateAfroshop(this.editingId,r),this.successMessage="\u2705 Afroshop erfolgreich aktualisiert!"}else{let r=le(j({},this.afroshop),{verified:!1,city:t,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:new Date}),i=yield this.firebaseService.addAfroshop(r);this.successMessage="\u2705 Afroshop erfolgreich hinzugef\xFCgt! ID: "+i}this.resetForm(),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Fehler:",e),this.errorMessage=this.isEditMode?"Fehler beim Aktualisieren des Afroshops":"Fehler beim Hinzuf\xFCgen des Afroshops"}finally{this.isSubmitting=!1}}})}validateForm(){return this.afroshop.name.trim()?this.afroshop.address.trim()?this.afroshop.phone.trim()?this.afroshop.description.trim()?this.afroshop.website&&this.afroshop.website.trim()&&!/^https?:\/\/.+/.test(this.afroshop.website)?(this.errorMessage="Website URL muss mit http:// oder https:// beginnen",!1):(this.setCoordinatesFromAddress(),!0):(this.errorMessage="Beschreibung ist erforderlich",!1):(this.errorMessage="Telefonnummer ist erforderlich",!1):(this.errorMessage="Adresse ist erforderlich",!1):(this.errorMessage="Name ist erforderlich",!1)}setCoordinatesFromAddress(){if(this.afroshop.coordinates.lat===0&&this.afroshop.coordinates.lng===0){let e={berlin:{lat:52.52,lng:13.405},hamburg:{lat:53.5511,lng:9.9937},m\u00FCnchen:{lat:48.1351,lng:11.582},k\u00F6ln:{lat:50.9375,lng:6.9603},frankfurt:{lat:50.1109,lng:8.6821},stuttgart:{lat:48.7758,lng:9.1829},d\u00FCsseldorf:{lat:51.2277,lng:6.7735},dortmund:{lat:51.5136,lng:7.4653},essen:{lat:51.4556,lng:7.0116},leipzig:{lat:51.3397,lng:12.3731},bremen:{lat:53.0793,lng:8.8017},dresden:{lat:51.0504,lng:13.7373},hannover:{lat:52.3759,lng:9.732},n\u00FCrnberg:{lat:49.4521,lng:11.0767}},t=this.afroshop.address.toLowerCase();for(let[r,i]of Object.entries(e))if(t.includes(r)){this.afroshop.coordinates=i,console.log(`Coordonn\xE9es d\xE9finies automatiquement pour ${r}:`,i);break}}}resetForm(){this.afroshop={name:"",type:"restaurant",address:"",coordinates:{lat:0,lng:0},phone:"",description:"",rating:4,image:"",cuisine:"",priceLevel:2,hours:"",website:""}}extractCityFromAddress(e){let t=["berlin","hamburg","m\xFCnchen","k\xF6ln","frankfurt","dortmund"],r=e.toLowerCase();for(let i of t)if(r.includes(i))return i;return"unknown"}importFromUrl(){return T(this,null,function*(){if(!this.importUrl.trim()){this.errorMessage="Bitte geben Sie eine g\xFCltige URL ein";return}this.isImporting=!0,this.errorMessage="",this.successMessage="";try{this.importUrl.includes("google.com/maps")||this.importUrl.includes("goo.gl/maps")?yield this.importFromGoogleMaps():this.importUrl.includes("nextdoor.")?yield this.importFromNextdoor():this.importUrl.includes("facebook.com")||this.importUrl.includes("fb.com")?yield this.importFromFacebook():yield this.importFromGenericWebsite(),this.successMessage="Informationen erfolgreich importiert! \xDCberpr\xFCfen Sie die Felder und erg\xE4nzen Sie bei Bedarf."}catch(e){console.error("Import error:",e),this.errorMessage="Fehler beim Importieren der Daten. Bitte versuchen Sie es manuell."}finally{this.isImporting=!1}})}importFromGoogleMaps(){return T(this,null,function*(){let e=this.extractPlaceNameFromGoogleMapsUrl(this.importUrl);e&&(this.afroshop.name=e,this.afroshop.description="Afrikanisches Gesch\xE4ft/Restaurant gefunden auf Google Maps")})}importFromNextdoor(){return T(this,null,function*(){let t=this.importUrl.split("/").find(r=>r.includes("-"))?.replace(/-/g," ")||"";if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Nextdoor";let r=t.match(/(berlin|hamburg|münchen|köln|frankfurt|dortmund|essen|düsseldorf)/i);r&&(this.afroshop.address=r[1])}})}importFromFacebook(){return T(this,null,function*(){try{let e=this.importUrl.split("/"),t="",r=e.findIndex(i=>i==="p");if(r!==-1&&e[r+1])t=e[r+1].split("-").slice(0,-1).join(" ");else{let i=e.find(o=>o&&o!=="www.facebook.com"&&o!=="facebook.com"&&o!=="p"&&!o.match(/^\d+$/)&&o.length>2);i&&(t=i.replace(/-/g," "))}if(t){this.afroshop.name=this.capitalizeWords(t),this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.website=this.importUrl,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log("Facebook import successful:",t)}else throw new Error("Impossible d'extraire le nom depuis l'URL Facebook")}catch(e){console.error("Erreur lors de l'import Facebook:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Afrikanisches Gesch\xE4ft gefunden auf Facebook",this.afroshop.name="Facebook Business"}})}importFromGenericWebsite(){return T(this,null,function*(){try{let t=new URL(this.importUrl).hostname.replace("www.",""),r=t.split(".")[0];r=this.capitalizeWords(r.replace(/[-_]/g," ")),this.afroshop.name=r,this.afroshop.website=this.importUrl,this.afroshop.description=`Afrikanisches Gesch\xE4ft gefunden auf ${t}`,this.afroshop.type="services";let i=t.toLowerCase();i.includes("restaurant")||i.includes("food")||i.includes("cuisine")?this.afroshop.type="restaurant":i.includes("shop")||i.includes("store")||i.includes("market")?this.afroshop.type="epicerie":i.includes("hair")||i.includes("coiffeur")||i.includes("salon")?this.afroshop.type="coiffeur":(i.includes("mode")||i.includes("fashion")||i.includes("clothing"))&&(this.afroshop.type="vetement"),console.log(`Site web g\xE9n\xE9rique import\xE9: ${r} (${t})`)}catch(e){console.error("Erreur lors de l'import du site web:",e),this.afroshop.website=this.importUrl,this.afroshop.description="Site web afrikanisches Gesch\xE4ft",this.afroshop.name="Nouveau Afroshop"}})}extractPlaceNameFromGoogleMapsUrl(e){let t=e.match(/place\/([^\/]+)/);return t?decodeURIComponent(t[1]).replace(/\+/g," "):""}capitalizeWords(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}convertOpeningHoursToString(){let e=[{key:"monday",name:"Mo"},{key:"tuesday",name:"Di"},{key:"wednesday",name:"Mi"},{key:"thursday",name:"Do"},{key:"friday",name:"Fr"},{key:"saturday",name:"Sa"},{key:"sunday",name:"So"}],t=[];return e.forEach(r=>{let i=this.openingHours[r.key];i.isOpen&&t.push(`${r.name}: ${i.open}-${i.close}`)}),t.length>0?t.join(", "):"\xD6ffnungszeiten nicht angegeben"}parseOpeningHoursFromString(e){if(!e||e==="\xD6ffnungszeiten nicht angegeben")return;this.openingHours.monday.isOpen=!1,this.openingHours.tuesday.isOpen=!1,this.openingHours.wednesday.isOpen=!1,this.openingHours.thursday.isOpen=!1,this.openingHours.friday.isOpen=!1,this.openingHours.saturday.isOpen=!1,this.openingHours.sunday.isOpen=!1,e.split(",").forEach(r=>{let o=r.trim().match(/^(\w+):\s*(\d{2}:\d{2})-(\d{2}:\d{2})$/);if(o){let[,s,a,c]=o;switch(s.toLowerCase()){case"mo":this.openingHours.monday={isOpen:!0,open:a,close:c};break;case"di":this.openingHours.tuesday={isOpen:!0,open:a,close:c};break;case"mi":this.openingHours.wednesday={isOpen:!0,open:a,close:c};break;case"do":this.openingHours.thursday={isOpen:!0,open:a,close:c};break;case"fr":this.openingHours.friday={isOpen:!0,open:a,close:c};break;case"sa":this.openingHours.saturday={isOpen:!0,open:a,close:c};break;case"so":this.openingHours.sunday={isOpen:!0,open:a,close:c};break}}})}goBack(){this.router.navigate(["/"])}getAllBusinessTypes(){return this.translationService.getAllBusinessTypes()}getBusinessTypeName(e){return this.translationService.getBusinessTypeName(e)}static \u0275fac=function(t){return new(t||n)(te(Ki),te(fn),te(pa),te(_t),te(Tn))};static \u0275cmp=It({type:n,selectors:[["app-add-afroshop"]],decls:155,vars:44,consts:[["fileInput",""],[1,"add-afroshop-container"],[1,"form-header"],[1,"afroshop-form",3,"ngSubmit"],[1,"auto-import-section"],[1,"form-group"],["for","importUrl"],[1,"url-input-group"],["type","url","id","importUrl","name","importUrl","placeholder","https://www.facebook.com/business... oder https://www.google.com/maps/place/...",1,"form-input","url-input",3,"ngModelChange","ngModel"],["type","button",1,"import-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["for","name"],["type","text","id","name","name","name","placeholder","z.B. Mama Afrika Restaurant","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","image"],[1,"image-upload-section"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-btn",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-hint"],["for","address"],["type","text","id","address","name","address","placeholder","z.B. M\xFCllerstra\xDFe 123, 13349 Berlin","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","+49 30 12345678","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Beschreiben Sie das Gesch\xE4ft, Spezialit\xE4ten, Atmosph\xE4re...","required","","rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"opening-hours-container"],[1,"day-hours"],[1,"day-label"],[1,"hours-controls"],["type","checkbox","id","mon-open","name","mon-open",3,"ngModelChange","ngModel"],["for","mon-open",1,"checkbox-label"],["class","time-selectors",4,"ngIf"],["type","checkbox","id","tue-open","name","tue-open",3,"ngModelChange","ngModel"],["for","tue-open",1,"checkbox-label"],["type","checkbox","id","wed-open","name","wed-open",3,"ngModelChange","ngModel"],["for","wed-open",1,"checkbox-label"],["type","checkbox","id","thu-open","name","thu-open",3,"ngModelChange","ngModel"],["for","thu-open",1,"checkbox-label"],["type","checkbox","id","fri-open","name","fri-open",3,"ngModelChange","ngModel"],["for","fri-open",1,"checkbox-label"],["type","checkbox","id","sat-open","name","sat-open",3,"ngModelChange","ngModel"],["for","sat-open",1,"checkbox-label"],["type","checkbox","id","sun-open","name","sun-open",3,"ngModelChange","ngModel"],["for","sun-open",1,"checkbox-label"],["for","website"],["type","url","id","website","name","website","placeholder","https://www.beispiel.com",1,"form-input",3,"ngModelChange","ngModel"],["for","priceLevel"],["id","priceLevel","name","priceLevel",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"message","success"],[1,"message","error"],[3,"value"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"image-preview-container"],["alt","Preview",1,"image-preview",3,"src"],["type","button","title","Bild entfernen",1,"remove-image-btn",3,"click"],["for","cuisine"],["type","text","id","cuisine","name","cuisine","placeholder","z.B. Westafrikanische, \xC4thiopische, Nigerianische, Senegalesische",1,"form-input",3,"ngModelChange","ngModel"],[1,"time-selectors"],["name","mon-open-time",1,"time-select",3,"ngModelChange","ngModel"],["value","06:00"],["value","07:00"],["value","08:00"],["value","09:00"],["value","10:00"],["value","11:00"],["value","12:00"],[1,"time-separator"],["name","mon-close-time",1,"time-select",3,"ngModelChange","ngModel"],["value","16:00"],["value","17:00"],["value","18:00"],["value","19:00"],["value","20:00"],["value","21:00"],["value","22:00"],["value","23:00"],["name","tue-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","tue-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","wed-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","thu-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","fri-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sat-close-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-open-time",1,"time-select",3,"ngModelChange","ngModel"],["name","sun-close-time",1,"time-select",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=nt();y(0,"div",1)(1,"div",2)(2,"h2"),b(3),v(),y(4,"p"),b(5),v()(),y(6,"form",3),fe("ngSubmit",function(){return se(i),ae(r.onSubmit())}),y(7,"div",4)(8,"h3"),b(9,"\u{1F517} Schnell hinzuf\xFCgen"),v(),y(10,"p"),b(11,"F\xFCgen Sie einen Link ein, um Informationen automatisch zu laden"),v(),y(12,"div",5)(13,"label",6),b(14,"Google Maps, Facebook, Nextdoor oder Website URL"),v(),y(15,"div",7)(16,"input",8),Se("ngModelChange",function(s){return se(i),Re(r.importUrl,s)||(r.importUrl=s),ae(s)}),v(),y(17,"button",9),fe("click",function(){return se(i),ae(r.importFromUrl())}),he(18,Zie,2,0,"span",10)(19,Xie,2,0,"span",10),v()()(),y(20,"div",11)(21,"span"),b(22,"oder manuell eingeben"),v()()(),he(23,eoe,2,1,"div",12)(24,toe,2,1,"div",13),y(25,"div",5)(26,"label",14),b(27,"Name des Gesch\xE4fts *"),v(),y(28,"input",15),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.name,s)||(r.afroshop.name=s),ae(s)}),v()(),y(29,"div",5)(30,"label",16),b(31,"Typ *"),v(),y(32,"select",17),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.type,s)||(r.afroshop.type=s),ae(s)}),y(33,"option",18),b(34,"Typ ausw\xE4hlen"),v(),he(35,noe,2,3,"option",19),v()(),y(36,"div",5)(37,"label",20),b(38,"\u{1F4F8} Bild hochladen"),v(),y(39,"div",21)(40,"input",22,0),fe("change",function(s){return se(i),ae(r.onFileSelected(s))}),v(),y(42,"button",23),fe("click",function(){se(i);let s=kh(41);return ae(s.click())}),he(43,roe,2,0,"span",10)(44,ioe,2,0,"span",10)(45,ooe,2,0,"span",10),v(),he(46,soe,5,0,"div",24)(47,aoe,4,1,"div",25),y(48,"small",26),b(49,"Max. 5MB - Wird automatisch komprimiert und optimiert"),v()()(),y(50,"div",5)(51,"label",27),b(52,"Adresse *"),v(),y(53,"input",28),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.address,s)||(r.afroshop.address=s),ae(s)}),v(),y(54,"small"),b(55,"Bitte geben Sie die vollst\xE4ndige Adresse mit Stadt an"),v()(),y(56,"div",5)(57,"label",29),b(58,"Telefon *"),v(),y(59,"input",30),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.phone,s)||(r.afroshop.phone=s),ae(s)}),v()(),y(60,"div",5)(61,"label",31),b(62,"Beschreibung *"),v(),y(63,"textarea",32),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.description,s)||(r.afroshop.description=s),ae(s)}),v()(),he(64,coe,6,1,"div",33),y(65,"div",5)(66,"label"),b(67,"\xD6ffnungszeiten"),v(),y(68,"div",34)(69,"div",35)(70,"div",36),b(71,"Montag:"),v(),y(72,"div",37)(73,"input",38),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.monday.isOpen,s)||(r.openingHours.monday.isOpen=s),ae(s)}),v(),y(74,"label",39),b(75,"Ge\xF6ffnet"),v(),he(76,loe,35,2,"div",40),v()(),y(77,"div",35)(78,"div",36),b(79,"Dienstag:"),v(),y(80,"div",37)(81,"input",41),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.tuesday.isOpen,s)||(r.openingHours.tuesday.isOpen=s),ae(s)}),v(),y(82,"label",42),b(83,"Ge\xF6ffnet"),v(),he(84,uoe,35,2,"div",40),v()(),y(85,"div",35)(86,"div",36),b(87,"Mittwoch:"),v(),y(88,"div",37)(89,"input",43),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.wednesday.isOpen,s)||(r.openingHours.wednesday.isOpen=s),ae(s)}),v(),y(90,"label",44),b(91,"Ge\xF6ffnet"),v(),he(92,doe,35,2,"div",40),v()(),y(93,"div",35)(94,"div",36),b(95,"Donnerstag:"),v(),y(96,"div",37)(97,"input",45),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.thursday.isOpen,s)||(r.openingHours.thursday.isOpen=s),ae(s)}),v(),y(98,"label",46),b(99,"Ge\xF6ffnet"),v(),he(100,hoe,35,2,"div",40),v()(),y(101,"div",35)(102,"div",36),b(103,"Freitag:"),v(),y(104,"div",37)(105,"input",47),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.friday.isOpen,s)||(r.openingHours.friday.isOpen=s),ae(s)}),v(),y(106,"label",48),b(107,"Ge\xF6ffnet"),v(),he(108,foe,35,2,"div",40),v()(),y(109,"div",35)(110,"div",36),b(111,"Samstag:"),v(),y(112,"div",37)(113,"input",49),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.saturday.isOpen,s)||(r.openingHours.saturday.isOpen=s),ae(s)}),v(),y(114,"label",50),b(115,"Ge\xF6ffnet"),v(),he(116,poe,35,2,"div",40),v()(),y(117,"div",35)(118,"div",36),b(119,"Sonntag:"),v(),y(120,"div",37)(121,"input",51),Se("ngModelChange",function(s){return se(i),Re(r.openingHours.sunday.isOpen,s)||(r.openingHours.sunday.isOpen=s),ae(s)}),v(),y(122,"label",52),b(123,"Ge\xF6ffnet"),v(),he(124,goe,35,2,"div",40),v()(),y(125,"small",26),b(126,"W\xE4hlen Sie f\xFCr jeden Tag, ob das Gesch\xE4ft ge\xF6ffnet ist und die \xD6ffnungszeiten"),v()()(),y(127,"div",5)(128,"label",53),b(129,"Website"),v(),y(130,"input",54),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.website,s)||(r.afroshop.website=s),ae(s)}),v(),y(131,"small",26),b(132,"Optional: Offizielle Website oder Social Media Profil"),v()(),y(133,"div",5)(134,"label",55),b(135,"Preisstufe"),v(),y(136,"select",56),Se("ngModelChange",function(s){return se(i),Re(r.afroshop.priceLevel,s)||(r.afroshop.priceLevel=s),ae(s)}),y(137,"option",18),b(138,"-- Bitte w\xE4hlen --"),v(),y(139,"option",57),b(140,"\u20AC - G\xFCnstig (unter 10\u20AC)"),v(),y(141,"option",58),b(142,"\u20AC\u20AC - Moderat (10-20\u20AC)"),v(),y(143,"option",59),b(144,"\u20AC\u20AC\u20AC - Gehoben (20-40\u20AC)"),v(),y(145,"option",60),b(146,"\u20AC\u20AC\u20AC\u20AC - Hochpreisig (\xFCber 40\u20AC)"),v()()(),y(147,"div",61)(148,"button",62),fe("click",function(){return se(i),ae(r.goBack())}),he(149,moe,2,0,"span",10)(150,yoe,2,0,"span",10),v(),y(151,"button",63),he(152,_oe,2,1,"span",10)(153,voe,2,0,"span",10)(154,woe,2,1,"span",10),v()()()()}t&2&&(F(3),tn(r.isEditMode?"\u270F\uFE0F Afroshop bearbeiten":"\u{1F3EA} Neuen Afroshop hinzuf\xFCgen"),F(2),tn(r.isEditMode?"Aktualisieren Sie die Informationen":"Teilen Sie Ihren Lieblings-Afroshop mit der Community!"),F(11),Ce("ngModel",r.importUrl),F(),q("disabled",!r.importUrl||r.isImporting),F(),q("ngIf",!r.isImporting),F(),q("ngIf",r.isImporting),F(4),q("ngIf",r.successMessage),F(),q("ngIf",r.errorMessage),F(4),Ce("ngModel",r.afroshop.name),F(4),Ce("ngModel",r.afroshop.type),F(3),q("ngForOf",r.getAllBusinessTypes()),F(7),q("disabled",r.isUploadingImage),F(),q("ngIf",!r.imagePreview&&!r.isUploadingImage),F(),q("ngIf",r.imagePreview&&!r.isUploadingImage),F(),q("ngIf",r.isUploadingImage),F(),q("ngIf",r.isUploadingImage),F(),q("ngIf",r.imagePreview),F(6),Ce("ngModel",r.afroshop.address),F(6),Ce("ngModel",r.afroshop.phone),F(4),Ce("ngModel",r.afroshop.description),F(),q("ngIf",r.afroshop.type==="restaurant"),F(9),Ce("ngModel",r.openingHours.monday.isOpen),F(3),q("ngIf",r.openingHours.monday.isOpen),F(5),Ce("ngModel",r.openingHours.tuesday.isOpen),F(3),q("ngIf",r.openingHours.tuesday.isOpen),F(5),Ce("ngModel",r.openingHours.wednesday.isOpen),F(3),q("ngIf",r.openingHours.wednesday.isOpen),F(5),Ce("ngModel",r.openingHours.thursday.isOpen),F(3),q("ngIf",r.openingHours.thursday.isOpen),F(5),Ce("ngModel",r.openingHours.friday.isOpen),F(3),q("ngIf",r.openingHours.friday.isOpen),F(5),Ce("ngModel",r.openingHours.saturday.isOpen),F(3),q("ngIf",r.openingHours.saturday.isOpen),F(5),Ce("ngModel",r.openingHours.sunday.isOpen),F(3),q("ngIf",r.openingHours.sunday.isOpen),F(6),Ce("ngModel",r.afroshop.website),F(6),Ce("ngModel",r.afroshop.priceLevel),F(12),q("disabled",r.isSubmitting||r.isUploadingImage),F(),q("ngIf",!r.isSubmitting&&!r.isUploadingImage),F(),q("ngIf",r.isSubmitting||r.isUploadingImage),F(),q("disabled",r.isSubmitting||r.isUploadingImage),F(),q("ngIf",r.isSubmitting&&!r.isUploadingImage),F(),q("ngIf",r.isUploadingImage),F(),q("ngIf",!r.isSubmitting&&!r.isUploadingImage))},dependencies:[ln,ks,mn,fa,kd,tw,nw,Wi,xx,Od,ha,Pd,qc,Go,$c],styles:['.auto-import-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);color:#fff;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #ff57224d}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:600}.auto-import-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;opacity:.9;font-size:.95em}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.url-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:2px solid rgba(255,255,255,.5);background:#ffffffe6;color:#333;border-radius:8px;font-size:14px}.url-input[_ngcontent-%COMP%]::placeholder{color:#666}.url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;background:#fff;color:#333}.import-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;white-space:nowrap;backdrop-filter:blur(10px)}.import-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;border-color:#ffffff80;transform:translateY(-2px)}.import-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#ffffff4d}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722);padding:0 15px;font-size:.9em;opacity:.8}@media (max-width: 600px){.url-input-group[_ngcontent-%COMP%]{flex-direction:column}.url-input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.import-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}.add-afroshop-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem;margin-bottom:var(--spacing-sm)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1.1rem}.afroshop-form[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-xl);border-radius:var(--border-radius);box-shadow:var(--shadow-soft)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-primary)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:2px solid var(--gray-300);border-radius:var(--border-radius);font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;padding:20px 0}.btn[_ngcontent-%COMP%]{padding:16px 32px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;display:inline-flex;align-items:center;justify-content:center;text-align:center;min-width:160px;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;transform:translateY(0)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7b00,#ff5722,#e64a19);color:#fff;box-shadow:0 6px 20px #ff7b0066;border:2px solid transparent}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8f00,#ff6f00,#f57c00);transform:translateY(-3px);box-shadow:0 12px 30px #ff7b0080}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #ff7b0099}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#bdbdbd,#9e9e9e);color:#fff;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a;opacity:.7;animation:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled){animation:_ngcontent-%COMP%_gentle-pulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gentle-pulse{0%,to{box-shadow:0 6px 20px #ff7b0066}50%{box-shadow:0 6px 25px #ff7b0099}}.btn-primary[_ngcontent-%COMP%]:hover{animation:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;box-shadow:0 4px 15px #0000001a;border:2px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#adb5bd}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 10px #0003}.alert[_ngcontent-%COMP%]{padding:var(--spacing-sm);border-radius:var(--border-radius);margin-bottom:var(--spacing-md)}.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.file-input[_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,var(--accent-color),var(--accent-light));color:#fff;border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:600;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);display:inline-flex;align-items:center;justify-content:center;gap:8px;width:fit-content}.upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.upload-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none}.upload-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ecf0f1;border-radius:2px;overflow:hidden;margin-bottom:var(--spacing-xs)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:2px;animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_progress{0%{width:0%}50%{width:100%}to{width:0%}}.upload-progress[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.image-preview[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%;background:#e74c3ce6;color:#fff;border:none;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:0 2px 8px #0000004d}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.form-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.85rem;display:block;margin-top:5px}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-md);max-width:100%}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.url-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm)}.url-input[_ngcontent-%COMP%]{width:100%}.import-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:20px 0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;font-size:16px;padding:18px 24px;min-width:auto}}@media (max-width: 480px){.add-afroshop-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-md)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.auto-import-section[_ngcontent-%COMP%]{padding:var(--spacing-md);margin-bottom:var(--spacing-lg)}.auto-import-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}.upload-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.image-preview-container[_ngcontent-%COMP%]{max-width:100%}.image-preview[_ngcontent-%COMP%]{max-height:200px}}.opening-hours-container[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;margin-top:10px}.day-hours[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.day-hours[_ngcontent-%COMP%]:last-child{margin-bottom:0}.day-label[_ngcontent-%COMP%]{width:100px;font-weight:600;color:#495057;flex-shrink:0}.hours-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex:1}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;cursor:pointer;margin:0;padding:0}.time-selectors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:10px}.time-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;background:#fff;color:#495057;font-size:14px;cursor:pointer;transition:all .2s}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff7b00;box-shadow:0 0 0 3px #ff7b001a}.time-separator[_ngcontent-%COMP%]{color:#6c757d;font-weight:500;margin:0 5px}@media (max-width: 768px){.day-hours[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.day-label[_ngcontent-%COMP%]{width:auto;margin-bottom:5px}.hours-controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.time-selectors[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}}@media (max-width: 480px){.opening-hours-container[_ngcontent-%COMP%]{padding:15px}.time-selectors[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.time-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 360px){.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.auto-import-section[_ngcontent-%COMP%], .afroshop-form[_ngcontent-%COMP%]{padding:var(--spacing-sm)}}']})};function Eoe(n,e){if(n&1&&(y(0,"div",16),b(1),v()),n&2){let t=J();F(),rt(" ",t.errorMessage," ")}}function Ioe(n,e){n&1&&(y(0,"span"),b(1,"Anmelden"),v())}function boe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Anmeldung..."),v())}function Toe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F50D} Mit Google fortfahren"),v())}function Coe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Google-Anmeldung..."),v())}var uw=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}email="";password="";isLoading=!1;errorMessage="";onSubmit(){return T(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password);let e=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([e])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return T(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{console.log("\u{1F510} Tentative de connexion Google...");let e=yield this.authService.loginWithGoogle();console.log("\u2705 Connexion Google r\xE9ussie:",e);let t=this.route.snapshot.queryParams.returnUrl||"/gallery";this.router.navigate([t])}catch(e){console.error("\u274C Erreur connexion Google:",e);let t=e.message;e instanceof Error&&(console.log("Type d'erreur:",e.name),console.log("Code d'erreur:",e.code),console.log("Message complet:",e.message)),t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")||t.includes("popup-closed-by-user")||t.includes("cancelled")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")||t.includes("popup-blocked")?this.showPopupBlockedDialog():this.errorMessage=`Erreur de connexion: ${t}`}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(fn),te(_t),te(Tn))};static \u0275cmp=It({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"\u{1F510} Anmeldung"),v(),y(5,"p"),b(6,"Melden Sie sich bei Ihrem AfroConnect-Konto an"),v()(),y(7,"form",3),fe("ngSubmit",function(){return r.onSubmit()}),y(8,"div",4)(9,"label",5),b(10,"E-Mail-Adresse"),v(),y(11,"input",6),Se("ngModelChange",function(o){return Re(r.email,o)||(r.email=o),o}),v()(),y(12,"div",4)(13,"label",7),b(14,"Passwort"),v(),y(15,"input",8),Se("ngModelChange",function(o){return Re(r.password,o)||(r.password=o),o}),v()(),he(16,Eoe,2,1,"div",9),y(17,"button",10),he(18,Ioe,2,0,"span",11)(19,boe,2,0,"span",11),v()(),y(20,"div",12)(21,"span"),b(22,"oder"),v()(),y(23,"button",13),fe("click",function(){return r.loginWithGoogle()}),he(24,Toe,2,0,"span",11)(25,Coe,2,0,"span",11),v(),y(26,"div",14)(27,"p"),b(28,"Noch kein Konto? "),y(29,"a",15),b(30,"Registrieren"),v()()()()()),t&2&&(F(11),Ce("ngModel",r.email),q("disabled",r.isLoading),F(4),Ce("ngModel",r.password),q("disabled",r.isLoading),F(),q("ngIf",r.errorMessage),F(),q("disabled",r.isLoading||!r.email||!r.password),F(),q("ngIf",!r.isLoading),F(),q("ngIf",r.isLoading),F(4),q("disabled",r.isLoading),F(),q("ngIf",!r.isLoading),F(),q("ngIf",r.isLoading))},dependencies:[ln,mn,fa,kd,Wi,ha,Pd,qc,Go,$c,sc,Us],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};function Soe(n,e){if(n&1&&(y(0,"div",20),b(1),v()),n&2){let t=J();F(),rt(" ",t.errorMessage," ")}}function Doe(n,e){n&1&&(y(0,"span"),b(1,"Registrieren"),v())}function Aoe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Registrierung..."),v())}function Moe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F50D} Mit Google fortfahren"),v())}function xoe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Google-Anmeldung..."),v())}var dw=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";displayName="";isLoading=!1;errorMessage="";onSubmit(){return T(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword||!this.displayName){this.errorMessage="Bitte f\xFCllen Sie alle Felder aus";return}if(this.password!==this.confirmPassword){this.errorMessage="Die Passw\xF6rter stimmen nicht \xFCberein";return}if(this.password.length<6){this.errorMessage="Das Passwort muss mindestens 6 Zeichen enthalten";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.register(this.email,this.password,this.displayName),this.router.navigate(["/gallery"])}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}loginWithGoogle(){return T(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/gallery"])}catch(e){let t=e.message;t.includes("annul\xE9e")||t.includes("Connexion annul\xE9e")?this.showGoogleLoginDialog():t.includes("bloqu\xE9e")||t.includes("popup")?this.showPopupBlockedDialog():this.errorMessage=t}finally{this.isLoading=!1}})}showGoogleLoginDialog(){confirm(`\u{1F510} Connexion Google interrompue

\u2022 La popup de connexion a \xE9t\xE9 ferm\xE9e avant la fin
\u2022 Souhaitez-vous r\xE9essayer?

Conseils:
\u2713 Gardez la popup ouverte pendant la connexion
\u2713 V\xE9rifiez que les popups ne sont pas bloqu\xE9es
\u2713 Utilisez votre compte Google habituel

R\xE9essayer maintenant?`)&&setTimeout(()=>{this.loginWithGoogle()},500)}showPopupBlockedDialog(){confirm(`\u{1F6AB} Popups bloqu\xE9es par le navigateur

\u2022 Votre navigateur bloque les popups d'AfroConnect
\u2022 Pour vous connecter avec Google, vous devez:

Instructions:
1. Cliquez sur l'ic\xF4ne \u{1F6E1}\uFE0F dans la barre d'adresse
2. Autorisez les popups pour ce site
3. Rechargez la page si n\xE9cessaire

R\xE9essayer maintenant?`)?setTimeout(()=>{this.loginWithGoogle()},1e3):this.errorMessage="Utilisez la connexion par email/mot de passe en attendant"}static \u0275fac=function(t){return new(t||n)(te(fn),te(_t))};static \u0275cmp=It({type:n,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Ihr Name","required","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","placeholder","ihre@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"google-btn",3,"click","disabled"],[1,"auth-footer"],["routerLink","/login",1,"auth-link"],[1,"error-message"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"\u{1F4DD} Registrierung"),v(),y(5,"p"),b(6,"Erstellen Sie Ihr AfroConnect-Konto"),v()(),y(7,"form",3),fe("ngSubmit",function(){return r.onSubmit()}),y(8,"div",4)(9,"label",5),b(10,"Anzeigename"),v(),y(11,"input",6),Se("ngModelChange",function(o){return Re(r.displayName,o)||(r.displayName=o),o}),v()(),y(12,"div",4)(13,"label",7),b(14,"E-Mail-Adresse"),v(),y(15,"input",8),Se("ngModelChange",function(o){return Re(r.email,o)||(r.email=o),o}),v()(),y(16,"div",4)(17,"label",9),b(18,"Passwort"),v(),y(19,"input",10),Se("ngModelChange",function(o){return Re(r.password,o)||(r.password=o),o}),v()(),y(20,"div",4)(21,"label",11),b(22,"Passwort best\xE4tigen"),v(),y(23,"input",12),Se("ngModelChange",function(o){return Re(r.confirmPassword,o)||(r.confirmPassword=o),o}),v()(),he(24,Soe,2,1,"div",13),y(25,"button",14),he(26,Doe,2,0,"span",15)(27,Aoe,2,0,"span",15),v()(),y(28,"div",16)(29,"span"),b(30,"oder"),v()(),y(31,"button",17),fe("click",function(){return r.loginWithGoogle()}),he(32,Moe,2,0,"span",15)(33,xoe,2,0,"span",15),v(),y(34,"div",18)(35,"p"),b(36,"Bereits ein Konto? "),y(37,"a",19),b(38,"Anmelden"),v()()()()()),t&2&&(F(11),Ce("ngModel",r.displayName),q("disabled",r.isLoading),F(4),Ce("ngModel",r.email),q("disabled",r.isLoading),F(4),Ce("ngModel",r.password),q("disabled",r.isLoading),F(4),Ce("ngModel",r.confirmPassword),q("disabled",r.isLoading),F(),q("ngIf",r.errorMessage),F(),q("disabled",r.isLoading||!r.email||!r.password||!r.confirmPassword||!r.displayName),F(),q("ngIf",!r.isLoading),F(),q("ngIf",r.isLoading),F(4),q("disabled",r.isLoading),F(),q("ngIf",!r.isLoading),F(),q("ngIf",r.isLoading))},dependencies:[ln,mn,fa,kd,Wi,ha,Pd,qc,Go,$c,sc,Us],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background:var(--background-white);padding:var(--spacing-xl);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:400px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);margin-bottom:var(--spacing-sm);font-size:1.8rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-md);border:2px solid #e0e0e0;border-radius:var(--border-radius);font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:var(--spacing-sm);border-radius:var(--border-radius);border:1px solid #f5c6cb;font-size:.9rem;text-align:center}.auth-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:var(--spacing-sm)}.auth-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-md)}.auth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;transition:color .3s ease}.auth-link[_ngcontent-%COMP%]:hover{color:var(--secondary-color);text-decoration:underline}.divider[_ngcontent-%COMP%]{text-align:center;margin:var(--spacing-lg) 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--background-white);color:var(--text-light);padding:0 var(--spacing-md);font-size:.9rem}.google-btn[_ngcontent-%COMP%]{width:100%;background:#4285f4;color:#fff;border:none;padding:var(--spacing-md);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.google-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3367d6;transform:translateY(-2px);box-shadow:var(--shadow-md)}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}']})};var hw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=It({type:n,selectors:[["app-privacy"]],decls:108,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),b(3,"Datenschutzerkl\xE4rung"),v(),y(4,"p",2),b(5),v(),y(6,"section")(7,"h2"),b(8,"1. Verantwortlicher"),v(),y(9,"p"),b(10," AfroConnect"),vt(11,"br"),b(12," [Ihre Adresse]"),vt(13,"br"),b(14," [Ihre Stadt, PLZ]"),vt(15,"br"),b(16," Deutschland"),vt(17,"br"),b(18," E-Mail: contact@afroconnect.de "),v()(),y(19,"section")(20,"h2"),b(21,"2. Erhobene Daten"),v(),y(22,"h3"),b(23,"2.1 Nutzungsdaten"),v(),y(24,"ul")(25,"li"),b(26,"IP-Adresse"),v(),y(27,"li"),b(28,"Browser-Informationen"),v(),y(29,"li"),b(30,"Zugriffszeitpunkt"),v(),y(31,"li"),b(32,"Besuchte Seiten"),v()(),y(33,"h3"),b(34,"2.2 Standortdaten"),v(),y(35,"p"),b(36," Mit Ihrer Einwilligung nutzen wir Ihren Standort, um Ihnen Afroshops in Ihrer N\xE4he anzuzeigen. Die Standortdaten werden nicht gespeichert. "),v(),y(37,"h3"),b(38,"2.3 Registrierungsdaten"),v(),y(39,"ul")(40,"li"),b(41,"E-Mail-Adresse"),v(),y(42,"li"),b(43,"Benutzername"),v(),y(44,"li"),b(45,"Passwort (verschl\xFCsselt)"),v()()(),y(46,"section")(47,"h2"),b(48,"3. Zweck der Datenverarbeitung"),v(),y(49,"ul")(50,"li"),b(51,"Bereitstellung der App-Funktionen"),v(),y(52,"li"),b(53,"Benutzerauthentifizierung"),v(),y(54,"li"),b(55,"Anzeige lokaler Afroshops"),v(),y(56,"li"),b(57,"Verbesserung der Nutzererfahrung"),v()()(),y(58,"section")(59,"h2"),b(60,"4. Rechtsgrundlage"),v(),y(61,"p"),b(62," Die Verarbeitung erfolgt auf Grundlage von: "),v(),y(63,"ul")(64,"li"),b(65,"Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)"),v(),y(66,"li"),b(67,"Art. 6 Abs. 1 lit. b DSGVO (Vertragserf\xFCllung)"),v(),y(68,"li"),b(69,"Art. 6 Abs. 1 lit. f DSGVO (berechtigte Interessen)"),v()()(),y(70,"section")(71,"h2"),b(72,"5. Datenweitergabe"),v(),y(73,"p"),b(74," Ihre Daten werden nicht an Dritte weitergegeben, au\xDFer: "),v(),y(75,"ul")(76,"li"),b(77,"Google Firebase (Hosting und Datenbank)"),v(),y(78,"li"),b(79,"Bei gesetzlicher Verpflichtung"),v()()(),y(80,"section")(81,"h2"),b(82,"6. Speicherdauer"),v(),y(83,"p"),b(84," Daten werden gespeichert, solange Ihr Konto aktiv ist oder zur Erf\xFCllung rechtlicher Verpflichtungen erforderlich. "),v()(),y(85,"section")(86,"h2"),b(87,"7. Ihre Rechte"),v(),y(88,"ul")(89,"li"),b(90,"Auskunft \xFCber gespeicherte Daten"),v(),y(91,"li"),b(92,"Berichtigung falscher Daten"),v(),y(93,"li"),b(94,"L\xF6schung Ihrer Daten"),v(),y(95,"li"),b(96,"Einschr\xE4nkung der Verarbeitung"),v(),y(97,"li"),b(98,"Daten\xFCbertragbarkeit"),v(),y(99,"li"),b(100,"Widerspruch gegen Verarbeitung"),v()()(),y(101,"section")(102,"h2"),b(103,"8. Kontakt"),v(),y(104,"p"),b(105," Bei Fragen zum Datenschutz kontaktieren Sie uns unter:"),vt(106,"br"),b(107," E-Mail: privacy@afroconnect.de "),v()()()()),t&2&&(F(5),rt("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var fw=class n{currentDate=new Date().toLocaleDateString("de-DE");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=It({type:n,selectors:[["app-terms"]],decls:94,vars:1,consts:[[1,"legal-container"],[1,"legal-content"],[1,"last-updated"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),b(3,"Allgemeine Gesch\xE4ftsbedingungen (AGB)"),v(),y(4,"p",2),b(5),v(),y(6,"section")(7,"h2"),b(8,"\xA7 1 Geltungsbereich"),v(),y(9,"p"),b(10," Diese Allgemeinen Gesch\xE4ftsbedingungen gelten f\xFCr die Nutzung der AfroConnect-App und aller damit verbundenen Dienste. "),v()(),y(11,"section")(12,"h2"),b(13,"\xA7 2 Beschreibung der Dienstleistung"),v(),y(14,"p"),b(15," AfroConnect ist eine Plattform zur Entdeckung afrikanischer Gesch\xE4fte, Restaurants und Dienstleistungen in Deutschland. "),v(),y(16,"h3"),b(17,"2.1 Funktionen"),v(),y(18,"ul")(19,"li"),b(20,"Suche nach Afroshops in der N\xE4he"),v(),y(21,"li"),b(22,"Detailinformationen zu Gesch\xE4ften"),v(),y(23,"li"),b(24,"Bewertungen und Kommentare"),v(),y(25,"li"),b(26,"Kartenansicht und Navigation"),v()()(),y(27,"section")(28,"h2"),b(29,"\xA7 3 Nutzerkonto"),v(),y(30,"h3"),b(31,"3.1 Registrierung"),v(),y(32,"p"),b(33," F\xFCr bestimmte Funktionen ist eine Registrierung erforderlich. Sie verpflichten sich, wahrheitsgem\xE4\xDFe Angaben zu machen. "),v(),y(34,"h3"),b(35,"3.2 Passwort und Sicherheit"),v(),y(36,"p"),b(37," Sie sind f\xFCr die Geheimhaltung Ihres Passworts verantwortlich und haften f\xFCr alle Aktivit\xE4ten unter Ihrem Konto. "),v()(),y(38,"section")(39,"h2"),b(40,"\xA7 4 Nutzungsregeln"),v(),y(41,"p"),b(42,"Bei der Nutzung von AfroConnect verpflichten Sie sich:"),v(),y(43,"ul")(44,"li"),b(45,"Keine rechtswidrigen Inhalte zu ver\xF6ffentlichen"),v(),y(46,"li"),b(47,"Keine beleidigenden oder diskriminierenden Inhalte"),v(),y(48,"li"),b(49,"Nur wahrheitsgem\xE4\xDFe Informationen anzugeben"),v(),y(50,"li"),b(51,"Die Rechte Dritter zu respektieren"),v()()(),y(52,"section")(53,"h2"),b(54,"\xA7 5 Inhalte und Urheberrecht"),v(),y(55,"h3"),b(56,"5.1 Nutzergenerierte Inhalte"),v(),y(57,"p"),b(58," Durch das Hochladen von Inhalten gew\xE4hren Sie AfroConnect das Recht, diese Inhalte zu nutzen, zu bearbeiten und zu ver\xF6ffentlichen. "),v(),y(59,"h3"),b(60,"5.2 Verantwortung"),v(),y(61,"p"),b(62," Sie sind allein verantwortlich f\xFCr die von Ihnen hochgeladenen Inhalte und deren Rechtm\xE4\xDFigkeit. "),v()(),y(63,"section")(64,"h2"),b(65,"\xA7 6 Haftung"),v(),y(66,"p"),b(67," AfroConnect haftet nur f\xFCr Sch\xE4den, die auf vors\xE4tzlichem oder grob fahrl\xE4ssigem Verhalten beruhen. "),v()(),y(68,"section")(69,"h2"),b(70,"\xA7 7 \xC4nderungen der AGB"),v(),y(71,"p"),b(72," Wir behalten uns vor, diese AGB jederzeit zu \xE4ndern. \xC4nderungen werden per E-Mail mitgeteilt. "),v()(),y(73,"section")(74,"h2"),b(75,"\xA7 8 K\xFCndigung"),v(),y(76,"p"),b(77," Sie k\xF6nnen Ihr Konto jederzeit l\xF6schen. Wir k\xF6nnen Konten bei Verst\xF6\xDFen gegen diese AGB sperren oder l\xF6schen. "),v()(),y(78,"section")(79,"h2"),b(80,"\xA7 9 Anwendbares Recht"),v(),y(81,"p"),b(82," Es gilt deutsches Recht. Gerichtsstand ist [Ihre Stadt], Deutschland. "),v()(),y(83,"section")(84,"h2"),b(85,"\xA7 10 Kontakt"),v(),y(86,"p"),b(87," AfroConnect"),vt(88,"br"),b(89," [Ihre Adresse]"),vt(90,"br"),b(91," Deutschland"),vt(92,"br"),b(93," E-Mail: legal@afroconnect.de "),v()()()()),t&2&&(F(5),rt("Letzte Aktualisierung: ",r.currentDate,""))},styles:[".legal-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;min-height:100vh}.legal-content[_ngcontent-%COMP%]{line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{color:#2c5530;border-bottom:2px solid #4CAF50;padding-bottom:.5rem}h2[_ngcontent-%COMP%]{color:#2c5530;margin-top:2rem}h3[_ngcontent-%COMP%]{color:#4caf50}.last-updated[_ngcontent-%COMP%]{color:#666;font-style:italic;margin-bottom:2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem}ul[_ngcontent-%COMP%]{margin-left:1rem}li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})};var pw=class n{constructor(e){this.firebaseService=e}getExistingAfroshops(){return T(this,null,function*(){return new Promise(e=>{this.firebaseService.getAllAfroshops().subscribe({next:t=>e(t),error:t=>{console.warn("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es existantes:",t),e([])}})})})}cleanDuplicates(){return T(this,null,function*(){try{console.log("\u{1F9F9} Nettoyage des doublons en cours...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops trouv\xE9s en base`);let t=new Map;e.forEach(o=>{let s=`${o.name}|${o.address}`;t.has(s)||t.set(s,[]),t.get(s).push(o)});let r=0,i=0;for(let[o,s]of t)if(s.length>1){console.log(`\u{1F50D} Doublon trouv\xE9: ${s[0].name} (${s.length} copies)`),i++;for(let a=1;a<s.length;a++)try{yield this.firebaseService.deleteAfroshop(s[a].id),r++,console.log(`\u{1F5D1}\uFE0F Supprim\xE9: ${s[a].name} (ID: ${s[a].id})`),yield this.delay(100)}catch(c){console.error(`\u274C Erreur suppression ${s[a].id}:`,c)}}else i++;return console.log(`\u2705 Nettoyage termin\xE9: ${r} supprim\xE9s, ${i} conserv\xE9s`),{removed:r,kept:i}}catch(e){throw console.error("\u274C Erreur lors du nettoyage:",e),e}})}afroshopsData=[{name:"Mama Afrika Restaurant",type:"restaurant",address:"M\xFCllerstra\xDFe 123, 13349 Berlin",coordinates:{lat:52.52,lng:13.405},phone:"+49 30 12345678",description:"Authentisches westafrikanisches Restaurant mit traditionellen Gerichten aus Ghana und Nigeria. Spezialit\xE4ten: Jollof Rice, Fufu, Kelewele.",rating:4.5,image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Fr: 12:00-22:00, Sa: 14:00-23:00, So: 14:00-21:00",website:"https://mama-afrika-berlin.de"},{name:"Ethiopian Queen Restaurant",type:"restaurant",address:"Kreuzbergstra\xDFe 45, 10965 Berlin",coordinates:{lat:52.4995,lng:13.3883},phone:"+49 30 23456789",description:"Traditionelle \xE4thiopische K\xFCche in gem\xFCtlicher Atmosph\xE4re. Injera, Doro Wat und vegetarische Optionen.",rating:4.3,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:"https://ethiopian-queen.de"},{name:"Afro Hair Salon Berlin",type:"coiffeur",address:"Hermannstra\xDFe 89, 12049 Berlin",coordinates:{lat:52.4755,lng:13.4324},phone:"+49 30 34567890",description:"Spezialist f\xFCr afroamerikanische Haarpflege. Braids, Weaves, Natural Hair Care und chemische Behandlungen.",rating:4.7,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Afrika Market Berlin",type:"epicerie",address:"Turmstra\xDFe 234, 10551 Berlin",coordinates:{lat:52.5252,lng:13.3415},phone:"+49 30 45678901",description:"Gr\xF6\xDFter afrikanischer Supermarkt in Berlin. Yams, Kochbananen, Palm\xF6l, Gew\xFCrze und Fleischspezialit\xE4ten.",rating:4.2,image:"https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Sa: 08:00-20:00, So: 10:00-18:00",website:"https://afrika-market-berlin.de"},{name:"Senegal Restaurant Hamburg",type:"restaurant",address:"Reeperbahn 456, 20359 Hamburg",coordinates:{lat:53.5511,lng:9.9937},phone:"+49 40 12345678",description:"Authentische senegalesische K\xFCche. Thieboudienne, Yassa Poulet und frische Meeresfr\xFCchte.",rating:4.4,image:"https://images.unsplash.com/photo-1547592180-85f173990554?w=800&h=600&fit=crop",cuisine:"Senegalesische",priceLevel:3,hours:"Mo-Fr: 18:00-24:00, Sa-So: 17:00-01:00",website:"https://senegal-restaurant-hh.de"},{name:"Afro Style Hamburg",type:"coiffeur",address:"Steindamm 123, 20099 Hamburg",coordinates:{lat:53.553,lng:10.0061},phone:"+49 40 23456789",description:"Moderner Afro-Friseursalon mit internationalen Stylisten. Cuts, Farben und Extensions.",rating:4.6,image:"https://images.unsplash.com/photo-1521490878783-35eb2c52f3b7?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-20:00, Sa: 09:00-18:00",website:""},{name:"Kamerun Eck M\xFCnchen",type:"restaurant",address:"Maximilianstra\xDFe 78, 80539 M\xFCnchen",coordinates:{lat:48.1351,lng:11.582},phone:"+49 89 12345678",description:"Kamerunische Spezialit\xE4ten in bayerischer Atmosph\xE4re. Ndol\xE9, Poulet DG und Kochbananen.",rating:4.1,image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=600&fit=crop",cuisine:"Kamerunische",priceLevel:2,hours:"Mo-Sa: 11:30-22:00",website:""},{name:"Nigerianisches Restaurant K\xF6ln",type:"restaurant",address:"Z\xFClpicher Stra\xDFe 234, 50937 K\xF6ln",coordinates:{lat:50.9375,lng:6.9603},phone:"+49 221 12345678",description:"Authentische nigerianische K\xFCche. Jollof Rice, Suya, Pounded Yam und Egusi Soup.",rating:4.3,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Nigerianische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa-So: 14:00-22:00",website:"https://nigerian-restaurant-koeln.de"},{name:"Eritrea Restaurant Frankfurt",type:"restaurant",address:"Berger Stra\xDFe 145, 60316 Frankfurt am Main",coordinates:{lat:50.1109,lng:8.6821},phone:"+49 69 12345678",description:"Eritreische und \xE4thiopische K\xFCche. Injera, Zigni und traditionelle Kaffeezeremonie.",rating:4.5,image:"https://images.unsplash.com/photo-1554978991-33ef7f31d658?w=800&h=600&fit=crop",cuisine:"Eritreische",priceLevel:2,hours:"Mo-So: 17:00-23:00",website:""},{name:"Afrika Laden Stuttgart",type:"epicerie",address:"K\xF6nigstra\xDFe 89, 70173 Stuttgart",coordinates:{lat:48.7758,lng:9.1829},phone:"+49 711 12345678",description:"Afrikanische Lebensmittel und Gew\xFCrze. Maniok, Kochbananen, Palm\xF6l und traditionelle Snacks.",rating:4,image:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-19:00, Sa: 09:00-17:00",website:""},{name:"Marokkanisches Restaurant D\xFCsseldorf",type:"restaurant",address:"Immermannstra\xDFe 23, 40210 D\xFCsseldorf",coordinates:{lat:51.2277,lng:6.7735},phone:"+49 211 12345678",description:"Nordafrikanische K\xFCche. Tajine, Couscous, Pastilla und marokkanische Tees.",rating:4.2,image:"https://images.unsplash.com/photo-1539353130027-9532750e7146?w=800&h=600&fit=crop",cuisine:"Marokkanische",priceLevel:3,hours:"Mo-So: 17:00-24:00",website:"https://marokko-restaurant-dus.de"},{name:"Afro Palace Dortmund",type:"restaurant",address:"Kampstra\xDFe 45, 44137 Dortmund",coordinates:{lat:51.5136,lng:7.4653},phone:"+49 231 12345678",description:"Westafrikanische und zentralafrikanische K\xFCche in modernem Ambiente.",rating:4.1,image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:2,hours:"Mo-Sa: 12:00-22:00",website:""},{name:"African Beauty Salon Essen",type:"coiffeur",address:"Kettwiger Stra\xDFe 67, 45127 Essen",coordinates:{lat:51.4556,lng:7.0116},phone:"+49 201 12345678",description:"Kompletter Service f\xFCr afrikanisches Haar. Relaxer, Braids, Weaves und Naturhaar-Styling.",rating:4.4,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 09:00-18:00, Sa: 08:00-16:00",website:""},{name:"\xC4thiopisches Restaurant Leipzig",type:"restaurant",address:"Karl-Liebknecht-Stra\xDFe 123, 04107 Leipzig",coordinates:{lat:51.3397,lng:12.3731},phone:"+49 341 12345678",description:"Traditionelle \xE4thiopische Gerichte in famili\xE4rer Atmosph\xE4re.",rating:4.3,image:"https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=800&h=600&fit=crop",cuisine:"\xC4thiopische",priceLevel:2,hours:"Mo-Sa: 17:00-22:00",website:""},{name:"Afrika Shop Bremen",type:"epicerie",address:"Osterstra\xDFe 234, 28199 Bremen",coordinates:{lat:53.0793,lng:8.8017},phone:"+49 421 12345678",description:"Afrikanische Spezialit\xE4ten und Kosmetik. Shea-Butter, schwarze Seife und exotische Fr\xFCchte.",rating:4.1,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-17:00",website:""},{name:"Sudanesisches Restaurant Dresden",type:"restaurant",address:"Prager Stra\xDFe 89, 01069 Dresden",coordinates:{lat:51.0504,lng:13.7373},phone:"+49 351 12345678",description:"Sudanesische und ostafriikanische K\xFCche. Ful Medames, Kisra und Bamya.",rating:4,image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800&h=600&fit=crop",cuisine:"Sudanesische",priceLevel:2,hours:"Mo-Fr: 12:00-21:00, Sa: 14:00-22:00",website:""},{name:"African Fashion Hannover",type:"vetement",address:"Georgstra\xDFe 156, 30159 Hannover",coordinates:{lat:52.3759,lng:9.732},phone:"+49 511 12345678",description:"Afrikanische Mode und Accessoires. Dashiki, Kente-Stoffe und handgemachter Schmuck.",rating:4.2,image:"https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=800&h=600&fit=crop",cuisine:"",priceLevel:3,hours:"Mo-Fr: 10:00-19:00, Sa: 10:00-18:00",website:"https://african-fashion-hannover.de"},{name:"Westafrica N\xFCrnberg",type:"restaurant",address:"K\xF6nigstra\xDFe 234, 90402 N\xFCrnberg",coordinates:{lat:49.4521,lng:11.0767},phone:"+49 911 12345678",description:"Ghanaische und ivorische K\xFCche. Banku, Atti\xE9k\xE9 und Palm Nut Soup.",rating:4.4,image:"https://images.unsplash.com/photo-1551218808-94e220e084d2?w=800&h=600&fit=crop",cuisine:"Ghanaische",priceLevel:2,hours:"Mo-Sa: 11:00-22:00",website:""}];kleinestadtAfroshops=[{name:"Afrika Imbiss Soest",type:"restaurant",address:"Thom\xE4stra\xDFe 12, 59494 Soest",coordinates:{lat:51.5671,lng:8.1067},phone:"+49 2921 123456",description:"Kleiner gem\xFCtlicher Imbiss mit westafrikanischen Spezialit\xE4ten. Hausgemachtes Jollof Rice.",rating:4.2,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&h=600&fit=crop",cuisine:"Westafrikanische",priceLevel:1,hours:"Mo-Fr: 11:00-20:00, Sa: 12:00-21:00",website:""},{name:"Afro Hair Werl",type:"coiffeur",address:"Hammer Stra\xDFe 34, 59457 Werl",coordinates:{lat:51.5531,lng:7.9119},phone:"+49 2922 234567",description:"Spezialisiert auf afrikanische Frisuren in ruhiger Kleinstadt-Atmosph\xE4re.",rating:4.5,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=800&h=600&fit=crop",cuisine:"",priceLevel:2,hours:"Mo-Fr: 09:00-18:00, Sa: 09:00-15:00",website:""}];seedDatabase(){return T(this,null,function*(){try{console.log("\u{1F331} D\xE9but du peuplement de la base de donn\xE9es...");let e=yield this.getExistingAfroshops();console.log(`\u{1F4CA} ${e.length} Afroshops d\xE9j\xE0 en base`);let r=[...this.afroshopsData,...this.kleinestadtAfroshops].filter(s=>!e.some(a=>a.name===s.name&&a.address===s.address));if(console.log(`\u2728 ${r.length} nouveaux Afroshops \xE0 ajouter`),r.length===0)throw new Error("\u26A0\uFE0F Tous les Afroshops sont d\xE9j\xE0 en base ! Aucun nouvel ajout n\xE9cessaire.");let i=0,o=0;for(let s of r)try{let a=le(j({},s),{city:this.extractCityFromAddress(s.address),verified:!0,createdBy:"system",createdByName:"System Import",views:Math.floor(Math.random()*100)+10,likes:Math.floor(Math.random()*20)+5});yield this.firebaseService.addAfroshop(a),i++,console.log(`\u2705 ${s.name} ajout\xE9 avec succ\xE8s`),yield this.delay(100)}catch(a){o++,console.error(`\u274C Erreur lors de l'ajout de ${s.name}:`,a)}console.log(`\u{1F389} Import termin\xE9: ${i} ajout\xE9s, ${o} erreurs`)}catch(e){console.error("\u{1F4A5} Erreur g\xE9n\xE9rale lors du seeding:",e)}})}extractCityFromAddress(e){let t=e.split(",");if(t.length>=2){let r=t[t.length-1].trim(),i=r.match(/\d+\s+(.+)/);return i?i[1].toLowerCase():r.toLowerCase()}return""}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||n)(ue(Ki))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function Poe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F680} Datenbank mit Afroshops f\xFCllen"),v())}function koe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Import l\xE4uft..."),v())}function Ooe(n,e){n&1&&(y(0,"span"),b(1,"\u{1F9F9} Doublons entfernen"),v())}function Noe(n,e){n&1&&(y(0,"span"),b(1,"\u23F3 Nettoyage l\xE4uft..."),v())}function Loe(n,e){n&1&&(y(0,"div",16),vt(1,"div",17),y(2,"p"),b(3,"Afroshops werden hinzugef\xFCgt... Bitte warten."),v()())}function Foe(n,e){n&1&&(y(0,"div",16),vt(1,"div",17),y(2,"p"),b(3,"Doublons werden entfernt... Bitte warten."),v()())}function Voe(n,e){if(n&1&&(y(0,"div",18),b(1),v()),n&2){let t=J(2);Ja(t.seedingMessage.includes("\u274C")?"error":"success"),F(),rt(" ",t.seedingMessage," ")}}function Uoe(n,e){if(n&1&&(y(0,"div",18),b(1),v()),n&2){let t=J(2);Ja(t.cleaningMessage.includes("\u274C")?"error":"success"),F(),rt(" ",t.cleaningMessage," ")}}function Boe(n,e){if(n&1){let t=nt();y(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2"),b(4,"\u{1F331} Peuplement de la base de donn\xE9es"),v(),y(5,"p"),b(6,"Ajouter des Afroshops dans toute l'Allemagne pour donner vie \xE0 l'application"),v()(),y(7,"div",7)(8,"h3"),b(9,"\u{1F4CA} Donn\xE9es incluses:"),v(),y(10,"ul")(11,"li"),b(12,"\u{1F3D9}\uFE0F "),y(13,"strong"),b(14,"Grandes villes:"),v(),b(15," Berlin, Hamburg, M\xFCnchen, K\xF6ln, Frankfurt, Stuttgart, D\xFCsseldorf, Dortmund, Essen"),v(),y(16,"li"),b(17,"\u{1F3D8}\uFE0F "),y(18,"strong"),b(19,"Villes moyennes:"),v(),b(20," Leipzig, Bremen, Dresden, Hannover, N\xFCrnberg"),v(),y(21,"li"),b(22,"\u{1F3E1} "),y(23,"strong"),b(24,"Petites villes & Kreise:"),v(),b(25," Soest, Werl (Kreis Soest) et autres"),v(),y(26,"li"),b(27,"\u{1F37D}\uFE0F "),y(28,"strong"),b(29,"Types:"),v(),b(30," Restaurants, Friseure, Lebensmittelgesch\xE4fte, Mode, Services"),v(),y(31,"li"),b(32,"\u{1F30D} "),y(33,"strong"),b(34,"Cuisines:"),v(),b(35," Westafrikanische, \xC4thiopische, Senegalesische, Kamerunische, Nigerianische, etc."),v()()(),y(36,"div",8)(37,"button",9),fe("click",function(){se(t);let i=J();return ae(i.seedDatabase())}),he(38,Poe,2,0,"span",10)(39,koe,2,0,"span",10),v(),y(40,"button",11),fe("click",function(){se(t);let i=J();return ae(i.cleanDuplicates())}),he(41,Ooe,2,0,"span",10)(42,Noe,2,0,"span",10),v(),he(43,Loe,4,0,"div",12)(44,Foe,4,0,"div",12),v(),he(45,Voe,2,3,"div",13)(46,Uoe,2,3,"div",13),v(),y(47,"div",14)(48,"button",15),fe("click",function(){se(t);let i=J();return ae(i.goToGallery())}),b(49," \u{1F3EA} Voir la galerie "),v()()()}if(n&2){let t=J();F(37),q("disabled",t.isSeeding||t.isCleaning),F(),q("ngIf",!t.isSeeding),F(),q("ngIf",t.isSeeding),F(),q("disabled",t.isCleaning||t.isSeeding),F(),q("ngIf",!t.isCleaning),F(),q("ngIf",t.isCleaning),F(),q("ngIf",t.isSeeding),F(),q("ngIf",t.isCleaning),F(),q("ngIf",t.seedingMessage),F(),q("ngIf",t.cleaningMessage)}}function joe(n,e){n&1&&(y(0,"div",19)(1,"h2"),b(2,"\u{1F510} Authentification requise"),v(),y(3,"p"),b(4,"Vous devez \xEAtre connect\xE9 pour acc\xE9der aux outils d'administration."),v()())}var gw=class n{constructor(e,t,r){this.dataSeedingService=e;this.authService=t;this.router=r;this.authService.user$.subscribe(i=>{if(!i){this.router.navigate(["/login"]);return}this.checkAdminAccess(i)})}isSeeding=!1;isCleaning=!1;seedingMessage="";cleaningMessage="";isAuthenticated=!1;checkAdminAccess(e){let t=["youssoufdiamaldiallo@gmail.com","admin@afroconnect.de"];this.isAuthenticated=e&&e.email&&t.includes(e.email),this.isAuthenticated||(console.warn("\u{1F6AB} Acc\xE8s admin refus\xE9 pour:",e.email),this.router.navigate(["/gallery"]))}seedDatabase(){return T(this,null,function*(){if(!this.isAuthenticated){this.seedingMessage="\u274C Vous devez \xEAtre connect\xE9 pour effectuer cette action";return}if(!(this.isSeeding||!confirm(`\u{1F6A8} ACHTUNG!

Diese Aktion wird etwa 50+ neue Afroshops in die Datenbank hinzuf\xFCgen.

\u{1F50D} Bereits vorhandene Gesch\xE4fte werden automatisch \xFCbersprungen.

M\xF6chten Sie fortfahren?`))){this.isSeeding=!0,this.seedingMessage="\u{1F331} Import l\xE4uft... Dies kann einige Minuten dauern.";try{yield this.dataSeedingService.seedDatabase(),this.seedingMessage="\u2705 Datenbank erfolgreich mit neuen Afroshops gef\xFCllt!"}catch(t){console.error("Fehler beim Seeding:",t),this.seedingMessage="\u274C Fehler beim Import. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isSeeding=!1}}})}goToGallery(){this.router.navigate(["/gallery"])}cleanDuplicates(){return T(this,null,function*(){if(!this.isAuthenticated){this.cleaningMessage="\u274C Sie m\xFCssen angemeldet sein, um diese Aktion durchzuf\xFChren";return}if(!(this.isCleaning||!confirm(`\u{1F9F9} DOUBLONS NETTOYAGE

Diese Aktion wird alle doppelten Afroshops l\xF6schen.

\u26A0\uFE0F Nur das erste Exemplar jedes Gesch\xE4fts wird beibehalten.

M\xF6chten Sie fortfahren?`))){this.isCleaning=!0,this.cleaningMessage="\u{1F9F9} Doublons werden entfernt... Bitte warten.";try{let t=yield this.dataSeedingService.cleanDuplicates();this.cleaningMessage=`\u2705 Nettoyage abgeschlossen! ${t.removed} Doublons entfernt, ${t.kept} Afroshops beibehalten.`}catch(t){console.error("Fehler beim Nettoyage:",t),this.cleaningMessage="\u274C Fehler beim Nettoyage. Konsole f\xFCr Details \xFCberpr\xFCfen."}finally{this.isCleaning=!1}}})}static \u0275fac=function(t){return new(t||n)(te(pw),te(fn),te(_t))};static \u0275cmp=It({type:n,selectors:[["app-admin"]],decls:8,vars:2,consts:[[1,"admin-container"],[1,"admin-header"],["class","admin-panel",4,"ngIf"],["class","auth-required",4,"ngIf"],[1,"admin-panel"],[1,"seeding-section"],[1,"section-header"],[1,"data-info"],[1,"action-section"],[1,"seed-btn",3,"click","disabled"],[4,"ngIf"],[1,"clean-btn",3,"click","disabled"],["class","progress-indicator",4,"ngIf"],["class","message",3,"class",4,"ngIf"],[1,"navigation-section"],[1,"nav-btn",3,"click"],[1,"progress-indicator"],[1,"spinner"],[1,"message"],[1,"auth-required"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),b(3,"\u{1F527} AfroConnect - Administration"),v(),y(4,"p"),b(5,"Outils pour g\xE9rer la base de donn\xE9es d'Afroshops"),v()(),he(6,Boe,50,10,"div",2)(7,joe,5,0,"div",3),v()),t&2&&(F(6),q("ngIf",r.isAuthenticated),F(),q("ngIf",!r.isAuthenticated))},dependencies:[ln,mn],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.admin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;font-size:2.5rem;margin-bottom:.5rem}.admin-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem}.admin-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.seeding-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;font-size:1.8rem;margin-bottom:.5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.data-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:12px;padding:1.5rem;margin-bottom:2rem}.data-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:1rem}.data-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.data-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.action-section[_ngcontent-%COMP%]{text-align:center;margin:2rem 0;display:flex;flex-direction:column;gap:1rem}.seed-btn[_ngcontent-%COMP%], .clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px #27ae604d;min-width:300px;margin:0 auto}.clean-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);box-shadow:0 6px 20px #e74c3c4d}.seed-btn[_ngcontent-%COMP%]:hover:not(:disabled), .clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 12px 30px #27ae6066}.clean-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 12px 30px #e74c3c66}.seed-btn[_ngcontent-%COMP%]:disabled, .clean-btn[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a}.progress-indicator[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #27ae60;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-top:1.5rem;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.navigation-section[_ngcontent-%COMP%]{text-align:center;padding-top:2rem;border-top:1px solid #e9ecef}.nav-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:10px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block}.nav-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.auth-required[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:#fff3cd;border:1px solid #ffeaa7;border-radius:12px;color:#856404}.auth-required[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#856404;margin-bottom:1rem}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.admin-panel[_ngcontent-%COMP%]{padding:1.5rem}.seed-btn[_ngcontent-%COMP%]{min-width:auto;width:100%;padding:1rem}.data-info[_ngcontent-%COMP%]{padding:1rem}}"]})};var Ld=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(In(1),be(e=>e?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}}),!1)))}static \u0275fac=function(t){return new(t||n)(ue(fn),ue(_t))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var rz=[{path:"",redirectTo:"/gallery",pathMatch:"full"},{path:"gallery",component:cw},{path:"afroshop/:id",component:lw},{path:"add-afroshop",component:jp,canActivate:[Ld]},{path:"edit-afroshop/:id",component:jp,canActivate:[Ld]},{path:"admin",component:gw,canActivate:[Ld]},{path:"login",component:uw},{path:"register",component:dw},{path:"privacy",component:hw},{path:"terms",component:fw},{path:"**",redirectTo:"/gallery"}];var iz={production:!1,firebase:{apiKey:"AIzaSyBY571lmuW24qnczKhCGORAGWg4gei8cek",authDomain:"afroconnect-a53a5.firebaseapp.com",projectId:"afroconnect-a53a5",storageBucket:"afroconnect-a53a5.firebasestorage.app",messagingSenderId:"341889512681",appId:"1:341889512681:web:e4073a27dded8eae9e2c78"}};var oz={providers:[jO({eventCoalescing:!0}),tT(rz),gN(pN()),JL(()=>ZL(iz.firebase)),$4(()=>K4()),NV(()=>VV()),Ij(()=>Tj())]};function zoe(n,e){if(n&1){let t=nt();y(0,"div",18)(1,"span",19),b(2),v(),y(3,"button",20),fe("click",function(){se(t);let i=J();return ae(i.logout())}),b(4," \u{1F6AA} Abmelden "),v()()}if(n&2){let t=e.ngIf;F(2),rt("Hallo, ",t.displayName||t.email,"!")}}function $oe(n,e){n&1&&(y(0,"div",21)(1,"a",22),b(2,"\u{1F510} Anmelden"),v(),y(3,"a",23),b(4,"\u{1F4DD} Registrieren"),v()())}var mw=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}title="AfroConnect";user$;ngOnInit(){}logout(){return T(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/gallery"])}catch(e){console.error("Erreur lors de la d\xE9connexion:",e)}})}static \u0275fac=function(t){return new(t||n)(te(fn),te(_t))};static \u0275cmp=It({type:n,selectors:[["app-root"]],decls:32,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["routerLink","/",1,"logo-link"],[1,"welcome-message"],[1,"header-right"],["class","user-menu",4,"ngIf"],["class","auth-buttons",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"footer-content"],[1,"footer-main"],[1,"footer-links"],["routerLink","/privacy",1,"footer-link"],[1,"footer-separator"],["routerLink","/terms",1,"footer-link"],["href","mailto:contact@afroconnect.de",1,"footer-link"],[1,"user-menu"],[1,"user-greeting"],[1,"logout-btn",3,"click"],[1,"auth-buttons"],["routerLink","/login",1,"auth-link","login-link"],["routerLink","/register",1,"auth-link","register-link"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1"),b(6,"\u{1F30D} AfroConnect"),v()(),y(7,"p",5),b(8,"Verbinde dich mit der afrikanischen Community in Deutschland"),v()(),y(9,"div",6),he(10,zoe,5,1,"div",7),Gr(11,"async"),he(12,$oe,5,0,"div",8),Gr(13,"async"),v()()(),y(14,"main",9),vt(15,"router-outlet"),v(),y(16,"footer",10)(17,"div",11)(18,"div",12)(19,"p"),b(20,"\xA9 2025 AfroConnect - Verbinde dich mit deiner Community"),v()(),y(21,"div",13)(22,"a",14),b(23,"Datenschutz"),v(),y(24,"span",15),b(25,"|"),v(),y(26,"a",16),b(27,"AGB"),v(),y(28,"span",15),b(29,"|"),v(),y(30,"a",17),b(31,"Kontakt"),v()()()()()),t&2&&(F(10),q("ngIf",Wr(11,2,r.user$)),F(2),q("ngIf",!Wr(13,4,r.user$)))},dependencies:[ln,mn,Lh,of,sc,Us],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:#fff;padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:all .3s ease;cursor:pointer;border-radius:var(--border-radius);padding:var(--spacing-xs);margin:calc(-1 * var(--spacing-xs))}.logo-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.logo-link[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:300;transition:all .3s ease}.logo-link[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 10px rgba(255,255,255,.3)}.welcome-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.2rem;opacity:.9}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.user-greeting[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;font-size:.9rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.auth-link[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius);text-decoration:none;font-size:.9rem;font-weight:500;transition:all .3s ease}.login-link[_ngcontent-%COMP%]{color:#fff;border:1px solid rgba(255,255,255,.3);background:#ffffff1a}.login-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.register-link[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);border:1px solid white}.register-link[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-1px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem}}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);background-color:var(--background-light)}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.content-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-dark);text-align:center;margin-bottom:var(--spacing-lg);font-size:2rem}.content-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1rem;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin-top:2rem}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;margin-top:0;font-size:1.3rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;margin-top:auto}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-sm);text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-message[_ngcontent-%COMP%]{font-size:1rem;margin-top:var(--spacing-xs)}.auth-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);width:100%}.auth-link[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-sm) var(--spacing-md)}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.logo-link[_ngcontent-%COMP%]{padding:var(--spacing-sm);margin:calc(-1 * var(--spacing-sm))}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-xs);text-align:center}}.app-footer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:var(--spacing-lg) var(--spacing-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.footer-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:.9rem;opacity:.8;transition:opacity .3s ease}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.footer-separator[_ngcontent-%COMP%]{opacity:.5;font-size:.8rem}@media (max-width: 768px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--spacing-md)}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-main[_ngcontent-%COMP%]{padding:1rem}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.feature-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};Tb(mw,oz).catch(n=>console.error(n));
